 ;;Solution_Test/script/PathNet -- BB Transfusion/Bbt_Longtext_Inc/BBT_ADD_LONG_TEXT.INC Turn on black mode

/*
 * bbt_add_long_text.inc:  create long_text row
 *
 * USE:
 *  1.  Include bbt_add_long_text.inc in calling program (NOTE:  the 'END' for the subroutine is to be coded in the 
 *      calling program to allow for additional functionality for the subroutine by the calling program):
 *          %i cclsource:bbt_add_long_text.inc
 *          END         ; end subroutine ADD_LONG_TEXT
 *  2.  Generate new long_text_id as follows:
 *          select into "nl:"
 *              seqn = seq(LONG_DATA_SEQ, nextval) "##################;rp0"
 *          from        dual
 *          detail
 *              gsub_long_text_id   = cnvtreal(seqn)
 *          with        format, nocounter
 *  3.  Call ADD_LONG_TEXT as follows: */
 ;          call ADD_LONG_TEXT
 ;             (
 ;              /* long_text_id       */ <long_text_id>,                    ; generated above
 ;              /* parent_entity_name */ cnvtupper(<parent table name>),    ; i.e., "PRODUCT_NOTE" 
 ;              /* parent_entity_id   */ <parent table row _id>,            ; i.e., product_note_id
 ;              /* long_text          */ <text>
 ;             )
/*  4.  Evaluate curqual to determine success/failure of add
 */

subroutine ADD_LONG_TEXT
    (
     sub_long_text_id,
     sub_parent_entity_name,
     sub_parent_entity_id,
     sub_long_text
    )


    insert into long_text lt
        set lt.long_text_id             = sub_long_text_id,
            lt.parent_entity_name       = sub_parent_entity_name,
            lt.parent_entity_id         = sub_parent_entity_id,
            lt.long_text                = sub_long_text,
            lt.updt_cnt                 = 0,
            lt.updt_dt_tm               = cnvtdatetime(curdate, curtime3),
            lt.updt_id                  = reqinfo->updt_id,
            lt.updt_task                = reqinfo->updt_task,
            lt.updt_applctx             = reqinfo->updt_applctx,
            lt.active_ind               = 1,
            lt.active_status_cd         = reqdata->active_status_cd,
            lt.active_status_dt_tm      = cnvtdatetime(curdate, curtime3),
            lt.active_status_prsnl_id   = reqinfo->updt_id
    with    nocounter                            

/* END for subroutine is to be coded in calling program to allow for additional processing in subroutine */

;Generated by GNU enscript 1.6.4.
