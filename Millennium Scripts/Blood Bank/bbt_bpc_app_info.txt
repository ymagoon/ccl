 ;;Solution_Test/script/PathNet -- BB Transfusion/Bloodbankproductclass/BBT_BPC_APP_INFO.PRG Turn on black mode

/*~BB~************************************************************************
      *                                                                      *
      *  Copyright Notice:  (c) 1983 Laboratory Information Systems &        *
      *                              Technology, Inc.                        *
      *       Revision      (c) 1984-1994 Cerner Corporation                 *
      *                                                                      *
      *  Cerner (R) Proprietary Rights Notice:  All rights reserved.         *
      *  This material contains the valuable properties and trade secrets of *
      *  Cerner Corporation of Kansas City, Missouri, United States of       *
      *  America (Cerner), embodying substantial creative efforts and        *
      *  confidential information, ideas and expressions, no part of which   *
      *  may be reproduced or transmitted in any form or by any means, or    *
      *  retained in any storage or retrieval system without the express     *
      *  written permission of Cerner.                                       *
      *                                                                      *
      *  Cerner is a registered mark of Cerner Corporation.                  *
      *                                                                      *
  ~BE~************************************************************************
/*****************************************************************************


        Source file name:       BBT_BPC_APP_INFO
        Object name:            BBT_BPC_APP_INFO
        Request #:              225140

        Product:                Pathnet                              
        Product Team:           Blood Bank
        HNA Version:            500
        CCL Version:            4.0
        
        Program purpose:        Get information regarding an application event
                                using the updt_appcltx field on the table affected
        Tables read:            application,application_context
        Tables updated:         none
        Executing from:         blood_bank_product_server
                                Donor Search


        Special Notes:          none
******************************************************************************/

 
;~DB~************************************************************************
;    *                      GENERATED MODIFICATION CONTROL LOG              *
;    ************************************************************************
;    *                                                                      *
;    *Mod Date     Engineer             Comment                             *
;    *--- -------- -------------------- ----------------------------------- *
;     001 08/11/96 Martin Olson         Initial Release                     *
;~DE~************************************************************************

drop program BBT_BPC_APP_INFO:dba go
create program BBT_BPC_APP_INFO:dba

/*
record request
(
    1  applctx_id = f8
)
*/

record reply
(   
    1  application_nbr           = i4
    1  user_name                 = vc
    1  app_start_dt_tm           = dq8
    1  device_location           = vc
    1  application_desc           = vc
%i cclsource:status_block.inc
)

set reply->status_data->status = "F"

select into "nl:"
    ac.app_ctx_id,
    ac.application_number,
    ac.name,
    ac.start_dt_tm,
    ac.device_location,
    a.application_number,
    a.description

from
    application_context ac,
    application a

plan ac where (request->applctx_id = ac.applctx)
join a where (ac.application_number = a.application_number)
      

detail       
    reply->application_nbr     = ac.application_number
    reply->user_name           = ac.name
    reply->app_start_dt_tm     = ac.start_dt_tm
    reply->device_location     = ac.device_location
    reply->application_desc    = a.description
with nocounter

if (curqual = 0)
   set reply->status_data->status = "F"
else 
   set reply->status_data->status = "S"
   ;call echo(reply->application_nbr)
   ;call echo(reply->application_desc)     
endif

end go

;Generated by GNU enscript 1.6.4.
