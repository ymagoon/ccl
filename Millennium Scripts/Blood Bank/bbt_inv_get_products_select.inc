 ;;Solution_Test/script/PathNet -- BB Transfusion/Scriptinventorysearch/BBT_INV_GET_PRODUCTS_SELECT.INC Turn on black mode

/* included in bbt inventory search programs */

    order by    p.product_id

    head report
        product_count = 0
        stat = alterlist(reply->qual, 100)

    head p.product_id
        product_count  = product_count  + 1
        if (mod(product_count, 100) = 1 and product_count != 1)    
            stat = alterlist (reply->qual, product_count + 99)
        endif
        reply->qual[product_count].product_id       = p.product_id
        reply->qual[product_count].product_cd       = p.product_cd
        reply->qual[product_count].product_sub      = p.product_sub_nbr
        if (bp.seq != NULL and bp.seq > 0)
            reply->qual[product_count].product_number   = concat
                                                            (
                                                            trim(bp.supplier_prefix),
                                                            trim(p.product_nbr)
                                                            )
            reply->qual[product_count].abo_cd               = bp.cur_abo_cd
            reply->qual[product_count].rh_cd                = bp.cur_rh_cd
            reply->qual[product_count].volume_display       = bp.cur_volume
			reply->qual[product_count].deriv_cur_avail_qty  = -1
        else
            reply->qual[product_count].product_number   = p.product_nbr
            reply->qual[product_count].abo_cd               = 0.0
            reply->qual[product_count].rh_cd                = 0.0
            reply->qual[product_count].volume_display       = d.item_volume
			reply->qual[product_count].deriv_cur_avail_qty  = d.cur_avail_qty
        endif
        reply->qual[product_count].exp_dt_tm        = p.cur_expire_dt_tm
        reply->qual[product_count].unit_of_meas_cd  = p.cur_unit_meas_cd
        reply->qual[product_count].location_cd      = p.cur_inv_locn_cd
        reply->qual[product_count].cur_owner_area_cd = p.cur_owner_area_cd
        reply->qual[product_count].cur_inv_area_cd  = p.cur_inv_area_cd 
        reply->qual[product_count].alt_id_display   = p.alternate_nbr
        reply->qual[product_count].comment_ind      = 0
        reply->qual[product_count].electronic_entry_flag = p.electronic_entry_flag
		reply->qual[product_count].cur_dispense_device_disp = bbid.description
    foot report
        stat = alterlist(reply->qual, product_count)

    with    nocounter

;Generated by GNU enscript 1.6.4.
