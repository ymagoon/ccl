 ;;Solution_Test/script/Bedrock/bed_rec_mdi_gl_result_run/bed_rec_mdi_gl_result_run.prg Turn on black mode

/************************************************************************
 *                                                                      *
 *  Copyright Notice:  (c) 1983 Laboratory Information Systems &        *
 *                              Technology, Inc.                        *
 *       Revision      (c) 1984-1995 Cerner Corporation                 *
 *                                                                      *
 *  Cerner (R) Proprietary Rights Notice:  All rights reserved.         *
 *  This material contains the valuable properties and trade secrets of *
 *  Cerner Corporation of Kansas City, Missouri, United States of       *
 *  America (Cerner), embodying substantial creative efforts and        *
 *  confidential information, ideas and expressions, no part of which   *
 *  may be reproduced or transmitted in any form or by any means, or    *
 *  retained in any storage or retrieval system without the express     *
 *  written permission of Cerner.                                       *
 *                                                                      *
 *  Cerner is a registered mark of Cerner Corporation.                  *
 *                                                                      *
 ************************************************************************
 
          Date Written:
          Source file name:		bed_rec_mdi_gl_result_run.prg
          Object name:			bed_rec_mdi_gl_result_run
          Request #:
 
          Product:
          HNA Version:
          CCL Version:
 
          Program purpose:		MDI Purge GenLab Result Rows Running
 
 
          Tables read:
          Tables updated:
 
          Executing from:
 
          Special Notes:
 
 *****************************************************************************
 *                  GENERATED MODIFICATION CONTROL LOG                       *
 *****************************************************************************
 *                                                                           *
 *Mod Date     Engineer        Comment                                       *
 *--- -------- --------------  ----------------------------------------------*
      08/27/09 Kelli Wade      Initial Release
 ******************  END OF ALL MODCONTROL BLOCKS  ***************************/
 
drop program bed_rec_mdi_gl_result_run:dba go
create program bed_rec_mdi_gl_result_run:dba
 
if(not(validate(request,0)))
  record request
  ( 1 program_name = vc
  )
endif
 
if(not(validate(reply,0)))
  free set reply
  record reply
  ( 1 run_status_flag = i2
    1 status_data
      2 status = c1
      2 subeventstatus[1]
        3 OperationName = c25
        3 OperationStatus = c1
        3 TargetObjectName = c25
        3 TargetObjectValue = vc
  )
endif
 
 
set reply->run_status_flag = 3
 
 
select into "nl:"
from dm_purge_job j,
	 dm_purge_template t,
	 dm_purge_job_token jt,
	 dm_purge_token pt,
	 dm_purge_job_log l
plan j
	where j.active_flag = 1
	  and j.template_nbr = 118
join t
	where t.active_ind = 1
	  and t.template_nbr = j.template_nbr
join jt
	where jt.job_id = j.job_id
join pt
	where pt.template_nbr = t.template_nbr
join l
 	where l.job_id = j.job_id
    and l.updt_dt_tm > cnvtdatetime(curdate-1,0)
detail
	if (l.purge_flag in (1,2))
		reply->run_status_flag = 1
	endif
with nocounter
 
 
 
#exit_script
 
set reply->status_data->status = "S"
call echorecord(reply)
 
end go

;Generated by GNU enscript 1.6.4.
