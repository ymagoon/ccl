 ;;Solution_Test/script/PathNet -- Gen Lab/glb_add_operations_parameters/GLB_ADD_OPERATIONS_PARAMETERS.PRG Turn on black mode



/*~BB~************************************************************************
      *                                                                      *
      *  Copyright Notice:  (c) 1983 Laboratory Information Systems &        *
      *                              Technology, Inc.                        *
      *       Revision      (c) 1984-1995 Cerner Corporation                 *
      *                                                                      *
      *  Cerner (R) Proprietary Rights Notice:  All rights reserved.         *
      *  This material contains the valuable properties and trade secrets of *
      *  Cerner Corporation of Kansas City, Missouri, United States of       *
      *  America (Cerner), embodying substantial creative efforts and        *
      *  confidential information, ideas and expressions, no part of which   *
      *  may be reproduced or transmitted in any form or by any means, or    *
      *  retained in any storage or retrieval system without the express     *
      *  written permission of Cerner.                                       *
      *                                                                      *
      *  Cerner is a registered mark of Cerner Corporation.                  *
      *                                                                      *
  ~BE~***********************************************************************/

/*****************************************************************************

        Source file name:       GLB_ADD_OPERATIONS_PARAMETERS.PRG
        Object name:            GLB_ADD_OPERATIONS_PARAMETERS
        Request #:              250092

        Product:                General Lab                          
        Product Team:           PathNet
        HNA Version:            500
        CCL Version:            4.0

        Program purpose:        Add new operations parameters, using code_value obtained from
                                cpm_next_code

        Tables read:            code_value

        Tables updated:         code_value
        Executing from:         GenLabOpsBuild.exe

        Special Notes:          none

******************************************************************************/


;~DB~************************************************************************
;    *                      GENERATED MODIFICATION CONTROL LOG              *
;    ************************************************************************
;    *                                                                      *
;    *Mod Date     Engineer             Comment                             *
;    *--- -------- -------------------- ----------------------------------- *
;    *000 01/28/96 John Mitchell        Initial Release                     *
;~DE~************************************************************************


;~END~ ******************  END OF ALL MODCONTROL BLOCKS  ********************
 



drop program glb_add_operations_parameters:dba go
create program glb_add_operations_parameters:dba
/*
record request
(
1 display 	= vc
1 definition 	= vc
1 meaning     	= vc
)
*/

record reply
(
1 code_value = f8
;1 nonunique =  vc
%i cclsource:status_block.inc
)
;set reply->nonunique = "F"
set next_code = 0.0
set counter2 = 0
execute cpm_next_code

select into "nl:"
        c.seq
from code_value c
where c.code_set = 1950 and c.active_ind = 1
and c.display_key = trim(cnvtupper(cnvtalphanum(request->display)))
  ;      and c.active_ind = 1
with maxqual(c,1),nocounter

if (curqual = 1)
        set reply->status_data->status = "D"
        go to EXIT_SCRIPT
endif

set reply->code_value = next_code

insert into code_value c 
set
        c.cdf_meaning = request->meaning,
        c.definition = request->definition,
        c.code_value = next_code,
        c.code_set = 1950,
        c.display = request->display,     
        c.display_key = trim(cnvtupper(cnvtalphanum(request->display))),
        c.collation_seq = 0,
        c.active_type_cd = 0,
        c.active_ind = 1,
        c.active_dt_tm = cnvtdatetime(curdate,curtime3),
        c.updt_dt_tm = cnvtdatetime(curdate,curtime3),
        c.updt_id = 0,
        c.updt_cnt = 0,
        c.updt_task = 0,
        c.updt_applctx = 0,
        c.begin_effective_dt_tm = cnvtdatetime(curdate,curtime3),
;       c.end_effective_dt_tm = 
        c.data_status_cd = 0,
        c.data_status_prsnl_id = 0,
        c.active_status_prsnl_id = 0

with    nocounter

if (curqual = 0)
        set reqinfo->commit_ind = 0
else
        set reqinfo->commit_ind = 1
        set reply->status_data->status = "S"
endif

#EXIT_SCRIPT

end go




;Generated by GNU enscript 1.6.4.
