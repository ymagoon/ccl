 ;;Solution_Test/script/PathNet -- Common Services/ACCESSION_SETTINGS/ACCESSION_SETTINGS.PRG Turn on black mode

;;
;; File:  accession_settings.prg
;; Description: Reads the system settings from the accession_setup table.
;; Request Nbr: n/a
;;
;;-----------------------------------------------------------------------------
;; Date                  Feature    Description
;; -------- -----------  ---------- -------------------------------------------
;; 07/01/99 CERGYL             6255  File creation.
;; 03/21/01 RP2320            16902  Fix missing 't' in default.

drop program accession_settings:dba go
create program accession_settings:dba

if (acc_settings->acc_settings_loaded = 1)
  go to EXIT_SCRIPT
endif

set acc_settings->default_site_cd = 0
set acc_settings->default_site_prefix = fillstring (5, "0")

select into "nl:" a.default_site_cd
from accession_setup a
plan a
where a.accession_setup_id = 72696.00

head report
  an_display = fillstring (40, " ")

detail
  acc_settings->site_code_length = a.site_code_length
  acc_settings->julian_sequence_length = a.julian_sequence_length
  acc_settings->alpha_sequence_length = a.alpha_sequence_length
  acc_settings->year_display_length = a.year_display_length
  acc_settings->default_site_cd = a.default_site_cd
  acc_settings->acc_settings_loaded = 1

  if (a.assign_future_days > 0)
    acc_settings->assignment_days = a.assign_future_days
  else

    ;*
    ;* The upper limit on accession assignment is 1825 (approximately 5 years).
    ;*

    acc_settings->assignment_days = 1825
  endif

  acc_settings->assignment_dt_tm = datetimeadd (sysdate, acc_settings->assignment_days)

with nocounter


if (acc_settings->default_site_cd > 0)

 set acc_site_prefix_cd = acc_settings->default_site_cd
 execute accession_site_code
 set acc_settings->default_site_prefix = acc_site_prefix

endif

#EXIT_SCRIPT

end go

;Generated by GNU enscript 1.6.4.
