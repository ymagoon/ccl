 ;;Solution_Test/script/PathNet -- Gen Lab/glb_errchk_arl_effect_dates/glb_errchk_arl_effect_dates.prg Turn on black mode

drop program GLB_ERRCHK_ARL_EFFECT_DATES:dba go
create program GLB_ERRCHK_ARL_EFFECT_DATES:dba

/* Error checking for the equation */
select into GLB_ERRCHK_ARL_EFFECT_DATES
  arl.task_assay_cd
 ,arl.service_resource_cd
 ,arl.lot_id
 ,arl.beg_effective_dt_tm
 ,c.display

from
  assay_resource_lot arl,
  code_value c

plan arl
  where arl.arl_id > 0
    and arl.beg_effective_dt_tm = NULL
join c
  where arl.task_assay_cd = c.code_value

head report
  col 1, "There may be duplicates for the assay_resource_lot table if there are assays listed below."
  row + 1
  col 1, "Information listed includeds assay, resource, lot, begin effective date/time."
  row + 1

detail
  col 1, c.display
  row + 1
  col 1, arl.task_assay_cd
  col 25, arl.service_resource_cd
  col 50, arl.lot_id
  row + 1

with
  nocounter

if (curqual != 0)
  set request->setup_proc[1]->success_ind = 0
  set request->setup_proc[1]->error_msg = "ASSAY_RESOURCE_LOT without begin effective date/time."
else
  set request->setup_proc[1]->success_ind = 1
  set request->setup_proc[1]->error_msg = "The ASSAY_RESOURCE_LOT table is updated successfully."
endif

execute dm_add_upt_setup_proc_log

end
go

;Generated by GNU enscript 1.6.4.
