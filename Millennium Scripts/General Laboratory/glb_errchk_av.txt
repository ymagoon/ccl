 ;;Solution_Test/script/PathNet -- Gen Lab/glb_errchk_av/glb_errchk_av.prg Turn on black mode

drop program GLB_ERRCHK_AV:dba go
create program GLB_ERRCHK_AV:dba

/* Error checking for the equation */
select into GLB_ERRCHK_AV
  av.task_assay_cd
 ,av.service_resource_cd
 ,av.beg_effective_dt_tm
 ,count(*)

from
  auto_verify av

group by
  av.task_assay_cd
 ,av.service_resource_cd
 ,av.beg_effective_dt_tm

having count(*) > 1

if (curqual != 0)
  set request->setup_proc[1]->success_ind = 0
  set request->setup_proc[1]->error_msg = "AUTO_VERIFY table has duplicate problem."
else
  set request->setup_proc[1]->success_ind = 1
  set request->setup_proc[1]->error_msg = "AUTO_VERIFY table is updated successfully."
endif

execute dm_add_upt_setup_proc_log

end
go

;Generated by GNU enscript 1.6.4.
