Function.prototype.method=function(name,func){this.prototype[name]=func;
return this;
};
Function.method("inherits",function(Parent){var d={},p=(this.prototype=new Parent());
this.method("uber",function uber(name){if(!(name in d)){d[name]=0;
}var f,r,t=d[name],v=Parent.prototype;
if(t){while(t){v=v.constructor.prototype;
t-=1;
}f=v[name];
}else{f=p[name];
if(f==this[name]){f=v[name];
}}d[name]+=1;
r=f.apply(this,Array.prototype.slice.apply(arguments,[1]));
d[name]-=1;
return r;
});
return this;
});
function MPageComponent(){this.m_componentId=0;
this.m_reportId=0;
this.m_label="";
this.m_subLabel="";
this.m_column=0;
this.m_sequence=0;
this.m_link="";
this.m_totalResults=false;
this.m_xOFy=false;
this.m_isExpanded=false;
this.m_isAlwaysExpanded=false;
this.m_scrollNumber=0;
this.m_isScrollEnabled=false;
this.m_styles=null;
this.m_groups=null;
this.m_pageGroupSeq=0;
this.m_lookbackDays=0;
this.m_newLink=false;
this.criterion=null;
this.m_isPlusAdd=false;
this.m_scope=0;
this.m_rootComponentNode=null;
this.m_sectionContentNode=null;
this.m_compLoadTimerName="";
this.m_compRenderTimerName="";
this.m_includeLineNumber=false;
this.m_lookbackUnitTypeFlag=0;
this.m_lookbackUnits=0;
this.m_brlookbackUnitTypeFlag=0;
this.m_brlookbackUnits=0;
this.m_dateFormat=2;
this.m_isCustomizeView=false;
this.m_menuItems=null;
this.m_lookBackMenuItems=null;
this.m_displayFilters=null;
this.m_AutoSuggestScript="";
this.m_AutoSuggestAddTimerName="";
this.m_editMode=false;
this.m_compDisp=true;
this.m_footerText="";
this.m_hasLookBackDropDown=false;
this.m_ScopeHTML="";
this.m_compLoad=false;
this.m_hasCompFilters=false;
this.m_grouper_arr=[];
this.m_grouperFilterLabel="";
this.m_grouperFilterEventSets=null;
this.m_selectedTimeFrame=null;
this.m_selectedDataGroup=null;
MPageComponent.method("isDisplayable",function(){if(this.m_displayFilters!==null&&this.m_displayFilters.length>0){for(var x=this.m_displayFilters.length;
x--;
){var displayFilter=this.m_displayFilters[x];
if(displayFilter.checkFilters()===false){CERN_EventListener.removeAllListeners(this,this);
return false;
}}}return this.m_compDisp;
});
MPageComponent.method("getDisplayFilters",function(){return this.m_displayFilters;
});
MPageComponent.method("setDisplayFilters",function(value){this.m_displayFilters=value;
});
MPageComponent.method("addDisplayFilter",function(value){if(this.m_displayFilters===null){this.m_displayFilters=[];
}this.m_displayFilters.push(value);
});
MPageComponent.method("getLookbackMenuItems",function(){return this.m_lookBackMenuItems;
});
MPageComponent.method("setLookbackMenuItems",function(value){this.m_lookBackMenuItems=value;
});
MPageComponent.method("addLookbackMenuItem",function(value){if(this.m_lookBackMenuItems===null){this.m_lookBackMenuItems=[];
}this.m_lookBackMenuItems.push(value);
});
MPageComponent.method("getMenuItems",function(){return this.m_menuItems;
});
MPageComponent.method("setMenuItems",function(value){this.m_menuItems=value;
});
MPageComponent.method("addMenuItem",function(value){if(this.m_menuItems===null){this.m_menuItems=[];
}this.m_menuItems.push(value);
});
MPageComponent.method("getCustomizeView",function(){return this.m_isCustomizeView;
});
MPageComponent.method("setCustomizeView",function(value){this.m_isCustomizeView=value;
});
MPageComponent.method("InsertData",function(){alert("ERROR: InsertData has not been implemented within the component");
});
MPageComponent.method("HandleSuccess",function(){alert("ERROR: HandleSuccess has not been implemented within the component");
});
MPageComponent.method("openTab",function(){alert("ERROR: openTab has not been implemented within the component");
});
MPageComponent.method("getComponentLoadTimerName",function(){return(this.m_compLoadTimerName);
});
MPageComponent.method("setComponentLoadTimerName",function(value){this.m_compLoadTimerName=value;
});
MPageComponent.method("getComponentRenderTimerName",function(){return(this.m_compRenderTimerName);
});
MPageComponent.method("setComponentRenderTimerName",function(value){this.m_compRenderTimerName=value;
});
MPageComponent.method("getRootComponentNode",function(){if(this.m_rootComponentNode===null){var style=this.getStyles();
this.m_rootComponentNode=_g(style.getId());
}return(this.m_rootComponentNode);
});
MPageComponent.method("setRootComponentNode",function(value){this.m_rootComponentNode=value;
});
MPageComponent.method("getSectionContentNode",function(){if(this.m_sectionContentNode===null){var style=this.getStyles();
this.m_sectionContentNode=_g(style.getContentId());
}return(this.m_sectionContentNode);
});
MPageComponent.method("setSectionContentNode",function(value){this.m_sectionContentNode=value;
});
MPageComponent.method("getMPageName",function(){return(this.m_MPageName);
});
MPageComponent.method("setMPageName",function(value){this.m_MPageName=value;
});
MPageComponent.method("getScope",function(){return(this.m_scope);
});
MPageComponent.method("setScope",function(value){this.m_scope=value;
});
MPageComponent.method("isPlusAddEnabled",function(){return(this.m_isPlusAdd);
});
MPageComponent.method("setPlusAddEnabled",function(value){this.m_isPlusAdd=value;
});
MPageComponent.method("getCriterion",function(){return(this.criterion);
});
MPageComponent.method("setCriterion",function(value){this.criterion=value;
});
MPageComponent.method("isNewLink",function(){return(this.m_newLink);
});
MPageComponent.method("setNewLink",function(value){this.m_newLink=value;
});
MPageComponent.method("getPageGroupSequence",function(){return(this.m_pageGroupSeq);
});
MPageComponent.method("setPageGroupSequence",function(value){this.m_pageGroupSeq=value;
});
MPageComponent.method("getLookbackDays",function(){return(this.m_lookbackDays);
});
MPageComponent.method("setLookbackDays",function(value){this.m_lookbackDays=value;
});
MPageComponent.method("getComponentId",function(){return(this.m_componentId);
});
MPageComponent.method("setComponentId",function(value){this.m_componentId=value;
var styles=this.getStyles();
if(styles!==null){styles.setComponentId(value);
}});
MPageComponent.method("getReportId",function(){return(this.m_reportId);
});
MPageComponent.method("setReportId",function(value){this.m_reportId=value;
});
MPageComponent.method("getLabel",function(){return(this.m_label);
});
MPageComponent.method("setLabel",function(value){this.m_label=value;
});
MPageComponent.method("updateLabel",function(value){this.m_label=value;
var rootComponentNode=this.getRootComponentNode();
var secHead=Util.gc(rootComponentNode,0);
var secTitle=Util.gc(Util.Style.g("sec-title",secHead,"span")[0],0);
var anchor=_gbt("a",secTitle);
if(anchor[0]){anchor[0].innerHTML=value;
}else{secTitle.innerHTML=value;
}});
MPageComponent.method("getSubLabel",function(){return(this.m_subLabel);
});
MPageComponent.method("setSubLabel",function(value){this.m_subLabel=value;
});
MPageComponent.method("updateSubLabel",function(value){this.m_subLabel=value;
var rootComponentNode=this.getRootComponentNode();
var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=this.m_subLabel;
});
MPageComponent.method("getColumn",function(){return(this.m_column);
});
MPageComponent.method("setColumn",function(value){this.m_column=value;
});
MPageComponent.method("getSequence",function(){return(this.m_sequence);
});
MPageComponent.method("setSequence",function(value){this.m_sequence=value;
});
MPageComponent.method("getLink",function(){return(this.m_link);
});
MPageComponent.method("setLink",function(value){this.m_link=value;
});
MPageComponent.method("isResultsDisplayEnabled",function(){return(this.m_totalResults);
});
MPageComponent.method("setResultsDisplayEnabled",function(value){this.m_totalResults=value;
});
MPageComponent.method("isXofYEnabled",function(){return(this.m_xOFy);
});
MPageComponent.method("setXofYEnabled",function(value){this.m_xOFy=value;
});
MPageComponent.method("isExpanded",function(){return(this.m_isExpanded);
});
MPageComponent.method("setExpanded",function(value){this.m_isExpanded=value;
});
MPageComponent.method("setExpandCollapseState",function(value){this.m_isExpanded=value;
var i18nCore=i18n.discernabu;
var parentNode=this.getRootComponentNode();
var expColNode=Util.Style.g("sec-hd-tgl",parentNode,"span");
if(value){Util.Style.rcss(parentNode,"closed");
expColNode[0].innerHTML="-";
expColNode[0].title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(parentNode,"closed");
expColNode[0].innerHTML="+";
expColNode[0].title=i18nCore.SHOW_SECTION;
}});
MPageComponent.method("isAlwaysExpanded",function(){return(this.m_isAlwaysExpanded);
});
MPageComponent.method("setAlwaysExpanded",function(value){this.m_isAlwaysExpanded=value;
});
MPageComponent.method("getScrollNumber",function(){return(this.m_scrollNumber);
});
MPageComponent.method("setScrollNumber",function(value){this.m_scrollNumber=value;
});
MPageComponent.method("isScrollingEnabled",function(){return(this.m_isScrollEnabled);
});
MPageComponent.method("setScrollingEnabled",function(value){this.m_isScrollEnabled=value;
});
MPageComponent.method("getStyles",function(){return(this.m_styles);
});
MPageComponent.method("setStyles",function(value){this.m_styles=value;
});
MPageComponent.method("getFilters",function(){return(this.m_filters);
});
MPageComponent.method("getGroups",function(){if(this.m_groups===null){this.m_groups=[];
}return(this.m_groups);
});
MPageComponent.method("setGroups",function(value){this.m_groups=value;
});
MPageComponent.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
MPageComponent.method("getLookbackUnitTypeFlag",function(){return(this.m_lookbackUnitTypeFlag);
});
MPageComponent.method("setLookbackUnitTypeFlag",function(value){this.m_lookbackUnitTypeFlag=value;
});
MPageComponent.method("getLookbackUnits",function(){return(this.m_lookbackUnits);
});
MPageComponent.method("setLookbackUnits",function(value){this.m_lookbackUnits=value;
});
MPageComponent.method("getBrLookbackUnitTypeFlag",function(){return(this.m_brlookbackUnitTypeFlag);
});
MPageComponent.method("setBrLookbackUnitTypeFlag",function(value){this.m_brlookbackUnitTypeFlag=value;
});
MPageComponent.method("getBrLookbackUnits",function(){return(this.m_brlookbackUnits);
});
MPageComponent.method("setBrLookbackUnits",function(value){this.m_brlookbackUnits=value;
});
MPageComponent.method("isLineNumberIncluded",function(){return this.m_includeLineNumber;
});
MPageComponent.method("setIncludeLineNumber",function(value){this.m_includeLineNumber=value;
});
MPageComponent.method("getDateFormat",function(){return(this.m_dateFormat);
});
MPageComponent.method("setDateFormat",function(value){this.m_dateFormat=value;
});
MPageComponent.method("setAutoSuggestAddScript",function(value){this.m_AutoSuggestScript=value;
});
MPageComponent.method("getAutoSuggestAddScript",function(){return(this.m_AutoSuggestScript);
});
MPageComponent.method("setAutoSuggestAddTimerName",function(value){this.m_AutoSuggestAddTimerName=value;
});
MPageComponent.method("getAutoSuggestAddTimerName",function(){return(this.m_AutoSuggestAddTimerName);
});
MPageComponent.method("setEditMode",function(value){this.m_editMode=value;
});
MPageComponent.method("isEditMode",function(){return(this.m_editMode);
});
MPageComponent.method("setDisplayEnabled",function(value){this.m_compDisp=value;
});
MPageComponent.method("getDisplayEnabled",function(){return(this.m_compDisp);
});
MPageComponent.method("setFooterText",function(value){this.m_footerText=value;
});
MPageComponent.method("getFooterText",function(){return(this.m_footerText);
});
MPageComponent.method("hasLookBackDropDown",function(){return(this.m_hasLookBackDropDown);
});
MPageComponent.method("setLookBackDropDown",function(value){this.m_hasLookBackDropDown=value;
});
MPageComponent.method("setScopeHTML",function(value){this.m_ScopeHTML=value;
});
MPageComponent.method("getScopeHTML",function(){return(this.m_ScopeHTML);
});
MPageComponent.method("isLoaded",function(){return(this.m_compLoad);
});
MPageComponent.method("setLoaded",function(value){this.m_compLoad=value;
});
MPageComponent.method("hasCompFilters",function(){return(this.m_hasCompFilters);
});
MPageComponent.method("setCompFilters",function(value){this.m_hasCompFilters=value;
});
MPageComponent.method("getGrouperFilterLabel",function(){return this.m_grouperFilterLabel;
});
MPageComponent.method("setGrouperFilterLabel",function(value){this.m_grouperFilterLabel=value;
});
MPageComponent.method("getGrouperFilterEventSets",function(){return this.m_grouperFilterEventSets;
});
MPageComponent.method("setGrouperFilterEventSets",function(value){this.m_grouperFilterEventSets=value;
});
MPageComponent.method("addGrouperFilterEventSets",function(value){if(this.m_grouperFilterEventSets===null){this.m_grouperFilterEventSets=[];
}this.m_grouperFilterEventSets.push(value);
});
MPageComponent.method("setGrp1Label",function(value){this.setGrouperLabel(0,value);
});
MPageComponent.method("getGrp1Label",function(){return this.getGrouperLabel(0);
});
MPageComponent.method("setGrp1EventSets",function(value){this.setGrouperEventSets(0,value);
});
MPageComponent.method("getGrp1EventSets",function(){return this.getGrouperEventSets(0);
});
MPageComponent.method("setGrp2Label",function(value){this.setGrouperLabel(1,value);
});
MPageComponent.method("getGrp2Label",function(){return this.getGrouperLabel(1);
});
MPageComponent.method("setGrp2EventSets",function(value){this.setGrouperEventSets(1,value);
});
MPageComponent.method("getGrp2EventSets",function(){return this.getGrouperEventSets(1);
});
MPageComponent.method("setGrp3Label",function(value){this.setGrouperLabel(2,value);
});
MPageComponent.method("getGrp3Label",function(){return this.getGrouperLabel(2);
});
MPageComponent.method("setGrp3EventSets",function(value){this.setGrouperEventSets(2,value);
});
MPageComponent.method("getGrp3EventSets",function(){return this.getGrouperEventSets(2);
});
MPageComponent.method("setGrp4Label",function(value){this.setGrouperLabel(3,value);
});
MPageComponent.method("getGrp4Label",function(){return this.getGrouperLabel(3);
});
MPageComponent.method("setGrp4EventSets",function(value){this.setGrouperEventSets(3,value);
});
MPageComponent.method("getGrp4EventSets",function(){return this.getGrouperEventSets(3);
});
MPageComponent.method("setGrp5Label",function(value){this.setGrouperLabel(4,value);
});
MPageComponent.method("getGrp5Label",function(){return this.getGrouperLabel(4);
});
MPageComponent.method("setGrp5EventSets",function(value){this.setGrouperEventSets(4,value);
});
MPageComponent.method("getGrp5EventSets",function(){return this.getGrouperEventSets(4);
});
MPageComponent.method("setGrp6Label",function(value){this.setGrouperLabel(5,value);
});
MPageComponent.method("getGrp6Label",function(){return this.getGrouperLabel(5);
});
MPageComponent.method("setGrp6EventSets",function(value){this.setGrouperEventSets(5,value);
});
MPageComponent.method("getGrp6EventSets",function(){return this.getGrouperEventSets(5);
});
MPageComponent.method("setGrp7Label",function(value){this.setGrouperLabel(6,value);
});
MPageComponent.method("getGrp7Label",function(){return this.getGrouperLabel(6);
});
MPageComponent.method("setGrp7EventSets",function(value){this.setGrouperEventSets(6,value);
});
MPageComponent.method("getGrp7EventSets",function(){return this.getGrouperEventSets(6);
});
MPageComponent.method("setGrp8Label",function(value){this.setGrouperLabel(7,value);
});
MPageComponent.method("getGrp8Label",function(){return this.getGrouperLabel(7);
});
MPageComponent.method("setGrp8EventSets",function(value){this.setGrouperEventSets(7,value);
});
MPageComponent.method("getGrp8EventSets",function(){return this.getGrouperEventSets(7);
});
MPageComponent.method("setGrp9Label",function(value){this.setGrouperLabel(8,value);
});
MPageComponent.method("getGrp9Label",function(){return this.getGrouperLabel(8);
});
MPageComponent.method("setGrp9EventSets",function(value){this.setGrouperEventSets(8,value);
});
MPageComponent.method("getGrp9EventSets",function(){return this.getGrouperEventSets(8);
});
MPageComponent.method("setGrp10Label",function(value){this.setGrouperLabel(9,value);
});
MPageComponent.method("getGrp10Label",function(){return this.getGrouperLabel(9);
});
MPageComponent.method("setGrp10EventSets",function(value){this.setGrouperEventSets(9,value);
});
MPageComponent.method("getGrp10EventSets",function(){return this.getGrouperEventSets(9);
});
MPageComponent.method("setGrouperLabel",function(index,label){if(index!==null&&!isNaN(index)){if(this.m_grouper_arr[index]){this.m_grouper_arr[index]["label"]=label;
}else{this.m_grouper_arr[index]={};
this.m_grouper_arr[index]["label"]=label;
}}});
MPageComponent.method("getGrouperLabel",function(index){if(index!==null&&!isNaN(index)){return(this.m_grouper_arr[index])?this.m_grouper_arr[index].label:"";
}});
MPageComponent.method("setGrouperEventSets",function(index,EventSetItem){if(index!==null&&!isNaN(index)){if(this.m_grouper_arr[index]){this.m_grouper_arr[index]["eventSets"]=EventSetItem;
}else{this.m_grouper_arr[index]={};
this.m_grouper_arr[index]["eventSets"]=EventSetItem;
}}});
MPageComponent.method("getGrouperEventSets",function(index){if(index!==null&&!isNaN(index)){return(this.m_grouper_arr[index])?this.m_grouper_arr[index].eventSets:"";
}});
MPageComponent.method("sortGrouperArrayByLabel",function(){this.m_grouper_arr.sort(function(a,b){var a;
var b;
if(a.label&&b.label){a=a.label.toUpperCase();
b=b.label.toUpperCase();
if(a<b){return -1;
}else{if(a===b){return 0;
}else{return 1;
}}}else{if(a.label){return 1;
}else{return -1;
}}});
});
MPageComponent.method("getSelectedTimeFrame",function(){return(this.m_selectedTimeFrame);
});
MPageComponent.method("setSelectedTimeFrame",function(value){this.m_selectedTimeFrame=value;
});
MPageComponent.method("getSelectedDataGroup",function(){return(this.m_selectedDataGroup);
});
MPageComponent.method("setSelectedDataGroup",function(value){this.m_selectedDataGroup=value;
});
}function MPageComponentInteractive(){this.m_DocPrivObj=null;
this.m_DocPrivMask=0;
MPageComponentInteractive.method("setPrivObj",function(value){this.m_DocPrivObj=value;
});
MPageComponentInteractive.method("getDocPrivObj",function(){return(m_DocPrivObj);
});
MPageComponentInteractive.method("setIsCompViewable",function(value){this.m_isCompViewable=value;
});
MPageComponentInteractive.method("setIsCompAddable",function(value){this.m_isCompAddable=value;
});
MPageComponentInteractive.method("setIsCompModifiable",function(value){this.m_isCompModifiable=value;
});
MPageComponentInteractive.method("setIsCompUnchartable",function(value){this.m_isCompUnchartable=value;
});
MPageComponentInteractive.method("setIsCompSignable",function(value){this.m_isCompSignable=value;
});
MPageComponentInteractive.method("getCompPrivMask",function(){var VIEW_MASK=parseInt("1",2);
var ADD_MASK=parseInt("10",2);
var MODIFY_MASK=parseInt("100",2);
var UNCHART_MASK=parseInt("1000",2);
var SIGN_MASK=parseInt("10000",2);
var privMask=0;
privMask=((this.m_isCompViewable)?VIEW_MASK:0)|((this.m_isCompAddable)?ADD_MASK:0)|((this.m_isCompModifiable)?MODIFY_MASK:0)|((this.m_isCompUnchartable)?UNCHART_MASK:0)|((this.m_isCompSignable)?SIGN_MASK:0);
return(privMask);
});
MPageComponentInteractive.method("getPrivFromArray",function(eventCd,array){var i=array.length;
while(i--){if(eventCd==array[i].EVENT_CD){return(true);
}}return(false);
});
MPageComponentInteractive.method("isResultEventCodeSignable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.VIEW_RESULTS.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeAddable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.ADD_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeModifiable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.MODIFY_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeUnchartable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.UNCHART_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeSignable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.SIGN_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("getEventCdPrivs",function(component,eventArr){var criterion=this.getCriterion();
var paramEventCd=MP_Util.CreateParamArray(eventArr,1);
var paramPrivMask=this.getCompPrivMask();
var sendAr=["^MINE^",criterion.provider_id+".0",paramEventCd,"0.0",paramPrivMask,criterion.ppr_cd+".0"];
var request=new MP_Core.ScriptRequest(this,"ENG:MPG.MPCINTERACTIVE - Get Doc prefs");
request.setParameters(sendAr);
request.setName("getCompPrivs");
request.setProgramName("MP_GET_PRIVS_BY_CODE_JSON");
request.setAsync(false);
MP_Core.XMLCCLRequestCallBack(component,request,this.processEventCdReply);
});
MPageComponentInteractive.method("processEventCdReply",function(reply){m_DocPrivObj=reply;
});
}MPageComponentInteractive.inherits(MPageComponent);
function MPageGrouper(){this.m_groups=null;
MPageGrouper.method("setGroups",function(value){this.m_groups=value;
});
MPageGrouper.method("getGroups",function(){return this.m_groups;
});
MPageGrouper.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
}MPageGrouper.inherits(MPageGroup);
function MPageGroup(){this.m_groupName="";
this.m_groupSeq=0;
this.m_groupId=0;
MPageGroup.method("setGroupId",function(value){this.m_groupId=value;
});
MPageGroup.method("getGroupId",function(){return this.m_groupId;
});
MPageGroup.method("setGroupName",function(value){this.m_groupName=value;
});
MPageGroup.method("getGroupName",function(){return this.m_groupName;
});
MPageGroup.method("setSequence",function(value){this.m_groupSeq=value;
});
MPageGroup.method("getSequence",function(){return this.m_groupSeq;
});
}function MPageEventSetGroup(){this.m_eventSets=null;
this.m_isSequenced=false;
MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventSetGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets;
});
MPageEventSetGroup.method("setEventSets",function(value){this.m_eventSets=value;
});
MPageEventSetGroup.method("addEventSet",function(value){if(this.m_eventSets===null){this.m_eventSets=[];
}this.m_eventSets.push(value);
});
}MPageEventSetGroup.inherits(MPageGroup);
function MPageEventCodeGroup(){this.m_eventCodes=null;
this.m_isSequenced=false;
MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventCodeGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes;
});
MPageEventCodeGroup.method("setEventCodes",function(value){this.m_eventCodes=value;
});
MPageEventCodeGroup.method("addEventCode",function(value){if(this.m_eventCodes===null){this.m_eventCodes=[];
}this.m_eventCodes.push(value);
});
}MPageEventCodeGroup.inherits(MPageGroup);
function MPageCodeValueGroup(){this.m_codes=null;
MPageCodeValueGroup.method("getCodes",function(){return this.m_codes;
});
MPageCodeValueGroup.method("setCodes",function(value){this.m_codes=value;
});
MPageCodeValueGroup.method("addCode",function(value){if(this.m_codes===null){this.m_codes=[];
}this.m_codes.push(value);
});
}MPageCodeValueGroup.inherits(MPageGroup);
function MPageSequenceGroup(){this.m_items=null;
this.m_mapItems=null;
this.m_isMultiType=false;
MPageSequenceGroup.method("getItems",function(){return this.m_items;
});
MPageSequenceGroup.method("setItems",function(value){this.m_items=value;
});
MPageSequenceGroup.method("addItem",function(value){if(this.m_items===null){this.m_items=[];
}this.m_items.push(value);
});
MPageSequenceGroup.method("setMultiValue",function(value){this.m_isMultiType=value;
});
MPageSequenceGroup.method("isMultiValue",function(){return(this.m_isMultiType);
});
MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems;
});
MPageSequenceGroup.method("setMapItems",function(value){this.m_mapItems=value;
});
}MPageSequenceGroup.inherits(MPageGroup);
function MPageGroupValue(){this.m_id=0;
this.m_name="";
MPageGroupValue.method("getId",function(){return this.m_id;
});
MPageGroupValue.method("setId",function(value){this.m_id=value;
});
MPageGroupValue.method("getName",function(){return this.m_name;
});
MPageGroupValue.method("setName",function(value){this.m_name=value;
});
}function ComponentStyle(){this.m_nameSpace="";
this.m_id="";
this.m_className="section";
this.m_contentId="";
this.m_contentClass="sec-content";
this.m_headerClass="sec-hd";
this.m_headToggle="sec-hd-tgl";
this.m_secTitle="sec-title";
this.m_aLink="";
this.m_secTotal="sec-total";
this.m_info="";
this.m_subSecHeaderClass="sub-sec-hd";
this.m_subSecTitleClass="sub-sec-title";
this.m_subSecContentClass="sub-sec-content";
this.m_contentBodyClass="content-body";
this.m_searchBoxDiv="search-box-div";
this.m_subTitleDisp="sub-title-disp";
this.m_componentId=0;
this.m_color="";
ComponentStyle.method("initByNamespace",function(value){this.m_nameSpace=value;
this.m_id=value;
this.m_className+=(" "+value+"-sec");
this.m_contentId=value+"Content";
this.m_aLink=value+"Link";
this.m_info=value+"-info";
});
ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace;
});
ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId;
});
ComponentStyle.method("getClassName",function(){return this.m_className;
});
ComponentStyle.method("getColor",function(){return this.m_color;
});
ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId;
});
ComponentStyle.method("getContentBodyClass",function(){return this.m_contentBodyClass;
});
ComponentStyle.method("getContentClass",function(){return this.m_contentClass;
});
ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass;
});
ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle;
});
ComponentStyle.method("getTitle",function(){return this.m_secTitle;
});
ComponentStyle.method("getLink",function(){return this.m_aLink;
});
ComponentStyle.method("getTotal",function(){return this.m_secTotal;
});
ComponentStyle.method("getInfo",function(){return this.m_info;
});
ComponentStyle.method("getSearchBoxDiv",function(){return this.m_searchBoxDiv;
});
ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass;
});
ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass;
});
ComponentStyle.method("getSubSecHeaderClass",function(){return this.m_subSecHeaderClass;
});
ComponentStyle.method("getSubSecTitleClass",function(){return this.m_subSecTitleClass;
});
ComponentStyle.method("getSubTitleDisp",function(){return this.m_subTitleDisp;
});
ComponentStyle.method("setComponentId",function(value){this.m_componentId=value;
});
ComponentStyle.method("setNameSpace",function(value){this.m_nameSpace=value;
});
ComponentStyle.method("setId",function(value){this.m_id=value;
});
ComponentStyle.method("setClassName",function(value){this.m_className=value;
});
ComponentStyle.method("setColor",function(value){this.m_color=value;
this.setClassName(this.getClassName()+" "+value);
});
ComponentStyle.method("setContextId",function(value){this.m_contentId=value;
});
ComponentStyle.method("setContentBodyClass",function(value){this.m_contentBodyClass=value;
});
ComponentStyle.method("setContentClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setContextClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setHeaderClass",function(value){this.m_headerClass=value;
});
ComponentStyle.method("setHeaderToggle",function(value){this.m_headToggle=value;
});
ComponentStyle.method("setSearchBoxDiv",function(value){this.m_searchBoxDiv=value;
});
ComponentStyle.method("setSubSecContentClass",function(value){this.m_subSecContentClass=value;
});
ComponentStyle.method("setSubSecHeaderClass",function(value){this.m_subSecHeaderClass=value;
});
ComponentStyle.method("setSubSecTitleClass",function(value){this.m_subSecTitleClass=value;
});
ComponentStyle.method("setSubTitleDisp",function(value){this.m_subTitleDisp=value;
});
ComponentStyle.method("setTitle",function(value){this.m_secTitle=value;
});
ComponentStyle.method("setLink",function(value){this.m_aLink=value;
});
ComponentStyle.method("setTotal",function(value){this.m_secTotal=value;
});
ComponentStyle.method("setInfo",function(value){this.m_info=value;
});
}function MPageView(){this.pageId=0;
this.name=null;
this.components=null;
this.banner=true;
this.helpFileName="";
this.helpFileURL="";
this.criterion=null;
this.componentIds=null;
this.isCustomizeView=false;
this.m_isCustomizeEnabled=true;
this.m_titleAnchors=null;
this.m_csEnabled=false;
this.printableReportName=null;
MPageView.method("getTitleAnchors",function(){return this.m_titleAnchors;
});
MPageView.method("setTitleAnchors",function(value){this.m_titleAnchors=value;
});
MPageView.method("addTitleAnchor",function(value){if(this.m_titleAnchors===null){this.m_titleAnchors=[];
}this.m_titleAnchors.push(value);
});
MPageView.method("getCustomizeEnabled",function(){return this.m_isCustomizeEnabled;
});
MPageView.method("setCustomizeEnabled",function(value){this.m_isCustomizeEnabled=value;
});
MPageView.method("getCustomizeView",function(){return this.isCustomizeView;
});
MPageView.method("setCustomizeView",function(value){this.isCustomizeView=value;
});
MPageView.method("getComponentIds",function(){return(this.componentIds);
});
MPageView.method("setComponentIds",function(value){this.componentIds=value;
});
MPageView.method("addComponentId",function(value){if(this.componentIds===null){this.componentIds=[];
}this.componentIds.push(value);
});
MPageView.method("getCriterion",function(){return(this.criterion);
});
MPageView.method("setCriterion",function(value){this.criterion=value;
});
MPageView.method("getHelpFileName",function(){return this.helpFileName;
});
MPageView.method("setHelpFileName",function(value){this.helpFileName=value;
});
MPageView.method("getHelpFileURL",function(){return this.helpFileURL;
});
MPageView.method("setHelpFileURL",function(value){this.helpFileURL=value;
});
MPageView.method("isBannerEnabled",function(){return this.banner;
});
MPageView.method("setBannerEnabled",function(value){this.banner=value;
});
MPageView.method("isChartSearchEnabled",function(){return this.m_csEnabled;
});
MPageView.method("setChartSearchEnabled",function(value){this.m_csEnabled=value;
});
MPageView.method("setPrintableReportName",function(value){this.printableReportName=value;
});
MPageView.method("getPrintableReportName",function(){return this.printableReportName;
});
MPageView.method("getPageId",function(){return this.pageId;
});
MPageView.method("setPageId",function(value){this.pageId=value;
});
MPageView.method("getName",function(){return this.name;
});
MPageView.method("setName",function(value){this.name=value;
});
MPageView.method("getComponents",function(){return this.components;
});
MPageView.method("setComponents",function(value){this.components=value;
});
MPageView.method("addComponent",function(value){if(this.components===null){this.components=[];
}this.components.push(value);
});
}function SortMPageComponentRows(c1,c2){if(c1.getSequence()<c2.getSequence()){return -1;
}if(c1.getSequence()>c2.getSequence()){return 1;
}return 0;
}function SortMPageComponentCols(c1,c2){if(c1.getColumn()<c2.getColumn()){return -1;
}if(c1.getColumn()>c2.getColumn()){return 1;
}return SortMPageComponentRows(c1,c2);
}function SortMPageComponents(c1,c2){if(c1.getPageGroupSequence()<c2.getPageGroupSequence()){return -1;
}if(c1.getPageGroupSequence()>c2.getPageGroupSequence()){return 1;
}return SortMPageComponentCols(c1,c2);
}
if(typeof MPage=="undefined"){MPage={_Components:[],Properties:{mine:"mine",personId:0,encounter:0,userId:0,pprCd:0,posCd:0},Event:{registerEvent:function(event,listener,component){return null;
},triggerEvent:function(event){return null;
},removeEvent:function(event,listener){return null;
}},namespace:function(name){var parts=name.split(".");
var result=window;
while(parts.length){var part=parts.shift();
result=result[part]=result[part]||{};
}return result;
},registerUnloadEvent:function(){Util.addEvent(window,"beforeunload",MPage.fireUnload);
},registerResizeEvent:function(){Util.addEvent(window,"resize",MPage.fireResize);
},fireResize:function(){var tempComp;
var x;
for(x=MPage._Components.length;
x--;
){tempComp=MPage._Components[x];
compContainer=tempComp.getTarget();
tempComp.resize($(compContainer).width(),$(compContainer).height());
}},fireUnload:function(){var x;
for(x=MPage._Components.length;
x--;
){MPage._Components[x].unload();
}},addCustomComp:function(compObj){MPage._Components.push(compObj);
},getCustomComp:function(compId){var tempComp;
var x;
for(x=MPage._Components.length;
x--;
){tempComp=MPage._Components[x];
if(tempComp.getStyles().getId()===compId){return tempComp;
}}return null;
}};
}MPage.Component=function(){this.baseclassSpecVersion=1;
this.componentMinimumSpecVersion=1;
};
MPage.Component.prototype.init=function(){};
MPage.Component.prototype.generate=function(target,callback,options){var combined;
var funcCallback;
if(!target){target=component.getTarget();
}if(!callback){funcCallback=function(component){component.render();
};
}else{funcCallback=function(component){component.render();
callback(component);
};
}if(options){combined={};
combined=this.options;
for(attr in options){combined[attr]=options[attr];
}this.options=combined;
}this.init();
this.loadData(funcCallback);
return this;
};
MPage.Component.prototype.loadData=function(callback){var component=this;
var funcCallback;
funcCallback=function(response){component.data=response;
callback(component);
};
if(this.cclDataType==="undefined"){this.cclDataType="JSON";
}if(this.cclProgram&&this.cclParams&&(this.cclParams.length>0)){this.loadCCL(this.cclProgram,this.cclParams,funcCallback,this.cclDataType);
}else{callback(component);
}};
MPage.Component.prototype.loadCCL=function(cclProgram,cclParams,callback,dataType){var that=this;
var info=new XMLCclRequest();
var tempData=null;
var paramString="";
var x;
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{MP_Util.LogScriptCallInfo(null,this,"mp_custom_component_core.js","loadCCL");
switch(dataType){case"XML":if(window.ActiveXObject){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async="false";
xmlDoc.loadXML(this.responseText);
}else{if(document.implementation&&document.implementation.createDocument){parser=new DOMParser();
xmlDoc=parser.parseFromString(this.responseText,"text/xml");
}}callback.call(that,xmlDoc);
break;
case"TEXT":callback.call(that,this.responseText);
break;
case"JSON":default:callback.call(that,JSON.parse(this.responseText));
break;
}}catch(err){MP_Util.LogJSError(err,null,"mp_custom_component_core.js","loadCCL");
}}else{if(this.readyState==4&&this.status!=200){MP_Util.LogScriptCallError(null,this,"mp_custom_component_core.js","loadCCL");
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
for(x=cclParams.length;
x--;
){if(typeof cclParams[x]=="string"){if(!/^'.*'$/.test(cclParams[x])&&!/^".*"$/.test(cclParams[x])&&!/^\^.*\^$/.test(cclParams[x])){cclParams[x]="^"+cclParams[x]+"^";
}}else{if(typeof cclParams[x]=="number"){if(!/\.0$/.test(cclParams[x])){cclParams[x]=cclParams[x]+".0";
}}}}info.open("GET",cclProgram,true);
info.send(cclParams.join(","));
};
MPage.Component.prototype.render=function(){var target;
if(typeof this.data==="string"){target=this.getTarget();
target.innerHTML=this.data;
}};
MPage.Component.prototype.getOption=function(name){if(this.options&&this.options[name]){return this.options[name];
}else{return null;
}};
MPage.Component.prototype.setOption=function(name,value){if(!this.options){this.options={};
}this.options[name]=value;
};
MPage.Component.prototype.getProperty=function(name){if(this.properties&&this.properties[name]){return this.properties[name];
}else{if(MPage.Properties[name]){return MPage.Properties[name];
}else{return"undefined";
}}};
MPage.Component.prototype.setProperty=function(name,value){if(this.properties){this.properties[name]=value;
}else{this.properties={};
this.properties[name]=value;
}if("headerTitle|headerSubTitle|headerShowHideState".indexOf(name)>=0){var parentComp=this.getOption("parentComp");
switch(name){case"headerTitle":parentComp.updateLabel(value);
break;
case"headerSubTitle":parentComp.updateSubLabel(value);
break;
case"headerShowHideState":parentComp.setExpandCollapseState(value);
break;
}}return this;
};
MPage.Component.prototype.getTarget=function(){var target=undefined;
if(this.options&&this.options.target){target=this.options.target;
}return target;
};
MPage.Component.prototype.setTarget=function(target){if(this.options){this.options.target=target;
}else{this.options={};
this.options.target=target;
}};
MPage.Component.prototype.resize=function(width,height){return null;
};
MPage.Component.prototype.unload=function(){return null;
};
MPage.Component.prototype.getComponentUid=function(){return this.getOption("id");
};
MPage.Component.prototype.throwNewError=function(description,err){var error=err||new Error(description);
MP_Util.LogError("Error occurred in a custom component: "+description);
MP_Util.LogJSError(error,null,"mp_custom_component_core.js","MPage.Component.prototype.throwNewError");
throw (error);
};

Function.prototype.method=function(name,func){this.prototype[name]=func;
return this;
};
Function.method("inherits",function(Parent){var d={},p=(this.prototype=new Parent());
this.method("uber",function uber(name){if(!(name in d)){d[name]=0;
}var f,r,t=d[name],v=Parent.prototype;
if(t){while(t){v=v.constructor.prototype;
t-=1;
}f=v[name];
}else{f=p[name];
if(f==this[name]){f=v[name];
}}d[name]+=1;
r=f.apply(this,Array.prototype.slice.apply(arguments,[1]));
d[name]-=1;
return r;
});
return this;
});
function MPageComponent(){this.m_componentId=0;
this.m_reportId=0;
this.m_label="";
this.m_subLabel="";
this.m_column=0;
this.m_sequence=0;
this.m_link="";
this.m_totalResults=false;
this.m_xOFy=false;
this.m_isExpanded=false;
this.m_isAlwaysExpanded=false;
this.m_scrollNumber=0;
this.m_isScrollEnabled=false;
this.m_styles=null;
this.m_groups=null;
this.m_pageGroupSeq=0;
this.m_lookbackDays=0;
this.m_newLink=false;
this.criterion=null;
this.m_isPlusAdd=false;
this.m_scope=0;
this.m_rootComponentNode=null;
this.m_sectionContentNode=null;
this.m_compLoadTimerName="";
this.m_compRenderTimerName="";
this.m_includeLineNumber=false;
this.m_lookbackUnitTypeFlag=0;
this.m_lookbackUnits=0;
this.m_brlookbackUnitTypeFlag=0;
this.m_brlookbackUnits=0;
this.m_dateFormat=2;
this.m_isCustomizeView=false;
this.m_menuItems=null;
this.m_lookBackMenuItems=null;
this.m_displayFilters=null;
this.m_AutoSuggestScript="";
this.m_AutoSuggestAddTimerName="";
this.m_editMode=false;
this.m_compDisp=true;
this.m_footerText="";
this.m_hasLookBackDropDown=false;
this.m_ScopeHTML="";
this.m_compLoad=false;
this.m_hasCompFilters=false;
this.m_grouper_arr=[];
this.m_grouperFilterLabel="";
this.m_grouperFilterEventSets=null;
this.m_selectedTimeFrame=null;
this.m_selectedDataGroup=null;
MPageComponent.method("isDisplayable",function(){if(this.m_displayFilters!==null&&this.m_displayFilters.length>0){for(var x=this.m_displayFilters.length;
x--;
){var displayFilter=this.m_displayFilters[x];
if(displayFilter.checkFilters()===false){CERN_EventListener.removeAllListeners(this,this);
return false;
}}}return this.m_compDisp;
});
MPageComponent.method("getDisplayFilters",function(){return this.m_displayFilters;
});
MPageComponent.method("setDisplayFilters",function(value){this.m_displayFilters=value;
});
MPageComponent.method("addDisplayFilter",function(value){if(this.m_displayFilters===null){this.m_displayFilters=[];
}this.m_displayFilters.push(value);
});
MPageComponent.method("getLookbackMenuItems",function(){return this.m_lookBackMenuItems;
});
MPageComponent.method("setLookbackMenuItems",function(value){this.m_lookBackMenuItems=value;
});
MPageComponent.method("addLookbackMenuItem",function(value){if(this.m_lookBackMenuItems===null){this.m_lookBackMenuItems=[];
}this.m_lookBackMenuItems.push(value);
});
MPageComponent.method("getMenuItems",function(){return this.m_menuItems;
});
MPageComponent.method("setMenuItems",function(value){this.m_menuItems=value;
});
MPageComponent.method("addMenuItem",function(value){if(this.m_menuItems===null){this.m_menuItems=[];
}this.m_menuItems.push(value);
});
MPageComponent.method("getCustomizeView",function(){return this.m_isCustomizeView;
});
MPageComponent.method("setCustomizeView",function(value){this.m_isCustomizeView=value;
});
MPageComponent.method("InsertData",function(){alert("ERROR: InsertData has not been implemented within the component");
});
MPageComponent.method("HandleSuccess",function(){alert("ERROR: HandleSuccess has not been implemented within the component");
});
MPageComponent.method("openTab",function(){alert("ERROR: openTab has not been implemented within the component");
});
MPageComponent.method("getComponentLoadTimerName",function(){return(this.m_compLoadTimerName);
});
MPageComponent.method("setComponentLoadTimerName",function(value){this.m_compLoadTimerName=value;
});
MPageComponent.method("getComponentRenderTimerName",function(){return(this.m_compRenderTimerName);
});
MPageComponent.method("setComponentRenderTimerName",function(value){this.m_compRenderTimerName=value;
});
MPageComponent.method("getRootComponentNode",function(){if(this.m_rootComponentNode===null){var style=this.getStyles();
this.m_rootComponentNode=_g(style.getId());
}return(this.m_rootComponentNode);
});
MPageComponent.method("setRootComponentNode",function(value){this.m_rootComponentNode=value;
});
MPageComponent.method("getSectionContentNode",function(){if(this.m_sectionContentNode===null){var style=this.getStyles();
this.m_sectionContentNode=_g(style.getContentId());
}return(this.m_sectionContentNode);
});
MPageComponent.method("setSectionContentNode",function(value){this.m_sectionContentNode=value;
});
MPageComponent.method("getMPageName",function(){return(this.m_MPageName);
});
MPageComponent.method("setMPageName",function(value){this.m_MPageName=value;
});
MPageComponent.method("getScope",function(){return(this.m_scope);
});
MPageComponent.method("setScope",function(value){this.m_scope=value;
});
MPageComponent.method("isPlusAddEnabled",function(){return(this.m_isPlusAdd);
});
MPageComponent.method("setPlusAddEnabled",function(value){this.m_isPlusAdd=value;
});
MPageComponent.method("getCriterion",function(){return(this.criterion);
});
MPageComponent.method("setCriterion",function(value){this.criterion=value;
});
MPageComponent.method("isNewLink",function(){return(this.m_newLink);
});
MPageComponent.method("setNewLink",function(value){this.m_newLink=value;
});
MPageComponent.method("getPageGroupSequence",function(){return(this.m_pageGroupSeq);
});
MPageComponent.method("setPageGroupSequence",function(value){this.m_pageGroupSeq=value;
});
MPageComponent.method("getLookbackDays",function(){return(this.m_lookbackDays);
});
MPageComponent.method("setLookbackDays",function(value){this.m_lookbackDays=value;
});
MPageComponent.method("getComponentId",function(){return(this.m_componentId);
});
MPageComponent.method("setComponentId",function(value){this.m_componentId=value;
var styles=this.getStyles();
if(styles!==null){styles.setComponentId(value);
}});
MPageComponent.method("getReportId",function(){return(this.m_reportId);
});
MPageComponent.method("setReportId",function(value){this.m_reportId=value;
});
MPageComponent.method("getLabel",function(){return(this.m_label);
});
MPageComponent.method("setLabel",function(value){this.m_label=value;
});
MPageComponent.method("updateLabel",function(value){this.m_label=value;
var rootComponentNode=this.getRootComponentNode();
var secHead=Util.gc(rootComponentNode,0);
var secTitle=Util.gc(Util.Style.g("sec-title",secHead,"span")[0],0);
var anchor=_gbt("a",secTitle);
if(anchor[0]){anchor[0].innerHTML=value;
}else{secTitle.innerHTML=value;
}});
MPageComponent.method("getSubLabel",function(){return(this.m_subLabel);
});
MPageComponent.method("setSubLabel",function(value){this.m_subLabel=value;
});
MPageComponent.method("updateSubLabel",function(value){this.m_subLabel=value;
var rootComponentNode=this.getRootComponentNode();
var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=this.m_subLabel;
});
MPageComponent.method("getColumn",function(){return(this.m_column);
});
MPageComponent.method("setColumn",function(value){this.m_column=value;
});
MPageComponent.method("getSequence",function(){return(this.m_sequence);
});
MPageComponent.method("setSequence",function(value){this.m_sequence=value;
});
MPageComponent.method("getLink",function(){return(this.m_link);
});
MPageComponent.method("setLink",function(value){this.m_link=value;
});
MPageComponent.method("isResultsDisplayEnabled",function(){return(this.m_totalResults);
});
MPageComponent.method("setResultsDisplayEnabled",function(value){this.m_totalResults=value;
});
MPageComponent.method("isXofYEnabled",function(){return(this.m_xOFy);
});
MPageComponent.method("setXofYEnabled",function(value){this.m_xOFy=value;
});
MPageComponent.method("isExpanded",function(){return(this.m_isExpanded);
});
MPageComponent.method("setExpanded",function(value){this.m_isExpanded=value;
});
MPageComponent.method("setExpandCollapseState",function(value){this.m_isExpanded=value;
var i18nCore=i18n.discernabu;
var parentNode=this.getRootComponentNode();
var expColNode=Util.Style.g("sec-hd-tgl",parentNode,"span");
if(value){Util.Style.rcss(parentNode,"closed");
expColNode[0].innerHTML="-";
expColNode[0].title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(parentNode,"closed");
expColNode[0].innerHTML="+";
expColNode[0].title=i18nCore.SHOW_SECTION;
}});
MPageComponent.method("isAlwaysExpanded",function(){return(this.m_isAlwaysExpanded);
});
MPageComponent.method("setAlwaysExpanded",function(value){this.m_isAlwaysExpanded=value;
});
MPageComponent.method("getScrollNumber",function(){return(this.m_scrollNumber);
});
MPageComponent.method("setScrollNumber",function(value){this.m_scrollNumber=value;
});
MPageComponent.method("isScrollingEnabled",function(){return(this.m_isScrollEnabled);
});
MPageComponent.method("setScrollingEnabled",function(value){this.m_isScrollEnabled=value;
});
MPageComponent.method("getStyles",function(){return(this.m_styles);
});
MPageComponent.method("setStyles",function(value){this.m_styles=value;
});
MPageComponent.method("getFilters",function(){return(this.m_filters);
});
MPageComponent.method("getGroups",function(){if(this.m_groups===null){this.m_groups=[];
}return(this.m_groups);
});
MPageComponent.method("setGroups",function(value){this.m_groups=value;
});
MPageComponent.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
MPageComponent.method("getLookbackUnitTypeFlag",function(){return(this.m_lookbackUnitTypeFlag);
});
MPageComponent.method("setLookbackUnitTypeFlag",function(value){this.m_lookbackUnitTypeFlag=value;
});
MPageComponent.method("getLookbackUnits",function(){return(this.m_lookbackUnits);
});
MPageComponent.method("setLookbackUnits",function(value){this.m_lookbackUnits=value;
});
MPageComponent.method("getBrLookbackUnitTypeFlag",function(){return(this.m_brlookbackUnitTypeFlag);
});
MPageComponent.method("setBrLookbackUnitTypeFlag",function(value){this.m_brlookbackUnitTypeFlag=value;
});
MPageComponent.method("getBrLookbackUnits",function(){return(this.m_brlookbackUnits);
});
MPageComponent.method("setBrLookbackUnits",function(value){this.m_brlookbackUnits=value;
});
MPageComponent.method("isLineNumberIncluded",function(){return this.m_includeLineNumber;
});
MPageComponent.method("setIncludeLineNumber",function(value){this.m_includeLineNumber=value;
});
MPageComponent.method("getDateFormat",function(){return(this.m_dateFormat);
});
MPageComponent.method("setDateFormat",function(value){this.m_dateFormat=value;
});
MPageComponent.method("setAutoSuggestAddScript",function(value){this.m_AutoSuggestScript=value;
});
MPageComponent.method("getAutoSuggestAddScript",function(){return(this.m_AutoSuggestScript);
});
MPageComponent.method("setAutoSuggestAddTimerName",function(value){this.m_AutoSuggestAddTimerName=value;
});
MPageComponent.method("getAutoSuggestAddTimerName",function(){return(this.m_AutoSuggestAddTimerName);
});
MPageComponent.method("setEditMode",function(value){this.m_editMode=value;
});
MPageComponent.method("isEditMode",function(){return(this.m_editMode);
});
MPageComponent.method("setDisplayEnabled",function(value){this.m_compDisp=value;
});
MPageComponent.method("getDisplayEnabled",function(){return(this.m_compDisp);
});
MPageComponent.method("setFooterText",function(value){this.m_footerText=value;
});
MPageComponent.method("getFooterText",function(){return(this.m_footerText);
});
MPageComponent.method("hasLookBackDropDown",function(){return(this.m_hasLookBackDropDown);
});
MPageComponent.method("setLookBackDropDown",function(value){this.m_hasLookBackDropDown=value;
});
MPageComponent.method("setScopeHTML",function(value){this.m_ScopeHTML=value;
});
MPageComponent.method("getScopeHTML",function(){return(this.m_ScopeHTML);
});
MPageComponent.method("isLoaded",function(){return(this.m_compLoad);
});
MPageComponent.method("setLoaded",function(value){this.m_compLoad=value;
});
MPageComponent.method("hasCompFilters",function(){return(this.m_hasCompFilters);
});
MPageComponent.method("setCompFilters",function(value){this.m_hasCompFilters=value;
});
MPageComponent.method("getGrouperFilterLabel",function(){return this.m_grouperFilterLabel;
});
MPageComponent.method("setGrouperFilterLabel",function(value){this.m_grouperFilterLabel=value;
});
MPageComponent.method("getGrouperFilterEventSets",function(){return this.m_grouperFilterEventSets;
});
MPageComponent.method("setGrouperFilterEventSets",function(value){this.m_grouperFilterEventSets=value;
});
MPageComponent.method("addGrouperFilterEventSets",function(value){if(this.m_grouperFilterEventSets===null){this.m_grouperFilterEventSets=[];
}this.m_grouperFilterEventSets.push(value);
});
MPageComponent.method("setGrp1Label",function(value){this.setGrouperLabel(0,value);
});
MPageComponent.method("getGrp1Label",function(){return this.getGrouperLabel(0);
});
MPageComponent.method("setGrp1EventSets",function(value){this.setGrouperEventSets(0,value);
});
MPageComponent.method("getGrp1EventSets",function(){return this.getGrouperEventSets(0);
});
MPageComponent.method("setGrp2Label",function(value){this.setGrouperLabel(1,value);
});
MPageComponent.method("getGrp2Label",function(){return this.getGrouperLabel(1);
});
MPageComponent.method("setGrp2EventSets",function(value){this.setGrouperEventSets(1,value);
});
MPageComponent.method("getGrp2EventSets",function(){return this.getGrouperEventSets(1);
});
MPageComponent.method("setGrp3Label",function(value){this.setGrouperLabel(2,value);
});
MPageComponent.method("getGrp3Label",function(){return this.getGrouperLabel(2);
});
MPageComponent.method("setGrp3EventSets",function(value){this.setGrouperEventSets(2,value);
});
MPageComponent.method("getGrp3EventSets",function(){return this.getGrouperEventSets(2);
});
MPageComponent.method("setGrp4Label",function(value){this.setGrouperLabel(3,value);
});
MPageComponent.method("getGrp4Label",function(){return this.getGrouperLabel(3);
});
MPageComponent.method("setGrp4EventSets",function(value){this.setGrouperEventSets(3,value);
});
MPageComponent.method("getGrp4EventSets",function(){return this.getGrouperEventSets(3);
});
MPageComponent.method("setGrp5Label",function(value){this.setGrouperLabel(4,value);
});
MPageComponent.method("getGrp5Label",function(){return this.getGrouperLabel(4);
});
MPageComponent.method("setGrp5EventSets",function(value){this.setGrouperEventSets(4,value);
});
MPageComponent.method("getGrp5EventSets",function(){return this.getGrouperEventSets(4);
});
MPageComponent.method("setGrp6Label",function(value){this.setGrouperLabel(5,value);
});
MPageComponent.method("getGrp6Label",function(){return this.getGrouperLabel(5);
});
MPageComponent.method("setGrp6EventSets",function(value){this.setGrouperEventSets(5,value);
});
MPageComponent.method("getGrp6EventSets",function(){return this.getGrouperEventSets(5);
});
MPageComponent.method("setGrp7Label",function(value){this.setGrouperLabel(6,value);
});
MPageComponent.method("getGrp7Label",function(){return this.getGrouperLabel(6);
});
MPageComponent.method("setGrp7EventSets",function(value){this.setGrouperEventSets(6,value);
});
MPageComponent.method("getGrp7EventSets",function(){return this.getGrouperEventSets(6);
});
MPageComponent.method("setGrp8Label",function(value){this.setGrouperLabel(7,value);
});
MPageComponent.method("getGrp8Label",function(){return this.getGrouperLabel(7);
});
MPageComponent.method("setGrp8EventSets",function(value){this.setGrouperEventSets(7,value);
});
MPageComponent.method("getGrp8EventSets",function(){return this.getGrouperEventSets(7);
});
MPageComponent.method("setGrp9Label",function(value){this.setGrouperLabel(8,value);
});
MPageComponent.method("getGrp9Label",function(){return this.getGrouperLabel(8);
});
MPageComponent.method("setGrp9EventSets",function(value){this.setGrouperEventSets(8,value);
});
MPageComponent.method("getGrp9EventSets",function(){return this.getGrouperEventSets(8);
});
MPageComponent.method("setGrp10Label",function(value){this.setGrouperLabel(9,value);
});
MPageComponent.method("getGrp10Label",function(){return this.getGrouperLabel(9);
});
MPageComponent.method("setGrp10EventSets",function(value){this.setGrouperEventSets(9,value);
});
MPageComponent.method("getGrp10EventSets",function(){return this.getGrouperEventSets(9);
});
MPageComponent.method("setGrouperLabel",function(index,label){if(index!==null&&!isNaN(index)){if(this.m_grouper_arr[index]){this.m_grouper_arr[index]["label"]=label;
}else{this.m_grouper_arr[index]={};
this.m_grouper_arr[index]["label"]=label;
}}});
MPageComponent.method("getGrouperLabel",function(index){if(index!==null&&!isNaN(index)){return(this.m_grouper_arr[index])?this.m_grouper_arr[index].label:"";
}});
MPageComponent.method("setGrouperEventSets",function(index,EventSetItem){if(index!==null&&!isNaN(index)){if(this.m_grouper_arr[index]){this.m_grouper_arr[index]["eventSets"]=EventSetItem;
}else{this.m_grouper_arr[index]={};
this.m_grouper_arr[index]["eventSets"]=EventSetItem;
}}});
MPageComponent.method("getGrouperEventSets",function(index){if(index!==null&&!isNaN(index)){return(this.m_grouper_arr[index])?this.m_grouper_arr[index].eventSets:"";
}});
MPageComponent.method("sortGrouperArrayByLabel",function(){this.m_grouper_arr.sort(function(a,b){var a;
var b;
if(a.label&&b.label){a=a.label.toUpperCase();
b=b.label.toUpperCase();
if(a<b){return -1;
}else{if(a===b){return 0;
}else{return 1;
}}}else{if(a.label){return 1;
}else{return -1;
}}});
});
MPageComponent.method("getSelectedTimeFrame",function(){return(this.m_selectedTimeFrame);
});
MPageComponent.method("setSelectedTimeFrame",function(value){this.m_selectedTimeFrame=value;
});
MPageComponent.method("getSelectedDataGroup",function(){return(this.m_selectedDataGroup);
});
MPageComponent.method("setSelectedDataGroup",function(value){this.m_selectedDataGroup=value;
});
}function MPageComponentInteractive(){this.m_DocPrivObj=null;
this.m_DocPrivMask=0;
MPageComponentInteractive.method("setPrivObj",function(value){this.m_DocPrivObj=value;
});
MPageComponentInteractive.method("getDocPrivObj",function(){return(m_DocPrivObj);
});
MPageComponentInteractive.method("setIsCompViewable",function(value){this.m_isCompViewable=value;
});
MPageComponentInteractive.method("setIsCompAddable",function(value){this.m_isCompAddable=value;
});
MPageComponentInteractive.method("setIsCompModifiable",function(value){this.m_isCompModifiable=value;
});
MPageComponentInteractive.method("setIsCompUnchartable",function(value){this.m_isCompUnchartable=value;
});
MPageComponentInteractive.method("setIsCompSignable",function(value){this.m_isCompSignable=value;
});
MPageComponentInteractive.method("getCompPrivMask",function(){var VIEW_MASK=parseInt("1",2);
var ADD_MASK=parseInt("10",2);
var MODIFY_MASK=parseInt("100",2);
var UNCHART_MASK=parseInt("1000",2);
var SIGN_MASK=parseInt("10000",2);
var privMask=0;
privMask=((this.m_isCompViewable)?VIEW_MASK:0)|((this.m_isCompAddable)?ADD_MASK:0)|((this.m_isCompModifiable)?MODIFY_MASK:0)|((this.m_isCompUnchartable)?UNCHART_MASK:0)|((this.m_isCompSignable)?SIGN_MASK:0);
return(privMask);
});
MPageComponentInteractive.method("getPrivFromArray",function(eventCd,array){var i=array.length;
while(i--){if(eventCd==array[i].EVENT_CD){return(true);
}}return(false);
});
MPageComponentInteractive.method("isResultEventCodeSignable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.VIEW_RESULTS.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeAddable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.ADD_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeModifiable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.MODIFY_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeUnchartable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.UNCHART_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("isResultEventCodeSignable",function(eventCd){if(this.getPrivFromArray(eventCd,m_DocPrivObj.getResponse().EVENT_PRIVILEGES.SIGN_DOCUMENTATION.GRANTED.EVENT_CODES)){return(true);
}else{return(false);
}});
MPageComponentInteractive.method("getEventCdPrivs",function(component,eventArr){var criterion=this.getCriterion();
var paramEventCd=MP_Util.CreateParamArray(eventArr,1);
var paramPrivMask=this.getCompPrivMask();
var sendAr=["^MINE^",criterion.provider_id+".0",paramEventCd,"0.0",paramPrivMask,criterion.ppr_cd+".0"];
var request=new MP_Core.ScriptRequest(this,"ENG:MPG.MPCINTERACTIVE - Get Doc prefs");
request.setParameters(sendAr);
request.setName("getCompPrivs");
request.setProgramName("MP_GET_PRIVS_BY_CODE_JSON");
request.setAsync(false);
MP_Core.XMLCCLRequestCallBack(component,request,this.processEventCdReply);
});
MPageComponentInteractive.method("processEventCdReply",function(reply){m_DocPrivObj=reply;
});
}MPageComponentInteractive.inherits(MPageComponent);
function MPageGrouper(){this.m_groups=null;
MPageGrouper.method("setGroups",function(value){this.m_groups=value;
});
MPageGrouper.method("getGroups",function(){return this.m_groups;
});
MPageGrouper.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
}MPageGrouper.inherits(MPageGroup);
function MPageGroup(){this.m_groupName="";
this.m_groupSeq=0;
this.m_groupId=0;
MPageGroup.method("setGroupId",function(value){this.m_groupId=value;
});
MPageGroup.method("getGroupId",function(){return this.m_groupId;
});
MPageGroup.method("setGroupName",function(value){this.m_groupName=value;
});
MPageGroup.method("getGroupName",function(){return this.m_groupName;
});
MPageGroup.method("setSequence",function(value){this.m_groupSeq=value;
});
MPageGroup.method("getSequence",function(){return this.m_groupSeq;
});
}function MPageEventSetGroup(){this.m_eventSets=null;
this.m_isSequenced=false;
MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventSetGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets;
});
MPageEventSetGroup.method("setEventSets",function(value){this.m_eventSets=value;
});
MPageEventSetGroup.method("addEventSet",function(value){if(this.m_eventSets===null){this.m_eventSets=[];
}this.m_eventSets.push(value);
});
}MPageEventSetGroup.inherits(MPageGroup);
function MPageEventCodeGroup(){this.m_eventCodes=null;
this.m_isSequenced=false;
MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventCodeGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes;
});
MPageEventCodeGroup.method("setEventCodes",function(value){this.m_eventCodes=value;
});
MPageEventCodeGroup.method("addEventCode",function(value){if(this.m_eventCodes===null){this.m_eventCodes=[];
}this.m_eventCodes.push(value);
});
}MPageEventCodeGroup.inherits(MPageGroup);
function MPageCodeValueGroup(){this.m_codes=null;
MPageCodeValueGroup.method("getCodes",function(){return this.m_codes;
});
MPageCodeValueGroup.method("setCodes",function(value){this.m_codes=value;
});
MPageCodeValueGroup.method("addCode",function(value){if(this.m_codes===null){this.m_codes=[];
}this.m_codes.push(value);
});
}MPageCodeValueGroup.inherits(MPageGroup);
function MPageSequenceGroup(){this.m_items=null;
this.m_mapItems=null;
this.m_isMultiType=false;
MPageSequenceGroup.method("getItems",function(){return this.m_items;
});
MPageSequenceGroup.method("setItems",function(value){this.m_items=value;
});
MPageSequenceGroup.method("addItem",function(value){if(this.m_items===null){this.m_items=[];
}this.m_items.push(value);
});
MPageSequenceGroup.method("setMultiValue",function(value){this.m_isMultiType=value;
});
MPageSequenceGroup.method("isMultiValue",function(){return(this.m_isMultiType);
});
MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems;
});
MPageSequenceGroup.method("setMapItems",function(value){this.m_mapItems=value;
});
}MPageSequenceGroup.inherits(MPageGroup);
function MPageGroupValue(){this.m_id=0;
this.m_name="";
MPageGroupValue.method("getId",function(){return this.m_id;
});
MPageGroupValue.method("setId",function(value){this.m_id=value;
});
MPageGroupValue.method("getName",function(){return this.m_name;
});
MPageGroupValue.method("setName",function(value){this.m_name=value;
});
}function ComponentStyle(){this.m_nameSpace="";
this.m_id="";
this.m_className="section";
this.m_contentId="";
this.m_contentClass="sec-content";
this.m_headerClass="sec-hd";
this.m_headToggle="sec-hd-tgl";
this.m_secTitle="sec-title";
this.m_aLink="";
this.m_secTotal="sec-total";
this.m_info="";
this.m_subSecHeaderClass="sub-sec-hd";
this.m_subSecTitleClass="sub-sec-title";
this.m_subSecContentClass="sub-sec-content";
this.m_contentBodyClass="content-body";
this.m_searchBoxDiv="search-box-div";
this.m_subTitleDisp="sub-title-disp";
this.m_componentId=0;
this.m_color="";
ComponentStyle.method("initByNamespace",function(value){this.m_nameSpace=value;
this.m_id=value;
this.m_className+=(" "+value+"-sec");
this.m_contentId=value+"Content";
this.m_aLink=value+"Link";
this.m_info=value+"-info";
});
ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace;
});
ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId;
});
ComponentStyle.method("getClassName",function(){return this.m_className;
});
ComponentStyle.method("getColor",function(){return this.m_color;
});
ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId;
});
ComponentStyle.method("getContentBodyClass",function(){return this.m_contentBodyClass;
});
ComponentStyle.method("getContentClass",function(){return this.m_contentClass;
});
ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass;
});
ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle;
});
ComponentStyle.method("getTitle",function(){return this.m_secTitle;
});
ComponentStyle.method("getLink",function(){return this.m_aLink;
});
ComponentStyle.method("getTotal",function(){return this.m_secTotal;
});
ComponentStyle.method("getInfo",function(){return this.m_info;
});
ComponentStyle.method("getSearchBoxDiv",function(){return this.m_searchBoxDiv;
});
ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass;
});
ComponentStyle.method("getSubSecContentClass",function(){return this.m_subSecContentClass;
});
ComponentStyle.method("getSubSecHeaderClass",function(){return this.m_subSecHeaderClass;
});
ComponentStyle.method("getSubSecTitleClass",function(){return this.m_subSecTitleClass;
});
ComponentStyle.method("getSubTitleDisp",function(){return this.m_subTitleDisp;
});
ComponentStyle.method("setComponentId",function(value){this.m_componentId=value;
});
ComponentStyle.method("setNameSpace",function(value){this.m_nameSpace=value;
});
ComponentStyle.method("setId",function(value){this.m_id=value;
});
ComponentStyle.method("setClassName",function(value){this.m_className=value;
});
ComponentStyle.method("setColor",function(value){this.m_color=value;
this.setClassName(this.getClassName()+" "+value);
});
ComponentStyle.method("setContextId",function(value){this.m_contentId=value;
});
ComponentStyle.method("setContentBodyClass",function(value){this.m_contentBodyClass=value;
});
ComponentStyle.method("setContentClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setContextClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setHeaderClass",function(value){this.m_headerClass=value;
});
ComponentStyle.method("setHeaderToggle",function(value){this.m_headToggle=value;
});
ComponentStyle.method("setSearchBoxDiv",function(value){this.m_searchBoxDiv=value;
});
ComponentStyle.method("setSubSecContentClass",function(value){this.m_subSecContentClass=value;
});
ComponentStyle.method("setSubSecHeaderClass",function(value){this.m_subSecHeaderClass=value;
});
ComponentStyle.method("setSubSecTitleClass",function(value){this.m_subSecTitleClass=value;
});
ComponentStyle.method("setSubTitleDisp",function(value){this.m_subTitleDisp=value;
});
ComponentStyle.method("setTitle",function(value){this.m_secTitle=value;
});
ComponentStyle.method("setLink",function(value){this.m_aLink=value;
});
ComponentStyle.method("setTotal",function(value){this.m_secTotal=value;
});
ComponentStyle.method("setInfo",function(value){this.m_info=value;
});
}function MPageView(){this.pageId=0;
this.name=null;
this.components=null;
this.banner=true;
this.helpFileName="";
this.helpFileURL="";
this.criterion=null;
this.componentIds=null;
this.isCustomizeView=false;
this.m_isCustomizeEnabled=true;
this.m_titleAnchors=null;
this.m_csEnabled=false;
this.printableReportName=null;
MPageView.method("getTitleAnchors",function(){return this.m_titleAnchors;
});
MPageView.method("setTitleAnchors",function(value){this.m_titleAnchors=value;
});
MPageView.method("addTitleAnchor",function(value){if(this.m_titleAnchors===null){this.m_titleAnchors=[];
}this.m_titleAnchors.push(value);
});
MPageView.method("getCustomizeEnabled",function(){return this.m_isCustomizeEnabled;
});
MPageView.method("setCustomizeEnabled",function(value){this.m_isCustomizeEnabled=value;
});
MPageView.method("getCustomizeView",function(){return this.isCustomizeView;
});
MPageView.method("setCustomizeView",function(value){this.isCustomizeView=value;
});
MPageView.method("getComponentIds",function(){return(this.componentIds);
});
MPageView.method("setComponentIds",function(value){this.componentIds=value;
});
MPageView.method("addComponentId",function(value){if(this.componentIds===null){this.componentIds=[];
}this.componentIds.push(value);
});
MPageView.method("getCriterion",function(){return(this.criterion);
});
MPageView.method("setCriterion",function(value){this.criterion=value;
});
MPageView.method("getHelpFileName",function(){return this.helpFileName;
});
MPageView.method("setHelpFileName",function(value){this.helpFileName=value;
});
MPageView.method("getHelpFileURL",function(){return this.helpFileURL;
});
MPageView.method("setHelpFileURL",function(value){this.helpFileURL=value;
});
MPageView.method("isBannerEnabled",function(){return this.banner;
});
MPageView.method("setBannerEnabled",function(value){this.banner=value;
});
MPageView.method("isChartSearchEnabled",function(){return this.m_csEnabled;
});
MPageView.method("setChartSearchEnabled",function(value){this.m_csEnabled=value;
});
MPageView.method("setPrintableReportName",function(value){this.printableReportName=value;
});
MPageView.method("getPrintableReportName",function(){return this.printableReportName;
});
MPageView.method("getPageId",function(){return this.pageId;
});
MPageView.method("setPageId",function(value){this.pageId=value;
});
MPageView.method("getName",function(){return this.name;
});
MPageView.method("setName",function(value){this.name=value;
});
MPageView.method("getComponents",function(){return this.components;
});
MPageView.method("setComponents",function(value){this.components=value;
});
MPageView.method("addComponent",function(value){if(this.components===null){this.components=[];
}this.components.push(value);
});
}function SortMPageComponentRows(c1,c2){if(c1.getSequence()<c2.getSequence()){return -1;
}if(c1.getSequence()>c2.getSequence()){return 1;
}return 0;
}function SortMPageComponentCols(c1,c2){if(c1.getColumn()<c2.getColumn()){return -1;
}if(c1.getColumn()>c2.getColumn()){return 1;
}return SortMPageComponentRows(c1,c2);
}function SortMPageComponents(c1,c2){if(c1.getPageGroupSequence()<c2.getPageGroupSequence()){return -1;
}if(c1.getPageGroupSequence()>c2.getPageGroupSequence()){return 1;
}return SortMPageComponentCols(c1,c2);
}
var CERN_EventListener=null;
var CERN_MPageComponents=null;
var CERN_TabManagers=null;
var CERN_MPages=null;
var CK_DATA={};
var STR_PAD_LEFT=1;
var STR_PAD_RIGHT=2;
var STR_PAD_BOTH=3;
Array.prototype.addAll=function(v){if(v&&v.length>0){for(var x=0,xl=v.length;
x<xl;
x++){this.push(v[x]);
}}};
var MP_Core=function(){return{Criterion:function(jsCrit,static_content){var m_patInfo=null;
var m_prsnlInfo=null;
var m_periop_cases=null;
var m_encntrOverride=[];
this.person_id=jsCrit.PERSON_ID;
this.encntr_id=(jsCrit.ENCNTRS.length>0)?jsCrit.ENCNTRS[0].ENCNTR_ID:0;
this.provider_id=jsCrit.PRSNL_ID;
this.executable=jsCrit.EXECUTABLE;
this.static_content=static_content;
this.position_cd=jsCrit.POSITION_CD;
this.ppr_cd=jsCrit.PPR_CD;
this.debug_ind=(jsCrit.DEBUG_IND==1)?true:false;
this.help_file_local_ind=jsCrit.HELP_FILE_LOCAL_IND;
this.category_mean=jsCrit.CATEGORY_MEAN;
this.locale_id=(this.debug_ind)?"en_us":jsCrit.LOCALE_ID;
this.device_location="";
var encntrOR=jsCrit.ENCNTR_OVERRIDE;
if(encntrOR){for(var x=encntrOR.length;
x--;
){m_encntrOverride.push(encntrOR[x].ENCNTR_ID);
}}else{m_encntrOverride.push(this.encntr_id);
}this.setPatientInfo=function(value){m_patInfo=value;
};
this.getPatientInfo=function(){return m_patInfo;
};
this.setPeriopCases=function(value){m_periop_cases=value;
};
this.getPeriopCases=function(){return m_periop_cases;
};
this.getPersonnelInfo=function(){if(!m_prsnlInfo){m_prsnlInfo=new MP_Core.PersonnelInformation(this.provider_id,this.person_id);
}return m_prsnlInfo;
};
this.getEncounterOverride=function(){return m_encntrOverride;
};
},PatientInformation:function(){var m_dob=null;
var m_sex=null;
this.setSex=function(value){m_sex=value;
};
this.getSex=function(){return m_sex;
};
this.setDOB=function(value){m_dob=value;
};
this.getDOB=function(){return m_dob;
};
},PeriopCases:function(){var m_case_id=null;
var m_prior_ind=null;
var m_days=null;
var m_hours=null;
var m_mins=null;
var m_cntdwn_desc_flag=null;
this.setCaseID=function(value){m_case_id=value;
};
this.getCaseID=function(){return m_case_id;
};
this.setDays=function(value){m_days=value;
};
this.getDays=function(){return m_days;
};
this.setHours=function(value){m_hours=value;
};
this.getHours=function(){return m_hours;
};
this.setMins=function(value){m_mins=value;
};
this.getMins=function(){return m_mins;
};
this.setCntdwnDscFlg=function(value){m_cntdwn_desc_flag=value;
};
this.getCntdwnDscFlg=function(){return m_cntdwn_desc_flag;
};
},ScriptRequest:function(component,loadTimerName){var m_comp=component;
var m_load=loadTimerName;
var m_name="";
var m_programName="";
var m_params=null;
var m_async=true;
this.getComponent=function(){return m_comp;
};
this.getLoadTimer=function(){return m_load;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setProgramName=function(value){m_programName=value;
};
this.getProgramName=function(){return m_programName;
};
this.setParameters=function(value){m_params=value;
};
this.getParameters=function(){return m_params;
};
this.setAsync=function(value){m_async=value;
};
this.isAsync=function(){return m_async;
};
},ScriptReply:function(component){var m_name="";
var m_status="F";
var m_err="";
var m_resp=null;
var m_comp=component;
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setStatus=function(value){m_status=value;
};
this.getStatus=function(){return m_status;
};
this.setError=function(value){m_err=value;
};
this.getError=function(){return m_err;
};
this.setResponse=function(value){m_resp=value;
};
this.getResponse=function(){return m_resp;
};
this.getComponent=function(){return m_comp;
};
},PersonnelInformation:function(prsnlId,patientId){var m_prsnlId=prsnlId;
var m_viewableEncntrs=null;
var patConObj=null;
try{patConObj=window.external.DiscernObjectFactory("PVCONTXTMPAGE");
MP_Util.LogDiscernInfo(null,"PVCONTXTMPAGE","mp_core.js","PersonnelInformation");
if(patConObj){m_viewableEncntrs=patConObj.GetValidEncounters(patientId);
MP_Util.LogDebug("Viewable Encounters: "+m_viewableEncntrs);
}}catch(e){}finally{patConObj=null;
}this.getPersonnelId=function(){return m_prsnlId;
};
this.getViewableEncounters=function(){return m_viewableEncntrs;
};
},XMLCclRequestWrapper:function(component,program,paramAr,async){var timerLoadComponent=MP_Util.CreateTimer(component.getComponentLoadTimerName(),component.getCriterion().category_mean);
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
info.onreadystatechange=function(){var countText="";
var errMsg=null;
if(this.readyState==4&&this.status==200){try{MP_Util.LogScriptCallInfo(component,this,"mp_core.js","XMLCclRequestWrapper");
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{if(recordData.STATUS_DATA.STATUS=="S"){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName(),component.getCriterion().category_mean);
try{var rootComponentNode=component.getRootComponentNode();
var secTitle=Util.Style.g("sec-total",rootComponentNode,"span");
secTitle[0].innerHTML=i18nCore.RENDERING_DATA+"...";
component.HandleSuccess(recordData);
}catch(err){MP_Util.LogJSError(err,component,"mp_core.js","XMLCclRequestWrapper");
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}else{MP_Util.LogScriptCallError(component,this,"mp_core.js","XMLCclRequestWrapper");
errMsg=[];
var ss=null;
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length===undefined){ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}}}catch(err){MP_Util.LogJSError(err,component,"mp_core.js","XMLCclRequestWrapper");
errMsg=[];
errMsg.push("<b>",i18nCore.JS_ERROR,"</b><br /><ul><li>",i18nCore.MESSAGE,": ",err.message,"</li><li>",i18nCore.NAME,": ",err.name,"</li><li>",i18nCore.NUMBER,": ",(err.number&65535),"</li><li>",i18nCore.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(this.readyState==4&&this.status!=200){MP_Util.LogScriptCallError(component,this,"mp_core.js","XMLCclRequestWrapper");
errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,"");
if(timerLoadComponent){timerLoadComponent.Abort();
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET",program,async);
info.send(paramAr.join(","));
},XMLCCLRequestCallBack:function(component,request,funcCallback){var timerLoad=MP_Util.CreateTimer(request.getLoadTimer());
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
var reply=new MP_Core.ScriptReply(component);
reply.setName(request.getName());
info.onreadystatechange=function(){var errMsg=null;
if(this.readyState==4&&this.status==200){try{MP_Util.LogScriptCallInfo(component,this,"mp_core.js","XMLCclRequestCallBack");
var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
var status=recordData.STATUS_DATA.STATUS;
reply.setStatus(status);
if(status=="Z"){reply.setResponse(recordData);
funcCallback(reply);
}else{if(status=="S"){reply.setResponse(recordData);
funcCallback(reply);
}else{MP_Util.LogScriptCallError(component,this,"mp_core.js","XMLCclRequestCallBack");
errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
reply.setError(errMsg.join(""));
funcCallback(reply);
}}}catch(err){MP_Util.LogJSError(err,component,"mp_core.js","XMLCclRequestCallBack");
errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
timerLoad=null;
}}finally{if(timerLoad){timerLoad.Stop();
}}}else{if(info.readyState==4&&info.status!=200){MP_Util.LogScriptCallError(component,this,"mp_core.js","XMLCclRequestCallBack");
errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
}funcCallback(reply);
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET",request.getProgramName(),request.isAsync());
info.send(request.getParameters().join(","));
},XMLCCLRequestThread:function(name,component,request){var m_name=name;
var m_comp=component;
var m_request=request;
m_request.setName(name);
this.getName=function(){return m_name;
};
this.getComponent=function(){return m_comp;
};
this.getRequest=function(){return m_request;
};
},XMLCCLRequestThreadManager:function(callbackFunction,component,handleFinalize){var m_threads=null;
var m_replyAr=null;
var m_isData=false;
var m_isError=false;
this.addThread=function(thread){if(!m_threads){m_threads=[];
}m_threads.push(thread);
};
this.begin=function(){if(m_threads&&m_threads.length>0){for(x=m_threads.length;
x--;
){var thread=m_threads[x];
MP_Core.XMLCCLRequestCallBack(thread.getComponent(),thread.getRequest(),this.completeThread);
}}else{if(handleFinalize){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(null,component);
}}};
this.completeThread=function(reply){if(!m_replyAr){m_replyAr=[];
}if(reply.getStatus()==="S"){m_isData=true;
}else{if(reply.getStatus()==="F"){m_isError=true;
}}m_replyAr.push(reply);
if(m_replyAr.length===m_threads.length){var countText=(component.isLineNumberIncluded()?"(0)":"");
var errMsg=null;
try{if(handleFinalize){if(m_isError){errMsg=[];
for(var x=m_replyAr.length;
x--;
){var rep=m_replyAr[x];
if(rep.getStatus()==="F"){errMsg.push(rep.getError());
}}MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("<br />")),component,"");
}else{if(!m_isData){countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(m_replyAr,component);
}}}else{callbackFunction(m_replyAr,component);
}}catch(err){MP_Util.LogJSError(err,component,"mp_core.js","XMLCCLRequestThreadManager");
var i18nCore=i18n.discernabu;
errMsg=["<b>",i18nCore.JS_ERROR,"</b><br /><ul><li>",i18nCore.MESSAGE,": ",err.message,"</li><li>",i18nCore.NAME,": ",err.name,"</li><li>",i18nCore.NUMBER,": ",(err.number&65535),"</li><li>",i18nCore.DESCRIPTION,": ",err.description,"</li></ul>"];
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}}};
},MapObject:function(name,value){this.name=name;
this.value=value;
},TabItem:function(key,name,components,prefIdentifier){this.key=key;
this.name=name;
this.components=components;
this.prefIdentifier=prefIdentifier;
},TabManager:function(tabItem){var m_isLoaded=false;
var m_tabItem=tabItem;
var m_isExpandAll=false;
var m_isSelected=false;
this.toggleExpandAll=function(){m_isExpandAll=(!m_isExpandAll);
};
this.loadTab=function(){if(!m_isLoaded){m_isLoaded=true;
var components=m_tabItem.components;
if(components){for(var xl=components.length;
xl--;
){var component=components[xl];
if(component.isDisplayable()){component.InsertData();
}}}}};
this.getTabItem=function(){return m_tabItem;
};
this.getSelectedTab=function(){return m_isSelected;
};
this.setSelectedTab=function(value){m_isSelected=value;
};
},ReferenceRangeResult:function(){var m_valNLow=-1,m_valNHigh=-1,m_valCLow=-1,m_valCHigh=-1;
var m_uomNLow=null,m_uomNHigh=null,m_uomCLow=null,m_uomCHigh=null;
this.init=function(refRange,codeArray){var nf=MP_Util.GetNumericFormatter();
m_valCLow=nf.format(refRange.CRITICAL_LOW.NUMBER);
if(refRange.CRITICAL_LOW.UNIT_CD!=""){m_uomCLow=MP_Util.GetValueFromArray(refRange.CRITICAL_LOW.UNIT_CD,codeArray);
}m_valCHigh=nf.format(refRange.CRITICAL_HIGH.NUMBER);
if(refRange.CRITICAL_HIGH.UNIT_CD!=""){m_uomCHigh=MP_Util.GetValueFromArray(refRange.CRITICAL_HIGH.UNIT_CD,codeArray);
}m_valNLow=nf.format(refRange.NORMAL_LOW.NUMBER);
if(refRange.NORMAL_LOW.UNIT_CD!=""){m_uomNLow=MP_Util.GetValueFromArray(refRange.NORMAL_LOW.UNIT_CD,codeArray);
}m_valNHigh=nf.format(refRange.NORMAL_HIGH.NUMBER);
if(refRange.NORMAL_HIGH.UNIT_CD!=""){m_uomNHigh=MP_Util.GetValueFromArray(refRange.NORMAL_HIGH.UNIT_CD,codeArray);
}};
this.getNormalLow=function(){return m_valNLow;
};
this.getNormalHigh=function(){return m_valNHigh;
};
this.getNormalLowUOM=function(){return m_uomNLow;
};
this.getNormalHighUOM=function(){return m_uomNHigh;
};
this.getCriticalLow=function(){return m_valCLow;
};
this.getCriticalHigh=function(){return m_valCHigh;
};
this.getCriticalLowUOM=function(){return m_uomCLow;
};
this.getCriticalHighUOM=function(){return m_uomCHigh;
};
this.toNormalInlineString=function(){var low=(m_uomNLow)?m_uomNLow.display:"";
var high=(m_uomNHigh)?m_uomNHigh.display:"";
if(m_valNLow!=0||m_valNHigh!=0){return(m_valNLow+"&nbsp;"+low+" - "+m_valNHigh+"&nbsp;"+high);
}else{return"";
}};
this.toCriticalInlineString=function(){var low=(m_uomCLow)?m_uomCLow.display:"";
var high=(m_uomCHigh)?m_uomCHigh.display:"";
if(m_valCLow!=0||m_valCHigh!=0){return(m_valCLow+"&nbsp;"+low+" - "+m_valCHigh+"&nbsp;"+high);
}else{return"";
}};
},QuantityValue:function(){var m_val,m_precision;
var m_uom=null;
var m_refRange=null;
var m_rawValue=0;
var m_hasModifier=false;
this.init=function(result,codeArray){var quantityValue=result.QUANTITY_VALUE;
var referenceRange=result.REFERENCE_RANGE;
for(var l=0,ll=quantityValue.length;
l<ll;
l++){var numRes=quantityValue[l].NUMBER;
m_precision=quantityValue[l].PRECISION;
if(!isNaN(numRes)){m_val=MP_Util.Measurement.SetPrecision(numRes,m_precision);
m_rawValue=numRes;
}if(quantityValue[l].MODIFIER_CD!=""){var modCode=MP_Util.GetValueFromArray(quantityValue[l].MODIFIER_CD,codeArray);
if(modCode){m_val=modCode.display+m_val;
m_hasModifier=true;
}}if(quantityValue[l].UNIT_CD!=""){m_uom=MP_Util.GetValueFromArray(quantityValue[l].UNIT_CD,codeArray);
}for(var m=0,ml=referenceRange.length;
m<ml;
m++){m_refRange=new MP_Core.ReferenceRangeResult();
m_refRange.init(referenceRange[m],codeArray);
}}};
this.getValue=function(){return m_val;
};
this.getRawValue=function(){return m_rawValue;
};
this.getUOM=function(){return m_uom;
};
this.getRefRange=function(){return m_refRange;
};
this.getPrecision=function(){return m_precision;
};
this.toString=function(){if(m_uom){return(m_val+" "+m_uom.display);
}return m_val;
};
this.hasModifier=function(){return m_hasModifier;
};
},Measurement:function(){var m_eventId=0;
var m_personId=0;
var m_encntrId=0;
var m_eventCode=null;
var m_dateTime=null;
var m_updateDateTime=null;
var m_result=null;
var m_normalcy=null;
var m_status=null;
this.init=function(eventId,personId,encntrId,eventCode,dateTime,resultObj,updateDateTime){m_eventId=eventId;
m_personId=personId;
m_encntrId=encntrId;
m_eventCode=eventCode;
m_dateTime=dateTime;
m_result=resultObj;
m_updateDateTime=updateDateTime;
};
this.initFromRec=function(measObj,codeArray){var effectiveDateTime=new Date();
var updateDateTime=new Date();
m_eventId=measObj.EVENT_ID;
m_personId=measObj.PATIENT_ID;
m_encntrId=measObj.ENCOUNTER_ID;
m_eventCode=MP_Util.GetValueFromArray(measObj.EVENT_CD,codeArray);
effectiveDateTime.setISO8601(measObj.EFFECTIVE_DATE);
m_dateTime=effectiveDateTime;
m_result=MP_Util.Measurement.GetObject(measObj,codeArray);
updateDateTime.setISO8601(measObj.UPDATE_DATE);
m_updateDateTime=updateDateTime;
m_normalcy=MP_Util.GetValueFromArray(measObj.NORMALCY_CD,codeArray);
m_status=MP_Util.GetValueFromArray(measObj.STATUS_CD,codeArray);
};
this.getEventId=function(){return m_eventId;
};
this.getPersonId=function(){return m_personId;
};
this.getEncntrId=function(){return m_encntrId;
};
this.getEventCode=function(){return m_eventCode;
};
this.getDateTime=function(){return m_dateTime;
};
this.getUpdateDateTime=function(){return m_updateDateTime;
};
this.getResult=function(){return m_result;
};
this.setNormalcy=function(value){m_normalcy=value;
};
this.getNormalcy=function(){return m_normalcy;
};
this.setStatus=function(value){m_status=value;
};
this.getStatus=function(){return m_status;
};
this.isModified=function(){if(m_status){var mean=m_status.meaning;
if(mean==="MODIFIED"||mean==="ALTERED"){return true;
}}return false;
};
},MenuItem:function(){var m_name="";
var m_desc="";
var m_id=0;
var m_meaning;
this.setDescription=function(value){m_desc=value;
};
this.getDescription=function(){return m_desc;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setId=function(value){m_id=value;
};
this.getId=function(){return m_id;
};
this.setMeaning=function(value){m_meaning=value;
};
this.getMeaning=function(){return m_meaning;
};
},CriterionFilters:function(criterion){var m_criterion=criterion;
var m_evalAr=[];
this.addFilter=function(type,value){m_evalAr.push(new MP_Core.MapObject(type,value));
};
this.checkFilters=function(){var pass=false;
var patInfo=m_criterion.getPatientInfo();
for(var x=m_evalAr.length;
x--;
){var filter=m_evalAr[x];
var dob=null;
switch(filter.name){case MP_Core.CriterionFilters.SEX_MEANING:var sex=patInfo.getSex();
if(sex){if(filter.value==sex.meaning){continue;
}}return false;
case MP_Core.CriterionFilters.DOB_OLDER_THAN:dob=patInfo.getDOB();
if(dob){if(dob<=filter.value){continue;
}}return false;
case MP_Core.CriterionFilters.DOB_YOUNGER_THAN:dob=patInfo.getDOB();
if(dob){if(dob>=filter.value){continue;
}}return false;
default:alert("Unhandled criterion filter");
return false;
}}return true;
};
},CreateSimpleError:function(component,sMessage){var errMsg=[];
var i18nCore=i18n.discernabu;
var countText=(component.isLineNumberIncluded()?"(0)":"");
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",sMessage,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}};
}();
MP_Core.CriterionFilters.SEX_MEANING=1;
MP_Core.CriterionFilters.DOB_OLDER_THAN=2;
MP_Core.CriterionFilters.DOB_YOUNGER_THAN=3;
MP_Core.AppUserPreferenceManager=function(){var m_criterion=null;
var m_prefIdent="";
var m_jsonObject=null;
return{Initialize:function(criterion,preferenceIdentifier){m_criterion=criterion;
m_prefIdent=preferenceIdentifier;
m_jsonObject=null;
},SetPreferences:function(prefString){var jsonEval=JSON.parse(prefString);
m_jsonObject=jsonEval;
},LoadPreferences:function(){if(!m_criterion){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject){return;
}else{var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(null,this,"mp_core.js","LoadPreferences");
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=JSON.parse(recordData.PREF_STRING);
}else{if(recordData.STATUS_DATA.STATUS=="Z"){return;
}else{MP_Util.LogScriptCallError(null,this,"mp_core.js","LoadPreferences");
var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error retrieving user preferences "+errAr.join(",");
return;
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_GET_USER_PREFS",false);
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^"];
info.send(ar.join(","));
return;
}},GetPreferences:function(){if(!m_criterion){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(!m_jsonObject){this.LoadPreferences();
}return m_jsonObject;
},SavePreferences:function(){var body=document.body;
var groups=Util.Style.g("col-group",body,"div");
var grpId=0;
var colId=0;
var rowId=0;
var compId=0;
var jsonObject={};
var userPrefs=jsonObject.user_prefs={};
var pagePrefs=userPrefs.page_prefs={};
var components=pagePrefs.components=[];
var cclParams=[];
for(var x=0,xl=groups.length;
x<xl;
x++){grpId=x+1;
var liqLay=Util.Style.g("col-outer1",groups[x],"div");
if(liqLay.length>0){var cols=Util.gcs(liqLay[0]);
for(var y=0,yl=cols.length;
y<yl;
y++){colId=y+1;
var rows=Util.gcs(cols[y]);
for(var z=0,zl=rows.length;
z<zl;
z++){var component=new Object();
rowId=z+1;
compId=jQuery(rows[z]).attr("id");
var compObj=MP_Util.GetCompObjByStyleId(compId);
component.id=compObj.getComponentId();
component.group_seq=grpId;
component.col_seq=colId;
component.row_seq=rowId;
component.lookbackunits=compObj.getLookbackUnits();
component.lookbacktypeflag=compObj.getLookbackUnitTypeFlag();
component.grouperFilterLabel=compObj.getGrouperFilterLabel();
component.grouperFilterEventSets=compObj.getGrouperFilterEventSets();
component.selectedTimeFrame=compObj.getSelectedTimeFrame();
component.selectedDataGroup=compObj.getSelectedDataGroup();
if(jQuery(rows[z]).hasClass("closed")){component.expanded=false;
}else{component.expanded=true;
}components.push(component);
}}}}WritePreferences(jsonObject);
if(typeof m_viewpointJSON=="undefined"){cclParams.push("^MINE^",m_criterion.person_id+".0",m_criterion.encntr_id+".0",m_criterion.provider_id+".0",m_criterion.position_cd+".0",m_criterion.ppr_cd+".0","^"+m_criterion.executable+"^","^^","^"+m_criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+m_criterion.category_mean+"^",m_criterion.debug_ind);
CCLLINK("MP_DRIVER",cclParams.join(","),1);
}else{var viewpointJSON=JSON.parse(m_viewpointJSON).VIEWPOINTINFO_REC;
m_jsonObject=jsonObject;
cclParams.push("^MINE^",m_criterion.person_id+".0",m_criterion.encntr_id+".0",m_criterion.provider_id+".0",m_criterion.position_cd+".0",m_criterion.ppr_cd+".0","^"+m_criterion.executable+"^","^"+m_criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+viewpointJSON.VIEWPOINT_NAME_KEY+"^",m_criterion.debug_ind,"^^",0,"^"+viewpointJSON.ACTIVE_VIEW_CAT_MEAN+"^");
CCLLINK("MP_VIEWPOINT_DRIVER",cclParams.join(","),1);
}},ClearCompPreferences:function(componentId){var compObj=MP_Util.GetCompObjById(componentId);
var style=compObj.getStyles();
var ns=style.getNameSpace();
var prefObj=m_jsonObject;
var filterArr=null;
if(prefObj!=null){var strEval=JSON.parse(JSON.stringify(prefObj));
var strObj=strEval.user_prefs.page_prefs.components;
for(var x=strObj.length;
x--;
){if(strEval&&strObj[x].id===componentId){strObj[x].lookbackunits=compObj.getBrLookbackUnits();
strObj[x].lookbacktypeflag=compObj.getBrLookbackUnitTypeFlag();
strObj[x].grouperFilterLabel="";
strObj[x].grouperFilterEventSets=filterArr;
strObj[x].selectedTimeFrame="";
strObj[x].selectedDataGroup="";
}}compObj.setLookbackUnits(compObj.getBrLookbackUnits());
compObj.setLookbackUnitTypeFlag(compObj.getBrLookbackUnitTypeFlag());
compObj.setGrouperFilterLabel("");
compObj.setGrouperFilterEventSets(filterArr);
compObj.setSelectedTimeFrame("");
compObj.setSelectedDataGroup("");
m_jsonObject=strEval;
WritePreferences(m_jsonObject);
MP_Util.Doc.CreateLookBackMenu(compObj,2,"");
if(ns==="lab"||ns==="dg"){var contentNode=compObj.getSectionContentNode().innerHTML="";
}compObj.InsertData();
}},SaveCompPreferences:function(componentId){var compObj=MP_Util.GetCompObjById(componentId);
var prefObj=m_jsonObject;
if(prefObj!=null){var strEval=JSON.parse(JSON.stringify(prefObj));
var strObj=strEval.user_prefs.page_prefs.components;
for(var x=strObj.length;
x--;
){if(strEval&&strObj[x].id===componentId){strObj[x].lookbackunits=compObj.getLookbackUnits();
strObj[x].lookbacktypeflag=compObj.getLookbackUnitTypeFlag();
strObj[x].grouperFilterLabel=compObj.getGrouperFilterLabel();
strObj[x].grouperFilterEventSets=compObj.getGrouperFilterEventSets();
strObj[x].selectedTimeFrame=compObj.getSelectedTimeFrame();
strObj[x].selectedDataGroup=compObj.getSelectedDataGroup();
}}m_jsonObject=strEval;
WritePreferences(m_jsonObject);
}else{var body=document.body;
var groups=Util.Style.g("col-group",body,"div");
var grpId=0;
var colId=0;
var rowId=0;
var compId=0;
var jsonObject={};
var userPrefs=jsonObject.user_prefs={};
var pagePrefs=userPrefs.page_prefs={};
var components=pagePrefs.components=[];
var cclParams=[];
for(var x=0,xl=groups.length;
x<xl;
x++){grpId=x+1;
var liqLay=Util.Style.g("col-outer1",groups[x],"div");
if(liqLay.length>0){var cols=Util.gcs(liqLay[0]);
for(var y=0,yl=cols.length;
y<yl;
y++){colId=y+1;
var rows=Util.gcs(cols[y]);
for(var z=0,zl=rows.length;
z<zl;
z++){var component=new Object();
rowId=z+1;
compId=jQuery(rows[z]).attr("id");
var compObj=MP_Util.GetCompObjByStyleId(compId);
component.id=compObj.getComponentId();
component.group_seq=grpId;
component.col_seq=colId;
component.row_seq=rowId;
component.lookbackunits=compObj.getLookbackUnits();
component.lookbacktypeflag=compObj.getLookbackUnitTypeFlag();
component.grouperFilterLabel=compObj.getGrouperFilterLabel();
component.grouperFilterEventSets=compObj.getGrouperFilterEventSets();
component.selectedTimeFrame=compObj.getSelectedTimeFrame();
component.selectedDataGroup=compObj.getSelectedDataGroup();
if(jQuery(rows[z]).hasClass("closed")){component.expanded=false;
}else{component.expanded=true;
}components.push(component);
}}}}WritePreferences(jsonObject);
m_jsonObject=jsonObject;
}},SaveViewpointPreferences:function(vpNameKey,vwpObj){WriteViewpointPreferences(vwpObj.VIEWS,vpNameKey);
},SaveQOCPreferences:function(jsonObj){m_prefIdent="MP_COMMON_ORDERS_V4";
WritePreferences(jsonObj);
},GetQOCPreferences:function(){if(!m_criterion){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(!m_jsonObject){m_prefIdent="MP_COMMON_ORDERS_V4";
this.LoadPreferences();
}return m_jsonObject;
},ClearPreferences:function(){WritePreferences(null);
if(typeof m_viewpointJSON=="undefined"){var cclParams=["^MINE^",m_criterion.person_id+".0",m_criterion.encntr_id+".0",m_criterion.provider_id+".0",m_criterion.position_cd+".0",m_criterion.ppr_cd+".0","^"+m_criterion.executable+"^","^^","^"+m_criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+m_criterion.category_mean+"^",m_criterion.debug_ind];
CCLLINK("MP_DRIVER",cclParams.join(","),1);
}else{var viewpointJSON=JSON.parse(m_viewpointJSON).VIEWPOINTINFO_REC;
var cclParams=["^MINE^",m_criterion.person_id+".0",m_criterion.encntr_id+".0",m_criterion.provider_id+".0",m_criterion.position_cd+".0",m_criterion.ppr_cd+".0","^"+m_criterion.executable+"^","^"+m_criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+viewpointJSON.VIEWPOINT_NAME_KEY+"^",m_criterion.debug_ind,"^^",0,"^"+viewpointJSON.ACTIVE_VIEW_CAT_MEAN+"^"];
CCLLINK("MP_VIEWPOINT_DRIVER",cclParams.join(","),1);
}},GetComponentById:function(id){if(m_jsonObject){var components=m_jsonObject.user_prefs.page_prefs.components;
for(var x=components.length;
x--;
){var component=components[x];
if(component.id==id){return component;
}}}return null;
}};
function WriteViewpointPreferences(jsonObject,viewpointNameKey,successMessage){var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(null,this,"mp_core.js","WriteViewpointPreferences");
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){m_jsonObject=null;
}else{if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=jsonObject;
if(successMessage&&successMessage.length>0){alert(successMessage);
}}else{MP_Util.LogScriptCallError(null,this,"mp_core.js","WriteViewpointPreferences");
var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error saving viewpoint user preferences: "+errAr.join(",");
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_MAINTAIN_USER_PREFS",false);
var sJson=(jsonObject!=null)?JSON.stringify(jsonObject):"";
var ar=["^mine^",m_criterion.provider_id+".0","^"+viewpointNameKey+"^","^"+sJson+"^"];
info.send(ar.join(","));
}function WritePreferences(jsonObject,successMessage){var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(null,this,"mp_core.js","WritePreferences");
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){m_jsonObject=null;
}else{if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=jsonObject;
if(successMessage&&successMessage.length>0){alert(successMessage);
}}else{MP_Util.LogScriptCallError(null,this,"mp_core.js","WritePreferences");
var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error saving user preferences: "+errAr.join(",");
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_MAINTAIN_USER_PREFS",false);
var sJson=(jsonObject!=null)?JSON.stringify(jsonObject):"";
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^","^"+sJson+"^"];
info.send(ar.join(","));
}}();
var MP_Util=function(){var m_df=null;
var m_nf=null;
var m_codeSets=[];
return{GetCriterion:function(js_criterion,static_content){MP_Util.LogDebug("Criterion: "+JSON.stringify(js_criterion));
var jsCrit=js_criterion.CRITERION;
var criterion=new MP_Core.Criterion(jsCrit,static_content);
var codeArray=MP_Util.LoadCodeListJSON(jsCrit.CODES);
var jsPatInfo=jsCrit.PATIENT_INFO;
var patInfo=new MP_Core.PatientInformation();
var jsPeriopCases=jsCrit.PERIOP_CASE;
var oPeriopCases=new MP_Core.PeriopCases();
patInfo.setSex(MP_Util.GetValueFromArray(jsPatInfo.SEX_CD,codeArray));
if(jsPatInfo.DOB!=""){var dt=new Date();
dt.setISO8601(jsPatInfo.DOB);
patInfo.setDOB(dt);
}criterion.setPatientInfo(patInfo);
oPeriopCases.setCaseID(jsPeriopCases.CASE_ID);
oPeriopCases.setDays(jsPeriopCases.DAYS);
oPeriopCases.setHours(jsPeriopCases.HOURS);
oPeriopCases.setMins(jsPeriopCases.MINS);
oPeriopCases.setCntdwnDscFlg(jsPeriopCases.CNTDWN_DESC_FLAG);
criterion.setPeriopCases(oPeriopCases);
return criterion;
},CalcLookbackDate:function(lookbackDays){var retDate=new Date();
var hrs=retDate.getHours();
hrs-=(lookbackDays*24);
retDate.setHours(hrs);
return retDate;
},CalcWithinTime:function(dateTime){return(GetDateDiffString(dateTime,null,null,true));
},CalcAge:function(birthDt,fromDate){fromDate=(fromDate)?fromDate:new Date();
return(GetDateDiffString(birthDt,fromDate,1,false));
},DisplayDateByOption:function(component,date){var df=MP_Util.GetDateFormatter();
var dtFormatted="";
switch(component.getDateFormat()){case 1:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR));
case 2:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR));
case 3:return(MP_Util.CalcWithinTime(date));
case 4:return("&nbsp");
default:return df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);
}},DisplaySelectedTab:function(showDiv,anchorId){if(window.name=="a-tab0"){window.name="";
}else{window.name=showDiv+","+anchorId;
}var body=document.body;
var divs=Util.Style.g("div-tab-item",body);
for(var i=divs.length;
i--;
){if(divs[i].id==showDiv){divs[i].style.display="block";
}else{divs[i].style.display="none";
}}var anchors=Util.Style.g("anchor-tab-item",body);
for(var i=anchors.length;
i--;
){if(anchors[i].id==anchorId){anchors[i].className="anchor-tab-item active";
}else{anchors[i].className="anchor-tab-item inactive";
}}var custNode=_g("custView");
if(custNode!=null){custNode.href="";
custNode.innerHTML="";
}for(var yl=CERN_TabManagers.length;
yl--;
){var tabManager=CERN_TabManagers[yl];
var tabItem=tabManager.getTabItem();
if(tabItem.key==showDiv){tabManager.loadTab();
tabManager.setSelectedTab(true);
var components=tabItem.components;
if(components!=null&&components.length>0){for(var xl=components.length;
xl--;
){var component=components[xl];
MP_Util.Doc.AddCustomizeLink(component.getCriterion());
break;
}}}else{tabManager.setSelectedTab(false);
}}},DisplaySelectedTabQOC:function(showDiv,anchorId,noViewSaved){if(noViewSaved){var dropDownList=_g("viewListSelectorID");
if(dropDownList.options[dropDownList.options.length-1].value=="Blank_Space"){dropDownList.remove(dropDownList.options.length-1);
}var noSavedViewsStatement=_g("noSavedViews");
if(!Util.Style.ccss(noSavedViewsStatement,"hidden")){Util.Style.acss(noSavedViewsStatement,"hidden");
}}if(window.name=="a-tab0"){window.name="";
}else{window.name=showDiv+","+anchorId;
}var body=document.body;
var divs=Util.Style.g("div-tab-item",body);
for(var i=divs.length;
i--;
){if(divs[i].id==showDiv){divs[i].style.display="block";
}else{divs[i].style.display="none";
}}var anchors=Util.Style.g("anchor-tab-item",body);
for(var i=anchors.length;
i--;
){if(anchors[i].id==anchorId){anchors[i].className="anchor-tab-item active";
}else{anchors[i].className="anchor-tab-item inactive";
}}var custNode=_g("custView");
if(custNode){custNode.href="";
custNode.innerHTML="";
}for(var yl=CERN_TabManagers.length;
yl--;
){var tabManager=CERN_TabManagers[yl];
var tabItem=tabManager.getTabItem();
if(tabItem.key==showDiv){tabManager.loadTab();
tabManager.setSelectedTab(true);
var jsonObj=MP_Core.AppUserPreferenceManager.GetQOCPreferences();
var userPrefs,pagePrefs,components,lastSavedView;
if(jsonObj){userPrefs=jsonObj.user_prefs;
pagePrefs=userPrefs.page_prefs;
pagePrefs.last_saved_view=tabItem.name;
}else{jsonObj={};
userPrefs=jsonObj.user_prefs={};
pagePrefs=userPrefs.page_prefs={};
components=pagePrefs.components=[];
lastSavedView=pagePrefs.last_saved_view=tabItem.name;
}MP_Core.AppUserPreferenceManager.SaveQOCPreferences(jsonObj);
var components=tabItem.components;
if(components!=null&&components.length>0){for(var xl=components.length;
xl--;
){var component=components[xl];
MP_Util.Doc.AddCustomizeLink(component.getCriterion());
break;
}}}else{tabManager.setSelectedTab(false);
}}},OpenTab:function(compId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openTab();
}}},LaunchMenuSelection:function(compId,menuItemId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var crit=comp.getCriterion();
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openDropDown(menuItemId);
break;
}}},LaunchMenu:function(menuId,componentId){var menu=_g(menuId);
MP_Util.closeMenuInit(menu,componentId);
if(menu!=null){if(Util.Style.ccss(menu,"menu-hide")){_g(componentId).style.zIndex=2;
Util.Style.rcss(menu,"menu-hide");
}else{_g(componentId).style.zIndex=1;
Util.Style.acss(menu,"menu-hide");
}}},LaunchLookBackSelection:function(compId,lookBackUnits,lookBackType){var i18nCore=i18n.discernabu;
var rootId=parseInt(compId,10);
var component=MP_Util.GetCompObjById(rootId);
var style=component.getStyles();
var ns=style.getNameSpace();
var scope=component.getScope();
var displayText="";
var lbtVal=parseInt(lookBackType,10);
if(component.getLookbackUnits()!==lookBackUnits||component.getLookbackUnitTypeFlag()!==lbtVal){component.setLookbackUnits(lookBackUnits);
component.setLookbackUnitTypeFlag(lbtVal);
if(scope>0){if(lookBackUnits>0&&lbtVal>0){var newText="";
switch(lbtVal){case 1:newText=i18nCore.LAST_N_HOURS.replace("{0}",lookBackUnits);
break;
case 2:newText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
case 3:newText=i18nCore.LAST_N_WEEKS.replace("{0}",lookBackUnits);
break;
case 4:newText=i18nCore.LAST_N_MONTHS.replace("{0}",lookBackUnits);
break;
case 5:newText=i18nCore.LAST_N_YEARS.replace("{0}",lookBackUnits);
break;
default:newText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
}switch(scope){case 1:displayText=i18nCore.ALL_N_VISITS.replace("{0}",newText);
break;
case 2:displayText=i18nCore.SELECTED_N_VISIT.replace("{0}",newText);
break;
}}else{switch(scope){case 1:displayText=i18nCore.All_VISITS;
break;
case 2:displayText=i18nCore.SELECTED_VISIT;
break;
}}}MP_Util.Doc.CreateLookBackMenu(component,2,displayText);
if(ns==="lab"||ns==="dg"){var contentNode=component.getSectionContentNode().innerHTML="";
}component.InsertData();
}},LaunchCompFilterSelection:function(compId,filterLabel,eventSetIndex,applyFilterInd){var component=MP_Util.GetCompObjById(compId);
var i18nCore=i18n.discernabu;
var mnuDisplay=filterLabel;
var dispVar=i18nCore.FACILITY_DEFINED_VIEW;
var style=component.getStyles();
var ns=style.getNameSpace();
var styleId=style.getId();
var loc=component.getCriterion().static_content;
var mnuId=styleId+"TypeMenu";
var z=0;
var eventSetList=component.getGrouperEventSets(eventSetIndex);
component.setGrouperFilterLabel(filterLabel);
if(filterLabel!==dispVar){component.setGrouperFilterEventSets(eventSetList);
}else{component.setGrouperFilterEventSets(null);
}var filterAppliedSpan=_g("cf"+compId+"msg");
if(filterAppliedSpan){Util.de(filterAppliedSpan);
}if(filterLabel!==dispVar){var newFilterAppliedSpan=Util.ce("span");
var filterAppliedArr=["<span id='cf",compId,"msg' class='filter-applied-msg' title='",filterLabel,"'>",i18nCore.FILTER_APPLIED,"</span>"];
newFilterAppliedSpan.innerHTML=filterAppliedArr.join("");
var lbDropDownDiv=_g("lbMnuDisplay"+compId);
Util.ia(newFilterAppliedSpan,lbDropDownDiv);
}else{var newFilterAppliedSpan=Util.ce("span");
var filterAppliedArr=["<span id='cf",compId,"msg' class='filter-applied-msg' title=''></span>"];
newFilterAppliedSpan.innerHTML=filterAppliedArr.join("");
var lbDropDownDiv=_g("lbMnuDisplay"+compId);
Util.ia(newFilterAppliedSpan,lbDropDownDiv);
}var contentDiv=_g("Accordion"+compId+"ContentDiv");
contentDiv.innerHTML="";
var contentDivArr=[];
contentDivArr.push("<div id='cf",mnuId,"' class='acc-mnu'>");
contentDivArr.push("<span id='cflabel",compId,"' onclick='MP_Util.LaunchMenu(\"",mnuId,'", "',styleId,"\");'>",i18nCore.FILTER_LABEL,mnuDisplay,"<a id='compFilterDrop",compId,"'><img src='",loc,"\\images\\3943_16.gif'></a></span>");
contentDivArr.push("<div class='cvClassFilterSpan lb-mnu-selectWindow lb-menu2 menu-hide' id='",mnuId,"'><div class='acc-mnu-contentbox'>");
contentDivArr.push("<div><span id='cf",styleId,"' class='lb-mnu' onclick='MP_Util.LaunchCompFilterSelection(",compId,',"',dispVar,'","",1);\'>',i18nCore.FACILITY_DEFINED_VIEW,"</span></div>");
var groupLen=component.m_grouper_arr.length;
for(z=0;
z<groupLen;
z++){if(component.getGrouperLabel(z)){var esIndex=z;
contentDivArr.push("<div><span id='cf",styleId,z,"' class='lb-mnu' onclick='MP_Util.LaunchCompFilterSelection(",compId,',"',component.getGrouperLabel(z),'",',esIndex,",1);'>",component.getGrouperLabel(z),"</span></div>");
}}contentDivArr.push("</div></div></div>");
contentDiv.innerHTML=contentDivArr.join("");
if(applyFilterInd===1){if(filterLabel===i18nCore.FACILITY_DEFINED_VIEW){component.InsertData();
}else{component.FilterRefresh(filterLabel,eventSetList);
}}},LaunchViewMenu:function(menuId){var menu=_g(menuId);
MP_Util.closeViewMenuInit(menu);
if(menu){if(Util.Style.ccss(menu,"menu-hide")){_g(menu.id).style.zIndex=2;
Util.Style.rcss(menu,"menu-hide");
}else{_g(menu.id).style.zIndex=1;
Util.Style.acss(menu,"menu-hide");
}var js_viewpoint=JSON.parse(m_viewpointJSON);
if(parseInt(js_viewpoint.VIEWPOINTINFO_REC.CS_ENABLED,10)){var sec=_g("viewDrop");
var ofs=Util.goff(sec);
menu.style.left=(ofs[0]-5)+"px";
menu.style.top=(ofs[1]+24)+"px";
}}},closeViewMenuInit:function(inMenu){var menuId=inMenu.id;
var e=window.event;
if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}menuLeave:function(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
}e.stopPropagation();
Util.cancelBubble(e);
}},closeMenuInit:function(inMenu,compId){var menuId;
var docMenuId=compId+"Menu";
var lbMenuId=compId+"Mnu";
var cfMenuId=compId+"TypeMenu";
if(inMenu.id==docMenuId||inMenu.id==lbMenuId||inMenu.id==cfMenuId){menuId=compId;
}if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}menuLeave:function(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}},CreateTitleText:function(component,nbr,optionalText){var ar=[];
if(component.isLineNumberIncluded()){ar.push("(",nbr,")");
}if(optionalText&&optionalText!==""){ar.push(" ",optionalText);
}return ar.join("");
},GetContentClass:function(component,nbr){if(component.isScrollingEnabled()){var scrollNbr=component.getScrollNumber();
if(nbr>=scrollNbr&&scrollNbr>0){return"content-body scrollable";
}}return"content-body";
},CreateTimer:function(timerName,subTimerName,metaData1,metaData2,metaData3){try{var slaTimer=window.external.DiscernObjectFactory("SLATIMER");
MP_Util.LogTimerInfo(timerName,subTimerName,"SLATIMER","mp_core.js","CreateTimer");
}catch(err){return null;
}if(slaTimer){slaTimer.TimerName=timerName;
if(subTimerName){slaTimer.SubtimerName=subTimerName;
}if(metaData1){slaTimer.Metadata1=String(metaData1);
}if(metaData2){slaTimer.Metadata2=String(metaData2);
}if(metaData3){slaTimer.Metadata3=String(metaData3);
}slaTimer.Start();
return slaTimer;
}else{return null;
}},GetCodeSet:function(codeSet,async){var codes=new Array();
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(null,this,"mp_core.js","GetCodeSet");
var jsonEval=JSON.parse(this.responseText);
if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="S"){codes=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
}return codes;
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_GET_CODESET",async);
var sendVal="^MINE^, "+codeSet+".0";
info.send(sendVal);
return codes;
},GetCodeByMeaning:function(mapCodes,meaning){for(var x=mapCodes.length;
x--;
){var code=mapCodes[x].value;
if(code.meaning==meaning){return code;
}}return null;
},GetCodeValueByMeaning:function(meaning,codeSet){var codeValue=0;
var list=m_codeSets[codeSet];
if(!list){list=m_codeSets[codeSet]=MP_Util.GetCodeSet(codeSet,false);
}if(list&&list.length>0){for(var x=list.length;
x--;
){var code=list[x].value;
if(code.meaning===meaning){return code;
}}}return null;
},GetItemFromMapArray:function(mapItems,item){for(var x=0;
x<mapItems.length;
x++){if(mapItems[x].name==item){return mapItems[x].value;
}}},AddItemToMapArray:function(mapItems,key,value){var ar=MP_Util.GetItemFromMapArray(mapItems,key);
if(!ar){ar=[];
mapItems.push(new MP_Core.MapObject(key,ar));
}ar.push(value);
},LookBackTime:function(component){var i18nCore=i18n.discernabu;
var remainder=0;
var lookbackDays=component.getLookbackDays();
if(lookbackDays==0){return(i18nCore.SELECTED_VISIT);
}else{if(lookbackDays==1){return(i18nCore.LAST_N_HOURS.replace("{0}",lookbackDays*24));
}else{return(i18nCore.LAST_N_DAYS.replace("{0}",lookbackDays));
}}},CreateClinNoteLink:function(patient_id,encntr_id,event_id,display,docViewerType,pevent_id){var docType=(docViewerType&&docViewerType>"")?docViewerType:"STANDARD";
var doclink="";
if(event_id>0){var ar=[];
ar.push(patient_id,encntr_id,event_id,'"'+docType+'"',pevent_id);
doclink="<a onclick='javascript:MP_Util.LaunchClinNoteViewer("+ar.join(",")+"); return false;' href='#'>"+display+"</a>";
}else{doclink=display;
}return(doclink);
},LaunchClinNoteViewer:function(patient_id,encntr_id,event_id,docViewerType,pevent_id){var x=0;
var m_dPersonId=parseFloat(patient_id);
var m_dEncntrId=parseFloat(encntr_id);
var m_dPeventId=parseFloat(pevent_id);
var viewerObj=window.external.DiscernObjectFactory("PVVIEWERMPAGE");
MP_Util.LogDiscernInfo(null,"PVVIEWERMPAGE","mp_core.js","LaunchClinNoteViewer");
try{switch(docViewerType){case"AP":viewerObj.CreateAPViewer();
viewerObj.AppendAPEvent(event_id,m_dPeventId);
viewerObj.LaunchAPViewer();
break;
case"DOC":viewerObj.CreateDocViewer(m_dPersonId);
if(MP_Util.IsArray(event_id)){for(var x=event_id.length;
x--;
){viewerObj.AppendDocEvent(event_id[x]);
}}else{viewerObj.AppendDocEvent(event_id);
}viewerObj.LaunchDocViewer();
break;
case"EVENT":viewerObj.CreateEventViewer(m_dPersonId);
if(MP_Util.IsArray(event_id)){for(var x=event_id.length;
x--;
){viewerObj.AppendEvent(event_id[x]);
}}else{viewerObj.AppendEvent(event_id);
}viewerObj.LaunchEventViewer();
break;
case"MICRO":viewerObj.CreateMicroViewer(m_dPersonId);
if(MP_Util.IsArray(event_id)){for(var x=event_id.length;
x--;
){viewerObj.AppendMicroEvent(event_id[x]);
}}else{viewerObj.AppendMicroEvent(event_id);
}viewerObj.LaunchMicroViewer();
break;
case"GRP":viewerObj.CreateGroupViewer();
if(MP_Util.IsArray(event_id)){for(var x=event_id.length;
x--;
){viewerObj.AppendGroupEvent(event_id[x]);
}}else{viewerObj.AppendGroupEvent(event_id);
}viewerObj.LaunchGroupViewer();
break;
case"PROC":viewerObj.CreateProcViewer(m_dPersonId);
if(MP_Util.IsArray(event_id)){for(var x=event_id.length;
x--;
){viewerObj.AppendProcEvent(event_id[x]);
}}else{viewerObj.AppendProcEvent(event_id);
}viewerObj.LaunchProcViewer();
break;
case"HLA":viewerObj.CreateAndLaunchHLAViewer(m_dPersonId,m_dEventId);
break;
case"NR":viewerObj.LaunchRemindersViewer(event_id);
break;
case"STANDARD":alert(i18n.discernabu.CAN_NOT_VIEW_RESULTS);
break;
}}catch(err){MP_Util.LogJSError(err,null,"mp_core.js","LaunchClinNoteViewer");
alert(i18n.discernabu.CAN_NOT_VIEW_RESULTS+"  "+i18n.discernabu.CONTACT_ADMINISTRATOR);
}},IsArray:function(input){return(typeof(input)=="object"&&(input instanceof Array));
},IsString:function(input){return(typeof(input)=="string");
},HandleNoDataResponse:function(nameSpace){var i18nCore=i18n.discernabu;
return("<h3 class='info-hd'><span class='res-normal'>"+i18nCore.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+i18nCore.NO_RESULTS_FOUND+"</span>");
},HandleErrorResponse:function(nameSpace,errorMessage){var ar=[];
var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
ar.push("<h3 class='info-hd'><span class='res-normal'>",i18nCore.ERROR_RETREIVING_DATA,"</span></h3>");
ar.push("<dl class='",ns,"info'><dd><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dd></dl>");
if(errorMessage!=null&&errorMessage.length>0){ar.push("<h4 class='det-hd'><span>DETAILS</span></h4><div class='hvr'><dl class='",ns,"det'><dd><span>",errorMessage,"</span></dd></dl></div>");
}return ar.join("");
},GetValueFromArray:function(name,array){if(array!=null){for(var x=0,xi=array.length;
x<xi;
x++){if(array[x].name==name){return(array[x].value);
}}}return(null);
},GetPrsnlObjByIdAndDate:function(name,date,personnelArray){var prsnlObj;
var latestPrsnlObj;
try{if(personnelArray&&personnelArray.length){for(var x=0,xi=personnelArray.length;
x<xi;
x++){if(personnelArray[x].name==name){prsnlObj=personnelArray[x].value;
if(!latestPrsnlObj){latestPrsnlObj=prsnlObj;
}if(typeof date=="string"){if(/^\/Date\(/.exec(date)){date=/[0-9]+-[0-9]+-[0-9]+/.exec(date)+"T"+/[0-9]+:[0-9]+:[0-9]+/.exec(date)+"Z";
}if((date>prsnlObj.beg_dt_tm_string&&date<prsnlObj.end_dt_tm_string)||date==prsnlObj.beg_dt_tm_string||date==prsnlObj.end_dt_tm_string){return(prsnlObj);
}}else{throw (new Error("Invalid date object passed into GetPrsnlObjByIdAndDate.  The date object must be a string."));
}}}return(latestPrsnlObj);
}return(null);
}catch(err){MP_Util.LogJSError(err,null,"mp_core.js","GetPrsnlObjByIdAndDate");
return(null);
}},GetCompObjById:function(id){var comps=CERN_MPageComponents;
var cLen=comps.length;
for(var i=cLen;
i--;
){var comp=comps[i];
if(comp.m_componentId===id){return comp;
}}return(null);
},GetCompObjByStyleId:function(id){var cLen=CERN_MPageComponents.length;
for(var i=cLen;
i--;
){var comp=CERN_MPageComponents[i];
var styles=comp.getStyles();
if(styles.getId()===id){return comp;
}}return(null);
},LoadCodeListJSON:function(parentElement){var codeArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var codeObject=new Object();
codeElement=parentElement[x];
codeObject.codeValue=codeElement.CODE;
codeObject.display=codeElement.DISPLAY;
codeObject.description=codeElement.DESCRIPTION;
codeObject.codeSet=codeElement.CODE_SET;
codeObject.sequence=codeElement.SEQUENCE;
codeObject.meaning=codeElement.MEANING;
var mapObj=new MP_Core.MapObject(codeObject.codeValue,codeObject);
codeArray.push(mapObj);
}}return(codeArray);
},LoadPersonelListJSON:function(parentElement){var personnelArray=[];
var codeElement;
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var prsnlObj={};
codeElement=parentElement[x];
prsnlObj.id=codeElement.ID;
if(codeElement.BEG_EFFECTIVE_DT_TM){prsnlObj.beg_dt_tm=codeElement.BEG_EFFECTIVE_DT_TM;
prsnlObj.beg_dt_tm_string=/[0-9]+-[0-9]+-[0-9]+/.exec(codeElement.BEG_EFFECTIVE_DT_TM)+"T"+/[0-9]+:[0-9]+:[0-9]+/.exec(codeElement.BEG_EFFECTIVE_DT_TM)+"Z";
}if(codeElement.END_EFFECTIVE_DT_TM){prsnlObj.end_dt_tm=codeElement.END_EFFECTIVE_DT_TM;
prsnlObj.end_dt_tm_string=/[0-9]+-[0-9]+-[0-9]+/.exec(codeElement.END_EFFECTIVE_DT_TM)+"T"+/[0-9]+:[0-9]+:[0-9]+/.exec(codeElement.END_EFFECTIVE_DT_TM)+"Z";
}prsnlObj.fullName=codeElement.PROVIDER_NAME.NAME_FULL;
prsnlObj.firstName=codeElement.PROVIDER_NAME.NAME_FIRST;
prsnlObj.middleName=codeElement.PROVIDER_NAME.NAME_MIDDLE;
prsnlObj.lastName=codeElement.PROVIDER_NAME.NAME_LAST;
prsnlObj.userName=codeElement.PROVIDER_NAME.USERNAME;
prsnlObj.initials=codeElement.PROVIDER_NAME.INITIALS;
prsnlObj.title=codeElement.PROVIDER_NAME.TITLE;
var mapObj=new MP_Core.MapObject(prsnlObj.id,prsnlObj);
personnelArray[x]=mapObj;
}}return(personnelArray);
},WriteToFile:function(sText){try{var ForAppending=8;
var TriStateFalse=0;
var fso=new ActiveXObject("Scripting.FileSystemObject");
var newFile=fso.OpenTextFile("c:\\temp\\test.txt",ForAppending,true,TriStateFalse);
newFile.write(sText);
newFile.close();
}catch(err){var strErr="Error:";
strErr+="\nNumber:"+err.number;
strErr+="\nDescription:"+err.description;
document.write(strErr);
}},CalculateAge:function(bdate){var age;
var bdate=new Date(bdate);
var byear=bdate.getFullYear();
var bmonth=bdate.getMonth();
var bday=bdate.getDate();
var bhours=bdate.getHours();
today=new Date();
year=today.getFullYear();
month=today.getMonth();
day=today.getDate();
hours=today.getHours();
if(year==byear&&(day==bday)){age=hours-bhours;
age+=" Hours";
return age;
}else{if(year==byear&&(month==bmonth)){age=day-bday;
age+=" Days";
return age;
}}if(year==byear){age=month-bmonth;
age+=" Months";
return age;
}else{if(month<bmonth){age=year-byear-1;
}else{if(month>bmonth){age=year-byear;
}else{if(month==bmonth){if(day<bday){age=year-byear-1;
}else{if(day>bday){age=year-byear;
}else{if(day==bday){age=year-byear;
}}}}}}}age+=" Years";
return age;
},pad:function(str,len,pad,dir){if(typeof(len)=="undefined"){var len=0;
}if(typeof(pad)=="undefined"){var pad=" ";
}if(typeof(dir)=="undefined"){var dir=STR_PAD_RIGHT;
}if(len+1>=str.length){switch(dir){case STR_PAD_LEFT:str=Array(len+1-str.length).join(pad)+str;
break;
case STR_PAD_BOTH:var right=Math.ceil((padlen=len-str.length)/2);
var left=padlen-right;
str=Array(left+1).join(pad)+str+Array(right+1).join(pad);
break;
default:str=str+Array(len+1-str.length).join(pad);
break;
}}return str;
},GraphResults:function(eventCd,compID,groupID){var component=MP_Util.GetCompObjById(compID);
var lookBackUnits=(component.getLookbackUnits()!=null&&component.getLookbackUnits()>0)?component.getLookbackUnits():"365";
var lookBackType=(component.getLookbackUnitTypeFlag()!=null&&component.getLookbackUnitTypeFlag()>0)?component.getLookbackUnitTypeFlag():"2";
var i18nCore=i18n.discernabu;
var subTitleText="";
var scope=component.getScope();
var lookBackText="";
var criterion=component.getCriterion();
component.setLookbackUnits(lookBackUnits);
component.setLookbackUnitTypeFlag(lookBackType);
if(scope>0){switch(lookBackType){case 1:var replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookBackUnits);
break;
case 2:var replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
case 3:var replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookBackUnits);
break;
case 4:var replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookBackUnits);
break;
case 5:var replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookBackUnits);
break;
default:var replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
}switch(scope){case 1:lookBackText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
var encntrOption="0.0";
break;
case 2:lookBackText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
var encntrOption=criterion.encntr_id;
break;
}}var wParams="left=0,top=0,width=1200,height=700,toolbar=no";
var sParams="^MINE^,"+criterion.person_id+".0,"+encntrOption+","+eventCd+".0,^"+criterion.static_content+"\\discrete-graphing^,"+groupID+".0,"+criterion.provider_id+".0,"+criterion.position_cd+".0,"+criterion.ppr_cd+".0,"+lookBackUnits+","+lookBackType+",200,^"+lookBackText+"^";
var graphCall="javascript:CCLLINK('mp_retrieve_graph_results', '"+sParams+"',1)";
MP_Util.LogCclNewSessionWindowInfo(null,graphCall,"mp_core.js","GraphResults");
javascript:CCLNEWSESSIONWINDOW(graphCall,"_self",wParams,0,1);
Util.preventDefault();
},ReleaseRequestReference:function(reqObj){if(XMLCCLREQUESTOBJECTPOINTER){for(var id in XMLCCLREQUESTOBJECTPOINTER){if(XMLCCLREQUESTOBJECTPOINTER[id]==reqObj){delete (XMLCCLREQUESTOBJECTPOINTER[id]);
}}}},CreateAutoSuggestBoxHtml:function(component){var searchBoxHTML=[];
var compNs=component.getStyles().getNameSpace();
var compId=component.getComponentId();
searchBoxHTML.push("<div class='search-box-div'><form name='contentForm'><input type='text' id='",compNs,"contentCtrl",compId,"'"," class='search-box'></form></div>");
return searchBoxHTML.join("");
},AddAutoSuggestControl:function(component,queryHandler,selectionHandler,selectDisplayHandler){new AutoSuggestControl(component,queryHandler,selectionHandler,selectDisplayHandler);
},RetrieveAutoSuggestSearchBox:function(component){var componentNamespace=component.getStyles().getNameSpace();
var componentId=component.getComponentId();
return _g(componentNamespace+"contentCtrl"+componentId);
},CreateParamArray:function(ar,type){var returnVal=(type===1)?"0.0":"0";
if(ar&&ar.length>0){if(ar.length>1){if(type===1){returnVal="value("+ar.join(".0,")+".0)";
}else{returnVal="value("+ar.join(",")+")";
}}else{returnVal=(type===1)?ar[0]+".0":ar[0];
}}return returnVal;
},GetDateFormatter:function(){if(!m_df){m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}return m_df;
},GetNumericFormatter:function(){if(!m_nf){m_nf=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_nf;
},PrintReport:function(reportName,person_id,encounter_id){var paramString="^MINE^,^"+reportName+"^,"+person_id+","+encounter_id;
CCLLINK("pwx_rpt_driver_to_mpage",paramString,1);
},CalculatePrecision:function(valRes){var precision=0;
var str=(MP_Util.IsString(valRes))?valRes:valRes.toString();
var decLoc=str.search(/\.(\d)/);
if(decLoc!==-1){var strSize=str.length;
precision=strSize-decLoc-1;
}return precision;
},CreateDateParameter:function(date){var day=date.getDate();
var month="";
var rest=date.format("yyyy HH:MM:ss");
switch(date.getMonth()){case (0):month="JAN";
break;
case (1):month="FEB";
break;
case (2):month="MAR";
break;
case (3):month="APR";
break;
case (4):month="MAY";
break;
case (5):month="JUN";
break;
case (6):month="JUL";
break;
case (7):month="AUG";
break;
case (8):month="SEP";
break;
case (9):month="OCT";
break;
case (10):month="NOV";
break;
case (11):month="DEC";
break;
default:alert("unknown month");
}return(day+"-"+month+"-"+rest);
},LogDebug:function(debugString){if(debugString){log.debug(debugString);
}},LogWarn:function(warnString){if(warnString){log.warn(warnString);
}},LogInfo:function(infoString){if(infoString){log.info(infoString);
}},LogError:function(errorString){if(errorString){log.error(errorString);
}},LogScriptCallInfo:function(component,request,file,funcName){log.debug(["Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />Script: ",request.url,"<br />Request: ",request.requestText,"<br />Reply: ",request.responseText].join(""));
},LogScriptCallError:function(component,request,file,funcName){log.error(["Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />Script: ",request.url,"<br />Request: ",request.requestText,"<br />Reply: ",request.responseText,"<br />Status: ",request.status].join(""));
},LogJSError:function(err,component,file,funcName){log.error(["Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />JS Error","<br />Message: ",err.message,"<br />Name: ",err.name,"<br />Number: ",(err.number&65535),"<br />Description: ",err.description].join(""));
},LogDiscernInfo:function(component,objectName,file,funcName){log.debug(["Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />Discern Object: ",objectName].join(""));
},LogMpagesEventInfo:function(component,eventName,params,file,funcName){log.debug(["Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />MPAGES_EVENT: ",eventName,"<br />Params: ",params].join(""));
},LogCclNewSessionWindowInfo:function(component,params,file,funcName){log.debug(["CCLNEWSESSIONWINDOW Creation","Component: ",(component?component.getLabel():""),"<br />ID: ",(component?component.getComponentId():""),"<br />File: ",file,"<br />Function: ",funcName,"<br />Params: ",params].join(""));
},LogTimerInfo:function(timerName,subTimerName,timerType,file,funcName){log.debug(["Timer Name: ",timerName,"<br />Subtime Name:  ",subTimerName,"<br />Timer Type: ",timerType,"<br />File: ",file,"<br />Function: ",funcName].join(""));
},AddCookieProperty:function(compId,propName,propValue){var cookie=CK_DATA[compId];
if(!cookie){cookie={};
}cookie[propName]=propValue;
CK_DATA[compId]=cookie;
},GetCookieProperty:function(compId,propName){var cookie=CK_DATA[compId];
if(cookie&&cookie[propName]){return cookie[propName];
}else{return null;
}},WriteCookie:function(){var cookieJarJSON=JSON.stringify(CK_DATA);
document.cookie="CookieJar="+cookieJarJSON+";";
},RetrieveCookie:function(){var cookies=document.cookie;
var match=cookies.match(/CookieJar=({[^;]+})(;|\b|$)/);
if(match&&match[1]){CK_DATA=JSON.parse(match[1]);
}}};
function GetDateDiffString(beginDate,endDate,mathFlag,abbreviateFlag){var i18nCore=i18n.discernabu;
var timeDiff=0;
var returnVal="";
endDate=(!endDate)?new Date():endDate;
mathFlag=(!mathFlag)?0:mathFlag;
var one_minute=1000*60;
var one_hour=one_minute*60;
var one_day=one_hour*24;
var one_week=one_day*7;
var valMinutes=0;
var valHours=0;
var valDays=0;
var valWeeks=0;
var valMonths=0;
var valYears=0;
timeDiff=(endDate.getTime()-beginDate.getTime());
var mathFunc=null;
var comparisonFunc=null;
if(mathFlag==0){mathFunc=function(val){return Math.ceil(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<=upperVal);
};
}else{mathFunc=function(val){return Math.floor(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<upperVal);
};
}var calcMonths=function(){var removeCurYr=0;
var removeCurMon=0;
var yearDiff=0;
var monthDiff=0;
var dayDiff=endDate.getDate();
if(endDate.getMonth()>beginDate.getMonth()){monthDiff=endDate.getMonth()-beginDate.getMonth();
if(endDate.getDate()<beginDate.getDate()){removeCurMon=1;
}}else{if(endDate.getMonth()<beginDate.getMonth()){monthDiff=12-beginDate.getMonth()+endDate.getMonth();
removeCurYr=1;
if(endDate.getDate()<beginDate.getDate()){removeCurMon=1;
}}else{if(endDate.getDate()<beginDate.getDate()){removeCurYr=1;
monthDiff=11;
}}}if(endDate.getDate()>=beginDate.getDate()){dayDiff=endDate.getDate()-beginDate.getDate();
}yearDiff=(endDate.getFullYear()-beginDate.getFullYear())-removeCurYr;
monthDiff+=(yearDiff*12)+(dayDiff/32)-removeCurMon;
return monthDiff;
};
valMinutes=mathFunc(timeDiff/one_minute);
valHours=mathFunc(timeDiff/one_hour);
valDays=mathFunc(timeDiff/one_day);
valWeeks=mathFunc(timeDiff/one_week);
valMonths=calcMonths();
valMonths=mathFunc(valMonths);
valYears=mathFunc(valMonths/12);
if(comparisonFunc(valHours,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MINS.replace("{0}",valMinutes)):(i18nCore.X_MINUTES.replace("{0}",valMinutes));
}else{if(comparisonFunc(valDays,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_HOURS.replace("{0}",valHours)):(i18nCore.X_HOURS.replace("{0}",valHours));
}else{if(comparisonFunc(valWeeks,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_DAYS.replace("{0}",valDays)):(i18nCore.X_DAYS.replace("{0}",valDays));
}else{if(comparisonFunc(valMonths,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_WEEKS.replace("{0}",valWeeks)):(i18nCore.X_WEEKS.replace("{0}",valWeeks));
}else{if(comparisonFunc(valYears,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MONTHS.replace("{0}",valMonths)):(i18nCore.X_MONTHS.replace("{0}",valMonths));
}else{returnVal=abbreviateFlag?(i18nCore.WITHIN_YEARS.replace("{0}",valYears)):(i18nCore.X_YEARS.replace("{0}",valYears));
}}}}}return(returnVal);
}}();
MP_Util.Doc=function(){var isExpandedAll=false;
var openAccordion="";
return{InitMPageTabLayout:function(arMapObjects,title,displayType,criterionGroup){var arItems=[];
var sc="",helpFile="",helpURL="",debugInd=false;
var bDisplayBanner=false;
var criterion=null;
var custInd=true;
var anchorArray=null;
for(var x=0,xl=arMapObjects.length;
x<xl;
x++){var key=arMapObjects[x].name;
var page=arMapObjects[x].value;
criterion=page.getCriterion();
arItems.push(new MP_Core.TabItem(key,page.getName(),page.getComponents(),criterion.category_mean));
sc=criterion.static_content;
debugInd=criterion.debug_ind;
helpFile=page.getHelpFileName();
helpURL=page.getHelpFileURL();
custInd=page.getCustomizeEnabled();
anchorArray=page.getTitleAnchors();
if(page.isBannerEnabled()){bDisplayBanner=page.isBannerEnabled();
}}if(displayType===1){MP_Util.Doc.InitSelectorLayout(arItems,title,sc,helpFile,helpURL,bDisplayBanner,0,criterionGroup,custInd,anchorArray);
}else{MP_Util.Doc.InitTabLayout(arItems,title,sc,helpFile,helpURL,bDisplayBanner,0,criterion,custInd,anchorArray);
}},InitTabLayout:function(arTabItems,title,sc,helpFile,helpURL,includeBanner,debugInd,criterion,custInd,anchorArray){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,debugInd,custInd,anchorArray,helpFile,helpURL,criterion);
if(includeBanner){body.innerHTML+="<div id='banner' class='demo-banner'></div>";
}body.innerHTML+="<div id='disclaimer' class='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
AddPageTabs(arTabItems,body);
CERN_TabManagers=[];
for(var x=0,xl=arTabItems.length;
x<xl;
x++){var tabItem=arTabItems[x];
var tabManager=new MP_Core.TabManager(tabItem);
if(x==0){tabManager.setSelectedTab(true);
}CERN_TabManagers.push(tabManager);
CreateLiquidLayout(tabItem.components,_g(arTabItems[x].key));
SetupCompFilters(tabItem.components);
}MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},InitSelectorLayout:function(arTabItems,title,sc,helpFile,helpURL,includeBanner,debugInd,criterion,custInd,anchorArray){var body=document.body;
var i18nCore=i18n.discernabu;
var jsonObject=MP_Core.AppUserPreferenceManager.GetQOCPreferences();
var lastSavedView;
if(jsonObject){var view=jsonObject.user_prefs.page_prefs.last_saved_view;
if(view){lastSavedView=view;
}else{lastSavedView="";
}}else{lastSavedView="";
}MP_Util.Doc.AddPageTitle(title,body,debugInd,custInd,anchorArray,helpFile,helpURL,criterion,null);
if(includeBanner){body.innerHTML+="<div id='banner' class='demo-banner'></div>";
}body.innerHTML+="<div id='disclaimer' class='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
LoadPageSelector(arTabItems,body,lastSavedView,criterion);
CERN_TabManagers=[];
for(var x=0,xl=arTabItems.length;
x<xl;
x++){var tabItem=arTabItems[x];
var tabManager=new MP_Core.TabManager(tabItem);
if(x==0){tabManager.setSelectedTab(true);
}CERN_TabManagers.push(tabManager);
CreateLiquidLayout(tabItem.components,_g(arTabItems[x].key));
}SetupExpandCollapse();
},InitLayout:function(mPage,helpFile,helpURL,categoryMeaning){var i18nCore=i18n.discernabu;
var criterion=mPage.getCriterion();
if(categoryMeaning){var body=_g(categoryMeaning);
}else{var body=document.body;
}MP_Util.Doc.AddPageTitle(mPage.getName(),body,criterion.debug_ind,mPage.getCustomizeEnabled(),mPage.getTitleAnchors(),helpFile,helpURL,criterion,categoryMeaning);
if(mPage.isBannerEnabled()){body.innerHTML+="<div id='banner"+criterion.category_mean+"' class='demo-banner'></div>";
}body.innerHTML+="<div id='disclaimer' class='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
CreateLiquidLayout(mPage.getComponents(),body);
MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
SetupCompFilters(mPage.getComponents());
},CustomizeLayout:function(title,components,criterion){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,0,false,null,null,null,criterion);
MP_Util.Doc.AddClearPreferences(body,criterion);
MP_Util.Doc.AddSavePreferences(body,criterion);
body.innerHTML+="<div id='disclaimer' class='disclaimer'><span>"+i18nCore.USER_CUST_DISCLAIMER+"</span></div>";
var compAr=[];
for(var x=components.length;
x--;
){var component=components[x];
if(component.getColumn()!=99){compAr.push(component);
}}CreateCustomizeLiquidLayout(compAr,body);
SetupExpandCollapse();
SetupCompFilters(compAr);
},GetComments:function(par,personnelArray){var com="",recDate="";
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
for(var j=0,m=par.COMMENTS.length;
j<m;
j++){if(personnelArray.length!=null){if(par.COMMENTS[j].RECORDED_BY){perCodeObj=MP_Util.GetValueFromArray(par.COMMENTS[j].RECORDED_BY,personnelArray);
}if(par.COMMENTS[j].RECORDED_DT_TM!=""){recDate=df.formatISO8601(par.COMMENTS[j].RECORDED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}if(j>0){com+="<br />";
}com+=recDate+" -  "+perCodeObj.fullName+"<br />"+par.COMMENTS[j].COMMENT_TEXT;
}}return com;
},FinalizeComponent:function(contentHTML,component,countText){var styles=component.getStyles();
var rootComponentNode=component.getRootComponentNode();
if(rootComponentNode){var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=countText;
var node=component.getSectionContentNode();
node.innerHTML=contentHTML;
MP_Util.Doc.InitHovers(styles.getInfo(),node,component);
MP_Util.Doc.InitSubToggles(node,"sub-sec-hd-tgl");
MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",node,"div"),component.getScrollNumber(),"1.6");
}},InitScrolling:function(content,num,ht){for(var k=0;
k<content.length;
k++){MP_Util.Doc.InitSectionScrolling(content[k],num,ht);
}},InitSectionScrolling:function(sec,num,ht){var th=num*ht;
var totalHeight=th+"em";
sec.style.height=totalHeight;
sec.style.overflowY="scroll";
sec.style.overflowX="hidden";
},InitHovers:function(trg,par,component){gen=Util.Style.g(trg,par,"DL");
for(var i=0,l=gen.length;
i<l;
i++){var m=gen[i];
if(m){var nm=Util.gns(Util.gns(m));
if(nm){if(Util.Style.ccss(nm,"hvr")){hs(m,nm,component);
}}}}},InitSubToggles:function(par,tog){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g(tog,par,"span");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}},ExpandCollapseAll:function(ID){var i18nCore=i18n.discernabu;
var tabSection=_g(ID.replace("expAll",""));
var expNode=_g(ID);
var allSections=Util.Style.g("section",tabSection);
if(isExpandedAll){for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.acss(allSections[i],"closed");
secHandle.innerHTML="+";
secHandle.title=i18nCore.SHOW_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.acss(allSubSections[j],"closed");
subSecTgl.innerHTML="+";
subSecTgl.title=i18nCore.SHOW_SECTION;
}}}expNode.innerHTML=i18nCore.EXPAND_ALL;
isExpandedAll=false;
}else{for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.rcss(allSections[i],"closed");
secHandle.innerHTML="-";
secHandle.title=i18nCore.HIDE_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.rcss(allSubSections[j],"closed");
subSecTgl.innerHTML="-";
subSecTgl.title=i18nCore.HIDE_SECTION;
}}}expNode.innerHTML=i18nCore.COLLAPSE_ALL;
isExpandedAll=true;
}},AddChartSearch:function(criterion,inViewPoint){var csCallback=function(url){try{if(url){var fwObj=window.external.DiscernObjectFactory("PVFRAMEWORKLINK");
fwObj.SetPopupStringProp("REPORT_NAME","<url>"+url);
fwObj.SetPopupDoubleProp("WIDTH",1200);
fwObj.SetPopupDoubleProp("HEIGHT",700);
fwObj.SetPopupBoolProp("SHOW_BUTTONS",0);
fwObj.LaunchPopup();
}else{MP_Util.LogError("Error retriving URL from search");
}}catch(err){alert(i18n.discernabu.CODE_LEVEL);
MP_Util.LogError("Error creating PVFRAMEWORKLINK window <br />Message: "+err.description+"<br />Name: "+err.name+"<br />Number: "+(err.number&65535)+"<br />Description: "+err.description);
}};
var csDiv=Util.cep("div",{id:"chrtSearchBox"});
csDiv.innerHTML="<div id='chart-search-input-box'></div>";
if(inViewPoint){var vpTl=_g("vwpTabList");
Util.ac(csDiv,vpTl);
}else{var pgCtrl=_g("pageCtrl"+criterion.category_mean);
pgCtrl.parentNode.insertBefore(csDiv,pgCtrl);
}var csParams={patientId:criterion.person_id,userId:criterion.provider_id,callback:csCallback};
try{ChartSearchInput.embed("chart-search-input-box",csParams);
}catch(err){MP_Util.LogError("Error calling Chart Search embed <br />Message: "+err.description+"<br />Name: "+err.name+"<br />Number: "+(err.number&65535)+"<br />Description: "+err.description);
}},AddPageTitle:function(title,bodyTag,debugInd,custInd,anchorArray,helpFile,helpURL,criterion,categoryMeaning){var i18nCore=i18n.discernabu;
var ar=[];
var imgSource=criterion.static_content+"\\images\\3865_16.gif";
if(categoryMeaning){title="";
bodyTag=_g(categoryMeaning);
bodyTag.innerHTML="";
}else{if(bodyTag){bodyTag=document.body;
}}ar.push("<div class='pg-hd'>");
ar.push("<h1><span class='pg-title'>",title,"</span></h1><span id='pageCtrl",criterion.category_mean,"' class='page-ctrl'>");
if(categoryMeaning){var df=MP_Util.GetDateFormatter();
ar.push("<span class='other-anchors'>",i18nCore.AS_OF_TIME.replace("{0}",df.format(new Date(),mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS)),"</span>");
}if(anchorArray){for(var x=0,xl=anchorArray.length;
x<xl;
x++){ar.push("<span class='other-anchors'>"+anchorArray[x]+"</span>");
}}ar.push("<a id='expAll",criterion.category_mean,"' class='expAll' onclick='MP_Util.Doc.ExpandCollapseAll(\"expAll",criterion.category_mean,"\")'>",i18nCore.EXPAND_ALL,"</a>");
if(custInd){ar.push("<a id='custView",criterion.category_mean,"' class='custView'></a>");
}if(criterion.help_file_local_ind===1&&helpFile&&helpFile.length>0){ar.push("<a id='helpMenu",criterion.category_mean,"' onclick='MP_Util.Doc.LaunchHelpWindow(\""+helpFile+"\")' >",i18nCore.HELP,"</a><img src='",imgSource,"'/></span></div>");
}else{if(helpURL&&helpURL.length>0){ar.push("<a id='helpMenu",criterion.category_mean,"' onclick='MP_Util.Doc.LaunchHelpWindow(\""+helpURL+"\")' >",i18nCore.HELP,"</a><img src='",imgSource,"'/></span></div>");
}}ar.push("</span></div>");
bodyTag.innerHTML+=ar.join("");
return;
},LaunchHelpWindow:function(helpURL){var wParams="left=0,top=0,width=1200,height=700,toolbar=no";
MP_Util.LogCclNewSessionWindowInfo(null,helpURL,"mp_core.js","LaunchHelpWindow");
CCLNEWSESSIONWINDOW(helpURL,"_self",wParams,0,1);
Util.preventDefault();
},AddClearPreferences:function(body,criterion){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl"+criterion.category_mean);
var clearPrefNode=Util.cep("A",{id:"clearPrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.ClearPreferences();"});
clearPrefNode.innerHTML=i18nCore.CLEAR_PREFERENCES;
Util.ac(clearPrefNode,pageCtrl);
},AddSavePreferences:function(body,criterion){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl"+criterion.category_mean);
var savePrefNode=Util.cep("A",{id:"savePrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.SavePreferences();"});
savePrefNode.innerHTML=i18nCore.SAVE_PREFERENCES;
Util.ac(savePrefNode,pageCtrl);
},AddCustomizeLink:function(criterion){var i18nCore=i18n.discernabu;
var custNode=_g("custView"+criterion.category_mean);
if(custNode){custNode.innerHTML=i18nCore.CUSTOMIZE;
var compReportIds=GetPageReportIds();
if(typeof m_viewpointJSON=="undefined"){var cclParams=["^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.position_cd+".0",criterion.ppr_cd+".0","^"+criterion.executable+"^","^^","^"+criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+criterion.category_mean+"^",criterion.debug_ind,"value("+compReportIds.join(".0,")+")","1"];
custNode.onclick=function(){CCLLINK("MP_DRIVER",cclParams.join(","),1);
Util.preventDefault();
};
}else{var js_viewpoint=JSON.parse(m_viewpointJSON).VIEWPOINTINFO_REC;
var cclParams=["^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.position_cd+".0",criterion.ppr_cd+".0","^"+criterion.executable+"^","^"+criterion.static_content.replace(/\\/g,"\\\\")+"^","^"+js_viewpoint.VIEWPOINT_NAME_KEY+"^",criterion.debug_ind,"value("+compReportIds.join(".0,")+")","1","^"+criterion.category_mean+"^"];
custNode.onclick=function(){CCLLINK("MP_VIEWPOINT_DRIVER",cclParams.join(","),1);
Util.preventDefault();
};
}}},RenderLayout:function(){if(CERN_TabManagers!=null){var tabManager=null;
if(window.name.length>0){var paramList=window.name.split(",");
MP_Util.DisplaySelectedTab(paramList[0],paramList[1]);
}else{tabManager=CERN_TabManagers[0];
tabManager.setSelectedTab(true);
tabManager.loadTab();
}}else{if(CERN_MPageComponents!=null){for(var x=0;
x<CERN_MPageComponents.length;
x++){var comp=CERN_MPageComponents[x];
if(comp.isDisplayable()&&!comp.isLoaded()){comp.setLoaded(true);
comp.InsertData();
}}}}},ExpandCollapse:function(){var i18nCore=i18n.discernabu;
var gpp=Util.gp(Util.gp(this));
if(Util.Style.ccss(gpp,"closed")){Util.Style.rcss(gpp,"closed");
this.innerHTML="-";
this.title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(gpp,"closed");
this.innerHTML="+";
this.title=i18nCore.SHOW_SECTION;
}},HideHovers:function(){var hovers=Util.Style.g("hover",document.body,"DIV");
for(var i=hovers.length;
i--;
){if(Util.gp(hovers[i]).nodeName=="BODY"){hovers[i].style.display="none";
Util.de(hovers[i]);
}}},ReplaceSubTitleText:function(component,text){var compNode=component.getRootComponentNode();
var subTitle=Util.Style.g("sub-title-disp",compNode,"div");
if(subTitle){subTitle[0].innerHTML=text;
}},ReInitSubTitleText:function(component){if(component.getScope()>0){var st=Util.Style.g("sub-title-disp",component.getRootComponentNode(),"div");
st[0].innerHTML=CreateSubTitleText(component);
}},RunAccordion:function(index){var titleAr=[];
var nID="Accordion"+index+"Content";
var TimeToSlide=100;
var titleDiv=_g("Accordion"+index+"Title");
var containerDiv=_g("AccordionContainer"+index);
var component=MP_Util.GetCompObjById(index);
var location=component.getCriterion().static_content;
if(Util.Style.ccss(titleDiv,"Expanded")){Util.Style.rcss(titleDiv,"Expanded");
Util.Style.rcss(containerDiv,"Expanded");
}else{Util.Style.acss(titleDiv,"Expanded");
Util.Style.acss(containerDiv,"Expanded");
}if(openAccordion==nID){nID="";
}setTimeout("MP_Util.Doc.Animate("+new Date().getTime()+","+TimeToSlide+",'"+openAccordion+"','"+nID+"',"+index+")",33);
openAccordion=nID;
},Animate:function(lastTick,timeLeft,closingId,openingId,compID){var TimeToSlide=timeLeft;
var curTick=new Date().getTime();
var elapsedTicks=curTick-lastTick;
var ContentHeight=275;
var opening=(openingId=="")?null:_g(openingId);
var closing=(closingId=="")?null:_g(closingId);
if(timeLeft<=elapsedTicks){if(opening){opening.style.height=ContentHeight+"px";
}if(closing){closing.style.display="none";
closing.style.height="0px";
var filterListAr=Util.Style.g("acc-filter-list-item"+compID);
var filtersSelected=MP_Util.Doc.GetSelected(filterListAr);
}return;
}timeLeft-=elapsedTicks;
var newClosedHeight=Math.round((timeLeft/TimeToSlide)*ContentHeight);
if(opening){if(opening.style.display!="block"){opening.style.display="block";
opening.style.height=(ContentHeight-newClosedHeight)+"px";
}}if(closing){closing.style.height=newClosedHeight+"px";
}setTimeout("MP_Util.Doc.Animate("+curTick+","+timeLeft+",'"+closingId+"','"+openingId+"',"+compID+")",33);
},GetSelected:function(opt){var selected=[];
var index=0;
var optLen=opt.length;
for(var intLoop=0;
intLoop<optLen;
intLoop++){if(opt[intLoop].selected){index=selected.length;
selected[index]={};
selected[index].value=opt[intLoop].value;
selected[index].index=intLoop;
}}return selected;
},CreateLookBackMenu:function(component,loadInd,text){var i18nCore=i18n.discernabu;
var ar=[];
var style=component.getStyles();
var ns=style.getNameSpace();
var compId=style.getId();
var mnuCompId=component.getComponentId();
var loc=component.getCriterion().static_content;
var mnuItems=[];
var mnuId=compId+"Mnu";
var scope=component.getScope();
var lookBackText="";
var lookBackUnits="";
var lookBackType=0;
var filterMsg="";
var filterMsgElementTitle="";
if(component.m_grouper_arr.length===0){component.setCompFilters(false);
}else{component.setCompFilters(true);
}if(loadInd===2){var lbMenu=_g("lb"+mnuId);
if(component.hasCompFilters()){if(!text){MP_Util.LaunchCompFilterSelection(mnuCompId,i18nCore.FACILITY_DEFINED_VIEW,"",2);
}else{var filterMsgElement=_g("cf"+mnuCompId+"msg");
filterMsgElementTitle=filterMsgElement.title;
filterMsg=filterMsgElement.innerHTML;
}}if(lbMenu){lbMenu.innerHTML="";
}}if(!text){var mnuDisplay=CreateSubTitleText(component);
}else{var mnuDisplay=text;
}var menuItems=component.getLookbackMenuItems();
if(menuItems){for(var x=0;
x<menuItems.length;
x++){mnuItems[x]=new Array();
lookBackUnits=parseInt(menuItems[x].getDescription(),10);
var tempTypeId=menuItems[x].getId();
switch(tempTypeId){case 1:lookBackType=1;
break;
case 2:lookBackType=2;
break;
case 3:lookBackType=3;
break;
case 4:lookBackType=4;
break;
case 5:lookBackType=5;
break;
default:lookBackType=tempTypeId;
break;
}if(scope>0){if(lookBackUnits>0&&lookBackType>0){var replaceText="";
switch(lookBackType){case 1:replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookBackUnits);
break;
case 2:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
case 3:replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookBackUnits);
break;
case 4:replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookBackUnits);
break;
case 5:replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookBackUnits);
break;
default:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookBackUnits);
break;
}switch(scope){case 1:lookBackText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
break;
case 2:lookBackText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
break;
}}else{switch(scope){case 1:lookBackText=i18nCore.All_VISITS;
break;
case 2:lookBackText=i18nCore.SELECTED_VISIT;
break;
}}}mnuItems[x][0]=lookBackText;
mnuItems[x][1]=lookBackUnits;
mnuItems[x][2]=lookBackType;
}ar.push("<div id='lb",mnuId,"'><div id='stt",compId,"' class='sub-title-disp lb-drop-down'>");
ar.push("<span id='lbMnuDisplay",mnuCompId,"' onclick='MP_Util.LaunchMenu(\"",mnuId,'", "',compId,"\");'>",mnuDisplay,"<a id='",ns,"Drop'><img src='",loc,"\\images\\3943_16.gif'></a></span><span id='cf",mnuCompId,"msg' class='filter-applied-msg' title='",filterMsgElementTitle,"'>",filterMsg,"</span></div>");
ar.push("<div class='cvClassFilterSpan lb-mnu-selectWindow lb-menu2 menu-hide' id='",mnuId,"'><div class='mnu-labelbox'>",mnuDisplay,"</div><div class='mnu-contentbox'>");
for(var x=0,xl=mnuItems.length;
x<xl;
x++){var item=mnuItems[x];
ar.push("<div><span class='lb-mnu' id='lb",compId,x,"' onclick='MP_Util.LaunchLookBackSelection(\"",mnuCompId,'",',item[1],',"',item[2],"\");'>",item[0],"</span></div>");
}ar.push("</div></div></div>");
}else{ar.push("<div id='lb",mnuId,"'><div id='stt",compId,"' class='sub-title-disp lb-drop-down'>");
ar.push("<span id='lbMnuDisplay",mnuCompId,"'>",mnuDisplay,"</span><span id='cf",mnuCompId,"msg' class='filter-applied-msg' title='",filterMsgElementTitle,"'>",filterMsg,"</span></div></div>");
}if(component.hasCompFilters()&&loadInd===1){ar.push("<div id='AccordionContainer",mnuCompId,"' class='accordion-container'>");
ar.push("<div id='Accordion",mnuCompId,"Content' class='accordion-content'><div id='Accordion",mnuCompId,"ContentDiv' class='acc-content-div'></div><div class='lb-pg-hd lb-page-ctrl'><a class='setDefault' href='#' onclick='MP_Core.AppUserPreferenceManager.SaveCompPreferences(",mnuCompId,"); return false;'>",i18nCore.SET_AS_DEFAULT,"</a><a class='resetAll' href='#' onclick='MP_Core.AppUserPreferenceManager.ClearCompPreferences(",mnuCompId,"); return false;'>",i18nCore.RESET_ALL,"</a></div></div>");
ar.push("<div id='Accordion",mnuCompId,"Title' class='accordion-title' onclick='MP_Util.Doc.RunAccordion(",mnuCompId,");' onselectstart='return false;'></div></div>");
}switch(loadInd){case 2:lbMenu.innerHTML=ar.join("");
break;
default:var arHtml=ar.join("");
return arHtml;
}}};
function GetPreferenceIdentifier(){var prefIdentifier="";
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
return tabItem.prefIdentifier;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var criterion=CERN_MPageComponents[x].getCriterion();
return criterion.category_mean;
}}}return prefIdentifier;
}function GetPageReportIds(){var ar=[];
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
var components=tabItem.components;
if(components!=null&&components.length>0){for(var y=components.length;
y--;
){ar.push(components[y].getReportId());
}}break;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){ar.push(CERN_MPageComponents[x].getReportId());
}}}return ar;
}function GetComponentArray(components){var grpAr=[];
var colAr=[];
var rowAr=[];
var curCol=-1;
var curGrp=-1;
var sHTML=[];
if(components!=null){components.sort(SortMPageComponents);
for(var x=0,xl=components.length;
x<xl;
x++){var component=components[x];
if(CERN_MPageComponents==null){CERN_MPageComponents=[];
}CERN_MPageComponents.push(component);
if(component.isDisplayable()){var compGrp=component.getPageGroupSequence();
var compCol=component.getColumn();
if(compGrp!=curGrp){curCol=-1;
colAr=[];
grpAr.push(colAr);
curGrp=compGrp;
}if(compCol!=curCol){rowAr=[];
colAr.push(rowAr);
curCol=compCol;
}rowAr.push(component);
}}}return grpAr;
}function CreateCustomizeLiquidLayout(components,parentNode){var sHTML=[];
var grpAr=GetComponentArray(components);
sHTML.push("<div class=pref-columns>");
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
sHTML.push("<div class='col-group three-col'>");
sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var comps=colAr[y];
var colClassName="col"+(y+1)+" cust-col";
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}for(var y=colLen+1;
y<=3;
y++){var colClassName="col"+(y)+" cust-col";
sHTML.push("<div class='",colClassName,"'></div>");
}sHTML.push("</div></div></div></div>");
}sHTML.push("</div>");
parentNode.innerHTML+=sHTML.join("");
}function CreateLiquidLayout(components,parentNode){var grpAr=GetComponentArray(components);
var sHTML=[];
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
switch(colLen){case 1:sHTML.push("<div class='col-group one-col'>");
break;
case 2:sHTML.push("<div class='col-group two-col'>");
break;
case 3:sHTML.push("<div class='col-group three-col'>");
break;
case 4:sHTML.push("<div class='col-group four-col'>");
break;
default:sHTML.push("<div class='col-group five-col'>");
}sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var colClassName="col"+(y+1);
var comps=colAr[y];
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}sHTML.push("</div></div></div></div>");
}parentNode.innerHTML+=sHTML.join("");
}function SetupExpandCollapse(){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g("sec-hd-tgl");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}}function SetupCompFilters(compArray){var compArrayLen=compArray.length;
for(var x=0;
x<compArrayLen;
x++){if(compArray[x].m_grouper_arr.length===0){compArray[x].setCompFilters(false);
}else{compArray[x].setCompFilters(true);
}if(compArray[x].hasCompFilters()){var i18nCore=i18n.discernabu;
var mnuDisplay=i18nCore.FACILITY_DEFINED_VIEW;
var dispVar=i18nCore.FACILITY_DEFINED_VIEW;
var compID=compArray[x].getComponentId();
var style=compArray[x].getStyles();
var ns=style.getNameSpace();
var styleId=style.getId();
var loc=compArray[x].getCriterion().static_content;
var mnuId=styleId+"TypeMenu";
var z=0;
compArray[x].sortGrouperArrayByLabel();
if(compArray[x].getGrouperFilterEventSets()){mnuDisplay=compArray[x].getGrouperFilterLabel();
var filterAppliedSpan=_g("cf"+compID+"msg");
if(filterAppliedSpan){Util.de(filterAppliedSpan);
}if(compArray[x].getGrouperFilterLabel()!==dispVar){var newFilterAppliedSpan=Util.ce("span");
var filterAppliedArr=["<span id='cf",compID,"msg' class='filter-applied-msg' title='",compArray[x].getGrouperFilterLabel(),"'>",i18nCore.FILTER_APPLIED,"</span>"];
newFilterAppliedSpan.innerHTML=filterAppliedArr.join("");
var lbDropDownDiv=_g("lbMnuDisplay"+compID);
Util.ia(newFilterAppliedSpan,lbDropDownDiv);
}}var contentDiv=_g("Accordion"+compID+"ContentDiv");
var contentDivArr=[];
var groupLen=compArray[x].m_grouper_arr.length;
contentDivArr.push("<div id='cf",mnuId,"' class='acc-mnu'>");
contentDivArr.push("<span id='cflabel",compID,"' onclick='MP_Util.LaunchMenu(\"",mnuId,'", "',styleId,"\");'>",i18nCore.FILTER_LABEL,mnuDisplay,"<a id='compFilterDrop",compID,"'><img src='",loc,"\\images\\3943_16.gif'></a></span>");
contentDivArr.push("<div class='cvClassFilterSpan lb-mnu-selectWindow lb-menu2 menu-hide' id='",mnuId,"'><div class='acc-mnu-contentbox'>");
contentDivArr.push("<div><span id='cf",styleId,"' class='lb-mnu' onclick='MP_Util.LaunchCompFilterSelection(",compID,',"',dispVar,'","",1);\'>',i18nCore.FACILITY_DEFINED_VIEW,"</span></div>");
for(z=0;
z<groupLen;
z++){if(compArray[x].getGrouperLabel(z)){var esIndex=z;
contentDivArr.push("<div><span id='cf",styleId,z,"' class='lb-mnu' onclick='MP_Util.LaunchCompFilterSelection(",compID,',"',compArray[x].getGrouperLabel(z),'",',esIndex,",1);'>",compArray[x].getGrouperLabel(z),"</span></div>");
}}contentDivArr.push("</div></div></div>");
contentDiv.innerHTML=contentDivArr.join("");
}}}function CreateCompDiv(component){var i18nCore=i18n.discernabu;
var ar=[];
var style=component.getStyles();
var ns=style.getNameSpace();
var compId=style.getId();
var mnuCompId=component.getComponentId();
var secClass=style.getClassName();
var tabLink=component.getLink();
var loc=component.getCriterion().static_content;
var tglCode=(!component.isAlwaysExpanded())?["<span class='",style.getHeaderToggle(),"' title='",i18nCore.HIDE_SECTION,"'>-</span>"].join(""):"";
if(!component.isExpanded()&&!component.isAlwaysExpanded()){secClass+=" closed";
}var sAnchor=(tabLink!=""&&component.getCustomizeView()==false)?CreateComponentAnchor(component):component.getLabel();
ar.push("<div id='",style.getId(),"' class='",secClass,"'>","<h2 class='",style.getHeaderClass(),"'>",tglCode,"<span class='",style.getTitle(),"'><span>",sAnchor,"</span>");
if(component.getCustomizeView()==false){ar.push("<span class='",style.getTotal(),"'>",i18nCore.LOADING_DATA+"...","</span></span>");
if(component.isPlusAddEnabled()){ar.push("<a id='",ns,"Add' class=add-plus onclick='MP_Util.OpenTab(\"",compId,"\"); return false;' href='#'><span class='add-icon'>&nbsp;</span><span class='add-text'>",i18nCore.ADD,"</span></a>");
var menuItems=component.getMenuItems();
if(menuItems!=null||menuItems>0){var menuId=compId+"Menu";
ar.push("<a id='",ns,"Drop' class='drop-Down'><img src='",loc,"\\images\\3943_16.gif' onclick='javascript:MP_Util.LaunchMenu(\"",menuId,'", "',compId,"\");'></a>");
ar.push("<div class='form-menu menu-hide' id='",menuId,"'><span>");
for(var x=0,xl=menuItems.length;
x<xl;
x++){var item=menuItems[x];
ar.push("<div>");
ar.push("<a id='lnkID",x,"' href='#' onclick='javascript:MP_Util.LaunchMenuSelection(\"",compId,'",',item.getId(),");'>",item.getDescription(),"</a>");
ar.push("</div>");
}ar.push("</span></div>");
}}}else{ar.push("</span>");
}ar.push("</h2>");
if(component.getCustomizeView()==false){var scope=component.getScope();
if(scope===3){ar.push(component.getScopeHTML());
}else{if(scope>0){var lbMenuItems=component.getLookbackMenuItems();
if(lbMenuItems){component.setLookBackDropDown(true);
}else{component.setLookBackDropDown(false);
}if(component.m_grouper_arr.length===0){component.setCompFilters(false);
}else{component.setCompFilters(true);
}ar.push(MP_Util.Doc.CreateLookBackMenu(component,1,""));
}}}ar.push("<div id='",style.getContentId(),"' class='",style.getContentClass(),"'></div>");
var footerText=component.getFooterText();
if(footerText&&footerText!==""){ar.push("<div class=sec-footer>",footerText,"</div>");
}ar.push("</div>");
var arHtml=ar.join("");
return arHtml;
}function CreateSubTitleText(component){var i18nCore=i18n.discernabu;
var subTitleText="";
var scope=component.getScope();
var lookbackDays=component.getLookbackDays();
var lookbackUnits=(lookbackDays>0)?lookbackDays:component.getLookbackUnits();
var lookbackFlag=(lookbackDays>0)?2:component.getLookbackUnitTypeFlag();
if(scope>0){if(lookbackFlag>0&&lookbackUnits>0){var replaceText="";
switch(lookbackFlag){case 1:replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookbackUnits);
break;
case 2:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookbackUnits);
break;
case 3:replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookbackUnits);
break;
case 4:replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookbackUnits);
break;
case 5:replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookbackUnits);
break;
}switch(scope){case 1:subTitleText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
break;
case 2:subTitleText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
break;
}}else{switch(scope){case 1:subTitleText=i18nCore.All_VISITS;
break;
case 2:subTitleText=i18nCore.SELECTED_VISIT;
break;
}}}return subTitleText;
}function CreateComponentAnchor(component){var i18nCore=i18n.discernabu;
var style=component.getStyles();
var criterion=component.getCriterion();
var sParms='javascript:APPLINK(0,"'+criterion.executable+'","/PERSONID='+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+component.getLink()+'^"); return false;';
var sAnchor="<a id="+style.getLink()+" title='"+i18nCore.GO_TO_TAB.replace("{0}",component.getLink())+"' href='#' onclick='"+sParms+"'>"+component.getLabel()+"</a>";
return sAnchor;
}function LoadPageSelector(items,bodyTag,lastSavedView,criterion){var i18nCore=i18n.discernabu;
var activeInd;
var ar=[];
var divAr=[];
var pageKey="-1";
var pageCtrl=_g("pageCtrl"+criterion.category_mean);
if(lastSavedView){var lastSavedViewFound=false;
var i=items.length;
while(i--){if(items[i].name==lastSavedView){window.name=items[i].key+",'a-tab'"+i;
pageKey=items[i].key;
lastSavedViewFound=true;
break;
}}if(lastSavedViewFound){ar.push("<span class='qoc-view-selector'><span class='qoc-view-list-label'>",i18nCore.VIEW_SELECTOR,":</span><select id='viewListSelectorID' class='qoc-view-list' onchange=MP_Util.DisplaySelectedTabQOC(this.options[this.selectedIndex].value,'a-tab'+this.selectedIndex,false)>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
if(item.key==pageKey){activeInd=1;
}else{activeInd=0;
}ar.push("<option value='",item.key,"'",(activeInd==1)?" selected='selected'":"",">",item.name,"</option>");
divAr.push("<div id='",item.key,"' class='div-tab-item",(activeInd==1)?" div-tab-item-selected":" div-tab-item-not-selected","'></div>");
}ar.push("</select></span>");
pageCtrl.innerHTML=ar.join("")+pageCtrl.innerHTML;
bodyTag.innerHTML+=divAr.join("");
}else{ar.push("<span id='noSavedViews' class='qoc-no-saved-view'>",i18nCore.VIEW_NOT_SELECTED,"</span>");
ar.push("<span class='qoc-view-selector'><span class='qoc-view-list-label'>",i18nCore.VIEW_SELECTOR,":</span><select id='viewListSelectorID' class='qoc-view-list' onchange=MP_Util.DisplaySelectedTabQOC(this.options[this.selectedIndex].value,'a-tab'+this.selectedIndex,true)>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
ar.push("<option value='",item.key,"'>",item.name,"</option>");
divAr.push("<div id='",item.key,"' class='div-tab-item div-tab-item-not-selected'></div>");
}ar.push("<option value='Blank_Space' selected='selected'></option>");
divAr.push("<div id='Blank_Space' class='div-tab-item div-tab-item-selected'></div>");
ar.push("</select></span>");
pageCtrl.innerHTML=ar.join("")+pageCtrl.innerHTML;
bodyTag.innerHTML+=divAr.join("");
window.name="QOC_PAGE_TAB_"+items.length+",'a-tab'"+items.length;
}}else{ar.push("<span id='noSavedViews' class='qoc-no-saved-view'>",i18nCore.VIEW_NOT_SELECTED,"</span>");
ar.push("<span class='qoc-view-selector'><span class='qoc-view-list-label'>",i18nCore.VIEW_SELECTOR,":</span><select id='viewListSelectorID' class='qoc-view-list' onchange=MP_Util.DisplaySelectedTabQOC(this.options[this.selectedIndex].value,'a-tab'+this.selectedIndex,true)>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
ar.push("<option value='",item.key,"'>",item.name,"</option>");
divAr.push("<div id='",item.key,"' class='div-tab-item div-tab-item-not-selected'></div>");
}ar.push("<option value='Blank_Space' selected='selected'></option>");
divAr.push("<div id='Blank_Space' class='div-tab-item div-tab-item-selected'></div>");
ar.push("</select></span>");
pageCtrl.innerHTML=ar.join("")+pageCtrl.innerHTML;
bodyTag.innerHTML+=divAr.join("");
window.name="QOC_PAGE_TAB_"+items.length+",'a-tab'"+items.length;
}}function AddPageTabs(items,bodyTag){var ar=[];
var divAr=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<ul class=tabmenu>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
var activeInd=(x==0)?1:0;
ar.push(CreateTabLi(item,activeInd,x));
divAr.push("<div id='",item.key,"' class='div-tab-item'></div>");
}ar.push("</ul>");
bodyTag.innerHTML+=(ar.join("")+divAr.join(""));
}function CreateTabLi(item,activeInd,sequence){var ar=[];
var tabName="";
tabName=item.name;
ar.push("<li>");
var seqClass="a-tab"+sequence;
if(activeInd){ar.push("<a id='",seqClass,"' class='anchor-tab-item active' href='#' onclick='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");return false;'>",tabName,"</a>");
}else{ar.push("<a id='",seqClass,"' class='anchor-tab-item inactive' href='#' onclick='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");return false;'>",tabName,"</a>");
}ar.push("</li>");
return(ar.join(""));
}}();
MP_Util.Measurement=function(){var m_nf=null;
return{GetString:function(result,codeArray,dateMask,excludeUOM){var obj=(result instanceof MP_Core.Measurement)?result.getResult():MP_Util.Measurement.GetObject(result,codeArray);
if(obj instanceof MP_Core.QuantityValue){if(excludeUOM){return obj.getValue();
}return obj.toString();
}else{if(obj instanceof Date){return obj.format(dateMask);
}}return obj;
},GetObject:function(result,codeArray){switch(result.CLASSIFICATION.toUpperCase()){case"QUANTITY_VALUE":return GetQuantityValue(result,codeArray);
case"STRING_VALUE":return(GetStringValue(result));
case"DATE_VALUE":return(GetDateValue(result));
case"CODIFIED_VALUES":case"CODE_VALUE":return(GetCodedResult(result));
case"ENCAPSULATED_VALUE":return(GetEncapsulatedValue(result));
}},SetPrecision:function(num,dec){var nf=MP_Util.GetNumericFormatter();
return nf.format(num,"^."+dec);
},GetModifiedIcon:function(result){return(result.isModified())?"<span class='res-modified'>&nbsp;</span>":"";
},GetNormalcyClass:function(oMeasurement){var normalcy="res-normal";
var nc=oMeasurement.getNormalcy();
if(nc!=null){var normalcyMeaning=nc.meaning;
if(normalcyMeaning!=null){if(normalcyMeaning==="LOW"){normalcy="res-low";
}else{if(normalcyMeaning==="HIGH"){normalcy="res-high";
}else{if(normalcyMeaning==="CRITICAL"||normalcyMeaning==="EXTREMEHIGH"||normalcyMeaning==="PANICHIGH"||normalcyMeaning==="EXTREMELOW"||normalcyMeaning==="PANICLOW"||normalcyMeaning==="VABNORMAL"||normalcyMeaning==="POSITIVE"){normalcy="res-severe";
}else{if(normalcyMeaning==="ABNORMAL"){normalcy="res-abnormal";
}}}}}}return normalcy;
},GetNormalcyResultDisplay:function(oMeasurement,excludeUOM){var ar=["<span class='",MP_Util.Measurement.GetNormalcyClass(oMeasurement),"'><span class='res-ind'>&nbsp;</span><span class='res-value'>",GetEventViewerLink(oMeasurement,MP_Util.Measurement.GetString(oMeasurement,null,"longDateTime2",excludeUOM)),"</span>",MP_Util.Measurement.GetModifiedIcon(oMeasurement),"</span>"];
return ar.join("");
}};
function GetEventViewerLink(oMeasurement,sResultDisplay){var params=[oMeasurement.getPersonId(),oMeasurement.getEncntrId(),oMeasurement.getEventId(),'"EVENT"'];
var ar=["<a onclick='MP_Util.LaunchClinNoteViewer(",params.join(","),"); return false;' href='#'>",sResultDisplay,"</a>"];
return ar.join("");
}function GetEncapsulatedValue(result){var ar=[];
var encap=result.ENCAPSULATED_VALUE;
if(encap&&encap.length>0){for(var n=0,nl=encap.length;
n<nl;
n++){var txt=encap[n].TEXT_PLAIN;
if(txt!=null&&txt.length>0){ar.push(txt);
}}}return ar.join("");
}function GetQuantityValue(result,codeArray){var qv=new MP_Core.QuantityValue();
qv.init(result,codeArray);
return qv;
}function GetDateValue(result){for(var x=0,xl=result.DATE_VALUE.length;
x<xl;
x++){var date=result.DATE_VALUE[x];
if(date.DATE!=""){var dateTime=new Date();
dateTime.setISO8601(date.DATE);
return dateTime;
}}return null;
}function GetCodedResult(result){var cdValue=result.CODE_VALUE;
var ar=[];
for(var n=0,nl=cdValue.length;
n<nl;
n++){var values=cdValue[n].VALUES;
for(var p=0,pl=values.length;
p<pl;
p++){ar.push(values[p].SOURCE_STRING);
}var sOther=cdValue[n].OTHER_RESPONSE;
if(sOther!=""){ar.push(sOther);
}}return ar.join(", ");
}function GetStringValue(result){var strValue=result.STRING_VALUE;
var ar=[];
for(var n=0,nl=strValue.length;
n<nl;
n++){ar.push(strValue[n].VALUE);
}return ar.join(", ");
}}();
document.getElementsByClassName=function(cl,e){var retnode=[];
var clssnm=new RegExp("\\b"+cl+"\\b");
var elem=this.getElementsByTagName("*",e);
for(var u=0;
u<elem.length;
u++){var classes=elem[u].className;
if(clssnm.test(classes)){retnode.push(elem[u]);
}}return retnode;
};
Function.prototype.bind=function(object){var method=this;
return function(){return method.apply(object,arguments);
};
};
function EventListener(){this.events=[];
this.builtinEvts=[];
}EventListener.prototype.getActionIdx=function(obj,evt,action,binding){if(obj&&evt){var curel=this.events[obj][evt];
if(curel){var len=curel.length;
for(var i=len-1;
i>=0;
i--){if(curel[i].action==action&&curel[i].binding==binding){return i;
}}}else{return -1;
}}return -1;
};
EventListener.prototype.addListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){if(this.getActionIdx(obj,evt,action,binding)==-1){var curevt=this.events[obj][evt];
curevt[curevt.length]={action:action,binding:binding};
}}else{this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}}else{this.events[obj]=[];
this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}};
EventListener.prototype.removeListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){var idx=this.getActionIdx(obj,evt,action,binding);
if(idx>=0){this.events[obj][evt].splice(idx,1);
}}}};
EventListener.prototype.removeAllListeners=function(obj,binding){if(this.events[obj]){for(var el=this.events[obj].length;
el--;
){if(this.events[obj][el]){for(var ev=this.events[obj][el].length;
ev--;
){if(this.events[obj][el][ev].binding==binding){this.events[obj][el].splice(ev,1);
}}}}}};
EventListener.prototype.fireEvent=function(e,obj,evt,args){if(!e){e=window.event;
}if(obj&&this.events){var evtel=this.events[obj];
if(evtel){var curel=evtel[evt];
if(curel){for(var act=curel.length;
act--;
){var action=curel[act].action;
if(curel[act].binding){action=action.bind(curel[act].binding);
}action(e,args);
}}}}};
CERN_EventListener=new EventListener();
EventListener.EVENT_CLINICAL_EVENT=1;
EventListener.EVENT_ORDER_ACTION=2;
EventListener.EVENT_ADD_DOC=3;
EventListener.EVENT_PREGNANCY_EVENT=4;

if(typeof MPage=="undefined"){MPage={_Components:[],Properties:{mine:"mine",personId:0,encounter:0,userId:0,pprCd:0,posCd:0},Event:{registerEvent:function(event,listener,component){return null;
},triggerEvent:function(event){return null;
},removeEvent:function(event,listener){return null;
}},namespace:function(name){var parts=name.split(".");
var result=window;
while(parts.length){var part=parts.shift();
result=result[part]=result[part]||{};
}return result;
},registerUnloadEvent:function(){Util.addEvent(window,"beforeunload",MPage.fireUnload);
},registerResizeEvent:function(){Util.addEvent(window,"resize",MPage.fireResize);
},fireResize:function(){var tempComp;
var x;
for(x=MPage._Components.length;
x--;
){tempComp=MPage._Components[x];
compContainer=tempComp.getTarget();
tempComp.resize($(compContainer).width(),$(compContainer).height());
}},fireUnload:function(){var x;
for(x=MPage._Components.length;
x--;
){MPage._Components[x].unload();
}},addCustomComp:function(compObj){MPage._Components.push(compObj);
},getCustomComp:function(compId){var tempComp;
var x;
for(x=MPage._Components.length;
x--;
){tempComp=MPage._Components[x];
if(tempComp.getStyles().getId()===compId){return tempComp;
}}return null;
}};
}MPage.Component=function(){this.baseclassSpecVersion=1;
this.componentMinimumSpecVersion=1;
};
MPage.Component.prototype.init=function(){};
MPage.Component.prototype.generate=function(target,callback,options){var combined;
var funcCallback;
if(!target){target=component.getTarget();
}if(!callback){funcCallback=function(component){component.render();
};
}else{funcCallback=function(component){component.render();
callback(component);
};
}if(options){combined={};
combined=this.options;
for(attr in options){combined[attr]=options[attr];
}this.options=combined;
}this.init();
this.loadData(funcCallback);
return this;
};
MPage.Component.prototype.loadData=function(callback){var component=this;
var funcCallback;
funcCallback=function(response){component.data=response;
callback(component);
};
if(this.cclDataType==="undefined"){this.cclDataType="JSON";
}if(this.cclProgram&&this.cclParams&&(this.cclParams.length>0)){this.loadCCL(this.cclProgram,this.cclParams,funcCallback,this.cclDataType);
}else{callback(component);
}};
MPage.Component.prototype.loadCCL=function(cclProgram,cclParams,callback,dataType){var that=this;
var info=new XMLCclRequest();
var tempData=null;
var paramString="";
var x;
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{MP_Util.LogScriptCallInfo(null,this,"mp_custom_component_core.js","loadCCL");
switch(dataType){case"XML":if(window.ActiveXObject){xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
xmlDoc.async="false";
xmlDoc.loadXML(this.responseText);
}else{if(document.implementation&&document.implementation.createDocument){parser=new DOMParser();
xmlDoc=parser.parseFromString(this.responseText,"text/xml");
}}callback.call(that,xmlDoc);
break;
case"TEXT":callback.call(that,this.responseText);
break;
case"JSON":default:callback.call(that,JSON.parse(this.responseText));
break;
}}catch(err){MP_Util.LogJSError(err,null,"mp_custom_component_core.js","loadCCL");
}}else{if(this.readyState==4&&this.status!=200){MP_Util.LogScriptCallError(null,this,"mp_custom_component_core.js","loadCCL");
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
for(x=cclParams.length;
x--;
){if(typeof cclParams[x]=="string"){if(!/^'.*'$/.test(cclParams[x])&&!/^".*"$/.test(cclParams[x])&&!/^\^.*\^$/.test(cclParams[x])){cclParams[x]="^"+cclParams[x]+"^";
}}else{if(typeof cclParams[x]=="number"){if(!/\.0$/.test(cclParams[x])){cclParams[x]=cclParams[x]+".0";
}}}}info.open("GET",cclProgram,true);
info.send(cclParams.join(","));
};
MPage.Component.prototype.render=function(){var target;
if(typeof this.data==="string"){target=this.getTarget();
target.innerHTML=this.data;
}};
MPage.Component.prototype.getOption=function(name){if(this.options&&this.options[name]){return this.options[name];
}else{return null;
}};
MPage.Component.prototype.setOption=function(name,value){if(!this.options){this.options={};
}this.options[name]=value;
};
MPage.Component.prototype.getProperty=function(name){if(this.properties&&this.properties[name]){return this.properties[name];
}else{if(MPage.Properties[name]){return MPage.Properties[name];
}else{return"undefined";
}}};
MPage.Component.prototype.setProperty=function(name,value){if(this.properties){this.properties[name]=value;
}else{this.properties={};
this.properties[name]=value;
}if("headerTitle|headerSubTitle|headerShowHideState".indexOf(name)>=0){var parentComp=this.getOption("parentComp");
switch(name){case"headerTitle":parentComp.updateLabel(value);
break;
case"headerSubTitle":parentComp.updateSubLabel(value);
break;
case"headerShowHideState":parentComp.setExpandCollapseState(value);
break;
}}return this;
};
MPage.Component.prototype.getTarget=function(){var target=undefined;
if(this.options&&this.options.target){target=this.options.target;
}return target;
};
MPage.Component.prototype.setTarget=function(target){if(this.options){this.options.target=target;
}else{this.options={};
this.options.target=target;
}};
MPage.Component.prototype.resize=function(width,height){return null;
};
MPage.Component.prototype.unload=function(){return null;
};
MPage.Component.prototype.getComponentUid=function(){return this.getOption("id");
};
MPage.Component.prototype.throwNewError=function(description,err){var error=err||new Error(description);
MP_Util.LogError("Error occurred in a custom component: "+description);
MP_Util.LogJSError(error,null,"mp_custom_component_core.js","MPage.Component.prototype.throwNewError");
throw (error);
};

function hmo(evt,n,comp){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}n.timer=setTimeout(hover,500);
}function hmm(evt,n,comp){if(!n.show){return;
}if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
}function hmt(evt,n,comp){if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
}function hs(e,n,comp){var priorBgColor=e.style.backgroundColor;
var priorBorderColor=e.style.borderColor;
var editMode;
if(n&&n.tagName=="DIV"){e.onmouseenter=function(evt){if(comp){if(comp.isEditMode()){return;
}}e.onmouseover=null;
e.onmouseout=null;
hmo(evt,n,comp);
};
e.onmouseover=function(evt){if(comp){if(comp.isEditMode()||Util.Style.ccss(this,"row-selected")){return;
}}e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmo(evt,n,comp);
};
e.onmousemove=function(evt){if(comp){if(comp.isEditMode()||Util.Style.ccss(this,"row-selected")){return;
}}e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmm(evt,n,comp);
};
e.onmouseout=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
hmt(evt,n,comp);
};
e.onmouseleave=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
e.onmouseover=null;
e.onmouseout=null;
hmt(evt,n,comp);
};
Util.Style.acss(n,"hover");
}}function _g(i){return document.getElementById(i);
}function _gbt(t,e){e=e||document;
return e.getElementsByTagName(t);
}var Util=function(){var _e=[],_d=document,_w=window;
return{EventCache:function(){var l=[];
return{add:function(o,e,f){l.push(arguments);
},remove:function(o,e,f){var n;
for(var i=l.length-1;
i>=0;
i=i-1){if(o==l[i][0]&&e==l[i][1]&&f==l[i][2]){n=l[i];
if(n[0].removeEventListener){n[0].removeEventListener(n[1],n[2],n[3]);
}else{if(n[0].detachEvent){if(n[1].substring(0,2)!="on"){n[1]="on"+n[1];
}n[0].detachEvent(n[1],n[0][e+f]);
}}}}},flush:function(){var e;
for(var i=l.length-1;
i>=0;
i=i-1){var o=l[i];
if(o[0].removeEventListener){o[0].removeEventListener(o[1],o[2],o[3]);
}e=o[1];
if(o[1].substring(0,2)!="on"){o[1]="on"+o[1];
}if(o[0].detachEvent){o[0].detachEvent(o[1],o[2]);
if(o[0][e+o[2]]){o[0].detachEvent(o[1],o[0][e+o[2]]);
}}}}};
}(),ce:function(t){var a=_e[t];
if(!a){a=_e[t]=_d.createElement(t);
}if(!a){return null;
}else{return a.cloneNode(false);
}},cep:function(t,p){var e=this.ce(t);
return this.mo(e,p);
},mo:function(o1,o2,d){o1=o1||{};
o2=o2||{};
var p;
for(p in o2){if(p){o1[p]=(o1[p]===undefined)?o2[p]:!d?o2[p]:o1[p];
}}return o1;
},de:function(e){if(e){this.gp(e).removeChild(e);
}},cancelBubble:function(e){e=_w.event||e;
if(!e){return;
}if(e.stopPropagation){e.stopPropagation();
}else{e.cancelBubble=true;
}},preventDefault:function(e){e=_w.event||e;
if(!e){return;
}if(e.preventDefault){e.preventDefault();
}else{e.returnValue=false;
}},goff:function(e){var l=0,t=0;
if(e.offsetParent){while(e.offsetParent){l+=e.offsetLeft;
t+=e.offsetTop;
e=e.offsetParent;
}}else{if(e.x||e.y){l+=e.x||0;
t+=e.y||0;
}}return[l,t];
},gp:function(e){if(!e.parentNode){return e;
}e=e.parentNode;
while(e.nodeType===3&&e.parentNode){e=e.parentNode;
}return e;
},gc:function(e,i){i=i||0;
var j=-1;
if(!e.childNodes[i]){return null;
}e=e.childNodes[0];
while(e&&j<i){if(e.nodeType===1){j++;
if(j===i){break;
}}e=this.gns(e);
}return e;
},gcs:function(e){var r=[],es=e.childNodes;
for(var i=0;
i<es.length;
i++){var x=es[i];
if(x.nodeType===1){r.push(x);
}}return r;
},gns:function(e){if(!e){return null;
}var a=e.nextSibling;
while(a&&a.nodeType!==1){a=a.nextSibling;
}return a;
},gps:function(e){var a=e.previousSibling;
while(a&&a.nodeType!==1){a=a.previousSibling;
}return a;
},ac:function(e,p){p.appendChild(e);
return e;
},ia:function(nn,rn){var p=Util.gp(rn),n=Util.gns(rn);
if(n){p.insertBefore(nn,n);
}else{Util.ac(nn,p);
}},addEvent:function(o,e,f){function ae(obj,evt,fnc){if(!obj.myEvents){obj.myEvents={};
}if(!obj.myEvents[evt]){obj.myEvents[evt]=[];
}var evts=obj.myEvents[evt];
evts[evts.length]=fnc;
}function fe(obj,evt){if(!obj||!obj.myEvents||!obj.myEvents[evt]){return;
}var evts=obj.myEvents[evt];
for(var i=0,len=evts.length;
i<len;
i++){evts[i]();
}}if(o.addEventListener){o.addEventListener(e,f,false);
Util.EventCache.add(o,e,f);
}else{if(o.attachEvent){o["e"+e+f]=f;
o[e+f]=function(){o["e"+e+f](window.event);
};
o.attachEvent("on"+e,o[e+f]);
Util.EventCache.add(o,e,f);
}else{ae(o,e,f);
o["on"+e]=function(){fe(o,e);
};
}}},removeEvent:function(o,e,f){Util.EventCache.remove(o,e,f);
},popup:function(u,n,o){if(!window.open){return false;
}var d={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};
function f(n,v){if(!v){return"";
}return n+"="+v+",";
}function fs(){o=o||{};
var p,n={};
for(p in d){if(p){n[p]=o[p]!==undefined?o[p]:d[p];
}}return n;
}o=fs();
var p=f("dependent",o.dp)+f("directories",o.dr)+f("fullscreen",o.fs)+f("location",o.lb?1:0)+f("menubar",o.mb)+f("resizable",o.rz?1:0)+f("scrollbars",o.scb?1:0)+f("status",o.stb?1:0)+f("toolbar",o.tb?1:0)+f("top",o.tp)+f("left",o.lft)+f("width",o.w)+f("height",o.h)+f("screenX",o.sx)+f("screenY",o.sy);
p=p.substring(0,p.length-1);
var nw=window.open(u,n,p);
window.blur();
if(nw.focus){nw.focus();
}return true;
},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}};
}();
function insertAfter(nn,rn){Util.ia(nn,rn);
}Util.addEvent(window,"unload",Util.EventCache.flush);
Util.Style=function(){return{ccss:function(e,c){if(typeof(e.className)==="undefined"||!e.className){return false;
}var a=e.className.split(" ");
for(var i=0,b=a.length;
i<b;
i++){if(a[i]===c){return true;
}}return false;
},acss:function(e,c){if(this.ccss(e,c)){return e;
}e.className=(e.className?e.className+" ":"")+c;
return e;
},rcss:function(e,c){if(!this.ccss(e,c)){return e;
}var a=e.className.split(" "),d="";
for(var i=0,b=a.length;
i<b;
i++){var f=a[i];
if(f!==c){d+=d.length>0?(" "+f):f;
}}e.className=d;
return e;
},tcss:function(e,c){if(this.ccss(e,c)){this.rcss(e,c);
return false;
}else{this.acss(e,c);
return true;
}},co:function(e){e.style.MozOpacity="";
e.style.opacity="";
e.style.filter="";
},g:function(c,e,t){e=e||document;
t=t||"*";
var ns=[],es=_gbt(t,e),l=es.length;
for(var i=0,j=0;
i<l;
i++){if(this.ccss(es[i],c)){ns[j]=es[i];
j++;
}}return ns;
}};
}();
function getPosition(e){e=e||window.event;
var cursor={x:0,y:0};
if(e.pageX||e.pageY){cursor.x=e.pageX;
cursor.y=e.pageY;
}else{var de=document.documentElement;
var b=document.body;
cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}return cursor;
}function gvs(){var n=window,d=document,b=d.body,e=d.documentElement;
if(typeof n.innerWidth!=="undefined"){return[n.innerHeight,n.innerWidth];
}else{if(typeof e!=="undefined"&&typeof e.clientWidth!=="undefined"&&e.clientWidth!==0){return[e.clientHeight,e.clientWidth];
}else{return[b.clientHeight,b.clientWidth];
}}}function gso(){var d=document,b=d.body,w=window,e=d.documentElement,et=e.scrollTop,bt=b.scrollTop,el=e.scrollLeft,bl=b.scrollLeft;
if(typeof w.pageYOffset==="number"){return[w.pageYOffset,w.pageXOffset];
}if(typeof et==="number"){if(bt>et||bl>el){return[bt,bl];
}return[et,el];
}return[bt,bl];
}
if(!this.JSON){this.JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){k=rep[i];
if(typeof k==="string"){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());


function hmo(evt,n,comp){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}n.timer=setTimeout(hover,500);
}function hmm(evt,n,comp){if(!n.show){return;
}if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
}function hmt(evt,n,comp){if(comp){if(comp.isEditMode()){clearTimeout(n.timer);
return;
}}n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
}function hs(e,n,comp){var priorBgColor=e.style.backgroundColor;
var priorBorderColor=e.style.borderColor;
var editMode;
if(n&&n.tagName=="DIV"){e.onmouseenter=function(evt){if(comp){if(comp.isEditMode()){return;
}}e.onmouseover=null;
e.onmouseout=null;
hmo(evt,n,comp);
};
e.onmouseover=function(evt){if(comp){if(comp.isEditMode()||Util.Style.ccss(this,"row-selected")){return;
}}e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmo(evt,n,comp);
};
e.onmousemove=function(evt){if(comp){if(comp.isEditMode()||Util.Style.ccss(this,"row-selected")){return;
}}e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmm(evt,n,comp);
};
e.onmouseout=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
hmt(evt,n,comp);
};
e.onmouseleave=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
e.onmouseover=null;
e.onmouseout=null;
hmt(evt,n,comp);
};
Util.Style.acss(n,"hover");
}}function _g(i){return document.getElementById(i);
}function _gbt(t,e){e=e||document;
return e.getElementsByTagName(t);
}var Util=function(){var _e=[],_d=document,_w=window;
return{EventCache:function(){var l=[];
return{add:function(o,e,f){l.push(arguments);
},remove:function(o,e,f){var n;
for(var i=l.length-1;
i>=0;
i=i-1){if(o==l[i][0]&&e==l[i][1]&&f==l[i][2]){n=l[i];
if(n[0].removeEventListener){n[0].removeEventListener(n[1],n[2],n[3]);
}else{if(n[0].detachEvent){if(n[1].substring(0,2)!="on"){n[1]="on"+n[1];
}n[0].detachEvent(n[1],n[0][e+f]);
}}}}},flush:function(){var e;
for(var i=l.length-1;
i>=0;
i=i-1){var o=l[i];
if(o[0].removeEventListener){o[0].removeEventListener(o[1],o[2],o[3]);
}e=o[1];
if(o[1].substring(0,2)!="on"){o[1]="on"+o[1];
}if(o[0].detachEvent){o[0].detachEvent(o[1],o[2]);
if(o[0][e+o[2]]){o[0].detachEvent(o[1],o[0][e+o[2]]);
}}}}};
}(),ce:function(t){var a=_e[t];
if(!a){a=_e[t]=_d.createElement(t);
}if(!a){return null;
}else{return a.cloneNode(false);
}},cep:function(t,p){var e=this.ce(t);
return this.mo(e,p);
},mo:function(o1,o2,d){o1=o1||{};
o2=o2||{};
var p;
for(p in o2){if(p){o1[p]=(o1[p]===undefined)?o2[p]:!d?o2[p]:o1[p];
}}return o1;
},de:function(e){if(e){this.gp(e).removeChild(e);
}},cancelBubble:function(e){e=_w.event||e;
if(!e){return;
}if(e.stopPropagation){e.stopPropagation();
}else{e.cancelBubble=true;
}},preventDefault:function(e){e=_w.event||e;
if(!e){return;
}if(e.preventDefault){e.preventDefault();
}else{e.returnValue=false;
}},goff:function(e){var l=0,t=0;
if(e.offsetParent){while(e.offsetParent){l+=e.offsetLeft;
t+=e.offsetTop;
e=e.offsetParent;
}}else{if(e.x||e.y){l+=e.x||0;
t+=e.y||0;
}}return[l,t];
},gp:function(e){if(!e.parentNode){return e;
}e=e.parentNode;
while(e.nodeType===3&&e.parentNode){e=e.parentNode;
}return e;
},gc:function(e,i){i=i||0;
var j=-1;
if(!e.childNodes[i]){return null;
}e=e.childNodes[0];
while(e&&j<i){if(e.nodeType===1){j++;
if(j===i){break;
}}e=this.gns(e);
}return e;
},gcs:function(e){var r=[],es=e.childNodes;
for(var i=0;
i<es.length;
i++){var x=es[i];
if(x.nodeType===1){r.push(x);
}}return r;
},gns:function(e){if(!e){return null;
}var a=e.nextSibling;
while(a&&a.nodeType!==1){a=a.nextSibling;
}return a;
},gps:function(e){var a=e.previousSibling;
while(a&&a.nodeType!==1){a=a.previousSibling;
}return a;
},ac:function(e,p){p.appendChild(e);
return e;
},ia:function(nn,rn){var p=Util.gp(rn),n=Util.gns(rn);
if(n){p.insertBefore(nn,n);
}else{Util.ac(nn,p);
}},addEvent:function(o,e,f){function ae(obj,evt,fnc){if(!obj.myEvents){obj.myEvents={};
}if(!obj.myEvents[evt]){obj.myEvents[evt]=[];
}var evts=obj.myEvents[evt];
evts[evts.length]=fnc;
}function fe(obj,evt){if(!obj||!obj.myEvents||!obj.myEvents[evt]){return;
}var evts=obj.myEvents[evt];
for(var i=0,len=evts.length;
i<len;
i++){evts[i]();
}}if(o.addEventListener){o.addEventListener(e,f,false);
Util.EventCache.add(o,e,f);
}else{if(o.attachEvent){o["e"+e+f]=f;
o[e+f]=function(){o["e"+e+f](window.event);
};
o.attachEvent("on"+e,o[e+f]);
Util.EventCache.add(o,e,f);
}else{ae(o,e,f);
o["on"+e]=function(){fe(o,e);
};
}}},removeEvent:function(o,e,f){Util.EventCache.remove(o,e,f);
},popup:function(u,n,o){if(!window.open){return false;
}var d={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};
function f(n,v){if(!v){return"";
}return n+"="+v+",";
}function fs(){o=o||{};
var p,n={};
for(p in d){if(p){n[p]=o[p]!==undefined?o[p]:d[p];
}}return n;
}o=fs();
var p=f("dependent",o.dp)+f("directories",o.dr)+f("fullscreen",o.fs)+f("location",o.lb?1:0)+f("menubar",o.mb)+f("resizable",o.rz?1:0)+f("scrollbars",o.scb?1:0)+f("status",o.stb?1:0)+f("toolbar",o.tb?1:0)+f("top",o.tp)+f("left",o.lft)+f("width",o.w)+f("height",o.h)+f("screenX",o.sx)+f("screenY",o.sy);
p=p.substring(0,p.length-1);
var nw=window.open(u,n,p);
window.blur();
if(nw.focus){nw.focus();
}return true;
},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}};
}();
function insertAfter(nn,rn){Util.ia(nn,rn);
}Util.addEvent(window,"unload",Util.EventCache.flush);
Util.Style=function(){return{ccss:function(e,c){if(typeof(e.className)==="undefined"||!e.className){return false;
}var a=e.className.split(" ");
for(var i=0,b=a.length;
i<b;
i++){if(a[i]===c){return true;
}}return false;
},acss:function(e,c){if(this.ccss(e,c)){return e;
}e.className=(e.className?e.className+" ":"")+c;
return e;
},rcss:function(e,c){if(!this.ccss(e,c)){return e;
}var a=e.className.split(" "),d="";
for(var i=0,b=a.length;
i<b;
i++){var f=a[i];
if(f!==c){d+=d.length>0?(" "+f):f;
}}e.className=d;
return e;
},tcss:function(e,c){if(this.ccss(e,c)){this.rcss(e,c);
return false;
}else{this.acss(e,c);
return true;
}},co:function(e){e.style.MozOpacity="";
e.style.opacity="";
e.style.filter="";
},g:function(c,e,t){e=e||document;
t=t||"*";
var ns=[],es=_gbt(t,e),l=es.length;
for(var i=0,j=0;
i<l;
i++){if(this.ccss(es[i],c)){ns[j]=es[i];
j++;
}}return ns;
}};
}();
function getPosition(e){e=e||window.event;
var cursor={x:0,y:0};
if(e.pageX||e.pageY){cursor.x=e.pageX;
cursor.y=e.pageY;
}else{var de=document.documentElement;
var b=document.body;
cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}return cursor;
}function gvs(){var n=window,d=document,b=d.body,e=d.documentElement;
if(typeof n.innerWidth!=="undefined"){return[n.innerHeight,n.innerWidth];
}else{if(typeof e!=="undefined"&&typeof e.clientWidth!=="undefined"&&e.clientWidth!==0){return[e.clientHeight,e.clientWidth];
}else{return[b.clientHeight,b.clientWidth];
}}}function gso(){var d=document,b=d.body,w=window,e=d.documentElement,et=e.scrollTop,bt=b.scrollTop,el=e.scrollLeft,bl=b.scrollLeft;
if(typeof w.pageYOffset==="number"){return[w.pageYOffset,w.pageXOffset];
}if(typeof et==="number"){if(bt>et||bl>el){return[bt,bl];
}return[et,el];
}return[bt,bl];
}
if(!this.JSON){this.JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){k=rep[i];
if(typeof k==="string"){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.consolproblem_o1={ADD_NEW_AS:"Add new as:",ALL:"All",AND:"and",CANCEL:"Cancel",CHANGE_TO_MEDICAL:"Change to Medical",CLASSIFICATION:"Classification",CONDITION:"Condition",CONFIRM:"Confirm",DIAGNOSIS_DETAILS:"Diagnosis Details",DUPLICATE_MSG:"This action would create a duplicate in the {0} section.  The condition will not be added to the {0} section.",ENCNTR_MSG:"An encounter must be loaded to perform this action.",FILTER_MSG:"Problem saving filter change. Please try again.",INACTIVATE:"Inactivate",MEDICAL_AND_PATIENT_STATED:"Medical and Patient Stated",MOVE_TO:"Move to {0}",NO_ADD_CONDITION_MSG:"You do not have privileges to add this condition to the {0} section.",NO_PRIVS_MSG:"You do not have privileges to perform this action.",PROBLEM_RETRIEVING_DATA:"Problem retrieving {0} data",PROBLEM_STATUS:"Problem Status",PROBLEM_TYPE_FLAG_2_MSG:"This Problem can only be modified through the pregnancy control and will not be modified by your current action.",PROCESSING:"Processing...",RECENT_VISITS:"Recent Visits",REMOVE_FROM:"Remove from {0}",RESOLVE:"Resolve",NO_ACTION_FREETEXT:"You are unable to take this action on a freetext problem or diagnosis."};

if (typeof i18n === 'undefined') { var i18n={}; }
if (typeof i18n.discernabu === 'undefined') { i18n.discernabu={}; }

i18n.discernabu.ctreview = {
    /* as in, what is the patient's response to treatment? */
    RESPONSE: 'Response',
    /* as in, this is the set of treatments of the historical period. */
    HISTORICAL: 'Historical',
    /* as in, this is the next treatment the patient will receive. */
    NEXT: 'Next',
    /* as in, the date the response to treatment was logged. */
    CHARTED_ON: 'Charted on',
    /* as in, by whom was the response to treatment noted? */
    BY: 'by',
    /* as in, the treatment was ordered as [this name] when it was ordered. */
    ORDERED_AS: 'Ordered As',
    /* as in, the date range of historical treatments is from [some date] to Current.
     * (Current is the name of the other treatment table) */
    TO_CURRENT: 'to Current',
    /* as in, no treatment plans could be loaded for this regimen. */
    NO_PLANS: 'Unable to load plans',
    DATE_FORMAT: 'mm/dd/yyyy'
};

var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);
len=len||2;
while(val.length<len){val="0"+val;
}return val;
};
return function(date,mask,utc){var dF=dateFormat;
if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;
date=undefined;
}date=date?new Date(date):new Date;
if(isNaN(date)){throw SyntaxError("invalid date");
}mask=String(dF.masks[mask]||mask||dF.masks["default"]);
if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);
utc=true;
}var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};
return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1);
});
};
}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",shortDate2:"mm/dd/yyyy",shortDate3:"mm/dd/yy",shortDate4:"mm/yyyy",shortDate5:"yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",militaryTime:"HH:MM",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",longDateTime:"mm/dd/yyyy h:MM:ss TT Z",longDateTime2:"mm/dd/yy HH:MM",longDateTime3:"mm/dd/yyyy HH:MM",shortDateTime:"mm/dd h:MM TT"};
dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};
Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc);
};
Date.prototype.setISO8601=function(string){var regexp="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
var d=string.match(new RegExp(regexp));
var offset=0;
var date=new Date(d[1],0,1);
if(d[3]){date.setMonth(d[3]-1);
}if(d[5]){date.setDate(d[5]);
}if(d[7]){date.setHours(d[7]);
}if(d[8]){date.setMinutes(d[8]);
}if(d[10]){date.setSeconds(d[10]);
}if(d[12]){date.setMilliseconds(Number("0."+d[12])*1000);
}if(d[14]){offset=(Number(d[16])*60)+Number(d[17]);
offset*=((d[15]=="-")?1:-1);
}offset-=date.getTimezoneOffset();
time=(Number(date)+(offset*60*1000));
this.setTime(Number(time));
};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.diagnoses_o1={DIAGNOSES:"Diagnosis",CODE:"Code",DETAILS:"Details",DIAGNOSES_DATE:"Diagnosis Date",RESPONSIBLE_PROVIDER_NAME:"Responsible Provider",DIAG_TYPE:"Diagnosis Type",COMMENTS:"Comments",DIAGNOSES_NAME:"Diagnosis Name",ANNOTATED_DISPLAY:"Annotated Display"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.documents_base_o1={AUTHOR:"Author",DATE:"Date",DATE_TIME:"Date/Time",WITHIN:"within",UNKNOWN:"Unknown",DOCUMENTATION_DETAILS:"Documentation Details",NAME:"Name",SUBJECT:"Subject",STATUS:"Status",LAST_UPDATED:"Last Updated",LAST_UPDATED_BY:"Last Updated By",DOCUMENT_FAVS:"No Favs Found"};

if(typeof MPAGE_LC=="undefined"){var MPAGE_LC={};
}MPAGE_LC.en_US={decimal_point:".",thousands_sep:",",grouping:"3",time24hr:"HH:MM:ss",time24hrnosec:"HH:MM",shortdate2yr:"m/d/yy",fulldate2yr:"mm/dd/yy",fulldate4yr:"mm/dd/yyyy",fullmonth4yrnodate:"mm/yyyy",full4yr:"yyyy",fulldatetime2yr:"mm/dd/yy HH:MM",fulldatetime4yr:"mm/dd/yyyy HH:MM",fulldatetimenoyr:"mm/dd h:MM TT"};
MPAGE_LC.en_AU={decimal_point:".",thousands_sep:",",grouping:"3",time24hr:"HH:MM:ss",time24hrnosec:"HH:MM",shortdate2yr:"d/m/yy",fulldate2yr:"dd/mm/yy",fulldate4yr:"dd/mm/yyyy",fullmonth4yrnodate:"mm/yyyy",full4yr:"yyyy",fulldatetime2yr:"dd/mm/yy HH:MM",fulldatetime4yr:"dd/mm/yyyy HH:MM",fulldatetimenoyr:"dd/mm h:MM TT"};
MPAGE_LC.en_GB={decimal_point:".",thousands_sep:",",grouping:"3",time24hr:"HH:MM:ss",time24hrnosec:"HH:MM",shortdate2yr:"d/m/yy",fulldate2yr:"dd/mm/yy",fulldate4yr:"dd/mm/yyyy",fullmonth4yrnodate:"mm/yyyy",full4yr:"yyyy",fulldatetime2yr:"dd/mm/yy HH:MM",fulldatetime4yr:"dd/mm/yyyy HH:MM",fulldatetimenoyr:"dd/mm h:MM TT"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.laboratory_o1={WITHIN:"within",LATEST:"Latest",TODAY:"Today",PREVIOUS:"Previous",EXPAND:"Expand",COLLAPSE:"Collapse",PRIMARY_RESULTS:"Primary Results",SECONDARY_RESULTS:"Secondary Results",VALUE:"Value",LABORATORY_DETAILS:"Laboratory Details",DATE_TIME:"Date/Time",NORMAL_LOW:"Normal Low",NORMAL_HIGH:"Normal High",CRITICAL_LOW:"Critical Low",CRITICAL_HIGH:"Critical High",STATUS:"Status"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.measurement_base_o1={ERROR_MISSING_ES_EC:"Missing event set or event code configuration"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.medications_o1={NEXT_N_HOURS:"Next {0} hours",HIDE_SECTION:"Collapse",SCHEDULED:"Scheduled",MED_DETAIL:"Medication Details",MED_NAME:"Medication",REQUESTED_START:"Requested Start",ORIG_DT_TM:"Original Order Date/Time",LAST_DOSE_DT_TM:"Last Dose",NEXT_DOSE_DT_TM:"Next Dose",STOP_DT_TM:"Stop Date/Time",STOP_REASON:"Stop Reason",STATUS:"Status",LAST_GIVEN:"Last Given",NEXT_DOSE:"Next Dose",CONTINOUS:"Continuous",SUSPENDED:"Suspended",PRN:"PRN",UNSCHEDULED:"Unscheduled",RESPONSIBLE_PROVIDER:"Order Entered By",ADMINISTERED:"Administered",PRN_UNSCHEDULED:"PRN/Unscheduled Available",ADMIN_LAST_N_HOURS:"Administered last {0} hours",SHOW_SECTION:"Expand",LAST_N_HOURS:"Last {0} hours",DISCONTINUED:"Discontinued",JS_ERROR:"JavaScript Error",MESSAGE:"Message",NUMBER:"Number",DESCRIPTION:"Description",NAME:"Name",DETAILS:"Details",NOT_DEFINED:"Not Defined",ORDER_DETAILS:"Order Details",ORDER_COMMENTS:"Order Comments",REJECTED_BY_PHARMACY:"Rejected by Pharmacy"};

if(typeof i18n=="undefined"){var i18n={};
}i18n.ACCORDING_TO_ZOOM="&nbsp;(range depends on zoom)";
i18n.ACTION="Action";
i18n.ACTIVE="Active";
i18n.ACTIVITY_LIST="Activity List";
i18n.ACTIVITY_ORDER="Activity Order";
i18n.ADD="Add";
i18n.ADMINISTERED="Administered";
i18n.ADMIN_DATE="Admin Date";
i18n.ADMIN_LAST_N_HOURS="Administered last {0} hours";
i18n.ADMIN_NOTES="Admin Notes";
i18n.ADMISSION="Admission";
i18n.ADMIT_DATE="Admit Date";
i18n.ADMIT_DIAG="Admitting Diagnosis";
i18n.ADMIT_DX="Admit Dx";
i18n.ADMIT_INFO="Admission Information";
i18n.ADMIT_PHYS="Admitting Physician";
i18n.ADMIT_SOURCE="Admit Source";
i18n.ADMIT_TO_BED_DT="Admit to Bed Date";
i18n.ADVANCE_DIRECTIVE="Advance Directive";
i18n.AEROSOL_THERAPY="Patient Response to Inhaled Medications";
i18n.AEROSOL_THERAPY_DETAILS="Patient Response to Inhaled Medications Details";
i18n.AGE="Age";
i18n.ALARM_SETTINGS="Alarm Settings";
i18n.ALARM_SETTINGS_DETAILS="Alarm Settings Details";
i18n.ALLERGY="Allergy";
i18n.ALLERGY_NAME="Allergy Name";
i18n.ALL_DATA="All Data";
i18n.ALL_N_VISITS="{0} for all visits";
i18n.AMBULATORYSUMMARYMPAGE="Ambulatory Summary";
i18n.ANESTHESIA_TYPE="Anesthesia Type(s)";
i18n.ANESTH_START="Anesth Start";
i18n.ANESTH_STOP="Anesth Stop";
i18n.ANNOTATED_DISPLAY="Annotated Display Name";
i18n.ANNOTATED_DISPLAY_NAME="Annotated Display";
i18n.APRIL=["Apr","April"];
i18n.ARRIVAL="Arrival";
i18n.ARTIFICIAL_AIRWAY="Artificial Airway";
i18n.ARTIFICIAL_AIRWAY_DETAILS="Artificial Airway Details";
i18n.ASSESSMENT="Assessment";
i18n.ASSISTIVE_DEVICES="Assistive Devices";
i18n.ASSOCIATED_MICRO_REPORTS="Associated Micro Reports";
i18n.ASSOCIATED_MICRO_STAIN_REPORTS="Associated Micro Stain Reports";
i18n.ATTENDING_PHD="Attending Physician";
i18n.ATTENDING_PHYSICIAN="Attending Physician";
i18n.ATTEND_PHYS="Attending Physician";
i18n.AUGUST=["Aug","August"];
i18n.AUTH="Auth";
i18n.AUTHCOMMENTS="Auth Comments";
i18n.AUTHDATES="Auth Dates";
i18n.AUTHOR="Author";
i18n.AUTHORIZATION="Authorization";
i18n.AVAILABLE_VIEWS="Available Views:";
i18n.A_LINE="A-line";
i18n.All_VISITS="All Visits";
i18n.BABY="Baby";
i18n.BABY="Baby";
i18n.BE="B.E.";
i18n.BENEFITS="Benefits";
i18n.BILLING="Billing";
i18n.BLOOD_PRESSURE="BP";
i18n.BLOOD_TYPE_RH="Blood Type RH";
i18n.BP_UNIT="(mmHg)";
i18n.BREATH_SOUNDS_ASSESSMENT="Breath Sounds Assessment";
i18n.BREATH_SOUNDS_ASSESSMENT_DETAILS="Breath Sounds Assessment Details";
i18n.BTN_HVR="Click to document variance";
i18n.CAN_NOT_VIEW_RESULTS="The results cannot be viewed.";
i18n.CANCEL="Cancel";
i18n.CARDIO="Cardiovascular";
i18n.CAREMANAGERUMPAGE="Utilization Review Summary";
i18n.CARE_LEVEL="Care Level";
i18n.CASE_NUM="Case Number";
i18n.CATEGORY="Category";
i18n.CHANGE="Change";
i18n.CHEST="Chest";
i18n.CHEST_ABD_XR="Chest/ABD XR";
i18n.CHEST_PHYSIOTHERAPY="Bronchial Hygiene";
i18n.CHEST_PHYSIOTHERAPY_DETAILS="Bronchial Hygiene Details";
i18n.CHIEF_COMPLAINT="Chief Complaint";
i18n.CHILD_NAME="Child's Name";
i18n.CLEAR_PREFERENCES="Clear Preferences";
i18n.CLEAR_PREF_SUCCESS="Preferences Successfully Cleared";
i18n.CLICK_TO_GO_TO_DISCHARGE_PROCESS="Click to go to Discharge Process";
i18n.CLINICAL_DISPLAY="Clinical Display";
i18n.CLOSE_X="CLOSE X";
i18n.CODE="Code";
i18n.CODE_STATUS="Code Status";
i18n.COINSURANCEDAYSREMAINING="Coinsurance Days Remaining";
i18n.COLLAPSE_ALL="Collapse All";
i18n.COLLECTED="Collected";
i18n.COLLECTED_DATE_TIME="Collected Date/Time";
i18n.COLLECTED_WITHIN="Collected within";
i18n.COMMENTS="Comments";
i18n.COMMON_ORDERS="Quick Orders and Charges";
i18n.COMPLETED="Completed";
i18n.COMPLETE_ORDERS="Complete Order(s)";
i18n.COMPLIANCE="Compliance";
i18n.CONDITION="Condition";
i18n.CONTACTS="Contacts";
i18n.CONTACT_ADMINISTRATOR="Please contact your system administrator.";
i18n.CONTACT_PHYSICIAN="Contact physician prior to taking";
i18n.CONTINOUS="Continuous";
i18n.CONTINUE="Continue";
i18n.CONTINUE_WITH_CHANGES="Continue with changes";
i18n.COPAY="Copay";
i18n.COUGH_SUCTION="Cough Suction";
i18n.COUGH_SUCTION_DETAILS="Cough Suction Details";
i18n.COVEREDDAYSREMAINING="Covered Days Remaining";
i18n.CRITICAL_HIGH="Critical High";
i18n.CRITICAL_LOW="Critical Low";
i18n.CRITICAL_RANGE="Critical Range";
i18n.CRITICAL_RESULTS="Critical Results";
i18n.CRIT_IND="C";
i18n.CUFF="Cuff";
i18n.CURRENT="Current";
i18n.CUR_DOC_PLAN_SCREEN="Current Documented Plan/Screen";
i18n.CUSTOMIZE="Customize";
i18n.DATE="Date";
i18n.DATE_PERFORMED="Date Performed";
i18n.DATE_TIME="Date/Time";
i18n.DATE_TIME_INITIATED="Date Time Initiated";
i18n.DAYS="Days";
i18n.DBP="DBP";
i18n.DC_COMPLETE="Complete";
i18n.DC_IN_PROGRESS="In Progress";
i18n.DC_NOT_STARTED="Not Started";
i18n.DC_PLANNING_TM_TRACKED="DC Planning Time Tracked";
i18n.DC_REVIEWSIGN="Review and Sign";
i18n.DECEASED="Deceased";
i18n.DECEMBER=["Dec","December"];
i18n.DEDUCTIBLE="Deductible";
i18n.DEDUCTIBLE_MET="Met";
i18n.DEGC="DegC";
i18n.DEGF="DegF";
i18n.DELAYREASON="Delay Reason";
i18n.DELAYS_TRACKED="Delays Tracked";
i18n.DELIVERY_HOSPITAL="Delivery Hospital";
i18n.DESCRIPTION="Description";
i18n.DETAILS="Details";
i18n.DEVICE_DETAILS="Device Details";
i18n.DIAGNOSES="Diagnosis";
i18n.DIAGNOSES_DATE="Diagnosis Date";
i18n.DIAGNOSES_NAME="Diagnosis Name";
i18n.DIAGNOSTIC="Diagnostic";
i18n.DIAGNOSTIC_DETAILS="Diagnostic Details";
i18n.DIET="Diet";
i18n.DISCERN_ERROR="Discern Error";
i18n.DISCHARE_APPEALDELIVERED="Discharge Appeal Delivered";
i18n.DISCHARGECAREMANAGEMENT="Discharge Care Management Summary";
i18n.DISCHARGE_DATE="Discharge Date";
i18n.DISCHARGE_DISPOSITION="Discharge Disposition";
i18n.DISCHARGE_INFORMATION="Discharge Information";
i18n.DISCHARGE_LOCATION="Discharge Location";
i18n.DISCHARGE_MIM_SIGNED="Discharge MIM Given";
i18n.DISCHARGE_PLANNER="Discharge Planner";
i18n.DISCHARGE_PROCESS="Discharge Process";
i18n.DISCHARGE_SUMMARY="Discharge Summary";
i18n.DISCLAIMER="This page is not a complete source of visit information.";
i18n.DISCONTINUED="Discontinued";
i18n.DISPLAY_AS="Display As";
i18n.DISPLAY_MET="Display Met Outcomes";
i18n.DME_ANTICIPATED="DME Anticipated";
i18n.DME_COORD="DME Coordinated";
i18n.DOB="DOB";
i18n.DOCUMENTATION_DETAILS="Documentation Details";
i18n.DOCUMENTED="Documented";
i18n.DOCUMENTED_ACTION="Documented Variance Action";
i18n.DOCUMENTED_BY="Documented By";
i18n.DOCUMENTED_VARIANCE="Documented Variance Reason";
i18n.DOCUMENTS="Documents";
i18n.DOCUMENT_FAVS="No Favs Found";
i18n.DONE="Done";
i18n.DUE="Due";
i18n.ED_SUMMARY="ED Summary";
i18n.EKG="EKG";
i18n.EMER_CONTACT="Emergency Contact";
i18n.EMER_CONTACT="Emergency Contacts";
i18n.EMER_NUMBER="Emergency #";
i18n.EMER_NUMBER="Emergency #";
i18n.ENCNTR_TYPE="Encounter Type";
i18n.ENCOUNTERS="Encounters";
i18n.ENTERED="Entered";
i18n.ERROR_OCCURED="Error Occurred";
i18n.ERROR_OPERATION="Operation Name";
i18n.ERROR_OPERATION_STATUS="Operation Status";
i18n.ERROR_RETREIVING_DATA="Error retrieving results";
i18n.ERROR_TARGET_OBJECT="Target Object Name";
i18n.ERROR_TARGET_OBJECT_VALUE="Target Object Value";
i18n.ESTIMATED_DISCHARGE_DATE="Estimated D/C Date";
i18n.EVENTS="Events";
i18n.EXAM="Exam";
i18n.EXPAND_ALL="Expand All";
i18n.EXPIRATION_DATE_TIME="Expiration Date/Time";
i18n.EXP_DATE="Expiration Date";
i18n.FALL_RISK_SCORE="Fall Risk Score";
i18n.FATHER_NAME="Father's Name";
i18n.FEBRUARY=["Feb","February"];
i18n.FIN="FIN";
i18n.FINAL_DIAGNOSIS="Final Diagnosis";
i18n.FINAL_DRG="Final DRG";
i18n.FIN_CLASS="Financial Class";
i18n.FIN_NUM="FIN Number";
i18n.FIO2="FIO2";
i18n.FIRST_24HRS_ED_VISIT="Results represent the first 24 hours of the Emergency visit";
i18n.FLAGGED="Flagged";
i18n.FLOW_RATE="Flow Rate";
i18n.FROM="From";
i18n.FUTURE="Future";
i18n.FU_ADDRESS="Address:";
i18n.FU_NAME="Name:";
i18n.GENERAL_ASSESSMENT="General Assessment";
i18n.GESTATIONAL_AGE="Gestational Age";
i18n.GI="GI";
i18n.GO_TO_TAB="Go to {0} tab";
i18n.GROWTH="Growth";
i18n.GROWTH_IND="Growth Ind";
i18n.GU="GU";
i18n.HEART_RATE="HR";
i18n.HELP="Help";
i18n.HIDE_LEGEND="Hide Legend";
i18n.HIDE_SECTION="Collapse";
i18n.HI_FLOW_NEB="Hi-Flow Neb";
i18n.HI_IND="H";
i18n.HOME_MEDICATION="Home Medication";
i18n.HOURS="Hours";
i18n.ICU_SUMMARY="ICU Summary";
i18n.IMAGING="Imaging";
i18n.IMMUNIZATIONS="Immunization";
i18n.IMMUNIZATIONS_DETAILS="Immunization Details";
i18n.INCENTIVE_SPIROMETRY="Incentive Spirometry";
i18n.INCENTIVE_SPIROMETRY_DETAILS="Incentive Spirometry Details";
i18n.INCOMPLETE_ORDERS="Incomplete Order(s)";
i18n.INHALALATION="Inhalation";
i18n.INHALED="INH";
i18n.INIT_DOC_DT_TM="Initial Documented Date/Time";
i18n.INPATIENT_SUMMARY="Inpatient Summary";
i18n.INSPIRATORY_TIME_DELIVERED="Inspiratory Time %";
i18n.INSPIRATORY_TIME_SET="Inspiratory Time Set";
i18n.INTEGUMENTARY="Integumentary";
i18n.IO="Intake and Output";
i18n.ISOLATION="Isolation";
i18n.ISOLATION="Isolation";
i18n.JANUARY=["Jan","January"];
i18n.JS_ERROR="JavaScript Error";
i18n.JULY=["Jul","July"];
i18n.JUNE=["Jun","June"];
i18n.KEY_PERSON_RELATIONSHIPS="Key Person Relationships";
i18n.LABRAD="Lab/Radiology";
i18n.LABS="Labs";
i18n.LAST="Last";
i18n.LAST_3_DAYS="Last 3 days for the selected visit";
i18n.LAST_DOC="Last Documented";
i18n.LAST_DOC_BY="Last Documented By";
i18n.LAST_DOC_DT_TM="Last Documented Date/Time";
i18n.LAST_DOC_DT_TM="Last Documented Date/Time";
i18n.LAST_DOC_WITHIN="Last Documented Within";
i18n.LAST_DOSE="Last Dose";
i18n.LAST_DOSE_DT_TM="Last Dose";
i18n.LAST_EVALUATION="Last Evaluation";
i18n.LAST_GIVEN="Last Given";
i18n.LAST_N_DAYS="Last {0} days";
i18n.LAST_N_HOURS="Last {0} hours";
i18n.LAST_N_MONTHS="Last {0} months";
i18n.LAST_N_WEEKS="Last {0} weeks";
i18n.LAST_N_YEARS="Last {0} years";
i18n.LAST_PARTICIPATION="Last Participation";
i18n.LAST_UPDATED="Last Updated";
i18n.LAST_UPDATED_BY="Last Updated By";
i18n.LAST_VISIT="Last Visit";
i18n.LATEST="Latest";
i18n.LATEST_ABG_RESULTS="Latest ABG Results";
i18n.LATEST_BLOOD_GAS_ARTERIAL="Latest Blood Gas Arterial";
i18n.LATEST_BLOOD_GAS_ARTERIAL_RESULTS="Latest Blood Gas Arterial Results";
i18n.LENGTH_OF_LABOR="Length of Labor";
i18n.LENGTH_OF_STAY="Length Of Stay";
i18n.LIFETIMEMAX="Life Time Max";
i18n.LINES="Lines";
i18n.LOADING_DATA="Loading";
i18n.LOCATION="Location";
i18n.LOS="LOS";
i18n.LOT="Lot";
i18n.LOW_IND="L";
i18n.LTRDAILYDEDUCTABLE="LTR Daily Deductible";
i18n.LTRDAYSREMAINING="LTR Days Remaining";
i18n.MANUFACTURER="Manufacturer";
i18n.MAP="MAP";
i18n.MARCH=["Mar","March"];
i18n.MASTER_GRAPH="Master Graph";
i18n.MAX="Max";
i18n.MAY=["May","May"];
i18n.MEASUREMENTS_ASSESSMENTS="Measurements and Assessments";
i18n.MEASUREMENTS_ASSESSMENTS_DETAILS="Measurements and Assessments Details";
i18n.MEASUREMENT_DETAILS="Measurement Details";
i18n.MEDICATIONS="Medications";
i18n.MEDS="Meds";
i18n.MEDS_ADMINISTERED="Medication(s) Administered";
i18n.MED_DETAIL="Medication Details";
i18n.MED_NAME="Medication";
i18n.MEMBERS="Members";
i18n.MESSAGE="Message";
i18n.MET="met";
i18n.MICRO="Micro";
i18n.MIM_SIGNED="Admit MIM Signed";
i18n.MIN="Min";
i18n.MINS="Minutes";
i18n.MODEL="Model";
i18n.MODE_OF_ARRVAL="Mode of Arrival";
i18n.MODIFIERS="Modifiers";
i18n.MOTHER="Mother";
i18n.MRN="MRN";
i18n.MULTIPLE="Multiple";
i18n.MUSCULOSKELETAL="Musculoskeletal";
i18n.NAME="Name";
i18n.NEBULIZED="NEB";
i18n.NEG="NEG";
i18n.NEURO="Neuro";
i18n.NEW="New";
i18n.NEXT_DOSE="Next Dose";
i18n.NEXT_DOSE_DT_TM="Next Dose";
i18n.NEXT_N_HOURS="Next {0} hours";
i18n.NORMALITY="Normality";
i18n.NORMAL_HIGH="Normal High";
i18n.NORMAL_LOW="Normal Low";
i18n.NORMAL_RANGE="Normal Range";
i18n.NOTE="Note";
i18n.NOTE_INDICATOR="* Indicates a day without a full 24 hour measurement period.";
i18n.NOTE_NAME="Note Name";
i18n.NOTE_TYPE="Note Type";
i18n.NOT_DONE="Not Done";
i18n.NOVEMBER=["Nov","November"];
i18n.NO_BILLING_FAVORITES="No Billing Favorites Found";
i18n.NO_DATA="No Data";
i18n.NO_GROWTH="No Growth";
i18n.NO_IMAGING_FAVORITES="No Imaging Favorites Found";
i18n.NO_KEY_PERSONS="No key persons found";
i18n.NO_KNOWN_HOME_MEDS="No known home medications exist for this patient.";
i18n.NO_LABS_FAVORITES="No Labs Favorites Found";
i18n.NO_LONGER_TAKING="No longer taking";
i18n.NO_MEDS_FAVORITES="No Meds Favorites Found";
i18n.NO_ORDERS_FOR_SIGNATURE="No Orders for Signature";
i18n.NO_OTHER_FAVORITES="No Other Favorites Found";
i18n.NO_PREV_RES="-- No Previous results found --";
i18n.NO_PREV_RES_LAST_24_HRS="-- No Previous results found in the last 24 hours --";
i18n.NO_RES="-- No Results found --";
i18n.NO_RESULTS="No Results";
i18n.NO_RESULTS_FOUND="No results found";
i18n.NO_RES_LAST_24_HRS="-- No Results found in the last 24 hours --";
i18n.NO_RES_LAST_LOOKBACK_HRS="--No Results in the look back period--";
i18n.NO_SUPPORT_CHARACTERS="Characters ^ and $ are currently not supported.";
i18n.NO_ZOOM_APPLIED="No Zoom Applied";
i18n.NUMBER="Number";
i18n.NUMBEROFDAYS="Number of Days";
i18n.NURSING_COMMUNICATION="Nursing Communication";
i18n.O2_FLOW_RATE="02 Flow Rate";
i18n.O2_THERAPY_TITRATION="O2 Therapy/Titration";
i18n.O2_THERAPY_TITRATION_DETAILS="O2 Therapy/Titration Details";
i18n.OCTOBER=["Oct","October"];
i18n.OF="of";
i18n.ONSET_DATE="Onset Date";
i18n.ORDERED="Ordered";
i18n.ORDERING_PHYSICIAN="Ordering Physician";
i18n.ORDERS="Orders";
i18n.ORDERS_FOR_SIGNATURE="Orders for Signature";
i18n.ORDER_DATE="Order Date/Time";
i18n.ORDER_DATE_TIME="Order Date/Time";
i18n.ORDER_DETAILS="Order Details";
i18n.ORDER_DISPLAY_LINE="Order Display Line";
i18n.ORDER_FAVORITE="Order Favorite";
i18n.ORDER_NAME="Order Name";
i18n.ORDER_NAME="Order";
i18n.ORDER_PARAMETERS="Order Parameters";
i18n.ORDER_PHYS="Ordered by";
i18n.ORDER_STATUS="Status";
i18n.ORDER_TYPE="Order Type";
i18n.ORIG_DT_TM="Original Order Date/Time";
i18n.OTHER="Other";
i18n.OTHER_DIAGNOSTICS="Other Diagnostics";
i18n.OTHER_RESULTS="Other Results";
i18n.OVERDUE="Overdue";
i18n.OVERDUE_TASKS="Overdue Tasks";
i18n.PAIN="Pain";
i18n.PAIN_SCORE="Pain Score";
i18n.PARA_GRAVIDA="Para Gravida";
i18n.PARENT_PART_TYPE="Legal Guardian Reltn";
i18n.PAST_PROBLEM="Problem";
i18n.PAST_RESOLVED_DATE="Resolved Date";
i18n.PATIENT_ASSESSMENT="Patient Assessment";
i18n.PATIENT_FAMILY_EDUCATION="Patient Family Education";
i18n.PATIENT_FAMILY_EDUCATION_DETAILS="Patient Family Education Details";
i18n.PEEP="PEEP";
i18n.PERCENTILE="Percentile";
i18n.PERSON_NAME_HEADER="Person Name";
i18n.PE_DATE="Date:";
i18n.PE_INSTRUCTION="Instruction:";
i18n.PE_PROVIDER="Provider:";
i18n.PHOTOTHERAPY="Phototherapy";
i18n.PHOTOTHERAPY_RESULT="Result";
i18n.PLANNED_DISCHARGE_DISP="Planned Discharge Disposition";
i18n.PLANNED_DISCHARGE_DT_TM="Planned Discharge Date";
i18n.PLAN_NAME="Plan Name";
i18n.POC_SUMMARY="Plan of Care Summary";
i18n.POS="POS";
i18n.PREGNANCY="Pregnancy";
i18n.PREGNANCY_SUMMARY="Pregnancy Summary";
i18n.PREGNANCY_DETAILS="Pregnancy Details";
i18n.PRESCRIBED="Prescribed";
i18n.PREVIOUS="Previous";
i18n.PREVIOUS_ABG_RESULTS="Previous ABG Results";
i18n.PREVIOUS_BLOOD_GAS_ARTERIAL="Previous Blood Gas Arterial";
i18n.PREVIOUS_BLOOD_GAS_ARTERIAL_RESULTS="Previous Blood Gas Arterial Results";
i18n.PRIMARY="Primary";
i18n.PRIMARY_RESULTS="Primary Results";
i18n.PRIM_PHYS="Primary Physician";
i18n.PRINT_REPORT="Print Report";
i18n.PRIORITY="Priority";
i18n.PRN="PRN";
i18n.PRN_48="PRN administered last 48 hours";
i18n.PRN_ALL="PRN All";
i18n.PRN_UNSCHEDULED="PRN/Unscheduled Available";
i18n.PROBLEM="Problem";
i18n.PROBLEMS="Problems";
i18n.PROBLEMS_DETAILS="Problems Details";
i18n.PROBLEMS_NAME="Problems Name";
i18n.PROCEDURE="Procedure";
i18n.PROCEDURE_DATE="Procedure Date";
i18n.PROCEDURE_DETAILS="Procedure Details";
i18n.PROCEDURE_NAME="Procedure Name";
i18n.PRODUCT="Product";
i18n.PROFSKILLEDSERVICESANTICIPATED="Prof Skilled Services Anticipated";
i18n.PROVIDER="Provider";
i18n.PSYCHOSOCIAL_FACTORS="Psychosocial Factors";
i18n.PULMONARY_SUMMARY="Pulmonary Summary";
i18n.QM_COMPLETE="Complete";
i18n.QM_CONDITION="Condition:";
i18n.QM_INCOMPLETE="Incomplete";
i18n.RCM_ACTUAL_DISCHARGE_DISPOSITION="Actual Discharge Disposition";
i18n.RCM_ADDENDUM="Addendum";
i18n.RCM_ADDENDUM_BY="Addendum by:";
i18n.RCM_ADDITIONAL_NOTES="Additional Notes";
i18n.RCM_ADDITIONAL_REVIEWER_NOTES="Additional Reviewer Notes";
i18n.RCM_ADD_ADDENDUM="Add Addendum";
i18n.RCM_ADMITTING_DX="Admitting DX";
i18n.RCM_ADMITTING_DX_DESC="Admitting DX Desc";
i18n.RCM_ADMIT_DATE="Adm Date";
i18n.RCM_ADMIT_SOURCE="Admit Source";
i18n.RCM_ADMIT_TO_BED_DT="Admit To Bed DT";
i18n.RCM_ADM_MIM="Adm Mim";
i18n.RCM_ADVANCE_DIR_COMPL="Advance Dir Compl";
i18n.RCM_ADVANCE_DIR_ON_FILE="Advance Dir On File";
i18n.RCM_AGE="Age";
i18n.RCM_ALTERNATE_DRG="Alternate DRG";
i18n.RCM_ATTENDING_PHYSICIAN="Attending Physician";
i18n.RCM_AVOIDABLE_DAYS="Avoidable Days";
i18n.RCM_BED="Bed";
i18n.RCM_CANCEL="Cancel";
i18n.RCM_CANCEL_MESSAGE="Are you sure you want to cancel?  All changes will be lost.";
i18n.RCM_CARE_GUIDELINE="Care Guideline";
i18n.RCM_CARE_MANAGEMENT="Care Management";
i18n.RCM_CLINICAL_REVIEW="Clinical Review";
i18n.RCM_CLINICAL_REVIEW_ENTRY="Clinical Review Entry";
i18n.RCM_CLINICAL_REVIEW_SUMMARY="Clinical Review Summary";
i18n.RCM_COLON=":";
i18n.RCM_COMPLETE="Complete";
i18n.RCM_CONTINUED_STAY="Continued Stay";
i18n.RCM_CRITERIA_MET="Criteria Met";
i18n.RCM_CURRENT_ENCOUNTER="Current encounter";
i18n.RCM_DATE="Date";
i18n.RCM_DATEPICKER_TEXT="Choose a Date";
i18n.RCM_DAY_REVIEWED="Day Reviewed";
i18n.RCM_DELETE="Delete Clinical Review";
i18n.RCM_DELETE_FAILED="Delete Failed";
i18n.RCM_DELETE_FAILED_MESSAGE="The selected clinical review has been changed by another user since opening.  The clinical review cannot be deleted.";
i18n.RCM_DELETE_MESSAGE="Are you sure you want to delete the selected clinical review?";
i18n.RCM_DELETE_REVIEW="Delete Review";
i18n.RCM_DENIED_DAYS="Denied Days";
i18n.RCM_DISCHARGE_ASSESSMENT_INFO="Discharge Assessment Information";
i18n.RCM_DISCHARGE_BARRIERS="Discharge Barriers";
i18n.RCM_DISCHARGE_DATE="Discharge Date";
i18n.RCM_DISCHARGE_DISPOSITION="Discharge Disposition";
i18n.RCM_DISCHARGE_FACILITY="Discharge Facility";
i18n.RCM_DISCHARGE_NEXT_ASSESSMENT_DT="Discharge Next Assessment DT";
i18n.RCM_DISCHARGE_OF_SERVICES="Discharge of Services";
i18n.RCM_DISCHARGE_PENDING="Discharge Pending";
i18n.RCM_DISCHARGE_SCREEN="Discharge Screen";
i18n.RCM_DISCHARGE_SCREENING="Discharge Screening";
i18n.RCM_DISCHARGE_SLOT="Discharge Slot";
i18n.RCM_DISPLAY="Display";
i18n.RCM_DNR="DNR";
i18n.RCM_DOB="DOB";
i18n.RCM_DONE="Done";
i18n.RCM_DRG_DESC="DRG Desc";
i18n.RCM_ELOS="ELOS";
i18n.RCM_ENCOUNTER_TYPE="Encounter Type";
i18n.RCM_ESTIMATED_DISCHARGE_DATE="Estimated Discharge Date";
i18n.RCM_FACILITY="Facility";
i18n.RCM_FAX_REVIEWS="Fax Reviews";
i18n.RCM_FC="F/C";
i18n.RCM_FIN="FIN";
i18n.RCM_FINAL="Final";
i18n.RCM_FINAL_AND_NEXT="Final & Next";
i18n.RCM_FINAL_DRG="Final DRG";
i18n.RCM_FINAL_DX="Final DX";
i18n.RCM_FINAL_PRIMARY_DX="Final Primary DX";
i18n.RCM_FINANCIAL_CLASS="Financial Class";
i18n.RCM_INCLUDE_CLOSED_UM_REVIEWS="Include Closed UM Reviews";
i18n.RCM_INTENSITY_OF_SERVICES="Intensity of Services";
i18n.RCM_LAST_ASSESSMENT_DATE="Last Assessment Date";
i18n.RCM_LAST_REVIEW_DATE="Last Review Date";
i18n.RCM_LEVEL_OF_SERVICE_SUBTYPE="Level Of Service Subtype";
i18n.RCM_LOS="LOS";
i18n.RCM_LOS_ELOS="LOS / ELOS:";
i18n.RCM_MARK_AS_FINAL="Mark as Final";
i18n.RCM_MED_SERVICE="Med Service";
i18n.RCM_MET="Met";
i18n.RCM_MODIFY="Modify";
i18n.RCM_MRN="MRN";
i18n.RCM_MY_RELATIONSHIP="My Relationship";
i18n.RCM_NAME="Name";
i18n.RCM_NEXT_CLINICAL_REVIEW="Next clinical review due:";
i18n.RCM_NEXT_CLINICAL_REVIEW_DATE="Next Clinical Review Date";
i18n.RCM_NEXT_CL_REVIEW="Next CL Review";
i18n.RCM_NEXT_REVIEW_NEEDED="Next Review Needed";
i18n.RCM_NEXT_SECTION="Next Section";
i18n.RCM_NO="No";
i18n.RCM_NOMENCLATUREID="Nomenclature Id:";
i18n.RCM_NOT_MET="Not Met";
i18n.RCM_OBS_END_DTTM="OBS End DT/TM";
i18n.RCM_OBS_START_DTTM="OBS Start DT/TM";
i18n.RCM_OK="OK";
i18n.RCM_OPEN_CLINICAL_REVIEW="Open Clinical Review";
i18n.RCM_OUTCOME="Outcome";
i18n.RCM_PATIENT_LIST="Patient List";
i18n.RCM_PAYER="Payer";
i18n.RCM_PENDING="Pending";
i18n.RCM_PLANNED_DISCHARGE_DATE="Planned Discharge Date";
i18n.RCM_PLANNED_DISCHARGE_DISPOSITION="Planned Discharge Disposition";
i18n.RCM_PREVIOUS_ADMISSION_INFO="Previous Admission Info";
i18n.RCM_PRIMARY_DX="Primary Dx";
i18n.RCM_PRIMARY_UR_NURSE="Primary UR Nurse";
i18n.RCM_REASON_FOR_REFERRAL="Reason for Referral";
i18n.RCM_REVIEW="Review";
i18n.RCM_REVIEWER="Reviewer";
i18n.RCM_REVIEW_CRITERIA="Review Criteria";
i18n.RCM_REVIEW_DATE="Review Date";
i18n.RCM_REVIEW_DUE="Review Due";
i18n.RCM_REVIEW_OUTCOME="Review Outcome";
i18n.RCM_REVIWED_BY="Reviewed By:";
i18n.RCM_REVIW_TYPE="Review Type";
i18n.RCM_ROOM="Room";
i18n.RCM_SAVE="Save";
i18n.RCM_SAVE_AND_NEW="Save & New";
i18n.RCM_SAVE_FAILED="Save Failed";
i18n.RCM_SAVE_FAILED_MESSAGE="The selected clinical review has been changed by another user since opening.  Your clinical review changes cannot be updated.";
i18n.RCM_SECONDARY_REVIEW="Secondary Review";
i18n.RCM_SECONDARY_REVIEW_NEEDED="Secondary Review Needed";
i18n.RCM_SEVERITY_OF_ILLNESS="Severity Of Illness";
i18n.RCM_SOURCE_IDENTIFIER="Source Identifier:";
i18n.RCM_SR_DATE="SR Date";
i18n.RCM_SR_STATUS="SR Status";
i18n.RCM_SSN="SSN";
i18n.RCM_STATUS="Status";
i18n.RCM_TYPE="Type";
i18n.RCM_UM_INFO="UM Information";
i18n.RCM_UM_STATUS="UM Status";
i18n.RCM_UNIT="Unit";
i18n.RCM_UNIT_DISCHARGE_FROM="Unit Discharge From";
i18n.RCM_UTILIZATION_MANAGEMENT="Utilization Management";
i18n.RCM_VISIT_INFO="Visit Information";
i18n.RCM_WORKING_DRG="Working DRG";
i18n.RCM_WORKING_DRG_DESC="Working DRG Desc";
i18n.RCM_YES="Yes";
i18n.REACTION="Reaction";
i18n.REASON="Reason";
i18n.REASON_FOR_VISIT="Reason for Visit";
i18n.RECOMMENDATION="Recommendation";
i18n.REG_DT_TM="Registration Date/Time";
i18n.RELATIONSHIP_HEADER="Relationship";
i18n.REMAINING="Remaining";
i18n.REMINDERS="Reminders";
i18n.RENDERING_DATA="Rendering";
i18n.REQUEST="Request";
i18n.REQUESTED_START="Requested Start";
i18n.RESET="Reset Zoom";
i18n.RESPIRATORY="Respiratory";
i18n.RESPIRATORY_DESCRIPTION="Respiratory Description";
i18n.RESPIRATORY_DESCRIPTION_DETAILS="Respiratory Description Details";
i18n.RESPIRATORY_DISCLAIMER="The displayed Arterial Blood Gas result(s) must be synchronized with the oxygen source FIO2, and/or oxygen flow rate that was being delivered to the patient at the time the sample was obtained.";
i18n.RESPONSIBLE_PROVIDER="Order Entered By";
i18n.RESPONSIBLE_PROVIDER_NAME="Responsible Provider";
i18n.RESP_MONITORING="Respiratory Monitoring";
i18n.RESP_RATE_TOTAL="Respiratory Rate Total";
i18n.RESTRAINT="Restraint";
i18n.RESTRAINTS="Restraints";
i18n.RESTRAINT_APPLIED="Restraint Applied";
i18n.RESTRAINT_DEATILS="Restraint Details";
i18n.RESTRAINT_LOCATION="Restraint Location";
i18n.RESTRAINT_REASON="Restraint Reason";
i18n.RESTRAINT_TYPE="Restraint Type";
i18n.RESULT="Result";
i18n.RESULTS_RETURNED="Result(s) Returned";
i18n.RESULTS_SINCE_ADMITTED="Results since time admitted";
i18n.RESULT_DETAILS="Result Details";
i18n.RESULT_DT_TM="Result Date/Time";
i18n.RESUSITATION_STATUS="Resuscitation Status";
i18n.RFV="Reason For Visit";
i18n.RFV="Reason For Visit";
i18n.ROOM_BED="Room/Bed";
i18n.SAVE_PREFERENCES="Save Preferences";
i18n.SAVE_PREF_SUCCESS="Preferences Successfully Saved";
i18n.SBP="SBP";
i18n.SCHEDULED="Scheduled";
i18n.SCHEDULED_INH="Scheduled Inhaled";
i18n.SEARCH_MODE="Search Mode";
i18n.SECONDARY="Secondary";
i18n.SECONDARY_PROCEDURE="Secondary Procedure";
i18n.SECONDARY_RESULTS="Secondary Results";
i18n.SEIZURE_PRECAUTIONS="Seizure Precautions";
i18n.SELECT="Select";
i18n.SELECTED_N_VISIT="{0} for the selected visit";
i18n.SELECTED_VISIT="Selected visit";
i18n.SEPTEMBER=["Sep","September"];
i18n.SERVICE="Service";
i18n.SETTINGS="Settings";
i18n.SETTINGS_DETAILS="Settings Details";
i18n.SET_RATE="Set Rate";
i18n.SET_TIDAL_VOLUME="Set Tidal Volume";
i18n.SEVERITY="Severity";
i18n.SEX="Sex";
i18n.SHOW_LEGEND="Show Legend";
i18n.SHOW_SECTION="Expand";
i18n.SHOW_UP="Show Up";
i18n.SIBRSUMMARYMPAGE="Interdisciplinary Rounding Summary";
i18n.SIGN="Sign";
i18n.SIGNATURE_LINE="Signature Line";
i18n.SIGN_FAILED="Sign Failed";
i18n.SIG_LINE="Sig. Line";
i18n.SINCE="Since";
i18n.SITUATION_BACKGROUND="Situation/Background";
i18n.SOCIAL_HISTORY_DETAILS="Social History Details";
i18n.SOCIAL_HISTORY_INFORMATION="Social History Information";
i18n.SOURCE="Source";
i18n.SOURCE_BODY_SITE="Source/Body Site";
i18n.SOURCE_SITE="Source/Site";
i18n.START="Start";
i18n.START_DT_TM="Start Date/Time";
i18n.STATUS="Status";
i18n.STATUS_DATE="Status Date/Time";
i18n.STICKY_NOTES="Sticky Notes";
i18n.STOP="Stop";
i18n.STOP_DT_TM="Stop Date/Time";
i18n.STOP_REASON="Stop Reason";
i18n.STUDY="Study";
i18n.SUBJECT="Subject";
i18n.SUBMIT_FOR_SIGNATURE="Submit for Signature";
i18n.SURGEON="Surgeon";
i18n.SURGERY_START="Surgery Start";
i18n.SURGERY_STOP="Surgery Stop";
i18n.SURGICAL_FREE_TEXT="Surgical Free Text";
i18n.SUSCEPTIBILITY="Susceptibility";
i18n.SUSC_HEADER="SC";
i18n.SUSPENDED="Suspended";
i18n.TABLE_GRAPH_DISCLAIMER="The last documented values appear in the table for the indicated time frame.";
i18n.TARGETED_DISCHARGE_DATE="Targeted Discharge Date";
i18n.TARGET_DISCH_DT_TM="Target Discharge Date Time";
i18n.TEMPERATURE="Temp";
i18n.TERTIARY="Tertiary";
i18n.TEXT="Text";
i18n.TOTAL_FL_BAL="Total Fluid Balance";
i18n.TOTAL_FL_INTAKE="Total Fluid Intake";
i18n.TOTAL_FL_OUTPUT="Total Fluid Output";
i18n.TOTAL_MINUTE_VOLUME="Total Minute Volume";
i18n.TOTAL_RESPIRATORY_RATE="Total Respiratory Rate";
i18n.TRANSFER_OF_CARE_PACKET="Transfer of Care Packet";
i18n.TRANSFUSIONS="Transfusions";
i18n.TRANSFUSION_DATE="Transfusion Date";
i18n.TRANSFUSION_EVENT_CD="Transfusion Event Code";
i18n.TRANSFUSION_RESULT_VAL="Result Value";
i18n.TRANSPLANT_DATE="Transplant Date";
i18n.TRANSPORATION_ARRANGED="Transportation Arranged";
i18n.TUBES_DRAINS="Tubes/Drains";
i18n.TWO_DAY_MAX="48 Hour Max";
i18n.TYPE="Type";
i18n.UNABLE_TO_OBTAIN_MED_HIST="Unable to obtain the medication history information for the selected visit.";
i18n.UNIT_OF_MEASURE="Unit of Measure";
i18n.UNKNOWN="Unknown";
i18n.UNSCHEDULED="Unscheduled";
i18n.USER_CUSTOMIZATION="User Customization";
i18n.USER_CUST_DISCLAIMER="Please consider screen resolution before selecting a three column view.";
i18n.USER_CUST_5_COL_DISCLAIMER="Please consider screen resolution before selecting a five column view.";
i18n.VENTILATOR_INFO="Ventilator Information";
i18n.VENTILATOR_MODE="Ventilator Mode";
i18n.VENT_ALARMS_ON="Vent Alarms On and Functional";
i18n.VENT_ID="Ventilator/Machine ID";
i18n.VENT_MODE="Ventilator Mode";
i18n.VENT_MODEL="Ventilator/Machine Model";
i18n.VISIT="Visit";
i18n.VISIT="Visit";
i18n.VISIT_DETAILS="Visit Details";
i18n.VISIT_REASON="Visit Reason";
i18n.VITALS_TABLE="Vitals Table";
i18n.WEANING_PARAMETERS="Weaning Parameters";
i18n.WEANING_PARAMETERS_DETAILS="Weaning Parameters Details";
i18n.WITHIN="within";
i18n.WITHIN_DAYS="{0} days";
i18n.WITHIN_HOURS="{0} hrs";
i18n.WITHIN_MINS="{0} mins";
i18n.WITHIN_MONTHS="{0} mos";
i18n.WITHIN_WEEKS="{0} wks";
i18n.WITHIN_YEARS="{0} yrs";
i18n.ZSCORE="Z-score";
if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.ADD="Add";
i18n.discernabu.ALL_N_VISITS="{0} for all visits";
i18n.discernabu.All_VISITS="All Visits";
i18n.discernabu.AS_OF_TIME="As of: {0}";
i18n.discernabu.CLEAR_PREFERENCES="Clear Preferences";
i18n.discernabu.COLLAPSE_ALL="Collapse All";
i18n.discernabu.COLOR_BROWN="Brown";
i18n.discernabu.COLOR_CERNER_BLUE="Cerner Blue";
i18n.discernabu.COLOR_DARK_GREEN="Dark Green";
i18n.discernabu.COLOR_DEFAULT="Default";
i18n.discernabu.COLOR_GREEN="Green";
i18n.discernabu.COLOR_GREY="Grey";
i18n.discernabu.COLOR_LIGHT_BLUE="Light Blue";
i18n.discernabu.COLOR_LOWLIGHT="Lowlight";
i18n.discernabu.COLOR_MAROON="Maroon";
i18n.discernabu.COLOR_NAVY="Navy";
i18n.discernabu.COLOR_ORANGE="Orange";
i18n.discernabu.COLOR_PINK="Pink";
i18n.discernabu.COLOR_PURPLE="Purple";
i18n.discernabu.COLOR_STANDARD="Standard";
i18n.discernabu.COLOR_YELLOW="Yellow";
i18n.discernabu.CUSTOMIZE="Customize";
i18n.discernabu.DAYNAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
i18n.discernabu.DESCRIPTION="Description";
i18n.discernabu.DIAGNOSIS="Diagnosis";
i18n.discernabu.DISCERN_ERROR="Discern Error";
i18n.discernabu.DISCLAIMER="This page is not a complete source of visit information.";
i18n.discernabu.DUPLICATE="This action would create a duplicate {name}. You are unable to add this {name}.";
i18n.discernabu.ERROR_OPERATION="Operation Name";
i18n.discernabu.ERROR_OPERATION_STATUS="Operation Status";
i18n.discernabu.ERROR_RETREIVING_DATA="Error retrieving results";
i18n.discernabu.ERROR_TARGET_OBJECT="Target Object Name";
i18n.discernabu.ERROR_TARGET_OBJECT_VALUE="Target Object Value";
i18n.discernabu.EXPAND_ALL="Expand All";
i18n.discernabu.FACILITY_DEFINED_VIEW="Facility defined view";
i18n.discernabu.FILTER_APPLIED="Filter applied";
i18n.discernabu.FILTER_LABEL="Filter: ";
i18n.discernabu.GO_TO_TAB="Go to {0} tab";
i18n.discernabu.HELP="Help";
i18n.discernabu.HIDE_SECTION="Collapse";
i18n.discernabu.ICU_DASHBOARD="Physiology View";
i18n.discernabu.JS_ERROR="JavaScript Error";
i18n.discernabu.LAST_N_DAYS="Last {0} days";
i18n.discernabu.LAST_N_HOURS="Last {0} hours";
i18n.discernabu.LAST_N_MONTHS="Last {0} months";
i18n.discernabu.LAST_N_WEEKS="Last {0} weeks";
i18n.discernabu.LAST_N_YEARS="Last {0} years";
i18n.discernabu.LOADING_DATA="Loading";
i18n.discernabu.MESSAGE="Message";
i18n.discernabu.MONTHNAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"];
i18n.discernabu.NAME="Name";
i18n.discernabu.NO_PRIVS="You do not have privileges to add the selected {name}";
i18n.discernabu.NO_RESULTS_FOUND="No results found";
i18n.discernabu.NO_VIEWS_DEFINED="No views have been defined for this page.  Please notify your database administrator.";
i18n.discernabu.NUMBER="Number";
i18n.discernabu.PROBLEM="Problem";
i18n.discernabu.RENDERING_DATA="Rendering";
i18n.discernabu.REQUEST="Request";
i18n.discernabu.RESET_ALL="Reset All";
i18n.discernabu.SAVE_PREFERENCES="Save Preferences";
i18n.discernabu.SELECTED_N_VISIT="{0} for the selected visit";
i18n.discernabu.SELECTED_VISIT="Selected visit";
i18n.discernabu.SET_AS_DEFAULT="Set As Default";
i18n.discernabu.SHOW_SECTION="Expand";
i18n.discernabu.STATUS="Status";
i18n.discernabu.USER_CUSTOMIZATION="User Customization";
i18n.discernabu.USER_CUST_DISCLAIMER="Please consider screen resolution before selecting a three column view.";
i18n.discernabu.USER_CUST_5_COL_DISCLAIMER="Please consider screen resolution before selecting a five column view.";
i18n.discernabu.VIEW_SELECTOR="View Selector";
i18n.discernabu.VIEW_NOT_SELECTED="A user defined view has not been selected.  Please select a view.";
i18n.discernabu.WITHIN_DAYS="{0} days";
i18n.discernabu.WITHIN_HOURS="{0} hrs";
i18n.discernabu.WITHIN_MINS="{0} mins";
i18n.discernabu.WITHIN_MONTHS="{0} mos";
i18n.discernabu.WITHIN_WEEKS="{0} wks";
i18n.discernabu.WITHIN_YEARS="{0} yrs";
i18n.discernabu.X_DAYS="{0} days";
i18n.discernabu.X_HOURS="{0} hours";
i18n.discernabu.X_MINUTES="{0} minutes";
i18n.discernabu.X_MONTHS="{0} months";
i18n.discernabu.X_WEEKS="{0} weeks";
i18n.discernabu.X_YEARS="{0} years";
i18n.discernabu.CODE_LEVEL="Your code level does not support this functionality. Please contact your system administrator.";
i18n.INTRAOP_COMM="Intraoperative Communication";
i18n.PREOP_COMM="Preoperative Communication";
i18n.POSTOP_COMM="Postoperative Communication";

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.orders_o1={STATUS:"Status",ORDERED:"Ordered",ORDER_NAME:"Order",ORDER_DETAILS:"Order Details",ORDER_DATE:"Order Date/Time",START_DT_TM:"Start Date/Time",ORDER_STATUS:"Status",ORDER_PHYS:"Ordered by",ORDER_COMMENTS:"Order Comments"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.patienteducation={DATE_TIME:"Date/Time",PE_INSTRUCTION:"Instruction",PE_DATE:"Date",PE_PROVIDER:"Provider"};

if(typeof i18n=="undefined"){var i18n={};
}if(typeof i18n.discernabu=="undefined"){i18n.discernabu={};
}i18n.discernabu.vitals_o1={BLOOD_PRESSURE:"BP",TEMPERATURE:"Temp",HEART_RATE:"HR",DEGC:"DegC",DEGF:"DegF",NORMAL_LOW:"Normal Low",NORMAL_HIGH:"Normal High",CRITICAL_LOW:"Critical Low",CRITICAL_HIGH:"Critical High",TWO_DAY_MAX:"48 Hour Max",LATEST:"Latest",TODAY:"Today",WITHIN:"within",PREVIOUS:"Previous",DATE_TIME:"Date/Time",ERROR_RETREIVING_DATA:"Error retrieving results",VALUE:"Value",LABORATORY_DETAILS:"Laboratory Details",LOADING_DATA:"Loading",STATUS:"Status",TWO_DAY_MIN:"48 Hour Min"};

function AutoSuggestControl(oComponent,oQueryHandler,oSelectionHandler,oSuggestionDisplayHandler){this.cur=0;
this.layer=null;
this.component=oComponent;
this.queryHandler=oQueryHandler;
this.selectionHandler=oSelectionHandler;
this.suggestionDisplayHandler=oSuggestionDisplayHandler;
this.textbox=_g(oComponent.getStyles().getNameSpace()+"ContentCtrl"+oComponent.getComponentId());
this.objArray="";
this.init();
}AutoSuggestControl.prototype.autosuggest=function(aSuggestions){this.layer.style.width=this.textbox.offsetWidth;
this.objArray=aSuggestions;
if(aSuggestions&&aSuggestions.length>0){this.showSuggestions(aSuggestions);
}else{this.hideSuggestions();
}};
AutoSuggestControl.prototype.createDropDown=function(){var oThis=this;
this.layer=document.createElement("div");
this.layer.className="suggestions";
this.layer.style.visibility="hidden";
this.layer.style.width=this.textbox.offsetWidth;
this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(oEvent){oEvent=oEvent||window.event;
oTarget=oEvent.target||oEvent.srcElement;
if(oEvent.type=="mousedown"){var index=AutoSuggestControl.prototype.indexOf(this,oTarget);
oThis.selectionHandler(oThis.objArray[index],oThis.textbox,oThis.component);
oThis.hideSuggestions();
}else{if(oEvent.type=="mouseover"){var index=AutoSuggestControl.prototype.indexOf(this,oTarget);
oThis.cur=index;
oThis.highlightSuggestion(oTarget);
}else{oThis.textbox.focus();
}}};
document.body.appendChild(this.layer);
};
AutoSuggestControl.prototype.getLeft=function(){var oNode=this.textbox;
var iLeft=0;
while(oNode&&oNode.tagName!="BODY"){iLeft+=oNode.offsetLeft;
oNode=oNode.offsetParent;
}return iLeft;
};
AutoSuggestControl.prototype.getTop=function(){var oNode=this.textbox;
var iTop=0;
while(oNode&&oNode.tagName!="BODY"){iTop+=oNode.offsetTop;
oNode=oNode.offsetParent;
}return iTop;
};
AutoSuggestControl.prototype.handleKeyDown=function(oEvent){if(this.layer.style.visibility!="hidden"){switch(oEvent.keyCode){case 38:this.previousSuggestion();
break;
case 40:this.nextSuggestion();
break;
case 13:this.selectionHandler(this.objArray[this.cur],this.textbox,this.component);
this.hideSuggestions();
break;
}}};
AutoSuggestControl.prototype.handleKeyUp=function(oEvent){var iKeyCode=oEvent.keyCode;
if(iKeyCode==8||iKeyCode==46){if(this.textbox.value.length>0){this.queryHandler(this,this.textbox,this.component);
}else{this.hideSuggestions();
}}else{if(iKeyCode<32||(iKeyCode>=33&&iKeyCode<46)||(iKeyCode>=112&&iKeyCode<=123)){}else{this.queryHandler(this,this.textbox,this.component);
}}};
AutoSuggestControl.prototype.hideSuggestions=function(){this.layer.style.visibility="hidden";
};
AutoSuggestControl.prototype.highlightSuggestion=function(oSuggestionNode){for(var i=0;
i<this.layer.childNodes.length;
i++){var oNode=this.layer.childNodes[i];
if(oNode==oSuggestionNode||oNode==oSuggestionNode.parentNode){oNode.className="current";
}else{if(oNode.className=="current"){oNode.className="";
}}}};
AutoSuggestControl.prototype.init=function(){var oThis=this;
this.textbox.onkeyup=function(oEvent){if(!oEvent){oEvent=window.event;
}oThis.handleKeyUp(oEvent);
};
this.textbox.onkeydown=function(oEvent){if(!oEvent){oEvent=window.event;
}oThis.handleKeyDown(oEvent);
};
this.textbox.onblur=function(){oThis.hideSuggestions();
};
this.createDropDown();
};
AutoSuggestControl.prototype.nextSuggestion=function(){var cSuggestionNodes=this.layer.childNodes;
if(cSuggestionNodes.length>0&&this.cur<cSuggestionNodes.length-1){var oNode=cSuggestionNodes[++this.cur];
this.highlightSuggestion(oNode);
}};
AutoSuggestControl.prototype.previousSuggestion=function(){var cSuggestionNodes=this.layer.childNodes;
if(cSuggestionNodes.length>0&&this.cur>0){var oNode=cSuggestionNodes[--this.cur];
this.highlightSuggestion(oNode);
}};
AutoSuggestControl.prototype.showSuggestions=function(aSuggestions){var oDiv=null;
this.layer.innerHTML="";
for(var i=0;
i<aSuggestions.length;
i++){oDiv=document.createElement("div");
if(i==0){oDiv.className="current";
}this.cur=0;
var domText=this.suggestionDisplayHandler(aSuggestions[i],this.textbox.value);
oDiv.innerHTML=domText;
oDiv.appendChild(document.createTextNode(""));
this.layer.appendChild(oDiv);
}this.layer.style.left=this.getLeft()+"px";
this.layer.style.top=(this.getTop()+this.textbox.offsetHeight)+"px";
this.layer.style.visibility="visible";
this.layer.style.position="absolute";
};
AutoSuggestControl.prototype.indexOf=function(parent,el){var nodeList=parent.childNodes;
for(var i=0;
i<nodeList.length;
i++){var oNode=nodeList[i];
if(oNode==el||oNode==el.parentNode){return i;
}}return -1;
};
AutoSuggestControl.prototype.highlight=function(value,term){return"<strong>"+value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(" ").join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),"</strong>$1<strong>")+"</strong>";
};

function BedrockMPage(categoryMean){this.mean=categoryMean;
BedrockMPage.method("getCategoryMean",function(){return this.mean;
});
}BedrockMPage.inherits(MPageView);
function BedrockMPageGroupValue(){m_sequence=0;
m_description="";
m_meaning="";
MPageGroupValue.method("getSequence",function(){return this.m_sequence;
});
MPageGroupValue.method("setSequence",function(value){this.m_sequence=value;
});
MPageGroupValue.method("getDescription",function(){return this.m_description;
});
MPageGroupValue.method("setDescription",function(value){this.m_description=value;
});
MPageGroupValue.method("getMeaning",function(){return this.m_meaning;
});
MPageGroupValue.method("setMeaning",function(value){this.m_meaning=value;
});
}BedrockMPageGroupValue.inherits(MPageGroupValue);
var MP_Bedrock=function(){return{LoadingPolicy:function(){var m_loadPageDetails=false;
var m_loadComponentBasic=false;
var m_loadComponentDetail=false;
var m_loadCustomizeView=false;
var m_categoryMean="";
var m_criterion=null;
this.setLoadPageDetails=function(value){m_loadPageDetails=value;
};
this.getLoadPageDetails=function(){return m_loadPageDetails;
};
this.setLoadComponentBasics=function(value){m_loadComponentBasic=value;
};
this.getLoadComponentBasics=function(){return m_loadComponentBasic;
};
this.setLoadComponentDetails=function(value){m_loadComponentDetail=value;
};
this.getLoadComponentDetails=function(){return m_loadComponentDetail;
};
this.setCategoryMean=function(value){m_categoryMean=value;
};
this.getCategoryMean=function(){return m_categoryMean;
};
this.setCriterion=function(value){m_criterion=value;
};
this.getCriterion=function(){return m_criterion;
};
this.setCustomizeView=function(value){m_loadCustomizeView=value;
};
this.getCustomizeView=function(){return m_loadCustomizeView;
};
},GetPageFromRec:function(recordData,loadingPolicy){var categoryMean=loadingPolicy.getCategoryMean();
for(var x=recordData.MPAGE.length;
x--;
){if(categoryMean.toUpperCase()===recordData.MPAGE[x].CATEGORY_MEAN.toUpperCase()){return(recordData.MPAGE[x]);
}}}};
}();
MP_Bedrock.MPage=function(){return{LoadBedrockMPage:function(loadingPolicy){var categoryMean=loadingPolicy.getCategoryMean();
var returnPage=new BedrockMPage(categoryMean);
var criterion=loadingPolicy.getCriterion();
criterion.category_mean=categoryMean;
returnPage.setCriterion(criterion);
returnPage.setCustomizeView(loadingPolicy.getCustomizeView());
if(m_bedrockMpage.MPAGE.length>0){MP_Util.LogDebug("Bedrock JSON: "+JSON.stringify(m_bedrockMpage));
var page=MP_Bedrock.GetPageFromRec(m_bedrockMpage,loadingPolicy);
if(!page){var cclParams=["^MINE^",criterion.provider_id+".0",criterion.position_cd+".0","^"+categoryMean+"^"];
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{m_bedrockMpage=JSON.parse(info.responseText).BR_MPAGE;
MP_Util.LogScriptCallInfo(null,this,"bedrock.js","LoadBedrockMPage");
}catch(error){MP_Util.LogJSError(err,null,"bedrock.js","LoadBedrockMPage");
}page=m_bedrockMpage.MPAGE[0];
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_VIEW_DATA_LOAD",false);
info.send(cclParams.join(","));
}var prefManager=MP_Core.AppUserPreferenceManager;
prefManager.Initialize(criterion,categoryMean);
if(page.USER_PREFS.PREF_STRING.length>0){prefManager.SetPreferences(page.USER_PREFS.PREF_STRING);
}returnPage.setPageId(page.BR_DATAMART_CATEGORY_ID);
var jsMPage=page.PARAMS;
var y=0;
for(y=0,yl=jsMPage.length;
y<yl;
y++){var curMPage=jsMPage[y];
var valMPage=curMPage.VALUES;
var pageSetPrefFunc=GetPageFilterFuncs(categoryMean);
pageSetPrefFunc(returnPage,curMPage.FILTER_MEAN,curMPage);
if(curMPage.FILTER_MEAN==="VIEWPOINT_LABEL"){for(var z=valMPage.length;
z--;
){var curVal=valMPage[z];
if(curVal.FREETEXT_DESC){returnPage.setName(curVal.FREETEXT_DESC);
}}}}var components=page.COMPONENT;
for(y=0,yl=components.length;
y<yl;
y++){var jsonComponent=components[y];
returnPage.addComponentId(jsonComponent.BR_DATAMART_REPORT_ID);
}}var loadComponentIndicator=(loadingPolicy.getLoadComponentBasics())?1:0;
if(loadComponentIndicator>0){var components=MP_Bedrock.MPage.Component.LoadBedrockComponents(loadingPolicy,returnPage.getComponentIds());
returnPage.setComponents(components);
}return returnPage;
}};
function BRPagePrefSetFuncCreation(filterMappings){var ExecuteBRPrefFunction=function(mPage,filterMean,brFilterValues){var bValue;
var execResult;
var filter;
var filterField;
var filterType;
var i;
var location;
var ret;
var setFuncName;
var sValue;
if(!filterMean||!brFilterValues){return;
}for(i=filterMappings.length;
i--;
){filter=filterMappings[i];
if(filter.m_filterMean.toUpperCase()===filterMean.toUpperCase()){setFuncName=filter.m_functionName;
filterType=filter.m_dataType;
filterField=filter.m_field;
break;
}}if(!setFuncName){return;
}else{switch(filterType.toUpperCase()){case"BOOLEAN":location="brFilterValues.VALUES[0]."+filterField;
sValue=eval(location);
bValue=(sValue==="0")?false:true;
strFunc="mPage."+setFuncName+"("+bValue+")";
ret=eval(strFunc);
break;
case"STRING":location="brFilterValues.VALUES[0]."+filterField;
sValue=eval(location);
strFunc="mPage."+setFuncName+"('"+sValue+"')";
ret=eval(strFunc);
break;
}}};
return ExecuteBRPrefFunction;
}function PageFilterMapping(filterMean,functionName,dataType,field){this.m_filterMean=filterMean;
this.m_functionName=functionName;
this.m_dataType=dataType;
this.m_field=field;
}function GetPageFilterFuncs(categoryMean){var pageFilterMaps=[];
if(categoryMean){switch(categoryMean.toUpperCase()){case"MP_AMB_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_DABU_STD":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_DC_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_ED_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_ICU_DASHBOARD":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_ICU_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_INPT_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_NC_ASSESS_V4":pageFilterMaps.push(new PageFilterMapping("NC_PT_BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_NC_REC_V4":pageFilterMaps.push(new PageFilterMapping("NC_PT_BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_NC_SIT_BACK_V4":pageFilterMaps.push(new PageFilterMapping("NC_PT_BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_ORTHO_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_PREG_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("PREG_PRINT","setPrintableReportName","String","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_REHAB_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_RT_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_INTRAOP_COMM_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_POSTOP_COMM_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_PREOP_COMM_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_SIBR_SUMMARY_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
pageFilterMaps.push(new PageFilterMapping("CHART_SEARCH","setChartSearchEnabled","Boolean","FREETEXT_DESC"));
break;
case"MP_COMMON_ORDERS_V4":pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
break;
default:pageFilterMaps.push(new PageFilterMapping("BANNER","setBannerEnabled","Boolean","FREETEXT_DESC"));
}return BRPagePrefSetFuncCreation(pageFilterMaps);
}}}();
MP_Bedrock.MPage.Component=function(){return{LoadBedrockComponents:function(loadingPolicy,compIdAr){if(compIdAr&&compIdAr!==null&&compIdAr.length>0){var ComponentType=null;
var returnAr=[];
var reportData=MP_Bedrock.GetPageFromRec(m_bedrockMpage,loadingPolicy);
var prefManager=MP_Core.AppUserPreferenceManager;
var criterion=loadingPolicy.getCriterion();
var isCustomizeView=loadingPolicy.getCustomizeView();
for(var x=reportData.COMPONENT.length;
x--;
){var jsonComponent=reportData.COMPONENT[x];
if(!isCustomizeView){ComponentType=getComponentByFilterMean(jsonComponent.FILTER_MEAN);
}if((ComponentType)||isCustomizeView){var jsComponentFunc=null;
var component=null;
if(isCustomizeView){component=new MPageComponent();
component.setCriterion(criterion);
component.setStyles(new ComponentStyle());
}else{component=new ComponentType(criterion);
}component.setCustomizeView(loadingPolicy.getCustomizeView());
component.setComponentId(jsonComponent.BR_DATAMART_FILTER_ID);
component.setReportId(jsonComponent.BR_DATAMART_REPORT_ID);
var userPrefComp=prefManager.GetComponentById(component.getComponentId());
if(userPrefComp&&userPrefComp!==null){component.setExpanded(userPrefComp.expanded);
component.setColumn(userPrefComp.col_seq);
component.setSequence(userPrefComp.row_seq);
component.setPageGroupSequence(userPrefComp.group_seq);
if(userPrefComp.lookbackunits){component.setLookbackUnits(userPrefComp.lookbackunits);
}else{component.setLookbackUnits(jsonComponent.LOOKBACKUNITS);
}if(userPrefComp.lookbacktypeflag){component.setLookbackUnitTypeFlag(userPrefComp.lookbacktypeflag);
}else{component.setLookbackUnitTypeFlag(jsonComponent.LOOKBACKTYPEFLAG);
}if(userPrefComp.grouperFilterLabel){component.setGrouperFilterLabel(userPrefComp.grouperFilterLabel);
}else{component.setGrouperFilterLabel("");
}if(userPrefComp.grouperFilterEventSets){component.setGrouperFilterEventSets(userPrefComp.grouperFilterEventSets);
}else{component.setGrouperFilterEventSets(null);
}if(userPrefComp.selectedTimeFrame){component.setSelectedTimeFrame(userPrefComp.selectedTimeFrame);
}else{component.setSelectedTimeFrame(null);
}if(userPrefComp.selectedDataGroup){component.setSelectedDataGroup(userPrefComp.selectedDataGroup);
}else{component.setSelectedDataGroup(null);
}}else{component.setExpanded(jsonComponent.EXPANDED);
component.setColumn(jsonComponent.COL_SEQ);
component.setSequence(jsonComponent.ROW_SEQ);
component.setPageGroupSequence(jsonComponent.GROUP_SEQ);
var style=component.getStyles();
if(style){var color=jsonComponent.THEME;
if(color&&color.length>0){style.setColor(color);
}}}component.setLabel(jsonComponent.LABEL);
component.setLink(jsonComponent.LINK);
component.setResultsDisplayEnabled(jsonComponent.TOTAL_RESULTS);
component.setXofYEnabled(jsonComponent.X_OF_Y);
component.setScrollNumber(jsonComponent.SCROLL_NUM);
component.setScrollingEnabled(jsonComponent.SCROLL_ENABLED);
if(component.getLookbackDays()===0){component.setLookbackDays(jsonComponent.LOOKBACK_DAYS);
}component.setPlusAddEnabled((jsonComponent.ISPLUSADD==1?true:false));
if(component.getLookbackUnits()===0){component.setLookbackUnits(jsonComponent.LOOKBACKUNITS);
}if(component.getLookbackUnitTypeFlag()===0){component.setLookbackUnitTypeFlag(jsonComponent.LOOKBACKTYPEFLAG);
}if(component.getBrLookbackUnits()===0){component.setBrLookbackUnits(jsonComponent.LOOKBACKUNITS);
}if(component.getBrLookbackUnitTypeFlag()===0){component.setBrLookbackUnitTypeFlag(jsonComponent.LOOKBACKTYPEFLAG);
}component.setDateFormat(jsonComponent.DATE_DISPLAY_FLAG);
if(component.getScope()===0){component.setScope(jsonComponent.SCOPE);
}var compSetPrefFunc=GetComponentFilterFuncs(component.getStyles().getNameSpace(),jsonComponent.REPORT_MEAN);
for(var y=0,yl=jsonComponent.FILTER.length;
y<yl;
y++){var filter=jsonComponent.FILTER[y];
switch(filter.FILTER_CATEGORY_MEAN){case"EVENT":var aValue=GetFilterValues(filter);
if(compSetPrefFunc){if(compSetPrefFunc(component,filter.FILTER_MEAN,aValue)){break;
}}var eGroup=new MPageEventCodeGroup();
for(var z=0,zl=aValue.length;
z<zl;
z++){eGroup.addEventCode(aValue[z].getId());
}eGroup.setGroupId(filter.BR_DATAMART_FILTER_ID);
eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"EVENT_SET":case"PRIM_EVENT_SET":var aValue=GetFilterValues(filter);
if(compSetPrefFunc){if(compSetPrefFunc(component,filter.FILTER_MEAN,aValue)){break;
}}var eGroup=new MPageEventSetGroup();
for(var z=0,zl=aValue.length;
z<zl;
z++){eGroup.addEventSet(aValue[z].getId());
}eGroup.setGroupId(filter.BR_DATAMART_FILTER_ID);
eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"LOOK_BACK":var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){var value=aValue[z];
var item=new MP_Core.MenuItem();
item.setName(value.getName());
item.setDescription(value.getDescription());
item.setMeaning(value.getMeaning());
var tempMeaning=item.getMeaning();
switch(tempMeaning){case"HOURS":item.setId(1);
break;
case"DAYS":item.setId(2);
break;
case"WEEKS":item.setId(3);
break;
case"MONTHS":item.setId(4);
break;
case"YEARS":item.setId(5);
break;
}component.addLookbackMenuItem(item);
}var defaultItem=new MP_Core.MenuItem();
defaultItem.setName("CODE_VALUE");
defaultItem.setDescription(component.getBrLookbackUnits());
defaultItem.setId(component.getBrLookbackUnitTypeFlag());
component.addLookbackMenuItem(defaultItem);
break;
case"PF_MULTI_SELECT":var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){var value=aValue[z];
var item=new MP_Core.MenuItem();
item.setName(value.getName());
item.setDescription(value.getDescription());
item.setId(value.getId());
component.addMenuItem(item);
}break;
case"CAT_TYPE_ASSIGN":var aValue=GetFilterValues(filter);
if(compSetPrefFunc){if(compSetPrefFunc(component,filter.FILTER_MEAN,aValue)){break;
}}var eGrouper=new MPageGrouper();
var eGroup=null;
var curSeq=-1;
for(var z=0,zl=aValue.length;
z<zl;
z++){var val=aValue[z];
if(val.getSequence()!=curSeq){curSeq=val.getSequence();
eGroup=new MPageCodeValueGroup();
eGroup.setSequence(curSeq);
eGrouper.addGroup(eGroup);
}eGroup.addCode(val.getId());
}component.addGroup(eGrouper);
break;
case"CE_GROUP":var groups=component.getGroups();
if(groups!=null){for(var z=0,zl=groups.length;
z<zl;
z++){var group=groups[z];
if(group.getSequence()==filter.FILTER_SEQ){var aValue=GetFilterValues(filter);
if(compSetPrefFunc){if(compSetPrefFunc(component,filter.FILTER_MEAN,aValue)){break;
}}var eGrouper=new MPageGrouper();
eGrouper.setGroupId(group.getGroupId());
eGrouper.setGroupName(group.getGroupName());
var eGroup=null;
var curSeq=-1;
for(var i=0,il=aValue.length;
i<il;
i++){var val=aValue[i];
if(val.getSequence()!=curSeq){curSeq=val.getSequence();
eGroup=new MPageEventCodeGroup();
eGroup.setSequence(curSeq);
eGrouper.addGroup(eGroup);
}var id=val.getId();
var desc=val.getDescription();
var name=val.getName();
if(id>0){eGroup.addEventCode(id);
}if(desc!=""){eGroup.setGroupName(desc);
}}groups[z]=eGrouper;
}}}break;
default:var aValue=GetFilterValues(filter);
if(compSetPrefFunc){if(compSetPrefFunc(component,filter.FILTER_MEAN,aValue)){break;
}}}}for(var y=0,yl=jsonComponent.FILTER.length;
y<yl;
y++){var filter=jsonComponent.FILTER[y];
switch(filter.FILTER_CATEGORY_MEAN){case"EVENT_SEQ":var groups=component.getGroups();
if(groups){for(var z=0,zl=groups.length;
z<zl;
z++){var group=groups[z];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventCodes(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
for(var a=0,bl=aValue.length;
a<bl;
a++){group.addEventCode(aValue[a].getId());
}}}}break;
case"EVENT_SET_SEQ":var groups=component.getGroups();
if(groups){for(var z=0,zl=groups.length;
z<zl;
z++){var group=groups[z];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventSets(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
var tempAr=[];
var tempMap=[];
var filterType="CODE_VALUE";
var isMultiValue=false;
for(var zz=0,zzl=aValue.length;
zz<zzl;
zz++){var val=aValue[zz];
tempAr.push(val.getId());
if(filterType!=val.getName()){isMultiValue=true;
}MP_Util.AddItemToMapArray(tempMap,val.getName(),val.getId());
}if(isMultiValue){var eGroup=new MPageSequenceGroup();
eGroup.setMultiValue(isMultiValue);
eGroup.setItems(tempAr);
eGroup.setMapItems(tempMap);
eGroup.setSequence(true);
eGroup.setGroupId(group.getGroupId());
eGroup.setGroupName(group.getGroupName());
groups[z]=eGroup;
}else{group.setEventSets(tempAr);
}}}}break;
default:var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
}}}}returnAr.push(component);
}}return returnAr;
}}};
function GetFilterValues(jsonFilter){var aReturn=[];
for(var x=0,xl=jsonFilter.VALUES.length;
x<xl;
x++){var jsonValue=jsonFilter.VALUES[x];
var value=new BedrockMPageGroupValue();
value.setId(jsonValue.PARENT_ENTITY_ID);
value.setName(jsonValue.PARENT_ENTITY_NAME);
value.setMeaning(jsonValue.CDF_MEANING);
value.setDescription(jsonValue.FREETEXT_DESC);
value.setSequence(jsonValue.GROUP_SEQ);
aReturn.push(value);
}return aReturn;
}function getComponentByFilterMean(filterMean){var fMEAN=filterMean.toUpperCase();
switch(fMEAN){case"ALLERGY":return AllergyComponent;
case"ANCIL_DOC":return DocumentComponent;
case"APNEA":return ABDComponent;
case"APPOINTMENTS":return AppointmentsComponent;
case"CLIN_DOC":return DocumentComponent;
case"CONSOL_PROBLEMS":return CvComponent;
case"CURR_STATUS":return CurStatusComponentO1;
case"CUSTOM_COMP_1":case"CUSTOM_COMP_2":case"CUSTOM_COMP_3":case"CUSTOM_COMP_4":case"CUSTOM_COMP_5":case"CUSTOM_COMP_6":case"CUSTOM_COMP_7":case"CUSTOM_COMP_8":case"CUSTOM_COMP_9":case"CUSTOM_COMP_10":case"CUSTOM_COMP_11":case"CUSTOM_COMP_12":case"CUSTOM_COMP_13":case"CUSTOM_COMP_14":case"CUSTOM_COMP_15":case"CUSTOM_COMP_16":case"CUSTOM_COMP_17":case"CUSTOM_COMP_18":case"CUSTOM_COMP_19":case"CUSTOM_COMP_20":return CustomComponent;
case"DC_ACTIVITIES":return ActivitiesComponent;
case"DC_CARE_MGMT":return DischargePlanningComponent;
case"DC_DIAGNOSIS":case"DIAGNOSIS":case"DX":return DiagnosesComponent;
case"DC_ORDER":return DischargeOrdersComponent;
case"DC_READINESS":return DischargeIndicatorComponent;
case"DC_RESULTS":return ResultsComponent;
case"DC_SOCIAL":return SocialComponent;
case"ED_TIMELINE":return TimelineComponent;
case"FAMILY_HX":return FamilyHistoryComponent;
case"FIM":return FunIndepMeasuresComponentO1;
case"FLAG_EVENTS":return FlaggedEventsComponent;
case"FLD_BAL":return IntakeOutputComponent;
case"FOLLOWUP":return FollowUpComponent;
case"GOALS":return GoalsComponentO1;
case"GRAPH":return RespTimelineComponent;
case"GRAPHS":return VSTimelineComponent;
case"GROWTH_CHART":return GrowthChartComponent;
case"HEALTH_MAINT":return HmiComponent;
case"HOME_MEDS":return HomeMedicationsComponent;
case"ICU_FLOWSHEET":return icuFlowsheetComponent;
case"IMMUNIZATIONS":return ImmunizationComponent;
case"INCOMPLETE_ORDERS":case"ORDERS":return OrdersComponent;
case"ORD_SEL_ADD_FAV_FOLDER":return OrderSelectionComponent;
case"INTER_TEAM":return InterTeamComponentO1;
case"LAB":return LaboratoryComponent;
case"LINES":return LinesTubesDrainsComponent;
case"MEDS":return MedicationsComponent;
case"MED_REC":return MedicationReconciliationComponent;
case"MICRO":return MicrobiologyComponent;
case"NC_DC_PLAN":return DischargePlanComponent;
case"NC_OVERDUE_TASKS":case"OVERDUE_TASKS":return TaskActivityComponent;
case"NC_PLAN":return PlanofCareComponent;
case"NC_PSYCHOSOC":return PsychosocialFactorsComponent;
case"NC_PT_ASSESS":return PatientAssessmentComponent;
case"NC_PT_BACKGROUND":return PatientBackgroundComponent;
case"NEW_DOC":return NewDocumentEntryComponent;
case"NEW_ORDERS":return NewOrderEntryComponent;
case"NOTES":return NotesRemindersComponent;
case"PAST_MED_HX":case"PAST_MHX":return PastMedicalHistoryComponent;
case"PATH":return PathologyComponent;
case"PAT_ED":case"PT_ED":return PatientFamilyEduSumComponent;
case"PRECAUTIONS":return PrecautionsComponentO1;
case"PREG_ASSESS":return PregAssessmentComponent;
case"PREG_ASSESS_2":return PregAssessment2Component;
case"PREG_BIRTH_PLAN":return BirthPlanComponent;
case"PREG_ED":return EducationAndCounselingComponent;
case"PREG_EDD_MAINT":return EDDMaintenanceComponent;
case"PREG_FETAL_MON":return FetalMonitoringComponent;
case"PREG_GENETIC_SCR":return GeneticScreeningComponent;
case"PREG_HX":return PregnancyHistoryComponent;
case"PREG_OVERVIEW":return PregnancyOverviewComponent;
case"PREG_RESULTS":return ResultTimelineComponent;
case"PROBLEM":return ProblemsComponent;
case"PROC_HX":return ProcedureComponent;
case"PT_INFO":return PatientInfoComponent;
case"QM":return QualityMeasuresComponent;
case"RAD":return DiagnosticsComponent;
case"RESP":return RespiratoryComponent;
case"RESP_ASSESS":return RespAssessmentsComponent;
case"RESP_TX":return RespTreatmentsComponent;
case"RESTRAINTS":return RestraintsComponent;
case"SIG_EVENTS":return SignificantEventO1Component;
case"SOCIAL_HX":return SocialHistoryComponent;
case"TREATMENTS":return TreatmentsComponentO1;
case"TRIAGE_DOCUMENT":return TriageDocComponent;
case"VENT_MON":return VentMonitoringComponent;
case"VISITS":return VisitsComponent;
case"VS":return VitalSignComponent;
case"WEIGHT":return WeightsComponent;
case"PROC_INFO":return ProceduralInfoComponent;
case"PERIOP_TRACK":return PeriopTrackComponent;
case"INTRAOP_SUMMARY":return IntraopSummaryComponent;
case"PREOP_CHECKLIST":return PreopChcklstComponent;
case"POSTOP_SUMMARY":return PostopSummaryComponent;
case"EP_DA":return DiscernAnalyticsComponent;
case"CLIN_TRIALS":return ClinicalTrialsComponent;
case"CHEMO_REVIEW":return ChemotherapyReviewComponent;
default:alert("Unknown filter mean: ["+fMEAN+"]");
}}function BRCompPrefSetFuncCreation(filterMappings){var ExecuteBRPrefFunction=function(component,filterMean,brFilterValues){var execResult;
var functionArgs=[];
var filter;
var filterField;
var filterType;
var functionCall;
var i;
var setFuncName;
if(!filterMean||!brFilterValues){return false;
}for(i=filterMappings.length;
i--;
){filter=filterMappings[i];
if(filter.m_filterMean.toUpperCase()===filterMean.toUpperCase()){setFuncName=filter.m_functionName;
filterType=filter.m_dataType;
filterField=filter.m_field;
break;
}}if(!setFuncName){return false;
}else{for(var x=brFilterValues.length;
x--;
){var val=brFilterValues[x];
switch(filterField.toUpperCase()){case"FREETEXT_DESC":functionArgs.push(val.getDescription());
break;
case"PARENT_ENTITY_ID":functionArgs.push(val.getId());
break;
default:break;
}}switch(filterType.toUpperCase()){case"ARRAY":functionCall="component."+setFuncName+"(["+functionArgs.join(",")+"])";
break;
case"STRING":functionCall="component."+setFuncName+"('"+functionArgs.join(",")+"')";
break;
case"NUMBER":functionCall="component."+setFuncName+"("+functionArgs.join(",")+")";
break;
case"BOOLEAN":var bVal=(functionArgs[0]=="1")?true:false;
functionCall="component."+setFuncName+"("+bVal+")";
break;
default:break;
}eval(functionCall);
return true;
}};
return ExecuteBRPrefFunction;
}function FilterMapping(filterMean,functionName,dataType,field){this.m_filterMean=filterMean;
this.m_functionName=functionName;
this.m_dataType=dataType;
this.m_field=field;
}function GetComponentFilterFuncs(nameSpace,reportMean){var compFilterMaps=[];
var custCompNum;
if(nameSpace){switch(nameSpace){case"abd":compFilterMaps.push(new FilterMapping("MP_ABD_PT_DAYS","setAgeDays","Number","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MP_ABD_APNEA","setApneaEventCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_APNEA_NOMEN","setApneaNomenIds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_BRADY","setBradyEventCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_BRADY_NOMEN","setBradyNomenIds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_DESAT","setDesatEventCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_DESAT_NOMEN","setDesatNomenIds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_O2_SAT","setO2SatCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_HR","setHRCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_SKIN_COLOR","setSkinColorCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_ACTIVITY","setActivityCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_POSITION","setPositionCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_STIMULATION","setStimulationCds","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MP_ABD_DURATION","setDurationCds","Array","PARENT_ENTITY_ID"));
break;
case"cm":compFilterMaps.push(new FilterMapping("DC_DC_PLAN_CE","setDischScreenPlan","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_DC_DISP_CE","setDischDisposition","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_TRANSP_ARR_CE","setDocTransArrangement","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_PROF_SKILL_ANT_CE","setProfSkillServices","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_DME_ANT_CE","setDurableMedEquipment","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_DME_COORD_CE","setDurableMedEquipmentCoordinated","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_PLAN_DC_DT_TM_CE","setPlannedDischDate","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_ADM_MIM_CE","setAdmissionMIMSigned","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DC_DSCH_MIM_CE","setDischMIMGiven","Array","PARENT_ENTITY_ID"));
break;
case"cv":compFilterMaps.push(new FilterMapping("DEFAULT_SEARCH_VOCAB","setDefaultSearchVocab","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VISIT_VOCAB","setVisitVocab","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ACTIVE_VOCAB","setActiveVocab","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ACTIVE_LABEL","setActiveLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("VISIT_LABEL","setVisitLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("HISTORICAL_LABEL","setHistoricalLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("CP_QUICK_ADD_TYPE_DX","setVisitAddType","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CP_QUICK_ADD_CLASS","setActiveAddClass","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CP_QUICK_ADD_TYPE_CONFIRM","setActiveAddType","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CP_QUICK_ADD_CLASS_DX","setVisitAddClass","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MODAL_DIALOG_IND","setModifyInd","Boolean","FREETEXT_DESC"));
break;
case"curstat":compFilterMaps.push(new FilterMapping("CS_ASSESSMENTS","setAssessmentEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_VITAL_MEASURE","setVitalMeasureEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_BOWEL_BLADDER","setBowelBladderEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_SKIN_ASSESS_TOL","setSkinAssessTolEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_ORTHOTICS_SCHED","setOrthonticsShedEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_ADL","setADLEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_IADL","setIADLEventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CS_COG_COMMUNICATE","setCogCommunicateEventSets","Array","PARENT_ENTITY_ID"));
break;
case"cust":custCompNum=reportMean.match(/[0-9]+$/);
if(custCompNum){compFilterMaps.push(new FilterMapping("CUSTOM_COMP_PRG_"+custCompNum[0],"setComponentNamespace","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("CUSTOM_COMP_OBJ_"+custCompNum[0],"setComponentOptionsObjectName","String","FREETEXT_DESC"));
}break;
case"da":compFilterMaps.push(new FilterMapping("EP_DA_TEXT","setCustTxt","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("EP_DA_PF","setFormId","String","PARENT_ENTITY_ID"));
break;
case"dishord":compFilterMaps.push(new FilterMapping("DC_ORDER_SELECT","setCatalogCodes","Array","PARENT_ENTITY_ID"));
break;
case"doc":compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP1_LABEL","setGrp1Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP1_ES","setGrp1EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP2_LABEL","setGrp2Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP2_ES","setGrp2EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP3_LABEL","setGrp3Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP3_ES","setGrp3EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP4_LABEL","setGrp4Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP4_ES","setGrp4EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP5_LABEL","setGrp5Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP5_ES","setGrp5EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP6_LABEL","setGrp6Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP6_ES","setGrp6EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP7_LABEL","setGrp7Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP7_ES","setGrp7EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP8_LABEL","setGrp8Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP8_ES","setGrp8EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP9_LABEL","setGrp9Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP9_ES","setGrp9EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP10_LABEL","setGrp10Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DOC_SPECIALTY_GRP10_ES","setGrp10EventSets","Array","PARENT_ENTITY_ID"));
break;
case"dx":compFilterMaps.push(new FilterMapping("DIAGNOSIS_TYPE","setDiagnosisType","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DX_QUICK_ADD_VOCAB","setDiagnosisVocab","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DX_QUICK_ADD_TYPE","setDiagnosisAddTypeCd","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DX_QUICK_ADD_CLASS_DX","setDiagnosisClassification","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("DX_QUICK_ADD_VOCAB_IND","setDiagnosisVocabInd","Number","FREETEXT_DESC"));
break;
case"edu":compFilterMaps.push(new FilterMapping("PREG_ED_PF","setEdCounselingPF","Array","PARENT_ENTITY_ID"));
break;
case"fim":compFilterMaps.push(new FilterMapping("TARGET_DC_DT","setAnticipatedDischargeDateDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ANTI_DISPOSITION","setAnticipatedDispositionDateDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PRIMARY_IMPAIR_CDS","setPrimaryImpairmentCodeDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_EAT","setEatingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_EAT_GOAL","setEatingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_GROOM","setGroomingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_GROOM_GOAL","setGroomingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BATH","setBathingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BATH_GOAL","setBathingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_UP_EXT_DRESS","setUpperExtremityDressingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_UP_EXT_DRESS_GOAL","setUpperExtremityDressingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOW_EXT_DRESS","setLowerExtremityDressingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOW_EXT_DRESS_GOAL","setLowerExtremityDressingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TOILET","setToiletingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TOILET_GOAL","setToiletingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BLAD_LEV_ASSIST","setBladderLevelofAssistanceDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BLAD_LEV_ASSIST_GOAL","setBladderLevelofAssistanceGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BLAD_ACC","setBladderAccidentsDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BLAD_ACC_4","setBladderAccidentsPast4DaysDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BOWEL_LEV_ASSIST","setBowelLevelofAssistanceDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BWL_LVL_ASSIST_GOAL","setBowelLevelofAssistanceGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BOWEL_ACC","setBowelAccidentsDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BOWEL_ACC_4","setBowelAccidentsPast4DaysDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BED_CHAIR_WHEEL","setBedChairWheelChairDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_BED_CHAIR_WHEEL_GOAL","setBedChairWheelChairGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TOILET_TRANS","setToiletTransferDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TOILET_TRANS_GOAL","setToiletTransferGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TUB_TRANS","setTubTransferDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_SHOWER_TRANS","setShowerTransferDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_TUB_SHOWER_GOAL","setTubShowerTransfergoaldocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_WALK","setLocomotionWalkDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_WALK_GOAL","setLocomotionWalkGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_WHEEL","setLocomotionWheelChairDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_WHEEL_GOAL","setLocomotionWheelChairGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_STAIR","setLocomotionStairDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_MOTOR_LOCO_STAIR_GOAL","setLocomotionStairGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_COMP","setComprehensionDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_COMP_GOAL","setComprehensionGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_EXPRESS","setExpressionDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_EXPRESS_GOAL","setExpressionGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_SOC_INTER","setSocialInteractionDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_SOC_INTER_GOAL","setSocialInteractionGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_PROB_SOLVE","setProblemSolvingDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_PROB_SOLVE_GOAL","setProblemSolvingGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_MEMORY","setMemoryDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("FIM_COG_MEMORY_GOAL","setMemoryGoalDocumented","Array","PARENT_ENTITY_ID"));
break;
case"goals":compFilterMaps.push(new FilterMapping("NURSE_GOAL_DOC","setNursingGoals","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("OT_STG_DOC","setOTShortTermGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("OT_LTG_DOC","setOTLongTermGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PT_STG_DOC","setPTShortTermGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PT_LTG_DOC","setPTLongTermGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("SLP_STG_DOC","setSLPShortTermGoalDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("SLP_LTG_DOC","setSLPLongTermGoalDocumented","Array","PARENT_ENTITY_ID"));
break;
case"hml":compFilterMaps.push(new FilterMapping("MEDS_MODS","setMedModInd","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DISCH_MED_REC_MOD","setMedRec","Boolean","FREETEXT_DESC"));
break;
case"icufs":compFilterMaps.push(new FilterMapping("VITALS_GRAPH_LABEL","setBPGraphTitle","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("VITALS_HEMO_LABEL","setVitalLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_LABEL","setLabLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("RESP_LABEL","setRespLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEURO_LABEL","setNeuroLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ENDO_LABEL","setEndoLabel","String","FREETEXT_DESC"));
break;
case"intm":compFilterMaps.push(new FilterMapping("TEAM_CONF_ORDER","setTeamConfOrder","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAST_TEAM_DISC","setLastTeamDiscussionDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BARRIERS_DC_DOC","setBarriersToDischargeDocumented","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PRIM_OT_NAME_DOC","setPrimaryOccupationalTherapists","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PRIM_PT_NAME_DOC","setPrimaryPhysicalTherapists","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PRIM_ST_NAME_DOC","setPrimarySpeechTherapists","Array","PARENT_ENTITY_ID"));
break;
case"io":compFilterMaps.push(new FilterMapping("OUTPUT_COUNT","setCounts","Array","PARENT_ENTITY_ID"));
break;
case"lab":compFilterMaps.push(new FilterMapping("LAB_PRIMARY_LABEL","setPrimaryLabel","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_RESULTS_IND","setShowTodayValue","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP1_LABEL","setGrp1Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP1_ES","setGrp1EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP2_LABEL","setGrp2Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP2_ES","setGrp2EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP3_LABEL","setGrp3Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP3_ES","setGrp3EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP4_LABEL","setGrp4Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP4_ES","setGrp4EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP5_LABEL","setGrp5Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP5_ES","setGrp5EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP6_LABEL","setGrp6Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP6_ES","setGrp6EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP7_LABEL","setGrp7Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP7_ES","setGrp7EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP8_LABEL","setGrp8Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP8_ES","setGrp8EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP9_LABEL","setGrp9Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP9_ES","setGrp9EventSets","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP10_LABEL","setGrp10Label","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("LAB_SPECIALTY_GRP10_ES","setGrp10EventSets","Array","PARENT_ENTITY_ID"));
break;
case"ld":compFilterMaps.push(new FilterMapping("LINES_ES","setLineCodes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("TUBES_DRAINS_ES","setTubeCodes","Array","PARENT_ENTITY_ID"));
break;
case"med":compFilterMaps.push(new FilterMapping("MEDS_SCHED","setScheduled","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_PRN","setPRN","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_DISC","setDiscontinued","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_ADM","setAdministered","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_SUS","setSuspended","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_CONT","setContinuous","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_ADM_LB_HRS","setAdministeredLookBkHrs","Number","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MEDS_DISC_LB_HRS","setDiscontinuedLookBkHr","Number","FREETEXT_DESC"));
break;
case"nde":compFilterMaps.push(new FilterMapping("NEW_DOC_IND","setDisplayEnabled","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_TITLE","setDocTitle","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_SECT_LABEL_1","setLabelOne","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_SECT_LABEL_2","setLabelTwo","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_SECT_LABEL_3","setLabelThree","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_SECT_LABEL_4","setLabelFour","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_DOC_CE","setDocEventCode","Number","PARENT_ENTITY_ID"));
break;
case"noe":compFilterMaps.push(new FilterMapping("ORD_SRCH_IND","setOrderSearchInd","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("NEW_ORD_ENTRY","setVenueType","Boolean","FREETEXT_DESC"));
break;
case"nr":compFilterMaps.push(new FilterMapping("STICKY_NOTE_TYPES","setStickyNoteTypeCodes","Array","PARENT_ENTITY_ID"));
break;
case"ord":compFilterMaps.push(new FilterMapping("INCOMPLETE_ORDERS_CAT_TYPE","setCatalogCodes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("INCOMPLETE_ORDERS_STATUS","setOrderStatuses","Array","PARENT_ENTITY_ID"));
break;
case"ordsel":compFilterMaps.push(new FilterMapping("ROOT_FAVORITE","setFavFolderId","Number","PARENT_ENTITY_ID"));
break;
case"pbg":compFilterMaps.push(new FilterMapping("NC_PAIN_SCR","setPainScores","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_ASSIST_DEV","setDevices","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_DIET_ORD","setDietOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_PT_ACT_ORD","setPatientActivityOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_RESUS_ORD","setResucitationOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_SEIZURE_ORD","setSeizureOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_ISOLATION_ORD","setIsolationOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_ADV_DIR","setAdvancedDirectives","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_PARA","setParas","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_GRAVIDA","setGravidas","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_FALL_PRECAUTIONS","setFallPrecautions","Array","PARENT_ENTITY_ID"));
break;
case"pc":compFilterMaps.push(new FilterMapping("NC_PLAN_STATUS","setPlanStatusCodes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NC_PLAN_CLASS","setPlanClassificationCodes","Array","PARENT_ENTITY_ID"));
break;
case"pl":compFilterMaps.push(new FilterMapping("PROB_QUICK_ADD_VOCAB","setProblemsVocab","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PROB_QUICK_ADD_TYPE","setProblemsAddTypeCd","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PROB_QUICK_ADD_CLASS","setProblemsClassification","Number","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PROB_QUICK_ADD_VOCAB_IND","setProblemsVocabInd","Number","FREETEXT_DESC"));
break;
case"pa":compFilterMaps.push(new FilterMapping("PREG_ANTEPARTUM_NOTE","setAntepartumNote","Array","PARENT_ENTITY_ID"));
break;
case"pa2":compFilterMaps.push(new FilterMapping("PREG_ANTEPARTUM_NOTE_2","setAntepartumNote2","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_ASSESS_2_IND","setDisplayEnabled","Boolean","FREETEXT_DESC"));
break;
case"pch":compFilterMaps.push(new FilterMapping("PREOP_LAST_FOOD_INTAKE","setLastFdIntake","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_LAST_FLD_INTAKE","setLastFlIntake","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_ANES_CONSENT","setAnesCnst","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_BLD_CONSENT","setBldCnst","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_SURG_CONSENT","setSurgCnst","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_ORDERS_CMPLT","setOrdrsCmplt","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_ECG_ORDERS","setEcgOrdrs","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_HCG_ORDERS","setHcgOrdrs","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_HX_PHYSICAL_REC","setHnP","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_SURG_PREP_VER","setSurgPrepVer","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_ALLERGY_BAND","setIdVerf","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_BLD_BAND","setBldBand","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_ID_BAND","setPrIdBand","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_SITE_VER_PT","setPrSiteVer","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_SITE_VER_RN","setPrSiteVerRN","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_SITE_VER_MD","setPrSiteVerMD","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_IMPLANT_AVAILABLE","setPrImplntAvail","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_BLD_AVAILABLE","setPrBldAvail","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_EQUIP_AVAILABLE","setPrEquipAvail","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_MD_WHO_VER_SITE","setWhoVerfSite","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREOP_RN_WHO_VER_SITE","setRNWhoVerfSite","Array","PARENT_ENTITY_ID"));
case"po":compFilterMaps.push(new FilterMapping("PREG_GRAVIDA","setGravida","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PARA","setPara","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PARA_ABORT","setParaAbort","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PARA_PREM","setParaPremature","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PARA_FT","setParaFullTerm","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_LIVE_CHILD_HX","setLiving","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_MULTI_BIRTH_HX","setMulitBirths","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_ECTOPIC_HX","setEctopic","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_SPON_ABORT_HX","setSpontAbort","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_IND_ABORT_HX","setInducedAbort","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PRE_WT","setPrePregWeight","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_HT","setHeight","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_LAST_DOC_HT_WT","setBMI","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_ABORH_TYPE","setABORhType","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_BLD_TYPE","setBloodType","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_RH_TYPE","setRhType","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_CURR_WT","setCurrentWeight","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_EPI_DEGREE","setEpiDegree","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_EPI_MIDLINE","setEpiMidline","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_EPI_MEDIO","setEpiMedio","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_EPI_PERF","setEpiPerformed","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_EPI_OTHER","setEpiOther","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PERI_INTACT","setPerineumIntact","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_CX_LAC","setCervicalLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PERINEIAL_LAC","setPerinealLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_PERIURETHRAL_LAC","setPeriurethralLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_SUPER_LAC","setSuperficialLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_VAG_LAC","setVaginalLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_LABIAL_LAC","setLabialLac","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_ANESTH_TYPE","setAnesthType","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_ANESTH_OB_TYPE","setAnesthOB","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_DT_TM_BIRTH","setBirthDtTm","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_GENDER","setGender","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_BIRTH_WT","setBirthWeight","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_NEO_OUTCOME","setNeoOutcome","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_NEO_COMP","setNeoComps","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_APGAR_1_MIN","setApgar1","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_APGAR_5_MIN","setApgar5","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_APGAR_10_MIN","setApgar10","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_FEED_TYPE_NB","setFeeding","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_DELIVERY_TYPE","setDeliveryType","Array","PARENT_ENTITY_ID"));
break;
case"pso":compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_EXPLANT","setImplantExplant","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_DESC","setImplantDesc","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_SERIAL_NBR","setImplantSerNbr","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_LOT_NBR","setImplantLotNbr","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_MANU","setImplantManu","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_CAT_NBR","setImplantCatNbr","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_SIZE","setImplantSize","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_EXP_DT","setImplantExpDt","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_SITE","setImplantSite","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_IMPLANT_QTY","setImplantQty","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_DRESS_COND","setDressCond","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_DRESS_DRAINAGE","setDressDrain","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_DRESS_DESC","setDressDesc","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_DRESS_CARE","setDressCare","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_DRESS_LOC","setDressLoc","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_PAIN_LOC","setPainLoc","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_PAIN_RATING","setPainRating","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_PAIN_SCALE","setPainScale","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_PAIN_QUAL","setPainQual","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("POSTOP_PAIN_INTERVENTIONS","setPainInterv","Array","PARENT_ENTITY_ID"));
break;
case"pt":compFilterMaps.push(new FilterMapping("CHIEF_COMP_CE","setChiefComplaint","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("RESUS_ORDER","setResusOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ADV_DIRECTIVE","setAdvancedDirectives","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("MODE_ARRIVAL_CE","setModeofArrival","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("NOTE_ES","setDocumentTypes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("TARGET_DC_DT","setEstimatedDischargeDate","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ENC_TYPE","setVisitTypeCodes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("REASON_IND","setRFVDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("PRIMARY_DR_IND","setPrimaryPhysDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ED_CONTACT_IND","setEmergencyContactsDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ADMIT_DR_IND","setAdmittingPhysDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("RM_IND","setRoomBedDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ATTEND_DR_IND","setAttendingPhysDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ADM_DT_IND","setAdmitDateDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("MED_SVC_IND","setMedicalServiceDisplay","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("DIET_ORD","setDietOrders","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ACTIVITY_ORD","setPatientActivityOrders","Array","PARENT_ENTITY_ID"));
break;
case"qm":compFilterMaps.push(new FilterMapping("PLAN_STATUS","setPlanStatusCodes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PLAN_CLASS","setPlanClassificationCodes","Array","PARENT_ENTITY_ID"));
break;
case"reh_prec":compFilterMaps.push(new FilterMapping("PRECAUTION_ORDERS","setOrders","Array","PARENT_ENTITY_ID"));
break;
case"resp-tmln":compFilterMaps.push(new FilterMapping("GRAPH_SEQ_1","setTimelineCds1","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_2","setTimelineCds2","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_3","setTimelineCds3","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_4","setTimelineCds4","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_5","setTimelineCds5","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_6","setTimelineCds6","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_7","setTimelineCds7","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_8","setTimelineCds8","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_9","setTimelineCds9","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_10","setTimelineCds10","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_11","setTimelineCds11","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_12","setTimelineCds12","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_13","setTimelineCds13","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_14","setTimelineCds14","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_SEQ_15","setTimelineCds15","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPH_DEFAULTS","setDefaultSelected","Array","PARENT_ENTITY_ID"));
break;
case"rt":compFilterMaps.push(new FilterMapping("PREG_TIMELINE_LAB","setResultLabs","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PREG_TIMELINE_US","setResultUltrasounds","Array","PARENT_ENTITY_ID"));
break;
case"se":compFilterMaps.push(new FilterMapping("FLAG_DATE_FORMAT_IND","setIsDateWithinInd","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("FLAG_COM_FACEUP_IND","setFaceupCommentsDisplayEnabled","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("EVENT_CODES_IST_IND","setISTEventCodesMappedInd","Boolean","FREETEXT_DESC"));
break;
case"seo2":compFilterMaps.push(new FilterMapping("SIG_EVENTS_SELECT_COND","setEventFilters","Array","PARENT_ENTITY_ID"));
break;
case"tl":compFilterMaps.push(new FilterMapping("ED_TIMELINE_IND","setDisplayEnabled","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("ED_LAB_RAD_CAT_TYPE","setLabRadCatalogTypes","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("ED_TIMELINE_ORDERS","setDocCatalogCds","Array","PARENT_ENTITY_ID"));
break;
case"tmln":compFilterMaps.push(new FilterMapping("GRAPHS_IND","setDisplayEnabled","Boolean","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("GRAPHS_SUB_CONTROLLER","setMasterGraphTitle","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("GRAPHS_SUB_VS","setVitalSignTitle","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_DEFAULTS","setDefaultSelected","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_1","setTimelineCds1","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_2","setTimelineCds2","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_3","setTimelineCds3","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_4","setTimelineCds4","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_5","setTimelineCds5","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_6","setTimelineCds6","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_7","setTimelineCds7","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_8","setTimelineCds8","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_9","setTimelineCds9","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("VS_GRAPH_SEQ_10","setTimelineCds10","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPHS_SUB_BP","setBloodPressureTitle","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_SYS_INVASIVE","setTimelineCds11","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_DIAS_INVASIVE","setTimelineCds12","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_SYS_NONINVASIVE","setTimelineCds13","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_DIAS_NONINVASIVE","setTimelineCds14","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_MAP_INVASIVE","setTimelineCds15","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("BP_GRAPH_MAP_CUFF","setTimelineCds16","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("GRAPHS_SUB_VS_TABLE","setTableGraphTitle","String","FREETEXT_DESC"));
break;
case"treat":compFilterMaps.push(new FilterMapping("OT_TREAT_DOC","setOTTreatments","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("PT_TREAT_DOC","setPTTreatments","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("SLP_TREAT_DOC","setSLPTreatments","Array","PARENT_ENTITY_ID"));
break;
case"vs":compFilterMaps.push(new FilterMapping("VS_RESULTS_IND","setShowTodayValue","Boolean","FREETEXT_DESC"));
break;
case"wm":compFilterMaps.push(new FilterMapping("WT_RESULTS_IND","setShowTodayValue","Boolean","FREETEXT_DESC"));
break;
case"ct":compFilterMaps.push(new FilterMapping("CLIN_TRIAL_THERAPEUTIC","setTherapeuticInd","String","FREETEXT_DESC"));
break;
case"ctr":compFilterMaps.push(new FilterMapping("CHEMO_RVW_PLAN_CLASS","setPowerPlanClasses","Array","PARENT_ENTITY_ID"));
compFilterMaps.push(new FilterMapping("CURRENT_SCROLL_IND","setCurrentScrollInd","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("CURRENT_SCROLL_ROWS","setCurrentScrollNum","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("HIST_LOOK_BACK","setHistoricalLookback","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("HIST_EXP_COLLAPSE_IND","setHistoricalOpen","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("HIST_SCROLL_IND","setHistoricalScrollInd","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("HIST_SCROLL_ROWS","setHistoricalScrollNum","String","FREETEXT_DESC"));
compFilterMaps.push(new FilterMapping("RESPONSE_TREATMENT_IND","setResponseInd","String","FREETEXT_DESC"));
break;
}return BRCompPrefSetFuncCreation(compFilterMaps);
}}}();

/*Listen for a ctrl + \ key combination and activate logging once pressed*/
document.onkeypress = function(evt){
	if (!evt) {
        evt = window.event;
    }

	if(evt.ctrlKey==1 && evt.keyCode == 28){
		log.activateLogging();
	}
};

/*
	Blackbird - Open Source JavaScript Logging Utility
	Author: G Scott Olson
	Web: http://blackbirdjs.googlecode.com/
	     http://www.gscottolson.com/blackbirdjs/
	Version: 1.0

	The MIT License - Copyright (c) 2008 Blackbird Project
*/
( function() {
	var NAMESPACE = 'log';
	var IE6_POSITION_FIXED = true; // enable IE6 {position:fixed}
	
	var bbird;
	var outputList;
	var cache = [];
	var loggingActive;
	var state = getState();
	var classes = {};
	var profiler = {};
	var IDs = {
		blackbird: 'blackbird',
		checkbox: 'bbVis',
		filters: 'bbFilters',
		controls: 'bbControls',
		size: 'bbSize'
	}
	var messageTypes = { //order of these properties imply render order of filter controls
		debug: true,
		info: true,
		warn: true,
		error: true,
		profile: true
	};
	
	function isLoggingActive(){
		return (state.active || loggingActive) ? true : false;
	}
	
	function generateMarkup() { //build markup
		var spans = [];
		for ( type in messageTypes ) {
			spans.push( [ '<span class="', type, '" type="', type, '"></span>'].join( '' ) );
		}

		var newNode = document.createElement( 'DIV' );
		newNode.id = IDs.blackbird;
		newNode.style.display = 'none';
		newNode.innerHTML = [
			'<div class="header">',
				'<div class="left">',
					'<div id="', IDs.filters, '" class="filters" title="click to filter by message type">', spans.join( '' ), '</div>',
				'</div>',
				'<div class="right">',
					'<div id="', IDs.controls, '" class="controls">',
						'<span id="', IDs.size ,'" title="contract" op="resize"></span>',
						'<span class="clear" title="clear" op="clear"></span>',
						'<span class="close" title="close" op="close"></span>',
					'</div>',
				'</div>',
			'</div>',
			'<div class="main">',
				'<div class="left"></div><div class="mainBody">',
					'<ol>', cache.join( '' ), '</ol>',
				'</div><div class="right"></div>',
			'</div>'/*,
			'<div class="footer">',
				'<div class="left"><label for="', IDs.checkbox, '"><input type="checkbox" id="', IDs.checkbox, '" />Visible on page load</label></div>',
				'<div class="right"></div>',
			'</div>'*/
		].join( '' );
		return newNode;
	}

	function backgroundImage() { //(IE6 only) change <BODY> tag's background to resolve {position:fixed} support
		var bodyTag = document.getElementsByTagName( 'BODY' )[ 0 ];
		
		if ( bodyTag.currentStyle && IE6_POSITION_FIXED ) {
			if (bodyTag.currentStyle.backgroundImage == 'none' ) {
				bodyTag.style.backgroundImage = 'url(about:blank)';
			}
			if (bodyTag.currentStyle.backgroundAttachment == 'scroll' ) {
				bodyTag.style.backgroundAttachment = 'fixed';
			}
		}
	}

	function addMessage( type, content ) { //adds a message to the output list
		content = ( content.constructor == Array ) ? content.join( '' ) : content;
		if ( outputList ) {
			var newMsg = document.createElement( 'LI' );
			newMsg.className = type;
			newMsg.innerHTML = [ '<span class="icon"></span>', content ].join( '' );
			outputList.appendChild( newMsg );
			scrollToBottom();
		} else {
			cache.push( [ '<li class="', type, '"><span class="icon"></span>', content, '</li>' ].join( '' ) );
		}
	}
	
	function clear() { //clear list output
		outputList.innerHTML = '';
	}
	
	function clickControl( evt ) {
		if ( !evt ) evt = window.event;
		var el = ( evt.target ) ? evt.target : evt.srcElement;

		if ( el.tagName == 'SPAN' ) {
			switch ( el.getAttributeNode( 'op' ).nodeValue ) {
				case 'resize': resize(); break;
				case 'clear':  clear();  break;
				case 'close':  hide();   break;
			}
		}
	}
	
	function clickFilter( evt ) { //show/hide a specific message type
		if ( !evt ) evt = window.event;
		var span = ( evt.target ) ? evt.target : evt.srcElement;

		if ( span && span.tagName == 'SPAN' ) {

			var type = span.getAttributeNode( 'type' ).nodeValue;

			if ( evt.altKey ) {
				var filters = document.getElementById( IDs.filters ).getElementsByTagName( 'SPAN' );

				var active = 0;
				for ( entry in messageTypes ) {
					if ( messageTypes[ entry ] ) active++;
				}
				var oneActiveFilter = ( active == 1 && messageTypes[ type ] );

				for ( var i = 0; filters[ i ]; i++ ) {
					var spanType = filters[ i ].getAttributeNode( 'type' ).nodeValue;

					filters[ i ].className = ( oneActiveFilter || ( spanType == type ) ) ? spanType : spanType + 'Disabled';
					messageTypes[ spanType ] = oneActiveFilter || ( spanType == type );
				}
			}
			else {
				messageTypes[ type ] = ! messageTypes[ type ];
				span.className = ( messageTypes[ type ] ) ? type : type + 'Disabled';
			}

			//build outputList's class from messageTypes object
			var disabledTypes = [];
			for ( type in messageTypes ) {
				if ( ! messageTypes[ type ] ) disabledTypes.push( type );
			}
			disabledTypes.push( '' );
			outputList.className = disabledTypes.join( 'Hidden ' );

			scrollToBottom();
		}
	}

	function clickVis( evt ) {
		if ( !evt ) evt = window.event;
		var el = ( evt.target ) ? evt.target : evt.srcElement;

		state.load = el.checked;
		setState();
	}
	
	
	function scrollToBottom() { //scroll list output to the bottom
		outputList.scrollTop = outputList.scrollHeight;
	}
	
	function isVisible() { //determine the visibility
		return ( bbird.style.display == 'block' );
	}

	function hide() { 
	  bbird.style.display = 'none';
	}
			
	function show() {
		var body = document.getElementsByTagName( 'BODY' )[ 0 ];
		body.removeChild( bbird );
		body.appendChild( bbird );
		bbird.style.display = 'block';
	}
	
	//sets the position
	function reposition( position ) {
		if ( position === undefined || position == null ) {
			position = ( state && state.pos === null ) ? 1 : ( state.pos + 1 ) % 4; //set to initial position ('topRight') or move to next position
		}
				
		switch ( position ) {
			case 0: classes[ 0 ] = 'bbTopLeft'; break;
			case 1: classes[ 0 ] = 'bbTopRight'; break;
			case 2: classes[ 0 ] = 'bbBottomLeft'; break;
			case 3: classes[ 0 ] = 'bbBottomRight'; break;
		}
		state.pos = position;
		setState();
	}

	function resize( size ) {
		if ( size === undefined || size === null ) {
			size = ( state && state.size == null ) ? 1 : ( state.size + 1 ) % 2;
	  	}

		classes[ 1 ] = ( size === 0 ) ? 'bbSmall' : 'bbLarge'

		var span = document.getElementById( IDs.size );
		span.title = ( size === 1 ) ? 'small' : 'large';
		span.className = span.title;	  

		state.size = size;
		setState();
		scrollToBottom();
	}

	function setLogging(){
		state.active = true;
		state.load = true;
		state.size = 1;
		setState();
	}
	
	function setState() {
		var props = [];
		for ( entry in state ) {
			var value = ( state[ entry ] && state[ entry ].constructor === String ) ? '"' + state[ entry ] + '"' : state[ entry ]; 
			props.push( entry + ':' + value );
		}
		props = props.join( ',' );
		
		var expiration = new Date();
		expiration.setDate( expiration.getDate() + 14 );
		document.cookie = [ 'blackbird={', props, '};'].join( '' );

		var newClass = [];
		for ( word in classes ) {
			newClass.push( classes[ word ] );
		}
		bbird.className = newClass.join( ' ' );
	}
	
	function getState() {
		var re = new RegExp( /blackbird=({[^;]+})(;|\b|$)/ );
		var match = re.exec( document.cookie );
		return ( match && match[ 1 ] ) ? eval( '(' + match[ 1 ] + ')' ) : { pos:null, size:null, load:null, active:null };
	}
	
	//event handler for 'keyup' event for window
	function readKey( evt ) {
		if ( !evt ) evt = window.event;
		var code = 113; //F2 key
					
		if ( evt && evt.keyCode == code ) {
					
			var visible = isVisible();
					
			if ( visible && evt.shiftKey && evt.altKey ) clear();
			else if	 (visible && evt.shiftKey ) reposition();
			else if ( !evt.shiftKey && !evt.altKey ) {
			  if(isLoggingActive()){
			    ( visible ) ? hide() : show();
			  }
			}
		}
	}

	//event management ( thanks John Resig )
	function addEvent( obj, type, fn ) {
		var obj = ( obj.constructor === String ) ? document.getElementById( obj ) : obj;
		if ( obj.attachEvent ) {
			obj[ 'e' + type + fn ] = fn;
			obj[ type + fn ] = function(){ obj[ 'e' + type + fn ]( window.event ) };
			obj.attachEvent( 'on' + type, obj[ type + fn ] );
		} else obj.addEventListener( type, fn, false );
	}
	function removeEvent( obj, type, fn ) {
		var obj = ( obj.constructor === String ) ? document.getElementById( obj ) : obj;
		if ( obj.detachEvent ) {
			obj.detachEvent( 'on' + type, obj[ type + fn ] );
			obj[ type + fn ] = null;
	  } else obj.removeEventListener( type, fn, false );
	}

	window[ NAMESPACE ] = {
		toggle:
			function() { if(isLoggingActive()){( isVisible() ) ? hide() : show(); }},
		resize:
			function() { resize(); },
		clear:
			function() { clear(); },
		move:
			function() { reposition(); },
		debug: 
			function( msg ) { if(isLoggingActive()){addMessage( 'debug', msg ); }},
		warn:
			function( msg ) { if(isLoggingActive()){addMessage( 'warn', msg ); }},
		info:
			function( msg ) { if(isLoggingActive()){addMessage( 'info', msg ); }},
		error: 
			function( msg ) { if(isLoggingActive()){addMessage( 'error', msg ); }},
		activateLogging:
			function(){
				//Set the state.active to true
				setLogging();
			},
		profile: 
			function( label ) {
				var currentTime = new Date(); //record the current time when profile() is executed
				
				if ( label == undefined || label == '' ) {
					addMessage( 'error', '<b>ERROR:</b> Please specify a label for your profile statement' );
				}
				else if ( profiler[ label ] ) {
					addMessage( 'profile', [ label, ': ', currentTime - profiler[ label ],	'ms' ].join( '' ) );
					delete profiler[ label ];
				}
				else {
					profiler[ label ] = currentTime;
					addMessage( 'profile', label );
				}
				return currentTime;
			}
	}

	addEvent( window, 'load', 
		/* initialize Blackbird when the page loads */
		function() {
			var body = document.getElementsByTagName( 'BODY' )[ 0 ];
			bbird = body.appendChild( generateMarkup() );
			outputList = bbird.getElementsByTagName( 'OL' )[ 0 ];
		
			backgroundImage();
		
			//add events
			//addEvent( IDs.checkbox, 'click', clickVis );
			addEvent( IDs.filters, 'click', clickFilter );
			addEvent( IDs.controls, 'click', clickControl );
			addEvent( document, 'keyup', readKey);

			resize( state.size );
			reposition( state.pos );
			if ( state.load ) {
				show();
				//document.getElementById( IDs.checkbox ).checked = true; 
			}

			scrollToBottom();

			window[ NAMESPACE ].init = function() {
				show();
				window[ NAMESPACE ].error( [ '<b>', NAMESPACE, '</b> can only be initialized once' ] );
			}

			addEvent( window, 'unload', function() {
				//removeEvent( IDs.checkbox, 'click', clickVis );
				removeEvent( IDs.filters, 'click', clickFilter );
				removeEvent( IDs.controls, 'click', clickControl );
				removeEvent( document, 'keyup', readKey );
			});
			
			if(state.active){
				//Prevent logging from occuring next reload
				loggingActive = true;
				state.active = false;
				state.load = false;
				state.size = 1;
				setState();
			}
		});
})();
mp_formatter={};
mp_formatter.Locale=function(properties){this._className="mp_formatter.Locale";
this._parseList=function(names,expectedItems){var array=[];
if(names===null){throw"Names not defined";
}else{if(typeof names=="object"){array=names;
}else{if(typeof names=="string"){array=names.split(";",expectedItems);
for(var i=0;
i<array.length;
i++){if(array[i][0]=='"'&&array[i][array[i].length-1]=='"'){array[i]=array[i].slice(1,-1);
}else{throw"Missing double quotes";
}}}else{throw"Names must be an array or a string";
}}}if(array.length!=expectedItems){throw"Expected "+expectedItems+" items, got "+array.length;
}return array;
};
this._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return formatString;
}else{throw"Empty or no string";
}};
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing locale properties";
}if(typeof properties.decimal_point!="string"){throw"Error: Invalid/missing decimal_point property";
}this.decimal_point=properties.decimal_point;
if(typeof properties.thousands_sep!="string"){throw"Error: Invalid/missing thousands_sep property";
}this.thousands_sep=properties.thousands_sep;
if(typeof properties.grouping!="string"){throw"Error: Invalid/missing grouping property";
}this.grouping=properties.grouping;
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing time locale properties";
}try{this.time24hr=this._validateFormatString(properties.time24hr);
}catch(error){throw"Error: Invalid time24hr property: "+error;
}try{this.time24hrnosec=this._validateFormatString(properties.time24hrnosec);
}catch(error){throw"Error: Invalid time24hrnosec property: "+error;
}try{this.shortdate2yr=this._validateFormatString(properties.shortdate2yr);
}catch(error){throw"Error: Invalid shortdate2yr property: "+error;
}try{this.fulldate4yr=this._validateFormatString(properties.fulldate4yr);
}catch(error){throw"Error: Invalid fulldate4yr property: "+error;
}try{this.fulldate2yr=this._validateFormatString(properties.fulldate2yr);
}catch(error){throw"Error: Invalid fulldate2yr property: "+error;
}try{this.fullmonth4yrnodate=this._validateFormatString(properties.fullmonth4yrnodate);
}catch(error){throw"Error: Invalid fullmonth4yrnodate property: "+error;
}try{this.full4yr=this._validateFormatString(properties.full4yr);
}catch(error){throw"Error: Invalid full4yr property: "+error;
}try{this.fulldatetime2yr=this._validateFormatString(properties.fulldatetime2yr);
}catch(error){throw"Error: Invalid fulldatetime2yr property: "+error;
}try{this.fulldatetime4yr=this._validateFormatString(properties.fulldatetime4yr);
}catch(error){throw"Error: Invalid fulldatetime4yr property: "+error;
}try{this.fulldatetimenoyr=this._validateFormatString(properties.fulldatetimenoyr);
}catch(error){throw"Error: Invalid fulldatetimenoyr property: "+error;
}};
mp_formatter._getPrecision=function(optionsString){if(typeof optionsString!="string"){return -1;
}var m=optionsString.match(/\.(\d)/);
if(m){return parseInt(m[1],10);
}else{return -1;
}};
mp_formatter._isNumber=function(arg){if(typeof arg=="number"){return true;
}if(typeof arg!="string"){return false;
}var s=arg+"";
return(/^-?(\d+|\d*\.\d+)$/).test(s);
};
mp_formatter._isDate=function(arg){if(arg.getDate){return true;
}return false;
};
mp_formatter._trim=function(str){var whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";
for(var i=0;
i<str.length;
i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);
break;
}}for(i=str.length-1;
i>=0;
i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);
break;
}}return whitespace.indexOf(str.charAt(0))===-1?str:"";
};
mp_formatter._splitNumber=function(amount){if(typeof amount=="number"){amount=amount+"";
}var obj={};
if(amount.charAt(0)=="-"){amount=amount.substring(1);
}var amountParts=amount.split(".");
if(!amountParts[1]){amountParts[1]="";
}obj.integer=amountParts[0];
obj.fraction=amountParts[1];
return obj;
};
mp_formatter._formatIntegerPart=function(intPart,grouping,thousandsSep){if(thousandsSep===""||grouping=="-1"){return intPart;
}var groupSizes=grouping.split(";");
var out="";
var pos=intPart.length;
var size;
while(pos>0){if(groupSizes.length>0){size=parseInt(groupSizes.shift(),10);
}if(isNaN(size)){throw"Error: Invalid grouping";
}if(size==-1){out=intPart.substring(0,pos)+out;
break;
}pos-=size;
if(pos<1){out=intPart.substring(0,pos+size)+out;
break;
}out=thousandsSep+intPart.substring(pos,pos+size)+out;
}return out;
};
mp_formatter._formatFractionPart=function(fracPart,precision){for(var i=0;
fracPart.length<precision;
i++){fracPart=fracPart+"0";
}return fracPart;
};
mp_formatter._hasOption=function(option,optionsString){if(typeof option!="string"||typeof optionsString!="string"){return false;
}if(optionsString.indexOf(option)!=-1){return true;
}else{return false;
}};
mp_formatter._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return true;
}else{return false;
}};
mp_formatter.NumericFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.format=function(number,options){if(typeof number=="string"){number=mp_formatter._trim(number);
}if(!mp_formatter._isNumber(number)){throw"Error: The input is not a number";
}var floatAmount=parseFloat(number,10);
var reqPrecision=mp_formatter._getPrecision(options);
if(reqPrecision!=-1){floatAmount=Math.round(floatAmount*Math.pow(10,reqPrecision))/Math.pow(10,reqPrecision);
}var parsedAmount=mp_formatter._splitNumber(String(floatAmount));
var formattedIntegerPart;
if(floatAmount===0){formattedIntegerPart="0";
}else{formattedIntegerPart=mp_formatter._hasOption("^",options)?parsedAmount.integer:mp_formatter._formatIntegerPart(parsedAmount.integer,this.lc.grouping,this.lc.thousands_sep);
}var formattedFractionPart=reqPrecision!=-1?mp_formatter._formatFractionPart(parsedAmount.fraction,reqPrecision):parsedAmount.fraction;
var formattedAmount=formattedFractionPart.length?formattedIntegerPart+this.lc.decimal_point+formattedFractionPart:formattedIntegerPart;
if(mp_formatter._hasOption("~",options)||floatAmount===0){return formattedAmount;
}else{if(mp_formatter._hasOption("+",options)||floatAmount<0){if(floatAmount>0){return"+"+formattedAmount;
}else{if(floatAmount<0){return"-"+formattedAmount;
}else{return formattedAmount;
}}}else{return formattedAmount;
}}};
};
mp_formatter.DateTimeFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.formatISO8601=function(dateStr,option){if(!mp_formatter._validateFormatString(dateStr)){throw"Error: The input is either empty or no string";
}var date=new Date();
date.setISO8601(dateStr);
return this.format(date,option);
};
this.format=function(dateTime,option){if(!mp_formatter._isDate(dateTime)){throw"Error: The input is not a date object";
}switch(option){case mp_formatter.DateTimeFormatter.TIME_24HOUR:return dateTime.format(this.lc.time24hr);
case mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS:return dateTime.format(this.lc.time24hrnosec);
case mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR:return dateTime.format(this.lc.shortdate2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR:return dateTime.format(this.lc.fulldate4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR:return dateTime.format(this.lc.fulldate2yr);
case mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE:return dateTime.format(this.lc.fullmonth4yrnodate);
case mp_formatter.DateTimeFormatter.FULL_4YEAR:return dateTime.format(this.lc.full4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR:return dateTime.format(this.lc.fulldatetime2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR:return dateTime.format(this.lc.fulldatetime4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR:return dateTime.format(this.lc.fulldatetimenoyr);
default:alert("Unhandled date time formatting option");
}};
};
mp_formatter.DateTimeFormatter.TIME_24HOUR=1;
mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS=2;
mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR=3;
mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR=4;
mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR=5;
mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE=6;
mp_formatter.DateTimeFormatter.FULL_4YEAR=7;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR=8;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR=9;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR=10;

/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(E,B){function ka(a,b,d){if(d===B&&a.nodeType===1){d=a.getAttribute("data-"+b);if(typeof d==="string"){try{d=d==="true"?true:d==="false"?false:d==="null"?null:!c.isNaN(d)?parseFloat(d):Ja.test(d)?c.parseJSON(d):d}catch(e){}c.data(a,b,d)}else d=B}return d}function U(){return false}function ca(){return true}function la(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function Ka(a){var b,d,e,f,h,l,k,o,x,r,A,C=[];f=[];h=c.data(this,this.nodeType?"events":"__events__");if(typeof h==="function")h=
h.events;if(!(a.liveFired===this||!h||!h.live||a.button&&a.type==="click")){if(a.namespace)A=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");a.liveFired=this;var J=h.live.slice(0);for(k=0;k<J.length;k++){h=J[k];h.origType.replace(X,"")===a.type?f.push(h.selector):J.splice(k--,1)}f=c(a.target).closest(f,a.currentTarget);o=0;for(x=f.length;o<x;o++){r=f[o];for(k=0;k<J.length;k++){h=J[k];if(r.selector===h.selector&&(!A||A.test(h.namespace))){l=r.elem;e=null;if(h.preType==="mouseenter"||
h.preType==="mouseleave"){a.type=h.preType;e=c(a.relatedTarget).closest(h.selector)[0]}if(!e||e!==l)C.push({elem:l,handleObj:h,level:r.level})}}}o=0;for(x=C.length;o<x;o++){f=C[o];if(d&&f.level>d)break;a.currentTarget=f.elem;a.data=f.handleObj.data;a.handleObj=f.handleObj;A=f.handleObj.origHandler.apply(f.elem,arguments);if(A===false||a.isPropagationStopped()){d=f.level;if(A===false)b=false;if(a.isImmediatePropagationStopped())break}}return b}}function Y(a,b){return(a&&a!=="*"?a+".":"")+b.replace(La,
"`").replace(Ma,"&")}function ma(a,b,d){if(c.isFunction(b))return c.grep(a,function(f,h){return!!b.call(f,h,f)===d});else if(b.nodeType)return c.grep(a,function(f){return f===b===d});else if(typeof b==="string"){var e=c.grep(a,function(f){return f.nodeType===1});if(Na.test(b))return c.filter(b,e,!d);else b=c.filter(b,e)}return c.grep(a,function(f){return c.inArray(f,b)>=0===d})}function na(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var e=c.data(a[d++]),f=c.data(this,
e);if(e=e&&e.events){delete f.handle;f.events={};for(var h in e)for(var l in e[h])c.event.add(this,h,e[h][l],e[h][l].data)}}})}function Oa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function oa(a,b,d){var e=b==="width"?a.offsetWidth:a.offsetHeight;if(d==="border")return e;c.each(b==="width"?Pa:Qa,function(){d||(e-=parseFloat(c.css(a,"padding"+this))||0);if(d==="margin")e+=parseFloat(c.css(a,
"margin"+this))||0;else e-=parseFloat(c.css(a,"border"+this+"Width"))||0});return e}function da(a,b,d,e){if(c.isArray(b)&&b.length)c.each(b,function(f,h){d||Ra.test(a)?e(a,h):da(a+"["+(typeof h==="object"||c.isArray(h)?f:"")+"]",h,d,e)});else if(!d&&b!=null&&typeof b==="object")c.isEmptyObject(b)?e(a,""):c.each(b,function(f,h){da(a+"["+f+"]",h,d,e)});else e(a,b)}function S(a,b){var d={};c.each(pa.concat.apply([],pa.slice(0,b)),function(){d[this]=a});return d}function qa(a){if(!ea[a]){var b=c("<"+
a+">").appendTo("body"),d=b.css("display");b.remove();if(d==="none"||d==="")d="block";ea[a]=d}return ea[a]}function fa(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var t=E.document,c=function(){function a(){if(!b.isReady){try{t.documentElement.doScroll("left")}catch(j){setTimeout(a,1);return}b.ready()}}var b=function(j,s){return new b.fn.init(j,s)},d=E.jQuery,e=E.$,f,h=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,l=/\S/,k=/^\s+/,o=/\s+$/,x=/\W/,r=/\d/,A=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,
C=/^[\],:{}\s]*$/,J=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,I=/(?:^|:|,)(?:\s*\[)+/g,L=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,n=/(mozilla)(?:.*? rv:([\w.]+))?/,m=navigator.userAgent,p=false,q=[],u,y=Object.prototype.toString,F=Object.prototype.hasOwnProperty,M=Array.prototype.push,N=Array.prototype.slice,O=String.prototype.trim,D=Array.prototype.indexOf,R={};b.fn=b.prototype={init:function(j,
s){var v,z,H;if(!j)return this;if(j.nodeType){this.context=this[0]=j;this.length=1;return this}if(j==="body"&&!s&&t.body){this.context=t;this[0]=t.body;this.selector="body";this.length=1;return this}if(typeof j==="string")if((v=h.exec(j))&&(v[1]||!s))if(v[1]){H=s?s.ownerDocument||s:t;if(z=A.exec(j))if(b.isPlainObject(s)){j=[t.createElement(z[1])];b.fn.attr.call(j,s,true)}else j=[H.createElement(z[1])];else{z=b.buildFragment([v[1]],[H]);j=(z.cacheable?z.fragment.cloneNode(true):z.fragment).childNodes}return b.merge(this,
j)}else{if((z=t.getElementById(v[2]))&&z.parentNode){if(z.id!==v[2])return f.find(j);this.length=1;this[0]=z}this.context=t;this.selector=j;return this}else if(!s&&!x.test(j)){this.selector=j;this.context=t;j=t.getElementsByTagName(j);return b.merge(this,j)}else return!s||s.jquery?(s||f).find(j):b(s).find(j);else if(b.isFunction(j))return f.ready(j);if(j.selector!==B){this.selector=j.selector;this.context=j.context}return b.makeArray(j,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},
toArray:function(){return N.call(this,0)},get:function(j){return j==null?this.toArray():j<0?this.slice(j)[0]:this[j]},pushStack:function(j,s,v){var z=b();b.isArray(j)?M.apply(z,j):b.merge(z,j);z.prevObject=this;z.context=this.context;if(s==="find")z.selector=this.selector+(this.selector?" ":"")+v;else if(s)z.selector=this.selector+"."+s+"("+v+")";return z},each:function(j,s){return b.each(this,j,s)},ready:function(j){b.bindReady();if(b.isReady)j.call(t,b);else q&&q.push(j);return this},eq:function(j){return j===
-1?this.slice(j):this.slice(j,+j+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(N.apply(this,arguments),"slice",N.call(arguments).join(","))},map:function(j){return this.pushStack(b.map(this,function(s,v){return j.call(s,v,s)}))},end:function(){return this.prevObject||b(null)},push:M,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var j,s,v,z,H,G=arguments[0]||{},K=1,Q=arguments.length,ga=false;
if(typeof G==="boolean"){ga=G;G=arguments[1]||{};K=2}if(typeof G!=="object"&&!b.isFunction(G))G={};if(Q===K){G=this;--K}for(;K<Q;K++)if((j=arguments[K])!=null)for(s in j){v=G[s];z=j[s];if(G!==z)if(ga&&z&&(b.isPlainObject(z)||(H=b.isArray(z)))){if(H){H=false;v=v&&b.isArray(v)?v:[]}else v=v&&b.isPlainObject(v)?v:{};G[s]=b.extend(ga,v,z)}else if(z!==B)G[s]=z}return G};b.extend({noConflict:function(j){E.$=e;if(j)E.jQuery=d;return b},isReady:false,readyWait:1,ready:function(j){j===true&&b.readyWait--;
if(!b.readyWait||j!==true&&!b.isReady){if(!t.body)return setTimeout(b.ready,1);b.isReady=true;if(!(j!==true&&--b.readyWait>0))if(q){var s=0,v=q;for(q=null;j=v[s++];)j.call(t,b);b.fn.trigger&&b(t).trigger("ready").unbind("ready")}}},bindReady:function(){if(!p){p=true;if(t.readyState==="complete")return setTimeout(b.ready,1);if(t.addEventListener){t.addEventListener("DOMContentLoaded",u,false);E.addEventListener("load",b.ready,false)}else if(t.attachEvent){t.attachEvent("onreadystatechange",u);E.attachEvent("onload",
b.ready);var j=false;try{j=E.frameElement==null}catch(s){}t.documentElement.doScroll&&j&&a()}}},isFunction:function(j){return b.type(j)==="function"},isArray:Array.isArray||function(j){return b.type(j)==="array"},isWindow:function(j){return j&&typeof j==="object"&&"setInterval"in j},isNaN:function(j){return j==null||!r.test(j)||isNaN(j)},type:function(j){return j==null?String(j):R[y.call(j)]||"object"},isPlainObject:function(j){if(!j||b.type(j)!=="object"||j.nodeType||b.isWindow(j))return false;if(j.constructor&&
!F.call(j,"constructor")&&!F.call(j.constructor.prototype,"isPrototypeOf"))return false;for(var s in j);return s===B||F.call(j,s)},isEmptyObject:function(j){for(var s in j)return false;return true},error:function(j){throw j;},parseJSON:function(j){if(typeof j!=="string"||!j)return null;j=b.trim(j);if(C.test(j.replace(J,"@").replace(w,"]").replace(I,"")))return E.JSON&&E.JSON.parse?E.JSON.parse(j):(new Function("return "+j))();else b.error("Invalid JSON: "+j)},noop:function(){},globalEval:function(j){if(j&&
l.test(j)){var s=t.getElementsByTagName("head")[0]||t.documentElement,v=t.createElement("script");v.type="text/javascript";if(b.support.scriptEval)v.appendChild(t.createTextNode(j));else v.text=j;s.insertBefore(v,s.firstChild);s.removeChild(v)}},nodeName:function(j,s){return j.nodeName&&j.nodeName.toUpperCase()===s.toUpperCase()},each:function(j,s,v){var z,H=0,G=j.length,K=G===B||b.isFunction(j);if(v)if(K)for(z in j){if(s.apply(j[z],v)===false)break}else for(;H<G;){if(s.apply(j[H++],v)===false)break}else if(K)for(z in j){if(s.call(j[z],
z,j[z])===false)break}else for(v=j[0];H<G&&s.call(v,H,v)!==false;v=j[++H]);return j},trim:O?function(j){return j==null?"":O.call(j)}:function(j){return j==null?"":j.toString().replace(k,"").replace(o,"")},makeArray:function(j,s){var v=s||[];if(j!=null){var z=b.type(j);j.length==null||z==="string"||z==="function"||z==="regexp"||b.isWindow(j)?M.call(v,j):b.merge(v,j)}return v},inArray:function(j,s){if(s.indexOf)return s.indexOf(j);for(var v=0,z=s.length;v<z;v++)if(s[v]===j)return v;return-1},merge:function(j,
s){var v=j.length,z=0;if(typeof s.length==="number")for(var H=s.length;z<H;z++)j[v++]=s[z];else for(;s[z]!==B;)j[v++]=s[z++];j.length=v;return j},grep:function(j,s,v){var z=[],H;v=!!v;for(var G=0,K=j.length;G<K;G++){H=!!s(j[G],G);v!==H&&z.push(j[G])}return z},map:function(j,s,v){for(var z=[],H,G=0,K=j.length;G<K;G++){H=s(j[G],G,v);if(H!=null)z[z.length]=H}return z.concat.apply([],z)},guid:1,proxy:function(j,s,v){if(arguments.length===2)if(typeof s==="string"){v=j;j=v[s];s=B}else if(s&&!b.isFunction(s)){v=
s;s=B}if(!s&&j)s=function(){return j.apply(v||this,arguments)};if(j)s.guid=j.guid=j.guid||s.guid||b.guid++;return s},access:function(j,s,v,z,H,G){var K=j.length;if(typeof s==="object"){for(var Q in s)b.access(j,Q,s[Q],z,H,v);return j}if(v!==B){z=!G&&z&&b.isFunction(v);for(Q=0;Q<K;Q++)H(j[Q],s,z?v.call(j[Q],Q,H(j[Q],s)):v,G);return j}return K?H(j[0],s):B},now:function(){return(new Date).getTime()},uaMatch:function(j){j=j.toLowerCase();j=L.exec(j)||g.exec(j)||i.exec(j)||j.indexOf("compatible")<0&&n.exec(j)||
[];return{browser:j[1]||"",version:j[2]||"0"}},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(j,s){R["[object "+s+"]"]=s.toLowerCase()});m=b.uaMatch(m);if(m.browser){b.browser[m.browser]=true;b.browser.version=m.version}if(b.browser.webkit)b.browser.safari=true;if(D)b.inArray=function(j,s){return D.call(s,j)};if(!/\s/.test("\u00a0")){k=/^[\s\xA0]+/;o=/[\s\xA0]+$/}f=b(t);if(t.addEventListener)u=function(){t.removeEventListener("DOMContentLoaded",u,
false);b.ready()};else if(t.attachEvent)u=function(){if(t.readyState==="complete"){t.detachEvent("onreadystatechange",u);b.ready()}};return E.jQuery=E.$=b}();(function(){c.support={};var a=t.documentElement,b=t.createElement("script"),d=t.createElement("div"),e="script"+c.now();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var f=d.getElementsByTagName("*"),h=d.getElementsByTagName("a")[0],l=t.createElement("select"),
k=l.appendChild(t.createElement("option"));if(!(!f||!f.length||!h)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(h.getAttribute("style")),hrefNormalized:h.getAttribute("href")==="/a",opacity:/^0.55$/.test(h.style.opacity),cssFloat:!!h.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:k.selected,deleteExpando:true,optDisabled:false,checkClone:false,
scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};l.disabled=true;c.support.optDisabled=!k.disabled;b.type="text/javascript";try{b.appendChild(t.createTextNode("window."+e+"=1;"))}catch(o){}a.insertBefore(b,a.firstChild);if(E[e]){c.support.scriptEval=true;delete E[e]}try{delete b.test}catch(x){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function r(){c.support.noCloneEvent=
false;d.detachEvent("onclick",r)});d.cloneNode(true).fireEvent("onclick")}d=t.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=t.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var r=t.createElement("div");r.style.width=r.style.paddingLeft="1px";t.body.appendChild(r);c.boxModel=c.support.boxModel=r.offsetWidth===2;if("zoom"in r.style){r.style.display="inline";r.style.zoom=
1;c.support.inlineBlockNeedsLayout=r.offsetWidth===2;r.style.display="";r.innerHTML="<div style='width:4px;'></div>";c.support.shrinkWrapBlocks=r.offsetWidth!==2}r.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var A=r.getElementsByTagName("td");c.support.reliableHiddenOffsets=A[0].offsetHeight===0;A[0].style.display="";A[1].style.display="none";c.support.reliableHiddenOffsets=c.support.reliableHiddenOffsets&&A[0].offsetHeight===0;r.innerHTML="";t.body.removeChild(r).style.display=
"none"});a=function(r){var A=t.createElement("div");r="on"+r;var C=r in A;if(!C){A.setAttribute(r,"return;");C=typeof A[r]==="function"}return C};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=f=h=null}})();var ra={},Ja=/^(?:\{.*\}|\[.*\])$/;c.extend({cache:{},uuid:0,expando:"jQuery"+c.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(a,b,d){if(c.acceptData(a)){a=a==E?ra:a;var e=a.nodeType,f=e?a[c.expando]:null,h=
c.cache;if(!(e&&!f&&typeof b==="string"&&d===B)){if(e)f||(a[c.expando]=f=++c.uuid);else h=a;if(typeof b==="object")if(e)h[f]=c.extend(h[f],b);else c.extend(h,b);else if(e&&!h[f])h[f]={};a=e?h[f]:h;if(d!==B)a[b]=d;return typeof b==="string"?a[b]:a}}},removeData:function(a,b){if(c.acceptData(a)){a=a==E?ra:a;var d=a.nodeType,e=d?a[c.expando]:a,f=c.cache,h=d?f[e]:e;if(b){if(h){delete h[b];d&&c.isEmptyObject(h)&&c.removeData(a)}}else if(d&&c.support.deleteExpando)delete a[c.expando];else if(a.removeAttribute)a.removeAttribute(c.expando);
else if(d)delete f[e];else for(var l in a)delete a[l]}},acceptData:function(a){if(a.nodeName){var b=c.noData[a.nodeName.toLowerCase()];if(b)return!(b===true||a.getAttribute("classid")!==b)}return true}});c.fn.extend({data:function(a,b){var d=null;if(typeof a==="undefined"){if(this.length){var e=this[0].attributes,f;d=c.data(this[0]);for(var h=0,l=e.length;h<l;h++){f=e[h].name;if(f.indexOf("data-")===0){f=f.substr(5);ka(this[0],f,d[f])}}}return d}else if(typeof a==="object")return this.each(function(){c.data(this,
a)});var k=a.split(".");k[1]=k[1]?"."+k[1]:"";if(b===B){d=this.triggerHandler("getData"+k[1]+"!",[k[0]]);if(d===B&&this.length){d=c.data(this[0],a);d=ka(this[0],a,d)}return d===B&&k[1]?this.data(k[0]):d}else return this.each(function(){var o=c(this),x=[k[0],b];o.triggerHandler("setData"+k[1]+"!",x);c.data(this,a,b);o.triggerHandler("changeData"+k[1]+"!",x)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var e=
c.data(a,b);if(!d)return e||[];if(!e||c.isArray(d))e=c.data(a,b,c.makeArray(d));else e.push(d);return e}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.shift();if(e==="inprogress")e=d.shift();if(e){b==="fx"&&d.unshift("inprogress");e.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===B)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,
a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var sa=/[\n\t]/g,ha=/\s+/,Sa=/\r/g,Ta=/^(?:href|src|style)$/,Ua=/^(?:button|input)$/i,Va=/^(?:button|input|object|select|textarea)$/i,Wa=/^a(?:rea)?$/i,ta=/^(?:radio|checkbox)$/i;c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",
colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};c.fn.extend({attr:function(a,b){return c.access(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(x){var r=c(this);r.addClass(a.call(this,x,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ha),d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===
1)if(f.className){for(var h=" "+f.className+" ",l=f.className,k=0,o=b.length;k<o;k++)if(h.indexOf(" "+b[k]+" ")<0)l+=" "+b[k];f.className=c.trim(l)}else f.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(o){var x=c(this);x.removeClass(a.call(this,o,x.attr("class")))});if(a&&typeof a==="string"||a===B)for(var b=(a||"").split(ha),d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1&&f.className)if(a){for(var h=(" "+f.className+" ").replace(sa," "),
l=0,k=b.length;l<k;l++)h=h.replace(" "+b[l]+" "," ");f.className=c.trim(h)}else f.className=""}return this},toggleClass:function(a,b){var d=typeof a,e=typeof b==="boolean";if(c.isFunction(a))return this.each(function(f){var h=c(this);h.toggleClass(a.call(this,f,h.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var f,h=0,l=c(this),k=b,o=a.split(ha);f=o[h++];){k=e?k:!l.hasClass(f);l[k?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,
"__className__",this.className);this.className=this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(sa," ").indexOf(a)>-1)return true;return false},val:function(a){if(!arguments.length){var b=this[0];if(b){if(c.nodeName(b,"option")){var d=b.attributes.value;return!d||d.specified?b.value:b.text}if(c.nodeName(b,"select")){var e=b.selectedIndex;d=[];var f=b.options;b=b.type==="select-one";
if(e<0)return null;var h=b?e:0;for(e=b?e+1:f.length;h<e;h++){var l=f[h];if(l.selected&&(c.support.optDisabled?!l.disabled:l.getAttribute("disabled")===null)&&(!l.parentNode.disabled||!c.nodeName(l.parentNode,"optgroup"))){a=c(l).val();if(b)return a;d.push(a)}}return d}if(ta.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Sa,"")}return B}var k=c.isFunction(a);return this.each(function(o){var x=c(this),r=a;if(this.nodeType===1){if(k)r=
a.call(this,o,x.val());if(r==null)r="";else if(typeof r==="number")r+="";else if(c.isArray(r))r=c.map(r,function(C){return C==null?"":C+""});if(c.isArray(r)&&ta.test(this.type))this.checked=c.inArray(x.val(),r)>=0;else if(c.nodeName(this,"select")){var A=c.makeArray(r);c("option",this).each(function(){this.selected=c.inArray(c(this).val(),A)>=0});if(!A.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},
attr:function(a,b,d,e){if(!a||a.nodeType===3||a.nodeType===8)return B;if(e&&b in c.attrFn)return c(a)[b](d);e=a.nodeType!==1||!c.isXMLDoc(a);var f=d!==B;b=e&&c.props[b]||b;var h=Ta.test(b);if((b in a||a[b]!==B)&&e&&!h){if(f){b==="type"&&Ua.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");if(d===null)a.nodeType===1&&a.removeAttribute(b);else a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&
b.specified?b.value:Va.test(a.nodeName)||Wa.test(a.nodeName)&&a.href?0:B;return a[b]}if(!c.support.style&&e&&b==="style"){if(f)a.style.cssText=""+d;return a.style.cssText}f&&a.setAttribute(b,""+d);if(!a.attributes[b]&&a.hasAttribute&&!a.hasAttribute(b))return B;a=!c.support.hrefNormalized&&e&&h?a.getAttribute(b,2):a.getAttribute(b);return a===null?B:a}});var X=/\.(.*)$/,ia=/^(?:textarea|input|select)$/i,La=/\./g,Ma=/ /g,Xa=/[^\w\s.|`]/g,Ya=function(a){return a.replace(Xa,"\\$&")},ua={focusin:0,focusout:0};
c.event={add:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(c.isWindow(a)&&a!==E&&!a.frameElement)a=E;if(d===false)d=U;else if(!d)return;var f,h;if(d.handler){f=d;d=f.handler}if(!d.guid)d.guid=c.guid++;if(h=c.data(a)){var l=a.nodeType?"events":"__events__",k=h[l],o=h.handle;if(typeof k==="function"){o=k.handle;k=k.events}else if(!k){a.nodeType||(h[l]=h=function(){});h.events=k={}}if(!o)h.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,
arguments):B};o.elem=a;b=b.split(" ");for(var x=0,r;l=b[x++];){h=f?c.extend({},f):{handler:d,data:e};if(l.indexOf(".")>-1){r=l.split(".");l=r.shift();h.namespace=r.slice(0).sort().join(".")}else{r=[];h.namespace=""}h.type=l;if(!h.guid)h.guid=d.guid;var A=k[l],C=c.event.special[l]||{};if(!A){A=k[l]=[];if(!C.setup||C.setup.call(a,e,r,o)===false)if(a.addEventListener)a.addEventListener(l,o,false);else a.attachEvent&&a.attachEvent("on"+l,o)}if(C.add){C.add.call(a,h);if(!h.handler.guid)h.handler.guid=
d.guid}A.push(h);c.event.global[l]=true}a=null}}},global:{},remove:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(d===false)d=U;var f,h,l=0,k,o,x,r,A,C,J=a.nodeType?"events":"__events__",w=c.data(a),I=w&&w[J];if(w&&I){if(typeof I==="function"){w=I;I=I.events}if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(f in I)c.event.remove(a,f+b)}else{for(b=b.split(" ");f=b[l++];){r=f;k=f.indexOf(".")<0;o=[];if(!k){o=f.split(".");f=o.shift();x=RegExp("(^|\\.)"+
c.map(o.slice(0).sort(),Ya).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(A=I[f])if(d){r=c.event.special[f]||{};for(h=e||0;h<A.length;h++){C=A[h];if(d.guid===C.guid){if(k||x.test(C.namespace)){e==null&&A.splice(h--,1);r.remove&&r.remove.call(a,C)}if(e!=null)break}}if(A.length===0||e!=null&&A.length===1){if(!r.teardown||r.teardown.call(a,o)===false)c.removeEvent(a,f,w.handle);delete I[f]}}else for(h=0;h<A.length;h++){C=A[h];if(k||x.test(C.namespace)){c.event.remove(a,r,C.handler,h);A.splice(h--,1)}}}if(c.isEmptyObject(I)){if(b=
w.handle)b.elem=null;delete w.events;delete w.handle;if(typeof w==="function")c.removeData(a,J);else c.isEmptyObject(w)&&c.removeData(a)}}}}},trigger:function(a,b,d,e){var f=a.type||a;if(!e){a=typeof a==="object"?a[c.expando]?a:c.extend(c.Event(f),a):c.Event(f);if(f.indexOf("!")>=0){a.type=f=f.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[f]&&c.each(c.cache,function(){this.events&&this.events[f]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===
8)return B;a.result=B;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(e=d.nodeType?c.data(d,"handle"):(c.data(d,"__events__")||{}).handle)&&e.apply(d,b);e=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+f]&&d["on"+f].apply(d,b)===false){a.result=false;a.preventDefault()}}catch(h){}if(!a.isPropagationStopped()&&e)c.event.trigger(a,b,e,true);else if(!a.isDefaultPrevented()){var l;e=a.target;var k=f.replace(X,""),o=c.nodeName(e,"a")&&k===
"click",x=c.event.special[k]||{};if((!x._default||x._default.call(d,a)===false)&&!o&&!(e&&e.nodeName&&c.noData[e.nodeName.toLowerCase()])){try{if(e[k]){if(l=e["on"+k])e["on"+k]=null;c.event.triggered=true;e[k]()}}catch(r){}if(l)e["on"+k]=l;c.event.triggered=false}}},handle:function(a){var b,d,e,f;d=[];var h=c.makeArray(arguments);a=h[0]=c.event.fix(a||E.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;if(!b){e=a.type.split(".");a.type=e.shift();d=e.slice(0).sort();e=RegExp("(^|\\.)"+
d.join("\\.(?:.*\\.)?")+"(\\.|$)")}a.namespace=a.namespace||d.join(".");f=c.data(this,this.nodeType?"events":"__events__");if(typeof f==="function")f=f.events;d=(f||{})[a.type];if(f&&d){d=d.slice(0);f=0;for(var l=d.length;f<l;f++){var k=d[f];if(b||e.test(k.namespace)){a.handler=k.handler;a.data=k.data;a.handleObj=k;k=k.handler.apply(this,h);if(k!==B){a.result=k;if(k===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[c.expando])return a;var b=a;a=c.Event(b);for(var d=this.props.length,e;d;){e=this.props[--d];a[e]=b[e]}if(!a.target)a.target=a.srcElement||t;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=t.documentElement;d=t.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(a.which==null&&(a.charCode!=null||a.keyCode!=null))a.which=a.charCode!=null?a.charCode:a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==B)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,Y(a.origType,a.selector),c.extend({},a,{handler:Ka,guid:a.handler.guid}))},remove:function(a){c.event.remove(this,
Y(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,d){if(c.isWindow(this))this.onbeforeunload=d},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};c.removeEvent=t.removeEventListener?function(a,b,d){a.removeEventListener&&a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=a;this.type=a.type}else this.type=a;this.timeStamp=
c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ca;var a=this.originalEvent;if(a)if(a.preventDefault)a.preventDefault();else a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=ca;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ca;this.stopPropagation()},isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U};
var va=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},wa=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?wa:va,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?wa:va)}}});if(!c.support.submitBubbles)c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!==
"form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length){a.liveFired=B;return la("submit",this,arguments)}});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13){a.liveFired=B;return la("submit",this,arguments)}})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};if(!c.support.changeBubbles){var V,
xa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(e){return e.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},Z=function(a,b){var d=a.target,e,f;if(!(!ia.test(d.nodeName)||d.readOnly)){e=c.data(d,"_change_data");f=xa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",f);if(!(e===B||f===e))if(e!=null||f){a.type="change";a.liveFired=
B;return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:Z,beforedeactivate:Z,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return Z.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return Z.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,"_change_data",xa(a))}},setup:function(){if(this.type===
"file")return false;for(var a in V)c.event.add(this,a+".specialChange",V[a]);return ia.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ia.test(this.nodeName)}};V=c.event.special.change.filters;V.focus=V.beforeactivate}t.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.trigger(e,null,e.target)}c.event.special[b]={setup:function(){ua[b]++===0&&t.addEventListener(a,d,true)},teardown:function(){--ua[b]===
0&&t.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,e,f){if(typeof d==="object"){for(var h in d)this[b](h,e,d[h],f);return this}if(c.isFunction(e)||e===false){f=e;e=B}var l=b==="one"?c.proxy(f,function(o){c(this).unbind(o,l);return f.apply(this,arguments)}):f;if(d==="unload"&&b!=="one")this.one(d,e,f);else{h=0;for(var k=this.length;h<k;h++)c.event.add(this[h],d,l,e)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault)for(var d in a)this.unbind(d,
a[d]);else{d=0;for(var e=this.length;d<e;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,e){return this.live(b,d,e,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var d=c.Event(a);d.preventDefault();d.stopPropagation();c.event.trigger(d,b,this[0]);return d.result}},toggle:function(a){for(var b=arguments,d=
1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(e){var f=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,f+1);e.preventDefault();return b[f].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var ya={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,e,f,h){var l,k=0,o,x,r=h||this.selector;h=h?this:c(this.context);if(typeof d===
"object"&&!d.preventDefault){for(l in d)h[b](l,e,d[l],r);return this}if(c.isFunction(e)){f=e;e=B}for(d=(d||"").split(" ");(l=d[k++])!=null;){o=X.exec(l);x="";if(o){x=o[0];l=l.replace(X,"")}if(l==="hover")d.push("mouseenter"+x,"mouseleave"+x);else{o=l;if(l==="focus"||l==="blur"){d.push(ya[l]+x);l+=x}else l=(ya[l]||l)+x;if(b==="live"){x=0;for(var A=h.length;x<A;x++)c.event.add(h[x],"live."+Y(l,r),{data:e,selector:r,handler:f,origType:l,origHandler:f,preType:o})}else h.unbind("live."+Y(l,r),f)}}return this}});
c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d,e){if(e==null){e=d;d=null}return arguments.length>0?this.bind(b,d,e):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});E.attachEvent&&!E.addEventListener&&c(E).bind("unload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});
(function(){function a(g,i,n,m,p,q){p=0;for(var u=m.length;p<u;p++){var y=m[p];if(y){var F=false;for(y=y[g];y;){if(y.sizcache===n){F=m[y.sizset];break}if(y.nodeType===1&&!q){y.sizcache=n;y.sizset=p}if(y.nodeName.toLowerCase()===i){F=y;break}y=y[g]}m[p]=F}}}function b(g,i,n,m,p,q){p=0;for(var u=m.length;p<u;p++){var y=m[p];if(y){var F=false;for(y=y[g];y;){if(y.sizcache===n){F=m[y.sizset];break}if(y.nodeType===1){if(!q){y.sizcache=n;y.sizset=p}if(typeof i!=="string"){if(y===i){F=true;break}}else if(k.filter(i,
[y]).length>0){F=y;break}}y=y[g]}m[p]=F}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,h=false,l=true;[0,0].sort(function(){l=false;return 0});var k=function(g,i,n,m){n=n||[];var p=i=i||t;if(i.nodeType!==1&&i.nodeType!==9)return[];if(!g||typeof g!=="string")return n;var q,u,y,F,M,N=true,O=k.isXML(i),D=[],R=g;do{d.exec("");if(q=d.exec(R)){R=q[3];D.push(q[1]);if(q[2]){F=q[3];
break}}}while(q);if(D.length>1&&x.exec(g))if(D.length===2&&o.relative[D[0]])u=L(D[0]+D[1],i);else for(u=o.relative[D[0]]?[i]:k(D.shift(),i);D.length;){g=D.shift();if(o.relative[g])g+=D.shift();u=L(g,u)}else{if(!m&&D.length>1&&i.nodeType===9&&!O&&o.match.ID.test(D[0])&&!o.match.ID.test(D[D.length-1])){q=k.find(D.shift(),i,O);i=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]}if(i){q=m?{expr:D.pop(),set:C(m)}:k.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&i.parentNode?i.parentNode:i,O);u=q.expr?k.filter(q.expr,
q.set):q.set;if(D.length>0)y=C(u);else N=false;for(;D.length;){q=M=D.pop();if(o.relative[M])q=D.pop();else M="";if(q==null)q=i;o.relative[M](y,q,O)}}else y=[]}y||(y=u);y||k.error(M||g);if(f.call(y)==="[object Array]")if(N)if(i&&i.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&k.contains(i,y[g])))n.push(u[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&n.push(u[g]);else n.push.apply(n,y);else C(y,n);if(F){k(F,p,n,m);k.uniqueSort(n)}return n};k.uniqueSort=function(g){if(w){h=
l;g.sort(w);if(h)for(var i=1;i<g.length;i++)g[i]===g[i-1]&&g.splice(i--,1)}return g};k.matches=function(g,i){return k(g,null,null,i)};k.matchesSelector=function(g,i){return k(i,null,null,[g]).length>0};k.find=function(g,i,n){var m;if(!g)return[];for(var p=0,q=o.order.length;p<q;p++){var u,y=o.order[p];if(u=o.leftMatch[y].exec(g)){var F=u[1];u.splice(1,1);if(F.substr(F.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");m=o.find[y](u,i,n);if(m!=null){g=g.replace(o.match[y],"");break}}}}m||(m=i.getElementsByTagName("*"));
return{set:m,expr:g}};k.filter=function(g,i,n,m){for(var p,q,u=g,y=[],F=i,M=i&&i[0]&&k.isXML(i[0]);g&&i.length;){for(var N in o.filter)if((p=o.leftMatch[N].exec(g))!=null&&p[2]){var O,D,R=o.filter[N];D=p[1];q=false;p.splice(1,1);if(D.substr(D.length-1)!=="\\"){if(F===y)y=[];if(o.preFilter[N])if(p=o.preFilter[N](p,F,n,y,m,M)){if(p===true)continue}else q=O=true;if(p)for(var j=0;(D=F[j])!=null;j++)if(D){O=R(D,p,j,F);var s=m^!!O;if(n&&O!=null)if(s)q=true;else F[j]=false;else if(s){y.push(D);q=true}}if(O!==
B){n||(F=y);g=g.replace(o.match[N],"");if(!q)return[];break}}}if(g===u)if(q==null)k.error(g);else break;u=g}return F};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var o=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},relative:{"+":function(g,i){var n=typeof i==="string",m=n&&!/\W/.test(i);n=n&&!m;if(m)i=i.toLowerCase();m=0;for(var p=g.length,q;m<p;m++)if(q=g[m]){for(;(q=q.previousSibling)&&q.nodeType!==1;);g[m]=n||q&&q.nodeName.toLowerCase()===
i?q||false:q===i}n&&k.filter(i,g,true)},">":function(g,i){var n,m=typeof i==="string",p=0,q=g.length;if(m&&!/\W/.test(i))for(i=i.toLowerCase();p<q;p++){if(n=g[p]){n=n.parentNode;g[p]=n.nodeName.toLowerCase()===i?n:false}}else{for(;p<q;p++)if(n=g[p])g[p]=m?n.parentNode:n.parentNode===i;m&&k.filter(i,g,true)}},"":function(g,i,n){var m,p=e++,q=b;if(typeof i==="string"&&!/\W/.test(i)){m=i=i.toLowerCase();q=a}q("parentNode",i,p,g,m,n)},"~":function(g,i,n){var m,p=e++,q=b;if(typeof i==="string"&&!/\W/.test(i)){m=
i=i.toLowerCase();q=a}q("previousSibling",i,p,g,m,n)}},find:{ID:function(g,i,n){if(typeof i.getElementById!=="undefined"&&!n)return(g=i.getElementById(g[1]))&&g.parentNode?[g]:[]},NAME:function(g,i){if(typeof i.getElementsByName!=="undefined"){for(var n=[],m=i.getElementsByName(g[1]),p=0,q=m.length;p<q;p++)m[p].getAttribute("name")===g[1]&&n.push(m[p]);return n.length===0?null:n}},TAG:function(g,i){return i.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,i,n,m,p,q){g=" "+g[1].replace(/\\/g,
"")+" ";if(q)return g;q=0;for(var u;(u=i[q])!=null;q++)if(u)if(p^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))n||m.push(u);else if(n)i[q]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},CHILD:function(g){if(g[1]==="nth"){var i=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=i[1]+(i[2]||1)-0;g[3]=i[3]-0}g[0]=e++;return g},ATTR:function(g,i,n,
m,p,q){i=g[1].replace(/\\/g,"");if(!q&&o.attrMap[i])g[1]=o.attrMap[i];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,i,n,m,p){if(g[1]==="not")if((d.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,i);else{g=k.filter(g[3],i,n,true^p);n||m.push.apply(m,g);return false}else if(o.match.POS.test(g[0])||o.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===
true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,i,n){return!!k(n[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===
g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},setFilters:{first:function(g,i){return i===0},last:function(g,i,n,m){return i===m.length-1},even:function(g,i){return i%2===0},odd:function(g,i){return i%2===1},lt:function(g,i,n){return i<n[3]-0},gt:function(g,i,n){return i>n[3]-0},nth:function(g,i,n){return n[3]-
0===i},eq:function(g,i,n){return n[3]-0===i}},filter:{PSEUDO:function(g,i,n,m){var p=i[1],q=o.filters[p];if(q)return q(g,n,i,m);else if(p==="contains")return(g.textContent||g.innerText||k.getText([g])||"").indexOf(i[3])>=0;else if(p==="not"){i=i[3];n=0;for(m=i.length;n<m;n++)if(i[n]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+p)},CHILD:function(g,i){var n=i[1],m=g;switch(n){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(n===
"first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":n=i[2];var p=i[3];if(n===1&&p===0)return true;var q=i[0],u=g.parentNode;if(u&&(u.sizcache!==q||!g.nodeIndex)){var y=0;for(m=u.firstChild;m;m=m.nextSibling)if(m.nodeType===1)m.nodeIndex=++y;u.sizcache=q}m=g.nodeIndex-p;return n===0?m===0:m%n===0&&m/n>=0}},ID:function(g,i){return g.nodeType===1&&g.getAttribute("id")===i},TAG:function(g,i){return i==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===
i},CLASS:function(g,i){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(i)>-1},ATTR:function(g,i){var n=i[1];n=o.attrHandle[n]?o.attrHandle[n](g):g[n]!=null?g[n]:g.getAttribute(n);var m=n+"",p=i[2],q=i[4];return n==null?p==="!=":p==="="?m===q:p==="*="?m.indexOf(q)>=0:p==="~="?(" "+m+" ").indexOf(q)>=0:!q?m&&n!==false:p==="!="?m!==q:p==="^="?m.indexOf(q)===0:p==="$="?m.substr(m.length-q.length)===q:p==="|="?m===q||m.substr(0,q.length+1)===q+"-":false},POS:function(g,i,n,m){var p=o.setFilters[i[2]];
if(p)return p(g,n,i,m)}}},x=o.match.POS,r=function(g,i){return"\\"+(i-0+1)},A;for(A in o.match){o.match[A]=RegExp(o.match[A].source+/(?![^\[]*\])(?![^\(]*\))/.source);o.leftMatch[A]=RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[A].source.replace(/\\(\d+)/g,r))}var C=function(g,i){g=Array.prototype.slice.call(g,0);if(i){i.push.apply(i,g);return i}return g};try{Array.prototype.slice.call(t.documentElement.childNodes,0)}catch(J){C=function(g,i){var n=0,m=i||[];if(f.call(g)==="[object Array]")Array.prototype.push.apply(m,
g);else if(typeof g.length==="number")for(var p=g.length;n<p;n++)m.push(g[n]);else for(;g[n];n++)m.push(g[n]);return m}}var w,I;if(t.documentElement.compareDocumentPosition)w=function(g,i){if(g===i){h=true;return 0}if(!g.compareDocumentPosition||!i.compareDocumentPosition)return g.compareDocumentPosition?-1:1;return g.compareDocumentPosition(i)&4?-1:1};else{w=function(g,i){var n,m,p=[],q=[];n=g.parentNode;m=i.parentNode;var u=n;if(g===i){h=true;return 0}else if(n===m)return I(g,i);else if(n){if(!m)return 1}else return-1;
for(;u;){p.unshift(u);u=u.parentNode}for(u=m;u;){q.unshift(u);u=u.parentNode}n=p.length;m=q.length;for(u=0;u<n&&u<m;u++)if(p[u]!==q[u])return I(p[u],q[u]);return u===n?I(g,q[u],-1):I(p[u],i,1)};I=function(g,i,n){if(g===i)return n;for(g=g.nextSibling;g;){if(g===i)return-1;g=g.nextSibling}return 1}}k.getText=function(g){for(var i="",n,m=0;g[m];m++){n=g[m];if(n.nodeType===3||n.nodeType===4)i+=n.nodeValue;else if(n.nodeType!==8)i+=k.getText(n.childNodes)}return i};(function(){var g=t.createElement("div"),
i="script"+(new Date).getTime(),n=t.documentElement;g.innerHTML="<a name='"+i+"'/>";n.insertBefore(g,n.firstChild);if(t.getElementById(i)){o.find.ID=function(m,p,q){if(typeof p.getElementById!=="undefined"&&!q)return(p=p.getElementById(m[1]))?p.id===m[1]||typeof p.getAttributeNode!=="undefined"&&p.getAttributeNode("id").nodeValue===m[1]?[p]:B:[]};o.filter.ID=function(m,p){var q=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&q&&q.nodeValue===p}}n.removeChild(g);
n=g=null})();(function(){var g=t.createElement("div");g.appendChild(t.createComment(""));if(g.getElementsByTagName("*").length>0)o.find.TAG=function(i,n){var m=n.getElementsByTagName(i[1]);if(i[1]==="*"){for(var p=[],q=0;m[q];q++)m[q].nodeType===1&&p.push(m[q]);m=p}return m};g.innerHTML="<a href='#'></a>";if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")o.attrHandle.href=function(i){return i.getAttribute("href",2)};g=null})();t.querySelectorAll&&
function(){var g=k,i=t.createElement("div");i.innerHTML="<p class='TEST'></p>";if(!(i.querySelectorAll&&i.querySelectorAll(".TEST").length===0)){k=function(m,p,q,u){p=p||t;m=m.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!u&&!k.isXML(p))if(p.nodeType===9)try{return C(p.querySelectorAll(m),q)}catch(y){}else if(p.nodeType===1&&p.nodeName.toLowerCase()!=="object"){var F=p.getAttribute("id"),M=F||"__sizzle__";F||p.setAttribute("id",M);try{return C(p.querySelectorAll("#"+M+" "+m),q)}catch(N){}finally{F||
p.removeAttribute("id")}}return g(m,p,q,u)};for(var n in g)k[n]=g[n];i=null}}();(function(){var g=t.documentElement,i=g.matchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.msMatchesSelector,n=false;try{i.call(t.documentElement,"[test!='']:sizzle")}catch(m){n=true}if(i)k.matchesSelector=function(p,q){q=q.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(p))try{if(n||!o.match.PSEUDO.test(q)&&!/!=/.test(q))return i.call(p,q)}catch(u){}return k(q,null,null,[p]).length>0}})();(function(){var g=
t.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){o.order.splice(1,0,"CLASS");o.find.CLASS=function(i,n,m){if(typeof n.getElementsByClassName!=="undefined"&&!m)return n.getElementsByClassName(i[1])};g=null}}})();k.contains=t.documentElement.contains?function(g,i){return g!==i&&(g.contains?g.contains(i):true)}:t.documentElement.compareDocumentPosition?
function(g,i){return!!(g.compareDocumentPosition(i)&16)}:function(){return false};k.isXML=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false};var L=function(g,i){for(var n,m=[],p="",q=i.nodeType?[i]:i;n=o.match.PSEUDO.exec(g);){p+=n[0];g=g.replace(o.match.PSEUDO,"")}g=o.relative[g]?g+"*":g;n=0;for(var u=q.length;n<u;n++)k(g,q[n],m);return k.filter(p,m)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=k.getText;c.isXMLDoc=k.isXML;
c.contains=k.contains})();var Za=/Until$/,$a=/^(?:parents|prevUntil|prevAll)/,ab=/,/,Na=/^.[^:#\[\.,]*$/,bb=Array.prototype.slice,cb=c.expr.match.POS;c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,e=0,f=this.length;e<f;e++){d=b.length;c.find(a,this[e],b);if(e>0)for(var h=d;h<b.length;h++)for(var l=0;l<d;l++)if(b[l]===b[h]){b.splice(h--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,e=b.length;d<e;d++)if(c.contains(this,b[d]))return true})},
not:function(a){return this.pushStack(ma(this,a,false),"not",a)},filter:function(a){return this.pushStack(ma(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){var d=[],e,f,h=this[0];if(c.isArray(a)){var l,k={},o=1;if(h&&a.length){e=0;for(f=a.length;e<f;e++){l=a[e];k[l]||(k[l]=c.expr.match.POS.test(l)?c(l,b||this.context):l)}for(;h&&h.ownerDocument&&h!==b;){for(l in k){e=k[l];if(e.jquery?e.index(h)>-1:c(h).is(e))d.push({selector:l,elem:h,level:o})}h=
h.parentNode;o++}}return d}l=cb.test(a)?c(a,b||this.context):null;e=0;for(f=this.length;e<f;e++)for(h=this[e];h;)if(l?l.index(h)>-1:c.find.matchesSelector(h,a)){d.push(h);break}else{h=h.parentNode;if(!h||!h.ownerDocument||h===b)break}d=d.length>1?c.unique(d):d;return this.pushStack(d,"closest",a)},index:function(a){if(!a||typeof a==="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?c(a,b||this.context):
c.makeArray(a),e=c.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,
2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,
b){c.fn[a]=function(d,e){var f=c.map(this,b,d);Za.test(a)||(e=d);if(e&&typeof e==="string")f=c.filter(e,f);f=this.length>1?c.unique(f):f;if((this.length>1||ab.test(e))&&$a.test(a))f=f.reverse();return this.pushStack(f,a,bb.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return b.length===1?c.find.matchesSelector(b[0],a)?[b[0]]:[]:c.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&&a.nodeType!==9&&(d===B||a.nodeType!==1||!c(a).is(d));){a.nodeType===1&&
e.push(a);a=a[b]}return e},nth:function(a,b,d){b=b||1;for(var e=0;a;a=a[d])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var za=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,Aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ba=/<([\w:]+)/,db=/<tbody/i,eb=/<|&#?\w+;/,Ca=/<(?:script|object|embed|option|style)/i,Da=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/\=([^="'>\s]+\/)>/g,P={option:[1,
"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};P.optgroup=P.option;P.tbody=P.tfoot=P.colgroup=P.caption=P.thead;P.th=P.td;if(!c.support.htmlSerialize)P._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==B)return this.empty().append((this[0]&&this[0].ownerDocument||t).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length){if(!b&&e.nodeType===1){c.cleanData(e.getElementsByTagName("*"));c.cleanData([e])}e.parentNode&&e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,e=this.ownerDocument;if(!d){d=e.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(za,"").replace(fb,'="$1">').replace($,"")],e)[0]}else return this.cloneNode(true)});if(a===true){na(this,b);na(this.find("*"),b.find("*"))}return b},html:function(a){if(a===B)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(za,""):null;
else if(typeof a==="string"&&!Ca.test(a)&&(c.support.leadingWhitespace||!$.test(a))&&!P[(Ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Aa,"<$1></$2>");try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(e){this.empty().append(a)}}else c.isFunction(a)?this.each(function(f){var h=c(this);h.html(a.call(this,f,h.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=
c(this),e=d.html();d.replaceWith(a.call(this,b,e))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){var e,f,h,l=a[0],k=[];if(!c.support.checkClone&&arguments.length===3&&typeof l==="string"&&Da.test(l))return this.each(function(){c(this).domManip(a,
b,d,true)});if(c.isFunction(l))return this.each(function(x){var r=c(this);a[0]=l.call(this,x,b?r.html():B);r.domManip(a,b,d)});if(this[0]){e=l&&l.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:c.buildFragment(a,this,k);h=e.fragment;if(f=h.childNodes.length===1?h=h.firstChild:h.firstChild){b=b&&c.nodeName(f,"tr");f=0;for(var o=this.length;f<o;f++)d.call(b?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):
this[f]:this[f],f>0||e.cacheable||this.length>1?h.cloneNode(true):h)}k.length&&c.each(k,Oa)}return this}});c.buildFragment=function(a,b,d){var e,f,h;b=b&&b[0]?b[0].ownerDocument||b[0]:t;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===t&&!Ca.test(a[0])&&(c.support.checkClone||!Da.test(a[0]))){f=true;if(h=c.fragments[a[0]])if(h!==1)e=h}if(!e){e=b.createDocumentFragment();c.clean(a,b,e,d)}if(f)c.fragments[a[0]]=h?e:1;return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[];d=c(d);var f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&d.length===1){d[b](this[0]);return this}else{f=0;for(var h=d.length;f<h;f++){var l=(f>0?this.clone(true):this).get();c(d[f])[b](l);e=e.concat(l)}return this.pushStack(e,a,d.selector)}}});c.extend({clean:function(a,b,d,e){b=b||t;if(typeof b.createElement==="undefined")b=b.ownerDocument||
b[0]&&b[0].ownerDocument||t;for(var f=[],h=0,l;(l=a[h])!=null;h++){if(typeof l==="number")l+="";if(l){if(typeof l==="string"&&!eb.test(l))l=b.createTextNode(l);else if(typeof l==="string"){l=l.replace(Aa,"<$1></$2>");var k=(Ba.exec(l)||["",""])[1].toLowerCase(),o=P[k]||P._default,x=o[0],r=b.createElement("div");for(r.innerHTML=o[1]+l+o[2];x--;)r=r.lastChild;if(!c.support.tbody){x=db.test(l);k=k==="table"&&!x?r.firstChild&&r.firstChild.childNodes:o[1]==="<table>"&&!x?r.childNodes:[];for(o=k.length-
1;o>=0;--o)c.nodeName(k[o],"tbody")&&!k[o].childNodes.length&&k[o].parentNode.removeChild(k[o])}!c.support.leadingWhitespace&&$.test(l)&&r.insertBefore(b.createTextNode($.exec(l)[0]),r.firstChild);l=r.childNodes}if(l.nodeType)f.push(l);else f=c.merge(f,l)}}if(d)for(h=0;f[h];h++)if(e&&c.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))e.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{f[h].nodeType===1&&f.splice.apply(f,[h+1,0].concat(c.makeArray(f[h].getElementsByTagName("script"))));
d.appendChild(f[h])}return f},cleanData:function(a){for(var b,d,e=c.cache,f=c.event.special,h=c.support.deleteExpando,l=0,k;(k=a[l])!=null;l++)if(!(k.nodeName&&c.noData[k.nodeName.toLowerCase()]))if(d=k[c.expando]){if((b=e[d])&&b.events)for(var o in b.events)f[o]?c.event.remove(k,o):c.removeEvent(k,o,b.handle);if(h)delete k[c.expando];else k.removeAttribute&&k.removeAttribute(c.expando);delete e[d]}}});var Ea=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/-([a-z])/ig,ib=/([A-Z])/g,Fa=/^-?\d+(?:px)?$/i,
jb=/^-?\d/,kb={position:"absolute",visibility:"hidden",display:"block"},Pa=["Left","Right"],Qa=["Top","Bottom"],W,Ga,aa,lb=function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){if(arguments.length===2&&b===B)return this;return c.access(this,a,b,true,function(d,e,f){return f!==B?c.style(d,e,f):c.css(d,e)})};c.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=W(a,"opacity","opacity");return d===""?"1":d}else return a.style.opacity}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,
zoom:true,lineHeight:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var f,h=c.camelCase(b),l=a.style,k=c.cssHooks[h];b=c.cssProps[h]||h;if(d!==B){if(!(typeof d==="number"&&isNaN(d)||d==null)){if(typeof d==="number"&&!c.cssNumber[h])d+="px";if(!k||!("set"in k)||(d=k.set(a,d))!==B)try{l[b]=d}catch(o){}}}else{if(k&&"get"in k&&(f=k.get(a,false,e))!==B)return f;return l[b]}}},css:function(a,b,d){var e,f=c.camelCase(b),
h=c.cssHooks[f];b=c.cssProps[f]||f;if(h&&"get"in h&&(e=h.get(a,true,d))!==B)return e;else if(W)return W(a,b,f)},swap:function(a,b,d){var e={},f;for(f in b){e[f]=a.style[f];a.style[f]=b[f]}d.call(a);for(f in b)a.style[f]=e[f]},camelCase:function(a){return a.replace(hb,lb)}});c.curCSS=c.css;c.each(["height","width"],function(a,b){c.cssHooks[b]={get:function(d,e,f){var h;if(e){if(d.offsetWidth!==0)h=oa(d,b,f);else c.swap(d,kb,function(){h=oa(d,b,f)});if(h<=0){h=W(d,b,b);if(h==="0px"&&aa)h=aa(d,b,b);
if(h!=null)return h===""||h==="auto"?"0px":h}if(h<0||h==null){h=d.style[b];return h===""||h==="auto"?"0px":h}return typeof h==="string"?h:h+"px"}},set:function(d,e){if(Fa.test(e)){e=parseFloat(e);if(e>=0)return e+"px"}else return e}}});if(!c.support.opacity)c.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var d=a.style;d.zoom=1;var e=c.isNaN(b)?"":"alpha(opacity="+b*100+")",f=
d.filter||"";d.filter=Ea.test(f)?f.replace(Ea,e):d.filter+" "+e}};if(t.defaultView&&t.defaultView.getComputedStyle)Ga=function(a,b,d){var e;d=d.replace(ib,"-$1").toLowerCase();if(!(b=a.ownerDocument.defaultView))return B;if(b=b.getComputedStyle(a,null)){e=b.getPropertyValue(d);if(e===""&&!c.contains(a.ownerDocument.documentElement,a))e=c.style(a,d)}return e};if(t.documentElement.currentStyle)aa=function(a,b){var d,e,f=a.currentStyle&&a.currentStyle[b],h=a.style;if(!Fa.test(f)&&jb.test(f)){d=h.left;
e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;h.left=b==="fontSize"?"1em":f||0;f=h.pixelLeft+"px";h.left=d;a.runtimeStyle.left=e}return f===""?"auto":f};W=Ga||aa;if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!c.support.reliableHiddenOffsets&&(a.style.display||c.css(a,"display"))==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var mb=c.now(),nb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
ob=/^(?:select|textarea)/i,pb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,qb=/^(?:GET|HEAD)$/,Ra=/\[\]$/,T=/\=\?(&|$)/,ja=/\?/,rb=/([?&])_=[^&]*/,sb=/^(\w+:)?\/\/([^\/?#]+)/,tb=/%20/g,ub=/#.*$/,Ha=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!=="string"&&Ha)return Ha.apply(this,arguments);else if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b===
"object"){b=c.param(b,c.ajaxSettings.traditional);e="POST"}var h=this;c.ajax({url:a,type:e,dataType:"html",data:b,complete:function(l,k){if(k==="success"||k==="notmodified")h.html(f?c("<div>").append(l.responseText.replace(nb,"")).find(f):l.responseText);d&&h.each(d,[l.responseText,k,l])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||ob.test(this.nodeName)||pb.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(e){return{name:b.name,value:e}}):{name:b.name,value:d}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:e})},
getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:e})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new E.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",
script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(a){var b=c.extend(true,{},c.ajaxSettings,a),d,e,f,h=b.type.toUpperCase(),l=qb.test(h);b.url=b.url.replace(ub,"");b.context=a&&a.context!=null?a.context:b;if(b.data&&b.processData&&typeof b.data!=="string")b.data=c.param(b.data,b.traditional);if(b.dataType==="jsonp"){if(h==="GET")T.test(b.url)||(b.url+=(ja.test(b.url)?"&":"?")+(b.jsonp||"callback")+"=?");else if(!b.data||
!T.test(b.data))b.data=(b.data?b.data+"&":"")+(b.jsonp||"callback")+"=?";b.dataType="json"}if(b.dataType==="json"&&(b.data&&T.test(b.data)||T.test(b.url))){d=b.jsonpCallback||"jsonp"+mb++;if(b.data)b.data=(b.data+"").replace(T,"="+d+"$1");b.url=b.url.replace(T,"="+d+"$1");b.dataType="script";var k=E[d];E[d]=function(m){if(c.isFunction(k))k(m);else{E[d]=B;try{delete E[d]}catch(p){}}f=m;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);r&&r.removeChild(A)}}if(b.dataType==="script"&&b.cache===null)b.cache=
false;if(b.cache===false&&l){var o=c.now(),x=b.url.replace(rb,"$1_="+o);b.url=x+(x===b.url?(ja.test(b.url)?"&":"?")+"_="+o:"")}if(b.data&&l)b.url+=(ja.test(b.url)?"&":"?")+b.data;b.global&&c.active++===0&&c.event.trigger("ajaxStart");o=(o=sb.exec(b.url))&&(o[1]&&o[1].toLowerCase()!==location.protocol||o[2].toLowerCase()!==location.host);if(b.dataType==="script"&&h==="GET"&&o){var r=t.getElementsByTagName("head")[0]||t.documentElement,A=t.createElement("script");if(b.scriptCharset)A.charset=b.scriptCharset;
A.src=b.url;if(!d){var C=false;A.onload=A.onreadystatechange=function(){if(!C&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){C=true;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);A.onload=A.onreadystatechange=null;r&&A.parentNode&&r.removeChild(A)}}}r.insertBefore(A,r.firstChild);return B}var J=false,w=b.xhr();if(w){b.username?w.open(h,b.url,b.async,b.username,b.password):w.open(h,b.url,b.async);try{if(b.data!=null&&!l||a&&a.contentType)w.setRequestHeader("Content-Type",
b.contentType);if(b.ifModified){c.lastModified[b.url]&&w.setRequestHeader("If-Modified-Since",c.lastModified[b.url]);c.etag[b.url]&&w.setRequestHeader("If-None-Match",c.etag[b.url])}o||w.setRequestHeader("X-Requested-With","XMLHttpRequest");w.setRequestHeader("Accept",b.dataType&&b.accepts[b.dataType]?b.accepts[b.dataType]+", */*; q=0.01":b.accepts._default)}catch(I){}if(b.beforeSend&&b.beforeSend.call(b.context,w,b)===false){b.global&&c.active--===1&&c.event.trigger("ajaxStop");w.abort();return false}b.global&&
c.triggerGlobal(b,"ajaxSend",[w,b]);var L=w.onreadystatechange=function(m){if(!w||w.readyState===0||m==="abort"){J||c.handleComplete(b,w,e,f);J=true;if(w)w.onreadystatechange=c.noop}else if(!J&&w&&(w.readyState===4||m==="timeout")){J=true;w.onreadystatechange=c.noop;e=m==="timeout"?"timeout":!c.httpSuccess(w)?"error":b.ifModified&&c.httpNotModified(w,b.url)?"notmodified":"success";var p;if(e==="success")try{f=c.httpData(w,b.dataType,b)}catch(q){e="parsererror";p=q}if(e==="success"||e==="notmodified")d||
c.handleSuccess(b,w,e,f);else c.handleError(b,w,e,p);d||c.handleComplete(b,w,e,f);m==="timeout"&&w.abort();if(b.async)w=null}};try{var g=w.abort;w.abort=function(){w&&Function.prototype.call.call(g,w);L("abort")}}catch(i){}b.async&&b.timeout>0&&setTimeout(function(){w&&!J&&L("timeout")},b.timeout);try{w.send(l||b.data==null?null:b.data)}catch(n){c.handleError(b,w,null,n);c.handleComplete(b,w,e,f)}b.async||L();return w}},param:function(a,b){var d=[],e=function(h,l){l=c.isFunction(l)?l():l;d[d.length]=
encodeURIComponent(h)+"="+encodeURIComponent(l)};if(b===B)b=c.ajaxSettings.traditional;if(c.isArray(a)||a.jquery)c.each(a,function(){e(this.name,this.value)});else for(var f in a)da(f,a[f],b,e);return d.join("&").replace(tb,"+")}});c.extend({active:0,lastModified:{},etag:{},handleError:function(a,b,d,e){a.error&&a.error.call(a.context,b,d,e);a.global&&c.triggerGlobal(a,"ajaxError",[b,a,e])},handleSuccess:function(a,b,d,e){a.success&&a.success.call(a.context,e,d,b);a.global&&c.triggerGlobal(a,"ajaxSuccess",
[b,a])},handleComplete:function(a,b,d){a.complete&&a.complete.call(a.context,b,d);a.global&&c.triggerGlobal(a,"ajaxComplete",[b,a]);a.global&&c.active--===1&&c.event.trigger("ajaxStop")},triggerGlobal:function(a,b,d){(a.context&&a.context.url==null?c(a.context):c.event).trigger(b,d)},httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),
e=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(e)c.etag[b]=e;return a.status===304},httpData:function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&e.indexOf("xml")>=0;a=f?a.responseXML:a.responseText;f&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b==="json"||!b&&e.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&e.indexOf("javascript")>=0)c.globalEval(a);return a}});
if(E.ActiveXObject)c.ajaxSettings.xhr=function(){if(E.location.protocol!=="file:")try{return new E.XMLHttpRequest}catch(a){}try{return new E.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}};c.support.ajax=!!c.ajaxSettings.xhr();var ea={},vb=/^(?:toggle|show|hide)$/,wb=/^([+\-]=)?([\d+.\-]+)(.*)$/,ba,pa=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b,d){if(a||a===0)return this.animate(S("show",
3),a,b,d);else{d=0;for(var e=this.length;d<e;d++){a=this[d];b=a.style.display;if(!c.data(a,"olddisplay")&&b==="none")b=a.style.display="";b===""&&c.css(a,"display")==="none"&&c.data(a,"olddisplay",qa(a.nodeName))}for(d=0;d<e;d++){a=this[d];b=a.style.display;if(b===""||b==="none")a.style.display=c.data(a,"olddisplay")||""}return this}},hide:function(a,b,d){if(a||a===0)return this.animate(S("hide",3),a,b,d);else{a=0;for(b=this.length;a<b;a++){d=c.css(this[a],"display");d!=="none"&&c.data(this[a],"olddisplay",
d)}for(a=0;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b,d){var e=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(S("toggle",3),a,b,d);return this},fadeTo:function(a,b,d,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d,e)},animate:function(a,b,d,e){var f=c.speed(b,
d,e);if(c.isEmptyObject(a))return this.each(f.complete);return this[f.queue===false?"each":"queue"](function(){var h=c.extend({},f),l,k=this.nodeType===1,o=k&&c(this).is(":hidden"),x=this;for(l in a){var r=c.camelCase(l);if(l!==r){a[r]=a[l];delete a[l];l=r}if(a[l]==="hide"&&o||a[l]==="show"&&!o)return h.complete.call(this);if(k&&(l==="height"||l==="width")){h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(c.css(this,"display")==="inline"&&c.css(this,"float")==="none")if(c.support.inlineBlockNeedsLayout)if(qa(this.nodeName)===
"inline")this.style.display="inline-block";else{this.style.display="inline";this.style.zoom=1}else this.style.display="inline-block"}if(c.isArray(a[l])){(h.specialEasing=h.specialEasing||{})[l]=a[l][1];a[l]=a[l][0]}}if(h.overflow!=null)this.style.overflow="hidden";h.curAnim=c.extend({},a);c.each(a,function(A,C){var J=new c.fx(x,h,A);if(vb.test(C))J[C==="toggle"?o?"show":"hide":C](a);else{var w=wb.exec(C),I=J.cur()||0;if(w){var L=parseFloat(w[2]),g=w[3]||"px";if(g!=="px"){c.style(x,A,(L||1)+g);I=(L||
1)/J.cur()*I;c.style(x,A,I+g)}if(w[1])L=(w[1]==="-="?-1:1)*L+I;J.custom(I,L,g)}else J.custom(I,C,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);this.each(function(){for(var e=d.length-1;e>=0;e--)if(d[e].elem===this){b&&d[e](true);d.splice(e,1)}});b||this.dequeue();return this}});c.each({slideDown:S("show",1),slideUp:S("hide",1),slideToggle:S("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){c.fn[a]=function(d,e,f){return this.animate(b,
d,e,f)}});c.extend({speed:function(a,b,d){var e=a&&typeof a==="object"?c.extend({},a):{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};e.duration=c.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(){e.queue!==false&&c(this).dequeue();c.isFunction(e.old)&&e.old.call(this)};return e},easing:{linear:function(a,b,d,e){return d+e*a},swing:function(a,b,d,e){return(-Math.cos(a*
Math.PI)/2+0.5)*e+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a=parseFloat(c.css(this.elem,this.prop));return a&&a>-1E4?a:0},custom:function(a,b,d){function e(l){return f.step(l)}
var f=this,h=c.fx;this.startTime=c.now();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;this.pos=this.state=0;e.elem=this.elem;if(e()&&c.timers.push(e)&&!ba)ba=setInterval(h.tick,h.interval)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;
this.custom(this.cur(),0)},step:function(a){var b=c.now(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var e in this.options.curAnim)if(this.options.curAnim[e]!==true)d=false;if(d){if(this.options.overflow!=null&&!c.support.shrinkWrapBlocks){var f=this.elem,h=this.options;c.each(["","X","Y"],function(k,o){f.style["overflow"+o]=h.overflow[k]})}this.options.hide&&c(this.elem).hide();if(this.options.hide||
this.options.show)for(var l in this.options.curAnim)c.style(this.elem,l,this.options.orig[l]);this.options.complete.call(this.elem)}return false}else{a=b-this.startTime;this.state=a/this.options.duration;b=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||b](this.state,a,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=
c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(ba);ba=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===
b.elem}).length};var xb=/^t(?:able|d|h)$/i,Ia=/^(?:body|html)$/i;c.fn.offset="getBoundingClientRect"in t.documentElement?function(a){var b=this[0],d;if(a)return this.each(function(l){c.offset.setOffset(this,a,l)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,h=f.documentElement;if(!d||!c.contains(h,b))return d||{top:0,left:0};b=f.body;f=fa(f);return{top:d.top+(f.pageYOffset||c.support.boxModel&&
h.scrollTop||b.scrollTop)-(h.clientTop||b.clientTop||0),left:d.left+(f.pageXOffset||c.support.boxModel&&h.scrollLeft||b.scrollLeft)-(h.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(x){c.offset.setOffset(this,a,x)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d,e=b.offsetParent,f=b.ownerDocument,h=f.documentElement,l=f.body;d=(f=f.defaultView)?f.getComputedStyle(b,null):b.currentStyle;
for(var k=b.offsetTop,o=b.offsetLeft;(b=b.parentNode)&&b!==l&&b!==h;){if(c.offset.supportsFixedPosition&&d.position==="fixed")break;d=f?f.getComputedStyle(b,null):b.currentStyle;k-=b.scrollTop;o-=b.scrollLeft;if(b===e){k+=b.offsetTop;o+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&xb.test(b.nodeName))){k+=parseFloat(d.borderTopWidth)||0;o+=parseFloat(d.borderLeftWidth)||0}e=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"){k+=
parseFloat(d.borderTopWidth)||0;o+=parseFloat(d.borderLeftWidth)||0}d=d}if(d.position==="relative"||d.position==="static"){k+=l.offsetTop;o+=l.offsetLeft}if(c.offset.supportsFixedPosition&&d.position==="fixed"){k+=Math.max(h.scrollTop,l.scrollTop);o+=Math.max(h.scrollLeft,l.scrollLeft)}return{top:k,left:o}};c.offset={initialize:function(){var a=t.body,b=t.createElement("div"),d,e,f,h=parseFloat(c.css(a,"marginTop"))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",
height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(b,a.firstChild);d=b.firstChild;e=d.firstChild;f=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==5;this.doesAddBorderForTableAndCells=
f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==h;a.removeChild(b);c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.css(a,
"marginTop"))||0;d+=parseFloat(c.css(a,"marginLeft"))||0}return{top:b,left:d}},setOffset:function(a,b,d){var e=c.css(a,"position");if(e==="static")a.style.position="relative";var f=c(a),h=f.offset(),l=c.css(a,"top"),k=c.css(a,"left"),o=e==="absolute"&&c.inArray("auto",[l,k])>-1;e={};var x={};if(o)x=f.position();l=o?x.top:parseInt(l,10)||0;k=o?x.left:parseInt(k,10)||0;if(c.isFunction(b))b=b.call(a,d,h);if(b.top!=null)e.top=b.top-h.top+l;if(b.left!=null)e.left=b.left-h.left+k;"using"in b?b.using.call(a,
e):f.css(e)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=Ia.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.css(a,"marginTop"))||0;d.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(b[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||t.body;a&&!Ia.test(a.nodeName)&&
c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(e){var f=this[0],h;if(!f)return null;if(e!==B)return this.each(function(){if(h=fa(this))h.scrollTo(!a?e:c(h).scrollLeft(),a?e:c(h).scrollTop());else this[d]=e});else return(h=fa(f))?"pageXOffset"in h?h[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&h.document.documentElement[d]||h.document.body[d]:f[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
c.fn["inner"+b]=function(){return this[0]?parseFloat(c.css(this[0],d,"padding")):null};c.fn["outer"+b]=function(e){return this[0]?parseFloat(c.css(this[0],d,e?"margin":"border")):null};c.fn[d]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(l){var k=c(this);k[d](e.call(this,l,k[d]()))});if(c.isWindow(f))return f.document.compatMode==="CSS1Compat"&&f.document.documentElement["client"+b]||f.document.body["client"+b];else if(f.nodeType===9)return Math.max(f.documentElement["client"+
b],f.body["scroll"+b],f.documentElement["scroll"+b],f.body["offset"+b],f.documentElement["offset"+b]);else if(e===B){f=c.css(f,d);var h=parseFloat(f);return c.isNaN(h)?f:h}else return this.css(d,typeof e==="string"?e:e+"px")}})})(window);

(function(){jQuery.color={};jQuery.color.make=function(G,H,J,I){var A={};A.r=G||0;A.g=H||0;A.b=J||0;A.a=I!=null?I:1;A.add=function(C,D){for(var E=0;E<C.length;++E){A[C.charAt(E)]+=D}return A.normalize()};A.scale=function(C,D){for(var E=0;E<C.length;++E){A[C.charAt(E)]*=D}return A.normalize()};A.toString=function(){if(A.a>=1){return"rgb("+[A.r,A.g,A.b].join(",")+")"}else{return"rgba("+[A.r,A.g,A.b,A.a].join(",")+")"}};A.normalize=function(){function C(E,D,F){return D<E?E:(D>F?F:D)}A.r=C(0,parseInt(A.r),255);A.g=C(0,parseInt(A.g),255);A.b=C(0,parseInt(A.b),255);A.a=C(0,A.a,1);return A};A.clone=function(){return jQuery.color.make(A.r,A.b,A.g,A.a)};return A.normalize()};jQuery.color.extract=function(E,F){var A;do{A=E.css(F).toLowerCase();if(A!=""&&A!="transparent"){break}E=E.parent()}while(!jQuery.nodeName(E.get(0),"body"));if(A=="rgba(0, 0, 0, 0)"){A="transparent"}return jQuery.color.parse(A)};jQuery.color.parse=function(A){var F,H=jQuery.color.make;if(F=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(A)){return H(parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10))}if(F=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A)){return H(parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10),parseFloat(F[4]))}if(F=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(A)){return H(parseFloat(F[1])*2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55)}if(F=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A)){return H(parseFloat(F[1])*2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55,parseFloat(F[4]))}if(F=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(A)){return H(parseInt(F[1],16),parseInt(F[2],16),parseInt(F[3],16))}if(F=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(A)){return H(parseInt(F[1]+F[1],16),parseInt(F[2]+F[2],16),parseInt(F[3]+F[3],16))}var G=jQuery.trim(A).toLowerCase();if(G=="transparent"){return H(255,255,255,0)}else{F=B[G];return H(F[0],F[1],F[2])}};var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();(function(C){function B(l,W,X,E){var O=[],g={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},P=null,AC=null,AD=null,Y=null,AJ=null,s={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},e={left:0,right:0,top:0,bottom:0},y=0,Q=0,I=0,t=0,L={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},G=this;G.setData=f;G.setupGrid=k;G.draw=AH;G.getPlaceholder=function(){return l};G.getCanvas=function(){return P};G.getPlotOffset=function(){return e};G.width=function(){return I};G.height=function(){return t};G.offset=function(){var AK=AD.offset();AK.left+=e.left;AK.top+=e.top;return AK};G.getData=function(){return O};G.getAxes=function(){return s};G.getOptions=function(){return g};G.highlight=AE;G.unhighlight=x;G.triggerRedrawOverlay=q;G.pointOffset=function(AK){return{left:parseInt(T(AK,"xaxis").p2c(+AK.x)+e.left),top:parseInt(T(AK,"yaxis").p2c(+AK.y)+e.top)}};G.hooks=L;b(G);r(X);c();f(W);k();AH();AG();function Z(AM,AK){AK=[G].concat(AK);for(var AL=0;AL<AM.length;++AL){AM[AL].apply(this,AK)}}function b(){for(var AK=0;AK<E.length;++AK){var AL=E[AK];AL.init(G);if(AL.options){C.extend(true,g,AL.options)}}}function r(AK){C.extend(true,g,AK);if(g.grid.borderColor==null){g.grid.borderColor=g.grid.color}if(g.xaxis.noTicks&&g.xaxis.ticks==null){g.xaxis.ticks=g.xaxis.noTicks}if(g.yaxis.noTicks&&g.yaxis.ticks==null){g.yaxis.ticks=g.yaxis.noTicks}if(g.grid.coloredAreas){g.grid.markings=g.grid.coloredAreas}if(g.grid.coloredAreasColor){g.grid.markingsColor=g.grid.coloredAreasColor}if(g.lines){C.extend(true,g.series.lines,g.lines)}if(g.points){C.extend(true,g.series.points,g.points)}if(g.bars){C.extend(true,g.series.bars,g.bars)}if(g.shadowSize){g.series.shadowSize=g.shadowSize}for(var AL in L){if(g.hooks[AL]&&g.hooks[AL].length){L[AL]=L[AL].concat(g.hooks[AL])}}Z(L.processOptions,[g])}function f(AK){O=M(AK);U();m()}function M(AN){var AL=[];for(var AK=0;AK<AN.length;++AK){var AM=C.extend(true,{},g.series);if(AN[AK].data){AM.data=AN[AK].data;delete AN[AK].data;C.extend(true,AM,AN[AK]);AN[AK].data=AM.data}else{AM.data=AN[AK]}AL.push(AM)}return AL}function T(AM,AK){var AL=AM[AK];if(!AL||AL==1){return s[AK]}if(typeof AL=="number"){return s[AK.charAt(0)+AL+AK.slice(1)]}return AL}function U(){var AP;var AV=O.length,AK=[],AN=[];for(AP=0;AP<O.length;++AP){var AS=O[AP].color;if(AS!=null){--AV;if(typeof AS=="number"){AN.push(AS)}else{AK.push(C.color.parse(O[AP].color))}}}for(AP=0;AP<AN.length;++AP){AV=Math.max(AV,AN[AP]+1)}var AL=[],AO=0;AP=0;while(AL.length<AV){var AR;if(g.colors.length==AP){AR=C.color.make(100,100,100)}else{AR=C.color.parse(g.colors[AP])}var AM=AO%2==1?-1:1;AR.scale("rgb",1+AM*Math.ceil(AO/2)*0.2);AL.push(AR);++AP;if(AP>=g.colors.length){AP=0;++AO}}var AQ=0,AW;for(AP=0;AP<O.length;++AP){AW=O[AP];if(AW.color==null){AW.color=AL[AQ].toString();++AQ}else{if(typeof AW.color=="number"){AW.color=AL[AW.color].toString()}}if(AW.lines.show==null){var AU,AT=true;for(AU in AW){if(AW[AU].show){AT=false;break}}if(AT){AW.lines.show=true}}AW.xaxis=T(AW,"xaxis");AW.yaxis=T(AW,"yaxis")}}function m(){var AW=Number.POSITIVE_INFINITY,AQ=Number.NEGATIVE_INFINITY,Ac,Aa,AZ,AV,AL,AR,Ab,AX,AP,AO,AK,Ai,Af,AT;for(AK in s){s[AK].datamin=AW;s[AK].datamax=AQ;s[AK].used=false}function AN(Al,Ak,Aj){if(Ak<Al.datamin){Al.datamin=Ak}if(Aj>Al.datamax){Al.datamax=Aj}}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];AR.datapoints={points:[]};Z(L.processRawData,[AR,AR.data,AR.datapoints])}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];var Ah=AR.data,Ae=AR.datapoints.format;if(!Ae){Ae=[];Ae.push({x:true,number:true,required:true});Ae.push({y:true,number:true,required:true});if(AR.bars.show){Ae.push({y:true,number:true,required:false,defaultValue:0})}AR.datapoints.format=Ae}if(AR.datapoints.pointsize!=null){continue}if(AR.datapoints.pointsize==null){AR.datapoints.pointsize=Ae.length}AX=AR.datapoints.pointsize;Ab=AR.datapoints.points;insertSteps=AR.lines.show&&AR.lines.steps;AR.xaxis.used=AR.yaxis.used=true;for(Aa=AZ=0;Aa<Ah.length;++Aa,AZ+=AX){AT=Ah[Aa];var AM=AT==null;if(!AM){for(AV=0;AV<AX;++AV){Ai=AT[AV];Af=Ae[AV];if(Af){if(Af.number&&Ai!=null){Ai=+Ai;if(isNaN(Ai)){Ai=null}}if(Ai==null){if(Af.required){AM=true}if(Af.defaultValue!=null){Ai=Af.defaultValue}}}Ab[AZ+AV]=Ai}}if(AM){for(AV=0;AV<AX;++AV){Ai=Ab[AZ+AV];if(Ai!=null){Af=Ae[AV];if(Af.x){AN(AR.xaxis,Ai,Ai)}if(Af.y){AN(AR.yaxis,Ai,Ai)}}Ab[AZ+AV]=null}}else{if(insertSteps&&AZ>0&&Ab[AZ-AX]!=null&&Ab[AZ-AX]!=Ab[AZ]&&Ab[AZ-AX+1]!=Ab[AZ+1]){for(AV=0;AV<AX;++AV){Ab[AZ+AX+AV]=Ab[AZ+AV]}Ab[AZ+1]=Ab[AZ-AX+1];AZ+=AX}}}}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];Z(L.processDatapoints,[AR,AR.datapoints])}for(Ac=0;Ac<O.length;++Ac){AR=O[Ac];Ab=AR.datapoints.points,AX=AR.datapoints.pointsize;var AS=AW,AY=AW,AU=AQ,Ad=AQ;for(Aa=0;Aa<Ab.length;Aa+=AX){if(Ab[Aa]==null){continue}for(AV=0;AV<AX;++AV){Ai=Ab[Aa+AV];Af=Ae[AV];if(!Af){continue}if(Af.x){if(Ai<AS){AS=Ai}if(Ai>AU){AU=Ai}}if(Af.y){if(Ai<AY){AY=Ai}if(Ai>Ad){Ad=Ai}}}}if(AR.bars.show){var Ag=AR.bars.align=="left"?0:-AR.bars.barWidth/2;if(AR.bars.horizontal){AY+=Ag;Ad+=Ag+AR.bars.barWidth}else{AS+=Ag;AU+=Ag+AR.bars.barWidth}}AN(AR.xaxis,AS,AU);AN(AR.yaxis,AY,Ad)}for(AK in s){if(s[AK].datamin==AW){s[AK].datamin=null}if(s[AK].datamax==AQ){s[AK].datamax=null}}}function c(){function AK(AM,AL){var AN=document.createElement("canvas");AN.width=AM;AN.height=AL;if(C.browser.msie){AN=window.G_vmlCanvasManager.initElement(AN)}return AN}y=l.width();Q=l.height();l.html("");if(l.css("position")=="static"){l.css("position","relative")}if(y<=0||Q<=0){throw"Invalid dimensions for plot, width = "+y+", height = "+Q}if(C.browser.msie){window.G_vmlCanvasManager.init_(document)}P=C(AK(y,Q)).appendTo(l).get(0);Y=P.getContext("2d");AC=C(AK(y,Q)).css({position:"absolute",left:0,top:0}).appendTo(l).get(0);AJ=AC.getContext("2d");AJ.stroke()}function AG(){AD=C([AC,P]);if(g.grid.hoverable){AD.mousemove(D)}if(g.grid.clickable){AD.click(d)}Z(L.bindEvents,[AD])}function k(){function AL(AT,AU){function AP(AV){return AV}var AS,AO,AQ=AU.transform||AP,AR=AU.inverseTransform;if(AT==s.xaxis||AT==s.x2axis){AS=AT.scale=I/(AQ(AT.max)-AQ(AT.min));AO=AQ(AT.min);if(AQ==AP){AT.p2c=function(AV){return(AV-AO)*AS}}else{AT.p2c=function(AV){return(AQ(AV)-AO)*AS}}if(!AR){AT.c2p=function(AV){return AO+AV/AS}}else{AT.c2p=function(AV){return AR(AO+AV/AS)}}}else{AS=AT.scale=t/(AQ(AT.max)-AQ(AT.min));AO=AQ(AT.max);if(AQ==AP){AT.p2c=function(AV){return(AO-AV)*AS}}else{AT.p2c=function(AV){return(AO-AQ(AV))*AS}}if(!AR){AT.c2p=function(AV){return AO-AV/AS}}else{AT.c2p=function(AV){return AR(AO-AV/AS)}}}}function AN(AR,AT){var AQ,AS=[],AP;AR.labelWidth=AT.labelWidth;AR.labelHeight=AT.labelHeight;if(AR==s.xaxis||AR==s.x2axis){if(AR.labelWidth==null){AR.labelWidth=y/(AR.ticks.length>0?AR.ticks.length:1)}if(AR.labelHeight==null){AS=[];for(AQ=0;AQ<AR.ticks.length;++AQ){AP=AR.ticks[AQ].label;if(AP){AS.push('<div class="tickLabel" style="float:left;width:'+AR.labelWidth+'px">'+AP+"</div>")}}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+AS.join("")+'<div style="clear:left"></div></div>').appendTo(l);AR.labelHeight=AO.height();AO.remove()}}}else{if(AR.labelWidth==null||AR.labelHeight==null){for(AQ=0;AQ<AR.ticks.length;++AQ){AP=AR.ticks[AQ].label;if(AP){AS.push('<div class="tickLabel">'+AP+"</div>")}}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;font-size:smaller">'+AS.join("")+"</div>").appendTo(l);if(AR.labelWidth==null){AR.labelWidth=AO.width()}if(AR.labelHeight==null){AR.labelHeight=AO.find("div").height()}AO.remove()}}}if(AR.labelWidth==null){AR.labelWidth=0}if(AR.labelHeight==null){AR.labelHeight=0}}function AM(){var AP=g.grid.borderWidth;for(i=0;i<O.length;++i){AP=Math.max(AP,2*(O[i].points.radius+O[i].points.lineWidth/2))}e.left=e.right=e.top=e.bottom=AP;var AO=g.grid.labelMargin+g.grid.borderWidth;if(s.xaxis.labelHeight>0){e.bottom=Math.max(AP,s.xaxis.labelHeight+AO)}if(s.yaxis.labelWidth>0){e.left=Math.max(AP,s.yaxis.labelWidth+AO)}if(s.x2axis.labelHeight>0){e.top=Math.max(AP,s.x2axis.labelHeight+AO)}if(s.y2axis.labelWidth>0){e.right=Math.max(AP,s.y2axis.labelWidth+AO)}I=y-e.left-e.right;t=Q-e.bottom-e.top}var AK;for(AK in s){K(s[AK],g[AK])}if(g.grid.show){for(AK in s){F(s[AK],g[AK]);p(s[AK],g[AK]);AN(s[AK],g[AK])}AM()}else{e.left=e.right=e.top=e.bottom=0;I=y;t=Q}for(AK in s){AL(s[AK],g[AK])}if(g.grid.show){h()}AI()}function K(AN,AQ){var AM=+(AQ.min!=null?AQ.min:AN.datamin),AK=+(AQ.max!=null?AQ.max:AN.datamax),AP=AK-AM;if(AP==0){var AL=AK==0?1:0.01;if(AQ.min==null){AM-=AL}if(AQ.max==null||AQ.min!=null){AK+=AL}}else{var AO=AQ.autoscaleMargin;if(AO!=null){if(AQ.min==null){AM-=AP*AO;if(AM<0&&AN.datamin!=null&&AN.datamin>=0){AM=0}}if(AQ.max==null){AK+=AP*AO;if(AK>0&&AN.datamax!=null&&AN.datamax<=0){AK=0}}}}AN.min=AM;AN.max=AK}function F(AP,AS){var AO;if(typeof AS.ticks=="number"&&AS.ticks>0){AO=AS.ticks}else{if(AP==s.xaxis||AP==s.x2axis){AO=0.3*Math.sqrt(y)}else{AO=0.3*Math.sqrt(Q)}}var AX=(AP.max-AP.min)/AO,AZ,AT,AV,AW,AR,AM,AL;if(AS.mode=="time"){var AU={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var AY=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var AN=0;if(AS.minTickSize!=null){if(typeof AS.tickSize=="number"){AN=AS.tickSize}else{AN=AS.minTickSize[0]*AU[AS.minTickSize[1]]}}for(AR=0;AR<AY.length-1;++AR){if(AX<(AY[AR][0]*AU[AY[AR][1]]+AY[AR+1][0]*AU[AY[AR+1][1]])/2&&AY[AR][0]*AU[AY[AR][1]]>=AN){break}}AZ=AY[AR][0];AV=AY[AR][1];if(AV=="year"){AM=Math.pow(10,Math.floor(Math.log(AX/AU.year)/Math.LN10));AL=(AX/AU.year)/AM;if(AL<1.5){AZ=1}else{if(AL<3){AZ=2}else{if(AL<7.5){AZ=5}else{AZ=10}}}AZ*=AM}if(AS.tickSize){AZ=AS.tickSize[0];AV=AS.tickSize[1]}AT=function(Ac){var Ah=[],Af=Ac.tickSize[0],Ai=Ac.tickSize[1],Ag=new Date(Ac.min);var Ab=Af*AU[Ai];if(Ai=="second"){Ag.setUTCSeconds(A(Ag.getUTCSeconds(),Af))}if(Ai=="minute"){Ag.setUTCMinutes(A(Ag.getUTCMinutes(),Af))}if(Ai=="hour"){Ag.setUTCHours(A(Ag.getUTCHours(),Af))}if(Ai=="month"){Ag.setUTCMonth(A(Ag.getUTCMonth(),Af))}if(Ai=="year"){Ag.setUTCFullYear(A(Ag.getUTCFullYear(),Af))}Ag.setUTCMilliseconds(0);if(Ab>=AU.minute){Ag.setUTCSeconds(0)}if(Ab>=AU.hour){Ag.setUTCMinutes(0)}if(Ab>=AU.day){Ag.setUTCHours(0)}if(Ab>=AU.day*4){Ag.setUTCDate(1)}if(Ab>=AU.year){Ag.setUTCMonth(0)}var Ak=0,Aj=Number.NaN,Ad;do{Ad=Aj;Aj=Ag.getTime();Ah.push({v:Aj,label:Ac.tickFormatter(Aj,Ac)});if(Ai=="month"){if(Af<1){Ag.setUTCDate(1);var Aa=Ag.getTime();Ag.setUTCMonth(Ag.getUTCMonth()+1);var Ae=Ag.getTime();Ag.setTime(Aj+Ak*AU.hour+(Ae-Aa)*Af);Ak=Ag.getUTCHours();Ag.setUTCHours(0)}else{Ag.setUTCMonth(Ag.getUTCMonth()+Af)}}else{if(Ai=="year"){Ag.setUTCFullYear(Ag.getUTCFullYear()+Af)}else{Ag.setTime(Aj+Ab)}}}while(Aj<Ac.max&&Aj!=Ad);return Ah};AW=function(Aa,Ad){var Af=new Date(Aa);if(AS.timeformat!=null){return C.plot.formatDate(Af,AS.timeformat,AS.monthNames)}var Ab=Ad.tickSize[0]*AU[Ad.tickSize[1]];var Ac=Ad.max-Ad.min;var Ae=(AS.twelveHourClock)?" %p":"";if(Ab<AU.minute){fmt="%h:%M:%S"+Ae}else{if(Ab<AU.day){if(Ac<2*AU.day){fmt="%h:%M"+Ae}else{fmt="%b %d %h:%M"+Ae}}else{if(Ab<AU.month){fmt="%b %d"}else{if(Ab<AU.year){if(Ac<AU.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return C.plot.formatDate(Af,fmt,AS.monthNames)}}else{var AK=AS.tickDecimals;var AQ=-Math.floor(Math.log(AX)/Math.LN10);if(AK!=null&&AQ>AK){AQ=AK}AM=Math.pow(10,-AQ);AL=AX/AM;if(AL<1.5){AZ=1}else{if(AL<3){AZ=2;if(AL>2.25&&(AK==null||AQ+1<=AK)){AZ=2.5;++AQ}}else{if(AL<7.5){AZ=5}else{AZ=10}}}AZ*=AM;if(AS.minTickSize!=null&&AZ<AS.minTickSize){AZ=AS.minTickSize}if(AS.tickSize!=null){AZ=AS.tickSize}AP.tickDecimals=Math.max(0,(AK!=null)?AK:AQ);AT=function(Ac){var Ae=[];var Af=A(Ac.min,Ac.tickSize),Ab=0,Aa=Number.NaN,Ad;do{Ad=Aa;Aa=Af+Ab*Ac.tickSize;Ae.push({v:Aa,label:Ac.tickFormatter(Aa,Ac)});++Ab}while(Aa<Ac.max&&Aa!=Ad);return Ae};AW=function(Aa,Ab){return Aa.toFixed(Ab.tickDecimals)}}AP.tickSize=AV?[AZ,AV]:AZ;AP.tickGenerator=AT;if(C.isFunction(AS.tickFormatter)){AP.tickFormatter=function(Aa,Ab){return""+AS.tickFormatter(Aa,Ab)}}else{AP.tickFormatter=AW}}function p(AO,AQ){AO.ticks=[];if(!AO.used){return }if(AQ.ticks==null){AO.ticks=AO.tickGenerator(AO)}else{if(typeof AQ.ticks=="number"){if(AQ.ticks>0){AO.ticks=AO.tickGenerator(AO)}}else{if(AQ.ticks){var AP=AQ.ticks;if(C.isFunction(AP)){AP=AP({min:AO.min,max:AO.max})}var AN,AK;for(AN=0;AN<AP.length;++AN){var AL=null;var AM=AP[AN];if(typeof AM=="object"){AK=AM[0];if(AM.length>1){AL=AM[1]}}else{AK=AM}if(AL==null){AL=AO.tickFormatter(AK,AO)}AO.ticks[AN]={v:AK,label:AL}}}}}if(AQ.autoscaleMargin!=null&&AO.ticks.length>0){if(AQ.min==null){AO.min=Math.min(AO.min,AO.ticks[0].v)}if(AQ.max==null&&AO.ticks.length>1){AO.max=Math.max(AO.max,AO.ticks[AO.ticks.length-1].v)}}}function AH(){Y.clearRect(0,0,y,Q);var AL=g.grid;if(AL.show&&!AL.aboveData){S()}for(var AK=0;AK<O.length;++AK){AA(O[AK])}Z(L.draw,[Y]);if(AL.show&&AL.aboveData){S()}}function N(AL,AR){var AO=AR+"axis",AK=AR+"2axis",AN,AQ,AP,AM;if(AL[AO]){AN=s[AO];AQ=AL[AO].from;AP=AL[AO].to}else{if(AL[AK]){AN=s[AK];AQ=AL[AK].from;AP=AL[AK].to}else{AN=s[AO];AQ=AL[AR+"1"];AP=AL[AR+"2"]}}if(AQ!=null&&AP!=null&&AQ>AP){return{from:AP,to:AQ,axis:AN}}return{from:AQ,to:AP,axis:AN}}function S(){var AO;Y.save();Y.translate(e.left,e.top);if(g.grid.backgroundColor){Y.fillStyle=R(g.grid.backgroundColor,t,0,"rgba(255, 255, 255, 0)");Y.fillRect(0,0,I,t)}var AL=g.grid.markings;if(AL){if(C.isFunction(AL)){AL=AL({xmin:s.xaxis.min,xmax:s.xaxis.max,ymin:s.yaxis.min,ymax:s.yaxis.max,xaxis:s.xaxis,yaxis:s.yaxis,x2axis:s.x2axis,y2axis:s.y2axis})}for(AO=0;AO<AL.length;++AO){var AK=AL[AO],AQ=N(AK,"x"),AN=N(AK,"y");if(AQ.from==null){AQ.from=AQ.axis.min}if(AQ.to==null){AQ.to=AQ.axis.max}if(AN.from==null){AN.from=AN.axis.min}if(AN.to==null){AN.to=AN.axis.max}if(AQ.to<AQ.axis.min||AQ.from>AQ.axis.max||AN.to<AN.axis.min||AN.from>AN.axis.max){continue}AQ.from=Math.max(AQ.from,AQ.axis.min);AQ.to=Math.min(AQ.to,AQ.axis.max);AN.from=Math.max(AN.from,AN.axis.min);AN.to=Math.min(AN.to,AN.axis.max);if(AQ.from==AQ.to&&AN.from==AN.to){continue}AQ.from=AQ.axis.p2c(AQ.from);AQ.to=AQ.axis.p2c(AQ.to);AN.from=AN.axis.p2c(AN.from);AN.to=AN.axis.p2c(AN.to);if(AQ.from==AQ.to||AN.from==AN.to){Y.beginPath();Y.strokeStyle=AK.color||g.grid.markingsColor;Y.lineWidth=AK.lineWidth||g.grid.markingsLineWidth;Y.moveTo(AQ.from,AN.from);Y.lineTo(AQ.to,AN.to);Y.stroke()}else{Y.fillStyle=AK.color||g.grid.markingsColor;Y.fillRect(AQ.from,AN.to,AQ.to-AQ.from,AN.from-AN.to)}}}Y.lineWidth=1;Y.strokeStyle=g.grid.tickColor;Y.beginPath();var AM,AP=s.xaxis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=s.xaxis.max){continue}Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,0);Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,t)}AP=s.yaxis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max){continue}Y.moveTo(0,Math.floor(AP.p2c(AM))+Y.lineWidth/2);Y.lineTo(I,Math.floor(AP.p2c(AM))+Y.lineWidth/2)}AP=s.x2axis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max){continue}Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,-5);Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,5)}AP=s.y2axis;for(AO=0;AO<AP.ticks.length;++AO){AM=AP.ticks[AO].v;if(AM<=AP.min||AM>=AP.max){continue}Y.moveTo(I-5,Math.floor(AP.p2c(AM))+Y.lineWidth/2);Y.lineTo(I+5,Math.floor(AP.p2c(AM))+Y.lineWidth/2)}Y.stroke();if(g.grid.borderWidth){var AR=g.grid.borderWidth;Y.lineWidth=AR;Y.strokeStyle=g.grid.borderColor;Y.strokeRect(-AR/2,-AR/2,I+AR,t+AR)}Y.restore()}function h(){l.find(".tickLabels").remove();var AK=['<div class="tickLabels" style="font-size:smaller;color:'+g.grid.color+'">'];function AM(AP,AQ){for(var AO=0;AO<AP.ticks.length;++AO){var AN=AP.ticks[AO];if(!AN.label||AN.v<AP.min||AN.v>AP.max){continue}AK.push(AQ(AN,AP))}}var AL=g.grid.labelMargin+g.grid.borderWidth;AM(s.xaxis,function(AN,AO){return'<div style="position:absolute;top:'+(e.top+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>"});AM(s.yaxis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;right:"+(e.right+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:right" class="tickLabel">'+AN.label+"</div>"});AM(s.x2axis,function(AN,AO){return'<div style="position:absolute;bottom:'+(e.bottom+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>"});AM(s.y2axis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;left:"+(e.left+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:left" class="tickLabel">'+AN.label+"</div>"});AK.push("</div>");l.append(AK.join(""))}function AA(AK){if(AK.lines.show){a(AK)}if(AK.bars.show){n(AK)}if(AK.points.show){o(AK)}}function a(AN){function AM(AY,AZ,AR,Ad,Ac){var Ae=AY.points,AS=AY.pointsize,AW=null,AV=null;Y.beginPath();for(var AX=AS;AX<Ae.length;AX+=AS){var AU=Ae[AX-AS],Ab=Ae[AX-AS+1],AT=Ae[AX],Aa=Ae[AX+1];if(AU==null||AT==null){continue}if(Ab<=Aa&&Ab<Ac.min){if(Aa<Ac.min){continue}AU=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;Ab=Ac.min}else{if(Aa<=Ab&&Aa<Ac.min){if(Ab<Ac.min){continue}AT=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;Aa=Ac.min}}if(Ab>=Aa&&Ab>Ac.max){if(Aa>Ac.max){continue}AU=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;Ab=Ac.max}else{if(Aa>=Ab&&Aa>Ac.max){if(Ab>Ac.max){continue}AT=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;Aa=Ac.max}}if(AU<=AT&&AU<Ad.min){if(AT<Ad.min){continue}Ab=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;AU=Ad.min}else{if(AT<=AU&&AT<Ad.min){if(AU<Ad.min){continue}Aa=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;AT=Ad.min}}if(AU>=AT&&AU>Ad.max){if(AT>Ad.max){continue}Ab=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;AU=Ad.max}else{if(AT>=AU&&AT>Ad.max){if(AU>Ad.max){continue}Aa=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;AT=Ad.max}}if(AU!=AW||Ab!=AV){Y.moveTo(Ad.p2c(AU)+AZ,Ac.p2c(Ab)+AR)}AW=AT;AV=Aa;Y.lineTo(Ad.p2c(AT)+AZ,Ac.p2c(Aa)+AR)}Y.stroke()}function AO(AX,Ae,Ac){var Af=AX.points,AR=AX.pointsize,AS=Math.min(Math.max(0,Ac.min),Ac.max),Aa,AV=0,Ad=false;for(var AW=AR;AW<Af.length;AW+=AR){var AU=Af[AW-AR],Ab=Af[AW-AR+1],AT=Af[AW],AZ=Af[AW+1];if(Ad&&AU!=null&&AT==null){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));Y.fill();Ad=false;continue}if(AU==null||AT==null){continue}if(AU<=AT&&AU<Ae.min){if(AT<Ae.min){continue}Ab=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;AU=Ae.min}else{if(AT<=AU&&AT<Ae.min){if(AU<Ae.min){continue}AZ=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;AT=Ae.min}}if(AU>=AT&&AU>Ae.max){if(AT>Ae.max){continue}Ab=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;AU=Ae.max}else{if(AT>=AU&&AT>Ae.max){if(AU>Ae.max){continue}AZ=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;AT=Ae.max}}if(!Ad){Y.beginPath();Y.moveTo(Ae.p2c(AU),Ac.p2c(AS));Ad=true}if(Ab>=Ac.max&&AZ>=Ac.max){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.max));Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.max));AV=AT;continue}else{if(Ab<=Ac.min&&AZ<=Ac.min){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.min));Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.min));AV=AT;continue}}var Ag=AU,AY=AT;if(Ab<=AZ&&Ab<Ac.min&&AZ>=Ac.min){AU=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;Ab=Ac.min}else{if(AZ<=Ab&&AZ<Ac.min&&Ab>=Ac.min){AT=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;AZ=Ac.min}}if(Ab>=AZ&&Ab>Ac.max&&AZ<=Ac.max){AU=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;Ab=Ac.max}else{if(AZ>=Ab&&AZ>Ac.max&&Ab<=Ac.max){AT=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;AZ=Ac.max}}if(AU!=Ag){if(Ab<=Ac.min){Aa=Ac.min}else{Aa=Ac.max}Y.lineTo(Ae.p2c(Ag),Ac.p2c(Aa));Y.lineTo(Ae.p2c(AU),Ac.p2c(Aa))}Y.lineTo(Ae.p2c(AU),Ac.p2c(Ab));Y.lineTo(Ae.p2c(AT),Ac.p2c(AZ));if(AT!=AY){if(AZ<=Ac.min){Aa=Ac.min}else{Aa=Ac.max}Y.lineTo(Ae.p2c(AT),Ac.p2c(Aa));Y.lineTo(Ae.p2c(AY),Ac.p2c(Aa))}AV=Math.max(AT,AY)}if(Ad){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));Y.fill()}}Y.save();Y.translate(e.left,e.top);Y.lineJoin="round";var AP=AN.lines.lineWidth,AK=AN.shadowSize;if(AP>0&&AK>0){Y.lineWidth=AK;Y.strokeStyle="rgba(0,0,0,0.1)";var AQ=Math.PI/18;AM(AN.datapoints,Math.sin(AQ)*(AP/2+AK/2),Math.cos(AQ)*(AP/2+AK/2),AN.xaxis,AN.yaxis);Y.lineWidth=AK/2;AM(AN.datapoints,Math.sin(AQ)*(AP/2+AK/4),Math.cos(AQ)*(AP/2+AK/4),AN.xaxis,AN.yaxis)}Y.lineWidth=AP;Y.strokeStyle=AN.color;var AL=V(AN.lines,AN.color,0,t);if(AL){Y.fillStyle=AL;AO(AN.datapoints,AN.xaxis,AN.yaxis)}if(AP>0){AM(AN.datapoints,0,0,AN.xaxis,AN.yaxis)}Y.restore()}function o(AN){function AP(AU,AT,Ab,AR,AV,AZ,AY){var Aa=AU.points,AQ=AU.pointsize;for(var AS=0;AS<Aa.length;AS+=AQ){var AX=Aa[AS],AW=Aa[AS+1];if(AX==null||AX<AZ.min||AX>AZ.max||AW<AY.min||AW>AY.max){continue}Y.beginPath();Y.arc(AZ.p2c(AX),AY.p2c(AW)+AR,AT,0,AV,false);if(Ab){Y.fillStyle=Ab;Y.fill()}Y.stroke()}}Y.save();Y.translate(e.left,e.top);var AO=AN.lines.lineWidth,AL=AN.shadowSize,AK=AN.points.radius;if(AO>0&&AL>0){var AM=AL/2;Y.lineWidth=AM;Y.strokeStyle="rgba(0,0,0,0.1)";AP(AN.datapoints,AK,null,AM+AM/2,Math.PI,AN.xaxis,AN.yaxis);Y.strokeStyle="rgba(0,0,0,0.2)";AP(AN.datapoints,AK,null,AM/2,Math.PI,AN.xaxis,AN.yaxis)}Y.lineWidth=AO;Y.strokeStyle=AN.color;AP(AN.datapoints,AK,V(AN.points,AN.color),0,2*Math.PI,AN.xaxis,AN.yaxis);Y.restore()}function AB(AV,AU,Ad,AQ,AY,AN,AL,AT,AS,Ac,AZ){var AM,Ab,AR,AX,AO,AK,AW,AP,Aa;if(AZ){AP=AK=AW=true;AO=false;AM=Ad;Ab=AV;AX=AU+AQ;AR=AU+AY;if(Ab<AM){Aa=Ab;Ab=AM;AM=Aa;AO=true;AK=false}}else{AO=AK=AW=true;AP=false;AM=AV+AQ;Ab=AV+AY;AR=Ad;AX=AU;if(AX<AR){Aa=AX;AX=AR;AR=Aa;AP=true;AW=false}}if(Ab<AT.min||AM>AT.max||AX<AS.min||AR>AS.max){return }if(AM<AT.min){AM=AT.min;AO=false}if(Ab>AT.max){Ab=AT.max;AK=false}if(AR<AS.min){AR=AS.min;AP=false}if(AX>AS.max){AX=AS.max;AW=false}AM=AT.p2c(AM);AR=AS.p2c(AR);Ab=AT.p2c(Ab);AX=AS.p2c(AX);if(AL){Ac.beginPath();Ac.moveTo(AM,AR);Ac.lineTo(AM,AX);Ac.lineTo(Ab,AX);Ac.lineTo(Ab,AR);Ac.fillStyle=AL(AR,AX);Ac.fill()}if(AO||AK||AW||AP){Ac.beginPath();Ac.moveTo(AM,AR+AN);if(AO){Ac.lineTo(AM,AX+AN)}else{Ac.moveTo(AM,AX+AN)}if(AW){Ac.lineTo(Ab,AX+AN)}else{Ac.moveTo(Ab,AX+AN)}if(AK){Ac.lineTo(Ab,AR+AN)}else{Ac.moveTo(Ab,AR+AN)}if(AP){Ac.lineTo(AM,AR+AN)}else{Ac.moveTo(AM,AR+AN)}Ac.stroke()}}function n(AM){function AL(AS,AR,AU,AP,AT,AW,AV){var AX=AS.points,AO=AS.pointsize;for(var AQ=0;AQ<AX.length;AQ+=AO){if(AX[AQ]==null){continue}AB(AX[AQ],AX[AQ+1],AX[AQ+2],AR,AU,AP,AT,AW,AV,Y,AM.bars.horizontal)}}Y.save();Y.translate(e.left,e.top);Y.lineWidth=AM.bars.lineWidth;Y.strokeStyle=AM.color;var AK=AM.bars.align=="left"?0:-AM.bars.barWidth/2;var AN=AM.bars.fill?function(AO,AP){return V(AM.bars,AM.color,AO,AP)}:null;AL(AM.datapoints,AK,AK+AM.bars.barWidth,0,AN,AM.xaxis,AM.yaxis);Y.restore()}function V(AM,AK,AL,AO){var AN=AM.fill;if(!AN){return null}if(AM.fillColor){return R(AM.fillColor,AL,AO,AK)}var AP=C.color.parse(AK);AP.a=typeof AN=="number"?AN:0.4;AP.normalize();return AP.toString()}function AI(){l.find(".legend").remove();if(!g.legend.show){return }var AP=[],AN=false,AV=g.legend.labelFormatter,AU,AR;for(i=0;i<O.length;++i){AU=O[i];AR=AU.label;if(!AR){continue}if(i%g.legend.noColumns==0){if(AN){AP.push("</tr>")}AP.push("<tr>");AN=true}if(AV){AR=AV(AR,AU)}AP.push('<td class="legendColorBox"><div style="border:1px solid '+g.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+AU.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+AR+"</td>")}if(AN){AP.push("</tr>")}if(AP.length==0){return }var AT='<table style="font-size:smaller;color:'+g.grid.color+'">'+AP.join("")+"</table>";if(g.legend.container!=null){C(g.legend.container).html(AT)}else{var AQ="",AL=g.legend.position,AM=g.legend.margin;if(AM[0]==null){AM=[AM,AM]}if(AL.charAt(0)=="n"){AQ+="top:"+(AM[1]+e.top)+"px;"}else{if(AL.charAt(0)=="s"){AQ+="bottom:"+(AM[1]+e.bottom)+"px;"}}if(AL.charAt(1)=="e"){AQ+="right:"+(AM[0]+e.right)+"px;"}else{if(AL.charAt(1)=="w"){AQ+="left:"+(AM[0]+e.left)+"px;"}}var AS=C('<div class="legend">'+AT.replace('style="','style="position:absolute;'+AQ+";")+"</div>").appendTo(l);if(g.legend.backgroundOpacity!=0){var AO=g.legend.backgroundColor;if(AO==null){AO=g.grid.backgroundColor;if(AO&&typeof AO=="string"){AO=C.color.parse(AO)}else{AO=C.color.extract(AS,"background-color")}AO.a=1;AO=AO.toString()}var AK=AS.children();C('<div style="position:absolute;width:'+AK.width()+"px;height:"+AK.height()+"px;"+AQ+"background-color:"+AO+';"> </div>').prependTo(AS).css("opacity",g.legend.backgroundOpacity)}}}var w=[],J=null;function AF(AR,AP,AM){var AX=g.grid.mouseActiveRadius,Aj=AX*AX+1,Ah=null,Aa=false,Af,Ad;for(Af=0;Af<O.length;++Af){if(!AM(O[Af])){continue}var AY=O[Af],AQ=AY.xaxis,AO=AY.yaxis,Ae=AY.datapoints.points,Ac=AY.datapoints.pointsize,AZ=AQ.c2p(AR),AW=AO.c2p(AP),AL=AX/AQ.scale,AK=AX/AO.scale;if(AY.lines.show||AY.points.show){for(Ad=0;Ad<Ae.length;Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+1];if(AT==null){continue}if(AT-AZ>AL||AT-AZ<-AL||AS-AW>AK||AS-AW<-AK){continue}var AV=Math.abs(AQ.p2c(AT)-AR),AU=Math.abs(AO.p2c(AS)-AP),Ab=AV*AV+AU*AU;if(Ab<=Aj){Aj=Ab;Ah=[Af,Ad/Ac]}}}if(AY.bars.show&&!Ah){var AN=AY.bars.align=="left"?0:-AY.bars.barWidth/2,Ag=AN+AY.bars.barWidth;for(Ad=0;Ad<Ae.length;Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+1],Ai=Ae[Ad+2];if(AT==null){continue}if(O[Af].bars.horizontal?(AZ<=Math.max(Ai,AT)&&AZ>=Math.min(Ai,AT)&&AW>=AS+AN&&AW<=AS+Ag):(AZ>=AT+AN&&AZ<=AT+Ag&&AW>=Math.min(Ai,AS)&&AW<=Math.max(Ai,AS))){Ah=[Af,Ad/Ac]}}}}if(Ah){Af=Ah[0];Ad=Ah[1];Ac=O[Af].datapoints.pointsize;return{datapoint:O[Af].datapoints.points.slice(Ad*Ac,(Ad+1)*Ac),dataIndex:Ad,series:O[Af],seriesIndex:Af}}return null}function D(AK){if(g.grid.hoverable){H("plothover",AK,function(AL){return AL.hoverable!=false})}}function d(AK){H("plotclick",AK,function(AL){return AL.clickable!=false})}function H(AL,AK,AM){var AN=AD.offset(),AS={pageX:AK.pageX,pageY:AK.pageY},AQ=AK.pageX-AN.left-e.left,AO=AK.pageY-AN.top-e.top;if(s.xaxis.used){AS.x=s.xaxis.c2p(AQ)}if(s.yaxis.used){AS.y=s.yaxis.c2p(AO)}if(s.x2axis.used){AS.x2=s.x2axis.c2p(AQ)}if(s.y2axis.used){AS.y2=s.y2axis.c2p(AO)}var AT=AF(AQ,AO,AM);if(AT){AT.pageX=parseInt(AT.series.xaxis.p2c(AT.datapoint[0])+AN.left+e.left);AT.pageY=parseInt(AT.series.yaxis.p2c(AT.datapoint[1])+AN.top+e.top)}if(g.grid.autoHighlight){for(var AP=0;AP<w.length;++AP){var AR=w[AP];if(AR.auto==AL&&!(AT&&AR.series==AT.series&&AR.point==AT.datapoint)){x(AR.series,AR.point)}}if(AT){AE(AT.series,AT.datapoint,AL)}}l.trigger(AL,[AS,AT])}function q(){if(!J){J=setTimeout(v,30)}}function v(){J=null;AJ.save();AJ.clearRect(0,0,y,Q);AJ.translate(e.left,e.top);var AL,AK;for(AL=0;AL<w.length;++AL){AK=w[AL];if(AK.series.bars.show){z(AK.series,AK.point)}else{u(AK.series,AK.point)}}AJ.restore();Z(L.drawOverlay,[AJ])}function AE(AM,AK,AN){if(typeof AM=="number"){AM=O[AM]}if(typeof AK=="number"){AK=AM.data[AK]}var AL=j(AM,AK);if(AL==-1){w.push({series:AM,point:AK,auto:AN});q()}else{if(!AN){w[AL].auto=false}}}function x(AM,AK){if(AM==null&&AK==null){w=[];q()}if(typeof AM=="number"){AM=O[AM]}if(typeof AK=="number"){AK=AM.data[AK]}var AL=j(AM,AK);if(AL!=-1){w.splice(AL,1);q()}}function j(AM,AN){for(var AK=0;AK<w.length;++AK){var AL=w[AK];if(AL.series==AM&&AL.point[0]==AN[0]&&AL.point[1]==AN[1]){return AK}}return -1}function u(AN,AM){var AL=AM[0],AR=AM[1],AQ=AN.xaxis,AP=AN.yaxis;if(AL<AQ.min||AL>AQ.max||AR<AP.min||AR>AP.max){return }var AO=AN.points.radius+AN.points.lineWidth/2;AJ.lineWidth=AO;AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();var AK=1.5*AO;AJ.beginPath();AJ.arc(AQ.p2c(AL),AP.p2c(AR),AK,0,2*Math.PI,false);AJ.stroke()}function z(AN,AK){AJ.lineWidth=AN.bars.lineWidth;AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();var AM=C.color.parse(AN.color).scale("a",0.5).toString();var AL=AN.bars.align=="left"?0:-AN.bars.barWidth/2;AB(AK[0],AK[1],AK[2]||0,AL,AL+AN.bars.barWidth,0,function(){return AM},AN.xaxis,AN.yaxis,AJ,AN.bars.horizontal)}function R(AM,AL,AQ,AO){if(typeof AM=="string"){return AM}else{var AP=Y.createLinearGradient(0,AQ,0,AL);for(var AN=0,AK=AM.colors.length;AN<AK;++AN){var AR=AM.colors[AN];if(typeof AR!="string"){AR=C.color.parse(AO).scale("rgb",AR.brightness);AR.a*=AR.opacity;AR=AR.toString()}AP.addColorStop(AN/(AK-1),AR)}return AP}}}C.plot=function(G,E,D){var F=new B(C(G),E,D,C.plot.plugins);return F};C.plot.plugins=[];C.plot.formatDate=function(H,E,G){var L=function(N){N=""+N;return N.length==1?"0"+N:N};var D=[];var M=false;var K=H.getUTCHours();var I=K<12;if(G==null){G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(E.search(/%p|%P/)!=-1){if(K>12){K=K-12}else{if(K==0){K=12}}}for(var F=0;F<E.length;++F){var J=E.charAt(F);if(M){switch(J){case"h":J=""+K;break;case"H":J=L(K);break;case"M":J=L(H.getUTCMinutes());break;case"S":J=L(H.getUTCSeconds());break;case"d":J=""+H.getUTCDate();break;case"m":J=""+(H.getUTCMonth()+1);break;case"y":J=""+H.getUTCFullYear();break;case"b":J=""+G[H.getUTCMonth()];break;case"p":J=(I)?("am"):("pm");break;case"P":J=(I)?("AM"):("PM");break}D.push(J);M=false}else{if(J=="%"){M=true}else{D.push(J)}}}return D.join("")};function A(E,D){return D*Math.floor(E/D)}})(jQuery);
/*
Flot plugin for selecting regions.

The plugin defines the following options:

  selection: {
    mode: null or "x" or "y" or "xy",
    color: color
  }

You enable selection support by setting the mode to one of "x", "y" or
"xy". In "x" mode, the user will only be able to specify the x range,
similarly for "y" mode. For "xy", the selection becomes a rectangle
where both ranges can be specified. "color" is color of the selection.

When selection support is enabled, a "plotselected" event will be emitted
on the DOM element you passed into the plot function. The event
handler gets one extra parameter with the ranges selected on the axes,
like this:

  placeholder.bind("plotselected", function(event, ranges) {
    alert("You selected " + ranges.xaxis.from + " to " + ranges.xaxis.to)
    // similar for yaxis, secondary axes are in x2axis
    // and y2axis if present
  });

The "plotselected" event is only fired when the user has finished
making the selection. A "plotselecting" event is fired during the
process with the same parameters as the "plotselected" event, in case
you want to know what's happening while it's happening,

A "plotunselected" event with no arguments is emitted when the user
clicks the mouse to remove the selection.

The plugin allso adds the following methods to the plot object:

- setSelection(ranges, preventEvent)

  Set the selection rectangle. The passed in ranges is on the same
  form as returned in the "plotselected" event. If the selection
  mode is "x", you should put in either an xaxis (or x2axis) object,
  if the mode is "y" you need to put in an yaxis (or y2axis) object
  and both xaxis/x2axis and yaxis/y2axis if the selection mode is
  "xy", like this:

    setSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });

  setSelection will trigger the "plotselected" event when called. If
  you don't want that to happen, e.g. if you're inside a
  "plotselected" handler, pass true as the second parameter.
  
- clearSelection(preventEvent)

  Clear the selection rectangle. Pass in true to avoid getting a
  "plotunselected" event.

- getSelection()

  Returns the current selection in the same format as the
  "plotselected" event. If there's currently no selection, the
  function returns null.

*/

(function ($) {
    function init(plot) {
        var selection = {
                first: { x: -1, y: -1}, second: { x: -1, y: -1},
                show: false,
                active: false
            };

        // FIXME: The drag handling implemented here should be
        // abstracted out, there's some similar code from a library in
        // the navigation plugin, this should be massaged a bit to fit
        // the Flot cases here better and reused. Doing this would
        // make this plugin much slimmer.
        var savedhandlers = {};

        function onMouseMove(e) {
            if (selection.active) {
                plot.getPlaceholder().trigger("plotselecting", [ getSelection() ]);

                updateSelection(e);
            }
        }

        function onMouseDown(e) {
            if (e.which != 1)  // only accept left-click
                return;
            
            // cancel out any text selections
            document.body.focus();

            // prevent text selection and drag in old-school browsers
            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {
                savedhandlers.onselectstart = document.onselectstart;
                document.onselectstart = function () { return false; };
            }
            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {
                savedhandlers.ondrag = document.ondrag;
                document.ondrag = function () { return false; };
            }

            setSelectionPos(selection.first, e);

            selection.active = true;
            
            $(document).one("mouseup", onMouseUp);
        }

        function onMouseUp(e) {
            // revert drag stuff for old-school browsers
            if (document.onselectstart !== undefined)
                document.onselectstart = savedhandlers.onselectstart;
            if (document.ondrag !== undefined)
                document.ondrag = savedhandlers.ondrag;

            // no more draggy-dee-drag
            selection.active = false;
            updateSelection(e);

            if (selectionIsSane())
                triggerSelectedEvent();
            else {
                // this counts as a clear
                plot.getPlaceholder().trigger("plotunselected", [ ]);
                plot.getPlaceholder().trigger("plotselecting", [ null ]);
            }

            return false;
        }

        function getSelection() {
            if (!selectionIsSane())
                return null;

            var x1 = Math.min(selection.first.x, selection.second.x),
                x2 = Math.max(selection.first.x, selection.second.x),
                y1 = Math.max(selection.first.y, selection.second.y),
                y2 = Math.min(selection.first.y, selection.second.y);

            var r = {};
            var axes = plot.getAxes();
            if (axes.xaxis.used)
                r.xaxis = { from: axes.xaxis.c2p(x1), to: axes.xaxis.c2p(x2) };
            if (axes.x2axis.used)
                r.x2axis = { from: axes.x2axis.c2p(x1), to: axes.x2axis.c2p(x2) };
            if (axes.yaxis.used)
                r.yaxis = { from: axes.yaxis.c2p(y1), to: axes.yaxis.c2p(y2) };
            if (axes.y2axis.used)
                r.y2axis = { from: axes.y2axis.c2p(y1), to: axes.y2axis.c2p(y2) };
            return r;
        }

        function triggerSelectedEvent() {
            var r = getSelection();

            plot.getPlaceholder().trigger("plotselected", [ r ]);

            // backwards-compat stuff, to be removed in future
            var axes = plot.getAxes();
            if (axes.xaxis.used && axes.yaxis.used)
                plot.getPlaceholder().trigger("selected", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);
        }

        function clamp(min, value, max) {
            return value < min? min: (value > max? max: value);
        }

        function setSelectionPos(pos, e) {
            var o = plot.getOptions();
            var offset = plot.getPlaceholder().offset();
            var plotOffset = plot.getPlotOffset();
            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());
            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());

            if (o.selection.mode == "y")
                pos.x = pos == selection.first? 0: plot.width();

            if (o.selection.mode == "x")
                pos.y = pos == selection.first? 0: plot.height();
        }

        function updateSelection(pos) {
            if (pos.pageX == null)
                return;

            setSelectionPos(selection.second, pos);
            if (selectionIsSane()) {
                selection.show = true;
                plot.triggerRedrawOverlay();
            }
            else
                clearSelection(true);
        }

        function clearSelection(preventEvent) {
            if (selection.show) {
                selection.show = false;
                plot.triggerRedrawOverlay();
                if (!preventEvent)
                    plot.getPlaceholder().trigger("plotunselected", [ ]);
            }
        }

        function setSelection(ranges, preventEvent) {
            var axis, range, axes = plot.getAxes();
            var o = plot.getOptions();

            if (o.selection.mode == "y") {
                selection.first.x = 0;
                selection.second.x = plot.width();
            }
            else {
                axis = ranges["xaxis"]? axes["xaxis"]: (ranges["x2axis"]? axes["x2axis"]: axes["xaxis"]);
                range = ranges["xaxis"] || ranges["x2axis"] || { from:ranges["x1"], to:ranges["x2"] }
                selection.first.x = axis.p2c(Math.min(range.from, range.to));
                selection.second.x = axis.p2c(Math.max(range.from, range.to));
            }

            if (o.selection.mode == "x") {
                selection.first.y = 0;
                selection.second.y = plot.height();
            }
            else {
                axis = ranges["yaxis"]? axes["yaxis"]: (ranges["y2axis"]? axes["y2axis"]: axes["yaxis"]);
                range = ranges["yaxis"] || ranges["y2axis"] || { from:ranges["y1"], to:ranges["y2"] }
                selection.first.y = axis.p2c(Math.min(range.from, range.to));
                selection.second.y = axis.p2c(Math.max(range.from, range.to));
            }

            selection.show = true;
            plot.triggerRedrawOverlay();
            if (!preventEvent)
                triggerSelectedEvent();
        }

        function selectionIsSane() {
            var minSize = 5;
            return Math.abs(selection.second.x - selection.first.x) >= minSize &&
                Math.abs(selection.second.y - selection.first.y) >= minSize;
        }

        plot.clearSelection = clearSelection;
        plot.setSelection = setSelection;
        plot.getSelection = getSelection;

        plot.hooks.bindEvents.push(function(plot, eventHolder) {
            var o = plot.getOptions();
            if (o.selection.mode != null)
                eventHolder.mousemove(onMouseMove);

            if (o.selection.mode != null)
                eventHolder.mousedown(onMouseDown);
        });


        plot.hooks.drawOverlay.push(function (plot, ctx) {
            // draw selection
            if (selection.show && selectionIsSane()) {
                var plotOffset = plot.getPlotOffset();
                var o = plot.getOptions();

                ctx.save();
                ctx.translate(plotOffset.left, plotOffset.top);

                var c = $.color.parse(o.selection.color);

                ctx.strokeStyle = c.scale('a', 0.8).toString();
                ctx.lineWidth = 1;
                ctx.lineJoin = "round";
                ctx.fillStyle = c.scale('a', 0.4).toString();

                var x = Math.min(selection.first.x, selection.second.x),
                    y = Math.min(selection.first.y, selection.second.y),
                    w = Math.abs(selection.second.x - selection.first.x),
                    h = Math.abs(selection.second.y - selection.first.y);

                ctx.fillRect(x, y, w, h);
                ctx.strokeRect(x, y, w, h);

                ctx.restore();
            }
        });
    }

    $.plot.plugins.push({
        init: init,
        options: {
            selection: {
                mode: null, // one of null, "x", "y" or "xy"
                color: "#e8cfac"
            }
        },
        name: 'selection',
        version: '1.0'
    });
})(jQuery);
(function($){var undefined;$.jqplot=function(target,data,options){var _data,_options;if(data==null){throw"No data specified";}if(data.constructor==Array&&data.length==0||data[0].constructor!=Array){throw"Improper Data Array";}if(options==null){if(data instanceof Array){_data=data;_options=null}else if(data.constructor==Object){_data=null;_options=data}}else{_data=data;_options=options}var plot=new jqPlot();plot.init(target,_data,_options);plot.draw();return plot};$.jqplot.debug=1;$.jqplot.config={debug:1,enablePlugins:true,defaultHeight:300,defaultWidth:400};$.jqplot.enablePlugins=$.jqplot.config.enablePlugins;$.jqplot.preInitHooks=[];$.jqplot.postInitHooks=[];$.jqplot.preParseOptionsHooks=[];$.jqplot.postParseOptionsHooks=[];$.jqplot.preDrawHooks=[];$.jqplot.postDrawHooks=[];$.jqplot.preDrawSeriesHooks=[];$.jqplot.postDrawSeriesHooks=[];$.jqplot.preDrawLegendHooks=[];$.jqplot.addLegendRowHooks=[];$.jqplot.preSeriesInitHooks=[];$.jqplot.postSeriesInitHooks=[];$.jqplot.preParseSeriesOptionsHooks=[];$.jqplot.postParseSeriesOptionsHooks=[];$.jqplot.eventListenerHooks=[];$.jqplot.preDrawSeriesShadowHooks=[];$.jqplot.postDrawSeriesShadowHooks=[];$.jqplot.ElemContainer=function(){this._elem;this._plotWidth;this._plotHeight;this._plotDimensions={height:null,width:null}};$.jqplot.ElemContainer.prototype.getWidth=function(){if(this._elem){return this._elem.outerWidth(true)}else{return null}};$.jqplot.ElemContainer.prototype.getHeight=function(){if(this._elem){return this._elem.outerHeight(true)}else{return null}};$.jqplot.ElemContainer.prototype.getPosition=function(){if(this._elem){return this._elem.position()}else{return{top:null,left:null,bottom:null,right:null}}};$.jqplot.ElemContainer.prototype.getTop=function(){return this.getPosition().top};$.jqplot.ElemContainer.prototype.getLeft=function(){return this.getPosition().left};$.jqplot.ElemContainer.prototype.getBottom=function(){return this._elem.css('bottom')};$.jqplot.ElemContainer.prototype.getRight=function(){return this._elem.css('right')};function Axis(name){$.jqplot.ElemContainer.call(this);this.name=name;this._series=[];this.show=false;this.tickRenderer=$.jqplot.AxisTickRenderer;this.tickOptions={};this.labelRenderer=$.jqplot.AxisLabelRenderer;this.labelOptions={};this.label=null;this.showLabel=true;this.min=null;this.max=null;this.autoscale=false;this.autoscaleOnZoom=null;this.pad=1.2;this.padMax=null;this.padMin=null;this.ticks=[];this.numberTicks;this.tickInterval;this.renderer=$.jqplot.LinearAxisRenderer;this.rendererOptions={};this.showTicks=true;this.showTickMarks=true;this.showMinorTicks=true;this.useSeriesColor=false;this.borderWidth=null;this.borderColor=null;this._dataBounds={min:null,max:null};this._offsets={min:null,max:null};this._ticks=[];this._label=null;this.syncTicks=null;this.tickSpacing=75;this._min=null;this._max=null;this._tickInterval=null;this._numberTicks=null;this.__ticks=null}Axis.prototype=new $.jqplot.ElemContainer();Axis.prototype.constructor=Axis;Axis.prototype.init=function(){this.renderer=new this.renderer();this.tickOptions.axis=this.name;if(this.label==null||this.label==''){this.showLabel=false}else{this.labelOptions.label=this.label}if(this.showLabel==false){this.labelOptions.show=false}if(this.pad==0){this.pad=1.0}if(this.padMax==0){this.padMax=1.0}if(this.padMin==0){this.padMin=1.0}if(this.padMax==null){this.padMax=(this.pad-1)/2+1}if(this.padMin==null){this.padMin=(this.pad-1)/2+1}this.pad=this.padMax+this.padMin-1;if(this.min!=null||this.max!=null){this.autoscale=false}if(this.syncTicks==null&&this.name.indexOf('y')>-1){this.syncTicks=true}else if(this.syncTicks==null){this.syncTicks=false}this.renderer.init.call(this,this.rendererOptions)};Axis.prototype.draw=function(ctx){return this.renderer.draw.call(this,ctx)};Axis.prototype.set=function(){this.renderer.set.call(this)};Axis.prototype.pack=function(pos,offsets){if(this.show){this.renderer.pack.call(this,pos,offsets)}if(this._min==null){this._min=this.min;this._max=this.max;this._tickInterval=this.tickInterval;this._numberTicks=this.numberTicks;this.__ticks=this._ticks}};Axis.prototype.reset=function(){this.renderer.reset.call(this)};Axis.prototype.resetScale=function(){this.min=null;this.max=null;this.numberTicks=null;this.tickInterval=null};function Legend(options){$.jqplot.ElemContainer.call(this);this.show=false;this.location='ne';this.xoffset=12;this.yoffset=12;this.border;this.background;this.textColor;this.fontFamily;this.fontSize;this.rowSpacing='0.5em';this.renderer=$.jqplot.TableLegendRenderer;this.rendererOptions={};this.preDraw=false;this.escapeHtml=false;this._series=[];$.extend(true,this,options)}Legend.prototype=new $.jqplot.ElemContainer();Legend.prototype.constructor=Legend;Legend.prototype.init=function(){this.renderer=new this.renderer();this.renderer.init.call(this,this.rendererOptions)};Legend.prototype.draw=function(offsets){for(var i=0;i<$.jqplot.preDrawLegendHooks.length;i++){$.jqplot.preDrawLegendHooks[i].call(this,offsets)}return this.renderer.draw.call(this,offsets)};Legend.prototype.pack=function(offsets){this.renderer.pack.call(this,offsets)};function Title(text){$.jqplot.ElemContainer.call(this);this.text=text;this.show=true;this.fontFamily;this.fontSize;this.textAlign;this.textColor;this.renderer=$.jqplot.DivTitleRenderer;this.rendererOptions={}}Title.prototype=new $.jqplot.ElemContainer();Title.prototype.constructor=Title;Title.prototype.init=function(){this.renderer=new this.renderer();this.renderer.init.call(this,this.rendererOptions)};Title.prototype.draw=function(width){return this.renderer.draw.call(this,width)};Title.prototype.pack=function(){this.renderer.pack.call(this)};function Series(){$.jqplot.ElemContainer.call(this);this.show=true;this.xaxis='xaxis';this._xaxis;this.yaxis='yaxis';this._yaxis;this.gridBorderWidth=2.0;this.renderer=$.jqplot.LineRenderer;this.rendererOptions={};this.data=[];this.gridData=[];this.label='';this.showLabel=true;this.color;this.lineWidth=2.5;this.shadow=true;this.shadowAngle=45;this.shadowOffset=1.25;this.shadowDepth=3;this.shadowAlpha='0.1';this.breakOnNull=false;this.markerRenderer=$.jqplot.MarkerRenderer;this.markerOptions={};this.showLine=true;this.showMarker=true;this.index;this.fill=false;this.fillColor;this.fillAlpha;this.fillAndStroke=false;this.disableStack=false;this._stack=false;this.neighborThreshold=4;this.fillToZero=false;this.fillAxis='y';this.useNegativeColors=true;this._stackData=[];this._plotData=[];this._plotValues={x:[],y:[]};this._intervals={x:{},y:{}};this._prevPlotData=[];this._prevGridData=[];this._stackAxis='y';this._primaryAxis='_xaxis';this.canvas=new $.jqplot.GenericCanvas();this.shadowCanvas=new $.jqplot.GenericCanvas();this.plugins={};this._sumy=0;this._sumx=0;this.minX=null;this.maxX=null;this.minY=null;this.maxY=null}Series.prototype=new $.jqplot.ElemContainer();Series.prototype.constructor=Series;Series.prototype.init=function(index,gridbw,plot){this.index=index;this.gridBorderWidth=gridbw;var d=this.data;for(var i=0;i<d.length;i++){if(!this.breakOnNull){if(d[i]==null||d[i][0]==null||d[i][1]==null){d.splice(i,1);continue}}else{if(d[i]==null||d[i][0]==null||d[i][1]==null){var undefined}}}if(!this.fillColor){this.fillColor=this.color}if(this.fillAlpha){var comp=$.jqplot.normalize2rgb(this.fillColor);var comp=$.jqplot.getColorComponents(comp);this.fillColor='rgba('+comp[0]+','+comp[1]+','+comp[2]+','+this.fillAlpha+')'}this.renderer=new this.renderer();this.renderer.init.call(this,this.rendererOptions,plot);this.markerRenderer=new this.markerRenderer();if(!this.markerOptions.color){this.markerOptions.color=this.color}if(this.markerOptions.show==null){this.markerOptions.show=this.showMarker}this.markerRenderer.init(this.markerOptions)};Series.prototype.draw=function(sctx,opts,plot){var options=(opts==undefined)?{}:opts;sctx=(sctx==undefined)?this.canvas._ctx:sctx;for(var j=0;j<$.jqplot.preDrawSeriesHooks.length;j++){$.jqplot.preDrawSeriesHooks[j].call(this,sctx,options)}if(this.show){this.renderer.setGridData.call(this,plot);if(!options.preventJqPlotSeriesDrawTrigger){$(sctx.canvas).trigger('jqplotSeriesDraw',[this.data,this.gridData])}var data=[];if(options.data){data=options.data}else if(!this._stack){data=this.data}else{data=this._plotData}var gridData=options.gridData||this.renderer.makeGridData.call(this,data,plot);this.renderer.draw.call(this,sctx,gridData,options)}for(var j=0;j<$.jqplot.postDrawSeriesHooks.length;j++){$.jqplot.postDrawSeriesHooks[j].call(this,sctx,options)}};Series.prototype.drawShadow=function(sctx,opts,plot){var options=(opts==undefined)?{}:opts;sctx=(sctx==undefined)?this.shadowCanvas._ctx:sctx;for(var j=0;j<$.jqplot.preDrawSeriesShadowHooks.length;j++){$.jqplot.preDrawSeriesShadowHooks[j].call(this,sctx,options)}if(this.shadow){this.renderer.setGridData.call(this,plot);var data=[];if(options.data){data=options.data}else if(!this._stack){data=this.data}else{data=this._plotData}var gridData=options.gridData||this.renderer.makeGridData.call(this,data,plot);this.renderer.drawShadow.call(this,sctx,gridData,options)}for(var j=0;j<$.jqplot.postDrawSeriesShadowHooks.length;j++){$.jqplot.postDrawSeriesShadowHooks[j].call(this,sctx,options)}};function Grid(){$.jqplot.ElemContainer.call(this);this.drawGridlines=true;this.gridLineColor='#cccccc';this.gridLineWidth=1.0;this.background='#fffdf6';this.borderColor='#999999';this.borderWidth=2.0;this.shadow=true;this.shadowAngle=45;this.shadowOffset=1.5;this.shadowWidth=3;this.shadowDepth=3;this.shadowAlpha='0.07';this._left;this._top;this._right;this._bottom;this._width;this._height;this._axes=[];this.renderer=$.jqplot.CanvasGridRenderer;this.rendererOptions={};this._offsets={top:null,bottom:null,left:null,right:null}}Grid.prototype=new $.jqplot.ElemContainer();Grid.prototype.constructor=Grid;Grid.prototype.init=function(){this.renderer=new this.renderer();this.renderer.init.call(this,this.rendererOptions)};Grid.prototype.createElement=function(offsets){this._offsets=offsets;return this.renderer.createElement.call(this)};Grid.prototype.draw=function(){this.renderer.draw.call(this)};$.jqplot.GenericCanvas=function(){$.jqplot.ElemContainer.call(this);this._ctx};$.jqplot.GenericCanvas.prototype=new $.jqplot.ElemContainer();$.jqplot.GenericCanvas.prototype.constructor=$.jqplot.GenericCanvas;$.jqplot.GenericCanvas.prototype.createElement=function(offsets,clss,plotDimensions){this._offsets=offsets;var klass='jqplot';if(clss!=undefined){klass=clss}var elem=document.createElement('canvas');if(plotDimensions!=undefined){this._plotDimensions=plotDimensions}elem.width=this._plotDimensions.width-this._offsets.left-this._offsets.right;elem.height=this._plotDimensions.height-this._offsets.top-this._offsets.bottom;this._elem=$(elem);this._elem.addClass(klass);this._elem.css({position:'absolute',left:this._offsets.left,top:this._offsets.top});if($.browser.msie){window.G_vmlCanvasManager.init_(document)}if($.browser.msie){elem=window.G_vmlCanvasManager.initElement(elem)}return this._elem};$.jqplot.GenericCanvas.prototype.setContext=function(){this._ctx=this._elem.get(0).getContext("2d");return this._ctx};function jqPlot(){this.data=[];this.targetId=null;this.graphName='graph';this.performOnPlot=function(){};this.performAfterPlot=function(){};this.target=null;this.defaults={axesDefaults:{},axes:{xaxis:{},yaxis:{},x2axis:{},y2axis:{},y3axis:{},y4axis:{},y5axis:{},y6axis:{},y7axis:{},y8axis:{},y9axis:{}},seriesDefaults:{},gridPadding:{top:10,right:10,bottom:23,left:10},series:[]};this.series=[];this.axes={xaxis:new Axis('xaxis'),yaxis:new Axis('yaxis'),x2axis:new Axis('x2axis'),y2axis:new Axis('y2axis'),y3axis:new Axis('y3axis'),y4axis:new Axis('y4axis'),y5axis:new Axis('y5axis'),y6axis:new Axis('y6axis'),y7axis:new Axis('y7axis'),y8axis:new Axis('y8axis'),y9axis:new Axis('y9axis')};this.grid=new Grid();this.legend=new Legend();this.baseCanvas=new $.jqplot.GenericCanvas();this.eventCanvas=new $.jqplot.GenericCanvas();this._width=null;this._height=null;this._plotDimensions={height:null,width:null};this._gridPadding={top:10,right:10,bottom:10,left:10};this.syncXTicks=true;this.syncYTicks=true;this.seriesColors=["#4bb2c5","#EAA228","#c5b47f","#579575","#839557","#958c12","#953579","#4b5de4","#d8b83f","#ff5800","#0085cc","#c747a3","#cddf54","#FBD178","#26B4E3","#bd70c7"];this.negativeSeriesColors=["#498991","#C08840","#9F9274","#546D61","#646C4A","#6F6621","#6E3F5F","#4F64B0","#A89050","#C45923","#187399","#945381","#959E5C","#C7AF7B","#478396","#907294"];this.sortData=true;var seriesColorsIndex=0;this.textColor;this.fontFamily;this.fontSize;this.title=new Title();this.options={};this.stackSeries=false;this._stackData=[];this._plotData=[];this.plugins={};this._drawCount=0;this.drawIfHidden=false;this._sumy=0;this._sumx=0;this.colorGenerator=$.jqplot.ColorGenerator;this.init=function(target,data,options){for(var i=0;i<$.jqplot.preInitHooks.length;i++){$.jqplot.preInitHooks[i].call(this,target,data,options)}if(options){if(options.graphName)this.graphName=options.graphName;if(options.performOnPlot)this.performOnPlot=options.performOnPlot;if(options.performAfterPlot)this.performAfterPlot=options.performAfterPlot}this.targetId='#'+target;this.target=$('#'+target);if(!this.target.get(0)){throw"No plot target specified";}if(this.target.css('position')=='static'){this.target.css('position','relative')}if(!this.target.hasClass('jqplot-target')){this.target.addClass('jqplot-target')}if(!this.target.height()){var h;if(options&&options.height){h=parseInt(options.height,10)}else if(this.target.attr('data-height')){h=parseInt(this.target.attr('data-height'),10)}else{h=parseInt($.jqplot.config.defaultHeight,10)}this._height=h;this.target.css('height',h+'px')}else{this._height=this.target.height()}if(!this.target.width()){var w;if(options&&options.width){w=parseInt(options.width,10)}else if(this.target.attr('data-width')){w=parseInt(this.target.attr('data-width'),10)}else{w=parseInt($.jqplot.config.defaultWidth,10)}this._width=w;this.target.css('width',w+'px')}else{this._width=this.target.width()}this._plotDimensions.height=this._height;this._plotDimensions.width=this._width;this.grid._plotDimensions=this._plotDimensions;this.title._plotDimensions=this._plotDimensions;this.baseCanvas._plotDimensions=this._plotDimensions;this.eventCanvas._plotDimensions=this._plotDimensions;this.legend._plotDimensions=this._plotDimensions;if(this._height<=0||this._width<=0||!this._height||!this._width){throw"Canvas dimension not set";}this.data=data;this.parseOptions(options);if(this.textColor){this.target.css('color',this.textColor)}if(this.fontFamily){this.target.css('font-family',this.fontFamily)}if(this.fontSize){this.target.css('font-size',this.fontSize)}this.title.init();this.legend.init();this._sumy=0;this._sumx=0;for(var i=0;i<this.series.length;i++){this.series[i].shadowCanvas._plotDimensions=this._plotDimensions;this.series[i].canvas._plotDimensions=this._plotDimensions;for(var j=0;j<$.jqplot.preSeriesInitHooks.length;j++){$.jqplot.preSeriesInitHooks[j].call(this.series[i],target,data,this.options.seriesDefaults,this.options.series[i])}this.populatePlotData(this.series[i],i);this.series[i]._plotDimensions=this._plotDimensions;this.series[i].init(i,this.grid.borderWidth,this);for(var j=0;j<$.jqplot.postSeriesInitHooks.length;j++){$.jqplot.postSeriesInitHooks[j].call(this.series[i],target,data,this.options.seriesDefaults,this.options.series[i])}this._sumy+=this.series[i]._sumy;this._sumx+=this.series[i]._sumx}for(var name in this.axes){this.axes[name]._plotDimensions=this._plotDimensions;this.axes[name].init()}if(this.sortData){sortData(this.series)}this.grid.init();this.grid._axes=this.axes;this.legend._series=this.series;for(var i=0;i<$.jqplot.postInitHooks.length;i++){$.jqplot.postInitHooks[i].call(this,target,data,options)}};this.resetAxesScale=function(axes){var ax=(axes!=undefined)?axes:this.axes;if(ax===true){ax=this.axes}if(ax.constructor===Array){for(var i=0;i<ax.length;i++){this.axes[ax[i]].resetScale()}}else if(ax.constructor===Object){for(var name in ax){this.axes[name].resetScale()}}};this.reInitialize=function(){if(!this.target.height()){var h;if(options&&options.height){h=parseInt(options.height,10)}else if(this.target.attr('data-height')){h=parseInt(this.target.attr('data-height'),10)}else{h=parseInt($.jqplot.config.defaultHeight,10)}this._height=h;this.target.css('height',h+'px')}else{this._height=this.target.height()}if(!this.target.width()){var w;if(options&&options.width){w=parseInt(options.width,10)}else if(this.target.attr('data-width')){w=parseInt(this.target.attr('data-width'),10)}else{w=parseInt($.jqplot.config.defaultWidth,10)}this._width=w;this.target.css('width',w+'px')}else{this._width=this.target.width()}if(this._height<=0||this._width<=0||!this._height||!this._width){throw"Target dimension not set";}this._plotDimensions.height=this._height;this._plotDimensions.width=this._width;this.grid._plotDimensions=this._plotDimensions;this.title._plotDimensions=this._plotDimensions;this.baseCanvas._plotDimensions=this._plotDimensions;this.eventCanvas._plotDimensions=this._plotDimensions;this.legend._plotDimensions=this._plotDimensions;for(var n in this.axes){var axis=this.axes[n];axis._plotWidth=this._width;axis._plotHeight=this._height}this.title._plotWidth=this._width;if(this.textColor){this.target.css('color',this.textColor)}if(this.fontFamily){this.target.css('font-family',this.fontFamily)}if(this.fontSize){this.target.css('font-size',this.fontSize)}this._sumy=0;this._sumx=0;for(var i=0;i<this.series.length;i++){this.populatePlotData(this.series[i],i);this.series[i]._plotDimensions=this._plotDimensions;this.series[i].canvas._plotDimensions=this._plotDimensions;this._sumy+=this.series[i]._sumy;this._sumx+=this.series[i]._sumx}for(var name in this.axes){this.axes[name]._plotDimensions=this._plotDimensions;this.axes[name]._ticks=[];this.axes[name].renderer.init.call(this.axes[name],{})}if(this.sortData){sortData(this.series)}this.grid._axes=this.axes;this.legend._series=this.series};function sortData(series){var d,ret;for(var i=0;i<series.length;i++){d=series[i].data;var check=true;if(series[i]._stackAxis=='x'){for(var j=0;j<d.length;j++){if(typeof(d[j][1])!="number"){check=false;break}}if(check){d.sort(function(a,b){return a[1]-b[1]})}}else{for(var j=0;j<d.length;j++){if(typeof(d[j][0])!="number"){check=false;break}}if(check){d.sort(function(a,b){return a[0]-b[0]})}}}}this.populatePlotData=function(series,index){this._plotData=[];this._stackData=[];series._stackData=[];series._plotData=[];var plotValues={x:[],y:[]};if(this.stackSeries&&!series.disableStack){series._stack=true;var sidx=series._stackAxis=='x'?0:1;var idx=sidx?0:1;var temp=$.extend(true,[],series.data);var plotdata=$.extend(true,[],series.data);for(var j=0;j<index;j++){var cd=this.series[j].data;for(var k=0;k<cd.length;k++){temp[k][0]+=cd[k][0];temp[k][1]+=cd[k][1];plotdata[k][sidx]+=cd[k][sidx]}}for(var i=0;i<plotdata.length;i++){plotValues.x.push(plotdata[i][0]);plotValues.y.push(plotdata[i][1])}this._plotData.push(plotdata);this._stackData.push(temp);series._stackData=temp;series._plotData=plotdata;series._plotValues=plotValues}else{for(var i=0;i<series.data.length;i++){plotValues.x.push(series.data[i][0]);plotValues.y.push(series.data[i][1])}this._stackData.push(series.data);this.series[index]._stackData=series.data;this._plotData.push(series.data);series._plotData=series.data;series._plotValues=plotValues}if(index>0){series._prevPlotData=this.series[index-1]._plotData}series._sumy=0;series._sumx=0;for(i=series.data.length-1;i>-1;i--){series._sumy+=series.data[i][1];series._sumx+=series.data[i][0]}};this.getNextSeriesColor=(function(t){var idx=0;var sc=t.seriesColors;return function(){if(idx<sc.length){return sc[idx++]}else{idx=0;return sc[idx++]}}})(this);this.parseOptions=function(options){for(var i=0;i<$.jqplot.preParseOptionsHooks.length;i++){$.jqplot.preParseOptionsHooks[i].call(this,options)}this.options=$.extend(true,{},this.defaults,options);this.stackSeries=this.options.stackSeries;if(this.options.seriesColors){this.seriesColors=this.options.seriesColors}var cg=new this.colorGenerator(this.seriesColors);$.extend(true,this._gridPadding,this.options.gridPadding);this.sortData=(this.options.sortData!=null)?this.options.sortData:this.sortData;for(var n in this.axes){var axis=this.axes[n];$.extend(true,axis,this.options.axesDefaults,this.options.axes[n]);axis._plotWidth=this._width;axis._plotHeight=this._height}if(this.data.length==0){this.data=[];for(var i=0;i<this.options.series.length;i++){this.data.push(this.options.series.data)}}var normalizeData=function(data,dir){var temp=[];var i;dir=dir||'vertical';if(!(data[0]instanceof Array)){for(var i=0;i<data.length;i++){if(dir=='vertical'){temp.push([i+1,data[i]])}else{temp.push([data[i],i+1])}}}else{$.extend(true,temp,data)}return temp};for(var i=0;i<this.data.length;i++){var temp=new Series();for(var j=0;j<$.jqplot.preParseSeriesOptionsHooks.length;j++){$.jqplot.preParseSeriesOptionsHooks[j].call(temp,this.options.seriesDefaults,this.options.series[i])}$.extend(true,temp,{seriesColors:this.seriesColors,negativeSeriesColors:this.negativeSeriesColors},this.options.seriesDefaults,this.options.series[i]);var dir='vertical';if(temp.renderer.constructor==$.jqplot.barRenderer&&temp.rendererOptions&&temp.rendererOptions.barDirection=='horizontal'){dir='horizontal'}temp.data=normalizeData(this.data[i],dir);switch(temp.xaxis){case'xaxis':temp._xaxis=this.axes.xaxis;break;case'x2axis':temp._xaxis=this.axes.x2axis;break;default:break}temp._yaxis=this.axes[temp.yaxis];temp._xaxis._series.push(temp);temp._yaxis._series.push(temp);if(temp.show){temp._xaxis.show=true;temp._yaxis.show=true}if(!temp.color&&temp.show!=false){temp.color=cg.next()}if(!temp.label){temp.label='Series '+(i+1).toString()}this.series.push(temp);for(var j=0;j<$.jqplot.postParseSeriesOptionsHooks.length;j++){$.jqplot.postParseSeriesOptionsHooks[j].call(this.series[i],this.options.seriesDefaults,this.options.series[i])}}$.extend(true,this.grid,this.options.grid);for(var n in this.axes){var axis=this.axes[n];if(axis.borderWidth==null){axis.borderWidth=this.grid.borderWidth}if(axis.borderColor==null){if(n!='xaxis'&&n!='x2axis'&&axis.useSeriesColor===true&&axis.show){axis.borderColor=axis._series[0].color}else{axis.borderColor=this.grid.borderColor}}}if(typeof this.options.title=='string'){this.title.text=this.options.title}else if(typeof this.options.title=='object'){$.extend(true,this.title,this.options.title)}this.title._plotWidth=this._width;$.extend(true,this.legend,this.options.legend);for(var i=0;i<$.jqplot.postParseOptionsHooks.length;i++){$.jqplot.postParseOptionsHooks[i].call(this,options)}};this.replot=function(options){this.performOnPlot();var opts=(options!=undefined)?options:{};var clear=(opts.clear!=undefined)?opts.clear:true;var resetAxes=(opts.resetAxes!=undefined)?opts.resetAxes:false;this.target.trigger('jqplotPreReplot');if(clear){this.target.empty()}if(resetAxes){this.resetAxesScale(resetAxes)}this.reInitialize();this.draw();this.target.trigger('jqplotPostReplot');this.performAfterPlot()};this.redraw=function(clear){this.performOnPlot();clear=(clear!=null)?clear:true;this.target.trigger('jqplotPreRedraw');if(clear){this.target.empty()}for(var ax in this.axes){this.axes[ax]._ticks=[]}for(var i=0;i<this.series.length;i++){this.populatePlotData(this.series[i],i)}this._sumy=0;this._sumx=0;for(i=0;i<this.series.length;i++){this._sumy+=this.series[i]._sumy;this._sumx+=this.series[i]._sumx}this.draw();this.target.trigger('jqplotPostRedraw');this.performAfterPlot()};this.draw=function(){if(this.drawIfHidden||this.target.is(':visible')){this.target.trigger('jqplotPreDraw');var i;for(i=0;i<$.jqplot.preDrawHooks.length;i++){$.jqplot.preDrawHooks[i].call(this)}this.target.append(this.baseCanvas.createElement({left:0,right:0,top:0,bottom:0},'jqplot-base-canvas'));var bctx=this.baseCanvas.setContext();this.target.append(this.title.draw());this.title.pack({top:0,left:0});for(var name in this.axes){this.target.append(this.axes[name].draw(bctx));this.axes[name].set()}if(this.axes.yaxis.show){this._gridPadding.left=this.axes.yaxis.getWidth()}var ra=['y2axis','y3axis','y4axis','y5axis','y6axis','y7axis','y8axis','y9axis'];var rapad=[0,0,0,0];var gpr=0;var n,ax;for(n=8;n>0;n--){ax=this.axes[ra[n-1]];if(ax.show){rapad[n-1]=gpr;gpr+=ax.getWidth()}}if(gpr>this._gridPadding.right){this._gridPadding.right=gpr}if(this.title.show&&this.axes.x2axis.show){this._gridPadding.top=this.title.getHeight()+this.axes.x2axis.getHeight()}else if(this.title.show){this._gridPadding.top=this.title.getHeight()}else if(this.axes.x2axis.show){this._gridPadding.top=this.axes.x2axis.getHeight()}if(this.axes.xaxis.show){this._gridPadding.bottom=this.axes.xaxis.getHeight()}this.axes.xaxis.pack({position:'absolute',bottom:0,left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right});this.axes.yaxis.pack({position:'absolute',top:0,left:0,height:this._height},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top});this.axes.x2axis.pack({position:'absolute',top:this.title.getHeight(),left:0,width:this._width},{min:this._gridPadding.left,max:this._width-this._gridPadding.right});for(i=8;i>0;i--){this.axes[ra[i-1]].pack({position:'absolute',top:0,right:rapad[i-1]},{min:this._height-this._gridPadding.bottom,max:this._gridPadding.top})}this.target.append(this.grid.createElement(this._gridPadding));this.grid.draw();for(i=0;i<this.series.length;i++){this.target.append(this.series[i].shadowCanvas.createElement(this._gridPadding,'jqplot-series-canvas jqplot-shadow'));this.series[i].shadowCanvas.setContext()}for(i=0;i<this.series.length;i++){this.target.append(this.series[i].canvas.createElement(this._gridPadding,'jqplot-series-canvas'));this.series[i].canvas.setContext()}this.target.append(this.eventCanvas.createElement(this._gridPadding,'jqplot-event-canvas'));var ectx=this.eventCanvas.setContext();ectx.fillStyle='rgba(0,0,0,0)';ectx.fillRect(0,0,ectx.canvas.width,ectx.canvas.height);this.bindCustomEvents();if(this.legend.preDraw){this.target.append(this.legend.draw());this.legend.pack(this._gridPadding);if(this.legend._elem){this.drawSeries({legendInfo:{location:this.legend.location,width:this.legend.getWidth(),height:this.legend.getHeight(),xoffset:this.legend.xoffset,yoffset:this.legend.yoffset}})}else{this.drawSeries()}}else{this.drawSeries();$(this.series[this.series.length-1].canvas._elem).after(this.legend.draw());this.legend.pack(this._gridPadding)}for(var i=0;i<$.jqplot.eventListenerHooks.length;i++){var h=$.jqplot.eventListenerHooks[i];this.eventCanvas._elem.bind(h[0],{plot:this},h[1])}for(var i=0;i<$.jqplot.postDrawHooks.length;i++){$.jqplot.postDrawHooks[i].call(this)}if(this.target.is(':visible')){this._drawCount+=1}this.target.trigger('jqplotPostDraw',[this])}};this.bindCustomEvents=function(){this.eventCanvas._elem.bind('click',{plot:this},this.onClick);this.eventCanvas._elem.bind('dblclick',{plot:this},this.onDblClick);this.eventCanvas._elem.bind('mousedown',{plot:this},this.onMouseDown);this.eventCanvas._elem.bind('mouseup',{plot:this},this.onMouseUp);this.eventCanvas._elem.bind('mousemove',{plot:this},this.onMouseMove);this.eventCanvas._elem.bind('mouseenter',{plot:this},this.onMouseEnter);this.eventCanvas._elem.bind('mouseleave',{plot:this},this.onMouseLeave)};function getEventPosition(ev){var plot=ev.data.plot;var offsets=plot.eventCanvas._elem.offset();var gridPos={x:ev.pageX-offsets.left,y:ev.pageY-offsets.top};var dataPos={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null};var an=['xaxis','yaxis','x2axis','y2axis','y3axis','y4axis','y5axis','y6axis','y7axis','y8axis','y9axis'];var ax=plot.axes;for(var n=11;n>0;n--){var axis=an[n-1];if(ax[axis].show){dataPos[axis]=ax[axis].series_p2u(gridPos[axis.charAt(0)])}}return({offsets:offsets,gridPos:gridPos,dataPos:dataPos})}function getNeighborPoint(plot,x,y){var ret=null;var s,i,d0,d,j,r;var threshold;for(var i=0;i<plot.series.length;i++){s=plot.series[i];r=s.renderer;if(s.show){threshold=Math.abs(s.markerRenderer.size/2+s.neighborThreshold);for(var j=0;j<s.gridData.length;j++){p=s.gridData[j];if(r.constructor==$.jqplot.OHLCRenderer){if(r.candleStick){var yp=s._yaxis.series_u2p;if(x>=p[0]-r._bodyWidth/2&&x<=p[0]+r._bodyWidth/2&&y>=yp(s.data[j][2])&&y<=yp(s.data[j][3])){ret={seriesIndex:i,pointIndex:j,gridData:p,data:s.data[j]}}}else if(!r.hlc){var yp=s._yaxis.series_u2p;if(x>=p[0]-r._tickLength&&x<=p[0]+r._tickLength&&y>=yp(s.data[j][2])&&y<=yp(s.data[j][3])){ret={seriesIndex:i,pointIndex:j,gridData:p,data:s.data[j]}}}else{var yp=s._yaxis.series_u2p;if(x>=p[0]-r._tickLength&&x<=p[0]+r._tickLength&&y>=yp(s.data[j][1])&&y<=yp(s.data[j][2])){ret={seriesIndex:i,pointIndex:j,gridData:p,data:s.data[j]}}}}else{d=Math.sqrt((x-p[0])*(x-p[0])+(y-p[1])*(y-p[1]));if(d<=threshold&&(d<=d0||d0==null)){d0=d;ret={seriesIndex:i,pointIndex:j,gridData:p,data:s.data[j]}}}}}}return ret}this.onClick=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;var neighbor=getNeighborPoint(p,positions.gridPos.x,positions.gridPos.y);ev.data.plot.eventCanvas._elem.trigger('jqplotClick',[positions.gridPos,positions.dataPos,neighbor,p])};this.onDblClick=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;var neighbor=getNeighborPoint(p,positions.gridPos.x,positions.gridPos.y);ev.data.plot.eventCanvas._elem.trigger('jqplotDblClick',[positions.gridPos,positions.dataPos,neighbor,p])};this.onMouseDown=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;var neighbor=getNeighborPoint(p,positions.gridPos.x,positions.gridPos.y);ev.data.plot.eventCanvas._elem.trigger('jqplotMouseDown',[positions.gridPos,positions.dataPos,neighbor,p])};this.onMouseUp=function(ev){var positions=getEventPosition(ev);ev.data.plot.eventCanvas._elem.trigger('jqplotMouseUp',[positions.gridPos,positions.dataPos,null,ev.data.plot])};this.onMouseMove=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;var neighbor=getNeighborPoint(p,positions.gridPos.x,positions.gridPos.y);ev.data.plot.eventCanvas._elem.trigger('jqplotMouseMove',[positions.gridPos,positions.dataPos,neighbor,p])};this.onMouseEnter=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;ev.data.plot.eventCanvas._elem.trigger('jqplotMouseEnter',[positions.gridPos,positions.dataPos,null,p])};this.onMouseLeave=function(ev){var positions=getEventPosition(ev);var p=ev.data.plot;ev.data.plot.eventCanvas._elem.trigger('jqplotMouseLeave',[positions.gridPos,positions.dataPos,null,p])};this.drawSeries=function(options,idx){var i,series,ctx;if(idx!=undefined){series=this.series[idx];ctx=series.shadowCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);series.drawShadow(ctx,options,this);ctx=series.canvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);series.draw(ctx,options,this)}else{for(i=0;i<this.series.length;i++){series=this.series[i];ctx=series.shadowCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);series.drawShadow(ctx,options,this);ctx=series.canvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);series.draw(ctx,options,this)}}}}$.jqplot.ColorGenerator=function(colors){var idx=0;this.next=function(){if(idx<colors.length){return colors[idx++]}else{idx=0;return colors[idx++]}};this.previous=function(){if(idx>0){return colors[idx--]}else{idx=colors.length-1;return colors[idx]}};this.get=function(i){return colors[i]};this.setColors=function(c){colors=c};this.reset=function(){idx=0}};$.jqplot.hex2rgb=function(h,a){h=h.replace('#','');if(h.length==3){h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]}var rgb;rgb='rgba('+parseInt(h.slice(0,2),16)+', '+parseInt(h.slice(2,4),16)+', '+parseInt(h.slice(4,6),16);if(a){rgb+=', '+a}rgb+=')';return rgb};$.jqplot.rgb2hex=function(s){var pat=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *(?:, *[0-9.]*)?\)/;var m=s.match(pat);var h='#';for(i=1;i<4;i++){var temp;if(m[i].search(/%/)!=-1){temp=parseInt(255*m[i]/100,10).toString(16);if(temp.length==1){temp='0'+temp}}else{temp=parseInt(m[i],10).toString(16);if(temp.length==1){temp='0'+temp}}h+=temp}return h};$.jqplot.normalize2rgb=function(s,a){if(s.search(/^ *rgba?\(/)!=-1){return s}else if(s.search(/^ *#?[0-9a-fA-F]?[0-9a-fA-F]/)!=-1){return $.jqplot.hex2rgb(s,a)}else{throw'invalid color spec';}};$.jqplot.getColorComponents=function(s){var rgb=$.jqplot.normalize2rgb(s);var pat=/rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *,? *([0-9.]* *)?\)/;var m=rgb.match(pat);var ret=[];for(i=1;i<4;i++){if(m[i].search(/%/)!=-1){ret[i-1]=parseInt(255*m[i]/100,10)}else{ret[i-1]=parseInt(m[i],10)}}ret[3]=parseFloat(m[4])?parseFloat(m[4]):1.0;return ret};$.jqplot.log=function(){if(window.console&&$.jqplot.debug){if(arguments.length==1){console.log(arguments[0])}else{console.log(arguments)}}};var log=$.jqplot.log;$.jqplot.AxisLabelRenderer=function(options){$.jqplot.ElemContainer.call(this);this.axis;this.show=true;this.label='';this._elem;this.escapeHTML=false;$.extend(true,this,options)};$.jqplot.AxisLabelRenderer.prototype=new $.jqplot.ElemContainer();$.jqplot.AxisLabelRenderer.prototype.constructor=$.jqplot.AxisLabelRenderer;$.jqplot.AxisLabelRenderer.prototype.init=function(options){$.extend(true,this,options)};$.jqplot.AxisLabelRenderer.prototype.draw=function(){this._elem=$('<div style="position:absolute;" class="jqplot-'+this.axis+'-label"></div>');if(Number(this.label)){this._elem.css('white-space','nowrap')}if(!this.escapeHTML){this._elem.html(this.label)}else{this._elem.text(this.label)}return this._elem};$.jqplot.AxisLabelRenderer.prototype.pack=function(){};$.jqplot.AxisTickRenderer=function(options){$.jqplot.ElemContainer.call(this);this.mark='outside';this.axis;this.showDate=false;this.showMark=true;this.showGridline=true;this.isMinorTick=false;this.size=4;this.markSize=6;this.show=true;this.showLabel=true;this.label='';this.value=null;this._styles={};this.formatter=$.jqplot.DefaultTickFormatter;this.formatString='';this.fontFamily;this.fontSize;this.textColor;this._elem;$.extend(true,this,options)};$.jqplot.AxisTickRenderer.prototype.init=function(options){$.extend(true,this,options)};$.jqplot.AxisTickRenderer.prototype=new $.jqplot.ElemContainer();$.jqplot.AxisTickRenderer.prototype.constructor=$.jqplot.AxisTickRenderer;$.jqplot.AxisTickRenderer.prototype.setTick=function(value,axisName,isMinor){this.value=value;this.axis=axisName;this.showDate=(arguments.length==4&&arguments[3]);if(isMinor){this.isMinorTick=true}return this};$.jqplot.AxisTickRenderer.prototype.draw=function(){if(!this.label){this.label=this.formatter(this.formatString,this.value,this.showDate)}style='style="position:absolute;';if(Number(this.label)){style+='white-space:nowrap;'}style+='"';if(this.axis==='yaxis'){var nTotal=parseFloat(this.label);var prec=MP_Util.CalculatePrecision(nTotal);var nf=MP_Util.GetNumericFormatter();var tempVal=nf.format(nTotal,"^."+prec);this.label=tempVal+=''}this._elem=$('<div '+style+' class="jqplot-'+this.axis+'-tick">'+this.label+'</div>');for(var s in this._styles){this._elem.css(s,this._styles[s])}if(this.fontFamily){this._elem.css('font-family',this.fontFamily)}if(this.fontSize){this._elem.css('font-size',this.fontSize)}if(this.textColor){this._elem.css('color',this.textColor)}return this._elem};$.jqplot.DefaultTickFormatter=function(format,val){if(typeof val=='number'){if(!format){format='%.1f'}return $.jqplot.sprintf(format,val)}else{return String(val)}};$.jqplot.AxisTickRenderer.prototype.pack=function(){};$.jqplot.CanvasGridRenderer=function(){this.shadowRenderer=new $.jqplot.ShadowRenderer()};$.jqplot.CanvasGridRenderer.prototype.init=function(options){this._ctx;$.extend(true,this,options);var sopts={lineJoin:'miter',lineCap:'round',fill:false,isarc:false,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.shadowWidth,closePath:false};this.renderer.shadowRenderer.init(sopts)};$.jqplot.CanvasGridRenderer.prototype.createElement=function(){var elem=document.createElement('canvas');var w=this._plotDimensions.width;var h=this._plotDimensions.height;elem.width=w;elem.height=h;this._elem=$(elem);this._elem.addClass('jqplot-grid-canvas');this._elem.css({position:'absolute',left:0,top:0});if($.browser.msie){window.G_vmlCanvasManager.init_(document)}if($.browser.msie){elem=window.G_vmlCanvasManager.initElement(elem)}this._top=this._offsets.top;this._bottom=h-this._offsets.bottom;this._left=this._offsets.left;this._right=w-this._offsets.right;this._width=this._right-this._left;this._height=this._bottom-this._top;return this._elem};$.jqplot.CanvasGridRenderer.prototype.draw=function(){this._ctx=this._elem.get(0).getContext("2d");var ctx=this._ctx;var axes=this._axes;ctx.save();ctx.fillStyle=this.background;ctx.fillRect(this._left,this._top,this._width,this._height);if(this.drawGridlines){ctx.save();ctx.lineJoin='miter';ctx.lineCap='butt';ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor;var b,e;var ax=['xaxis','yaxis','x2axis','y2axis'];for(var i=4;i>0;i--){var name=ax[i-1];var axis=axes[name];var ticks=axis._ticks;var tickWeight=(axis.tickOptions.weight?axis.tickOptions.weight:this.gridLineWidth);var tickColor=(axis.tickOptions.color?axis.tickOptions.color:this.gridLineColor);if(axis.show){for(var j=ticks.length;j>0;j--){var t=ticks[j-1];if(t.show){var pos=Math.round(axis.u2p(t.value))+0.5;switch(name){case'xaxis':if(t.showGridline){drawLine(pos,this._top,pos,this._bottom)}if(t.showMark&&t.mark){s=t.markSize;m=t.mark;var pos=Math.round(axis.u2p(t.value))+0.5;switch(m){case'outside':b=this._bottom;e=this._bottom+s;break;case'inside':b=this._bottom-s;e=this._bottom;break;case'cross':b=this._bottom-s;e=this._bottom+s;break;default:b=this._bottom;e=this._bottom+s;break}if(this.shadow){this.renderer.shadowRenderer.draw(ctx,[[pos,b],[pos,e]],{lineCap:'butt',lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}ctx.lineWidth=tickWeight;ctx.strokeStyle=tickColor;drawLine(pos,b,pos,e);ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}break;case'yaxis':if(t.showGridline){var gridLineStyle=axis.tickOptions.gridStyle;if((!gridLineStyle)||gridLineStyle==='solid'){drawLine(this._right,pos,this._left,pos)}else{drawDashedLine(this._right,pos,this._left,pos)}}if(t.showMark&&t.mark){s=t.markSize;m=t.mark;var pos=Math.round(axis.u2p(t.value))+0.5;switch(m){case'outside':b=this._left-s;e=this._left;break;case'inside':b=this._left;e=this._left+s;break;case'cross':b=this._left-s;e=this._left+s;break;default:b=this._left-s;e=this._left;break}if(this.shadow){this.renderer.shadowRenderer.draw(ctx,[[b,pos],[e,pos]],{lineCap:'butt',lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}ctx.lineWidth=tickWeight;ctx.strokeStyle=tickColor;drawLine(b,pos,e,pos,{strokeStyle:axis.borderColor});ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}break;case'x2axis':if(t.showGridline){drawLine(pos,this._bottom,pos,this._top)}if(t.showMark&&t.mark){s=t.markSize;m=t.mark;var pos=Math.round(axis.u2p(t.value))+0.5;switch(m){case'outside':b=this._top-s;e=this._top;break;case'inside':b=this._top;e=this._top+s;break;case'cross':b=this._top-s;e=this._top+s;break;default:b=this._top-s;e=this._top;break}if(this.shadow){this.renderer.shadowRenderer.draw(ctx,[[pos,b],[pos,e]],{lineCap:'butt',lineWidth:this.gridLineWidth,offset:this.gridLineWidth*0.75,depth:2,fill:false,closePath:false})}ctx.lineWidth=tickWeight;ctx.strokeStyle=tickColor;drawLine(pos,b,pos,e);ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}ctx.lineWidth=1.0;break;case'y2axis':if(t.showGridline){drawLine(this._left,pos,this._right,pos)}if(t.showMark&&t.mark){s=t.markSize;m=t.mark;var pos=Math.round(axis.u2p(t.value))+0.5;switch(m){case'outside':b=this._right;e=this._right+s;break;case'inside':b=this._right-s;e=this._right;break;case'cross':b=this._right-s;e=this._right+s;break;default:b=this._right;e=this._right+s;break}if(this.shadow){this.renderer.shadowRenderer.draw(ctx,[[b,pos],[e,pos]],{lineCap:'butt',lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}ctx.lineWidth=tickWeight;ctx.strokeStyle=tickColor;drawLine(b,pos,e,pos,{strokeStyle:axis.borderColor});ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}break;default:break}}}}}ax=['y3axis','y4axis','y5axis','y6axis','y7axis','y8axis','y9axis'];for(var i=7;i>0;i--){var axis=axes[ax[i-1]];var ticks=axis._ticks;if(axis.show){var tn=ticks[axis.numberTicks-1];var t0=ticks[0];var left=axis.getLeft();var points=[[left,tn.getTop()+tn.getHeight()/2],[left,t0.getTop()+t0.getHeight()/2+1.0]];if(this.shadow){this.renderer.shadowRenderer.draw(ctx,points,{lineCap:'butt',fill:false,closePath:false})}drawLine(points[0][0],points[0][1],points[1][0],points[1][1],{lineCap:'butt',strokeStyle:axis.borderColor,lineWidth:axis.borderWidth});for(var j=ticks.length;j>0;j--){var t=ticks[j-1];s=t.markSize;m=t.mark;var pos=Math.round(axis.u2p(t.value))+0.5;if(t.showMark&&t.mark){switch(m){case'outside':b=left;e=left+s;break;case'inside':b=left-s;e=left;break;case'cross':b=left-s;e=left+s;break;default:b=left;e=left+s;break}points=[[b,pos],[e,pos]];if(this.shadow){this.renderer.shadowRenderer.draw(ctx,points,{lineCap:'butt',lineWidth:this.gridLineWidth*1.5,offset:this.gridLineWidth*0.75,fill:false,closePath:false})}drawLine(b,pos,e,pos,{strokeStyle:axis.borderColor})}}}}ctx.restore()}function drawLine(bx,by,ex,ey,opts){ctx.save();opts=opts||{};$.extend(true,ctx,opts);ctx.beginPath();ctx.moveTo(bx,by);ctx.lineTo(ex,ey);ctx.stroke();ctx.restore()}function drawDashedLine(x2,y2,x1,y1,opts){var dashWidth=3;var incrementer=dashWidth*2;var i=x1;var il=x2-dashWidth;for(i;i<=il;i+=incrementer){ctx.beginPath();ctx.moveTo(i,y1);ctx.lineTo(i+dashWidth,y2);ctx.stroke();ctx.restore()}}if(this.shadow){var points=[[this._left,this._bottom],[this._right,this._bottom],[this._right,this._top]];this.renderer.shadowRenderer.draw(ctx,points)}drawLine(this._left,this._top,this._right,this._top,{lineCap:'round',strokeStyle:axes.x2axis.borderColor,lineWidth:axes.x2axis.borderWidth});drawLine(this._right,this._top,this._right,this._bottom,{lineCap:'round',strokeStyle:axes.y2axis.borderColor,lineWidth:axes.y2axis.borderWidth});drawLine(this._right,this._bottom,this._left,this._bottom,{lineCap:'round',strokeStyle:axes.xaxis.borderColor,lineWidth:axes.xaxis.borderWidth});drawLine(this._left,this._bottom,this._left,this._top,{lineCap:'round',strokeStyle:axes.yaxis.borderColor,lineWidth:axes.yaxis.borderWidth});ctx.restore()};var day=24*60*60*1000;var zeroPad=function(number,digits){number=String(number);while(number.length<digits){number='0'+number}return number};var multipliers={millisecond:1,second:1000,minute:60*1000,hour:60*60*1000,day:day,week:7*day,month:{add:function(d,number){multipliers.year.add(d,Math[number>0?'floor':'ceil'](number/12));var prevMonth=d.getMonth()+(number%12);if(prevMonth==12){prevMonth=0;d.setYear(d.getFullYear()+1)}else if(prevMonth==-1){prevMonth=11;d.setYear(d.getFullYear()-1)}d.setMonth(prevMonth)},diff:function(d1,d2){var diffYears=d1.getFullYear()-d2.getFullYear();var diffMonths=d1.getMonth()-d2.getMonth()+(diffYears*12);var diffDays=d1.getDate()-d2.getDate();return diffMonths+(diffDays/30)}},year:{add:function(d,number){d.setYear(d.getFullYear()+Math[number>0?'floor':'ceil'](number))},diff:function(d1,d2){return multipliers.month.diff(d1,d2)/12}}};for(var unit in multipliers){if(unit.substring(unit.length-1)!='s'){multipliers[unit+'s']=multipliers[unit]}}var format=function(d,code){if(Date.prototype.strftime.formatShortcuts[code]){return d.strftime(Date.prototype.strftime.formatShortcuts[code])}else{var getter=(Date.prototype.strftime.formatCodes[code]||'').split('.');var nbr=d['get'+getter[0]]?d['get'+getter[0]]():'';if(getter[1]){nbr=zeroPad(nbr,getter[1])}return nbr}};var instanceMethods={succ:function(unit){return this.clone().add(1,unit)},add:function(number,unit){var factor=multipliers[unit]||multipliers.day;if(typeof factor=='number'){this.setTime(this.getTime()+(factor*number))}else{factor.add(this,number)}return this},addNoDST:function(number,unit){var aVal=parseFloat(number);var rVal=null;switch(unit.toLowerCase()){case"second":case"seconds":this.setSeconds(this.getSeconds()+aVal);break;case"minute":case"minutes":this.setMinutes(this.getMinutes()+aVal);break;case"hour":case"hours":this.setHours(this.getHours()+aVal);break;case"day":case"days":this.setDate(this.getDate()+aVal);break;case"week":case"weeks":var daysFromWeek=aVal*7;this.setDate(this.getDate()+daysFromWeek);break;case"month":case"months":this.setMonth(this.getMonth()+aVal);break;case"year":case"years":this.setYear(this.getYear()+aVal);break;default:this.setMilliseconds(this.getMilliseconds()+aVal);break}return this},round:function(unit,option){if(unit!=null){switch(unit.toLowerCase()){case"seconds":this.setSeconds((option=="down")?0:60);this.setMilliseconds(0);break;case"minutes":this.setMinutes((option=="down")?0:60);this.setSeconds(0);this.setMilliseconds(0);break;case"hours":this.setHours((option=="down")?0:24);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);break;default:break}}return this},diff:function(dateObj,unit,allowDecimal){dateObj=Date.create(dateObj);if(dateObj===null){return null}var factor=multipliers[unit]||multipliers.day;if(typeof factor=='number'){var unitDiff=(this.getTime()-dateObj.getTime())/factor}else{var unitDiff=factor.diff(this,dateObj)}return(allowDecimal?unitDiff:Math[unitDiff>0?'floor':'ceil'](unitDiff))},strftime:function(formatStr){var source=formatStr||'%Y-%m-%d',result='',match;while(source.length>0){if(match=source.match(Date.prototype.strftime.formatCodes.matcher)){result+=source.slice(0,match.index);result+=(match[1]||'')+format(this,match[2]);source=source.slice(match.index+match[0].length)}else{result+=source;source=''}}return result},getShortYear:function(){return this.getYear()%100},getMonthNumber:function(){return this.getMonth()+1},getMonthName:function(){return Date.MONTHNAMES[this.getMonth()]},getAbbrMonthName:function(){return Date.ABBR_MONTHNAMES[this.getMonth()]},getDayName:function(){return Date.DAYNAMES[this.getDay()]},getAbbrDayName:function(){return Date.ABBR_DAYNAMES[this.getDay()]},getDayOrdinal:function(){return Date.ORDINALNAMES[this.getDate()%10]},getHours12:function(){var hours=this.getHours();return hours>12?hours-12:(hours==0?12:hours)},getAmPm:function(){return this.getHours()>=12?'PM':'AM'},getUnix:function(){return Math.round(this.getTime()/1000,0)},getGmtOffset:function(){var hours=this.getTimezoneOffset()/60;var prefix=hours<0?'+':'-';hours=Math.abs(hours);return prefix+zeroPad(Math.floor(hours),2)+':'+zeroPad((hours%1)*60,2)},getTimezoneName:function(){var match=/(?:\((.+)\)$| ([A-Z]{3}) )/.exec(this.toString());return match[1]||match[2]||'GMT'+this.getGmtOffset()},toYmdInt:function(){return(this.getFullYear()*10000)+(this.getMonthNumber()*100)+this.getDate()},clone:function(){return new Date(this.getTime())}};for(var name in instanceMethods){Date.prototype[name]=instanceMethods[name]}var staticMethods={create:function(date){if(date instanceof Date){return date}if(typeof date=='number'){return new Date(date)}var parsable=String(date).replace(/^\s*(.+)\s*$/,'$1'),i=0,length=Date.create.patterns.length,pattern;var current=parsable;while(i<length){ms=Date.parse(current);if(!isNaN(ms)){return new Date(ms)}pattern=Date.create.patterns[i];if(typeof pattern=='function'){obj=pattern(current);if(obj instanceof Date){return obj}}else{current=parsable.replace(pattern[0],pattern[1])}i++}return NaN},MONTHNAMES:'January February March April May June July August September October November December'.split(' '),ABBR_MONTHNAMES:'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' '),DAYNAMES:'Sunday Monday Tuesday Wednesday Thursday Friday Saturday'.split(' '),ABBR_DAYNAMES:'Sun Mon Tue Wed Thu Fri Sat'.split(' '),ORDINALNAMES:'th st nd rd th th th th th th'.split(' '),ISO:'%Y-%m-%dT%H:%M:%S.%N%G',SQL:'%Y-%m-%d %H:%M:%S',daysInMonth:function(year,month){if(month==2){return new Date(year,1,29).getDate()==29?29:28}return[undefined,31,undefined,31,30,31,30,31,31,30,31,30,31][month]}};for(var name in staticMethods){Date[name]=staticMethods[name]}Date.prototype.strftime.formatCodes={matcher:/()%(#?(%|[a-z]))/i,Y:'FullYear',y:'ShortYear.2',m:'MonthNumber.2','#m':'MonthNumber',B:'MonthName',b:'AbbrMonthName',d:'Date.2','#d':'Date',e:'Date',A:'DayName',a:'AbbrDayName',w:'Day',o:'DayOrdinal',H:'Hours.2','#H':'Hours',I:'Hours12.2','#I':'Hours12',p:'AmPm',M:'Minutes.2','#M':'Minutes',S:'Seconds.2','#S':'Seconds',s:'Unix',N:'Milliseconds.3','#N':'Milliseconds',O:'TimezoneOffset',Z:'TimezoneName',G:'GmtOffset'};Date.prototype.strftime.formatShortcuts={F:'%Y-%m-%d',T:'%H:%M:%S',X:'%H:%M:%S',x:'%m/%d/%y',D:'%m/%d/%y','#c':'%a %b %e %H:%M:%S %Y',v:'%e-%b-%Y',R:'%H:%M',r:'%I:%M:%S %p',t:'\t',n:'\n','%':'%'};Date.create.patterns=[[/-/g,'/'],[/st|nd|rd|th/g,''],[/(3[01]|[0-2]\d)\s*\.\s*(1[0-2]|0\d)\s*\.\s*([1-9]\d{3})/,'$2/$1/$3'],[/([1-9]\d{3})\s*-\s*(1[0-2]|0\d)\s*-\s*(3[01]|[0-2]\d)/,'$2/$3/$1'],function(str){var match=str.match(/^(?:(.+)\s+)?([012]?\d)(?:\s*\:\s*(\d\d))?(?:\s*\:\s*(\d\d(\.\d*)?))?\s*(am|pm)?\s*$/i);if(match){if(match[1]){var d=Date.create(match[1]);if(isNaN(d)){return}}else{var d=new Date();d.setMilliseconds(0)}var hour=parseFloat(match[2]);if(match[6]){hour=match[6].toLowerCase()=='am'?(hour==12?0:hour):(hour==12?12:hour+12)}d.setHours(hour,parseInt(match[3]||0,10),parseInt(match[4]||0,10),((parseFloat(match[5]||0))||0)*1000);return d}else{return str}},function(str){var match=str.match(/^(?:(.+))[T|\s+]([012]\d)(?:\:(\d\d))(?:\:(\d\d))(?:\.\d+)([\+\-]\d\d\:\d\d)$/i);if(match){if(match[1]){var d=Date.create(match[1]);if(isNaN(d)){return}}else{var d=new Date();d.setMilliseconds(0)}var hour=parseFloat(match[2]);d.setHours(hour,parseInt(match[3],10),parseInt(match[4],10),parseFloat(match[5])*1000);return d}else{return str}},function(str){var match=str.match(/^([0-3]?\d)\s*[-\/.\s]{1}\s*([a-zA-Z]{3,9})\s*[-\/.\s]{1}\s*([0-3]?\d)$/);if(match){var d=new Date();var y=parseFloat(String(d.getFullYear()).slice(2,4));var cent=parseInt(String(d.getFullYear())/100,10)*100;var centoffset=1;var m1=parseFloat(match[1]);var m3=parseFloat(match[3]);var ny,nd,nm;if(m1>31){nd=match[3];if(m1<y+centoffset){ny=cent+m1}else{ny=cent-100+m1}}else{nd=match[1];if(m3<y+centoffset){ny=cent+m3}else{ny=cent-100+m3}}var nm=$.inArray(match[2],Date.ABBR_MONTHNAMES);if(nm==-1){nm=$.inArray(match[2],Date.MONTHNAMES)}d.setFullYear(ny,nm,nd);d.setHours(0,0,0,0);return d}else{return str}}];if($.jqplot.config.debug){$.date=Date.create}$.jqplot.DivTitleRenderer=function(){};$.jqplot.DivTitleRenderer.prototype.init=function(options){$.extend(true,this,options)};$.jqplot.DivTitleRenderer.prototype.draw=function(){var r=this.renderer;if(!this.text){this.show=false;this._elem=$('<div style="height:0px;width:0px;"></div>')}else if(this.text){var styletext='position:absolute;top:0px;left:0px;';styletext+=(this._plotWidth)?'width:'+this._plotWidth+'px;':'';styletext+=(this.fontFamily)?'font-family:'+this.fontFamily+';':'';styletext+=(this.fontSize)?'font-size:'+this.fontSize+';':'';styletext+=(this.textAlign)?'text-align:'+this.textAlign+';':'text-align:center;';styletext+=(this.textColor)?'color:'+this.textColor+';':'';this._elem=$('<div class="jqplot-title" style="'+styletext+'">'+this.text+'</div>')}return this._elem};$.jqplot.DivTitleRenderer.prototype.pack=function(){};$.jqplot.LineRenderer=function(){this.shapeRenderer=new $.jqplot.ShapeRenderer();this.shadowRenderer=new $.jqplot.ShadowRenderer()};$.jqplot.LineRenderer.prototype.init=function(options){$.extend(true,this.renderer,options);var opts={lineJoin:'round',lineCap:'round',fill:this.fill,isarc:false,strokeStyle:this.color,fillStyle:this.fillColor,lineWidth:this.lineWidth,closePath:this.fill};this.renderer.shapeRenderer.init(opts);if(this.lineWidth>2.5){var shadow_offset=this.shadowOffset*(1+(Math.atan((this.lineWidth/2.5))/0.785398163-1)*0.6)}else{var shadow_offset=this.shadowOffset*Math.atan((this.lineWidth/2.5))/0.785398163}var sopts={lineJoin:'round',lineCap:'round',fill:this.fill,isarc:false,angle:this.shadowAngle,offset:shadow_offset,alpha:this.shadowAlpha,depth:this.shadowDepth,lineWidth:this.lineWidth,closePath:this.fill};this.renderer.shadowRenderer.init(sopts)};$.jqplot.LineRenderer.prototype.setGridData=function(plot){var xp=this._xaxis.series_u2p;var yp=this._yaxis.series_u2p;var data=this._plotData;var pdata=this._prevPlotData;this.gridData=[];this._prevGridData=[];for(var i=0;i<this.data.length;i++){if(data[i]!=null){this.gridData.push([xp.call(this._xaxis,data[i][0]),yp.call(this._yaxis,data[i][1])])}if(pdata[i]!=null){this._prevGridData.push([xp.call(this._xaxis,pdata[i][0]),yp.call(this._yaxis,pdata[i][1])])}}};$.jqplot.LineRenderer.prototype.makeGridData=function(data,plot){var xp=this._xaxis.series_u2p;var yp=this._yaxis.series_u2p;var gd=[];var pgd=[];for(var i=0;i<data.length;i++){if(data[i]!=null){gd.push([xp.call(this._xaxis,data[i][0]),yp.call(this._yaxis,data[i][1])])}}return gd};$.jqplot.LineRenderer.prototype.draw=function(ctx,gd,options){var i;var opts=(options!=undefined)?options:{};var shadow=(opts.shadow!=undefined)?opts.shadow:this.shadow;var showLine=(opts.showLine!=undefined)?opts.showLine:this.showLine;var fill=(opts.fill!=undefined)?opts.fill:this.fill;var fillAndStroke=(opts.fillAndStroke!=undefined)?opts.fillAndStroke:this.fillAndStroke;ctx.save();if(gd.length){if(showLine){if(fill){if(this.fillToZero){var negativeColors=new $.jqplot.ColorGenerator(this.negativeSeriesColors);var negativeColor=negativeColors.get(this.index);if(!this.useNegativeColors){negativeColor=opts.fillStyle}var isnegative=false;var posfs=opts.fillStyle;if(fillAndStroke){var fasgd=gd.slice(0)}if(this.index==0||!this._stack){var tempgd=[];var pyzero=this._yaxis.series_u2p(0);var pxzero=this._xaxis.series_u2p(0);if(this.fillAxis=='y'){tempgd.push([gd[0][0],pyzero]);for(var i=0;i<gd.length-1;i++){tempgd.push(gd[i]);if(this._plotData[i][1]*this._plotData[i+1][1]<0){if(this._plotData[i][1]<0){isnegative=true;opts.fillStyle=negativeColor}else{isnegative=false;opts.fillStyle=posfs}var xintercept=gd[i][0]+(gd[i+1][0]-gd[i][0])*(pyzero-gd[i][1])/(gd[i+1][1]-gd[i][1]);tempgd.push([xintercept,pyzero]);if(shadow){this.renderer.shadowRenderer.draw(ctx,tempgd,opts)}this.renderer.shapeRenderer.draw(ctx,tempgd,opts);tempgd=[[xintercept,pyzero]]}}if(this._plotData[gd.length-1][1]<0){isnegative=true;opts.fillStyle=negativeColor}else{isnegative=false;opts.fillStyle=posfs}tempgd.push(gd[gd.length-1]);tempgd.push([gd[gd.length-1][0],pyzero])}if(shadow){this.renderer.shadowRenderer.draw(ctx,tempgd,opts)}this.renderer.shapeRenderer.draw(ctx,tempgd,opts)}else{var prev=this._prevGridData;for(var i=prev.length;i>0;i--){gd.push(prev[i-1])}if(shadow){this.renderer.shadowRenderer.draw(ctx,gd,opts)}this.renderer.shapeRenderer.draw(ctx,gd,opts)}}else{if(fillAndStroke){var fasgd=gd.slice(0)}if(this.index==0||!this._stack){var gridymin=ctx.canvas.height;gd.unshift([gd[0][0],gridymin]);len=gd.length;gd.push([gd[len-1][0],gridymin])}else{var prev=this._prevGridData;for(var i=prev.length;i>0;i--){gd.push(prev[i-1])}}if(shadow){this.renderer.shadowRenderer.draw(ctx,gd,opts)}this.renderer.shapeRenderer.draw(ctx,gd,opts)}if(fillAndStroke){var fasopts=$.extend(true,{},opts,{fill:false,closePath:false});this.renderer.shapeRenderer.draw(ctx,fasgd,fasopts);if(this.markerRenderer.show){for(i=0;i<fasgd.length;i++){this.markerRenderer.draw(fasgd[i][0],fasgd[i][1],ctx,opts.markerOptions)}}}}else{if(shadow){this.renderer.shadowRenderer.draw(ctx,gd,opts)}this.renderer.shapeRenderer.draw(ctx,gd,opts)}}if(this.markerRenderer.show&&!fill){for(i=0;i<gd.length;i++){this.markerRenderer.draw(gd[i][0],gd[i][1],ctx,opts.markerOptions)}}}ctx.restore()};$.jqplot.LineRenderer.prototype.drawShadow=function(ctx,gd,options){};$.jqplot.LinearAxisRenderer=function(){};$.jqplot.LinearAxisRenderer.prototype.init=function(options){$.extend(true,this,options);var db=this._dataBounds;for(var i=0;i<this._series.length;i++){var s=this._series[i];var d=s._plotData;for(var j=0;j<d.length;j++){if(this.name=='xaxis'||this.name=='x2axis'){if(d[j][0]<db.min||db.min==null){db.min=d[j][0]}if(d[j][0]>db.max||db.max==null){db.max=d[j][0]}}else{if(d[j][1]<db.min||db.min==null){db.min=d[j][1]}if(d[j][1]>db.max||db.max==null){db.max=d[j][1]}}}}};$.jqplot.LinearAxisRenderer.prototype.draw=function(ctx){if(this.show){this.renderer.createTicks.call(this);var dim=0;var temp;this._elem=$('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>');if(this.name=='xaxis'||this.name=='x2axis'){this._elem.width(this._plotDimensions.width)}else{this._elem.height(this._plotDimensions.height)}this.labelOptions.axis=this.name;this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var elem=this._label.draw(ctx);elem.appendTo(this._elem)}if(this.showTicks){var t=this._ticks;for(var i=0;i<t.length;i++){var tick=t[i];if(tick.showLabel&&(!tick.isMinorTick||this.showMinorTicks)){var elem=tick.draw(ctx);elem.appendTo(this._elem)}}}}return this._elem};$.jqplot.LinearAxisRenderer.prototype.reset=function(){this.min=this._min;this.max=this._max;this.tickInterval=this._tickInterval;this.numberTicks=this._numberTicks};$.jqplot.LinearAxisRenderer.prototype.set=function(){var dim=0;var temp;var w=0;var h=0;var lshow=(this._label==null)?false:this._label.show;if(this.show&&this.showTicks){var t=this._ticks;for(var i=0;i<t.length;i++){var tick=t[i];if(tick.showLabel&&(!tick.isMinorTick||this.showMinorTicks)){if(this.name=='xaxis'||this.name=='x2axis'){temp=tick._elem.outerHeight(true)}else{temp=tick._elem.outerWidth(true)}if(temp>dim){dim=temp}}}if(lshow){w=this._label._elem.outerWidth(true);h=this._label._elem.outerHeight(true)}if(this.name=='xaxis'){dim=dim+h;this._elem.css({'height':dim+'px',left:'0px',bottom:'0px'})}else if(this.name=='x2axis'){dim=dim+h;this._elem.css({'height':dim+'px',left:'0px',top:'0px'})}else if(this.name=='yaxis'){dim=dim+w;this._elem.css({'width':dim+'px',left:'0px',top:'0px'});if(lshow&&this._label.constructor==$.jqplot.AxisLabelRenderer){this._label._elem.css('width',w+'px')}}else{dim=dim+w;this._elem.css({'width':dim+'px',right:'0px',top:'0px'});if(lshow&&this._label.constructor==$.jqplot.AxisLabelRenderer){this._label._elem.css('width',w+'px')}}}};$.jqplot.LinearAxisRenderer.prototype.createTicks=function(){var ticks=this._ticks;var userTicks=this.ticks;var name=this.name;var db=this._dataBounds;var dim,interval;var min,max;var pos1,pos2;var tt,i;if(userTicks.length){for(i=0;i<userTicks.length;i++){var ut=userTicks[i];var t=new this.tickRenderer(this.tickOptions);if(ut.constructor==Array){t.value=ut[0];t.label=ut[1];if(!this.showTicks){t.showLabel=false;t.showMark=false}else if(!this.showTickMarks){t.showMark=false}t.setTick(ut[0],this.name);this._ticks.push(t)}else{t.value=ut;if(!this.showTicks){t.showLabel=false;t.showMark=false}else if(!this.showTickMarks){t.showMark=false}t.setTick(ut,this.name);this._ticks.push(t)}}this.numberTicks=userTicks.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value;this.tickInterval=(this.max-this.min)/(this.numberTicks-1)}else{if(name=='xaxis'||name=='x2axis'){dim=this._plotDimensions.width}else{dim=this._plotDimensions.height}if(!this.autoscale&&this.min!=null&&this.max!=null&&this.numberTicks!=null){this.tickInterval=null}min=((this.min!=null)?this.min:db.min);max=((this.max!=null)?this.max:db.max);if(min==max){var adj=0.05;if(min>0){adj=Math.max(Math.log(min)/Math.LN10,0.05)}min-=adj;max+=adj}var range=max-min;var rmin,rmax;var temp;if(this.autoscale&&this.min==null&&this.max==null){var rrange,ti,margin;var forceMinZero=false;var forceZeroLine=false;var intervals={min:null,max:null,average:null,stddev:null};for(var i=0;i<this._series.length;i++){var s=this._series[i];var faname=(s.fillAxis=='x')?s._xaxis.name:s._yaxis.name;if(this.name==faname){var vals=s._plotValues[s.fillAxis];var vmin=vals[0];var vmax=vals[0];for(var j=1;j<vals.length;j++){if(vals[j]<vmin){vmin=vals[j]}else if(vals[j]>vmax){vmax=vals[j]}}var dp=(vmax-vmin)/vmax;if(s.renderer.constructor==$.jqplot.BarRenderer){if(vmin>=0&&(s.fillToZero||dp>0.1)){forceMinZero=true}else{forceMinZero=false;if(s.fill&&s.fillToZero&&vmin<0&&vmax>0){forceZeroLine=true}else{forceZeroLine=false}}}else if(s.fill){if(vmin>=0&&(s.fillToZero||dp>0.1)){forceMinZero=true}else if(vmin<0&&vmax>0&&s.fillToZero){forceMinZero=false;forceZeroLine=true}else{forceMinZero=false;forceZeroLine=false}}else if(vmin<0){forceMinZero=false}}}if(forceMinZero){this.numberTicks=2+Math.ceil((dim-(this.tickSpacing-1))/this.tickSpacing);this.min=0;ti=max/(this.numberTicks-1);temp=Math.pow(10,Math.abs(Math.floor(Math.log(ti)/Math.LN10)));if(ti/temp==parseInt(ti/temp,10)){ti+=temp}this.tickInterval=Math.ceil(ti/temp)*temp;this.max=this.tickInterval*(this.numberTicks-1)}else if(forceZeroLine){this.numberTicks=2+Math.ceil((dim-(this.tickSpacing-1))/this.tickSpacing);var ntmin=Math.ceil(Math.abs(min)/range*(this.numberTicks-1));var ntmax=this.numberTicks-1-ntmin;ti=Math.max(Math.abs(min/ntmin),Math.abs(max/ntmax));temp=Math.pow(10,Math.abs(Math.floor(Math.log(ti)/Math.LN10)));this.tickInterval=Math.ceil(ti/temp)*temp;this.max=this.tickInterval*ntmax;this.min=-this.tickInterval*ntmin}else{if(this.numberTicks==null){if(this.tickInterval){this.numberTicks=3+Math.ceil(range/this.tickInterval)}else{this.numberTicks=2+Math.ceil((dim-(this.tickSpacing-1))/this.tickSpacing)}}if(this.tickInterval==null){ti=range/(this.numberTicks-1);if(ti<1){temp=Math.pow(10,Math.abs(Math.floor(Math.log(ti)/Math.LN10)))}else{temp=1}this.tickInterval=Math.ceil(ti*temp*this.pad)/temp}else{temp=1/this.tickInterval}rrange=this.tickInterval*(this.numberTicks-1);margin=(rrange-range)/2;if(this.min==null){this.min=Math.floor(temp*(min-margin))/temp}if(this.max==null){this.max=this.min+rrange}}}else{rmin=(this.min!=null)?this.min:min-range*(this.padMin-1);rmax=(this.max!=null)?this.max:max+range*(this.padMax-1);this.min=rmin;this.max=rmax;range=this.max-this.min;if(this.numberTicks==null){if(this.tickInterval!=null){this.numberTicks=Math.ceil((this.max-this.min)/this.tickInterval)+1;this.max=this.min+this.tickInterval*(this.numberTicks-1)}else if(dim>100){this.numberTicks=parseInt(3+(dim-100)/75,10)}else{this.numberTicks=2}}if(this.tickInterval==null){this.tickInterval=range/(this.numberTicks-1)}}for(var i=0;i<this.numberTicks;i++){tt=this.min+i*this.tickInterval;var t=new this.tickRenderer(this.tickOptions);if(!this.showTicks){t.showLabel=false;t.showMark=false}else if(!this.showTickMarks){t.showMark=false}t.setTick(tt,this.name);this._ticks.push(t)}}};$.jqplot.LinearAxisRenderer.prototype.pack=function(pos,offsets){var ticks=this._ticks;var max=this.max;var min=this.min;var offmax=offsets.max;var offmin=offsets.min;var lshow=(this._label==null)?false:this._label.show;for(var p in pos){this._elem.css(p,pos[p])}this._offsets=offsets;var pixellength=offmax-offmin;var unitlength=max-min;this.p2u=function(p){return(p-offmin)*unitlength/pixellength+min};this.u2p=function(u){return(u-min)*pixellength/unitlength+offmin};if(this.name=='xaxis'||this.name=='x2axis'){this.series_u2p=function(u){return(u-min)*pixellength/unitlength};this.series_p2u=function(p){return p*unitlength/pixellength+min}}else{this.series_u2p=function(u){return(u-max)*pixellength/unitlength};this.series_p2u=function(p){return p*unitlength/pixellength+max}}if(this.show){if(this.name=='xaxis'||this.name=='x2axis'){for(i=0;i<ticks.length;i++){var t=ticks[i];if(t.show&&t.showLabel){var shim;if(t.constructor==$.jqplot.CanvasAxisTickRenderer&&t.angle){var temp=(this.name=='xaxis')?1:-1;switch(t.labelPosition){case'auto':if(temp*t.angle<0){shim=-t.getWidth()+t._textRenderer.height*Math.sin(-t._textRenderer.angle)/2}else{shim=-t._textRenderer.height*Math.sin(t._textRenderer.angle)/2}break;case'end':shim=-t.getWidth()+t._textRenderer.height*Math.sin(-t._textRenderer.angle)/2;break;case'start':shim=-t._textRenderer.height*Math.sin(t._textRenderer.angle)/2;break;case'middle':shim=-t.getWidth()/2+t._textRenderer.height*Math.sin(-t._textRenderer.angle)/2;break;default:shim=-t.getWidth()/2+t._textRenderer.height*Math.sin(-t._textRenderer.angle)/2;break}}else{shim=-t.getWidth()/2}var val=this.u2p(t.value)+shim+'px';t._elem.css('left',val);t.pack()}}if(lshow){var w=this._label._elem.outerWidth(true);this._label._elem.css('left',offmin+pixellength/2-w/2+'px');if(this.name=='xaxis'){this._label._elem.css('bottom','0px')}else{this._label._elem.css('top','0px')}this._label.pack()}}else{for(i=0;i<ticks.length;i++){var t=ticks[i];if(t.show&&t.showLabel){var shim;if(t.constructor==$.jqplot.CanvasAxisTickRenderer&&t.angle){var temp=(this.name=='yaxis')?1:-1;switch(t.labelPosition){case'auto':case'end':if(temp*t.angle<0){shim=-t._textRenderer.height*Math.cos(-t._textRenderer.angle)/2}else{shim=-t.getHeight()+t._textRenderer.height*Math.cos(t._textRenderer.angle)/2}break;case'start':if(t.angle>0){shim=-t._textRenderer.height*Math.cos(-t._textRenderer.angle)/2}else{shim=-t.getHeight()+t._textRenderer.height*Math.cos(t._textRenderer.angle)/2}break;case'middle':shim=-t.getHeight()/2;break;default:shim=-t.getHeight()/2;break}}else{shim=-t.getHeight()/2}var val=this.u2p(t.value)+shim+'px';t._elem.css('top',val);t.pack()}}if(lshow){var h=this._label._elem.outerHeight(true);this._label._elem.css('top',offmax-pixellength/2-h/2+'px');if(this.name=='yaxis'){this._label._elem.css('left','0px')}else{this._label._elem.css('right','0px')}this._label.pack()}}}};$.jqplot.MarkerRenderer=nMarkerRenderer;$.jqplot.ShadowRenderer=nShadowRenderer;$.jqplot.ShapeRenderer=nShapeRenderer;$.jqplot.TableLegendRenderer=function(){};$.jqplot.TableLegendRenderer.prototype.init=function(options){$.extend(true,this,options)};$.jqplot.TableLegendRenderer.prototype.addrow=function(label,color,pad){var rs=(pad)?this.rowSpacing:'0';var tr=$('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem);$('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+rs+';">'+'<div><div class="jqplot-table-legend-swatch" style="border-color:'+color+';"></div>'+'</div></td>').appendTo(tr);var elem=$('<td class="jqplot-table-legend" style="padding-top:'+rs+';"></td>');elem.appendTo(tr);if(this.escapeHtml){elem.text(label)}else{elem.html(label)}};$.jqplot.TableLegendRenderer.prototype.draw=function(){var legend=this;if(this.show){var series=this._series;var ss='position:absolute;';ss+=(this.background)?'background:'+this.background+';':'';ss+=(this.border)?'border:'+this.border+';':'';ss+=(this.fontSize)?'font-size:'+this.fontSize+';':'';ss+=(this.fontFamily)?'font-family:'+this.fontFamily+';':'';ss+=(this.textColor)?'color:'+this.textColor+';':'';this._elem=$('<table class="jqplot-table-legend" style="'+ss+'"></table>');var pad=false;for(var i=0;i<series.length;i++){s=series[i];if(s.show&&s.showLabel){var lt=s.label.toString();if(lt){var color=s.color;if(s._stack&&!s.fill){color=''}this.renderer.addrow.call(this,lt,color,pad);pad=true}for(var j=0;j<$.jqplot.addLegendRowHooks.length;j++){var item=$.jqplot.addLegendRowHooks[j].call(this,s);if(item){this.renderer.addrow.call(this,item.label,item.color,pad);pad=true}}}}}return this._elem};$.jqplot.TableLegendRenderer.prototype.pack=function(offsets){if(this.show){var grid={_top:offsets.top,_left:offsets.left,_right:offsets.right,_bottom:this._plotDimensions.height-offsets.bottom};switch(this.location){case'nw':var a=grid._left+this.xoffset;var b=grid._top+this.yoffset;this._elem.css('left',a);this._elem.css('top',b);break;case'n':var a=(offsets.left+(this._plotDimensions.width-offsets.right))/2-this.getWidth()/2;var b=grid._top+this.yoffset;this._elem.css('left',a);this._elem.css('top',b);break;case'ne':var a=offsets.right+this.xoffset;var b=grid._top+this.yoffset;this._elem.css({right:a,top:b});break;case'e':var a=offsets.right+this.xoffset;var b=(offsets.top+(this._plotDimensions.height-offsets.bottom))/2-this.getHeight()/2;this._elem.css({right:a,top:b});break;case'se':var a=offsets.right+this.xoffset;var b=offsets.bottom+this.yoffset;this._elem.css({right:a,bottom:b});break;case's':var a=(offsets.left+(this._plotDimensions.width-offsets.right))/2-this.getWidth()/2;var b=offsets.bottom+this.yoffset;this._elem.css({left:a,bottom:b});break;case'sw':var a=grid._left+this.xoffset;var b=offsets.bottom+this.yoffset;this._elem.css({left:a,bottom:b});break;case'w':var a=grid._left+this.xoffset;var b=(offsets.top+(this._plotDimensions.height-offsets.bottom))/2-this.getHeight()/2;this._elem.css({left:a,top:b});break;default:var a=grid._right-this.xoffset;var b=grid._bottom+this.yoffset;this._elem.css({right:a,bottom:b});break}}};$.jqplot.sprintf=function(){function pad(str,len,chr,leftJustify){var padding=(str.length>=len)?'':Array(1+len-str.length>>>0).join(chr);return leftJustify?str+padding:padding+str}function justify(value,prefix,leftJustify,minWidth,zeroPad,htmlSpace){var diff=minWidth-value.length;if(diff>0){var spchar=' ';if(htmlSpace){spchar='&nbsp;'}if(leftJustify||!zeroPad){value=pad(value,minWidth,spchar,leftJustify)}else{value=value.slice(0,prefix.length)+pad('',diff,'0',true)+value.slice(prefix.length)}}return value}function formatBaseX(value,base,prefix,leftJustify,minWidth,precision,zeroPad,htmlSpace){var number=value>>>0;prefix=prefix&&number&&{'2':'0b','8':'0','16':'0x'}[base]||'';value=prefix+pad(number.toString(base),precision||0,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad,htmlSpace)}function formatString(value,leftJustify,minWidth,precision,zeroPad,htmlSpace){if(precision!=null){value=value.slice(0,precision)}return justify(value,'',leftJustify,minWidth,zeroPad,htmlSpace)}var a=arguments,i=0,format=a[i++];return format.replace($.jqplot.sprintf.regex,function(substring,valueIndex,flags,minWidth,_,precision,type){if(substring=='%%'){return'%'}var leftJustify=false,positivePrefix='',zeroPad=false,prefixBaseX=false,htmlSpace=false;for(var j=0;flags&&j<flags.length;j++)switch(flags.charAt(j)){case' ':positivePrefix=' ';break;case'+':positivePrefix='+';break;case'-':leftJustify=true;break;case'0':zeroPad=true;break;case'#':prefixBaseX=true;break;case'&':htmlSpace=true;break}if(!minWidth){minWidth=0}else if(minWidth=='*'){minWidth=+a[i++]}else if(minWidth.charAt(0)=='*'){minWidth=+a[minWidth.slice(1,-1)]}else{minWidth=+minWidth}if(minWidth<0){minWidth=-minWidth;leftJustify=true}if(!isFinite(minWidth)){throw new Error('$.jqplot.sprintf: (minimum-)width must be finite');}if(!precision){precision='fFeE'.indexOf(type)>-1?6:(type=='d')?0:void(0)}else if(precision=='*'){precision=+a[i++]}else if(precision.charAt(0)=='*'){precision=+a[precision.slice(1,-1)]}else{precision=+precision}var value=valueIndex?a[valueIndex.slice(0,-1)]:a[i++];switch(type){case's':{if(value==null){return''}return formatString(String(value),leftJustify,minWidth,precision,zeroPad,htmlSpace)}case'c':return formatString(String.fromCharCode(+value),leftJustify,minWidth,precision,zeroPad,htmlSpace);case'b':return formatBaseX(value,2,prefixBaseX,leftJustify,minWidth,precision,zeroPad,htmlSpace);case'o':return formatBaseX(value,8,prefixBaseX,leftJustify,minWidth,precision,zeroPad,htmlSpace);case'x':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad,htmlSpace);case'X':return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad,htmlSpace).toUpperCase();case'u':return formatBaseX(value,10,prefixBaseX,leftJustify,minWidth,precision,zeroPad,htmlSpace);case'i':case'd':{var number=parseInt(+value,10);if(isNaN(number)){return''}var prefix=number<0?'-':positivePrefix;value=prefix+pad(String(Math.abs(number)),precision,'0',false);return justify(value,prefix,leftJustify,minWidth,zeroPad,htmlSpace)}case'e':case'E':case'f':case'F':case'g':case'G':{var number=+value;if(isNaN(number)){return''}var prefix=number<0?'-':positivePrefix;var method=['toExponential','toFixed','toPrecision']['efg'.indexOf(type.toLowerCase())];var textTransform=['toString','toUpperCase']['eEfFgG'.indexOf(type)%2];value=prefix+Math.abs(number)[method](precision);return justify(value,prefix,leftJustify,minWidth,zeroPad,htmlSpace)[textTransform]()}case'p':case'P':{var number=+value;if(isNaN(number)){return''}var prefix=number<0?'-':positivePrefix;var parts=String(Number(Math.abs(number)).toExponential()).split(/e|E/);var sd=(parts[0].indexOf('.')!=-1)?parts[0].length-1:parts[0].length;var zeros=(parts[1]<0)?-parts[1]-1:0;if(Math.abs(number)<1){if(sd+zeros<=precision){value=prefix+Math.abs(number).toPrecision(sd)}else{if(sd<=precision-1){value=prefix+Math.abs(number).toExponential(sd-1)}else{value=prefix+Math.abs(number).toExponential(precision-1)}}}else{var prec=(sd<=precision)?sd:precision;value=prefix+Math.abs(number).toPrecision(prec)}var textTransform=['toString','toUpperCase']['pP'.indexOf(type)%2];return justify(value,prefix,leftJustify,minWidth,zeroPad,htmlSpace)[textTransform]()}case'n':return'';default:return substring}})};$.jqplot.sprintf.regex=/%%|%(\d+\$)?([-+#0& ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([nAscboxXuidfegpEGP])/g})(jQuery);function nMarkerRenderer(options){this.show=true;this.style='filledCircle';this.lineWidth=2;this.size=9.0;this.color='#666666';this.shadow=true;this.shadowAngle=45;this.shadowOffset=1;this.shadowDepth=3;this.shadowAlpha='0.07';this.shadowRenderer=new nShadowRenderer();this.shapeRenderer=new nShapeRenderer();this.image=null;this.draw=function(x,y,ctx,options){options=options||{};if(this.image){var xAdjust=0;var yAdjust=0;switch(this.image.halign){case'right':xAdjust=-16;break;case'center':xAdjust=-8;break}switch(this.image.valign){case'center':yAdjust=-8;break;case'bottom':yAdjust=-16;break}var img=new Image();img.onload=function(){ctx.drawImage(img,x+xAdjust,y+yAdjust,16,16)};img.src=this.image.source}else{switch(this.style){case'upVee':this.drawUpVee(x,y,ctx,false,options);break;case'downVee':this.drawDownVee(x,y,ctx,false,options);break;case'diamond':this.drawDiamond(x,y,ctx,false,options);break;case'filledDiamond':this.drawDiamond(x,y,ctx,true,options);break;case'star':this.drawStar(x,y,ctx,false,options);break;case'filledStar':this.drawStar(x,y,ctx,true,options);break;case'rectDiagRight':this.drawRectangleDiag(x,y,ctx,false,options,"r");break;case'filledRectDiagRight':this.drawRectangleDiag(x,y,ctx,true,options,"r");break;case'rectDiagLeft':this.drawRectangleDiag(x,y,ctx,false,options,"l");break;case'filledRectDiagLeft':this.drawRectangleDiag(x,y,ctx,true,options,"l");break;case'triangleRight':this.drawTriangle(x,y,ctx,false,options,"r");break;case'filledTriangleRight':this.drawTriangle(x,y,ctx,true,options,"r");break;case'triangleLeft':this.drawTriangle(x,y,ctx,false,options,"l");break;case'filledTriangleLeft':this.drawTriangle(x,y,ctx,true,options,"l");break;case'triangleUp':this.drawTriangle(x,y,ctx,false,options,"u");break;case'filledTriangleUp':this.drawTriangle(x,y,ctx,true,options,"u");break;case'triangleDown':this.drawTriangle(x,y,ctx,false,options,"d");break;case'filledTriangleDown':this.drawTriangle(x,y,ctx,true,options,"d");break;case'rectHorizontal':this.drawRectangle(x,y,ctx,false,options,"h");break;case'filledRectHorizontal':this.drawRectangle(x,y,ctx,true,options,"h");break;case'rectVertical':this.drawRectangle(x,y,ctx,false,options,"v");break;case'filledRectVertical':this.drawRectangle(x,y,ctx,true,options,"v");break;case'heart':this.drawHeart(x,y,ctx,false,options);break;case'filledHeart':this.drawHeart(x,y,ctx,true,options);break;case'circle':this.drawCircle(x,y,ctx,false,options);break;case'filledCircle':this.drawCircle(x,y,ctx,true,options);break;case'square':this.drawSquare(x,y,ctx,false,options);break;case'filledSquare':this.drawSquare(x,y,ctx,true,options);break;case'x':this.drawX(x,y,ctx,true,options);break;case'plus':this.drawPlus(x,y,ctx,true,options);break;case'dash':this.drawDash(x,y,ctx,true,options);break;default:this.drawDiamond(x,y,ctx,false,options);break}}};this.init=function(options){$.extend(true,this,options);var sdopt={angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,lineWidth:this.lineWidth,depth:this.shadowDepth,closePath:true};if(this.style.indexOf('filled')!=-1){sdopt.fill=true}if(this.style.indexOf('ircle')!=-1){sdopt.isarc=true;sdopt.closePath=false}this.shadowRenderer.init(sdopt);var shopt={fill:false,isarc:false,strokeStyle:this.color,fillStyle:this.color,lineWidth:this.lineWidth,closePath:true};if(this.style.indexOf('filled')!=-1){shopt.fill=true}if(this.style.indexOf('ircle')!=-1){shopt.isarc=true;shopt.closePath=false}this.shapeRenderer.init(shopt)};this.drawLine=function(x1,y1,x2,y2,ctx){ctx.save();ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.strokeStyle=this.color;ctx.stroke();ctx.restore()};this.drawUpVee=function(x,y,ctx,fill,options){var stretch=1.2;var dx=this.size/1/stretch;var dy=this.size/1*stretch;var opts=$.extend(true,{},this.options,{closePath:false});var points=[[x+dx,y+dy],[x,y],[x-dx,y+dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points,{closePath:false})}this.shapeRenderer.draw(ctx,points,opts);ctx.restore()};this.drawDownVee=function(x,y,ctx,fill,options){var stretch=1.2;var dx=this.size/1/stretch;var dy=this.size/1*stretch;var opts=$.extend(true,{},this.options,{closePath:false});var points=[[x+dx,y-dy],[x,y],[x-dx,y-dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points,{closePath:false})}this.shapeRenderer.draw(ctx,points,opts);ctx.restore()};this.drawDiamond=function(x,y,ctx,fill,options){var stretch=1.2;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points=[[x-dx,y],[x,y+dy],[x+dx,y],[x,y-dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawStar=function(x,y,ctx,fill,options){var stretch=1.2;var dx=this.size/2*stretch;var dy=0-(this.size/2*stretch);var dyE=0-(this.size/1.5*stretch);var points=[[x,y+dyE],[x+(dx/3),y+(dy/2)],[x+dx,y+(dy/2)],[x+(dx/2),y],[x+dx,y-dy],[x,y-(dy/2)],[x-dx,y-dy],[x-(dx/2),y],[x-dx,y+(dy/2)],[x-(dx/3),y+(dy/2)]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawRectangleDiag=function(x,y,ctx,fill,options,direction){var stretch=1.2;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points=null;switch(direction){case"l":points=[[x,y+dy],[x+dx,y+(dy/2)],[x,y-dx],[x-dx,y-(dy/2)]];break;default:points=[[x,y+dy],[x+dx,y-(dy/2)],[x,y-dx],[x-dx,y+(dy/2)]];break}if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawTriangle=function(x,y,ctx,fill,options,direction){var stretch=1.2;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points=null;switch(direction){case"r":points=[[x+dx,y],[x-dx,y-dy],[x-dx,y+dx]];break;case"l":points=[[x-dx,y],[x+dx,y-dy],[x+dx,y+dx]];break;case"d":points=[[x,y+dy],[x-dx,y-dy],[x+dx,y-dx]];break;default:points=[[x,y-dy],[x-dx,y+dy],[x+dx,y+dx]];break}if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawRectangle=function(x,y,ctx,fill,options,direction){var stretch=1.2;var dx=this.size/2*stretch;var dy=this.size/2*stretch;switch(direction){case"v":dx=this.size/4*stretch;break;default:dy=this.size/4*stretch;break}var points=[[x-dx,y-dy],[x-dx,y+dy],[x+dx,y+dy],[x+dx,y-dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawHeart=function(x,y,ctx,fill,options){var stretch=1.5;var dx=this.size/2*stretch;var dy=0-(this.size/2*stretch);var points=[[x,y+(dy/2)],[x+(dx/3),y+dy],[x+dx,y+dy],[x+dx,y],[x,y-dy],[x-dx,y],[x-dx,y+dy],[x-(dx/3),y+dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawPlus=function(x,y,ctx,fill,options){var stretch=1.0;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points1=[[x,y-dy],[x,y+dy]];var points2=[[x+dx,y],[x-dx,y]];var opts=$.extend(true,{},this.options,{closePath:false});if(this.shadow){this.shadowRenderer.draw(ctx,points1,{closePath:false});this.shadowRenderer.draw(ctx,points2,{closePath:false})}this.shapeRenderer.draw(ctx,points1,opts);this.shapeRenderer.draw(ctx,points2,opts);ctx.restore()};this.drawX=function(x,y,ctx,fill,options){var stretch=1.0;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var opts=$.extend(true,{},this.options,{closePath:false});var points1=[[x-dx,y-dy],[x+dx,y+dy]];var points2=[[x-dx,y+dy],[x+dx,y-dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points1,{closePath:false});this.shadowRenderer.draw(ctx,points2,{closePath:false})}this.shapeRenderer.draw(ctx,points1,opts);this.shapeRenderer.draw(ctx,points2,opts);ctx.restore()};this.drawDash=function(x,y,ctx,fill,options){var stretch=1.0;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points=[[x-dx,y],[x+dx,y]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawSquare=function(x,y,ctx,fill,options){var stretch=1.0;var dx=this.size/2*stretch;var dy=this.size/2*stretch;var points=[[x-dx,y-dy],[x-dx,y+dy],[x+dx,y+dy],[x+dx,y-dy]];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.drawCircle=function(x,y,ctx,fill,options){var radius=this.size/2;var end=2*Math.PI;var points=[x,y,radius,0,end,true];if(this.shadow){this.shadowRenderer.draw(ctx,points)}this.shapeRenderer.draw(ctx,points,options);ctx.restore()};this.init(options)}function nShadowRenderer(options){this.angle=45;this.offset=1;this.alpha=0.07;this.lineWidth=1.5;this.lineJoin='miter';this.lineCap='round';this.closePath=false;this.fill=false;this.depth=3;this.isarc=false;this.draw=function(ctx,points,options){ctx.save();var opts=(options!=null)?options:{};var fill=(opts.fill!=null)?opts.fill:this.fill;var closePath=(opts.closePath!=null)?opts.closePath:this.closePath;var offset=(opts.offset!=null)?opts.offset:this.offset;var alpha=(opts.alpha!=null)?opts.alpha:this.alpha;var depth=(opts.depth!=null)?opts.depth:this.depth;ctx.lineWidth=(opts.lineWidth!=null)?opts.lineWidth:this.lineWidth;ctx.lineJoin=(opts.lineJoin!=null)?opts.lineJoin:this.lineJoin;ctx.lineCap=(opts.lineCap!=null)?opts.lineCap:this.lineCap;ctx.strokeStyle='rgba(0,0,0,'+alpha+')';ctx.fillStyle='rgba(0,0,0,'+alpha+')';for(var j=0;j<depth;j++){ctx.translate(Math.cos(this.angle*Math.PI/180)*offset,Math.sin(this.angle*Math.PI/180)*offset);ctx.beginPath();if(this.isarc){try{ctx.arc(points[0],points[1],points[2],points[3],points[4],true)}catch(e){}}else{ctx.moveTo(points[0][0],points[0][1]);for(var i=1;i<points.length;i++){ctx.lineTo(points[i][0],points[i][1])}}if(closePath){ctx.closePath()}if(fill){ctx.fill()}else{ctx.stroke()}}ctx.restore()};this.init=function(options){$.extend(true,this,options)};$.extend(true,this,options)}function nShapeRenderer(options){this.lineWidth=1.5;this.lineJoin='miter';this.lineCap='round';this.closePath=false;this.fill=false;this.isarc=false;this.fillRect=false;this.strokeRect=false;this.clearRect=false;this.strokeStyle='#999999';this.fillStyle='#999999';this.draw=function(ctx,points,options){ctx.save();var opts=(options!=null)?options:{};var fill=(opts.fill!=null)?opts.fill:this.fill;var closePath=(opts.closePath!=null)?opts.closePath:this.closePath;var fillRect=(opts.fillRect!=null)?opts.fillRect:this.fillRect;var strokeRect=(opts.strokeRect!=null)?opts.strokeRect:this.strokeRect;var clearRect=(opts.clearRect!=null)?opts.clearRect:this.clearRect;var isarc=(opts.isarc!=null)?opts.isarc:this.isarc;ctx.lineWidth=opts.lineWidth||this.lineWidth;ctx.lineJoin=opts.lineJoing||this.lineJoin;ctx.lineCap=opts.lineCap||this.lineCap;ctx.strokeStyle=(opts.strokeStyle||opts.color)||this.strokeStyle;ctx.fillStyle=opts.fillStyle||this.fillStyle;ctx.beginPath();if(isarc){ctx.arc(points[0],points[1],points[2],points[3],points[4],true);if(closePath){ctx.closePath()}if(fill){ctx.fill()}else{ctx.stroke()}ctx.restore();return}else if(clearRect){ctx.clearRect(points[0],points[1],points[2],points[3]);ctx.restore();return}else if(fillRect||strokeRect){if(fillRect){ctx.fillRect(points[0],points[1],points[2],points[3])}if(strokeRect){ctx.strokeRect(points[0],points[1],points[2],points[3]);ctx.restore();return}}else{ctx.moveTo(points[0][0],points[0][1]);for(var i=1;i<points.length;i++){ctx.lineTo(points[i][0],points[i][1])}if(closePath){ctx.closePath()}if(fill){ctx.fill()}else{ctx.stroke()}}ctx.restore()};this.init=function(options){$.extend(true,this,options)};$.extend(true,this,options)}
/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */

 
(function($) {
    
    /**
     * Class: $.jqplot.Cursor
     * Plugin class representing the cursor as displayed on the plot.
     */
    $.jqplot.Cursor = function(options) {
        // Group: Properties
        //
        // prop: style
        // CSS spec for cursor style
//CERTRN - To Do - update JQuery???
//old        this.style = 'crosshair';
        this.style = 'default';
        this.previousCursor = 'auto';
		// units to snap to when zooming
		// ie. "minutes" will set zoomed min/max minutes, seconds, milliseconds to zero
		this.snapZoomTo = null;
        // prop: show
        // wether to show the cursor or not.
        this.show = $.jqplot.config.enablePlugins;
		// prop: performOnZoom
		// function to perform on zoom
		this.performOnZoom = function(plot){};
		// prop: performAfterZoom
		// function to perform after zooming complete
		this.performAfterZoom = function(plot){};
        // prop: showTooltip
        // show a cursor position tooltip near the cursor
        this.showTooltip = true;
        // prop: followMouse
        // Tooltip follows the mouse, it is not at a fixed location.
        // Tooltip will show on the grid at the location given by
        // tooltipLocation, offset from the grid edge by tooltipOffset.
        this.followMouse = false;
        // prop: tooltipLocation
        // Where to position tooltip.  If followMouse is true, this is
        // relative to the cursor, otherwise, it is relative to the grid.
        // One of 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.tooltipLocation = 'se';
        // prop: tooltipOffset
        // Pixel offset of tooltip from the grid boudaries or cursor center.
        this.tooltipOffset = 6;
        // prop: showTooltipGridPosition
        // show the grid pixel coordinates of the mouse.
        this.showTooltipGridPosition = false;
        // prop: showTooltipUnitPosition
        // show the unit (data) coordinates of the mouse.
        this.showTooltipUnitPosition = true;
        // prop: showTooltipDataPosition
        // Used with showVerticalLine to show intersecting data points in the tooltip.
        this.showTooltipDataPosition = false;
        // prop: tooltipFormatString
        // sprintf format string for the tooltip.
        // Uses Ash Searle's javascript sprintf implementation
        // found here: http://hexmen.com/blog/2007/03/printf-sprintf/
        // See http://perldoc.perl.org/functions/sprintf.html for reference
        // Note, if showTooltipDataPosition is true, the default tooltipFormatString
        // will be set to the cursorLegendFormatString, not the default given here.
        this.tooltipFormatString = '%.4P, %.4P';
        // prop: useAxesFormatters
        // Use the x and y axes formatters to format the text in the tooltip.
        this.useAxesFormatters = true;
        // prop: tooltipAxisGroups
        // Show position for the specified axes.
        // This is an array like [['xaxis', 'yaxis'], ['xaxis', 'y2axis']]
        // Default is to compute automatically for all visible axes.
        this.tooltipAxisGroups = [];
        // prop: zoom
        // Enable plot zooming.
        this.zoom = false;
        // zoomProxy and zoomTarget properties are not directly set by user.  
        // They Will be set through call to zoomProxy method.
        this.zoomProxy = false;
		//if zoom proxy set up, this will zoom and zoom out on reset on the controller graph
		this.zoomOnController = false;
        this.zoomTarget = false;
        // prop: clickReset
        // Will reset plot zoom if single click on plot without drag.
        this.clickReset = false;
        // prop: dblClickReset
        // Will reset plot zoom if double click on plot without drag.
        this.dblClickReset = true;
        // prop: showVerticalLine
        // draw a vertical line across the plot which follows the cursor.
        // When the line is near a data point, a special legend and/or tooltip can
        // be updated with the data values.
        this.showVerticalLine = false;
        // prop: showHorizontalLine
        // draw a horizontal line across the plot which follows the cursor.
        this.showHorizontalLine = false;
        // prop: constrainZoomTo
        // 'none', 'x' or 'y'
        this.constrainZoomTo = 'none';
        // // prop: autoscaleConstraint
        // // when a constrained axis is specified, true will
        // // auatoscale the adjacent axis.
        // this.autoscaleConstraint = true;
        this.shapeRenderer = new $.jqplot.ShapeRenderer();
        this._zoom = {start:[], end:[], started: false, zooming:false, isZoomed:false, axes:{start:{}, end:{}}};
        this._tooltipElem;
        this.zoomCanvas;
        this.cursorCanvas;
        // prop: intersectionThreshold
        // pixel distance from data point or marker to consider cursor lines intersecting with point.
        // If data point markers are not shown, this should be >= 1 or will often miss point intersections.
        this.intersectionThreshold = 2;
        // prop: showCursorLegend
        // Replace the plot legend with an enhanced legend displaying intersection information.
        this.showCursorLegend = false;
        // prop: cursorLegendFormatString
        // Format string used in the cursor legend.  If showTooltipDataPosition is true,
        // this will also be the default format string used by tooltipFormatString.
        this.cursorLegendFormatString = $.jqplot.Cursor.cursorLegendFormatString;
        $.extend(true, this, options);
    };
    
    $.jqplot.Cursor.cursorLegendFormatString = '%s x:%s, y:%s';
    
    // called with scope of plot
    $.jqplot.Cursor.init = function (target, data, opts){
        // add a cursor attribute to the plot
        var options = opts || {};
        this.plugins.cursor = new $.jqplot.Cursor(options.cursor);
        var c = this.plugins.cursor;

        if (c.show) {
            $.jqplot.eventListenerHooks.push(['jqplotMouseEnter', handleMouseEnter]);
            $.jqplot.eventListenerHooks.push(['jqplotMouseLeave', handleMouseLeave]);
            $.jqplot.eventListenerHooks.push(['jqplotMouseMove', handleMouseMove]);
            
            if (c.showCursorLegend) {              
                opts.legend = opts.legend || {};
                opts.legend.renderer =  $.jqplot.CursorLegendRenderer;
                opts.legend.formatString = this.plugins.cursor.cursorLegendFormatString;
                opts.legend.show = true;
            }
            
            if (c.zoom) {
                $.jqplot.eventListenerHooks.push(['jqplotMouseDown', handleMouseDown]);
                $.jqplot.eventListenerHooks.push(['jqplotMouseUp', handleMouseUp]);
                
                if (c.clickReset) {
                    $.jqplot.eventListenerHooks.push(['jqplotClick', handleClick]);
                }
                
                if (c.dblClickReset) {
                    $.jqplot.eventListenerHooks.push(['jqplotDblClick', handleDblClick]);
                }
            }
    
            this.resetZoom = function() {
                var axes = this.axes;
                if (!c.zoomProxy) {
                    for (var ax in axes) {
                        axes[ax].reset();
                    }
                    this.replot();
                }
                else {
                    var ctx = this.plugins.cursor.zoomCanvas._ctx;
                    ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                }
                this.plugins.cursor._zoom.isZoomed = false;
                this.target.trigger('jqplotResetZoom', [this, this.plugins.cursor]);
            };
            

            if (c.showTooltipDataPosition) {
                c.showTooltipUnitPosition = false;
                c.showTooltipGridPosition = false;
                if (options.cursor.tooltipFormatString == undefined) {
                    c.tooltipFormatString = $.jqplot.Cursor.cursorLegendFormatString;
                }
            }
        }
    };
    
    // called with context of plot
    $.jqplot.Cursor.postDraw = function() {
        var c = this.plugins.cursor;
        // if (c.zoom) {
        c.zoomCanvas = new $.jqplot.GenericCanvas();
        this.eventCanvas._elem.before(c.zoomCanvas.createElement(this._gridPadding, 'jqplot-zoom-canvas', this._plotDimensions));
        var zctx = c.zoomCanvas.setContext();
        // }
        c._tooltipElem = $('<div class="jqplot-cursor-tooltip" style="position:absolute;display:none"></div>');
        c.zoomCanvas._elem.before(c._tooltipElem);
        if (c.showVerticalLine || c.showHorizontalLine) {
            c.cursorCanvas = new $.jqplot.GenericCanvas();
            this.eventCanvas._elem.before(c.cursorCanvas.createElement(this._gridPadding, 'jqplot-cursor-canvas', this._plotDimensions));
            var zctx = c.cursorCanvas.setContext();
        }

        // if we are showing the positions in unit coordinates, and no axes groups
        // were specified, create a default set.
        if (c.showTooltipUnitPosition){
            if (c.tooltipAxisGroups.length === 0) {
                var series = this.series;
                var s;
                var temp = [];
                for (var i=0; i<series.length; i++) {
                    s = series[i];
                    var ax = s.xaxis+','+s.yaxis;
                    if ($.inArray(ax, temp) == -1) {
                        temp.push(ax);
                    }
                }
                for (var i=0; i<temp.length; i++) {
                    c.tooltipAxisGroups.push(temp[i].split(','));
                }
            }
        }
    };
    
    // Group: methods
    //
    // method: $.jqplot.Cursor.zoomProxy
    // links targetPlot to controllerPlot so that plot zooming of
    // targetPlot will be controlled by zooming on the controllerPlot.
    // controllerPlot will not actually zoom, but acts as an
    // overview plot.  Note, the zoom options must be set to true for
    // zoomProxy to work.
    $.jqplot.Cursor.zoomProxy = function(targetPlot, controllerPlot, zoomOnController) {
        var tc = targetPlot.plugins.cursor;
        var cc = controllerPlot.plugins.cursor;
		cc.zoomOnController = zoomOnController;
        tc.zoomTarget = true;
        tc.zoom = true;
        tc.style = 'auto';
        tc.dblClickReset = false;
        cc.zoom = true;
        cc.zoomProxy = true;
              
        controllerPlot.target.bind('jqplotZoom', plotZoom);
        controllerPlot.target.bind('jqplotResetZoom', plotReset);

        function plotZoom(ev, gridpos, datapos, plot, cursor) {
			tc.doZoom(gridpos, datapos, targetPlot, cursor);
        } 

        function plotReset(ev, plot, cursor) {
			var cax = cursor._zoom.axes;
			var axes = targetPlot.axes;
            for (var ax in axes) {
                axes[ax]._ticks = [];
				axes[ax].min = cax[ax].min;
				axes[ax].max = cax[ax].max;
				axes[ax].autoscale = cax[ax].autoscale;
                axes[ax].numberTicks = cax[ax].numberTicks; 
                axes[ax].tickInterval = cax[ax].tickInterval;
                // for date axes
				axes[ax].specialFormat = cax[ax].specialFormat;
				axes[ax].specialFormatFlag = cax[ax].specialFormatFlag;
				axes[ax].useDST = cax[ax].useDST;
                axes[ax].daTickInterval = cax[ax].daTickInterval;
				//if minX, maxX, minY, maxY set, then update min and max respectively to their axis for absolute min/max of "show" series
				var newMin = Number.POSITIVE_INFINITY, newMax = Number.NEGATIVE_INFINITY;
				
				for (var i=0;i<targetPlot.series.length;i++)
				{
					var sObj = targetPlot.series[i];
					var dStr = ax.match(/^[xy]/);
					if (sObj.show && sObj[dStr+"axis"] == ax)
					{
						var minStr = (dStr=="x")?"minX":"minY";
						var maxStr = (dStr=="x")?"maxX":"maxY";
						if (sObj[minStr] && sObj[minStr] < newMin)
							newMin = sObj[minStr];
						if (sObj[maxStr] && sObj[maxStr] > newMax)
							newMax = sObj[maxStr];
					}
				}
				if (newMin != Number.POSITIVE_INFINITY)
				{
					axes[ax].min = (newMin > 0 && (newMin*0.9) < 0)?0:newMin*0.9;
					axes[ax].numberTicks = null;
					axes[ax].tickInterval = null;
					axes[ax].daTickInterval = null;
				}
				if (newMax != Number.NEGATIVE_INFINITY)
				{
					axes[ax].max = newMax*1.1;
					axes[ax].numberTicks = null;
					axes[ax].tickInterval = null;
					axes[ax].daTickInterval = null;
				}
			}
            targetPlot.redraw();
            cursor._zoom.isZoomed = false;
            //targetPlot.resetZoom();
        }
    };
    
    $.jqplot.Cursor.prototype.resetZoom = function(plot, cursor) {
        var axes = plot.axes;
        var cax = cursor._zoom.axes;
        if ((!plot.plugins.cursor.zoomProxy || plot.plugins.cursor.zoomOnController) && cursor._zoom.isZoomed) {
            for (var ax in axes) {
                axes[ax]._ticks = [];
                axes[ax].min = cax[ax].min;
                axes[ax].max = cax[ax].max;
				
				axes[ax].autoscale = cax[ax].autoscale;
                axes[ax].numberTicks = cax[ax].numberTicks; 
                axes[ax].tickInterval = cax[ax].tickInterval;
                // for date axes
                axes[ax].daTickInterval = cax[ax].daTickInterval;
				axes[ax].specialFormat = cax[ax].specialFormat;
				axes[ax].specialFormatFlag = cax[ax].specialFormatFlag;
				axes[ax].useDST = cax[ax].useDST;
            }
            plot.redraw();
            cursor._zoom.isZoomed = false;
        }
        else {
            var ctx = cursor.zoomCanvas._ctx;
            ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        }
        plot.target.trigger('jqplotResetZoom', [plot, cursor]);
    };
    
    $.jqplot.Cursor.resetZoom = function(plot) {
        plot.resetZoom();
    };
    
    $.jqplot.Cursor.prototype.doZoom = function (gridpos, datapos, plot, cursor) {
		this.performOnZoom(plot);
        var c = cursor;
        var axes = plot.axes;
        var zaxes = c._zoom.axes;
        var start = zaxes.start;
        var end = zaxes.end;
        var min, max;
        var ctx = plot.plugins.cursor.zoomCanvas._ctx;
        // don't zoom if zoom area is too small (in pixels)
        if ((c.constrainZoomTo == 'none' && Math.abs(gridpos.x - c._zoom.start[0]) > 6 && Math.abs(gridpos.y - c._zoom.start[1]) > 6) || (c.constrainZoomTo == 'x' && Math.abs(gridpos.x - c._zoom.start[0]) > 6) ||  (c.constrainZoomTo == 'y' && Math.abs(gridpos.y - c._zoom.start[1]) > 6)) {
            if (!plot.plugins.cursor.zoomProxy || plot.plugins.cursor.zoomOnController) {
                for (var ax in datapos) {
                    // make a copy of the original axes to revert back.
                    if (c._zoom.axes[ax] == undefined) {
                        c._zoom.axes[ax] = {};
                        c._zoom.axes[ax].numberTicks = axes[ax].numberTicks;
                        c._zoom.axes[ax].tickInterval = axes[ax].tickInterval;
						c._zoom.axes[ax].autoscale = axes[ax].autoscale;
                        // for date axes...
                        c._zoom.axes[ax].daTickInterval = axes[ax].daTickInterval;
						c._zoom.axes[ax].specialFormat = axes[ax].specialFormat;
						c._zoom.axes[ax].specialFormatFlag = axes[ax].specialFormatFlag;
						c._zoom.axes[ax].useDST = axes[ax].useDST;
                        c._zoom.axes[ax].min = axes[ax].min;
                        c._zoom.axes[ax].max = axes[ax].max;
                    }
                    if ((c.constrainZoomTo == 'none') || (c.constrainZoomTo == 'x' && ax.charAt(0) == 'x') || (c.constrainZoomTo == 'y' && ax.charAt(0) == 'y')) {   
                        dp = datapos[ax];
                        if (dp != null) {           
                            if (dp > start[ax]) {
								var newMin = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'down'):start[ax];
								var newMax = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'up'):dp;
                            }
                            else {
								span = start[ax] - dp;
								var newMin = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'down'):dp;
								var newMax = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'up'):start[ax];
                            }
							if (newMin != newMax)
							{
								axes[ax].min = newMin;
								axes[ax].max = newMax;
							}
                            axes[ax].tickInterval = null;
                            // for date axes...
                            axes[ax].daTickInterval = null;
                            axes[ax]._ticks = [];
                        }
						if (axes[ax].autoscaleOnZoom != null)
							axes[ax].autoscale = this.autoscaleOnZoom;
                    }
                }
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                plot.redraw();
                c._zoom.isZoomed = true;
            }
			this.performAfterZoom(plot);
            plot.target.trigger('jqplotZoom', [gridpos, datapos, plot, cursor]);
        }
    };
    
    $.jqplot.preInitHooks.push($.jqplot.Cursor.init);
    $.jqplot.postDrawHooks.push($.jqplot.Cursor.postDraw);
    
    function updateTooltip(gridpos, datapos, plot) {
        var c = plot.plugins.cursor;
        var s = '';
        var addbr = false;
        if (c.showTooltipGridPosition) {
            s = gridpos.x+', '+gridpos.y;
            addbr = true;
        }
        if (c.showTooltipUnitPosition) {
            var g;
            for (var i=0; i<c.tooltipAxisGroups.length; i++) {
                g = c.tooltipAxisGroups[i];
                if (addbr) {
                    s += '<br />';
                }
                if (c.useAxesFormatters) {
                    var xf = plot.axes[g[0]]._ticks[0].formatter;
                    var yf = plot.axes[g[1]]._ticks[0].formatter;
                    var xfstr = plot.axes[g[0]]._ticks[0].formatString;
                    var yfstr = plot.axes[g[1]]._ticks[0].formatString;
                    s += xf(xfstr, datapos[g[0]]) + ', '+ yf(yfstr, datapos[g[1]]);
                }
                else {
                    s += $.jqplot.sprintf(c.tooltipFormatString, datapos[g[0]], datapos[g[1]]);
                }
                addbr = true;
            }
        }
        
        if (c.showTooltipDataPosition) {
            var series = plot.series; 
            var ret = getIntersectingPoints(plot, gridpos.x, gridpos.y);
            var addbr = false;
        
            for (var i = 0; i< series.length; i++) {
                if (series[i].show) {
                    var idx = series[i].index;
                    var label = series[i].label.toString();
                    var cellid = $.inArray(idx, ret.indices);
                    var sx = undefined;
                    var sy = undefined;
                    if (cellid != -1) {
                        var data = ret.data[cellid].data;
                        if (c.useAxesFormatters) {
                            var xf = series[i]._xaxis._ticks[0].formatter;
                            var yf = series[i]._yaxis._ticks[0].formatter;
                            var xfstr = series[i]._xaxis._ticks[0].formatString;
                            var yfstr = series[i]._yaxis._ticks[0].formatString;
                            sx = xf(xfstr, data[0]);
                            sy = yf(yfstr, data[1]);
                        }
                        else {
                            sx = data[0];
                            sy = data[1];
                        }
                        if (addbr) {
                            s += '<br />';
                        }
                        s += $.jqplot.sprintf(c.tooltipFormatString, label, sx, sy);
                        addbr = true;
                    }
                }
            }
            
        }
        c._tooltipElem.html(s);
    }
    
    function moveLine(gridpos, plot) {
        var c = plot.plugins.cursor;
        var ctx = c.cursorCanvas._ctx;
        ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        if (c.showVerticalLine) {
            c.shapeRenderer.draw(ctx, [[gridpos.x, 0], [gridpos.x, ctx.canvas.height]]);
        }
        if (c.showHorizontalLine) {
            c.shapeRenderer.draw(ctx, [[0, gridpos.y], [ctx.canvas.width, gridpos.y]]);
        }
        var ret = getIntersectingPoints(plot, gridpos.x, gridpos.y);
        if (c.showCursorLegend) {
            var cells = $(plot.targetId + ' td.jqplot-cursor-legend-label');
            for (var i=0; i<cells.length; i++) {
                var idx = $(cells[i]).data('seriesIndex');
                var series = plot.series[idx];
                var label = series.label.toString();
                var cellid = $.inArray(idx, ret.indices);
                var sx = undefined;
                var sy = undefined;
                if (cellid != -1) {
                    var data = ret.data[cellid].data;
                    if (c.useAxesFormatters) {
                        var xf = series._xaxis._ticks[0].formatter;
                        var yf = series._yaxis._ticks[0].formatter;
                        var xfstr = series._xaxis._ticks[0].formatString;
                        var yfstr = series._yaxis._ticks[0].formatString;
                        sx = xf(xfstr, data[0]);
                        sy = yf(yfstr, data[1]);
                    }
                    else {
                        sx = data[0];
                        sy = data[1];
                    }
                }
                if (plot.legend.escapeHtml) {
                    $(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString, label, sx, sy));
                }
                else {
                    $(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString, label, sx, sy));
                }
            }        
        }
    }
        
    function getIntersectingPoints(plot, x, y) {
        var ret = {indices:[], data:[]};
        var s, i, d0, d, j, r;
        var threshold;
        var c = plot.plugins.cursor;
        for (var i=0; i<plot.series.length; i++) {
            s = plot.series[i];
            r = s.renderer;
            if (s.show) {
                threshold = c.intersectionThreshold;
                if (s.showMarker) {
                    threshold += s.markerRenderer.size/2;
                }
                for (var j=0; j<s.gridData.length; j++) {
                    p = s.gridData[j];
                    // check vertical line
                    if (c.showVerticalLine) {
                        if (Math.abs(x-p[0]) <= threshold) {
                            ret.indices.push(i);
                            ret.data.push({seriesIndex: i, pointIndex:j, gridData:p, data:s.data[j]});
                        }
                    }
                } 
            }
        }
        return ret;
    }
    
    function moveTooltip(gridpos, plot) {
        var c = plot.plugins.cursor;  
        var elem = c._tooltipElem;
        switch (c.tooltipLocation) {
            case 'nw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'n':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'ne':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'e':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            case 'se':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 's':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 'sw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 'w':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            default:
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
        }
            
        c._tooltipElem.css('left', x);
        c._tooltipElem.css('top', y);
    }
    
    function positionTooltip(plot) { 
        // fake a grid for positioning
        var grid = plot._gridPadding; 
        var c = plot.plugins.cursor;
        var elem = c._tooltipElem;  
        switch (c.tooltipLocation) {
            case 'nw':
                var a = grid.left + c.tooltipOffset;
                var b = grid.top + c.tooltipOffset;
                elem.css('left', a);
                elem.css('top', b);
                break;
            case 'n':
                var a = (grid.left + (plot._plotDimensions.width - grid.right))/2 - elem.outerWidth(true)/2;
                var b = grid.top + c.tooltipOffset;
                elem.css('left', a);
                elem.css('top', b);
                break;
            case 'ne':
                var a = grid.right + c.tooltipOffset;
                var b = grid.top + c.tooltipOffset;
                elem.css({right:a, top:b});
                break;
            case 'e':
                var a = grid.right + c.tooltipOffset;
                var b = (grid.top + (plot._plotDimensions.height - grid.bottom))/2 - elem.outerHeight(true)/2;
                elem.css({right:a, top:b});
                break;
            case 'se':
                var a = grid.right + c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({right:a, bottom:b});
                break;
            case 's':
                var a = (grid.left + (plot._plotDimensions.width - grid.right))/2 - elem.outerWidth(true)/2;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({left:a, bottom:b});
                break;
            case 'sw':
                var a = grid.left + c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({left:a, bottom:b});
                break;
            case 'w':
                var a = grid.left + c.tooltipOffset;
                var b = (grid.top + (plot._plotDimensions.height - grid.bottom))/2 - elem.outerHeight(true)/2;
                elem.css({left:a, top:b});
                break;
            default:  // same as 'se'
                var a = grid.right - c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({right:a, bottom:b});
                break;
        }
    }
    
    function handleClick (ev, gridpos, datapos, neighbor, plot) {
        ev.stopPropagation();
        ev.preventDefault();
        var c = plot.plugins.cursor;
        if (c.clickReset) {
            c.resetZoom(plot, c);
        }
        return false;
    }
    
    function handleDblClick (ev, gridpos, datapos, neighbor, plot) {
        ev.stopPropagation();
        ev.preventDefault();
        var c = plot.plugins.cursor;
        if (c.dblClickReset) {
            c.resetZoom(plot, c);
        }
        return false;
    }
    
    function handleMouseLeave(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.show) {
            $(ev.target).css('cursor', c.previousCursor);
            if (c.showTooltip) {
                c._tooltipElem.hide();
            }
            if (c.zoom) {
                c._zoom.started = false;
                c._zoom.zooming = false;
                if (!c.zoomProxy) {
                    var ctx = c.zoomCanvas._ctx;
                    ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                }
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                var ctx = c.cursorCanvas._ctx;
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
            } if (c.showCursorLegend) {
            var cells = $(plot.targetId + ' td.jqplot-cursor-legend-label');
            for (var i=0; i<cells.length; i++) {
                var idx = $(cells[i]).data('seriesIndex');
                var series = plot.series[idx];
                var label = series.label.toString();
                if (plot.legend.escapeHtml) {
                    $(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString, label, undefined, undefined));
                }
                else {
                    $(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString, label, undefined, undefined));
                }
                
            }        
        }
        }
    }
    
    function handleMouseEnter(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.show) {
            c.previousCursor = ev.target.style.cursor;
            ev.target.style.cursor = c.style;
            if (c.showTooltip) {
                updateTooltip(gridpos, datapos, plot);
                if (c.followMouse) {
                    moveTooltip(gridpos, plot);
                }
                else {
                    positionTooltip(plot);
                }
                c._tooltipElem.show();
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                moveLine(gridpos, plot);
            }
        }
    }
    
    function handleMouseMove(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        var ctx = c.zoomCanvas._ctx;
        if (c.show) {
            if (c.showTooltip) {
                updateTooltip(gridpos, datapos, plot);
                if (c.followMouse) {
                    moveTooltip(gridpos, plot);
                }
            }
            if (c.zoom && c._zoom.started && !c.zoomTarget) {
                c._zoom.zooming = true;
                if (c.constrainZoomTo == 'x') {
                    c._zoom.end = [gridpos.x, ctx.canvas.height];
                }
                else if (c.constrainZoomTo == 'y') {
                    c._zoom.end = [ctx.canvas.width, gridpos.y];
                }
                else {
                    c._zoom.end = [gridpos.x, gridpos.y];
                }
                drawZoomBox.call(c);
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                moveLine(gridpos, plot);
            }
        }
    }
    
    function handleMouseDown(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        var axes = plot.axes;
        if (c.zoom) {
            if (!c.zoomProxy) {
                var ctx = c.zoomCanvas._ctx;
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
            }
            if (c.constrainZoomTo == 'x') {
                c._zoom.start = [gridpos.x, 0];
            }
            else if (c.constrainZoomTo == 'y') {
                c._zoom.start = [0, gridpos.y];
            }
            else {
                c._zoom.start = [gridpos.x, gridpos.y];
            }
            c._zoom.started = true;
            for (var ax in datapos) {
                // get zoom starting position.
                c._zoom.axes.start[ax] = datapos[ax];
            }
        }
    }
    
    function handleMouseUp(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.zoom && c._zoom.zooming && !c.zoomTarget) {
            c.doZoom(gridpos, datapos, plot, c);
        }
        c._zoom.started = false;
        c._zoom.zooming = false;
    }
    
    $.jqplot.CursorLegendRenderer = function(options) {
        $.jqplot.TableLegendRenderer.call(this, options);
        this.formatString = '%s';
    };
    
    $.jqplot.CursorLegendRenderer.prototype = new $.jqplot.TableLegendRenderer();
    $.jqplot.CursorLegendRenderer.prototype.constructor = $.jqplot.CursorLegendRenderer;
    
    // called in context of a Legend
    $.jqplot.CursorLegendRenderer.prototype.draw = function() {
        if (this.show) {
            var series = this._series;
            // make a table.  one line label per row.
            this._elem = $('<table class="jqplot-legend jqplot-cursor-legend" style="position:absolute"></table>');
        
            var pad = false;
            for (var i = 0; i< series.length; i++) {
                s = series[i];
                if (s.show) {
                    var lt = $.jqplot.sprintf(this.formatString, s.label.toString());
                    if (lt) {
                        var color = s.color;
                        if (s._stack && !s.fill) {
                            color = '';
                        }
                        addrow.call(this, lt, color, pad, i);
                        pad = true;
                    }
                    // let plugins add more rows to legend.  Used by trend line plugin.
                    for (var j=0; j<$.jqplot.addLegendRowHooks.length; j++) {
                        var item = $.jqplot.addLegendRowHooks[j].call(this, s);
                        if (item) {
                            addrow.call(this, item.label, item.color, pad);
                            pad = true;
                        } 
                    }
                }
            }
        }
        
        function addrow(label, color, pad, idx) {
            var rs = (pad) ? this.rowSpacing : '0';
            var tr = $('<tr class="jqplot-legend jqplot-cursor-legend"></tr>').appendTo(this._elem);
            tr.data('seriesIndex', idx);
            $('<td class="jqplot-legend jqplot-cursor-legend-swatch" style="padding-top:'+rs+';">'+
                '<div style="border:1px solid #cccccc;padding:0.2em;">'+
                '<div class="jqplot-cursor-legend-swatch" style="background-color:'+color+';"></div>'+
                '</div></td>').appendTo(tr);
            var td = $('<td class="jqplot-legend jqplot-cursor-legend-label" style="vertical-align:middle;padding-top:'+rs+';"></td>');
            td.appendTo(tr);
            td.data('seriesIndex', idx);
            if (this.escapeHtml) {
                td.text(label);
            }
            else {
                td.html(label);
            }
        }
        return this._elem;
    };
    
})(jQuery);

function drawZoomBox() {
	var start = this._zoom.start;
	var end = this._zoom.end;
	var ctx = this.zoomCanvas._ctx;
	var l, t, h, w;
	if (end[0] > start[0]) {
		l = start[0];
		w = end[0] - start[0];
	}
	else {
		l = end[0];
		w = start[0] - end[0];
	}
	if (end[1] > start[1]) {
		t = start[1];
		h = end[1] - start[1];
	}
	else {
		t = end[1];
		h = start[1] - end[1];
	}
	ctx.fillStyle = 'rgba(0,0,0,0.2)';
	ctx.strokeStyle = '#999999';
	ctx.lineWidth = 1.0;
	ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
	ctx.fillRect(0,0,ctx.canvas.width, ctx.canvas.height);
	ctx.clearRect(l, t, w, h);
	// IE won't show transparent fill rect, so stroke a rect also.
	ctx.strokeRect(l,t,w,h);
	if ($.browser.msie)
		ctx.fillRect(l,t,w,h);
}
/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php.
 *
 * Thanks for using jqPlot!
 * 
 */
 
(function($) {  
    /**
     * Class: $.jqplot.DateAxisRenderer
     * A plugin for a jqPlot to render an axis as a series of date values.
     * This renderer has no options beyond those supplied by the <Axis> class.
     * It supplies it's own tick formatter, so the tickOptions.formatter option
     * should not be overridden.
     * 
     * Thanks to Ken Synder for his enhanced Date instance methods which are
     * included with this code <http://kendsnyder.com/sandbox/date/>.
     * 
     * To use this renderer, include the plugin in your source
     * > <script type="text/javascript" language="javascript" src="plugins/jqplot.dateAxisRenderer.js"></script>
     * 
     * and supply the appropriate options to your plot
     * 
     * > {axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}}}
     * 
     * Dates can be passed into the axis in almost any recognizable value and 
     * will be parsed.  They will be rendered on the axis in the format
     * specified by tickOptions.formatString.  e.g. tickOptions.formatString = '%Y-%m-%d'.
     * 
     * Accecptable format codes 
     * are:
     * 
     * > Code    Result                  Description
     * >             == Years ==
     * > %Y      2008                Four-digit year
     * > %y      08                  Two-digit year
     * >             == Months ==
     * > %m      09                  Two-digit month
     * > %#m     9                   One or two-digit month
     * > %B      September           Full month name
     * > %b      Sep                 Abbreviated month name
     * >             == Days ==
     * > %d      05                  Two-digit day of month
     * > %#d     5                   One or two-digit day of month
     * > %e      5                   One or two-digit day of month
     * > %A      Sunday              Full name of the day of the week
     * > %a      Sun                 Abbreviated name of the day of the week
     * > %w      0                   Number of the day of the week (0 = Sunday, 6 = Saturday)
     * > %o      th                  The ordinal suffix string following the day of the month
     * >             == Hours ==
     * > %H      23                  Hours in 24-hour format (two digits)
     * > %#H     3                   Hours in 24-hour integer format (one or two digits)
     * > %I      11                  Hours in 12-hour format (two digits)
     * > %#I     3                   Hours in 12-hour integer format (one or two digits)
     * > %p      PM                  AM or PM
     * >             == Minutes ==
     * > %M      09                  Minutes (two digits)
     * > %#M     9                   Minutes (one or two digits)
     * >             == Seconds ==
     * > %S      02                  Seconds (two digits)
     * > %#S     2                   Seconds (one or two digits)
     * > %s      1206567625723       Unix timestamp (Seconds past 1970-01-01 00:00:00)
     * >             == Milliseconds ==
     * > %N      008                 Milliseconds (three digits)
     * > %#N     8                   Milliseconds (one to three digits)
     * >             == Timezone ==
     * > %O      360                 difference in minutes between local time and GMT
     * > %Z      Mountain Standard Time  Name of timezone as reported by browser
     * > %G      -06:00              Hours and minutes between GMT
     * >             == Shortcuts ==
     * > %F      2008-03-26          %Y-%m-%d
     * > %T      05:06:30            %H:%M:%S
     * > %X      05:06:30            %H:%M:%S
     * > %x      03/26/08            %m/%d/%y
     * > %D      03/26/08            %m/%d/%y
     * > %#c     Wed Mar 26 15:31:00 2008  %a %b %e %H:%M:%S %Y
     * > %v      3-Sep-2008          %e-%b-%Y
     * > %R      15:31               %H:%M
     * > %r      3:31:00 PM          %I:%M:%S %p
     * >             == Characters ==
     * > %n      \n                  Newline
     * > %t      \t                  Tab
     * > %%      %                   Percent Symbol 
     */
    $.jqplot.DateAxisRenderer = function() {
        $.jqplot.LinearAxisRenderer.call(this);
    };
    
    $.jqplot.DateAxisRenderer.prototype = new $.jqplot.LinearAxisRenderer();
    $.jqplot.DateAxisRenderer.prototype.constructor = $.jqplot.DateAxisRenderer;
    
    $.jqplot.DateTickFormatter = function(format, val) {
        if (!format) {
            format = '%Y/%m/%d';
        }
        return Date.create(val).strftime(format);
    };
	
	$.jqplot.DateTickFormatterSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date;
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span><span class='jqplot-elem-hideOnHover nowTime'>%H:%M</span>";
		return iDate.strftime(nFormat);
	};
	
	$.jqplot.DateTickFormatterXSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
            nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M<br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-hideOnHover'>%#m/%#d/%y</span>";
        }
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M";
		}
        return iDate.strftime(nFormat);
    };
	
	$.jqplot.DateTickFormatterX2Special = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var df = MP_Util.GetDateFormatter();
		var iDate2 = df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR);
		var iDate4 = df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>"+iDate4+"&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
			nFormat = "<span class='jqplot-elem-showOnHover'>"+iDate4+"</span><span class='jqplot-elem-hideOnHover'>"+iDate2+"</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M";
		}
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>"+iDate4+"</span>&nbsp;<br class='jqplot-elem-hideOnHover'/>%H:%M";
		}
		return iDate.strftime(nFormat);
    };
	
	$.jqplot.DateTickFormatterYSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
            nFormat = "%#m/%#d/<span class='jqplot-elem-showOnHover'>%Y</span><span class='jqplot-elem-hideOnHover'>%y</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M";
        }
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M";
		}
        return iDate.strftime(nFormat);
    };
    
    $.jqplot.DateAxisRenderer.prototype.init = function(options){
        // prop: tickRenderer
        // A class of a rendering engine for creating the ticks labels displayed on the plot, 
        // See <$.jqplot.AxisTickRenderer>.
        // this.tickRenderer = $.jqplot.AxisTickRenderer;
        // this.labelRenderer = $.jqplot.AxisLabelRenderer;
        this.daTickInterval = null;
        this._daTickInterval = null;
        $.extend(true, this, options);
		
		if (this.specialFormat && this.specialFormatFlag!=null && this.specialFormatFlag == 1)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterSpecial;
		}
		else if (this.specialFormat && this.name.match("xaxis")!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterXSpecial;
		}
		else if (this.specialFormat && this.name.match(/^x/)!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterX2Special;
		}
		else if (this.specialFormat && this.name.match(/^y/)!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterYSpecial;
		}
		else
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatter;
		}
        var db = this._dataBounds;
        // Go through all the series attached to this axis and find
        // the min/max bounds for this axis.
        for (var i=0; i<this._series.length; i++) {
            var s = this._series[i];
            var d = s.data;
            var pd = s._plotData;
            var sd = s._stackData;
            
            for (var j=0; j<d.length; j++) { 
                if (this.name.match(/^x/)) {
                    d[j][0] = Date.create(d[j][0]).getTime();
                    pd[j][0] = Date.create(d[j][0]).getTime();
                    sd[j][0] = Date.create(d[j][0]).getTime();
                    if (d[j][0] < db.min || db.min == null) {
                        db.min = d[j][0];
                    }
                    if (d[j][0] > db.max || db.max == null) {
                        db.max = d[j][0];
                    }
                }              
                else {
                    d[j][1] = Date.create(d[j][1]).getTime();
                    pd[j][1] = Date.create(d[j][1]).getTime();
                    sd[j][1] = Date.create(d[j][1]).getTime();
                    if (d[j][1] < db.min || db.min == null) {
                        db.min = d[j][1];
                    }
                    if (d[j][1] > db.max || db.max == null) {
                        db.max = d[j][1];
                    }
                }              
            }
        }
    };
    
    // called with scope of an axis
    $.jqplot.DateAxisRenderer.prototype.reset = function() {
        this.min = this._min;
        this.max = this._max;
        this.tickInterval = this._tickInterval;
        this.numberTicks = this._numberTicks;
        this.daTickInterval = this._daTickInterval;
		this.useDST = this._useDST;
		this.specialFormat = this._specialFormat;
		this.specialFormatFlag = this._specialFormatFlag;
        // this._ticks = this.__ticks;
    };
    
    $.jqplot.DateAxisRenderer.prototype.createTicks = function() {
        // we're are operating on an axis here
        var ticks = this._ticks;
        var userTicks = this.ticks;
        var name = this.name;
        // databounds were set on axis initialization.
        var db = this._dataBounds;
		// determines if we need to have date/time on at least one tick for specialFormat == true
		var midnightExists = false;
        var dim, interval;
        var min, max;
        var pos1, pos2;
        var tt, i;
		// for special formatting of axis where date only shows on ticks for midnight, and
		// time shows on others with rule of two
		// all tick settings are disregarded
		if (this.specialFormat)
		{
			if (this.specialFormatFlag==null || this.specialFormatFlag != 1){
				var minDtTm = Date.create(this.min);
				var maxDtTm = Date.create(this.max);
				DAR_HELPERS.createdNow = true;
				var tickVals = DAR_HELPERS.DynamicRangeTickCalc(minDtTm.getTime(),maxDtTm.getTime());
				this.numberTicks = tickVals.length;
				userTicks = tickVals;
				midnightExists = false;
				for (var i=0;i<userTicks.length;i++)
				{
					var tDate = Date.create(userTicks[i]);
					if (tDate.getMilliseconds()==0 && tDate.getSeconds()==0 && tDate.getMinutes()==0 && tDate.getHours()==0)
						midnightExists = true;
				}
				this.min = tickVals[0];
				this.max = tickVals[tickVals.length-1];
				this.daTickInterval = [(this.max - this.min) / (this.numberTicks - 1)/1000, 'seconds'];
			}
			else if (this.specialFormatFlag == 1)
				userTicks = [new Date().getTime()];
			/* adding ticks if specialFormatFlag == 2.  This will help create table look */
			if (this.specialFormatFlag == 2)
			{
				var tempTicks = []
					, cDiffOpt = null, cDiff = null;
				for (var i=0;i<userTicks.length;i++)
				{
					var t1Time = (userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i];
					if (i==0)
						tempTicks.push(t1Time);
					else
					{
						var t2Time = (userTicks[i-1].constructor == Array)?userTicks[i-1][0]:userTicks[i-1];
						cDiff = t1Time - t2Time;
						var t1Date = Date.create(t1Time), t2Date = Date.create(t2Time);
						eval(["t1Date.set",DAR_HELPERS.tickDiff[1],"(t1Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));
						if (t1Date.getTime()==t2Date.getTime())
						{
							tempTicks.push(Math.round(t2Time+(cDiff/2)));
							tempTicks.push(t1Time);
						}
						else 
						{
							if (DAR_HELPERS.tickDiff[0]==1 && DAR_HELPERS.tickDiff[1]=="Date")
								t2Date.setHours(t2Date.getHours()+12);
							else if (DAR_HELPERS.tickDiff[0]==1 && DAR_HELPERS.tickDiff[1]=="Month")
								t2Date.setDate(t2Date.getDate()+15);
							else
								eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()+Math.round(DAR_HELPERS.tickDiff[0]/2));"].join(""));
							var t2TempTime = t2Date.getTime();
							if (t2TempTime >= t1Time)
							{
								tempTicks.push(t1Time);
							}
							else
							{
								tempTicks.push(t2TempTime);
								tempTicks.push(t1Time);
							}
						}
					}
				}
				userTicks = tempTicks;
				this.numberTicks = userTicks.length;
			}
		}
        /* if we already have ticks, use them. Ticks must be in order of increasing value. */
        if (userTicks.length) {
            /* ticks could be 1D or 2D array of [val, val, ,,,] or [[val, label], [val, label], ...] or mixed */
            for (i=0; i<userTicks.length; i++){
                var t = new this.tickRenderer(this.tickOptions);
				/* creating date first in case of value not in Milliseconds */
				t.value = Date.create((userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i]).getTime();
				if (t.value > this.max)
					continue;
				t.label = (userTicks[i].constructor == Array)?userTicks[i][1]:null;
				var dateShown = false;
				
				if (this.specialFormat)
				{
					/* show date with time on first tick if all other ticks are just time */
					if (i==0 && !midnightExists)
						dateShown = true;
					if (this.specialFormatFlag != null && this.specialFormatFlag == 2)
					{
						if (i==0 || i==(userTicks.length-1))
						{
							t.showLabel = false;
							t.showGridline = false;
							t.showMark = false;
						}
						else if ((i%2)==0)
						{
							t.showGridline = false;
							t.showLabel = true;
							t.showMark = false;
						}
						else
						{
							t.showGridline = true;
							t.showLabel = false;
							t.showMark = true;
						}
					}
					else if (userTicks.length >=2 && i==(userTicks.length-1) && userTicks[userTicks.length-1]==this.max)
					{
						
						var t1Date = Date.create((userTicks[i-1].constructor == Array)?userTicks[i-1][0]:userTicks[i-1]);
						var t2Date = Date.create((userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i]);
						eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));
						
						if (t1Date.getTime() != t2Date.getTime())
						{
							t.showLabel = false;
							t.showGridline = false;
							t.showMark = false;
						}	
					}
				}
					
				if (!this.showTicks) {
					t.showLabel = false;
					t.showMark = false;
				}
				else if (!this.showTickMarks) {
					t.showMark = false;
				}
				t.setTick(t.value, this.name, false, dateShown);
				this._ticks.push(t);
            }
            this.numberTicks = userTicks.length;
			if (!this.specialFormat) {
				this.min = this._ticks[0].value;
				this.max = this._ticks[this.numberTicks-1].value;
			}
            this.daTickInterval = [(this.max - this.min) / (this.numberTicks - 1)/1000, 'seconds'];
        }
        
        // we don't have any ticks yet, let's make some!
        else {
            if (name.match(/^x/)) {
                dim = this._plotDimensions.width;
            }
            else {
                dim = this._plotDimensions.height;
            }
            
            // if min, max and number of ticks specified, user can't specify interval.
            if (this.min != null && this.max != null && this.numberTicks != null) {
                this.tickInterval = null;
            }
            
            // if user specified a tick interval, convert to usable.
            if (this.tickInterval != null)
            {
                // if interval is a number or can be converted to one, use it.
                // Assume it is in SECONDS!!!
                if (Number(this.tickInterval)) {
                    this.daTickInterval = [Number(this.tickInterval), 'seconds'];
                }
                // else, parse out something we can build from.
                else if (typeof this.tickInterval == "string") {
                    var parts = this.tickInterval.split(' ');
                    if (parts.length == 1) {
                        this.daTickInterval = [1, parts[0]];
                    }
                    else if (parts.length == 2) {
                        this.daTickInterval = [parts[0], parts[1]];
                    }
                }
            }
        
            min = ((this.min != null) ? Date.create(this.min).getTime() : db.min);
            max = ((this.max != null) ? Date.create(this.max).getTime() : db.max);
            
            // if min and max are same, space them out a bit
            if (min == max) {
                var adj = 24*60*60*500;  // 1/2 day
                min -= adj;
                max += adj;
            }

            var range = max - min;
            var rmin, rmax;
        
            rmin = (this.min != null) ? Date.create(this.min).getTime() : min - range/2*(this.padMin - 1);
            rmax = (this.max != null) ? Date.create(this.max).getTime() : max + range/2*(this.padMax - 1);
            this.min = rmin;
            this.max = rmax;
            range = this.max - this.min;
    
            if (this.numberTicks == null){
                // if tickInterval is specified by user, we will ignore computed maximum.
                // max will be equal or greater to fit even # of ticks.
                if (this.daTickInterval != null) {
                    var nc = Date.create(this.max).diff(this.min, this.daTickInterval[1], true);
                    this.numberTicks = Math.ceil(nc/this.daTickInterval[0]) +1;
                    // this.max = Date.create(this.min).add(this.numberTicks-1, this.daTickInterval[1]).getTime();
                    this.max = Date.create(this.min).add((this.numberTicks-1) * this.daTickInterval[0], this.daTickInterval[1]).getTime();
                }
                else if (dim > 200) {
                    this.numberTicks = parseInt(3+(dim-200)/100, 10);
                }
                else {
                    this.numberTicks = 2;
                }
            }
    
            if (this.daTickInterval == null) {
                this.daTickInterval = [range / (this.numberTicks-1)/1000, 'seconds'];
            }
            for (var i=0; i<this.numberTicks; i++){
                var min = Date.create(this.min);
				if (this.useDST){
					tt = min.add(i*this.daTickInterval[0], this.daTickInterval[1]).getTime();
				}
				else{
					tt = min.addNoDST(i*this.daTickInterval[0], this.daTickInterval[1]).getTime();
				}
                var t = new this.tickRenderer(this.tickOptions);
                // var t = new $.jqplot.AxisTickRenderer(this.tickOptions);
                if (!this.showTicks) {
                    t.showLabel = false;
                    t.showMark = false;
                }
                else if (!this.showTickMarks) {
                    t.showMark = false;
                }
                t.setTick(tt, this.name);
                this._ticks.push(t);
            }
        }
        if (this._daTickInterval == null) {
            this._daTickInterval = this.daTickInterval;    
        }
    };
   
})(jQuery);

var DAR_HELPERS = function(){
	return {
		createdNow:false,
		tickDiff:null,
		hourCntPerTick:2,		//applies only to case of >= 1 day
		DynamicRangeTickCalc:function(iMin,iMax){
			var unitSize = {
				"second": 1000,
				"minute": 60 * 1000,
				"hour": 60 * 60 * 1000,
				"day": 24 * 60 * 60 * 1000,
				"month": 30 * 24 * 60 * 60 * 1000,
				"year": 365.2425 * 24 * 60 * 60 * 1000
			};
			var minDtTm = Date.create(iMin);
			var maxDtTm = Date.create(iMax);
			var dtTmDiff = iMax-iMin;
			var tickVals = [], curDtTm = new Date(), noNowTick = false;
			var hourCnt = DAR_HELPERS.hourCntPerTick;
			curDtTm.setMilliseconds(0); curDtTm.setSeconds(0);
			if (dtTmDiff<=(2*unitSize["second"])) // <= 2 seconds
			{
				DAR_HELPERS.tickDiff = [250,"Milliseconds"];
				if ((maxDtTm.getMilliseconds()%250) != 0)
					maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()+(250-(maxDtTm.getMilliseconds()%250)));
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()-250);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["minute"])+(15*unitSize["second"]))) // <= 2 minutes 15 seconds		
			{
				DAR_HELPERS.tickDiff = [15,"Seconds"];
				if ((maxDtTm.getSeconds()%15) != 0 ||((maxDtTm.getSeconds()%15) == 0 && maxDtTm.getMilliseconds()>0))
					maxDtTm.setSeconds(maxDtTm.getSeconds()+(15-(maxDtTm.getSeconds()%15)));
				maxDtTm.setMilliseconds(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setSeconds(maxDtTm.getSeconds()-15);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["hour"])+(15*unitSize["minute"]))) // <= 2 hours 15 minutes
			{
				DAR_HELPERS.tickDiff = [15,"Minutes"];
				if ((maxDtTm.getMinutes()%15) != 0 || ((maxDtTm.getMinutes()%15) == 0 && (maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setMinutes(maxDtTm.getMinutes()+(15-(maxDtTm.getMinutes()%15)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMinutes(maxDtTm.getMinutes()-15);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=(unitSize["day"]+(hourCnt*unitSize["hour"]))) // <= 1 day 2 hours
			{
				DAR_HELPERS.tickDiff = [hourCnt,"Hours"];
				if ((maxDtTm.getHours()%hourCnt) != 0 || ((maxDtTm.getHours()%hourCnt) == 0 && (maxDtTm.getMinutes()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setHours(maxDtTm.getHours()+(hourCnt-(maxDtTm.getHours()%hourCnt)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setHours(maxDtTm.getHours()-hourCnt);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["day"])+(4*unitSize["hour"]))) // <= 2 days 4 hours
			{
				DAR_HELPERS.tickDiff = [4,"Hours"];
				if ((maxDtTm.getHours()%4) != 0 || ((maxDtTm.getHours()%4) == 0 && (maxDtTm.getMinutes()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setHours(maxDtTm.getHours()+(4-(maxDtTm.getHours()%4)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setHours(maxDtTm.getHours()-4);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=(15*unitSize["day"])) // <= 2 weeks 1 day
			{
				DAR_HELPERS.tickDiff = [1,"Date"];
				if (maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)
					maxDtTm.setDate(maxDtTm.getDate()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setDate(maxDtTm.getDate()-1);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["month"])+(7*unitSize["day"]))) // <= 2 months 1 week
			{
				DAR_HELPERS.tickDiff = [7,"Date"];
				if (maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)
					maxDtTm.setDate(maxDtTm.getDate()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setDate(maxDtTm.getDate()-7);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else // > 2 month
			{
				DAR_HELPERS.tickDiff = [1,"Month"];
				if (maxDtTm.getDate()>1 || (maxDtTm.getDate()==1 && 
						(maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)))
					maxDtTm.setMonth(maxDtTm.getMonth()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				maxDtTm.setDate(1);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMonth(maxDtTm.getMonth()-1);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			tickVals.reverse();
//CERTRN - Need to allow last tick to show even if greater than current date/time
//CERTRN old			if (tickVals[tickVals.length-1] > new Date().getTime())
//CERTRN old				tickVals[tickVals.length-1] = new Date().getTime();
			return tickVals;
		}
	}
}();
/**
 /**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */
(function($) {
    $.jqplot.eventListenerHooks.push(['jqplotMouseMove', handleMove]);
    
    /**
     * Class: $.jqplot.Highlighter
     * Plugin which will highlight data points when they are moused over.
     * 
     * To use this plugin, include the js
     * file in your source:
     * 
     * > <script type="text/javascript" src="plugins/jqplot.highlighter.js"></script>
     * 
     * A tooltip providing information about the data point is enabled by default.
     * To disable the tooltip, set "showTooltip" to false.
     * 
     * You can control what data is displayed in the tooltip with various
     * options.  The "tooltipAxes" option controls wether the x, y or both
     * data values are displayed.
     * 
     * Some chart types (e.g. hi-low-close) have more than one y value per
     * data point. To display the additional values in the tooltip, set the
     * "yvalues" option to the desired number of y values present (3 for a hlc chart).
     * 
     * By default, data values will be formatted with the same formatting
     * specifiers as used to format the axis ticks.  A custom format code
     * can be supplied with the tooltipFormatString option.  This will apply 
     * to all values in the tooltip.  
     * 
     * For more complete control, the "formatString" option can be set.  This
     * Allows conplete control over tooltip formatting.  Values are passed to
     * the format string in an order determined by the "tooltipAxes" and "yvalues"
     * options.  So, if you have a hi-low-close chart and you just want to display 
     * the hi-low-close values in the tooltip, you could set a formatString like:
     * 
     * > highlighter: {
     * >     tooltipAxes: 'y',
     * >     yvalues: 3,
     * >     formatString:'<table class="jqplot-highlighter">
     * >         <tr><td>hi:</td><td>%s</td></tr>
     * >         <tr><td>low:</td><td>%s</td></tr>
     * >         <tr><td>close:</td><td>%s</td></tr></table>'
     * > }
     * 
     */
    $.jqplot.Highlighter = function(options) {
        // Group: Properties
        //
        //prop: show
        // true to show the highlight.
        this.show = $.jqplot.config.enablePlugins;
        // prop: markerRenderer
        // Renderer used to draw the marker of the highlighted point.
        // Renderer will assimilate attributes from the data point being highlighted,
        // so no attributes need set on the renderer directly.
        // Default is to turn off shadow drawing on the highlighted point.
        this.markerRenderer = new $.jqplot.MarkerRenderer({shadow:false});
        // prop: showMarker
        // true to show the marker
        this.showMarker  = true;
        // prop: lineWidthAdjust
        // Pixels to add to the lineWidth of the highlight.
        this.lineWidthAdjust = 2.5;
        // prop: sizeAdjust
        // Pixels to add to the overall size of the highlight.
        this.sizeAdjust = 5;
        // prop: showTooltip
        // Show a tooltip with data point values.
        this.showTooltip = true;
        // prop: tooltipLocation
        // Where to position tooltip, 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.tooltipLocation = 'nw';
        // prop: tooltipFade
        // true = fade in/out tooltip, flase = show/hide tooltip
        this.fadeTooltip = true;
        // prop: tooltipFadeSpeed
        // 'slow', 'def', 'fast', or number of milliseconds.
        this.tooltipFadeSpeed = "fast";
        // prop: tooltipOffset
        // Pixel offset of tooltip from the highlight.
        this.tooltipOffset = 2;
        // prop: tooltipAxes
        // Which axes to display in tooltip, 'x', 'y' or 'both', 'xy' or 'yx'
        // 'both' and 'xy' are equivalent, 'yx' reverses order of labels.
        this.tooltipAxes = 'both';
        // prop; tooltipSeparator
        // String to use to separate x and y axes in tooltip.
        this.tooltipSeparator = ', ';
        // prop: useAxesFormatters
        // Use the x and y axes formatters to format the text in the tooltip.
        this.useAxesFormatters = true;
        // prop: tooltipFormatString
        // sprintf format string for the tooltip.
        // Uses Ash Searle's javascript sprintf implementation
        // found here: http://hexmen.com/blog/2007/03/printf-sprintf/
        // See http://perldoc.perl.org/functions/sprintf.html for reference.
        // Additional "p" and "P" format specifiers added by Chris Leonello.
        this.tooltipFormatString = '%.5P';
        // prop: formatString
        // alternative to tooltipFormatString
        // will format the whole tooltip text, populating with x, y values as
        // indicated by tooltipAxes option.  So, you could have a tooltip like:
        // 'Date: %s, number of cats: %d' to format the whole tooltip at one go.
        // If useAxesFormatters is true, values will be formatted according to
        // Axes formatters and you can populate your tooltip string with 
        // %s placeholders.
        this.formatString = null;
        // prop: yvalues
        // Number of y values to expect in the data point array.
        // Typically this is 1.  Certain plots, like OHLC, will
        // have more y values in each data point array.
        this.yvalues = 1;
        this._tooltipElem;
        this.isHighlighting = false;

        $.extend(true, this, options);
    };
    
    // axis.renderer.tickrenderer.formatter
    
    // called with scope of plot
    $.jqplot.Highlighter.init = function (target, data, opts){
        var options = opts || {};
        // add a highlighter attribute to the plot
        this.plugins.highlighter = new $.jqplot.Highlighter(options.highlighter);
    };
    
    // called within scope of series
    $.jqplot.Highlighter.parseOptions = function (defaults, options) {
        this.showHighlight = true;
    };
    
    // called within context of plot
    // create a canvas which we can draw on.
    // insert it before the eventCanvas, so eventCanvas will still capture events.
    $.jqplot.Highlighter.postPlotDraw = function() {
        this.plugins.highlighter.highlightCanvas = new $.jqplot.GenericCanvas();
        
        this.eventCanvas._elem.before(this.plugins.highlighter.highlightCanvas.createElement(this._gridPadding, 'jqplot-highlight-canvas', this._plotDimensions));
        var hctx = this.plugins.highlighter.highlightCanvas.setContext();
        
        var p = this.plugins.highlighter;
        p._tooltipElem = $('<div class="jqplot-highlighter-tooltip" style="position:absolute;display:none"></div>');
        this.target.append(p._tooltipElem);
    };
    
    $.jqplot.preInitHooks.push($.jqplot.Highlighter.init);
    $.jqplot.preParseSeriesOptionsHooks.push($.jqplot.Highlighter.parseOptions);
    $.jqplot.postDrawHooks.push($.jqplot.Highlighter.postPlotDraw);
    
    function draw(plot, neighbor) {
        var hl = plot.plugins.highlighter;
        var s = plot.series[neighbor.seriesIndex];
        var smr = s.markerRenderer;
        var mr = hl.markerRenderer;
        mr.style = smr.style;
        mr.lineWidth = smr.lineWidth + hl.lineWidthAdjust;
        mr.size = smr.size + hl.sizeAdjust;
        var rgba = $.jqplot.getColorComponents(smr.color);
        var newrgb = [rgba[0], rgba[1], rgba[2]];
        var alpha = (rgba[3] >= 0.6) ? rgba[3]*0.6 : rgba[3]*(2-rgba[3]);
        mr.color = 'rgba('+newrgb[0]+','+newrgb[1]+','+newrgb[2]+','+alpha+')';
        mr.init();
        mr.draw(s.gridData[neighbor.pointIndex][0], s.gridData[neighbor.pointIndex][1], hl.highlightCanvas._ctx);
    }
    
    function showTooltip(plot, series, neighbor) {
        // neighbor looks like: {seriesIndex: i, pointIndex:j, gridData:p, data:s.data[j]}
        // gridData should be x,y pixel coords on the grid.
        // add the plot._gridPadding to that to get x,y in the target.
        var hl = plot.plugins.highlighter;
        var elem = hl._tooltipElem;
        if (hl.useAxesFormatters) {
            var xf = series._xaxis._ticks[0].formatter;
            var yf = series._yaxis._ticks[0].formatter;
            var xfstr = series._xaxis._ticks[0].formatString;
            var yfstr = series._yaxis._ticks[0].formatString;
            var str;
            var xstr = xf(xfstr, neighbor.data[0]);
            var ystrs = [];
            for (var i=1; i<hl.yvalues+1; i++) {
                ystrs.push(yf(yfstr, neighbor.data[i]));
            }
            if (hl.formatString) {
                switch (hl.tooltipAxes) {
                    case 'both':
                    case 'xy':
                        ystrs.unshift(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    case 'yx':
                        ystrs.push(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    case 'x':
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, [hl.formatString, xstr]);
                        break;
                    case 'y':
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    default: // same as xy
                        ystrs.unshift(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                } 
            }
            else {
                switch (hl.tooltipAxes) {
                    case 'both':
                    case 'xy':
                        str = xstr;
                        for (var i=0; i<ystrs.length; i++) {
                            str += hl.tooltipSeparator + ystrs[i];
                        }
                        break;
                    case 'yx':
                        str = '';
                        for (var i=0; i<ystrs.length; i++) {
                            str += ystrs[i] + hl.tooltipSeparator;
                        }
                        str += xstr;
                        break;
                    case 'x':
                        str = xstr;
                        break;
                    case 'y':
                        str = '';
                        for (var i=0; i<ystrs.length; i++) {
                            str += ystrs[i] + hl.tooltipSeparator;
                        }
                        break;
                    default: // same as 'xy'
                        str = xstr;
                        for (var i=0; i<ystrs.length; i++) {
                            str += hl.tooltipSeparator + ystrs[i];
                        }
                        break;
                    
                }                
            }
        }
        else {
            var str;
            if (hl.tooltipAxes == 'both' || hl.tooltipAxes == 'xy') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]) + hl.tooltipSeparator + $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]);
            }
            else if (hl.tooltipAxes == 'yx') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]) + hl.tooltipSeparator + $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]);
            }
            else if (hl.tooltipAxes == 'x') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]);
            }
            else if (hl.tooltipAxes == 'y') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]);
            } 
        }
		str = str.replace(/%l/,series.label);
		if (neighbor.data[2]!=undefined && neighbor.data[2])
			str = str.replace(/%1/,neighbor.data[2]);
		else
			str = str.replace(/%1/,"");
		if (neighbor.data[3]!=undefined && neighbor.data[3])
			str = str.replace(/%2/,neighbor.data[3]);
		else
			str = str.replace(/%2/,"");
		if (neighbor.data[4]!=undefined && neighbor.data[4])
			str = str.replace(/%3/,neighbor.data[4]);
		else
			str = str.replace(/%3/,"");
		if (neighbor.data[5]!=undefined && neighbor.data[5])
			str = str.replace(/%4/,neighbor.data[5]);
		else
			str = str.replace(/%4/,"");
		if (neighbor.data[8]!=undefined&&neighbor.data[8])
			str=str.replace(/%5/,neighbor.data[8]);
		else 
			str=str.replace(/%5/,"");
		if (neighbor.data[7]!=undefined&&neighbor.data[7])
			str=str.replace(/%6/,neighbor.data[7]);
		else 
			str=str.replace(/%6/,"");
		elem.html(str);
		var gridpos = {x:neighbor.gridData[0], y:neighbor.gridData[1]};
        var ms = 0;
        var fact = 0.707;
        if (series.markerRenderer.show == true) { 
            ms = (series.markerRenderer.size + hl.sizeAdjust)/2;
        }
        switch (hl.tooltipLocation) {
            case 'nw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
            case 'n':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - ms;
                break;
            case 'ne':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
            case 'e':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + ms;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            case 'se':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + fact * ms;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + fact * ms;
                break;
            case 's':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + ms;
                break;
            case 'sw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + fact * ms;
                break;
            case 'w':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - ms;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            default: // same as 'nw'
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
        }
        elem.css('left', x);
        elem.css('top', y);
        if (hl.fadeTooltip) {
            elem.fadeIn(hl.tooltipFadeSpeed);
        }
        else {
            elem.show();
        }
        
    }
    
    function handleMove(ev, gridpos, datapos, neighbor, plot) {
        var hl = plot.plugins.highlighter;
        if (hl.show) {
            if (neighbor == null && hl.isHighlighting && HIGHLIGHTER_HELPERS.isHighlighting) {
				var ctx = hl.highlightCanvas._ctx;
				ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                if (hl.fadeTooltip) {
                    hl._tooltipElem.fadeOut(hl.tooltipFadeSpeed);
                }
                else {
                    hl._tooltipElem.hide();
                }
				hl.isHighlighting = false;
				HIGHLIGHTER_HELPERS.isHighlighting = false;
            }
            if (neighbor != null && plot.series[neighbor.seriesIndex].showHighlight && !hl.isHighlighting && !HIGHLIGHTER_HELPERS.isHighlighting) {
                hl.isHighlighting = true;
				HIGHLIGHTER_HELPERS.isHighlighting = true;
                if (hl.showMarker) {
                    draw(plot, neighbor);
                }
                if (hl.showTooltip) {
                    showTooltip(plot, plot.series[neighbor.seriesIndex], neighbor);
                }
            }
        }
    }
})(jQuery);

var HIGHLIGHTER_HELPERS = function(){
	return {
		isHighlighting: false
	};
}();
/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php.
 *
 * Thanks for using jqPlot!
 * 
 */
 
(function($) {  
    /**
     * Class: $.jqplot.DateAxisRenderer
     * A plugin for a jqPlot to render an axis as a series of date values.
     * This renderer has no options beyond those supplied by the <Axis> class.
     * It supplies it's own tick formatter, so the tickOptions.formatter option
     * should not be overridden.
     * 
     * Thanks to Ken Synder for his enhanced Date instance methods which are
     * included with this code <http://kendsnyder.com/sandbox/date/>.
     * 
     * To use this renderer, include the plugin in your source
     * > <script type="text/javascript" language="javascript" src="plugins/jqplot.dateAxisRenderer.js"></script>
     * 
     * and supply the appropriate options to your plot
     * 
     * > {axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}}}
     * 
     * Dates can be passed into the axis in almost any recognizable value and 
     * will be parsed.  They will be rendered on the axis in the format
     * specified by tickOptions.formatString.  e.g. tickOptions.formatString = '%Y-%m-%d'.
     * 
     * Accecptable format codes 
     * are:
     * 
     * > Code    Result                  Description
     * >             == Years ==
     * > %Y      2008                Four-digit year
     * > %y      08                  Two-digit year
     * >             == Months ==
     * > %m      09                  Two-digit month
     * > %#m     9                   One or two-digit month
     * > %B      September           Full month name
     * > %b      Sep                 Abbreviated month name
     * >             == Days ==
     * > %d      05                  Two-digit day of month
     * > %#d     5                   One or two-digit day of month
     * > %e      5                   One or two-digit day of month
     * > %A      Sunday              Full name of the day of the week
     * > %a      Sun                 Abbreviated name of the day of the week
     * > %w      0                   Number of the day of the week (0 = Sunday, 6 = Saturday)
     * > %o      th                  The ordinal suffix string following the day of the month
     * >             == Hours ==
     * > %H      23                  Hours in 24-hour format (two digits)
     * > %#H     3                   Hours in 24-hour integer format (one or two digits)
     * > %I      11                  Hours in 12-hour format (two digits)
     * > %#I     3                   Hours in 12-hour integer format (one or two digits)
     * > %p      PM                  AM or PM
     * >             == Minutes ==
     * > %M      09                  Minutes (two digits)
     * > %#M     9                   Minutes (one or two digits)
     * >             == Seconds ==
     * > %S      02                  Seconds (two digits)
     * > %#S     2                   Seconds (one or two digits)
     * > %s      1206567625723       Unix timestamp (Seconds past 1970-01-01 00:00:00)
     * >             == Milliseconds ==
     * > %N      008                 Milliseconds (three digits)
     * > %#N     8                   Milliseconds (one to three digits)
     * >             == Timezone ==
     * > %O      360                 difference in minutes between local time and GMT
     * > %Z      Mountain Standard Time  Name of timezone as reported by browser
     * > %G      -06:00              Hours and minutes between GMT
     * >             == Shortcuts ==
     * > %F      2008-03-26          %Y-%m-%d
     * > %T      05:06:30            %H:%M:%S
     * > %X      05:06:30            %H:%M:%S
     * > %x      03/26/08            %m/%d/%y
     * > %D      03/26/08            %m/%d/%y
     * > %#c     Wed Mar 26 15:31:00 2008  %a %b %e %H:%M:%S %Y
     * > %v      3-Sep-2008          %e-%b-%Y
     * > %R      15:31               %H:%M
     * > %r      3:31:00 PM          %I:%M:%S %p
     * >             == Characters ==
     * > %n      \n                  Newline
     * > %t      \t                  Tab
     * > %%      %                   Percent Symbol 
     */
    $.jqplot.DateAxisRenderer = function() {
        $.jqplot.LinearAxisRenderer.call(this);
    };
    
    $.jqplot.DateAxisRenderer.prototype = new $.jqplot.LinearAxisRenderer();
    $.jqplot.DateAxisRenderer.prototype.constructor = $.jqplot.DateAxisRenderer;
    
    $.jqplot.DateTickFormatter = function(format, val) {
        if (!format) {
            format = '%Y/%m/%d';
        }
        return Date.create(val).strftime(format);
    };
	
	$.jqplot.DateTickFormatterSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date;
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span><span class='jqplot-elem-hideOnHover nowTime'>%H:%M</span>";
		return iDate.strftime(nFormat);
	};
	
	$.jqplot.DateTickFormatterXSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
            nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M<br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-hideOnHover'>%#m/%#d/%y</span>";
        }
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M";
		}
        return iDate.strftime(nFormat);
    };
	
	$.jqplot.DateTickFormatterX2Special = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var df = MP_Util.GetDateFormatter();
		var iDate2 = df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR);
		var iDate4 = df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>"+iDate4+"&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
			nFormat = "<span class='jqplot-elem-showOnHover'>"+iDate4+"</span><span class='jqplot-elem-hideOnHover'>"+iDate2+"</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M";
		}
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>"+iDate4+"</span>&nbsp;<br class='jqplot-elem-hideOnHover'/>%H:%M";
		}
		return iDate.strftime(nFormat);
    };
	
	$.jqplot.DateTickFormatterYSpecial = function(format, val, showDate) {
		var iDate = Date.create(Math.abs(val));
		var curDtTm = new Date();
		curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);
		var nFormat = format;
		if (DAR_HELPERS.createdNow && iDate.getTime() == curDtTm.getTime())
		{
			nFormat = "<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>";
		}
		//if midnight, show time over date
		else if (showDate || (iDate.getMilliseconds()==0 && iDate.getSeconds()==0 && iDate.getMinutes() == 0 && iDate.getHours() == 0)) {
            nFormat = "%#m/%#d/<span class='jqplot-elem-showOnHover'>%Y</span><span class='jqplot-elem-hideOnHover'>%y</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M";
        }
		//show just time
		else {
			nFormat = "<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M";
		}
        return iDate.strftime(nFormat);
    };
    
    $.jqplot.DateAxisRenderer.prototype.init = function(options){
        // prop: tickRenderer
        // A class of a rendering engine for creating the ticks labels displayed on the plot, 
        // See <$.jqplot.AxisTickRenderer>.
        // this.tickRenderer = $.jqplot.AxisTickRenderer;
        // this.labelRenderer = $.jqplot.AxisLabelRenderer;
        this.daTickInterval = null;
        this._daTickInterval = null;
        $.extend(true, this, options);
		
		if (this.specialFormat && this.specialFormatFlag!=null && this.specialFormatFlag == 1)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterSpecial;
		}
		else if (this.specialFormat && this.name.match("xaxis")!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterXSpecial;
		}
		else if (this.specialFormat && this.name.match(/^x/)!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterX2Special;
		}
		else if (this.specialFormat && this.name.match(/^y/)!=null)
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatterYSpecial;
		}
		else
		{
			this.tickOptions.formatter = $.jqplot.DateTickFormatter;
		}
        var db = this._dataBounds;
        // Go through all the series attached to this axis and find
        // the min/max bounds for this axis.
        for (var i=0; i<this._series.length; i++) {
            var s = this._series[i];
            var d = s.data;
            var pd = s._plotData;
            var sd = s._stackData;
            
            for (var j=0; j<d.length; j++) { 
                if (this.name.match(/^x/)) {
                    d[j][0] = Date.create(d[j][0]).getTime();
                    pd[j][0] = Date.create(d[j][0]).getTime();
                    sd[j][0] = Date.create(d[j][0]).getTime();
                    if (d[j][0] < db.min || db.min == null) {
                        db.min = d[j][0];
                    }
                    if (d[j][0] > db.max || db.max == null) {
                        db.max = d[j][0];
                    }
                }              
                else {
                    d[j][1] = Date.create(d[j][1]).getTime();
                    pd[j][1] = Date.create(d[j][1]).getTime();
                    sd[j][1] = Date.create(d[j][1]).getTime();
                    if (d[j][1] < db.min || db.min == null) {
                        db.min = d[j][1];
                    }
                    if (d[j][1] > db.max || db.max == null) {
                        db.max = d[j][1];
                    }
                }              
            }
        }
    };
    
    // called with scope of an axis
    $.jqplot.DateAxisRenderer.prototype.reset = function() {
        this.min = this._min;
        this.max = this._max;
        this.tickInterval = this._tickInterval;
        this.numberTicks = this._numberTicks;
        this.daTickInterval = this._daTickInterval;
		this.useDST = this._useDST;
		this.specialFormat = this._specialFormat;
		this.specialFormatFlag = this._specialFormatFlag;
        // this._ticks = this.__ticks;
    };
    
    $.jqplot.DateAxisRenderer.prototype.createTicks = function() {
        // we're are operating on an axis here
        var ticks = this._ticks;
        var userTicks = this.ticks;
        var name = this.name;
        // databounds were set on axis initialization.
        var db = this._dataBounds;
		// determines if we need to have date/time on at least one tick for specialFormat == true
		var midnightExists = false;
        var dim, interval;
        var min, max;
        var pos1, pos2;
        var tt, i;
		// for special formatting of axis where date only shows on ticks for midnight, and
		// time shows on others with rule of two
		// all tick settings are disregarded
		if (this.specialFormat)
		{
			if (this.specialFormatFlag==null || this.specialFormatFlag != 1){
				var minDtTm = Date.create(this.min);
				var maxDtTm = Date.create(this.max);
				DAR_HELPERS.createdNow = true;
				var tickVals = DAR_HELPERS.DynamicRangeTickCalc(minDtTm.getTime(),maxDtTm.getTime());
				this.numberTicks = tickVals.length;
				userTicks = tickVals;
				midnightExists = false;
				for (var i=0;i<userTicks.length;i++)
				{
					var tDate = Date.create(userTicks[i]);
					if (tDate.getMilliseconds()==0 && tDate.getSeconds()==0 && tDate.getMinutes()==0 && tDate.getHours()==0)
						midnightExists = true;
				}
				this.min = tickVals[0];
				this.max = tickVals[tickVals.length-1];
				this.daTickInterval = [(this.max - this.min) / (this.numberTicks - 1)/1000, 'seconds'];
			}
			else if (this.specialFormatFlag == 1)
				userTicks = [new Date().getTime()];
			/* adding ticks if specialFormatFlag == 2.  This will help create table look */
			if (this.specialFormatFlag == 2)
			{
				var tempTicks = []
					, cDiffOpt = null, cDiff = null;
				for (var i=0;i<userTicks.length;i++)
				{
					var t1Time = (userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i];
					if (i==0)
						tempTicks.push(t1Time);
					else
					{
						var t2Time = (userTicks[i-1].constructor == Array)?userTicks[i-1][0]:userTicks[i-1];
						cDiff = t1Time - t2Time;
						var t1Date = Date.create(t1Time), t2Date = Date.create(t2Time);
						eval(["t1Date.set",DAR_HELPERS.tickDiff[1],"(t1Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));
						if (t1Date.getTime()==t2Date.getTime())
						{
							tempTicks.push(Math.round(t2Time+(cDiff/2)));
							tempTicks.push(t1Time);
						}
						else 
						{
							if (DAR_HELPERS.tickDiff[0]==1 && DAR_HELPERS.tickDiff[1]=="Date")
								t2Date.setHours(t2Date.getHours()+12);
							else if (DAR_HELPERS.tickDiff[0]==1 && DAR_HELPERS.tickDiff[1]=="Month")
								t2Date.setDate(t2Date.getDate()+15);
							else
								eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()+Math.round(DAR_HELPERS.tickDiff[0]/2));"].join(""));
							var t2TempTime = t2Date.getTime();
							if (t2TempTime >= t1Time)
							{
								tempTicks.push(t1Time);
							}
							else
							{
								tempTicks.push(t2TempTime);
								tempTicks.push(t1Time);
							}
						}
					}
				}
				userTicks = tempTicks;
				this.numberTicks = userTicks.length;
			}
		}
        /* if we already have ticks, use them. Ticks must be in order of increasing value. */
        if (userTicks.length) {
            /* ticks could be 1D or 2D array of [val, val, ,,,] or [[val, label], [val, label], ...] or mixed */
            for (i=0; i<userTicks.length; i++){
                var t = new this.tickRenderer(this.tickOptions);
				/* creating date first in case of value not in Milliseconds */
				t.value = Date.create((userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i]).getTime();
				if (t.value > this.max)
					continue;
				t.label = (userTicks[i].constructor == Array)?userTicks[i][1]:null;
				var dateShown = false;
				
				if (this.specialFormat)
				{
					/* show date with time on first tick if all other ticks are just time */
					if (i==0 && !midnightExists)
						dateShown = true;
					if (this.specialFormatFlag != null && this.specialFormatFlag == 2)
					{
						if (i==0 || i==(userTicks.length-1))
						{
							t.showLabel = false;
							t.showGridline = false;
							t.showMark = false;
						}
						else if ((i%2)==0)
						{
							t.showGridline = false;
							t.showLabel = true;
							t.showMark = false;
						}
						else
						{
							t.showGridline = true;
							t.showLabel = false;
							t.showMark = true;
						}
					}
					else if (userTicks.length >=2 && i==(userTicks.length-1) && userTicks[userTicks.length-1]==this.max)
					{
						
						var t1Date = Date.create((userTicks[i-1].constructor == Array)?userTicks[i-1][0]:userTicks[i-1]);
						var t2Date = Date.create((userTicks[i].constructor == Array)?userTicks[i][0]:userTicks[i]);
						eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));
						
						if (t1Date.getTime() != t2Date.getTime())
						{
							t.showLabel = false;
							t.showGridline = false;
							t.showMark = false;
						}	
					}
				}
					
				if (!this.showTicks) {
					t.showLabel = false;
					t.showMark = false;
				}
				else if (!this.showTickMarks) {
					t.showMark = false;
				}
				t.setTick(t.value, this.name, false, dateShown);
				this._ticks.push(t);
            }
            this.numberTicks = userTicks.length;
			if (!this.specialFormat) {
				this.min = this._ticks[0].value;
				this.max = this._ticks[this.numberTicks-1].value;
			}
            this.daTickInterval = [(this.max - this.min) / (this.numberTicks - 1)/1000, 'seconds'];
        }
        
        // we don't have any ticks yet, let's make some!
        else {
            if (name.match(/^x/)) {
                dim = this._plotDimensions.width;
            }
            else {
                dim = this._plotDimensions.height;
            }
            
            // if min, max and number of ticks specified, user can't specify interval.
            if (this.min != null && this.max != null && this.numberTicks != null) {
                this.tickInterval = null;
            }
            
            // if user specified a tick interval, convert to usable.
            if (this.tickInterval != null)
            {
                // if interval is a number or can be converted to one, use it.
                // Assume it is in SECONDS!!!
                if (Number(this.tickInterval)) {
                    this.daTickInterval = [Number(this.tickInterval), 'seconds'];
                }
                // else, parse out something we can build from.
                else if (typeof this.tickInterval == "string") {
                    var parts = this.tickInterval.split(' ');
                    if (parts.length == 1) {
                        this.daTickInterval = [1, parts[0]];
                    }
                    else if (parts.length == 2) {
                        this.daTickInterval = [parts[0], parts[1]];
                    }
                }
            }
        
            min = ((this.min != null) ? Date.create(this.min).getTime() : db.min);
            max = ((this.max != null) ? Date.create(this.max).getTime() : db.max);
            
            // if min and max are same, space them out a bit
            if (min == max) {
                var adj = 24*60*60*500;  // 1/2 day
                min -= adj;
                max += adj;
            }

            var range = max - min;
            var rmin, rmax;
        
            rmin = (this.min != null) ? Date.create(this.min).getTime() : min - range/2*(this.padMin - 1);
            rmax = (this.max != null) ? Date.create(this.max).getTime() : max + range/2*(this.padMax - 1);
            this.min = rmin;
            this.max = rmax;
            range = this.max - this.min;
    
            if (this.numberTicks == null){
                // if tickInterval is specified by user, we will ignore computed maximum.
                // max will be equal or greater to fit even # of ticks.
                if (this.daTickInterval != null) {
                    var nc = Date.create(this.max).diff(this.min, this.daTickInterval[1], true);
                    this.numberTicks = Math.ceil(nc/this.daTickInterval[0]) +1;
                    // this.max = Date.create(this.min).add(this.numberTicks-1, this.daTickInterval[1]).getTime();
                    this.max = Date.create(this.min).add((this.numberTicks-1) * this.daTickInterval[0], this.daTickInterval[1]).getTime();
                }
                else if (dim > 200) {
                    this.numberTicks = parseInt(3+(dim-200)/100, 10);
                }
                else {
                    this.numberTicks = 2;
                }
            }
    
            if (this.daTickInterval == null) {
                this.daTickInterval = [range / (this.numberTicks-1)/1000, 'seconds'];
            }
            for (var i=0; i<this.numberTicks; i++){
                var min = Date.create(this.min);
				if (this.useDST){
					tt = min.add(i*this.daTickInterval[0], this.daTickInterval[1]).getTime();
				}
				else{
					tt = min.addNoDST(i*this.daTickInterval[0], this.daTickInterval[1]).getTime();
				}
                var t = new this.tickRenderer(this.tickOptions);
                // var t = new $.jqplot.AxisTickRenderer(this.tickOptions);
                if (!this.showTicks) {
                    t.showLabel = false;
                    t.showMark = false;
                }
                else if (!this.showTickMarks) {
                    t.showMark = false;
                }
                t.setTick(tt, this.name);
                this._ticks.push(t);
            }
        }
        if (this._daTickInterval == null) {
            this._daTickInterval = this.daTickInterval;    
        }
    };
   
})(jQuery);

var DAR_HELPERS = function(){
	return {
		createdNow:false,
		tickDiff:null,
		hourCntPerTick:2,		//applies only to case of >= 1 day
		DynamicRangeTickCalc:function(iMin,iMax){
			var unitSize = {
				"second": 1000,
				"minute": 60 * 1000,
				"hour": 60 * 60 * 1000,
				"day": 24 * 60 * 60 * 1000,
				"month": 30 * 24 * 60 * 60 * 1000,
				"year": 365.2425 * 24 * 60 * 60 * 1000
			};
			var minDtTm = Date.create(iMin);
			var maxDtTm = Date.create(iMax);
			var dtTmDiff = iMax-iMin;
			var tickVals = [], curDtTm = new Date(), noNowTick = false;
			var hourCnt = DAR_HELPERS.hourCntPerTick;
			curDtTm.setMilliseconds(0); curDtTm.setSeconds(0);
			if (dtTmDiff<=(2*unitSize["second"])) // <= 2 seconds
			{
				DAR_HELPERS.tickDiff = [250,"Milliseconds"];
				if ((maxDtTm.getMilliseconds()%250) != 0)
					maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()+(250-(maxDtTm.getMilliseconds()%250)));
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()-250);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["minute"])+(15*unitSize["second"]))) // <= 2 minutes 15 seconds		
			{
				DAR_HELPERS.tickDiff = [15,"Seconds"];
				if ((maxDtTm.getSeconds()%15) != 0 ||((maxDtTm.getSeconds()%15) == 0 && maxDtTm.getMilliseconds()>0))
					maxDtTm.setSeconds(maxDtTm.getSeconds()+(15-(maxDtTm.getSeconds()%15)));
				maxDtTm.setMilliseconds(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setSeconds(maxDtTm.getSeconds()-15);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["hour"])+(15*unitSize["minute"]))) // <= 2 hours 15 minutes
			{
				DAR_HELPERS.tickDiff = [15,"Minutes"];
				if ((maxDtTm.getMinutes()%15) != 0 || ((maxDtTm.getMinutes()%15) == 0 && (maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setMinutes(maxDtTm.getMinutes()+(15-(maxDtTm.getMinutes()%15)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMinutes(maxDtTm.getMinutes()-15);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=(unitSize["day"]+(hourCnt*unitSize["hour"]))) // <= 1 day 2 hours
			{
				DAR_HELPERS.tickDiff = [hourCnt,"Hours"];
				if ((maxDtTm.getHours()%hourCnt) != 0 || ((maxDtTm.getHours()%hourCnt) == 0 && (maxDtTm.getMinutes()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setHours(maxDtTm.getHours()+(hourCnt-(maxDtTm.getHours()%hourCnt)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setHours(maxDtTm.getHours()-hourCnt);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["day"])+(4*unitSize["hour"]))) // <= 2 days 4 hours
			{
				DAR_HELPERS.tickDiff = [4,"Hours"];
				if ((maxDtTm.getHours()%4) != 0 || ((maxDtTm.getHours()%4) == 0 && (maxDtTm.getMinutes()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMilliseconds()>0)))
					maxDtTm.setHours(maxDtTm.getHours()+(4-(maxDtTm.getHours()%4)));
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setHours(maxDtTm.getHours()-4);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=(15*unitSize["day"])) // <= 2 weeks 1 day
			{
				DAR_HELPERS.tickDiff = [1,"Date"];
				if (maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)
					maxDtTm.setDate(maxDtTm.getDate()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setDate(maxDtTm.getDate()-1);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else if (dtTmDiff<=((2*unitSize["month"])+(7*unitSize["day"]))) // <= 2 months 1 week
			{
				DAR_HELPERS.tickDiff = [7,"Date"];
				if (maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)
					maxDtTm.setDate(maxDtTm.getDate()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setDate(maxDtTm.getDate()-7);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			else // > 2 month
			{
				DAR_HELPERS.tickDiff = [1,"Month"];
				if (maxDtTm.getDate()>1 || (maxDtTm.getDate()==1 && 
						(maxDtTm.getMilliseconds()>0 || maxDtTm.getSeconds()>0 || maxDtTm.getMinutes()>0 || maxDtTm.getHours()>0)))
					maxDtTm.setMonth(maxDtTm.getMonth()+1);
				maxDtTm.setMilliseconds(0);
				maxDtTm.setSeconds(0);
				maxDtTm.setMinutes(0);
				maxDtTm.setHours(0);
				maxDtTm.setDate(1);
				tickVals.push(maxDtTm.getTime());
				while (maxDtTm.getTime() > minDtTm.getTime())
				{
					maxDtTm.setMonth(maxDtTm.getMonth()-1);
					if (maxDtTm.getTime() == curDtTm.getTime())
						noNowTick = true; /* removing curTick to prevent override of actual ticks */
					else if (!noNowTick && !DAR_HELPERS.createdNow && maxDtTm.getTime() < curDtTm.getTime())
					{
						DAR_HELPERS.createdNow = true;
						tickVals.push(curDtTm.getTime());
					}
					tickVals.push(maxDtTm.getTime());
				}
			}
			tickVals.reverse();
//CERTRN - Need to allow last tick to show even if greater than current date/time
//CERTRN old			if (tickVals[tickVals.length-1] > new Date().getTime())
//CERTRN old				tickVals[tickVals.length-1] = new Date().getTime();
			return tickVals;
		}
	}
}();

/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */

 
(function($) {
    
    /**
     * Class: $.jqplot.Cursor
     * Plugin class representing the cursor as displayed on the plot.
     */
    $.jqplot.Cursor = function(options) {
        // Group: Properties
        //
        // prop: style
        // CSS spec for cursor style
//CERTRN - To Do - update JQuery???
//old        this.style = 'crosshair';
        this.style = 'default';
        this.previousCursor = 'auto';
		// units to snap to when zooming
		// ie. "minutes" will set zoomed min/max minutes, seconds, milliseconds to zero
		this.snapZoomTo = null;
        // prop: show
        // wether to show the cursor or not.
        this.show = $.jqplot.config.enablePlugins;
		// prop: performOnZoom
		// function to perform on zoom
		this.performOnZoom = function(plot){};
		// prop: performAfterZoom
		// function to perform after zooming complete
		this.performAfterZoom = function(plot){};
        // prop: showTooltip
        // show a cursor position tooltip near the cursor
        this.showTooltip = true;
        // prop: followMouse
        // Tooltip follows the mouse, it is not at a fixed location.
        // Tooltip will show on the grid at the location given by
        // tooltipLocation, offset from the grid edge by tooltipOffset.
        this.followMouse = false;
        // prop: tooltipLocation
        // Where to position tooltip.  If followMouse is true, this is
        // relative to the cursor, otherwise, it is relative to the grid.
        // One of 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.tooltipLocation = 'se';
        // prop: tooltipOffset
        // Pixel offset of tooltip from the grid boudaries or cursor center.
        this.tooltipOffset = 6;
        // prop: showTooltipGridPosition
        // show the grid pixel coordinates of the mouse.
        this.showTooltipGridPosition = false;
        // prop: showTooltipUnitPosition
        // show the unit (data) coordinates of the mouse.
        this.showTooltipUnitPosition = true;
        // prop: showTooltipDataPosition
        // Used with showVerticalLine to show intersecting data points in the tooltip.
        this.showTooltipDataPosition = false;
        // prop: tooltipFormatString
        // sprintf format string for the tooltip.
        // Uses Ash Searle's javascript sprintf implementation
        // found here: http://hexmen.com/blog/2007/03/printf-sprintf/
        // See http://perldoc.perl.org/functions/sprintf.html for reference
        // Note, if showTooltipDataPosition is true, the default tooltipFormatString
        // will be set to the cursorLegendFormatString, not the default given here.
        this.tooltipFormatString = '%.4P, %.4P';
        // prop: useAxesFormatters
        // Use the x and y axes formatters to format the text in the tooltip.
        this.useAxesFormatters = true;
        // prop: tooltipAxisGroups
        // Show position for the specified axes.
        // This is an array like [['xaxis', 'yaxis'], ['xaxis', 'y2axis']]
        // Default is to compute automatically for all visible axes.
        this.tooltipAxisGroups = [];
        // prop: zoom
        // Enable plot zooming.
        this.zoom = false;
        // zoomProxy and zoomTarget properties are not directly set by user.  
        // They Will be set through call to zoomProxy method.
        this.zoomProxy = false;
		//if zoom proxy set up, this will zoom and zoom out on reset on the controller graph
		this.zoomOnController = false;
        this.zoomTarget = false;
        // prop: clickReset
        // Will reset plot zoom if single click on plot without drag.
        this.clickReset = false;
        // prop: dblClickReset
        // Will reset plot zoom if double click on plot without drag.
        this.dblClickReset = true;
        // prop: showVerticalLine
        // draw a vertical line across the plot which follows the cursor.
        // When the line is near a data point, a special legend and/or tooltip can
        // be updated with the data values.
        this.showVerticalLine = false;
        // prop: showHorizontalLine
        // draw a horizontal line across the plot which follows the cursor.
        this.showHorizontalLine = false;
        // prop: constrainZoomTo
        // 'none', 'x' or 'y'
        this.constrainZoomTo = 'none';
        // // prop: autoscaleConstraint
        // // when a constrained axis is specified, true will
        // // auatoscale the adjacent axis.
        // this.autoscaleConstraint = true;
        this.shapeRenderer = new $.jqplot.ShapeRenderer();
        this._zoom = {start:[], end:[], started: false, zooming:false, isZoomed:false, axes:{start:{}, end:{}}};
        this._tooltipElem;
        this.zoomCanvas;
        this.cursorCanvas;
        // prop: intersectionThreshold
        // pixel distance from data point or marker to consider cursor lines intersecting with point.
        // If data point markers are not shown, this should be >= 1 or will often miss point intersections.
        this.intersectionThreshold = 2;
        // prop: showCursorLegend
        // Replace the plot legend with an enhanced legend displaying intersection information.
        this.showCursorLegend = false;
        // prop: cursorLegendFormatString
        // Format string used in the cursor legend.  If showTooltipDataPosition is true,
        // this will also be the default format string used by tooltipFormatString.
        this.cursorLegendFormatString = $.jqplot.Cursor.cursorLegendFormatString;
        $.extend(true, this, options);
    };
    
    $.jqplot.Cursor.cursorLegendFormatString = '%s x:%s, y:%s';
    
    // called with scope of plot
    $.jqplot.Cursor.init = function (target, data, opts){
        // add a cursor attribute to the plot
        var options = opts || {};
        this.plugins.cursor = new $.jqplot.Cursor(options.cursor);
        var c = this.plugins.cursor;

        if (c.show) {
            $.jqplot.eventListenerHooks.push(['jqplotMouseEnter', handleMouseEnter]);
            $.jqplot.eventListenerHooks.push(['jqplotMouseLeave', handleMouseLeave]);
            $.jqplot.eventListenerHooks.push(['jqplotMouseMove', handleMouseMove]);
            
            if (c.showCursorLegend) {              
                opts.legend = opts.legend || {};
                opts.legend.renderer =  $.jqplot.CursorLegendRenderer;
                opts.legend.formatString = this.plugins.cursor.cursorLegendFormatString;
                opts.legend.show = true;
            }
            
            if (c.zoom) {
                $.jqplot.eventListenerHooks.push(['jqplotMouseDown', handleMouseDown]);
                $.jqplot.eventListenerHooks.push(['jqplotMouseUp', handleMouseUp]);
                
                if (c.clickReset) {
                    $.jqplot.eventListenerHooks.push(['jqplotClick', handleClick]);
                }
                
                if (c.dblClickReset) {
                    $.jqplot.eventListenerHooks.push(['jqplotDblClick', handleDblClick]);
                }
            }
    
            this.resetZoom = function() {
                var axes = this.axes;
                if (!c.zoomProxy) {
                    for (var ax in axes) {
                        axes[ax].reset();
                    }
                    this.replot();
                }
                else {
                    var ctx = this.plugins.cursor.zoomCanvas._ctx;
                    ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                }
                this.plugins.cursor._zoom.isZoomed = false;
                this.target.trigger('jqplotResetZoom', [this, this.plugins.cursor]);
            };
            

            if (c.showTooltipDataPosition) {
                c.showTooltipUnitPosition = false;
                c.showTooltipGridPosition = false;
                if (options.cursor.tooltipFormatString == undefined) {
                    c.tooltipFormatString = $.jqplot.Cursor.cursorLegendFormatString;
                }
            }
        }
    };
    
    // called with context of plot
    $.jqplot.Cursor.postDraw = function() {
        var c = this.plugins.cursor;
        // if (c.zoom) {
        c.zoomCanvas = new $.jqplot.GenericCanvas();
        this.eventCanvas._elem.before(c.zoomCanvas.createElement(this._gridPadding, 'jqplot-zoom-canvas', this._plotDimensions));
        var zctx = c.zoomCanvas.setContext();
        // }
        c._tooltipElem = $('<div class="jqplot-cursor-tooltip" style="position:absolute;display:none"></div>');
        c.zoomCanvas._elem.before(c._tooltipElem);
        if (c.showVerticalLine || c.showHorizontalLine) {
            c.cursorCanvas = new $.jqplot.GenericCanvas();
            this.eventCanvas._elem.before(c.cursorCanvas.createElement(this._gridPadding, 'jqplot-cursor-canvas', this._plotDimensions));
            var zctx = c.cursorCanvas.setContext();
        }

        // if we are showing the positions in unit coordinates, and no axes groups
        // were specified, create a default set.
        if (c.showTooltipUnitPosition){
            if (c.tooltipAxisGroups.length === 0) {
                var series = this.series;
                var s;
                var temp = [];
                for (var i=0; i<series.length; i++) {
                    s = series[i];
                    var ax = s.xaxis+','+s.yaxis;
                    if ($.inArray(ax, temp) == -1) {
                        temp.push(ax);
                    }
                }
                for (var i=0; i<temp.length; i++) {
                    c.tooltipAxisGroups.push(temp[i].split(','));
                }
            }
        }
    };
    
    // Group: methods
    //
    // method: $.jqplot.Cursor.zoomProxy
    // links targetPlot to controllerPlot so that plot zooming of
    // targetPlot will be controlled by zooming on the controllerPlot.
    // controllerPlot will not actually zoom, but acts as an
    // overview plot.  Note, the zoom options must be set to true for
    // zoomProxy to work.
    $.jqplot.Cursor.zoomProxy = function(targetPlot, controllerPlot, zoomOnController) {
        var tc = targetPlot.plugins.cursor;
        var cc = controllerPlot.plugins.cursor;
		cc.zoomOnController = zoomOnController;
        tc.zoomTarget = true;
        tc.zoom = true;
        tc.style = 'auto';
        tc.dblClickReset = false;
        cc.zoom = true;
        cc.zoomProxy = true;
              
        controllerPlot.target.bind('jqplotZoom', plotZoom);
        controllerPlot.target.bind('jqplotResetZoom', plotReset);

        function plotZoom(ev, gridpos, datapos, plot, cursor) {
			tc.doZoom(gridpos, datapos, targetPlot, cursor);
        } 

        function plotReset(ev, plot, cursor) {
			var cax = cursor._zoom.axes;
			var axes = targetPlot.axes;
            for (var ax in axes) {
                axes[ax]._ticks = [];
				axes[ax].min = cax[ax].min;
				axes[ax].max = cax[ax].max;
				axes[ax].autoscale = cax[ax].autoscale;
                axes[ax].numberTicks = cax[ax].numberTicks; 
                axes[ax].tickInterval = cax[ax].tickInterval;
                // for date axes
				axes[ax].specialFormat = cax[ax].specialFormat;
				axes[ax].specialFormatFlag = cax[ax].specialFormatFlag;
				axes[ax].useDST = cax[ax].useDST;
                axes[ax].daTickInterval = cax[ax].daTickInterval;
				//if minX, maxX, minY, maxY set, then update min and max respectively to their axis for absolute min/max of "show" series
				var newMin = Number.POSITIVE_INFINITY, newMax = Number.NEGATIVE_INFINITY;
				
				for (var i=0;i<targetPlot.series.length;i++)
				{
					var sObj = targetPlot.series[i];
					var dStr = ax.match(/^[xy]/);
					if (sObj.show && sObj[dStr+"axis"] == ax)
					{
						var minStr = (dStr=="x")?"minX":"minY";
						var maxStr = (dStr=="x")?"maxX":"maxY";
						if (sObj[minStr] && sObj[minStr] < newMin)
							newMin = sObj[minStr];
						if (sObj[maxStr] && sObj[maxStr] > newMax)
							newMax = sObj[maxStr];
					}
				}
				if (newMin != Number.POSITIVE_INFINITY)
				{
					axes[ax].min = (newMin > 0 && (newMin*0.9) < 0)?0:newMin*0.9;
					axes[ax].numberTicks = null;
					axes[ax].tickInterval = null;
					axes[ax].daTickInterval = null;
				}
				if (newMax != Number.NEGATIVE_INFINITY)
				{
					axes[ax].max = newMax*1.1;
					axes[ax].numberTicks = null;
					axes[ax].tickInterval = null;
					axes[ax].daTickInterval = null;
				}
			}
            targetPlot.redraw();
            cursor._zoom.isZoomed = false;
            //targetPlot.resetZoom();
        }
    };
    
    $.jqplot.Cursor.prototype.resetZoom = function(plot, cursor) {
        var axes = plot.axes;
        var cax = cursor._zoom.axes;
        if ((!plot.plugins.cursor.zoomProxy || plot.plugins.cursor.zoomOnController) && cursor._zoom.isZoomed) {
            for (var ax in axes) {
                axes[ax]._ticks = [];
                axes[ax].min = cax[ax].min;
                axes[ax].max = cax[ax].max;
				
				axes[ax].autoscale = cax[ax].autoscale;
                axes[ax].numberTicks = cax[ax].numberTicks; 
                axes[ax].tickInterval = cax[ax].tickInterval;
                // for date axes
                axes[ax].daTickInterval = cax[ax].daTickInterval;
				axes[ax].specialFormat = cax[ax].specialFormat;
				axes[ax].specialFormatFlag = cax[ax].specialFormatFlag;
				axes[ax].useDST = cax[ax].useDST;
            }
            plot.redraw();
            cursor._zoom.isZoomed = false;
        }
        else {
            var ctx = cursor.zoomCanvas._ctx;
            ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        }
        plot.target.trigger('jqplotResetZoom', [plot, cursor]);
    };
    
    $.jqplot.Cursor.resetZoom = function(plot) {
        plot.resetZoom();
    };
    
    $.jqplot.Cursor.prototype.doZoom = function (gridpos, datapos, plot, cursor) {
		this.performOnZoom(plot);
        var c = cursor;
        var axes = plot.axes;
        var zaxes = c._zoom.axes;
        var start = zaxes.start;
        var end = zaxes.end;
        var min, max;
        var ctx = plot.plugins.cursor.zoomCanvas._ctx;
        // don't zoom if zoom area is too small (in pixels)
        if ((c.constrainZoomTo == 'none' && Math.abs(gridpos.x - c._zoom.start[0]) > 6 && Math.abs(gridpos.y - c._zoom.start[1]) > 6) || (c.constrainZoomTo == 'x' && Math.abs(gridpos.x - c._zoom.start[0]) > 6) ||  (c.constrainZoomTo == 'y' && Math.abs(gridpos.y - c._zoom.start[1]) > 6)) {
            if (!plot.plugins.cursor.zoomProxy || plot.plugins.cursor.zoomOnController) {
                for (var ax in datapos) {
                    // make a copy of the original axes to revert back.
                    if (c._zoom.axes[ax] == undefined) {
                        c._zoom.axes[ax] = {};
                        c._zoom.axes[ax].numberTicks = axes[ax].numberTicks;
                        c._zoom.axes[ax].tickInterval = axes[ax].tickInterval;
						c._zoom.axes[ax].autoscale = axes[ax].autoscale;
                        // for date axes...
                        c._zoom.axes[ax].daTickInterval = axes[ax].daTickInterval;
						c._zoom.axes[ax].specialFormat = axes[ax].specialFormat;
						c._zoom.axes[ax].specialFormatFlag = axes[ax].specialFormatFlag;
						c._zoom.axes[ax].useDST = axes[ax].useDST;
                        c._zoom.axes[ax].min = axes[ax].min;
                        c._zoom.axes[ax].max = axes[ax].max;
                    }
                    if ((c.constrainZoomTo == 'none') || (c.constrainZoomTo == 'x' && ax.charAt(0) == 'x') || (c.constrainZoomTo == 'y' && ax.charAt(0) == 'y')) {   
                        dp = datapos[ax];
                        if (dp != null) {           
                            if (dp > start[ax]) {
								var newMin = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'down'):start[ax];
								var newMax = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'up'):dp;
                            }
                            else {
								span = start[ax] - dp;
								var newMin = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'down'):dp;
								var newMax = (axes[ax].renderer == $.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'up'):start[ax];
                            }
							if (newMin != newMax)
							{
								axes[ax].min = newMin;
								axes[ax].max = newMax;
							}
                            axes[ax].tickInterval = null;
                            // for date axes...
                            axes[ax].daTickInterval = null;
                            axes[ax]._ticks = [];
                        }
						if (axes[ax].autoscaleOnZoom != null)
							axes[ax].autoscale = this.autoscaleOnZoom;
                    }
                }
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                plot.redraw();
                c._zoom.isZoomed = true;
            }
			this.performAfterZoom(plot);
            plot.target.trigger('jqplotZoom', [gridpos, datapos, plot, cursor]);
        }
    };
    
    $.jqplot.preInitHooks.push($.jqplot.Cursor.init);
    $.jqplot.postDrawHooks.push($.jqplot.Cursor.postDraw);
    
    function updateTooltip(gridpos, datapos, plot) {
        var c = plot.plugins.cursor;
        var s = '';
        var addbr = false;
        if (c.showTooltipGridPosition) {
            s = gridpos.x+', '+gridpos.y;
            addbr = true;
        }
        if (c.showTooltipUnitPosition) {
            var g;
            for (var i=0; i<c.tooltipAxisGroups.length; i++) {
                g = c.tooltipAxisGroups[i];
                if (addbr) {
                    s += '<br />';
                }
                if (c.useAxesFormatters) {
                    var xf = plot.axes[g[0]]._ticks[0].formatter;
                    var yf = plot.axes[g[1]]._ticks[0].formatter;
                    var xfstr = plot.axes[g[0]]._ticks[0].formatString;
                    var yfstr = plot.axes[g[1]]._ticks[0].formatString;
                    s += xf(xfstr, datapos[g[0]]) + ', '+ yf(yfstr, datapos[g[1]]);
                }
                else {
                    s += $.jqplot.sprintf(c.tooltipFormatString, datapos[g[0]], datapos[g[1]]);
                }
                addbr = true;
            }
        }
        
        if (c.showTooltipDataPosition) {
            var series = plot.series; 
            var ret = getIntersectingPoints(plot, gridpos.x, gridpos.y);
            var addbr = false;
        
            for (var i = 0; i< series.length; i++) {
                if (series[i].show) {
                    var idx = series[i].index;
                    var label = series[i].label.toString();
                    var cellid = $.inArray(idx, ret.indices);
                    var sx = undefined;
                    var sy = undefined;
                    if (cellid != -1) {
                        var data = ret.data[cellid].data;
                        if (c.useAxesFormatters) {
                            var xf = series[i]._xaxis._ticks[0].formatter;
                            var yf = series[i]._yaxis._ticks[0].formatter;
                            var xfstr = series[i]._xaxis._ticks[0].formatString;
                            var yfstr = series[i]._yaxis._ticks[0].formatString;
                            sx = xf(xfstr, data[0]);
                            sy = yf(yfstr, data[1]);
                        }
                        else {
                            sx = data[0];
                            sy = data[1];
                        }
                        if (addbr) {
                            s += '<br />';
                        }
                        s += $.jqplot.sprintf(c.tooltipFormatString, label, sx, sy);
                        addbr = true;
                    }
                }
            }
            
        }
        c._tooltipElem.html(s);
    }
    
    function moveLine(gridpos, plot) {
        var c = plot.plugins.cursor;
        var ctx = c.cursorCanvas._ctx;
        ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        if (c.showVerticalLine) {
            c.shapeRenderer.draw(ctx, [[gridpos.x, 0], [gridpos.x, ctx.canvas.height]]);
        }
        if (c.showHorizontalLine) {
            c.shapeRenderer.draw(ctx, [[0, gridpos.y], [ctx.canvas.width, gridpos.y]]);
        }
        var ret = getIntersectingPoints(plot, gridpos.x, gridpos.y);
        if (c.showCursorLegend) {
            var cells = $(plot.targetId + ' td.jqplot-cursor-legend-label');
            for (var i=0; i<cells.length; i++) {
                var idx = $(cells[i]).data('seriesIndex');
                var series = plot.series[idx];
                var label = series.label.toString();
                var cellid = $.inArray(idx, ret.indices);
                var sx = undefined;
                var sy = undefined;
                if (cellid != -1) {
                    var data = ret.data[cellid].data;
                    if (c.useAxesFormatters) {
                        var xf = series._xaxis._ticks[0].formatter;
                        var yf = series._yaxis._ticks[0].formatter;
                        var xfstr = series._xaxis._ticks[0].formatString;
                        var yfstr = series._yaxis._ticks[0].formatString;
                        sx = xf(xfstr, data[0]);
                        sy = yf(yfstr, data[1]);
                    }
                    else {
                        sx = data[0];
                        sy = data[1];
                    }
                }
                if (plot.legend.escapeHtml) {
                    $(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString, label, sx, sy));
                }
                else {
                    $(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString, label, sx, sy));
                }
            }        
        }
    }
        
    function getIntersectingPoints(plot, x, y) {
        var ret = {indices:[], data:[]};
        var s, i, d0, d, j, r;
        var threshold;
        var c = plot.plugins.cursor;
        for (var i=0; i<plot.series.length; i++) {
            s = plot.series[i];
            r = s.renderer;
            if (s.show) {
                threshold = c.intersectionThreshold;
                if (s.showMarker) {
                    threshold += s.markerRenderer.size/2;
                }
                for (var j=0; j<s.gridData.length; j++) {
                    p = s.gridData[j];
                    // check vertical line
                    if (c.showVerticalLine) {
                        if (Math.abs(x-p[0]) <= threshold) {
                            ret.indices.push(i);
                            ret.data.push({seriesIndex: i, pointIndex:j, gridData:p, data:s.data[j]});
                        }
                    }
                } 
            }
        }
        return ret;
    }
    
    function moveTooltip(gridpos, plot) {
        var c = plot.plugins.cursor;  
        var elem = c._tooltipElem;
        switch (c.tooltipLocation) {
            case 'nw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'n':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'ne':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - c.tooltipOffset - elem.outerHeight(true);
                break;
            case 'e':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            case 'se':
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 's':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 'sw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
            case 'w':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            default:
                var x = gridpos.x + plot._gridPadding.left + c.tooltipOffset;
                var y = gridpos.y + plot._gridPadding.top + c.tooltipOffset;
                break;
        }
            
        c._tooltipElem.css('left', x);
        c._tooltipElem.css('top', y);
    }
    
    function positionTooltip(plot) { 
        // fake a grid for positioning
        var grid = plot._gridPadding; 
        var c = plot.plugins.cursor;
        var elem = c._tooltipElem;  
        switch (c.tooltipLocation) {
            case 'nw':
                var a = grid.left + c.tooltipOffset;
                var b = grid.top + c.tooltipOffset;
                elem.css('left', a);
                elem.css('top', b);
                break;
            case 'n':
                var a = (grid.left + (plot._plotDimensions.width - grid.right))/2 - elem.outerWidth(true)/2;
                var b = grid.top + c.tooltipOffset;
                elem.css('left', a);
                elem.css('top', b);
                break;
            case 'ne':
                var a = grid.right + c.tooltipOffset;
                var b = grid.top + c.tooltipOffset;
                elem.css({right:a, top:b});
                break;
            case 'e':
                var a = grid.right + c.tooltipOffset;
                var b = (grid.top + (plot._plotDimensions.height - grid.bottom))/2 - elem.outerHeight(true)/2;
                elem.css({right:a, top:b});
                break;
            case 'se':
                var a = grid.right + c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({right:a, bottom:b});
                break;
            case 's':
                var a = (grid.left + (plot._plotDimensions.width - grid.right))/2 - elem.outerWidth(true)/2;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({left:a, bottom:b});
                break;
            case 'sw':
                var a = grid.left + c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({left:a, bottom:b});
                break;
            case 'w':
                var a = grid.left + c.tooltipOffset;
                var b = (grid.top + (plot._plotDimensions.height - grid.bottom))/2 - elem.outerHeight(true)/2;
                elem.css({left:a, top:b});
                break;
            default:  // same as 'se'
                var a = grid.right - c.tooltipOffset;
                var b = grid.bottom + c.tooltipOffset;
                elem.css({right:a, bottom:b});
                break;
        }
    }
    
    function handleClick (ev, gridpos, datapos, neighbor, plot) {
        ev.stopPropagation();
        ev.preventDefault();
        var c = plot.plugins.cursor;
        if (c.clickReset) {
            c.resetZoom(plot, c);
        }
        return false;
    }
    
    function handleDblClick (ev, gridpos, datapos, neighbor, plot) {
        ev.stopPropagation();
        ev.preventDefault();
        var c = plot.plugins.cursor;
        if (c.dblClickReset) {
            c.resetZoom(plot, c);
        }
        return false;
    }
    
    function handleMouseLeave(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.show) {
            $(ev.target).css('cursor', c.previousCursor);
            if (c.showTooltip) {
                c._tooltipElem.hide();
            }
            if (c.zoom) {
                c._zoom.started = false;
                c._zoom.zooming = false;
                if (!c.zoomProxy) {
                    var ctx = c.zoomCanvas._ctx;
                    ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
                }
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                var ctx = c.cursorCanvas._ctx;
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
            } if (c.showCursorLegend) {
            var cells = $(plot.targetId + ' td.jqplot-cursor-legend-label');
            for (var i=0; i<cells.length; i++) {
                var idx = $(cells[i]).data('seriesIndex');
                var series = plot.series[idx];
                var label = series.label.toString();
                if (plot.legend.escapeHtml) {
                    $(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString, label, undefined, undefined));
                }
                else {
                    $(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString, label, undefined, undefined));
                }
                
            }        
        }
        }
    }
    
    function handleMouseEnter(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.show) {
            c.previousCursor = ev.target.style.cursor;
            ev.target.style.cursor = c.style;
            if (c.showTooltip) {
                updateTooltip(gridpos, datapos, plot);
                if (c.followMouse) {
                    moveTooltip(gridpos, plot);
                }
                else {
                    positionTooltip(plot);
                }
                c._tooltipElem.show();
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                moveLine(gridpos, plot);
            }
        }
    }
    
    function handleMouseMove(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        var ctx = c.zoomCanvas._ctx;
        if (c.show) {
            if (c.showTooltip) {
                updateTooltip(gridpos, datapos, plot);
                if (c.followMouse) {
                    moveTooltip(gridpos, plot);
                }
            }
            if (c.zoom && c._zoom.started && !c.zoomTarget) {
                c._zoom.zooming = true;
                if (c.constrainZoomTo == 'x') {
                    c._zoom.end = [gridpos.x, ctx.canvas.height];
                }
                else if (c.constrainZoomTo == 'y') {
                    c._zoom.end = [ctx.canvas.width, gridpos.y];
                }
                else {
                    c._zoom.end = [gridpos.x, gridpos.y];
                }
                drawZoomBox.call(c);
            }
            if (c.showVerticalLine || c.showHorizontalLine) {
                moveLine(gridpos, plot);
            }
        }
    }
    
    function handleMouseDown(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        var axes = plot.axes;
        if (c.zoom) {
            if (!c.zoomProxy) {
                var ctx = c.zoomCanvas._ctx;
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
            }
            if (c.constrainZoomTo == 'x') {
                c._zoom.start = [gridpos.x, 0];
            }
            else if (c.constrainZoomTo == 'y') {
                c._zoom.start = [0, gridpos.y];
            }
            else {
                c._zoom.start = [gridpos.x, gridpos.y];
            }
            c._zoom.started = true;
            for (var ax in datapos) {
                // get zoom starting position.
                c._zoom.axes.start[ax] = datapos[ax];
            }
        }
    }
    
    function handleMouseUp(ev, gridpos, datapos, neighbor, plot) {
        var c = plot.plugins.cursor;
        if (c.zoom && c._zoom.zooming && !c.zoomTarget) {
            c.doZoom(gridpos, datapos, plot, c);
        }
        c._zoom.started = false;
        c._zoom.zooming = false;
    }
    
    $.jqplot.CursorLegendRenderer = function(options) {
        $.jqplot.TableLegendRenderer.call(this, options);
        this.formatString = '%s';
    };
    
    $.jqplot.CursorLegendRenderer.prototype = new $.jqplot.TableLegendRenderer();
    $.jqplot.CursorLegendRenderer.prototype.constructor = $.jqplot.CursorLegendRenderer;
    
    // called in context of a Legend
    $.jqplot.CursorLegendRenderer.prototype.draw = function() {
        if (this.show) {
            var series = this._series;
            // make a table.  one line label per row.
            this._elem = $('<table class="jqplot-legend jqplot-cursor-legend" style="position:absolute"></table>');
        
            var pad = false;
            for (var i = 0; i< series.length; i++) {
                s = series[i];
                if (s.show) {
                    var lt = $.jqplot.sprintf(this.formatString, s.label.toString());
                    if (lt) {
                        var color = s.color;
                        if (s._stack && !s.fill) {
                            color = '';
                        }
                        addrow.call(this, lt, color, pad, i);
                        pad = true;
                    }
                    // let plugins add more rows to legend.  Used by trend line plugin.
                    for (var j=0; j<$.jqplot.addLegendRowHooks.length; j++) {
                        var item = $.jqplot.addLegendRowHooks[j].call(this, s);
                        if (item) {
                            addrow.call(this, item.label, item.color, pad);
                            pad = true;
                        } 
                    }
                }
            }
        }
        
        function addrow(label, color, pad, idx) {
            var rs = (pad) ? this.rowSpacing : '0';
            var tr = $('<tr class="jqplot-legend jqplot-cursor-legend"></tr>').appendTo(this._elem);
            tr.data('seriesIndex', idx);
            $('<td class="jqplot-legend jqplot-cursor-legend-swatch" style="padding-top:'+rs+';">'+
                '<div style="border:1px solid #cccccc;padding:0.2em;">'+
                '<div class="jqplot-cursor-legend-swatch" style="background-color:'+color+';"></div>'+
                '</div></td>').appendTo(tr);
            var td = $('<td class="jqplot-legend jqplot-cursor-legend-label" style="vertical-align:middle;padding-top:'+rs+';"></td>');
            td.appendTo(tr);
            td.data('seriesIndex', idx);
            if (this.escapeHtml) {
                td.text(label);
            }
            else {
                td.html(label);
            }
        }
        return this._elem;
    };
    
})(jQuery);

function drawZoomBox() {
	var start = this._zoom.start;
	var end = this._zoom.end;
	var ctx = this.zoomCanvas._ctx;
	var l, t, h, w;
	if (end[0] > start[0]) {
		l = start[0];
		w = end[0] - start[0];
	}
	else {
		l = end[0];
		w = start[0] - end[0];
	}
	if (end[1] > start[1]) {
		t = start[1];
		h = end[1] - start[1];
	}
	else {
		t = end[1];
		h = start[1] - end[1];
	}
	ctx.fillStyle = 'rgba(0,0,0,0.2)';
	ctx.strokeStyle = '#999999';
	ctx.lineWidth = 1.0;
	ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
	ctx.fillRect(0,0,ctx.canvas.width, ctx.canvas.height);
	ctx.clearRect(l, t, w, h);
	// IE won't show transparent fill rect, so stroke a rect also.
	ctx.strokeRect(l,t,w,h);
	if ($.browser.msie)
		ctx.fillRect(l,t,w,h);
}

/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */
(function($) {
    $.jqplot.eventListenerHooks.push(['jqplotMouseMove', handleMove]);
    
    /**
     * Class: $.jqplot.Highlighter
     * Plugin which will highlight data points when they are moused over.
     * 
     * To use this plugin, include the js
     * file in your source:
     * 
     * > <script type="text/javascript" src="plugins/jqplot.highlighter.js"></script>
     * 
     * A tooltip providing information about the data point is enabled by default.
     * To disable the tooltip, set "showTooltip" to false.
     * 
     * You can control what data is displayed in the tooltip with various
     * options.  The "tooltipAxes" option controls wether the x, y or both
     * data values are displayed.
     * 
     * Some chart types (e.g. hi-low-close) have more than one y value per
     * data point. To display the additional values in the tooltip, set the
     * "yvalues" option to the desired number of y values present (3 for a hlc chart).
     * 
     * By default, data values will be formatted with the same formatting
     * specifiers as used to format the axis ticks.  A custom format code
     * can be supplied with the tooltipFormatString option.  This will apply 
     * to all values in the tooltip.  
     * 
     * For more complete control, the "formatString" option can be set.  This
     * Allows conplete control over tooltip formatting.  Values are passed to
     * the format string in an order determined by the "tooltipAxes" and "yvalues"
     * options.  So, if you have a hi-low-close chart and you just want to display 
     * the hi-low-close values in the tooltip, you could set a formatString like:
     * 
     * > highlighter: {
     * >     tooltipAxes: 'y',
     * >     yvalues: 3,
     * >     formatString:'<table class="jqplot-highlighter">
     * >         <tr><td>hi:</td><td>%s</td></tr>
     * >         <tr><td>low:</td><td>%s</td></tr>
     * >         <tr><td>close:</td><td>%s</td></tr></table>'
     * > }
     * 
     */
    $.jqplot.Highlighter = function(options) {
        // Group: Properties
        //
        //prop: show
        // true to show the highlight.
        this.show = $.jqplot.config.enablePlugins;
        // prop: markerRenderer
        // Renderer used to draw the marker of the highlighted point.
        // Renderer will assimilate attributes from the data point being highlighted,
        // so no attributes need set on the renderer directly.
        // Default is to turn off shadow drawing on the highlighted point.
        this.markerRenderer = new $.jqplot.MarkerRenderer({shadow:false});
        // prop: showMarker
        // true to show the marker
        this.showMarker  = true;
        // prop: lineWidthAdjust
        // Pixels to add to the lineWidth of the highlight.
        this.lineWidthAdjust = 2.5;
        // prop: sizeAdjust
        // Pixels to add to the overall size of the highlight.
        this.sizeAdjust = 5;
        // prop: showTooltip
        // Show a tooltip with data point values.
        this.showTooltip = true;
        // prop: tooltipLocation
        // Where to position tooltip, 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.tooltipLocation = 'nw';
        // prop: tooltipFade
        // true = fade in/out tooltip, flase = show/hide tooltip
        this.fadeTooltip = true;
        // prop: tooltipFadeSpeed
        // 'slow', 'def', 'fast', or number of milliseconds.
        this.tooltipFadeSpeed = "fast";
        // prop: tooltipOffset
        // Pixel offset of tooltip from the highlight.
        this.tooltipOffset = 2;
        // prop: tooltipAxes
        // Which axes to display in tooltip, 'x', 'y' or 'both', 'xy' or 'yx'
        // 'both' and 'xy' are equivalent, 'yx' reverses order of labels.
        this.tooltipAxes = 'both';
        // prop; tooltipSeparator
        // String to use to separate x and y axes in tooltip.
        this.tooltipSeparator = ', ';
        // prop: useAxesFormatters
        // Use the x and y axes formatters to format the text in the tooltip.
        this.useAxesFormatters = true;
        // prop: tooltipFormatString
        // sprintf format string for the tooltip.
        // Uses Ash Searle's javascript sprintf implementation
        // found here: http://hexmen.com/blog/2007/03/printf-sprintf/
        // See http://perldoc.perl.org/functions/sprintf.html for reference.
        // Additional "p" and "P" format specifiers added by Chris Leonello.
        this.tooltipFormatString = '%.5P';
        // prop: formatString
        // alternative to tooltipFormatString
        // will format the whole tooltip text, populating with x, y values as
        // indicated by tooltipAxes option.  So, you could have a tooltip like:
        // 'Date: %s, number of cats: %d' to format the whole tooltip at one go.
        // If useAxesFormatters is true, values will be formatted according to
        // Axes formatters and you can populate your tooltip string with 
        // %s placeholders.
        this.formatString = null;
        // prop: yvalues
        // Number of y values to expect in the data point array.
        // Typically this is 1.  Certain plots, like OHLC, will
        // have more y values in each data point array.
        this.yvalues = 1;
        this._tooltipElem;
        this.isHighlighting = false;

        $.extend(true, this, options);
    };
    
    // axis.renderer.tickrenderer.formatter
    
    // called with scope of plot
    $.jqplot.Highlighter.init = function (target, data, opts){
        var options = opts || {};
        // add a highlighter attribute to the plot
        this.plugins.highlighter = new $.jqplot.Highlighter(options.highlighter);
    };
    
    // called within scope of series
    $.jqplot.Highlighter.parseOptions = function (defaults, options) {
        this.showHighlight = true;
    };
    
    // called within context of plot
    // create a canvas which we can draw on.
    // insert it before the eventCanvas, so eventCanvas will still capture events.
    $.jqplot.Highlighter.postPlotDraw = function() {
        this.plugins.highlighter.highlightCanvas = new $.jqplot.GenericCanvas();
        
        this.eventCanvas._elem.before(this.plugins.highlighter.highlightCanvas.createElement(this._gridPadding, 'jqplot-highlight-canvas', this._plotDimensions));
        var hctx = this.plugins.highlighter.highlightCanvas.setContext();
        
        var p = this.plugins.highlighter;
        p._tooltipElem = $('<div class="jqplot-highlighter-tooltip" style="position:absolute;display:none"></div>');
        this.target.append(p._tooltipElem);
    };
    
    $.jqplot.preInitHooks.push($.jqplot.Highlighter.init);
    $.jqplot.preParseSeriesOptionsHooks.push($.jqplot.Highlighter.parseOptions);
    $.jqplot.postDrawHooks.push($.jqplot.Highlighter.postPlotDraw);
    
    function draw(plot, neighbor) {
        var hl = plot.plugins.highlighter;
        var s = plot.series[neighbor.seriesIndex];
        var smr = s.markerRenderer;
        var mr = hl.markerRenderer;
        mr.style = smr.style;
        mr.lineWidth = smr.lineWidth + hl.lineWidthAdjust;
        mr.size = smr.size + hl.sizeAdjust;
        var rgba = $.jqplot.getColorComponents(smr.color);
        var newrgb = [rgba[0], rgba[1], rgba[2]];
        var alpha = (rgba[3] >= 0.6) ? rgba[3]*0.6 : rgba[3]*(2-rgba[3]);
        mr.color = 'rgba('+newrgb[0]+','+newrgb[1]+','+newrgb[2]+','+alpha+')';
        mr.init();
        mr.draw(s.gridData[neighbor.pointIndex][0], s.gridData[neighbor.pointIndex][1], hl.highlightCanvas._ctx);
    }
    
    function showTooltip(plot, series, neighbor) {
        // neighbor looks like: {seriesIndex: i, pointIndex:j, gridData:p, data:s.data[j]}
        // gridData should be x,y pixel coords on the grid.
        // add the plot._gridPadding to that to get x,y in the target.
        var hl = plot.plugins.highlighter;
        var elem = hl._tooltipElem;
        if (hl.useAxesFormatters) {
            var xf = series._xaxis._ticks[0].formatter;
            var yf = series._yaxis._ticks[0].formatter;
            var xfstr = series._xaxis._ticks[0].formatString;
            var yfstr = series._yaxis._ticks[0].formatString;
            var str;
            var xstr = xf(xfstr, neighbor.data[0]);
            var ystrs = [];
            for (var i=1; i<hl.yvalues+1; i++) {
                ystrs.push(yf(yfstr, neighbor.data[i]));
            }
            if (hl.formatString) {
                switch (hl.tooltipAxes) {
                    case 'both':
                    case 'xy':
                        ystrs.unshift(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    case 'yx':
                        ystrs.push(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    case 'x':
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, [hl.formatString, xstr]);
                        break;
                    case 'y':
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                    default: // same as xy
                        ystrs.unshift(xstr);
                        ystrs.unshift(hl.formatString);
                        str = $.jqplot.sprintf.apply($.jqplot.sprintf, ystrs);
                        break;
                } 
            }
            else {
                switch (hl.tooltipAxes) {
                    case 'both':
                    case 'xy':
                        str = xstr;
                        for (var i=0; i<ystrs.length; i++) {
                            str += hl.tooltipSeparator + ystrs[i];
                        }
                        break;
                    case 'yx':
                        str = '';
                        for (var i=0; i<ystrs.length; i++) {
                            str += ystrs[i] + hl.tooltipSeparator;
                        }
                        str += xstr;
                        break;
                    case 'x':
                        str = xstr;
                        break;
                    case 'y':
                        str = '';
                        for (var i=0; i<ystrs.length; i++) {
                            str += ystrs[i] + hl.tooltipSeparator;
                        }
                        break;
                    default: // same as 'xy'
                        str = xstr;
                        for (var i=0; i<ystrs.length; i++) {
                            str += hl.tooltipSeparator + ystrs[i];
                        }
                        break;
                    
                }                
            }
        }
        else {
            var str;
            if (hl.tooltipAxes == 'both' || hl.tooltipAxes == 'xy') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]) + hl.tooltipSeparator + $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]);
            }
            else if (hl.tooltipAxes == 'yx') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]) + hl.tooltipSeparator + $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]);
            }
            else if (hl.tooltipAxes == 'x') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[0]);
            }
            else if (hl.tooltipAxes == 'y') {
                str = $.jqplot.sprintf(hl.tooltipFormatString, neighbor.data[1]);
            } 
        }
		str = str.replace(/%l/,series.label);
		if (neighbor.data[2]!=undefined && neighbor.data[2])
			str = str.replace(/%1/,neighbor.data[2]);
		else
			str = str.replace(/%1/,"");
		if (neighbor.data[3]!=undefined && neighbor.data[3])
			str = str.replace(/%2/,neighbor.data[3]);
		else
			str = str.replace(/%2/,"");
		if (neighbor.data[4]!=undefined && neighbor.data[4])
			str = str.replace(/%3/,neighbor.data[4]);
		else
			str = str.replace(/%3/,"");
		if (neighbor.data[5]!=undefined && neighbor.data[5])
			str = str.replace(/%4/,neighbor.data[5]);
		else
			str = str.replace(/%4/,"");
		if (neighbor.data[8]!=undefined&&neighbor.data[8])
			str=str.replace(/%5/,neighbor.data[8]);
		else 
			str=str.replace(/%5/,"");
		if (neighbor.data[7]!=undefined&&neighbor.data[7])
			str=str.replace(/%6/,neighbor.data[7]);
		else 
			str=str.replace(/%6/,"");
		elem.html(str);
		var gridpos = {x:neighbor.gridData[0], y:neighbor.gridData[1]};
        var ms = 0;
        var fact = 0.707;
        if (series.markerRenderer.show == true) { 
            ms = (series.markerRenderer.size + hl.sizeAdjust)/2;
        }
        switch (hl.tooltipLocation) {
            case 'nw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
            case 'n':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - ms;
                break;
            case 'ne':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
            case 'e':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + ms;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            case 'se':
                var x = gridpos.x + plot._gridPadding.left + hl.tooltipOffset + fact * ms;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + fact * ms;
                break;
            case 's':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true)/2;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + ms;
                break;
            case 'sw':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top + hl.tooltipOffset + fact * ms;
                break;
            case 'w':
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - ms;
                var y = gridpos.y + plot._gridPadding.top - elem.outerHeight(true)/2;
                break;
            default: // same as 'nw'
                var x = gridpos.x + plot._gridPadding.left - elem.outerWidth(true) - hl.tooltipOffset - fact * ms;
                var y = gridpos.y + plot._gridPadding.top - hl.tooltipOffset - elem.outerHeight(true) - fact * ms;
                break;
        }
        elem.css('left', x);
        elem.css('top', y);
        if (hl.fadeTooltip) {
            elem.fadeIn(hl.tooltipFadeSpeed);
        }
        else {
            elem.show();
        }
        
    }
    
    function handleMove(ev, gridpos, datapos, neighbor, plot) {
        var hl = plot.plugins.highlighter;
        if (hl.show) {
            if (neighbor == null && hl.isHighlighting && HIGHLIGHTER_HELPERS.isHighlighting) {
				var ctx = hl.highlightCanvas._ctx;
				ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                if (hl.fadeTooltip) {
                    hl._tooltipElem.fadeOut(hl.tooltipFadeSpeed);
                }
                else {
                    hl._tooltipElem.hide();
                }
				hl.isHighlighting = false;
				HIGHLIGHTER_HELPERS.isHighlighting = false;
            }
            if (neighbor != null && plot.series[neighbor.seriesIndex].showHighlight && !hl.isHighlighting && !HIGHLIGHTER_HELPERS.isHighlighting) {
                hl.isHighlighting = true;
				HIGHLIGHTER_HELPERS.isHighlighting = true;
                if (hl.showMarker) {
                    draw(plot, neighbor);
                }
                if (hl.showTooltip) {
                    showTooltip(plot, plot.series[neighbor.seriesIndex], neighbor);
                }
            }
        }
    }
})(jQuery);

var HIGHLIGHTER_HELPERS = function(){
	return {
		isHighlighting: false
	};
}();
/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */
(function($) {
    
    /**
     * Class: $.jqplot.PointLabels
     * Plugin for putting labels at the data points.
     * 
     * To use this plugin, include the js
     * file in your source:
     * 
     * > <script type="text/javascript" src="plugins/jqplot.pointLabels.js"></script>
     * 
     * By default, the last value in the data ponit array in the data series is used
     * for the label.  For most series renderers, extra data can be added to the 
     * data point arrays and the last value will be used as the label.
     * 
     * For instance, 
     * this series:
     * 
     * > [[1,4], [3,5], [7,2]]
     * 
     * Would, by default, use the y values in the labels.
     * Extra data can be added to the series like so:
     * 
     * > [[1,4,'mid'], [3 5,'hi'], [7,2,'low']]
     * 
     * And now the point labels would be 'mid', 'low', and 'hi'.
     * 
     * Options to the point labels and a custom labels array can be passed into the
     * "pointLabels" option on the series option like so:
     * 
     * > series:[{pointLabels:{
     * >    labels:['mid', 'hi', 'low'],
     * >    location:'se',
     * >    ypadding: 12
     * >    }
     * > }]
     * 
     * A custom labels array in the options takes precendence over any labels
     * in the series data.  If you have a custom labels array in the options,
     * but still want to use values from the series array as labels, set the
     * "labelsFromSeries" option to true.
     * 
     * By default, html entities (<, >, etc.) are escaped in point labels.  
     * If you want to include actual html markup in the labels, 
     * set the "escapeHTML" option to false.
     * 
     */
    $.jqplot.PointLabels = function(options) {
        // Group: Properties
        //
        // prop: show
        // show the labels or not.
        this.show = $.jqplot.config.enablePlugins;
        // prop: location
        // compass location where to position the label around the point.
        // 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.location = 'n';
        // prop: labelsFromSeries
        // true to use labels within data point arrays.
        this.labelsFromSeries = false;
        // prop: seriesLabelIndex
        // array index for location of labels within data point arrays.
        // if null, will use the last element of teh data point array.
        this.seriesLabelIndex = null;
        // prop: labels
        // array of arrays of labels, one array for each series.
        this.labels = [];
        // prop: stackedValue
        // true to display value as stacked in a stacked plot.
        // no effect if labels is specified.
        this.stackedValue = false;
        // prop: ypadding
        // vertical padding in pixels between point and label
        this.ypadding = 6;
        // prop: xpadding
        // horizontal padding in pixels between point and label
        this.xpadding = 6;
        // prop: escapeHTML
        // true to escape html entities in the labels.
        // If you want to include markup in the labels, set to false.
        this.escapeHTML = true;
        // prop: edgeTolerance
        // Number of pixels that the label must be away from an axis
        // boundary in order to be drawn.  Negative values will allow overlap
        // with the grid boundaries.
        this.edgeTolerance = 0;
        // prop: hideZeros
        // true to not show a label for a value which is 0.
        this.hideZeros = false;
        
        $.extend(true, this, options);
    };
    
    var locations = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];
    var locationIndicies = {'nw':0, 'n':1, 'ne':2, 'e':3, 'se':4, 's':5, 'sw':6, 'w':7};
    var oppositeLocations = ['se', 's', 'sw', 'w', 'nw', 'n', 'ne', 'e'];
    
    // called with scope of a series
    $.jqplot.PointLabels.init = function (target, data, seriesDefaults, opts){
        var options = $.extend(true, {}, seriesDefaults, opts);
        // add a pointLabels attribute to the series plugins
        this.plugins.pointLabels = new $.jqplot.PointLabels(options.pointLabels);
        var p = this.plugins.pointLabels;
        if (p.labels.length == 0 || p.labelsFromSeries) {
            if (p.stackedValue) {
                if (this._plotData.length && this._plotData[0].length){
                    var idx = p.seriesLabelIndex || this._plotData[0].length -1;
                    for (var i=0; i<this._plotData.length; i++) {
                        p.labels.push(this._plotData[i][idx]);
                    }
                }
            }
            else {
                var d = this.data;
                if (this.renderer.constructor == $.jqplot.BarRenderer && this.waterfall) {
                    d = this._data;
                }
                if (d.length && d[0].length) {
                    var idx = p.seriesLabelIndex || d[0].length -1;
                    for (var i=0; i<d.length; i++) {
                        p.labels.push(d[i][idx]);
                    }
                }
            }
        }
    };
    
    $.jqplot.PointLabels.prototype.xOffset = function(elem, location, padding) {
        location = location || this.location;
        padding = padding || this.xpadding;
        var offset;
        
        switch (location) {
            case 'nw':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            case 'n':
                offset = -elem.outerWidth(true)/2;
                break;
            case 'ne':
                offset =  this.xpadding;
                break;
            case 'e':
                offset = this.xpadding;
                break;
            case 'se':
                offset = this.xpadding;
                break;
            case 's':
                offset = -elem.outerWidth(true)/2;
                break;
            case 'sw':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            case 'w':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            default: // same as 'nw'
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
        }
        return offset; 
    };
    
    $.jqplot.PointLabels.prototype.yOffset = function(elem, location, padding) {
        location = location || this.location;
        padding = padding || this.xpadding;
        var offset;
        
        switch (location) {
            case 'nw':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'n':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'ne':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'e':
                offset = -elem.outerHeight(true)/2;
                break;
            case 'se':
                offset = this.ypadding;
                break;
            case 's':
                offset = this.ypadding;
                break;
            case 'sw':
                offset = this.ypadding;
                break;
            case 'w':
                offset = -elem.outerHeight(true)/2;
                break;
            default: // same as 'nw'
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
        }
        return offset; 
    };
    
    // called with scope of series
    $.jqplot.PointLabels.draw = function (sctx, options) {
        var p = this.plugins.pointLabels;
        if (p.show) {
            // var xoffset, yoffset;
            //         
            // switch (p.location) {
            //     case 'nw':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'n':
            //         xoffset = function(elem) { return -elem.outerWidth(true)/2; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'ne':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'e':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true)/2; };
            //         break;
            //     case 'se':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 's':
            //         xoffset = function(elem) { return -elem.outerWidth(true)/2; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 'sw':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 'w':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true)/2; };
            //         break;
            //     default: // same as 'nw'
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            // }        
            for (var i=0; i<p.labels.length; i++) {
                var pd = this._plotData;
                var xax = this._xaxis;
                var yax = this._yaxis;
                var label = p.labels[i];
                
                if (p.hideZeros && parseInt(p.labels[i], 10) == 0) {
                    label = '';
                }
                
                var elem = $('<div class="jqplot-point-label" style="position:absolute"></div>');
                elem.insertAfter(sctx.canvas);
                if (p.escapeHTML) {
                    elem.text(label);
                }
                else {
                    elem.html(label);
                }
                var location = p.location;
                if (this.waterfall && parseInt(label, 10) < 0) {
                    location = oppositeLocations[locationIndicies[location]];
                }

                var ell = xax.u2p(pd[i][0]) + p.xOffset(elem, location);
                var elt = yax.u2p(pd[i][1]) + p.yOffset(elem, location);
                elem.css('left', ell);
                elem.css('top', elt);
                var elr = ell + $(elem).width();
                var elb = elt + $(elem).height();
                var et = p.edgeTolerance;
                var scl = $(sctx.canvas).position().left;
                var sct = $(sctx.canvas).position().top;
                var scr = sctx.canvas.width + scl;
                var scb = sctx.canvas.height + sct;
                // if label is outside of allowed area, remove it
                if (ell - et < scl || elt - et < sct || elr + et > scr || elb + et > scb) {
                    $(elem).remove();
                }
            }
        }
    };
    
    $.jqplot.postSeriesInitHooks.push($.jqplot.PointLabels.init);
    $.jqplot.postDrawSeriesHooks.push($.jqplot.PointLabels.draw);
})(jQuery);
(function($){$.jqplot.DateAxisRenderer=function(){$.jqplot.LinearAxisRenderer.call(this)};$.jqplot.DateAxisRenderer.prototype=new $.jqplot.LinearAxisRenderer();$.jqplot.DateAxisRenderer.prototype.constructor=$.jqplot.DateAxisRenderer;$.jqplot.DateTickFormatter=function(format,val){if(!format){format='%Y/%m/%d'}return Date.create(val).strftime(format)};$.jqplot.DateTickFormatterSpecial=function(format,val,showDate){var iDate=Date.create(Math.abs(val));var curDtTm=new Date;curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);var nFormat="<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span><span class='jqplot-elem-hideOnHover nowTime'>%H:%M</span>";return iDate.strftime(nFormat)};$.jqplot.DateTickFormatterXSpecial=function(format,val,showDate){var iDate=Date.create(Math.abs(val));var curDtTm=new Date();curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);var nFormat=format;if(DAR_HELPERS.createdNow&&iDate.getTime()==curDtTm.getTime()){nFormat="<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>"}else if(showDate||(iDate.getMilliseconds()==0&&iDate.getSeconds()==0&&iDate.getMinutes()==0&&iDate.getHours()==0)){nFormat="<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M<br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-hideOnHover'>%#m/%#d/%y</span>"}else{nFormat="<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M"}return iDate.strftime(nFormat)};$.jqplot.DateTickFormatterX2Special=function(format,val,showDate){var iDate=Date.create(Math.abs(val));var df=MP_Util.GetDateFormatter();var iDate2=df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR);var iDate4=df.format(iDate,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);var curDtTm=new Date();curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);var nFormat=format;if(DAR_HELPERS.createdNow&&iDate.getTime()==curDtTm.getTime()){nFormat="<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>"+iDate4+"&nbsp;%H:%M</span>"}else if(showDate||(iDate.getMilliseconds()==0&&iDate.getSeconds()==0&&iDate.getMinutes()==0&&iDate.getHours()==0)){nFormat="<span class='jqplot-elem-showOnHover'>"+iDate4+"</span><span class='jqplot-elem-hideOnHover'>"+iDate2+"</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M"}else{nFormat="<span class='jqplot-elem-showOnHover'>"+iDate4+"</span>&nbsp;<br class='jqplot-elem-hideOnHover'/>%H:%M"}return iDate.strftime(nFormat)};$.jqplot.DateTickFormatterYSpecial=function(format,val,showDate){var iDate=Date.create(Math.abs(val));var curDtTm=new Date();curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);var nFormat=format;if(DAR_HELPERS.createdNow&&iDate.getTime()==curDtTm.getTime()){nFormat="<span class='jqplot-elem-hideOnHover'>&nbsp;</span><span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;%H:%M</span>"}else if(showDate||(iDate.getMilliseconds()==0&&iDate.getSeconds()==0&&iDate.getMinutes()==0&&iDate.getHours()==0)){nFormat="%#m/%#d/<span class='jqplot-elem-showOnHover'>%Y</span><span class='jqplot-elem-hideOnHover'>%y</span><br class='jqplot-elem-hideOnHover'/><span class='jqplot-elem-showOnHover'>&nbsp;</span>%H:%M"}else{nFormat="<span class='jqplot-elem-showOnHover'>%#m/%#d/%Y&nbsp;</span>%H:%M"}return iDate.strftime(nFormat)};$.jqplot.DateAxisRenderer.prototype.init=function(options){this.daTickInterval=null;this._daTickInterval=null;$.extend(true,this,options);if(this.specialFormat&&this.specialFormatFlag!=null&&this.specialFormatFlag==1){this.tickOptions.formatter=$.jqplot.DateTickFormatterSpecial}else if(this.specialFormat&&this.name.match("xaxis")!=null){this.tickOptions.formatter=$.jqplot.DateTickFormatterXSpecial}else if(this.specialFormat&&this.name.match(/^x/)!=null){this.tickOptions.formatter=$.jqplot.DateTickFormatterX2Special}else if(this.specialFormat&&this.name.match(/^y/)!=null){this.tickOptions.formatter=$.jqplot.DateTickFormatterYSpecial}else{this.tickOptions.formatter=$.jqplot.DateTickFormatter}var db=this._dataBounds;for(var i=0;i<this._series.length;i++){var s=this._series[i];var d=s.data;var pd=s._plotData;var sd=s._stackData;for(var j=0;j<d.length;j++){if(this.name.match(/^x/)){d[j][0]=Date.create(d[j][0]).getTime();pd[j][0]=Date.create(d[j][0]).getTime();sd[j][0]=Date.create(d[j][0]).getTime();if(d[j][0]<db.min||db.min==null){db.min=d[j][0]}if(d[j][0]>db.max||db.max==null){db.max=d[j][0]}}else{d[j][1]=Date.create(d[j][1]).getTime();pd[j][1]=Date.create(d[j][1]).getTime();sd[j][1]=Date.create(d[j][1]).getTime();if(d[j][1]<db.min||db.min==null){db.min=d[j][1]}if(d[j][1]>db.max||db.max==null){db.max=d[j][1]}}}}};$.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._min;this.max=this._max;this.tickInterval=this._tickInterval;this.numberTicks=this._numberTicks;this.daTickInterval=this._daTickInterval;this.useDST=this._useDST;this.specialFormat=this._specialFormat;this.specialFormatFlag=this._specialFormatFlag};$.jqplot.DateAxisRenderer.prototype.createTicks=function(){var ticks=this._ticks;var userTicks=this.ticks;var name=this.name;var db=this._dataBounds;var midnightExists=false;var dim,interval;var min,max;var pos1,pos2;var tt,i;if(this.specialFormat){if(this.specialFormatFlag==null||this.specialFormatFlag!=1){var minDtTm=Date.create(this.min);var maxDtTm=Date.create(this.max);DAR_HELPERS.createdNow=true;var tickVals=DAR_HELPERS.DynamicRangeTickCalc(minDtTm.getTime(),maxDtTm.getTime());this.numberTicks=tickVals.length;userTicks=tickVals;midnightExists=false;for(var i=0;i<userTicks.length;i++){var tDate=Date.create(userTicks[i]);if(tDate.getMilliseconds()==0&&tDate.getSeconds()==0&&tDate.getMinutes()==0&&tDate.getHours()==0)midnightExists=true}this.min=tickVals[0];this.max=tickVals[tickVals.length-1];this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1000,'seconds']}else if(this.specialFormatFlag==1)userTicks=[new Date().getTime()];if(this.specialFormatFlag==2){var tempTicks=[],cDiffOpt=null,cDiff=null;for(var i=0;i<userTicks.length;i++){var t1Time=(userTicks[i].constructor==Array)?userTicks[i][0]:userTicks[i];if(i==0)tempTicks.push(t1Time);else{var t2Time=(userTicks[i-1].constructor==Array)?userTicks[i-1][0]:userTicks[i-1];cDiff=t1Time-t2Time;var t1Date=Date.create(t1Time),t2Date=Date.create(t2Time);eval(["t1Date.set",DAR_HELPERS.tickDiff[1],"(t1Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));if(t1Date.getTime()==t2Date.getTime()){tempTicks.push(Math.round(t2Time+(cDiff/2)));tempTicks.push(t1Time)}else{if(DAR_HELPERS.tickDiff[0]==1&&DAR_HELPERS.tickDiff[1]=="Date")t2Date.setHours(t2Date.getHours()+12);else if(DAR_HELPERS.tickDiff[0]==1&&DAR_HELPERS.tickDiff[1]=="Month")t2Date.setDate(t2Date.getDate()+15);else eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()+Math.round(DAR_HELPERS.tickDiff[0]/2));"].join(""));var t2TempTime=t2Date.getTime();if(t2TempTime>=t1Time){tempTicks.push(t1Time)}else{tempTicks.push(t2TempTime);tempTicks.push(t1Time)}}}}userTicks=tempTicks;this.numberTicks=userTicks.length}}if(userTicks.length){for(i=0;i<userTicks.length;i++){var t=new this.tickRenderer(this.tickOptions);t.value=Date.create((userTicks[i].constructor==Array)?userTicks[i][0]:userTicks[i]).getTime();if(t.value>this.max)continue;t.label=(userTicks[i].constructor==Array)?userTicks[i][1]:null;var dateShown=false;if(this.specialFormat){if(i==0&&!midnightExists)dateShown=true;if(this.specialFormatFlag!=null&&this.specialFormatFlag==2){if(i==0||i==(userTicks.length-1)){t.showLabel=false;t.showGridline=false;t.showMark=false}else if((i%2)==0){t.showGridline=false;t.showLabel=true;t.showMark=false}else{t.showGridline=true;t.showLabel=false;t.showMark=true}}else if(userTicks.length>=2&&i==(userTicks.length-1)&&userTicks[userTicks.length-1]==this.max){var t1Date=Date.create((userTicks[i-1].constructor==Array)?userTicks[i-1][0]:userTicks[i-1]);var t2Date=Date.create((userTicks[i].constructor==Array)?userTicks[i][0]:userTicks[i]);eval(["t2Date.set",DAR_HELPERS.tickDiff[1],"(t2Date.get",DAR_HELPERS.tickDiff[1],"()-DAR_HELPERS.tickDiff[0]);"].join(""));if(t1Date.getTime()!=t2Date.getTime()){t.showLabel=false;t.showGridline=false;t.showMark=false}}}if(!this.showTicks){t.showLabel=false;t.showMark=false}else if(!this.showTickMarks){t.showMark=false}t.setTick(t.value,this.name,false,dateShown);this._ticks.push(t)}this.numberTicks=userTicks.length;if(!this.specialFormat){this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value}this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1000,'seconds']}else{if(name.match(/^x/)){dim=this._plotDimensions.width}else{dim=this._plotDimensions.height}if(this.min!=null&&this.max!=null&&this.numberTicks!=null){this.tickInterval=null}if(this.tickInterval!=null){if(Number(this.tickInterval)){this.daTickInterval=[Number(this.tickInterval),'seconds']}else if(typeof this.tickInterval=="string"){var parts=this.tickInterval.split(' ');if(parts.length==1){this.daTickInterval=[1,parts[0]]}else if(parts.length==2){this.daTickInterval=[parts[0],parts[1]]}}}min=((this.min!=null)?Date.create(this.min).getTime():db.min);max=((this.max!=null)?Date.create(this.max).getTime():db.max);if(min==max){var adj=24*60*60*500;min-=adj;max+=adj}var range=max-min;var rmin,rmax;rmin=(this.min!=null)?Date.create(this.min).getTime():min-range/2*(this.padMin-1);rmax=(this.max!=null)?Date.create(this.max).getTime():max+range/2*(this.padMax-1);this.min=rmin;this.max=rmax;range=this.max-this.min;if(this.numberTicks==null){if(this.daTickInterval!=null){var nc=Date.create(this.max).diff(this.min,this.daTickInterval[1],true);this.numberTicks=Math.ceil(nc/this.daTickInterval[0])+1;this.max=Date.create(this.min).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()}else if(dim>200){this.numberTicks=parseInt(3+(dim-200)/100,10)}else{this.numberTicks=2}}if(this.daTickInterval==null){this.daTickInterval=[range/(this.numberTicks-1)/1000,'seconds']}for(var i=0;i<this.numberTicks;i++){var min=Date.create(this.min);if(this.useDST){tt=min.add(i*this.daTickInterval[0],this.daTickInterval[1]).getTime()}else{tt=min.addNoDST(i*this.daTickInterval[0],this.daTickInterval[1]).getTime()}var t=new this.tickRenderer(this.tickOptions);if(!this.showTicks){t.showLabel=false;t.showMark=false}else if(!this.showTickMarks){t.showMark=false}t.setTick(tt,this.name);this._ticks.push(t)}}if(this._daTickInterval==null){this._daTickInterval=this.daTickInterval}}})(jQuery);var DAR_HELPERS=function(){return{createdNow:false,tickDiff:null,hourCntPerTick:2,DynamicRangeTickCalc:function(iMin,iMax){var unitSize={"second":1000,"minute":60*1000,"hour":60*60*1000,"day":24*60*60*1000,"month":30*24*60*60*1000,"year":365.2425*24*60*60*1000};var minDtTm=Date.create(iMin);var maxDtTm=Date.create(iMax);var dtTmDiff=iMax-iMin;var tickVals=[],curDtTm=new Date(),noNowTick=false;var hourCnt=DAR_HELPERS.hourCntPerTick;curDtTm.setMilliseconds(0);curDtTm.setSeconds(0);if(dtTmDiff<=(2*unitSize["second"])){DAR_HELPERS.tickDiff=[250,"Milliseconds"];if((maxDtTm.getMilliseconds()%250)!=0)maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()+(250-(maxDtTm.getMilliseconds()%250)));tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setMilliseconds(maxDtTm.getMilliseconds()-250);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=((2*unitSize["minute"])+(15*unitSize["second"]))){DAR_HELPERS.tickDiff=[15,"Seconds"];if((maxDtTm.getSeconds()%15)!=0||((maxDtTm.getSeconds()%15)==0&&maxDtTm.getMilliseconds()>0))maxDtTm.setSeconds(maxDtTm.getSeconds()+(15-(maxDtTm.getSeconds()%15)));maxDtTm.setMilliseconds(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setSeconds(maxDtTm.getSeconds()-15);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=((2*unitSize["hour"])+(15*unitSize["minute"]))){DAR_HELPERS.tickDiff=[15,"Minutes"];if((maxDtTm.getMinutes()%15)!=0||((maxDtTm.getMinutes()%15)==0&&(maxDtTm.getSeconds()>0||maxDtTm.getMilliseconds()>0)))maxDtTm.setMinutes(maxDtTm.getMinutes()+(15-(maxDtTm.getMinutes()%15)));maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setMinutes(maxDtTm.getMinutes()-15);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=(unitSize["day"]+(hourCnt*unitSize["hour"]))){DAR_HELPERS.tickDiff=[hourCnt,"Hours"];if((maxDtTm.getHours()%hourCnt)!=0||((maxDtTm.getHours()%hourCnt)==0&&(maxDtTm.getMinutes()>0||maxDtTm.getSeconds()>0||maxDtTm.getMilliseconds()>0)))maxDtTm.setHours(maxDtTm.getHours()+(hourCnt-(maxDtTm.getHours()%hourCnt)));maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);maxDtTm.setMinutes(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setHours(maxDtTm.getHours()-hourCnt);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=((2*unitSize["day"])+(4*unitSize["hour"]))){DAR_HELPERS.tickDiff=[4,"Hours"];if((maxDtTm.getHours()%4)!=0||((maxDtTm.getHours()%4)==0&&(maxDtTm.getMinutes()>0||maxDtTm.getSeconds()>0||maxDtTm.getMilliseconds()>0)))maxDtTm.setHours(maxDtTm.getHours()+(4-(maxDtTm.getHours()%4)));maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);maxDtTm.setMinutes(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setHours(maxDtTm.getHours()-4);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=(15*unitSize["day"])){DAR_HELPERS.tickDiff=[1,"Date"];if(maxDtTm.getMilliseconds()>0||maxDtTm.getSeconds()>0||maxDtTm.getMinutes()>0||maxDtTm.getHours()>0)maxDtTm.setDate(maxDtTm.getDate()+1);maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);maxDtTm.setMinutes(0);maxDtTm.setHours(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setDate(maxDtTm.getDate()-1);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else if(dtTmDiff<=((2*unitSize["month"])+(7*unitSize["day"]))){DAR_HELPERS.tickDiff=[7,"Date"];if(maxDtTm.getMilliseconds()>0||maxDtTm.getSeconds()>0||maxDtTm.getMinutes()>0||maxDtTm.getHours()>0)maxDtTm.setDate(maxDtTm.getDate()+1);maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);maxDtTm.setMinutes(0);maxDtTm.setHours(0);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setDate(maxDtTm.getDate()-7);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}else{DAR_HELPERS.tickDiff=[1,"Month"];if(maxDtTm.getDate()>1||(maxDtTm.getDate()==1&&(maxDtTm.getMilliseconds()>0||maxDtTm.getSeconds()>0||maxDtTm.getMinutes()>0||maxDtTm.getHours()>0)))maxDtTm.setMonth(maxDtTm.getMonth()+1);maxDtTm.setMilliseconds(0);maxDtTm.setSeconds(0);maxDtTm.setMinutes(0);maxDtTm.setHours(0);maxDtTm.setDate(1);tickVals.push(maxDtTm.getTime());while(maxDtTm.getTime()>minDtTm.getTime()){maxDtTm.setMonth(maxDtTm.getMonth()-1);if(maxDtTm.getTime()==curDtTm.getTime())noNowTick=true;else if(!noNowTick&&!DAR_HELPERS.createdNow&&maxDtTm.getTime()<curDtTm.getTime()){DAR_HELPERS.createdNow=true;tickVals.push(curDtTm.getTime())}tickVals.push(maxDtTm.getTime())}}tickVals.reverse();return tickVals}}}();(function($){$.jqplot.Cursor=function(options){this.style='default';this.previousCursor='auto';this.snapZoomTo=null;this.show=$.jqplot.config.enablePlugins;this.performOnZoom=function(plot){};this.performAfterZoom=function(plot){};this.showTooltip=true;this.followMouse=false;this.tooltipLocation='se';this.tooltipOffset=6;this.showTooltipGridPosition=false;this.showTooltipUnitPosition=true;this.showTooltipDataPosition=false;this.tooltipFormatString='%.4P, %.4P';this.useAxesFormatters=true;this.tooltipAxisGroups=[];this.zoom=false;this.zoomProxy=false;this.zoomOnController=false;this.zoomTarget=false;this.clickReset=false;this.dblClickReset=true;this.showVerticalLine=false;this.showHorizontalLine=false;this.constrainZoomTo='none';this.shapeRenderer=new $.jqplot.ShapeRenderer();this._zoom={start:[],end:[],started:false,zooming:false,isZoomed:false,axes:{start:{},end:{}}};this._tooltipElem;this.zoomCanvas;this.cursorCanvas;this.intersectionThreshold=2;this.showCursorLegend=false;this.cursorLegendFormatString=$.jqplot.Cursor.cursorLegendFormatString;$.extend(true,this,options)};$.jqplot.Cursor.cursorLegendFormatString='%s x:%s, y:%s';$.jqplot.Cursor.init=function(target,data,opts){var options=opts||{};this.plugins.cursor=new $.jqplot.Cursor(options.cursor);var c=this.plugins.cursor;if(c.show){$.jqplot.eventListenerHooks.push(['jqplotMouseEnter',handleMouseEnter]);$.jqplot.eventListenerHooks.push(['jqplotMouseLeave',handleMouseLeave]);$.jqplot.eventListenerHooks.push(['jqplotMouseMove',handleMouseMove]);if(c.showCursorLegend){opts.legend=opts.legend||{};opts.legend.renderer=$.jqplot.CursorLegendRenderer;opts.legend.formatString=this.plugins.cursor.cursorLegendFormatString;opts.legend.show=true}if(c.zoom){$.jqplot.eventListenerHooks.push(['jqplotMouseDown',handleMouseDown]);$.jqplot.eventListenerHooks.push(['jqplotMouseUp',handleMouseUp]);if(c.clickReset){$.jqplot.eventListenerHooks.push(['jqplotClick',handleClick])}if(c.dblClickReset){$.jqplot.eventListenerHooks.push(['jqplotDblClick',handleDblClick])}}this.resetZoom=function(){var axes=this.axes;if(!c.zoomProxy){for(var ax in axes){axes[ax].reset()}this.replot()}else{var ctx=this.plugins.cursor.zoomCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}this.plugins.cursor._zoom.isZoomed=false;this.target.trigger('jqplotResetZoom',[this,this.plugins.cursor])};if(c.showTooltipDataPosition){c.showTooltipUnitPosition=false;c.showTooltipGridPosition=false;if(options.cursor.tooltipFormatString==undefined){c.tooltipFormatString=$.jqplot.Cursor.cursorLegendFormatString}}}};$.jqplot.Cursor.postDraw=function(){var c=this.plugins.cursor;c.zoomCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(c.zoomCanvas.createElement(this._gridPadding,'jqplot-zoom-canvas',this._plotDimensions));var zctx=c.zoomCanvas.setContext();c._tooltipElem=$('<div class="jqplot-cursor-tooltip" style="position:absolute;display:none"></div>');c.zoomCanvas._elem.before(c._tooltipElem);if(c.showVerticalLine||c.showHorizontalLine){c.cursorCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(c.cursorCanvas.createElement(this._gridPadding,'jqplot-cursor-canvas',this._plotDimensions));var zctx=c.cursorCanvas.setContext()}if(c.showTooltipUnitPosition){if(c.tooltipAxisGroups.length===0){var series=this.series;var s;var temp=[];for(var i=0;i<series.length;i++){s=series[i];var ax=s.xaxis+','+s.yaxis;if($.inArray(ax,temp)==-1){temp.push(ax)}}for(var i=0;i<temp.length;i++){c.tooltipAxisGroups.push(temp[i].split(','))}}}};$.jqplot.Cursor.zoomProxy=function(targetPlot,controllerPlot,zoomOnController){var tc=targetPlot.plugins.cursor;var cc=controllerPlot.plugins.cursor;cc.zoomOnController=zoomOnController;tc.zoomTarget=true;tc.zoom=true;tc.style='auto';tc.dblClickReset=false;cc.zoom=true;cc.zoomProxy=true;controllerPlot.target.bind('jqplotZoom',plotZoom);controllerPlot.target.bind('jqplotResetZoom',plotReset);function plotZoom(ev,gridpos,datapos,plot,cursor){tc.doZoom(gridpos,datapos,targetPlot,cursor)}function plotReset(ev,plot,cursor){var cax=cursor._zoom.axes;var axes=targetPlot.axes;for(var ax in axes){axes[ax]._ticks=[];axes[ax].min=cax[ax].min;axes[ax].max=cax[ax].max;axes[ax].autoscale=cax[ax].autoscale;axes[ax].numberTicks=cax[ax].numberTicks;axes[ax].tickInterval=cax[ax].tickInterval;axes[ax].specialFormat=cax[ax].specialFormat;axes[ax].specialFormatFlag=cax[ax].specialFormatFlag;axes[ax].useDST=cax[ax].useDST;axes[ax].daTickInterval=cax[ax].daTickInterval;var newMin=Number.POSITIVE_INFINITY,newMax=Number.NEGATIVE_INFINITY;for(var i=0;i<targetPlot.series.length;i++){var sObj=targetPlot.series[i];var dStr=ax.match(/^[xy]/);if(sObj.show&&sObj[dStr+"axis"]==ax){var minStr=(dStr=="x")?"minX":"minY";var maxStr=(dStr=="x")?"maxX":"maxY";if(sObj[minStr]&&sObj[minStr]<newMin)newMin=sObj[minStr];if(sObj[maxStr]&&sObj[maxStr]>newMax)newMax=sObj[maxStr]}}if(newMin!=Number.POSITIVE_INFINITY){axes[ax].min=(newMin>0&&(newMin*0.9)<0)?0:newMin*0.9;axes[ax].numberTicks=null;axes[ax].tickInterval=null;axes[ax].daTickInterval=null}if(newMax!=Number.NEGATIVE_INFINITY){axes[ax].max=newMax*1.1;axes[ax].numberTicks=null;axes[ax].tickInterval=null;axes[ax].daTickInterval=null}}targetPlot.redraw();cursor._zoom.isZoomed=false}};$.jqplot.Cursor.prototype.resetZoom=function(plot,cursor){var axes=plot.axes;var cax=cursor._zoom.axes;if((!plot.plugins.cursor.zoomProxy||plot.plugins.cursor.zoomOnController)&&cursor._zoom.isZoomed){for(var ax in axes){axes[ax]._ticks=[];axes[ax].min=cax[ax].min;axes[ax].max=cax[ax].max;axes[ax].autoscale=cax[ax].autoscale;axes[ax].numberTicks=cax[ax].numberTicks;axes[ax].tickInterval=cax[ax].tickInterval;axes[ax].daTickInterval=cax[ax].daTickInterval;axes[ax].specialFormat=cax[ax].specialFormat;axes[ax].specialFormatFlag=cax[ax].specialFormatFlag;axes[ax].useDST=cax[ax].useDST}plot.redraw();cursor._zoom.isZoomed=false}else{var ctx=cursor.zoomCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}plot.target.trigger('jqplotResetZoom',[plot,cursor])};$.jqplot.Cursor.resetZoom=function(plot){plot.resetZoom()};$.jqplot.Cursor.prototype.doZoom=function(gridpos,datapos,plot,cursor){this.performOnZoom(plot);var c=cursor;var axes=plot.axes;var zaxes=c._zoom.axes;var start=zaxes.start;var end=zaxes.end;var min,max;var ctx=plot.plugins.cursor.zoomCanvas._ctx;if((c.constrainZoomTo=='none'&&Math.abs(gridpos.x-c._zoom.start[0])>6&&Math.abs(gridpos.y-c._zoom.start[1])>6)||(c.constrainZoomTo=='x'&&Math.abs(gridpos.x-c._zoom.start[0])>6)||(c.constrainZoomTo=='y'&&Math.abs(gridpos.y-c._zoom.start[1])>6)){if(!plot.plugins.cursor.zoomProxy||plot.plugins.cursor.zoomOnController){for(var ax in datapos){if(c._zoom.axes[ax]==undefined){c._zoom.axes[ax]={};c._zoom.axes[ax].numberTicks=axes[ax].numberTicks;c._zoom.axes[ax].tickInterval=axes[ax].tickInterval;c._zoom.axes[ax].autoscale=axes[ax].autoscale;c._zoom.axes[ax].daTickInterval=axes[ax].daTickInterval;c._zoom.axes[ax].specialFormat=axes[ax].specialFormat;c._zoom.axes[ax].specialFormatFlag=axes[ax].specialFormatFlag;c._zoom.axes[ax].useDST=axes[ax].useDST;c._zoom.axes[ax].min=axes[ax].min;c._zoom.axes[ax].max=axes[ax].max}if((c.constrainZoomTo=='none')||(c.constrainZoomTo=='x'&&ax.charAt(0)=='x')||(c.constrainZoomTo=='y'&&ax.charAt(0)=='y')){dp=datapos[ax];if(dp!=null){if(dp>start[ax]){var newMin=(axes[ax].renderer==$.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'down'):start[ax];var newMax=(axes[ax].renderer==$.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'up'):dp}else{span=start[ax]-dp;var newMin=(axes[ax].renderer==$.jqplot.DateAxisRenderer)?(Date.create(dp)).round(c.snapZoomTo,'down'):dp;var newMax=(axes[ax].renderer==$.jqplot.DateAxisRenderer)?(Date.create(start[ax])).round(c.snapZoomTo,'up'):start[ax]}if(newMin!=newMax){axes[ax].min=newMin;axes[ax].max=newMax}axes[ax].tickInterval=null;axes[ax].daTickInterval=null;axes[ax]._ticks=[]}if(axes[ax].autoscaleOnZoom!=null)axes[ax].autoscale=this.autoscaleOnZoom}}ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);plot.redraw();c._zoom.isZoomed=true}this.performAfterZoom(plot);plot.target.trigger('jqplotZoom',[gridpos,datapos,plot,cursor])}};$.jqplot.preInitHooks.push($.jqplot.Cursor.init);$.jqplot.postDrawHooks.push($.jqplot.Cursor.postDraw);function updateTooltip(gridpos,datapos,plot){var c=plot.plugins.cursor;var s='';var addbr=false;if(c.showTooltipGridPosition){s=gridpos.x+', '+gridpos.y;addbr=true}if(c.showTooltipUnitPosition){var g;for(var i=0;i<c.tooltipAxisGroups.length;i++){g=c.tooltipAxisGroups[i];if(addbr){s+='<br />'}if(c.useAxesFormatters){var xf=plot.axes[g[0]]._ticks[0].formatter;var yf=plot.axes[g[1]]._ticks[0].formatter;var xfstr=plot.axes[g[0]]._ticks[0].formatString;var yfstr=plot.axes[g[1]]._ticks[0].formatString;s+=xf(xfstr,datapos[g[0]])+', '+yf(yfstr,datapos[g[1]])}else{s+=$.jqplot.sprintf(c.tooltipFormatString,datapos[g[0]],datapos[g[1]])}addbr=true}}if(c.showTooltipDataPosition){var series=plot.series;var ret=getIntersectingPoints(plot,gridpos.x,gridpos.y);var addbr=false;for(var i=0;i<series.length;i++){if(series[i].show){var idx=series[i].index;var label=series[i].label.toString();var cellid=$.inArray(idx,ret.indices);var sx=undefined;var sy=undefined;if(cellid!=-1){var data=ret.data[cellid].data;if(c.useAxesFormatters){var xf=series[i]._xaxis._ticks[0].formatter;var yf=series[i]._yaxis._ticks[0].formatter;var xfstr=series[i]._xaxis._ticks[0].formatString;var yfstr=series[i]._yaxis._ticks[0].formatString;sx=xf(xfstr,data[0]);sy=yf(yfstr,data[1])}else{sx=data[0];sy=data[1]}if(addbr){s+='<br />'}s+=$.jqplot.sprintf(c.tooltipFormatString,label,sx,sy);addbr=true}}}}c._tooltipElem.html(s)}function moveLine(gridpos,plot){var c=plot.plugins.cursor;var ctx=c.cursorCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);if(c.showVerticalLine){c.shapeRenderer.draw(ctx,[[gridpos.x,0],[gridpos.x,ctx.canvas.height]])}if(c.showHorizontalLine){c.shapeRenderer.draw(ctx,[[0,gridpos.y],[ctx.canvas.width,gridpos.y]])}var ret=getIntersectingPoints(plot,gridpos.x,gridpos.y);if(c.showCursorLegend){var cells=$(plot.targetId+' td.jqplot-cursor-legend-label');for(var i=0;i<cells.length;i++){var idx=$(cells[i]).data('seriesIndex');var series=plot.series[idx];var label=series.label.toString();var cellid=$.inArray(idx,ret.indices);var sx=undefined;var sy=undefined;if(cellid!=-1){var data=ret.data[cellid].data;if(c.useAxesFormatters){var xf=series._xaxis._ticks[0].formatter;var yf=series._yaxis._ticks[0].formatter;var xfstr=series._xaxis._ticks[0].formatString;var yfstr=series._yaxis._ticks[0].formatString;sx=xf(xfstr,data[0]);sy=yf(yfstr,data[1])}else{sx=data[0];sy=data[1]}}if(plot.legend.escapeHtml){$(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString,label,sx,sy))}else{$(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString,label,sx,sy))}}}}function getIntersectingPoints(plot,x,y){var ret={indices:[],data:[]};var s,i,d0,d,j,r;var threshold;var c=plot.plugins.cursor;for(var i=0;i<plot.series.length;i++){s=plot.series[i];r=s.renderer;if(s.show){threshold=c.intersectionThreshold;if(s.showMarker){threshold+=s.markerRenderer.size/2}for(var j=0;j<s.gridData.length;j++){p=s.gridData[j];if(c.showVerticalLine){if(Math.abs(x-p[0])<=threshold){ret.indices.push(i);ret.data.push({seriesIndex:i,pointIndex:j,gridData:p,data:s.data[j]})}}}}}return ret}function moveTooltip(gridpos,plot){var c=plot.plugins.cursor;var elem=c._tooltipElem;switch(c.tooltipLocation){case'nw':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top-c.tooltipOffset-elem.outerHeight(true);break;case'n':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)/2;var y=gridpos.y+plot._gridPadding.top-c.tooltipOffset-elem.outerHeight(true);break;case'ne':var x=gridpos.x+plot._gridPadding.left+c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top-c.tooltipOffset-elem.outerHeight(true);break;case'e':var x=gridpos.x+plot._gridPadding.left+c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top-elem.outerHeight(true)/2;break;case'se':var x=gridpos.x+plot._gridPadding.left+c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top+c.tooltipOffset;break;case's':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)/2;var y=gridpos.y+plot._gridPadding.top+c.tooltipOffset;break;case'sw':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top+c.tooltipOffset;break;case'w':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top-elem.outerHeight(true)/2;break;default:var x=gridpos.x+plot._gridPadding.left+c.tooltipOffset;var y=gridpos.y+plot._gridPadding.top+c.tooltipOffset;break}c._tooltipElem.css('left',x);c._tooltipElem.css('top',y)}function positionTooltip(plot){var grid=plot._gridPadding;var c=plot.plugins.cursor;var elem=c._tooltipElem;switch(c.tooltipLocation){case'nw':var a=grid.left+c.tooltipOffset;var b=grid.top+c.tooltipOffset;elem.css('left',a);elem.css('top',b);break;case'n':var a=(grid.left+(plot._plotDimensions.width-grid.right))/2-elem.outerWidth(true)/2;var b=grid.top+c.tooltipOffset;elem.css('left',a);elem.css('top',b);break;case'ne':var a=grid.right+c.tooltipOffset;var b=grid.top+c.tooltipOffset;elem.css({right:a,top:b});break;case'e':var a=grid.right+c.tooltipOffset;var b=(grid.top+(plot._plotDimensions.height-grid.bottom))/2-elem.outerHeight(true)/2;elem.css({right:a,top:b});break;case'se':var a=grid.right+c.tooltipOffset;var b=grid.bottom+c.tooltipOffset;elem.css({right:a,bottom:b});break;case's':var a=(grid.left+(plot._plotDimensions.width-grid.right))/2-elem.outerWidth(true)/2;var b=grid.bottom+c.tooltipOffset;elem.css({left:a,bottom:b});break;case'sw':var a=grid.left+c.tooltipOffset;var b=grid.bottom+c.tooltipOffset;elem.css({left:a,bottom:b});break;case'w':var a=grid.left+c.tooltipOffset;var b=(grid.top+(plot._plotDimensions.height-grid.bottom))/2-elem.outerHeight(true)/2;elem.css({left:a,top:b});break;default:var a=grid.right-c.tooltipOffset;var b=grid.bottom+c.tooltipOffset;elem.css({right:a,bottom:b});break}}function handleClick(ev,gridpos,datapos,neighbor,plot){ev.stopPropagation();ev.preventDefault();var c=plot.plugins.cursor;if(c.clickReset){c.resetZoom(plot,c)}return false}function handleDblClick(ev,gridpos,datapos,neighbor,plot){ev.stopPropagation();ev.preventDefault();var c=plot.plugins.cursor;if(c.dblClickReset){c.resetZoom(plot,c)}return false}function handleMouseLeave(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.cursor;if(c.show){$(ev.target).css('cursor',c.previousCursor);if(c.showTooltip){c._tooltipElem.hide()}if(c.zoom){c._zoom.started=false;c._zoom.zooming=false;if(!c.zoomProxy){var ctx=c.zoomCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}}if(c.showVerticalLine||c.showHorizontalLine){var ctx=c.cursorCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}if(c.showCursorLegend){var cells=$(plot.targetId+' td.jqplot-cursor-legend-label');for(var i=0;i<cells.length;i++){var idx=$(cells[i]).data('seriesIndex');var series=plot.series[idx];var label=series.label.toString();if(plot.legend.escapeHtml){$(cells[i]).text($.jqplot.sprintf(c.cursorLegendFormatString,label,undefined,undefined))}else{$(cells[i]).html($.jqplot.sprintf(c.cursorLegendFormatString,label,undefined,undefined))}}}}}function handleMouseEnter(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.cursor;if(c.show){c.previousCursor=ev.target.style.cursor;ev.target.style.cursor=c.style;if(c.showTooltip){updateTooltip(gridpos,datapos,plot);if(c.followMouse){moveTooltip(gridpos,plot)}else{positionTooltip(plot)}c._tooltipElem.show()}if(c.showVerticalLine||c.showHorizontalLine){moveLine(gridpos,plot)}}}function handleMouseMove(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.cursor;var ctx=c.zoomCanvas._ctx;if(c.show){if(c.showTooltip){updateTooltip(gridpos,datapos,plot);if(c.followMouse){moveTooltip(gridpos,plot)}}if(c.zoom&&c._zoom.started&&!c.zoomTarget){c._zoom.zooming=true;if(c.constrainZoomTo=='x'){c._zoom.end=[gridpos.x,ctx.canvas.height]}else if(c.constrainZoomTo=='y'){c._zoom.end=[ctx.canvas.width,gridpos.y]}else{c._zoom.end=[gridpos.x,gridpos.y]}drawZoomBox.call(c)}if(c.showVerticalLine||c.showHorizontalLine){moveLine(gridpos,plot)}}}function handleMouseDown(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.cursor;var axes=plot.axes;if(c.zoom){if(!c.zoomProxy){var ctx=c.zoomCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}if(c.constrainZoomTo=='x'){c._zoom.start=[gridpos.x,0]}else if(c.constrainZoomTo=='y'){c._zoom.start=[0,gridpos.y]}else{c._zoom.start=[gridpos.x,gridpos.y]}c._zoom.started=true;for(var ax in datapos){c._zoom.axes.start[ax]=datapos[ax]}}}function handleMouseUp(ev,gridpos,datapos,neighbor,plot){var c=plot.plugins.cursor;if(c.zoom&&c._zoom.zooming&&!c.zoomTarget){c.doZoom(gridpos,datapos,plot,c)}c._zoom.started=false;c._zoom.zooming=false}$.jqplot.CursorLegendRenderer=function(options){$.jqplot.TableLegendRenderer.call(this,options);this.formatString='%s'};$.jqplot.CursorLegendRenderer.prototype=new $.jqplot.TableLegendRenderer();$.jqplot.CursorLegendRenderer.prototype.constructor=$.jqplot.CursorLegendRenderer;$.jqplot.CursorLegendRenderer.prototype.draw=function(){if(this.show){var series=this._series;this._elem=$('<table class="jqplot-legend jqplot-cursor-legend" style="position:absolute"></table>');var pad=false;for(var i=0;i<series.length;i++){s=series[i];if(s.show){var lt=$.jqplot.sprintf(this.formatString,s.label.toString());if(lt){var color=s.color;if(s._stack&&!s.fill){color=''}addrow.call(this,lt,color,pad,i);pad=true}for(var j=0;j<$.jqplot.addLegendRowHooks.length;j++){var item=$.jqplot.addLegendRowHooks[j].call(this,s);if(item){addrow.call(this,item.label,item.color,pad);pad=true}}}}}function addrow(label,color,pad,idx){var rs=(pad)?this.rowSpacing:'0';var tr=$('<tr class="jqplot-legend jqplot-cursor-legend"></tr>').appendTo(this._elem);tr.data('seriesIndex',idx);$('<td class="jqplot-legend jqplot-cursor-legend-swatch" style="padding-top:'+rs+';">'+'<div style="border:1px solid #cccccc;padding:0.2em;">'+'<div class="jqplot-cursor-legend-swatch" style="background-color:'+color+';"></div>'+'</div></td>').appendTo(tr);var td=$('<td class="jqplot-legend jqplot-cursor-legend-label" style="vertical-align:middle;padding-top:'+rs+';"></td>');td.appendTo(tr);td.data('seriesIndex',idx);if(this.escapeHtml){td.text(label)}else{td.html(label)}}return this._elem}})(jQuery);function drawZoomBox(){var start=this._zoom.start;var end=this._zoom.end;var ctx=this.zoomCanvas._ctx;var l,t,h,w;if(end[0]>start[0]){l=start[0];w=end[0]-start[0]}else{l=end[0];w=start[0]-end[0]}if(end[1]>start[1]){t=start[1];h=end[1]-start[1]}else{t=end[1];h=start[1]-end[1]}ctx.fillStyle='rgba(0,0,0,0.2)';ctx.strokeStyle='#999999';ctx.lineWidth=1.0;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);ctx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height);ctx.clearRect(l,t,w,h);ctx.strokeRect(l,t,w,h);if($.browser.msie)ctx.fillRect(l,t,w,h)}(function($){$.jqplot.eventListenerHooks.push(['jqplotMouseMove',handleMove]);$.jqplot.Highlighter=function(options){this.show=$.jqplot.config.enablePlugins;this.markerRenderer=new $.jqplot.MarkerRenderer({shadow:false});this.showMarker=true;this.lineWidthAdjust=2.5;this.sizeAdjust=5;this.showTooltip=true;this.tooltipLocation='nw';this.fadeTooltip=true;this.tooltipFadeSpeed="fast";this.tooltipOffset=2;this.tooltipAxes='both';this.tooltipSeparator=', ';this.useAxesFormatters=true;this.tooltipFormatString='%.5P';this.formatString=null;this.yvalues=1;this._tooltipElem;this.isHighlighting=false;$.extend(true,this,options)};$.jqplot.Highlighter.init=function(target,data,opts){var options=opts||{};this.plugins.highlighter=new $.jqplot.Highlighter(options.highlighter)};$.jqplot.Highlighter.parseOptions=function(defaults,options){this.showHighlight=true};$.jqplot.Highlighter.postPlotDraw=function(){this.plugins.highlighter.highlightCanvas=new $.jqplot.GenericCanvas();this.eventCanvas._elem.before(this.plugins.highlighter.highlightCanvas.createElement(this._gridPadding,'jqplot-highlight-canvas',this._plotDimensions));var hctx=this.plugins.highlighter.highlightCanvas.setContext();var p=this.plugins.highlighter;p._tooltipElem=$('<div class="jqplot-highlighter-tooltip" style="position:absolute;display:none"></div>');this.target.append(p._tooltipElem)};$.jqplot.preInitHooks.push($.jqplot.Highlighter.init);$.jqplot.preParseSeriesOptionsHooks.push($.jqplot.Highlighter.parseOptions);$.jqplot.postDrawHooks.push($.jqplot.Highlighter.postPlotDraw);function draw(plot,neighbor){var hl=plot.plugins.highlighter;var s=plot.series[neighbor.seriesIndex];var smr=s.markerRenderer;var mr=hl.markerRenderer;mr.style=smr.style;mr.lineWidth=smr.lineWidth+hl.lineWidthAdjust;mr.size=smr.size+hl.sizeAdjust;var rgba=$.jqplot.getColorComponents(smr.color);var newrgb=[rgba[0],rgba[1],rgba[2]];var alpha=(rgba[3]>=0.6)?rgba[3]*0.6:rgba[3]*(2-rgba[3]);mr.color='rgba('+newrgb[0]+','+newrgb[1]+','+newrgb[2]+','+alpha+')';mr.init();mr.draw(s.gridData[neighbor.pointIndex][0],s.gridData[neighbor.pointIndex][1],hl.highlightCanvas._ctx)}function showTooltip(plot,series,neighbor){var hl=plot.plugins.highlighter;var elem=hl._tooltipElem;if(hl.useAxesFormatters){var xf=series._xaxis._ticks[0].formatter;var yf=series._yaxis._ticks[0].formatter;var xfstr=series._xaxis._ticks[0].formatString;var yfstr=series._yaxis._ticks[0].formatString;var str;var xstr=xf(xfstr,neighbor.data[0]);var ystrs=[];for(var i=1;i<hl.yvalues+1;i++){ystrs.push(yf(yfstr,neighbor.data[i]))}if(hl.formatString){switch(hl.tooltipAxes){case'both':case'xy':ystrs.unshift(xstr);ystrs.unshift(hl.formatString);str=$.jqplot.sprintf.apply($.jqplot.sprintf,ystrs);break;case'yx':ystrs.push(xstr);ystrs.unshift(hl.formatString);str=$.jqplot.sprintf.apply($.jqplot.sprintf,ystrs);break;case'x':str=$.jqplot.sprintf.apply($.jqplot.sprintf,[hl.formatString,xstr]);break;case'y':ystrs.unshift(hl.formatString);str=$.jqplot.sprintf.apply($.jqplot.sprintf,ystrs);break;default:ystrs.unshift(xstr);ystrs.unshift(hl.formatString);str=$.jqplot.sprintf.apply($.jqplot.sprintf,ystrs);break}}else{switch(hl.tooltipAxes){case'both':case'xy':str=xstr;for(var i=0;i<ystrs.length;i++){str+=hl.tooltipSeparator+ystrs[i]}break;case'yx':str='';for(var i=0;i<ystrs.length;i++){str+=ystrs[i]+hl.tooltipSeparator}str+=xstr;break;case'x':str=xstr;break;case'y':str='';for(var i=0;i<ystrs.length;i++){str+=ystrs[i]+hl.tooltipSeparator}break;default:str=xstr;for(var i=0;i<ystrs.length;i++){str+=hl.tooltipSeparator+ystrs[i]}break}}}else{var str;if(hl.tooltipAxes=='both'||hl.tooltipAxes=='xy'){str=$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[0])+hl.tooltipSeparator+$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[1])}else if(hl.tooltipAxes=='yx'){str=$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[1])+hl.tooltipSeparator+$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[0])}else if(hl.tooltipAxes=='x'){str=$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[0])}else if(hl.tooltipAxes=='y'){str=$.jqplot.sprintf(hl.tooltipFormatString,neighbor.data[1])}}str=str.replace(/%l/,series.label);if(neighbor.data[2]!=undefined&&neighbor.data[2])str=str.replace(/%1/,neighbor.data[2]);else str=str.replace(/%1/,"");if(neighbor.data[3]!=undefined&&neighbor.data[3])str=str.replace(/%2/,neighbor.data[3]);else str=str.replace(/%2/,"");if(neighbor.data[4]!=undefined&&neighbor.data[4])str=str.replace(/%3/,neighbor.data[4]);else str=str.replace(/%3/,"");if(neighbor.data[5]!=undefined&&neighbor.data[5])str=str.replace(/%4/,neighbor.data[5]);else str=str.replace(/%4/,"");if(neighbor.data[8]!=undefined&&neighbor.data[8])str=str.replace(/%5/,neighbor.data[8]);else str=str.replace(/%5/,"");if(neighbor.data[7]!=undefined&&neighbor.data[7])str=str.replace(/%6/,neighbor.data[7]);else str=str.replace(/%6/,"");elem.html(str);var gridpos={x:neighbor.gridData[0],y:neighbor.gridData[1]};var ms=0;var fact=0.707;if(series.markerRenderer.show==true){ms=(series.markerRenderer.size+hl.sizeAdjust)/2}switch(hl.tooltipLocation){case'nw':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-hl.tooltipOffset-fact*ms;var y=gridpos.y+plot._gridPadding.top-hl.tooltipOffset-elem.outerHeight(true)-fact*ms;break;case'n':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)/2;var y=gridpos.y+plot._gridPadding.top-hl.tooltipOffset-elem.outerHeight(true)-ms;break;case'ne':var x=gridpos.x+plot._gridPadding.left+hl.tooltipOffset+fact*ms;var y=gridpos.y+plot._gridPadding.top-hl.tooltipOffset-elem.outerHeight(true)-fact*ms;break;case'e':var x=gridpos.x+plot._gridPadding.left+hl.tooltipOffset+ms;var y=gridpos.y+plot._gridPadding.top-elem.outerHeight(true)/2;break;case'se':var x=gridpos.x+plot._gridPadding.left+hl.tooltipOffset+fact*ms;var y=gridpos.y+plot._gridPadding.top+hl.tooltipOffset+fact*ms;break;case's':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)/2;var y=gridpos.y+plot._gridPadding.top+hl.tooltipOffset+ms;break;case'sw':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-hl.tooltipOffset-fact*ms;var y=gridpos.y+plot._gridPadding.top+hl.tooltipOffset+fact*ms;break;case'w':var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-hl.tooltipOffset-ms;var y=gridpos.y+plot._gridPadding.top-elem.outerHeight(true)/2;break;default:var x=gridpos.x+plot._gridPadding.left-elem.outerWidth(true)-hl.tooltipOffset-fact*ms;var y=gridpos.y+plot._gridPadding.top-hl.tooltipOffset-elem.outerHeight(true)-fact*ms;break}elem.css('left',x);elem.css('top',y);if(hl.fadeTooltip){elem.fadeIn(hl.tooltipFadeSpeed)}else{elem.show()}}function handleMove(ev,gridpos,datapos,neighbor,plot){var hl=plot.plugins.highlighter;if(hl.show){if(neighbor==null&&hl.isHighlighting&&HIGHLIGHTER_HELPERS.isHighlighting){var ctx=hl.highlightCanvas._ctx;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);if(hl.fadeTooltip){hl._tooltipElem.fadeOut(hl.tooltipFadeSpeed)}else{hl._tooltipElem.hide()}hl.isHighlighting=false;HIGHLIGHTER_HELPERS.isHighlighting=false}if(neighbor!=null&&plot.series[neighbor.seriesIndex].showHighlight&&!hl.isHighlighting&&!HIGHLIGHTER_HELPERS.isHighlighting){hl.isHighlighting=true;HIGHLIGHTER_HELPERS.isHighlighting=true;if(hl.showMarker){draw(plot,neighbor)}if(hl.showTooltip){showTooltip(plot,plot.series[neighbor.seriesIndex],neighbor)}}}}})(jQuery);var HIGHLIGHTER_HELPERS=function(){return{isHighlighting:false}}();(function($){$.jqplot.PointLabels=function(options){this.show=$.jqplot.config.enablePlugins;this.location='n';this.labelsFromSeries=false;this.seriesLabelIndex=null;this.labels=[];this.stackedValue=false;this.ypadding=6;this.xpadding=6;this.escapeHTML=true;this.edgeTolerance=0;this.hideZeros=false;$.extend(true,this,options)};var locations=['nw','n','ne','e','se','s','sw','w'];var locationIndicies={'nw':0,'n':1,'ne':2,'e':3,'se':4,'s':5,'sw':6,'w':7};var oppositeLocations=['se','s','sw','w','nw','n','ne','e'];$.jqplot.PointLabels.init=function(target,data,seriesDefaults,opts){var options=$.extend(true,{},seriesDefaults,opts);this.plugins.pointLabels=new $.jqplot.PointLabels(options.pointLabels);var p=this.plugins.pointLabels;if(p.labels.length==0||p.labelsFromSeries){if(p.stackedValue){if(this._plotData.length&&this._plotData[0].length){var idx=p.seriesLabelIndex||this._plotData[0].length-1;for(var i=0;i<this._plotData.length;i++){p.labels.push(this._plotData[i][idx])}}}else{var d=this.data;if(this.renderer.constructor==$.jqplot.BarRenderer&&this.waterfall){d=this._data}if(d.length&&d[0].length){var idx=p.seriesLabelIndex||d[0].length-1;for(var i=0;i<d.length;i++){p.labels.push(d[i][idx])}}}}};$.jqplot.PointLabels.prototype.xOffset=function(elem,location,padding){location=location||this.location;padding=padding||this.xpadding;var offset;switch(location){case'nw':offset=-elem.outerWidth(true)-this.xpadding;break;case'n':offset=-elem.outerWidth(true)/2;break;case'ne':offset=this.xpadding;break;case'e':offset=this.xpadding;break;case'se':offset=this.xpadding;break;case's':offset=-elem.outerWidth(true)/2;break;case'sw':offset=-elem.outerWidth(true)-this.xpadding;break;case'w':offset=-elem.outerWidth(true)-this.xpadding;break;default:offset=-elem.outerWidth(true)-this.xpadding;break}return offset};$.jqplot.PointLabels.prototype.yOffset=function(elem,location,padding){location=location||this.location;padding=padding||this.xpadding;var offset;switch(location){case'nw':offset=-elem.outerHeight(true)-this.ypadding;break;case'n':offset=-elem.outerHeight(true)-this.ypadding;break;case'ne':offset=-elem.outerHeight(true)-this.ypadding;break;case'e':offset=-elem.outerHeight(true)/2;break;case'se':offset=this.ypadding;break;case's':offset=this.ypadding;break;case'sw':offset=this.ypadding;break;case'w':offset=-elem.outerHeight(true)/2;break;default:offset=-elem.outerHeight(true)-this.ypadding;break}return offset};$.jqplot.PointLabels.draw=function(sctx,options){var p=this.plugins.pointLabels;if(p.show){for(var i=0;i<p.labels.length;i++){var pd=this._plotData;var xax=this._xaxis;var yax=this._yaxis;var label=p.labels[i];if(p.hideZeros&&parseInt(p.labels[i],10)==0){label=''}var elem=$('<div class="jqplot-point-label" style="position:absolute"></div>');elem.insertAfter(sctx.canvas);if(p.escapeHTML){elem.text(label)}else{elem.html(label)}var location=p.location;if(this.waterfall&&parseInt(label,10)<0){location=oppositeLocations[locationIndicies[location]]}var ell=xax.u2p(pd[i][0])+p.xOffset(elem,location);var elt=yax.u2p(pd[i][1])+p.yOffset(elem,location);elem.css('left',ell);elem.css('top',elt);var elr=ell+$(elem).width();var elb=elt+$(elem).height();var et=p.edgeTolerance;var scl=$(sctx.canvas).position().left;var sct=$(sctx.canvas).position().top;var scr=sctx.canvas.width+scl;var scb=sctx.canvas.height+sct;if(ell-et<scl||elt-et<sct||elr+et>scr||elb+et>scb){$(elem).remove()}}}};$.jqplot.postSeriesInitHooks.push($.jqplot.PointLabels.init);$.jqplot.postDrawSeriesHooks.push($.jqplot.PointLabels.draw)})(jQuery);
/**
 * Copyright (c) 2009 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT and GPL version 2.0 licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * The author would appreciate an email letting him know of any substantial
 * use of jqPlot.  You can reach the author at: chris dot leonello at gmail 
 * dot com or see http://www.jqplot.com/info.php .  This is, of course, 
 * not required.
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * Thanks for using jqPlot!
 * 
 */
(function($) {
    
    /**
     * Class: $.jqplot.PointLabels
     * Plugin for putting labels at the data points.
     * 
     * To use this plugin, include the js
     * file in your source:
     * 
     * > <script type="text/javascript" src="plugins/jqplot.pointLabels.js"></script>
     * 
     * By default, the last value in the data ponit array in the data series is used
     * for the label.  For most series renderers, extra data can be added to the 
     * data point arrays and the last value will be used as the label.
     * 
     * For instance, 
     * this series:
     * 
     * > [[1,4], [3,5], [7,2]]
     * 
     * Would, by default, use the y values in the labels.
     * Extra data can be added to the series like so:
     * 
     * > [[1,4,'mid'], [3 5,'hi'], [7,2,'low']]
     * 
     * And now the point labels would be 'mid', 'low', and 'hi'.
     * 
     * Options to the point labels and a custom labels array can be passed into the
     * "pointLabels" option on the series option like so:
     * 
     * > series:[{pointLabels:{
     * >    labels:['mid', 'hi', 'low'],
     * >    location:'se',
     * >    ypadding: 12
     * >    }
     * > }]
     * 
     * A custom labels array in the options takes precendence over any labels
     * in the series data.  If you have a custom labels array in the options,
     * but still want to use values from the series array as labels, set the
     * "labelsFromSeries" option to true.
     * 
     * By default, html entities (<, >, etc.) are escaped in point labels.  
     * If you want to include actual html markup in the labels, 
     * set the "escapeHTML" option to false.
     * 
     */
    $.jqplot.PointLabels = function(options) {
        // Group: Properties
        //
        // prop: show
        // show the labels or not.
        this.show = $.jqplot.config.enablePlugins;
        // prop: location
        // compass location where to position the label around the point.
        // 'n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'
        this.location = 'n';
        // prop: labelsFromSeries
        // true to use labels within data point arrays.
        this.labelsFromSeries = false;
        // prop: seriesLabelIndex
        // array index for location of labels within data point arrays.
        // if null, will use the last element of teh data point array.
        this.seriesLabelIndex = null;
        // prop: labels
        // array of arrays of labels, one array for each series.
        this.labels = [];
        // prop: stackedValue
        // true to display value as stacked in a stacked plot.
        // no effect if labels is specified.
        this.stackedValue = false;
        // prop: ypadding
        // vertical padding in pixels between point and label
        this.ypadding = 6;
        // prop: xpadding
        // horizontal padding in pixels between point and label
        this.xpadding = 6;
        // prop: escapeHTML
        // true to escape html entities in the labels.
        // If you want to include markup in the labels, set to false.
        this.escapeHTML = true;
        // prop: edgeTolerance
        // Number of pixels that the label must be away from an axis
        // boundary in order to be drawn.  Negative values will allow overlap
        // with the grid boundaries.
        this.edgeTolerance = 0;
        // prop: hideZeros
        // true to not show a label for a value which is 0.
        this.hideZeros = false;
        
        $.extend(true, this, options);
    };
    
    var locations = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];
    var locationIndicies = {'nw':0, 'n':1, 'ne':2, 'e':3, 'se':4, 's':5, 'sw':6, 'w':7};
    var oppositeLocations = ['se', 's', 'sw', 'w', 'nw', 'n', 'ne', 'e'];
    
    // called with scope of a series
    $.jqplot.PointLabels.init = function (target, data, seriesDefaults, opts){
        var options = $.extend(true, {}, seriesDefaults, opts);
        // add a pointLabels attribute to the series plugins
        this.plugins.pointLabels = new $.jqplot.PointLabels(options.pointLabels);
        var p = this.plugins.pointLabels;
        if (p.labels.length == 0 || p.labelsFromSeries) {
            if (p.stackedValue) {
                if (this._plotData.length && this._plotData[0].length){
                    var idx = p.seriesLabelIndex || this._plotData[0].length -1;
                    for (var i=0; i<this._plotData.length; i++) {
                        p.labels.push(this._plotData[i][idx]);
                    }
                }
            }
            else {
                var d = this.data;
                if (this.renderer.constructor == $.jqplot.BarRenderer && this.waterfall) {
                    d = this._data;
                }
                if (d.length && d[0].length) {
                    var idx = p.seriesLabelIndex || d[0].length -1;
                    for (var i=0; i<d.length; i++) {
                        p.labels.push(d[i][idx]);
                    }
                }
            }
        }
    };
    
    $.jqplot.PointLabels.prototype.xOffset = function(elem, location, padding) {
        location = location || this.location;
        padding = padding || this.xpadding;
        var offset;
        
        switch (location) {
            case 'nw':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            case 'n':
                offset = -elem.outerWidth(true)/2;
                break;
            case 'ne':
                offset =  this.xpadding;
                break;
            case 'e':
                offset = this.xpadding;
                break;
            case 'se':
                offset = this.xpadding;
                break;
            case 's':
                offset = -elem.outerWidth(true)/2;
                break;
            case 'sw':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            case 'w':
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
            default: // same as 'nw'
                offset = -elem.outerWidth(true) - this.xpadding;
                break;
        }
        return offset; 
    };
    
    $.jqplot.PointLabels.prototype.yOffset = function(elem, location, padding) {
        location = location || this.location;
        padding = padding || this.xpadding;
        var offset;
        
        switch (location) {
            case 'nw':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'n':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'ne':
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
            case 'e':
                offset = -elem.outerHeight(true)/2;
                break;
            case 'se':
                offset = this.ypadding;
                break;
            case 's':
                offset = this.ypadding;
                break;
            case 'sw':
                offset = this.ypadding;
                break;
            case 'w':
                offset = -elem.outerHeight(true)/2;
                break;
            default: // same as 'nw'
                offset = -elem.outerHeight(true) - this.ypadding;
                break;
        }
        return offset; 
    };
    
    // called with scope of series
    $.jqplot.PointLabels.draw = function (sctx, options) {
        var p = this.plugins.pointLabels;
        if (p.show) {
            // var xoffset, yoffset;
            //         
            // switch (p.location) {
            //     case 'nw':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'n':
            //         xoffset = function(elem) { return -elem.outerWidth(true)/2; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'ne':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            //     case 'e':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true)/2; };
            //         break;
            //     case 'se':
            //         xoffset = function(elem) { return p.xpadding; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 's':
            //         xoffset = function(elem) { return -elem.outerWidth(true)/2; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 'sw':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return p.ypadding; };
            //         break;
            //     case 'w':
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true)/2; };
            //         break;
            //     default: // same as 'nw'
            //         xoffset = function(elem) { return -elem.outerWidth(true) - p.xpadding; };
            //         yoffset = function(elem) { return -elem.outerHeight(true) - p.ypadding; };
            //         break;
            // }        
            for (var i=0; i<p.labels.length; i++) {
                var pd = this._plotData;
                var xax = this._xaxis;
                var yax = this._yaxis;
                var label = p.labels[i];
                
                if (p.hideZeros && parseInt(p.labels[i], 10) == 0) {
                    label = '';
                }
                
                var elem = $('<div class="jqplot-point-label" style="position:absolute"></div>');
                elem.insertAfter(sctx.canvas);
                if (p.escapeHTML) {
                    elem.text(label);
                }
                else {
                    elem.html(label);
                }
                var location = p.location;
                if (this.waterfall && parseInt(label, 10) < 0) {
                    location = oppositeLocations[locationIndicies[location]];
                }

                var ell = xax.u2p(pd[i][0]) + p.xOffset(elem, location);
                var elt = yax.u2p(pd[i][1]) + p.yOffset(elem, location);
                elem.css('left', ell);
                elem.css('top', elt);
                var elr = ell + $(elem).width();
                var elb = elt + $(elem).height();
                var et = p.edgeTolerance;
                var scl = $(sctx.canvas).position().left;
                var sct = $(sctx.canvas).position().top;
                var scr = sctx.canvas.width + scl;
                var scb = sctx.canvas.height + sct;
                // if label is outside of allowed area, remove it
                if (ell - et < scl || elt - et < sct || elr + et > scr || elb + et > scb) {
                    $(elem).remove();
                }
            }
        }
    };
    
    $.jqplot.postSeriesInitHooks.push($.jqplot.PointLabels.init);
    $.jqplot.postDrawSeriesHooks.push($.jqplot.PointLabels.draw);
})(jQuery);

/******************************************************************************
 *
 * jquery.graphTable-0.2.js
 * by rebecca murphey
 * http://blog.rebeccamurphey.com
 * rmurphey gmail com
 * License: GPL
 * 17 December 2007
 *
 * requires:
 *
 *   - jquery.js (http://jquery.com) -- tested with 1.2.1
 *   - jquery.flot.js (http://code.google.com/p/flot/)
 *
 * usage:
 *
 *   $('#myTable').graphTable(graphTableOptionsObject,flotOptionsObject);
 *
 *   - both arguments are optional; defaults will work in most cases
 *     but you'll need to include {series: 'columns'} if your data is
 *     in columns.
 *   - for details on graphTable options and defaults, see below.
 *   - for details on flot options and defaults, see
 *     http://code.google.com/p/flot/
 *
 * notes:
 *
 *   - this isn't going to work well with tables that use rowspan or colspan
 *   - make sure to use the transform args to transform your cell contents into
 *     something flot can understand -- especially important if your cells
 *     contain currency or dates
 *
 ******************************************************************************/
 
(function($) {
 
	$.fn.graphTable = function(graphArgs_,flotArgs_) {
 
		var args = {
	 
			/*
			* options for reading the table -- defaults will work in most cases except
			* you'll want to override the default args.series if your series are in columns
			*
			* note that anywhere the word "index" is used, the count starts from 0 at
			* the top left of the table
			*
			*/
			graphNum: 0, //The identifier of the graph which should be populated
			// overviewFrom: 0,
			// overviewTo: 0,
			series: 'rows', // are the series in rows or columns?
			labels: 0, // index of the cell in the series row/column that contains the label for the series
			xaxis: 0, // index of the row/column (whatever args.series is) that contains the x values
			firstSeries: 1, // index of the row/column containing the first series
			lastSeries: null, // index of the row/column containing the last series; will use the last cell in the row/col if not set
			dataStart: 0, // index of the first cell in the series containing data
			dataEnd: null, // index of the last cell in the series containing data; will use the last cell in the row/col if not set
			legendLabels: null, //Label for the each series to be used in the legend

			/* graph size and position */
			position: 'after', // before the table, after the table, or replace the table
			width: null, // set to null to use the width of the table
			height: null, // set to null to use the height of the table
			min: 0, // defaults to minimum y value in the table
			max: 0, // defaults to maximum y value in the table

			/* data transformation before plotting */
			dataTransform: null, // function to run on cell contents before passing to flot; string -> string
			labelTransform: null, // function to run on cell contents before passing to flot; string -> string
			xaxisTransform: null // function to run on cell contents before passing to flot; string -> string
	 
		}
		
		
		// override defaults with user args
		$.extend(true,args,graphArgs_);
		
		/* default to last cell in the row/col for
		 * lastSeries and dataEnd if they haven't been set yet */
	 
		// index of the row/column containing the last series
		if (! args.lastSeries) {
			args.lastSeries = (args.series == 'columns') ?
				$('tr',$(this)).eq(args.labels).find('th,td').length - 1 :
				$('tr',$(this)).length - 1;
		}
	 
		// index of the last cell in the series containing data
		if (! args.dataEnd) {
			args.dataEnd = (args.series == 'rows') ?
				$('tr',$(this)).eq(args.firstSeries).find('th,td').length - 1:
				$('tr',$(this)).length - 1;
		}
	 
		return $(this).each(function() {
			// use local min/max for y of each graph, based on initial args
			var $table = $(this);
	 
			// make sure the table is a table!
			if (! $table.is('table')) { return; }
	 
			// if no height and width have been set, then set
			// width and height based on the width and height of the table
			if (! args.width) { args.width = $table.width(); }
			if (! args.height) { args.height = $table.height(); }
	 
			var min = args.min;
			var max = args.max;
			var $rows = $('tr',$table);
			var tableData = new Array();
	 
			switch (args.series) {
			case 'rows':
				 
				var $xaxisRow = $rows.eq(args.xaxis);
 
				// iterate over each of the rows in the series
				for (i=args.firstSeries;i<=args.lastSeries;i++) {
					var rowData = new Array();
	 
					$dataRow = $('tr',$table).eq(i);
	 
					// get the label for the whole row
					var label = graphUnits[args.graphNum - 1];
	 
					if (args.labelTransform) { label = args.labelTransform(label); }
	 
					for (j=args.dataStart;j<=args.dataEnd;j++) {
						var x = $('th,td',$xaxisRow).eq(j).text();
						var y = $('th,td',$dataRow).eq(j).text();
						
						if (!isNaN(y)) {
							if (args.dataTransform) { y = args.dataTransform(y); }
							if (args.xaxisTransform) { x = args.xaxisTransform(x); }
							
							test_x = parseFloat(x);
							test_y = parseFloat(y);

							if (test_y < min) { min = test_y; }
							else if (test_y > max) { max = test_y; }
                        }
						else {
						  x = null;
						  y = null;
						}

						rowData[rowData.length] = [x,y];
					}
		 
					tableData[tableData.length] = { label: label, data: rowData };
				}
				break; 
			case 'columns':
				// iterate over each of the columns in the series					
				for (j=args.firstSeries;j<=args.lastSeries;j++) { // j designates the column
					var colData = new Array();
					
					var label = "";
					
					if(args.legendLabels != null){
						label = args.legendLabels[j-1];
					}
					else{	
						// get the label for the whole row
						label = graphUnits[args.graphNum - 1];
					}

					if (args.labelTransform) { label = args.labelTransform(label); }
 
					for (i=args.dataStart;i<=args.dataEnd;i++) { // i designates the row

						$cell = $rows.eq(i).find('th,td').eq(j);
						var y = $cell.text();
						var x = $rows.eq(i).find('th,td').eq(args.xaxis).text();
						
						if (!isNaN(y)) {
							if (args.dataTransform) { y = args.dataTransform(y); }
							if (args.xaxisTransform) { x = args.xaxisTransform(x); }
							
							test_x = parseFloat(x);
							test_y = parseFloat(y);
	 
							if (test_y < min) { min = test_y - 2; }
							else if (test_y > max) { max = test_y + 2; }
							
							if(i == args.dataStart){
								overviewFrom = test_x;
							}
							else if(i == args.dataEnd){
								overviewTo = test_x;
							}
						}
						else {
						  x = null;
						  y = null;
						}

						colData[colData.length] = [x,y];
					}
					tableData[tableData.length] = { label: label, data: colData };
				}
				break;
			}
			
			var flotArgs = { yaxis: { min: min, max: max }};
			var placeholder = $("#placeHolder" + args.graphNum)
			placeholder.width(args.width).height(args.height);
			$.extend(true,flotArgs,flotArgs_);
			var plot = $.plot(placeholder, tableData, flotArgs);
			
			
			// setup overview
			var overview = $("#overviewGraph" + args.graphNum)
			overview.width(150).height(50);
			
			var overviewPlot = $.plot(overview, tableData, {
				legend: {show: false},
				series: {
					lines: { show: true, lineWidth: 1 },
					shadowSize: 0
				},
				xaxis: { ticks: 0 },
				yaxis: { ticks: 0, min: args.min, max: args.max  },
				grid: { color: "#999", backgroundColor: { colors: ["##DBE9CF", "#fff"]} },
				selection: { mode: "x" }
			});
			/*Zoom into data*/
			placeholder.bind("plotselected", function (event, ranges) {
				// clamp the zooming to prevent eternal zoom
				if (ranges.xaxis.to - ranges.xaxis.from < 0.00001)
					ranges.xaxis.to = ranges.xaxis.from + 0.00001;
				if (ranges.yaxis.to - ranges.yaxis.from < 0.00001)
					ranges.yaxis.to = ranges.yaxis.from + 0.00001;

				plot = $.plot(placeholder, tableData, $.extend(true, {}, flotArgs, {xaxis: { min: ranges.xaxis.from, max: ranges.xaxis.to}, series: {show: true, lineWidth: 1}}));
				
				// don't fire event on the overview to prevent eternal loop
				overviewPlot.setSelection(ranges, true);
			});
			
			overview.bind("plotselected", function (event, ranges) {
				plot.setSelection(ranges);
			});
		});
	};
})(jQuery);
/*!
 * jQuery UI 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.7",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");
if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,
"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,
d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});
c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&
b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,
a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;
e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(c){c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(true===c.data(b.target,a.widgetName+".preventClickEvent")){c.removeData(b.target,a.widgetName+".preventClickEvent");b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=
a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var b=this,e=a.which==1,f=typeof this.options.cancel=="string"?c(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}this._mouseMoveDelegate=function(d){return b._mouseMove(d)};this._mouseUpDelegate=function(d){return b._mouseUp(d)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(c.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);
return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Draggable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();
d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||
0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment==
"parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[(a.containment=="document"?0:d(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment=="document"?0:d(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?
0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==
Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,g=a.pageY;
if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/
b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;e=this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=
this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.7"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var g=d.data(this,"sortable");if(g&&!g.options.disabled){c.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=
c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,
true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=
0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=
a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","iframeFix",{start:function(){var a=d(this).data("draggable").options;d(a.iframeFix===true?"iframe":a.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")})},
stop:function(){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=
document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!="x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-
c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-
(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable",
"snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,g=b.offset.left,n=g+c.helperProportions.width,m=b.offset.top,o=m+c.helperProportions.height,h=
c.snapElements.length-1;h>=0;h--){var i=c.snapElements[h].left,k=i+c.snapElements[h].width,j=c.snapElements[h].top,l=j+c.snapElements[h].height;if(i-e<g&&g<k+e&&j-e<m&&m<l+e||i-e<g&&g<k+e&&j-e<o&&o<l+e||i-e<n&&n<k+e&&j-e<m&&m<l+e||i-e<n&&n<k+e&&j-e<o&&o<l+e){if(f.snapMode!="inner"){var p=Math.abs(j-o)<=e,q=Math.abs(l-m)<=e,r=Math.abs(i-n)<=e,s=Math.abs(k-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",
{top:l,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k}).left-c.margins.left}var t=p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(j-m)<=e;q=Math.abs(l-o)<=e;r=Math.abs(i-g)<=e;s=Math.abs(k-n)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l-c.helperProportions.height,
left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[h].snapping&&(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=p||q||r||s||t}else{c.snapElements[h].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,
b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;/*
 * jQuery UI Sortable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a==="disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,
arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=
c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,
{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();
if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",
a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+
this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+
b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,
c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",
null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):
d(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+
this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?
2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=
this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=
this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");
if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=
0;b--){var c=this.items[b],e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=
this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},
update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=
null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));
this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,
null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||
d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a==
"string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition==
"absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==
"relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),
10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?
this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=
this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+
this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?
g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==
f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",
f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",
g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=
0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});
d.extend(d.ui.sortable,{version:"1.8.7"})})(jQuery);
;
/*!
 * jQuery UI 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.7",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");
if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,
"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,
d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});
c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&
b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);

/*
 * jQuery UI Draggable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();
d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||
0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment==
"parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[(a.containment=="document"?0:d(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(a.containment=="document"?0:d(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:d(window).scrollLeft())+d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?
0:d(window).scrollTop())+(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),
10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==
Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,g=a.pageY;
if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/
b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;e=this.originalPageX+Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=
this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.7"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var g=d.data(this,"sortable");if(g&&!g.options.disabled){c.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=
0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=
c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=d(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,
true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=
0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=
a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","iframeFix",{start:function(){var a=d(this).data("draggable").options;d(a.iframeFix===true?"iframe":a.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")})},
stop:function(){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("opacity"))b._opacity=a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=
document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!c.axis||c.axis!="x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-
c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-b.overflowOffset.left<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-
(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable",
"snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,g=b.offset.left,n=g+c.helperProportions.width,m=b.offset.top,o=m+c.helperProportions.height,h=
c.snapElements.length-1;h>=0;h--){var i=c.snapElements[h].left,k=i+c.snapElements[h].width,j=c.snapElements[h].top,l=j+c.snapElements[h].height;if(i-e<g&&g<k+e&&j-e<m&&m<l+e||i-e<g&&g<k+e&&j-e<o&&o<l+e||i-e<n&&n<k+e&&j-e<m&&m<l+e||i-e<n&&n<k+e&&j-e<o&&o<l+e){if(f.snapMode!="inner"){var p=Math.abs(j-o)<=e,q=Math.abs(l-m)<=e,r=Math.abs(i-n)<=e,s=Math.abs(k-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",
{top:l,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k}).left-c.margins.left}var t=p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(j-m)<=e;q=Math.abs(l-o)<=e;r=Math.abs(i-g)<=e;s=Math.abs(k-n)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l-c.helperProportions.height,
left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[h].snapping&&(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=p||q||r||s||t}else{c.snapElements[h].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,
a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,
b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);

/*!
 * jQuery UI Mouse 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(c){c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(true===c.data(b.target,a.widgetName+".preventClickEvent")){c.removeData(b.target,a.widgetName+".preventClickEvent");b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=
a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var b=this,e=a.which==1,f=typeof this.options.cancel=="string"?c(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}this._mouseMoveDelegate=function(d){return b._mouseMove(d)};this._mouseUpDelegate=function(d){return b._mouseUp(d)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(c.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);
return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",
true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);

/*
 * jQuery UI Sortable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(a,b){if(a==="disabled"){this.options[a]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else d.Widget.prototype._setOption.apply(this,
arguments)},_mouseCapture:function(a,b){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(a);var c=null,e=this;d(a.target).parents().each(function(){if(d.data(this,"sortable-item")==e){c=d(this);return false}});if(d.data(a.target,"sortable-item")==e)c=d(a.target);if(!c)return false;if(this.options.handle&&!b){var f=false;d(this.options.handle,c).find("*").andSelf().each(function(){if(this==a.target)f=true});if(!f)return false}this.currentItem=
c;this._removeCurrentsFromItems();return true},_mouseStart:function(a,b,c){b=this.options;var e=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.extend(this.offset,
{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();
if(b.cursor){if(d("body").css("cursor"))this._storedCursor=d("body").css("cursor");d("body").css("cursor",b.cursor)}if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",
a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("activate",a,e._uiHash(this));if(d.ui.ddmanager)d.ui.ddmanager.current=this;d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return true},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,c=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(a.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+
this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(a.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(a.pageY-d(document).scrollTop()<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()-b.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity)c=d(document).scrollTop(d(document).scrollTop()+
b.scrollSpeed);if(a.pageX-d(document).scrollLeft()<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity)c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)}c!==false&&d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+
"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--){c=this.items[b];var e=c.item[0],f=this._intersectsWithPointer(c);if(f)if(e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],e):true)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(c))this._rearrange(a,
c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=this;b=c.placeholder.offset();c.reverting=true;d(this.helper).animate({left:b.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:b.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return false}},cancel:function(){var a=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",
null,a._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,a._uiHash(this));this.containers[b].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();d.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):
d(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};d(b).each(function(){var e=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);if(e)c.push((a.key||e[1]+"[]")+"="+(a.key&&a.expression?e[1]:e[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[];a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||
"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,k=i+a.height,j=this.offset.click.top,l=this.offset.click.left;j=e+j>i&&e+j<k&&b+l>g&&b+l<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:g<b+
this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<k},_intersectsWithPointer:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);b=b&&a;a=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();if(!b)return false;return this.floating?c&&c=="right"||a=="down"?2:1:a&&(a=="down"?
2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&a||e=="left"&&!a:c&&(c=="down"&&b||c=="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;a>=0;a--)for(var f=d(e[a]),g=f.length-1;g>=0;g--){var h=d.data(f[g],"sortable");if(h&&h!=
this&&!h.options.disabled)c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;a>=0;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=
this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e)for(var f=e.length-1;f>=0;f--)for(var g=d(e[f]),h=g.length-1;h>=0;h--){var i=d.data(g[h],"sortable");
if(i&&i!=this&&!i.options.disabled){c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]);this.containers.push(i)}}for(f=c.length-1;f>=0;f--){a=c[f][1];e=c[f][0];h=0;for(g=e.length;h<g;h++){i=d(e[h]);i.data("sortable-item",a);b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=
0;b--){var c=this.items[b],e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;if(!a){c.width=e.outerWidth();c.height=e.outerHeight()}e=e.offset();c.left=e.left;c.top=e.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;b>=0;b--){e=this.containers[b].element.offset();this.containers[b].containerCache.left=e.left;this.containers[b].containerCache.top=e.top;this.containers[b].containerCache.width=
this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var f=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!e)f.style.visibility="hidden";return f},
update:function(f,g){if(!(e&&!c.forcePlaceholderSize)){g.height()||g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));g.width()||g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=
null,c=null,e=this.containers.length-1;e>=0;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!(b&&d.ui.contains(this.containers[e].element[0],b.element[0]))){b=this.containers[e];c=e}}else if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",a,this._uiHash(this));this.containers[e].containerCache.over=0}if(b)if(this.containers.length===1){this.containers[c]._trigger("over",a,this._uiHash(this));
this.containers[c].containerCache.over=1}else if(this.currentContainer!=this.containers[c]){b=1E4;e=null;for(var f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.items[g][this.containers[c].floating?"left":"top"];if(Math.abs(h-f)<b){b=Math.abs(h-f);e=this.items[g]}}if(e||this.options.dropOnEmpty){this.currentContainer=this.containers[c];e?this._rearrange(a,e,null,true):this._rearrange(a,
null,this.containers[c].element,true);this._trigger("change",a,this._uiHash());this.containers[c]._trigger("change",a,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[c]._trigger("over",a,this._uiHash(this));this.containers[c].containerCache.over=1}}},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):b.helper=="clone"?this.currentItem.clone():this.currentItem;a.parents("body").length||
d(b.appendTo!="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);if(a[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(a[0].style.width==""||b.forceHelperSize)a.width(this.currentItem.width());if(a[0].style.height==""||b.forceHelperSize)a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){if(typeof a==
"string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition==
"absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==
"relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=d(a.containment)[0];a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),
10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?
this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=
this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+
this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?
g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;f=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,e){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==
f.counter&&f.refreshPositions(!e)},0)},_clear:function(a,b){this.reverting=false;var c=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(f){this._trigger("receive",
f,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!b)c.push(function(f){this._trigger("update",f,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){b||c.push(function(f){this._trigger("remove",f,this._uiHash())});for(e=this.containers.length-1;e>=0;e--)if(d.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!b){c.push(function(f){return function(g){f._trigger("receive",
g,this._uiHash(this))}}.call(this,this.containers[e]));c.push(function(f){return function(g){f._trigger("update",g,this._uiHash(this))}}.call(this,this.containers[e]))}}for(e=this.containers.length-1;e>=0;e--){b||c.push(function(f){return function(g){f._trigger("deactivate",g,this._uiHash(this))}}.call(this,this.containers[e]));if(this.containers[e].containerCache.over){c.push(function(f){return function(g){f._trigger("out",g,this._uiHash(this))}}.call(this,this.containers[e]));this.containers[e].containerCache.over=
0}}this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return false}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});
d.extend(d.ui.sortable,{version:"1.8.7"})})(jQuery);

/*!
 * jQuery UI Widget 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,
a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;
e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);

// Copyright 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
document.createElement("canvas").getContext||(function(){var s=Math,j=s.round,F=s.sin,G=s.cos,V=s.abs,W=s.sqrt,k=10,v=k/2;function X(){return this.context_||(this.context_=new H(this))}var L=Array.prototype.slice;function Y(b,a){var c=L.call(arguments,2);return function(){return b.apply(a,c.concat(L.call(arguments)))}}var M={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;a.createElement("canvas");a.attachEvent("onreadystatechange",Y(this.init_,this,a))}},init_:function(b){b.namespaces.g_vml_||
b.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");b.namespaces.g_o_||b.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!b.styleSheets.ex_canvas_){var a=b.createStyleSheet();a.owningElement.id="ex_canvas_";a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var c=b.getElementsByTagName("canvas"),d=0;for(;d<c.length;d++)this.initElement(c[d])},
initElement:function(b){if(!b.getContext){b.getContext=X;b.innerHTML="";b.attachEvent("onpropertychange",Z);b.attachEvent("onresize",$);var a=b.attributes;if(a.width&&a.width.specified)b.style.width=a.width.nodeValue+"px";else b.width=b.clientWidth;if(a.height&&a.height.specified)b.style.height=a.height.nodeValue+"px";else b.height=b.clientHeight}return b}};function Z(b){var a=b.srcElement;switch(b.propertyName){case "width":a.style.width=a.attributes.width.nodeValue+"px";a.getContext().clearRect();
break;case "height":a.style.height=a.attributes.height.nodeValue+"px";a.getContext().clearRect();break}}function $(b){var a=b.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+"px";a.firstChild.style.height=a.clientHeight+"px"}}M.init();var N=[],B=0;for(;B<16;B++){var C=0;for(;C<16;C++)N[B*16+C]=B.toString(16)+C.toString(16)}function I(){return[[1,0,0],[0,1,0],[0,0,1]]}function y(b,a){var c=I(),d=0;for(;d<3;d++){var f=0;for(;f<3;f++){var h=0,g=0;for(;g<3;g++)h+=b[d][g]*a[g][f];c[d][f]=
h}}return c}function O(b,a){a.fillStyle=b.fillStyle;a.lineCap=b.lineCap;a.lineJoin=b.lineJoin;a.lineWidth=b.lineWidth;a.miterLimit=b.miterLimit;a.shadowBlur=b.shadowBlur;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsetX;a.shadowOffsetY=b.shadowOffsetY;a.strokeStyle=b.strokeStyle;a.globalAlpha=b.globalAlpha;a.arcScaleX_=b.arcScaleX_;a.arcScaleY_=b.arcScaleY_;a.lineScale_=b.lineScale_}function P(b){var a,c=1;b=String(b);if(b.substring(0,3)=="rgb"){var d=b.indexOf("(",3),f=b.indexOf(")",d+
1),h=b.substring(d+1,f).split(",");a="#";var g=0;for(;g<3;g++)a+=N[Number(h[g])];if(h.length==4&&b.substr(3,1)=="a")c=h[3]}else a=b;return{color:a,alpha:c}}function aa(b){switch(b){case "butt":return"flat";case "round":return"round";case "square":default:return"square"}}function H(b){this.m_=I();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=k*1;this.globalAlpha=1;this.canvas=b;
var a=b.ownerDocument.createElement("div");a.style.width=b.clientWidth+"px";a.style.height=b.clientHeight+"px";a.style.overflow="hidden";a.style.position="absolute";b.appendChild(a);this.element_=a;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}var i=H.prototype;i.clearRect=function(){this.element_.innerHTML=""};i.beginPath=function(){this.currentPath_=[]};i.moveTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};
i.lineTo=function(b,a){var c=this.getCoords_(b,a);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};i.bezierCurveTo=function(b,a,c,d,f,h){var g=this.getCoords_(f,h),l=this.getCoords_(b,a),e=this.getCoords_(c,d);Q(this,l,e,g)};function Q(b,a,c,d){b.currentPath_.push({type:"bezierCurveTo",cp1x:a.x,cp1y:a.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y});b.currentX_=d.x;b.currentY_=d.y}i.quadraticCurveTo=function(b,a,c,d){var f=this.getCoords_(b,a),h=this.getCoords_(c,d),g={x:this.currentX_+
0.6666666666666666*(f.x-this.currentX_),y:this.currentY_+0.6666666666666666*(f.y-this.currentY_)};Q(this,g,{x:g.x+(h.x-this.currentX_)/3,y:g.y+(h.y-this.currentY_)/3},h)};i.arc=function(b,a,c,d,f,h){c*=k;var g=h?"at":"wa",l=b+G(d)*c-v,e=a+F(d)*c-v,m=b+G(f)*c-v,r=a+F(f)*c-v;if(l==m&&!h)l+=0.125;var n=this.getCoords_(b,a),o=this.getCoords_(l,e),q=this.getCoords_(m,r);this.currentPath_.push({type:g,x:n.x,y:n.y,radius:c,xStart:o.x,yStart:o.y,xEnd:q.x,yEnd:q.y})};i.rect=function(b,a,c,d){this.moveTo(b,
a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath()};i.strokeRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.stroke();this.currentPath_=f};i.fillRect=function(b,a,c,d){var f=this.currentPath_;this.beginPath();this.moveTo(b,a);this.lineTo(b+c,a);this.lineTo(b+c,a+d);this.lineTo(b,a+d);this.closePath();this.fill();this.currentPath_=f};i.createLinearGradient=function(b,
a,c,d){var f=new D("gradient");f.x0_=b;f.y0_=a;f.x1_=c;f.y1_=d;return f};i.createRadialGradient=function(b,a,c,d,f,h){var g=new D("gradientradial");g.x0_=b;g.y0_=a;g.r0_=c;g.x1_=d;g.y1_=f;g.r1_=h;return g};i.drawImage=function(b){var a,c,d,f,h,g,l,e,m=b.runtimeStyle.width,r=b.runtimeStyle.height;b.runtimeStyle.width="auto";b.runtimeStyle.height="auto";var n=b.width,o=b.height;b.runtimeStyle.width=m;b.runtimeStyle.height=r;if(arguments.length==3){a=arguments[1];c=arguments[2];h=g=0;l=d=n;e=f=o}else if(arguments.length==
5){a=arguments[1];c=arguments[2];d=arguments[3];f=arguments[4];h=g=0;l=n;e=o}else if(arguments.length==9){h=arguments[1];g=arguments[2];l=arguments[3];e=arguments[4];a=arguments[5];c=arguments[6];d=arguments[7];f=arguments[8]}else throw Error("Invalid number of arguments");var q=this.getCoords_(a,c),t=[];t.push(" <g_vml_:group",' coordsize="',k*10,",",k*10,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var E=[];E.push("M11=",
this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",j(q.x/k),",","Dy=",j(q.y/k),"");var p=q,z=this.getCoords_(a+d,c),w=this.getCoords_(a,c+f),x=this.getCoords_(a+d,c+f);p.x=s.max(p.x,z.x,w.x,x.x);p.y=s.max(p.y,z.y,w.y,x.y);t.push("padding:0 ",j(p.x/k),"px ",j(p.y/k),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",E.join(""),", sizingmethod='clip');")}else t.push("top:",j(q.y/k),"px;left:",j(q.x/k),"px;");t.push(' ">','<g_vml_:image src="',b.src,
'"',' style="width:',k*d,"px;"," height:",k*f,'px;"',' cropleft="',h/n,'"',' croptop="',g/o,'"',' cropright="',(n-h-l)/n,'"',' cropbottom="',(o-g-e)/o,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",t.join(""))};i.stroke=function(b){var a=[],c=P(b?this.fillStyle:this.strokeStyle),d=c.color,f=c.alpha*this.globalAlpha;a.push("<g_vml_:shape",' filled="',!!b,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',k*10," ",k*10,'"',' stroked="',
!b,'"',' path="');var h={x:null,y:null},g={x:null,y:null},l=0;for(;l<this.currentPath_.length;l++){var e=this.currentPath_[l];switch(e.type){case "moveTo":a.push(" m ",j(e.x),",",j(e.y));break;case "lineTo":a.push(" l ",j(e.x),",",j(e.y));break;case "close":a.push(" x ");e=null;break;case "bezierCurveTo":a.push(" c ",j(e.cp1x),",",j(e.cp1y),",",j(e.cp2x),",",j(e.cp2y),",",j(e.x),",",j(e.y));break;case "at":case "wa":a.push(" ",e.type," ",j(e.x-this.arcScaleX_*e.radius),",",j(e.y-this.arcScaleY_*e.radius),
" ",j(e.x+this.arcScaleX_*e.radius),",",j(e.y+this.arcScaleY_*e.radius)," ",j(e.xStart),",",j(e.yStart)," ",j(e.xEnd),",",j(e.yEnd));break}if(e){if(h.x==null||e.x<h.x)h.x=e.x;if(g.x==null||e.x>g.x)g.x=e.x;if(h.y==null||e.y<h.y)h.y=e.y;if(g.y==null||e.y>g.y)g.y=e.y}}a.push(' ">');if(b)if(typeof this.fillStyle=="object"){var m=this.fillStyle,r=0,n={x:0,y:0},o=0,q=1;if(m.type_=="gradient"){var t=m.x1_/this.arcScaleX_,E=m.y1_/this.arcScaleY_,p=this.getCoords_(m.x0_/this.arcScaleX_,m.y0_/this.arcScaleY_),
z=this.getCoords_(t,E);r=Math.atan2(z.x-p.x,z.y-p.y)*180/Math.PI;if(r<0)r+=360;if(r<1.0E-6)r=0}else{var p=this.getCoords_(m.x0_,m.y0_),w=g.x-h.x,x=g.y-h.y;n={x:(p.x-h.x)/w,y:(p.y-h.y)/x};w/=this.arcScaleX_*k;x/=this.arcScaleY_*k;var R=s.max(w,x);o=2*m.r0_/R;q=2*m.r1_/R-o}var u=m.colors_;u.sort(function(ba,ca){return ba.offset-ca.offset});var J=u.length,da=u[0].color,ea=u[J-1].color,fa=u[0].alpha*this.globalAlpha,ga=u[J-1].alpha*this.globalAlpha,S=[],l=0;for(;l<J;l++){var T=u[l];S.push(T.offset*q+
o+" "+T.color)}a.push('<g_vml_:fill type="',m.type_,'"',' method="none" focus="100%"',' color="',da,'"',' color2="',ea,'"',' colors="',S.join(","),'"',' opacity="',ga,'"',' g_o_:opacity2="',fa,'"',' angle="',r,'"',' focusposition="',n.x,",",n.y,'" />')}else a.push('<g_vml_:fill color="',d,'" opacity="',f,'" />');else{var K=this.lineScale_*this.lineWidth;if(K<1)f*=K;a.push("<g_vml_:stroke",' opacity="',f,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',aa(this.lineCap),
'"',' weight="',K,'px"',' color="',d,'" />')}a.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",a.join(""))};i.fill=function(){this.stroke(true)};i.closePath=function(){this.currentPath_.push({type:"close"})};i.getCoords_=function(b,a){var c=this.m_;return{x:k*(b*c[0][0]+a*c[1][0]+c[2][0])-v,y:k*(b*c[0][1]+a*c[1][1]+c[2][1])-v}};i.save=function(){var b={};O(this,b);this.aStack_.push(b);this.mStack_.push(this.m_);this.m_=y(I(),this.m_)};i.restore=function(){O(this.aStack_.pop(),
this);this.m_=this.mStack_.pop()};function ha(b){var a=0;for(;a<3;a++){var c=0;for(;c<2;c++)if(!isFinite(b[a][c])||isNaN(b[a][c]))return false}return true}function A(b,a,c){if(!!ha(a)){b.m_=a;if(c)b.lineScale_=W(V(a[0][0]*a[1][1]-a[0][1]*a[1][0]))}}i.translate=function(b,a){A(this,y([[1,0,0],[0,1,0],[b,a,1]],this.m_),false)};i.rotate=function(b){var a=G(b),c=F(b);A(this,y([[a,c,0],[-c,a,0],[0,0,1]],this.m_),false)};i.scale=function(b,a){this.arcScaleX_*=b;this.arcScaleY_*=a;A(this,y([[b,0,0],[0,a,
0],[0,0,1]],this.m_),true)};i.transform=function(b,a,c,d,f,h){A(this,y([[b,a,0],[c,d,0],[f,h,1]],this.m_),true)};i.setTransform=function(b,a,c,d,f,h){A(this,[[b,a,0],[c,d,0],[f,h,1]],true)};i.clip=function(){};i.arcTo=function(){};i.createPattern=function(){return new U};function D(b){this.type_=b;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}D.prototype.addColorStop=function(b,a){a=P(a);this.colors_.push({offset:b,color:a.color,alpha:a.alpha})};function U(){}G_vmlCanvasManager=
M;CanvasRenderingContext2D=H;CanvasGradient=D;CanvasPattern=U})();

if(!document.createElement("canvas").getContext){(function(){var Y=Math;var q=Y.round;var o=Y.sin;var B=Y.cos;var H=Y.abs;var N=Y.sqrt;var d=10;var f=d/2;function A(){return this.context_||(this.context_=new D(this))}var v=Array.prototype.slice;function g(j,m,p){var i=v.call(arguments,2);return function(){return j.apply(m,i.concat(v.call(arguments)))}}function ad(i){return String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function R(j){if(!j.namespaces.g_vml_){j.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!j.namespaces.g_o_){j.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!j.styleSheets.ex_canvas_){var i=j.createStyleSheet();i.owningElement.id="ex_canvas_";i.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}R(document);var e={init:function(i){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var j=i||document;j.createElement("canvas");j.attachEvent("onreadystatechange",g(this.init_,this,j))}},init_:function(p){var m=p.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(j){if(!j.getContext){j.getContext=A;R(j.ownerDocument);j.innerHTML="";j.attachEvent("onpropertychange",z);/*j.attachEvent("onresize",V);*/var i=j.attributes;if(i.width&&i.width.specified){j.style.width=i.width.nodeValue+"px"}else{j.width=j.clientWidth}if(i.height&&i.height.specified){j.style.height=i.height.nodeValue+"px"}else{j.height=j.clientHeight}}return j}};function z(j){var i=j.srcElement;switch(j.propertyName){case"width":i.getContext().clearRect();i.style.width=i.attributes.width.nodeValue+"px";i.firstChild.style.width=i.clientWidth+"px";break;case"height":i.getContext().clearRect();i.style.height=i.attributes.height.nodeValue+"px";i.firstChild.style.height=i.clientHeight+"px";break}}function V(j){var i=j.srcElement;if(i.firstChild){i.firstChild.style.width=i.clientWidth+"px";i.firstChild.style.height=i.clientHeight+"px"}}e.init();var n=[];for(var ac=0;ac<16;ac++){for(var ab=0;ab<16;ab++){n[ac*16+ab]=ac.toString(16)+ab.toString(16)}}function C(){return[[1,0,0],[0,1,0],[0,0,1]]}function J(p,m){var j=C();for(var i=0;i<3;i++){for(var af=0;af<3;af++){var Z=0;for(var ae=0;ae<3;ae++){Z+=p[i][ae]*m[ae][af]}j[i][af]=Z}}return j}function x(j,i){i.fillStyle=j.fillStyle;i.lineCap=j.lineCap;i.lineJoin=j.lineJoin;i.lineWidth=j.lineWidth;i.miterLimit=j.miterLimit;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor;i.shadowOffsetX=j.shadowOffsetX;i.shadowOffsetY=j.shadowOffsetY;i.strokeStyle=j.strokeStyle;i.globalAlpha=j.globalAlpha;i.font=j.font;i.textAlign=j.textAlign;i.textBaseline=j.textBaseline;i.arcScaleX_=j.arcScaleX_;i.arcScaleY_=j.arcScaleY_;i.lineScale_=j.lineScale_}var b={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function M(j){var p=j.indexOf("(",3);var i=j.indexOf(")",p+1);var m=j.substring(p+1,i).split(",");if(m.length==4&&j.substr(3,1)=="a"){alpha=Number(m[3])}else{m[3]=1}return m}function c(i){return parseFloat(i)/100}function u(j,m,i){return Math.min(i,Math.max(m,j))}function I(af){var m,j,i;h=parseFloat(af[0])/360%360;if(h<0){h++}s=u(c(af[1]),0,1);l=u(c(af[2]),0,1);if(s==0){m=j=i=l}else{var Z=l<0.5?l*(1+s):l+s-l*s;var ae=2*l-Z;m=a(ae,Z,h+1/3);j=a(ae,Z,h);i=a(ae,Z,h-1/3)}return"#"+n[Math.floor(m*255)]+n[Math.floor(j*255)]+n[Math.floor(i*255)]}function a(j,i,m){if(m<0){m++}if(m>1){m--}if(6*m<1){return j+(i-j)*6*m}else{if(2*m<1){return i}else{if(3*m<2){return j+(i-j)*(2/3-m)*6}else{return j}}}}function F(j){var ae,Z=1;j=String(j);if(j.charAt(0)=="#"){ae=j}else{if(/^rgb/.test(j)){var p=M(j);var ae="#",af;for(var m=0;m<3;m++){if(p[m].indexOf("%")!=-1){af=Math.floor(c(p[m])*255)}else{af=Number(p[m])}ae+=n[u(af,0,255)]}Z=p[3]}else{if(/^hsl/.test(j)){var p=M(j);ae=I(p);Z=p[3]}else{ae=b[j]||j}}}return{color:ae,alpha:Z}}var r={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var L={};function E(i){if(L[i]){return L[i]}var p=document.createElement("div");var m=p.style;try{m.font=i}catch(j){}return L[i]={style:m.fontStyle||r.style,variant:m.fontVariant||r.variant,weight:m.fontWeight||r.weight,size:m.fontSize||r.size,family:m.fontFamily||r.family}}function w(m,j){var i={};for(var af in m){i[af]=m[af]}var ae=parseFloat(j.currentStyle.fontSize),Z=parseFloat(m.size);if(typeof m.size=="number"){i.size=m.size}else{if(m.size.indexOf("px")!=-1){i.size=Z}else{if(m.size.indexOf("em")!=-1){i.size=ae*Z}else{if(m.size.indexOf("%")!=-1){i.size=(ae/100)*Z}else{if(m.size.indexOf("pt")!=-1){i.size=ae*(4/3)*Z}else{i.size=ae}}}}}i.size*=0.981;return i}function aa(i){return i.style+" "+i.variant+" "+i.weight+" "+i.size+"px "+i.family}function S(i){switch(i){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function D(j){this.m_=C();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=d*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=j;var i=j.ownerDocument.createElement("div");i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";i.style.overflow="hidden";i.style.position="absolute";j.appendChild(i);this.element_=i;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var t=D.prototype;t.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};t.beginPath=function(){this.currentPath_=[]};t.moveTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"moveTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};t.lineTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"lineTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};t.bezierCurveTo=function(m,j,ai,ah,ag,ae){var i=this.getCoords_(ag,ae);var af=this.getCoords_(m,j);var Z=this.getCoords_(ai,ah);K(this,af,Z,i)};function K(i,Z,m,j){i.currentPath_.push({type:"bezierCurveTo",cp1x:Z.x,cp1y:Z.y,cp2x:m.x,cp2y:m.y,x:j.x,y:j.y});i.currentX_=j.x;i.currentY_=j.y}t.quadraticCurveTo=function(ag,m,j,i){var af=this.getCoords_(ag,m);var ae=this.getCoords_(j,i);var ah={x:this.currentX_+2/3*(af.x-this.currentX_),y:this.currentY_+2/3*(af.y-this.currentY_)};var Z={x:ah.x+(ae.x-this.currentX_)/3,y:ah.y+(ae.y-this.currentY_)/3};K(this,ah,Z,ae)};t.arc=function(aj,ah,ai,ae,j,m){ai*=d;var an=m?"at":"wa";var ak=aj+B(ae)*ai-f;var am=ah+o(ae)*ai-f;var i=aj+B(j)*ai-f;var al=ah+o(j)*ai-f;if(ak==i&&!m){ak+=0.125}var Z=this.getCoords_(aj,ah);var ag=this.getCoords_(ak,am);var af=this.getCoords_(i,al);this.currentPath_.push({type:an,x:Z.x,y:Z.y,radius:ai,xStart:ag.x,yStart:ag.y,xEnd:af.x,yEnd:af.y})};t.rect=function(m,j,i,p){this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath()};t.strokeRect=function(m,j,i,p){var Z=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath();this.stroke();this.currentPath_=Z};t.fillRect=function(m,j,i,p){var Z=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+p);this.lineTo(m,j+p);this.closePath();this.fill();this.currentPath_=Z};t.createLinearGradient=function(j,p,i,m){var Z=new U("gradient");Z.x0_=j;Z.y0_=p;Z.x1_=i;Z.y1_=m;return Z};t.createRadialGradient=function(p,ae,m,j,Z,i){var af=new U("gradientradial");af.x0_=p;af.y0_=ae;af.r0_=m;af.x1_=j;af.y1_=Z;af.r1_=i;return af};t.drawImage=function(ao,m){var ah,af,aj,aw,am,ak,aq,ay;var ai=ao.runtimeStyle.width;var an=ao.runtimeStyle.height;ao.runtimeStyle.width="auto";ao.runtimeStyle.height="auto";var ag=ao.width;var au=ao.height;ao.runtimeStyle.width=ai;ao.runtimeStyle.height=an;if(arguments.length==3){ah=arguments[1];af=arguments[2];am=ak=0;aq=aj=ag;ay=aw=au}else{if(arguments.length==5){ah=arguments[1];af=arguments[2];aj=arguments[3];aw=arguments[4];am=ak=0;aq=ag;ay=au}else{if(arguments.length==9){am=arguments[1];ak=arguments[2];aq=arguments[3];ay=arguments[4];ah=arguments[5];af=arguments[6];aj=arguments[7];aw=arguments[8]}else{throw Error("Invalid number of arguments")}}}var ax=this.getCoords_(ah,af);var p=aq/2;var j=ay/2;var av=[];var i=10;var ae=10;av.push(" <g_vml_:group",' coordsize="',d*i,",",d*ae,'"',' coordorigin="0,0"',' style="width:',i,"px;height:",ae,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var Z=[];Z.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",q(ax.x/d),",","Dy=",q(ax.y/d),"");var at=ax;var ar=this.getCoords_(ah+aj,af);var ap=this.getCoords_(ah,af+aw);var al=this.getCoords_(ah+aj,af+aw);at.x=Y.max(at.x,ar.x,ap.x,al.x);at.y=Y.max(at.y,ar.y,ap.y,al.y);av.push("padding:0 ",q(at.x/d),"px ",q(at.y/d),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Z.join(""),", sizingmethod='clip');")}else{av.push("top:",q(ax.y/d),"px;left:",q(ax.x/d),"px;")}av.push(' ">','<g_vml_:image src="',ao.src,'"',' style="width:',d*aj,"px;"," height:",d*aw,'px"',' cropleft="',am/ag,'"',' croptop="',ak/au,'"',' cropright="',(ag-am-aq)/ag,'"',' cropbottom="',(au-ak-ay)/au,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",av.join(""))};t.stroke=function(aj){var ah=[];var Z=false;var m=10;var ak=10;ah.push("<g_vml_:shape",' filled="',!!aj,'"',' style="position:absolute;width:',m,"px;height:",ak,'px;"',' coordorigin="0,0"',' coordsize="',d*m,",",d*ak,'"',' stroked="',!aj,'"',' path="');var al=false;var ae={x:null,y:null};var ai={x:null,y:null};for(var af=0;af<this.currentPath_.length;af++){var j=this.currentPath_[af];var ag;switch(j.type){case"moveTo":ag=j;ah.push(" m ",q(j.x),",",q(j.y));break;case"lineTo":ah.push(" l ",q(j.x),",",q(j.y));break;case"close":ah.push(" x ");j=null;break;case"bezierCurveTo":ah.push(" c ",q(j.cp1x),",",q(j.cp1y),",",q(j.cp2x),",",q(j.cp2y),",",q(j.x),",",q(j.y));break;case"at":case"wa":ah.push(" ",j.type," ",q(j.x-this.arcScaleX_*j.radius),",",q(j.y-this.arcScaleY_*j.radius)," ",q(j.x+this.arcScaleX_*j.radius),",",q(j.y+this.arcScaleY_*j.radius)," ",q(j.xStart),",",q(j.yStart)," ",q(j.xEnd),",",q(j.yEnd));break}if(j){if(ae.x==null||j.x<ae.x){ae.x=j.x}if(ai.x==null||j.x>ai.x){ai.x=j.x}if(ae.y==null||j.y<ae.y){ae.y=j.y}if(ai.y==null||j.y>ai.y){ai.y=j.y}}}ah.push(' ">');if(!aj){y(this,ah)}else{G(this,ah,ae,ai)}ah.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",ah.join(""))};function y(m,ae){var j=F(m.strokeStyle);var p=j.color;var Z=j.alpha*m.globalAlpha;var i=m.lineScale_*m.lineWidth;if(i<1){Z*=i}ae.push("<g_vml_:stroke",' opacity="',Z,'"',' joinstyle="',m.lineJoin,'"',' miterlimit="',m.miterLimit,'"',' endcap="',S(m.lineCap),'"',' weight="',i,'px"',' color="',p,'" />')}function G(ao,ag,aI,ap){var ah=ao.fillStyle;var az=ao.arcScaleX_;var ay=ao.arcScaleY_;var j=ap.x-aI.x;var p=ap.y-aI.y;if(ah instanceof U){var al=0;var aD={x:0,y:0};var av=0;var ak=1;if(ah.type_=="gradient"){var aj=ah.x0_/az;var m=ah.y0_/ay;var ai=ah.x1_/az;var aK=ah.y1_/ay;var aH=ao.getCoords_(aj,m);var aG=ao.getCoords_(ai,aK);var ae=aG.x-aH.x;var Z=aG.y-aH.y;al=Math.atan2(ae,Z)*180/Math.PI;if(al<0){al+=360}if(al<0.000001){al=0}}else{var aH=ao.getCoords_(ah.x0_,ah.y0_);aD={x:(aH.x-aI.x)/j,y:(aH.y-aI.y)/p};j/=az*d;p/=ay*d;var aB=Y.max(j,p);av=2*ah.r0_/aB;ak=2*ah.r1_/aB-av}var at=ah.colors_;at.sort(function(aL,i){return aL.offset-i.offset});var an=at.length;var ar=at[0].color;var aq=at[an-1].color;var ax=at[0].alpha*ao.globalAlpha;var aw=at[an-1].alpha*ao.globalAlpha;var aC=[];for(var aF=0;aF<an;aF++){var am=at[aF];aC.push(am.offset*ak+av+" "+am.color)}ag.push('<g_vml_:fill type="',ah.type_,'"',' method="none" focus="100%"',' color="',ar,'"',' color2="',aq,'"',' colors="',aC.join(","),'"',' opacity="',aw,'"',' g_o_:opacity2="',ax,'"',' angle="',al,'"',' focusposition="',aD.x,",",aD.y,'" />')}else{if(ah instanceof T){if(j&&p){var af=-aI.x;var aA=-aI.y;ag.push("<g_vml_:fill",' position="',af/j*az*az,",",aA/p*ay*ay,'"',' type="tile"',' src="',ah.src_,'" />')}}else{var aJ=F(ao.fillStyle);var au=aJ.color;var aE=aJ.alpha*ao.globalAlpha;ag.push('<g_vml_:fill color="',au,'" opacity="',aE,'" />')}}}t.fill=function(){this.stroke(true)};t.closePath=function(){this.currentPath_.push({type:"close"})};t.getCoords_=function(p,j){var i=this.m_;return{x:d*(p*i[0][0]+j*i[1][0]+i[2][0])-f,y:d*(p*i[0][1]+j*i[1][1]+i[2][1])-f}};t.save=function(){var i={};x(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=J(C(),this.m_)};t.restore=function(){if(this.aStack_.length){x(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function k(i){return isFinite(i[0][0])&&isFinite(i[0][1])&&isFinite(i[1][0])&&isFinite(i[1][1])&&isFinite(i[2][0])&&isFinite(i[2][1])}function X(j,i,p){if(!k(i)){return}j.m_=i;if(p){var Z=i[0][0]*i[1][1]-i[0][1]*i[1][0];j.lineScale_=N(H(Z))}}t.translate=function(m,j){var i=[[1,0,0],[0,1,0],[m,j,1]];X(this,J(i,this.m_),false)};t.rotate=function(j){var p=B(j);var m=o(j);var i=[[p,m,0],[-m,p,0],[0,0,1]];X(this,J(i,this.m_),false)};t.scale=function(m,j){this.arcScaleX_*=m;this.arcScaleY_*=j;var i=[[m,0,0],[0,j,0],[0,0,1]];X(this,J(i,this.m_),true)};t.transform=function(Z,p,af,ae,j,i){var m=[[Z,p,0],[af,ae,0],[j,i,1]];X(this,J(m,this.m_),true)};t.setTransform=function(ae,Z,ag,af,p,j){var i=[[ae,Z,0],[ag,af,0],[p,j,1]];X(this,i,true)};t.drawText_=function(ak,ai,ah,an,ag){var am=this.m_,aq=1000,j=0,ap=aq,af={x:0,y:0},ae=[];var i=w(E(this.font),this.element_);var p=aa(i);var ar=this.element_.currentStyle;var Z=this.textAlign.toLowerCase();switch(Z){case"left":case"center":case"right":break;case"end":Z=ar.direction=="ltr"?"right":"left";break;case"start":Z=ar.direction=="rtl"?"right":"left";break;default:Z="left"}switch(this.textBaseline){case"hanging":case"top":af.y=i.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":af.y=-i.size/2.25;break}switch(Z){case"right":j=aq;ap=0.05;break;case"center":j=ap=aq/2;break}var ao=this.getCoords_(ai+af.x,ah+af.y);ae.push('<g_vml_:line from="',-j,' 0" to="',ap,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!ag,'" stroked="',!!ag,'" style="position:absolute;width:1px;height:1px;">');if(ag){y(this,ae)}else{G(this,ae,{x:-j,y:0},{x:ap,y:i.size})}var al=am[0][0].toFixed(3)+","+am[1][0].toFixed(3)+","+am[0][1].toFixed(3)+","+am[1][1].toFixed(3)+",0,0";var aj=q(ao.x/d)+","+q(ao.y/d);ae.push('<g_vml_:skew on="t" matrix="',al,'" ',' offset="',aj,'" origin="',j,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',ad(ak),'" style="v-text-align:',Z,";font:",ad(p),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",ae.join(""))};t.fillText=function(m,i,p,j){this.drawText_(m,i,p,j,false)};t.strokeText=function(m,i,p,j){this.drawText_(m,i,p,j,true)};t.measureText=function(m){if(!this.textMeasureEl_){var i='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",i);this.textMeasureEl_=this.element_.lastChild}var j=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(j.createTextNode(m));return{width:this.textMeasureEl_.offsetWidth}};t.clip=function(){};t.arcTo=function(){};t.createPattern=function(j,i){return new T(j,i)};function U(i){this.type_=i;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}U.prototype.addColorStop=function(j,i){i=F(i);this.colors_.push({offset:j,color:i.color,alpha:i.alpha})};function T(j,i){Q(j);switch(i){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=i;break;default:O("SYNTAX_ERR")}this.src_=j.src;this.width_=j.width;this.height_=j.height}function O(i){throw new P(i)}function Q(i){if(!i||i.nodeType!=1||i.tagName!="IMG"){O("TYPE_MISMATCH_ERR")}if(i.readyState!="complete"){O("INVALID_STATE_ERR")}}function P(i){this.code=this[i];this.message=i+": DOM Exception "+this.code}var W=P.prototype=new Error;W.INDEX_SIZE_ERR=1;W.DOMSTRING_SIZE_ERR=2;W.HIERARCHY_REQUEST_ERR=3;W.WRONG_DOCUMENT_ERR=4;W.INVALID_CHARACTER_ERR=5;W.NO_DATA_ALLOWED_ERR=6;W.NO_MODIFICATION_ALLOWED_ERR=7;W.NOT_FOUND_ERR=8;W.NOT_SUPPORTED_ERR=9;W.INUSE_ATTRIBUTE_ERR=10;W.INVALID_STATE_ERR=11;W.SYNTAX_ERR=12;W.INVALID_MODIFICATION_ERR=13;W.NAMESPACE_ERR=14;W.INVALID_ACCESS_ERR=15;W.VALIDATION_ERR=16;W.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=e;CanvasRenderingContext2D=D;CanvasGradient=U;CanvasPattern=T;DOMException=P})()};
function DocumentBaseComponent(){this.m_resultStatusCodes=null;
this.m_resultStatusMeanings=null;
this.m_includeHover=true;
this.m_pcnFavorites=true;
this.setIncludeLineNumber(true);
DocumentBaseComponent.method("InsertData",function(){if(this.getGrouperFilterEventSets()){CERN_DOCUMENT_BASE_O1.RefreshDocumentsTable(this,this.getGrouperFilterLabel(),this.getGrouperFilterEventSets());
}else{CERN_DOCUMENT_BASE_O1.GetDocumentsTable(this);
}});
DocumentBaseComponent.method("setResultStatusCodes",function(value){this.m_resultStatusCodes=value;
});
DocumentBaseComponent.method("addResultStatusCode",function(value){if(!this.m_resultStatusCodes){this.m_resultStatusCodes=[];
}this.m_resultStatusCodes.push(value);
});
DocumentBaseComponent.method("getResultStatusCodes",function(){if(this.m_resultStatusCodes){return this.m_resultStatusCodes;
}else{if(this.m_resultStatusMeanings){var resStatusCodeSet=MP_Util.GetCodeSet(8,false);
if(this.m_resultStatusMeanings&&this.m_resultStatusMeanings.length>0){for(var x=this.m_resultStatusMeanings.length;
x--;
){var code=MP_Util.GetCodeByMeaning(resStatusCodeSet,this.m_resultStatusMeanings[x]);
if(code){this.addResultStatusCode(code.codeValue);
}}}}}return this.m_resultStatusCodes;
});
DocumentBaseComponent.method("addResultStatusMeaning",function(value){if(!this.m_resultStatusMeanings){this.m_resultStatusMeanings=[];
}this.m_resultStatusMeanings.push(value);
});
DocumentBaseComponent.method("setResultStatusMeanings",function(value){this.m_resultStatusMeanings=value;
});
DocumentBaseComponent.method("isHoverEnabled",function(){return this.m_includeHover;
});
DocumentBaseComponent.method("setHoverEnabled",function(value){this.m_includeHover=value;
});
DocumentBaseComponent.method("isPcnFavEnabled",function(){return this.m_pcnFavorites;
});
DocumentBaseComponent.method("setPcnFavEnabled",function(value){this.m_pcnFavorites=value;
});
DocumentBaseComponent.method("FilterRefresh",function(label,esArray){CERN_DOCUMENT_BASE_O1.RefreshDocumentsTable(this,label,esArray);
});
DocumentBaseComponent.method("HandleSuccess",function(recordData){CERN_DOCUMENT_BASE_O1.RenderComponent(this,recordData);
});
}DocumentBaseComponent.inherits(MPageComponent);
var CERN_DOCUMENT_BASE_O1=function(){return{GetDocumentsTable:function(component){var mgr=new MP_Core.XMLCCLRequestThreadManager(CERN_DOCUMENT_BASE_O1.RenderReply,component,false);
var sendAr=[];
var request=null;
var thread=null;
var criterion=component.getCriterion();
var groups=component.getGroups();
var codes=component.getResultStatusCodes();
var events=(groups!=null&&groups.length>0)?groups[0].getEventSets():null;
var results=(codes!=null&&codes.length>0)?codes:null;
var encntrOption=(component.getScope()==2)?(criterion.encntr_id+".0"):"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",encntrOption,criterion.provider_id+".0",component.getLookbackUnits());
if(events){sendAr.push("value("+events.join(",")+")");
}else{sendAr.push("0.0");
}if(results){sendAr.push("value("+results.join(",")+")");
}else{sendAr.push("0.0");
}var unitType=component.getLookbackUnitTypeFlag();
sendAr.push(criterion.ppr_cd+".0",unitType);
request=new MP_Core.ScriptRequest(component,"ENG:MPG.DOC.O1 - load documents");
request.setProgramName("MP_RETRIEVE_DOCUMENTS_JSON");
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetDocumentData",component,request);
mgr.addThread(thread);
if(component.isPlusAddEnabled()){sendAr=[];
sendAr.push("^MINE^",criterion.provider_id);
request=new MP_Core.ScriptRequest(component,"ENG:MPG.DOC.O1 - load PCN Favs");
request.setProgramName("MP_GET_DOCUMENT_FAVORITES");
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetPcnFavorites",component,request);
mgr.addThread(thread);
}mgr.begin();
},RefreshDocumentsTable:function(component,filterLabel,filterESArray){var mgr=new MP_Core.XMLCCLRequestThreadManager(CERN_DOCUMENT_BASE_O1.RenderReply,component,false);
var sendAr=[];
var request=null;
var thread=null;
var criterion=component.getCriterion();
var codes=component.getResultStatusCodes();
var events=(filterESArray)?MP_Util.CreateParamArray(filterESArray,1):"0.0";
var results=(codes)?MP_Util.CreateParamArray(codes,1):"0.0";
var encntrOption=(component.getScope()==2)?(criterion.encntr_id+".0"):"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",encntrOption,criterion.provider_id+".0",component.getLookbackUnits());
sendAr.push(events);
sendAr.push(results);
var unitType=component.getLookbackUnitTypeFlag();
sendAr.push(criterion.ppr_cd+".0",unitType);
request=new MP_Core.ScriptRequest(component,"ENG:MPG.DOC.O1 - load documents");
request.setProgramName("MP_RETRIEVE_DOCUMENTS_JSON");
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetDocumentData",component,request);
mgr.addThread(thread);
if(component.isPlusAddEnabled()){sendAr=[];
sendAr.push("^MINE^",criterion.provider_id);
request=new MP_Core.ScriptRequest(component,"ENG:MPG.DOC.O1 - load PCN Favs");
request.setProgramName("MP_GET_DOCUMENT_FAVORITES");
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetPcnFavorites",component,request);
mgr.addThread(thread);
}mgr.begin();
},RenderReply:function(replyAr,component){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
var countText="";
var compNS=component.getStyles().getNameSpace();
var errMsg=[];
try{for(var repCnt=replyAr.length;
repCnt--;
){var reply=replyAr[repCnt];
var repStatus=reply.getStatus();
switch(reply.getName()){case"GetPcnFavorites":var favData=reply.getResponse();
if(repStatus=="S"){appendDropDown(compNS,component,favData,component.getCriterion().static_content);
}break;
case"GetDocumentData":if(repStatus=="F"){errMsg.push(reply.getError());
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("<br />")),component,"");
}else{if(repStatus=="S"){var recordData=reply.getResponse();
var sHTML="";
sHTML=CERN_DOCUMENT_BASE_O1.RenderComponent(component,recordData);
countText=MP_Util.CreateTitleText(component,recordData.DOCS.length);
MP_Util.Doc.FinalizeComponent(sHTML,component,countText);
if(component.isScrollingEnabled()&&(recordData.DOCS.length>=component.getScrollNumber())){var xNode=Util.Style.g(compNS+"-info-hdr",document.body,"DL");
if(xNode[0]){Util.Style.acss(xNode[0],"hdr-scroll");
}}}else{countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}}break;
}}}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},RenderComponent:function(component,recordData){var compNS=component.getStyles().getNameSpace();
var DocI18n=i18n.discernabu.documents_base_o1;
var codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var sHTML="";
var countText="";
var jsHTML=[];
jsHTML.push("<div class='content-hdr'><dl class='",compNS,"-info-hdr hdr'><dd class='",compNS+"-cat-hd'><span></span></dd>");
jsHTML.push("<dd class='",compNS,"-auth-hd'><span>",DocI18n.AUTHOR,"</span></dd>");
if(PathologyComponent&&(component instanceof PathologyComponent)){jsHTML.push("<dd class='",compNS,"-dt-hd'><span>",DocI18n.DATE,"</span></dd>");
}else{jsHTML.push("<dd class='",compNS,"-dt-hd'><span>",DocI18n.DATE_TIME,"</span></dd>");
}if(component.getDateFormat()==3){jsHTML.push("<dd class='",compNS+"-cat-hd'><span></span></dd><dd class='",compNS,"-auth-hd'><span></span></dd><dd class='",compNS,"-dt-hd'><span>",DocI18n.WITHIN,"</span></dd>");
}jsHTML.push("</dl></div>");
recordData.DOCS.sort(DocumentSorter);
jsHTML.push("<div class='",MP_Util.GetContentClass(component,recordData.DOCS.length),"'>");
for(var x=0,xl=recordData.DOCS.length;
x<xl;
x++){var dtHvr="",lastPrsnl="";
var author=DocI18n.UNKNOWN;
var docObj=recordData.DOCS[x];
var patId=docObj.PERSON_ID+".0";
var enctrId=docObj.ENCNTR_ID+".0";
var evntId=docObj.EVENT_ID+".0";
var docStatus=MP_Util.GetValueFromArray(docObj.RESULT_STATUS_CD,codeArray);
var doc=MP_Util.GetValueFromArray(docObj.EVENT_CD,codeArray);
var parentEventId=docObj.PARENT_EVENT_ID+".0";
var viewerType=docObj.VIEWER_TYPE;
var dateOfService=null;
var withinDateDos=null;
var dateTime=new Date();
if(docObj.EFFECTIVE_DT_TM!=""){dateTime.setISO8601(docObj.EFFECTIVE_DT_TM);
dateOfService=MP_Util.DisplayDateByOption(component,dateTime);
withinDateDos=MP_Util.CalcWithinTime(dateTime);
}else{dateOfService=DocI18n.UNKNOWN;
withinDateDos=DocI18n.UNKNOWN;
}var recentPart=GetLatestParticipation(docObj);
var authorPart=GetAuthorParticipant(docObj,codeArray);
if(authorPart){author=MP_Util.GetValueFromArray(authorPart.PRSNL_ID,personnelArray).fullName;
}if(recentPart&&recentPart.PRSNL_ID>0){lastPrsnl=MP_Util.GetValueFromArray(recentPart.PRSNL_ID,personnelArray).fullName;
var dtTm=new Date();
if(recentPart.DATE!==""){dtTm.setISO8601(recentPart.DATE);
dtHvr=df.format(dtTm,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}else{dtHvr=DocI18n.UNKNOWN;
}}else{lastPrsnl=DocI18n.UNKNOWN;
dtHvr=DocI18n.UNKNOWN;
}jsHTML.push("<dl class='",compNS,"-info'><dd class='",compNS+"-cat'><span>",MP_Util.CreateClinNoteLink(patId,enctrId,evntId,doc.display,viewerType,parentEventId),"</span>");
if(docStatus.meaning=="MODIFIED"||docStatus.meaning=="ALTERED"){jsHTML.push("<span class='res-modified'>&nbsp;</span>");
}jsHTML.push("</dd>");
jsHTML.push("<dd class='",compNS,"-auth'><span>",author,"</span></dd>");
if(component.getDateFormat()==3){jsHTML.push("<dd class='",compNS,"-dt'><span class='date-time'>",withinDateDos,"</span></dd>");
}else{jsHTML.push("<dd class='",compNS,"-dt'><span class='date-time'>",dateOfService,"</span></dd>");
}jsHTML.push("<dd class='",compNS,"-image'>");
if(docObj.IMAGE_URL!==""){var urlParam='javascript:MPAGES_SVC_EVENT("'+docObj.IMAGE_URL+'",^MINE,$PAT_PersonId$^)';
jsHTML.push("<a class='",compNS,"-image-found' href='",urlParam,"'>&nbsp;</a>");
}else{jsHTML.push("&nbsp;");
}jsHTML.push("</dd></dl>");
if(component.isHoverEnabled()){jsHTML.push("<h4 class='det-hd'><span>",DocI18n.DOCUMENTATION_DETAILS,"</span></h4><div class='hvr'><dl class='",compNS,"-det'><dt><span>",DocI18n.NAME,":</span></dt><dd class='",compNS,"-det-name'><span>",doc.display,"</span></dd><dt><span>",DocI18n.SUBJECT,":</span></dt><dd class='",compNS,"-det-subj'><span>",docObj.SUBJECT,"</span></dd><dt><span>",DocI18n.STATUS,":</span></dt><dd class='",compNS,"-det-status'><span>",MP_Util.GetValueFromArray(docObj.RESULT_STATUS_CD,codeArray).display,"</span></dd><dt><span>",DocI18n.LAST_UPDATED,":</span></dt><dd class='",compNS,"-det-dt'><span>",dtHvr,"</span></dd><dt><span>",DocI18n.LAST_UPDATED_BY,":</span></dt><dd class='",compNS,"-det-dt'><span>",lastPrsnl,"</span></dd></dl></div>");
}}jsHTML.push("</div>");
sHTML=jsHTML.join("");
return sHTML;
}};
function GetLatestParticipation(doc){var returnPart=null;
for(var x=doc.ACTION_PROVIDERS.length;
x--;
){var part=doc.ACTION_PROVIDERS[x];
if(!returnPart||part.DATE>returnPart.DATE){returnPart=part;
}}return(returnPart);
}function DocumentSorter(a,b){var aPart=GetLatestParticipation(a);
var bPart=GetLatestParticipation(b);
var aDate="";
var bDate="";
if(aPart){aDate=aPart.EFFECTIVE_DT_TM;
}if(bPart){bDate=bPart.EFFECTIVE_DT_TM;
}if(aDate>bDate){return -1;
}else{if(aDate<bDate){return 1;
}else{return 0;
}}}function GetAuthorParticipant(doc,codeArray){var returnPart=null,type_cd=null,status_cd=null,part=null,strPerform="PERFORM",strCompleted="COMPLETED";
for(var y=doc.ACTION_PROVIDERS.length;
y--;
){part=doc.ACTION_PROVIDERS[y];
type_cd=MP_Util.GetValueFromArray(part.TYPE_CD,codeArray);
status_cd=MP_Util.GetValueFromArray(part.STATUS_CD,codeArray);
if((type_cd&&type_cd.meaning===strPerform)&&(status_cd&&status_cd.meaning===strCompleted)){returnPart=part;
break;
}}return(returnPart);
}function appendDropDown(preSec,component,pcnFav,contentPath){if(preSec!="doc"){return;
}pre=component.getStyles().getId();
if((_g(pre+"Drop")!=null)&&_g(pre+"Menu")!=null){return;
}var img=Util.cep("img",{src:contentPath+"\\images\\3943_16.gif"});
var link=Util.cep("a",{className:"drop-Down",id:pre+"Drop"});
var menu=Util.cep("div",{id:pre+"Menu",className:"form-menu menu-hide"});
Util.ac(img,link);
var sec=_g(component.getStyles().getId());
var secCL=Util.Style.g("sec-hd",sec,"h2");
var secSpan=secCL[0];
Util.ac(link,secSpan);
Util.ac(menu,secSpan);
pcnFavLoad(pcnFav,component);
}function pcnFavLoad(pcnFav,component){var jsonPcnFav=pcnFav;
var docDropId=component.getStyles().getId()+"Drop";
var docDrop=_g(docDropId);
var htmlPcnFav=[];
var numId=0;
var pcn=jsonPcnFav.PRE_COMPLETED;
pcn.sort(function(obj1,obj2){function checkStrings(s1,s2){return(s1===s2)?0:((s1>s2)?1:-1);
}return checkStrings(obj1.DISPLAY.toUpperCase(),obj2.DISPLAY.toUpperCase());
});
if(!pcn[0]){htmlPcnFav.push("<div>",i18n.discernabu.documents_base_o1.DOCUMENT_FAVS,'<span class="favHidden" id="docCKI',numId,'">',i18n.DOCUMENT_FAVS,"</span></div>");
}else{var crit=component.getCriterion();
for(var j=0,l=pcn.length;
j<l;
j++){var pcNote=pcn[j];
numId=numId+1;
htmlPcnFav.push('<div><a id="doc',numId,'" href="#">',pcNote.DISPLAY,"</a>",'<span class="favHidden" id="docCKI',numId,'">',pcNote.SOURCE_IDENTIFIER,"</span>",'<span class="favHidden" id="docStyleID',numId,'">',component.getStyles().getId(),"</span>","</div>");
}}var pcnArray=htmlPcnFav.join("");
var newSpan=Util.cep("span");
newSpan.innerHTML=pcnArray;
var docMenuId=component.getStyles().getId()+"Menu";
var docMenu=_g(docMenuId);
Util.ac(newSpan,docMenu);
var docMenuList=_gbt("a",docMenu);
var dmLen=docMenuList.length;
for(var i=dmLen;
i--;
){Util.addEvent(docMenuList[i],"click",addDocDet);
}closeMenuInit(docMenu,component.getStyles().getId());
Util.addEvent(docDrop,"click",function(){if(Util.Style.ccss(Util.gns(this),"menu-hide")){_g(component.getStyles().getId()).style.zIndex=2;
Util.preventDefault();
Util.Style.rcss(Util.gns(this),"menu-hide");
}else{_g(component.getStyles().getId()).style.zIndex=1;
Util.Style.acss(Util.gns(this),"menu-hide");
}});
}function addDocDet(){try{var PowerNoteMPageUtils=window.external.DiscernObjectFactory("POWERNOTE");
MP_Util.LogDiscernInfo(null,"POWERNOTE","documentbase.js","addDocDet");
var comp={};
if(PowerNoteMPageUtils){var menuVal=Util.gns(this);
var cki=menuVal.firstChild.data;
var spanDocStyleID=Util.gns(menuVal);
for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){comp=CERN_MPageComponents[x];
var styles=comp.getStyles();
if(styles.getId()==spanDocStyleID.firstChild.data){break;
}}var crit=comp.getCriterion();
PowerNoteMPageUtils.BeginNoteFromPrecompletedNote(crit.person_id+".0",crit.encntr_id+".0",cki+".0");
CERN_DOCUMENT_BASE_O1.GetDocumentsTable(comp);
}}catch(err){alert('An error has occured calling DiscernObjectFactory("POWERNOTE"): '+err.name+" "+err.message);
return;
}}function closeMenuInit(inMenu,compId){var menuId;
var docMenuId=compId+"Menu";
if(inMenu.id==docMenuId){menuId=compId;
}if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}function menuLeave(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}}}();

function MeasurementBaseComponent(criterion){this.m_resultCount=0;
this.m_isEventSetInfo=false;
MeasurementBaseComponent.method("setResultCount",function(value){this.m_resultCount=value;
});
MeasurementBaseComponent.method("getResultCount",function(){return(this.m_resultCount);
});
MeasurementBaseComponent.method("setIncludeEventSetInfo",function(value){this.m_isEventSetInfo=value;
});
MeasurementBaseComponent.method("includeEventSetInfo",function(){return(this.m_isEventSetInfo);
});
MeasurementBaseComponent.method("InsertData",function(){getMeasurementData(this);
});
function getMeasurementData(component){var groups=component.getGroups();
if(groups&&groups.length>0){var mgr=new MP_Core.XMLCCLRequestThreadManager(component.HandleSuccess,component,true);
var criterion=component.getCriterion();
var programName="MP_RETRIEVE_N_RESULTS_JSON";
for(var x=0,xl=groups.length;
x<xl;
x++){var group=groups[x];
var sEventSets="0.0",sEventCodes="0.0";
var esInfo=(component.includeEventSetInfo())?1:0;
var sendAr=[];
var request=null;
var thread=null;
if(group instanceof MPageEventSetGroup){sEventSets=MP_Util.CreateParamArray(group.getEventSets(),1);
}else{if(group instanceof MPageEventCodeGroup){sEventCodes=MP_Util.CreateParamArray(group.getEventCodes(),1);
}else{if(group instanceof MPageSequenceGroup){var mapItems=group.getMapItems();
sEventSets=MP_Util.CreateParamArray(MP_Util.GetValueFromArray("CODE_VALUE",mapItems),1);
}else{if(group instanceof MPageGrouper){var g=group.getGroups();
var ec=[];
for(var y=0,yl=g.length;
y<yl;
y++){if(g[y] instanceof MPageEventCodeGroup){ec=ec.concat(g[y].getEventCodes());
}}sEventCodes=MP_Util.CreateParamArray(ec,1);
}else{continue;
}}}}sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.ppr_cd+".0",component.getResultCount(),"^^",sEventSets,sEventCodes,component.getLookbackUnits(),component.getLookbackUnitTypeFlag(),esInfo);
request=new MP_Core.ScriptRequest(component,"ENG:MPG.MEASBASE.O1 - load "+group.getGroupName());
request.setProgramName(programName);
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread(group.getGroupName(),component,request);
mgr.addThread(thread);
}mgr.begin();
}else{MP_Core.CreateSimpleError(component,i18n.discernabu.measurement_base_o1.ERROR_MISSING_ES_EC);
}}}MeasurementBaseComponent.inherits(MPageComponent);
var CERN_MEASUREMENT_BASE_O1=function(){return{LoadMeasurementDataMap:function(recordData,personnelArray,codeArray,sortOption){var mapObjects=[];
var results=recordData.RESULTS;
if(!codeArray){codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
}if(!personnelArray){personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
}for(var i=0,il=results.length;
i<il;
i++){var result=results[i];
if(result.CLINICAL_EVENTS.length>0){for(var j=0,jl=result.CLINICAL_EVENTS.length;
j<jl;
j++){var measureArray=[];
var mapObject=null;
if(result.EVENT_CD>0){mapObject=new MP_Core.MapObject(result.EVENT_CD,measureArray);
}else{mapObject=new MP_Core.MapObject(result.EVENT_SET_NAME,measureArray);
}var meas=result.CLINICAL_EVENTS[j];
for(var k=0,kl=meas.MEASUREMENTS.length;
k<kl;
k++){var measurement=new MP_Core.Measurement();
measurement.initFromRec(meas.MEASUREMENTS[k],codeArray);
measureArray.push(measurement);
}if(measureArray.length>0){if(sortOption){measureArray.sort(sortOption);
}else{measureArray.sort(CERN_MEASUREMENT_BASE_O1.SortByEffectiveDateDesc);
}mapObjects.push(mapObject);
}}}}return mapObjects;
},LoadMeasurementDataArray:function(recordData,personnelArray,codeArray,sortOption){var measureArray=[];
if(!codeArray){codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
}if(!personnelArray){personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
}var results=recordData.RESULTS;
for(var i=0,il=results.length;
i<il;
i++){var result=results[i];
if(result.CLINICAL_EVENTS.length>0){for(var j=0,jl=result.CLINICAL_EVENTS.length;
j<jl;
j++){var meas=result.CLINICAL_EVENTS[j];
for(var k=0,kl=meas.MEASUREMENTS.length;
k<kl;
k++){var measurement=new MP_Core.Measurement();
measurement.initFromRec(meas.MEASUREMENTS[k],codeArray);
measureArray.push(measurement);
}}}}if(measureArray.length>0){if(sortOption){measureArray.sort(sortOption);
}else{measureArray.sort(CERN_MEASUREMENT_BASE_O1.SortByEffectiveDateDesc);
}}return measureArray;
},SortByEffectiveDateDesc:function(a,b){if(a.getDateTime()>b.getDateTime()){return -1;
}else{if(a.getDateTime()<b.getDateTime()){return 1;
}}return 0;
}};
}();

/* jQuery v1.6.4 http://jquery.com/ | http://jquery.org/license */
(function(a,b){function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1
}function cr(a){if(!cg[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");
d.remove();
if(e==="none"||e===""){ch||(ch=c.createElement("iframe"),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);
if(!ci||!ch.createElement){ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ci.close()
}d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ch)
}cg[a]=e
}return cg[a]
}function cq(a,b){var c={};
f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a
});
return c
}function cp(){cn=b
}function co(){setTimeout(cp,0);
return cn=f.now()
}function cf(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")
}catch(b){}}function ce(){try{return new a.XMLHttpRequest
}catch(b){}}function b$(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));
var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;
for(g=1;
g<i;
g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])
}}l=k,k=d[g];
if(k==="*"){k=l
}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];
if(!n){p=b;
for(o in e){j=o.split(" ");
if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];
if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);
break
}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))
}}}return c
}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;
for(i in g){i in d&&(c[g[i]]=d[i])
}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))
}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);
break
}}}if(f[0] in d){j=f[0]
}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;
break
}k||(k=i)
}j=j||k
}if(j){j!==f[0]&&f.unshift(j);
return d[j]
}}function bY(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)
})
}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){bY(a+"["+e+"]",b[e],c,d)
}}else{d(a,b)
}}}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};
for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])
}e&&f.extend(!0,a,e)
}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;
var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;
for(;
i<j&&(k||!l);
i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)))
}(k||!l)&&!g["*"]&&(l=bW(a,c,d,e,"*",g));
return l
}function bV(a){return function(b,c){typeof b!="string"&&(c=b,b="*");
if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;
for(;
e<g;
e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)
}}}
}function by(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bt:bu;
if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0
});
return d+"px"
}d=bv(a,b,b);
if(d<0||d==null){d=a.style[b]||0
}d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)
});
return d+"px"
}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bd,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)
}function bk(a){f.nodeName(a,"input")?bj(a):"getElementsByTagName" in a&&f.grep(a.getElementsByTagName("input"),bj)
}function bj(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked
}}function bi(a){return"getElementsByTagName" in a?a.getElementsByTagName("*"):"querySelectorAll" in a?a.querySelectorAll("*"):[]
}function bh(a,b){var c;
if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();
if(c==="object"){b.outerHTML=a.outerHTML
}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected
}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue
}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)
}}b.removeAttribute(f.expando)
}}function bg(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);
if(d=d[c]){var g=d.events;
e=e[c]=f.extend({},d);
if(g){delete e.handle,e.events={};
for(var h in g){for(var i=0,j=g[h].length;
i<j;
i++){f.event.add(b,h+(g[h][i].namespace?".":"")+g[h][i].namespace,g[h][i],g[h][i].data)
}}}}}}function bf(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a
}function V(a,b,c){b=b||0;
if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);
return e===c
})
}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c
})
}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1
});
if(Q.test(b)){return f.filter(b,d,!c)
}b=f.filter(b,d)
}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c
})
}function U(a){return !a||!a.parentNode||a.parentNode.nodeType===11
}function M(a,b){return(a&&a!=="*"?a+".":"")+b.replace(y,"`").replace(z,"&")
}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,"events");
if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(n=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;
var s=r.live.slice(0);
for(i=0;
i<s.length;
i++){g=s[i],g.origType.replace(w,"")===a.type?q.push(g.selector):s.splice(i--,1)
}e=f(a.target).closest(q,a.currentTarget);
for(j=0,k=e.length;
j<k;
j++){m=e[j];
for(i=0;
i<s.length;
i++){g=s[i];
if(m.selector===g.selector&&(!n||n.test(g.namespace))&&!m.elem.disabled){h=m.elem,d=null;
if(g.preType==="mouseenter"||g.preType==="mouseleave"){a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&&f.contains(h,d)&&(d=h)
}(!d||d!==h)&&p.push({elem:h,handleObj:g,level:m.level})
}}}for(j=0,k=p.length;
j<k;
j++){e=p[j];
if(c&&e.level>c){break
}a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);
if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&&(b=!1);
if(a.isImmediatePropagationStopped()){break
}}}return b
}}function J(a,c,d){var e=f.extend({},d[0]);
e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()
}function D(){return !0
}function C(){return !1
}function m(a,c,d){var e=c+"defer",g=c+"queue",h=c+"mark",i=f.data(a,e,b,!0);
i&&(d==="queue"||!f.data(a,g,b,!0))&&(d==="mark"||!f.data(a,h,b,!0))&&setTimeout(function(){!f.data(a,g,b,!0)&&!f.data(a,h,b,!0)&&(f.removeData(a,e,!0),i.resolve())
},0)
}function l(a){for(var b in a){if(b!=="toJSON"){return !1
}}return !0
}function k(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(j,"-$1").toLowerCase();
d=a.getAttribute(e);
if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)
}catch(g){}f.data(a,c,d)
}else{d=b
}}return d
}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")
}catch(a){setTimeout(K,1);
return
}e.ready()
}}var e=function(a,b){return new e.fn.init(a,b,h)
},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()
},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};
e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;
if(!a){return this
}if(a.nodeType){this.context=this[0]=a,this.length=1;
return this
}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;
return this
}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];
if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);
return e.merge(this,a)
}h=c.getElementById(g[2]);
if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)
}this.length=1,this[0]=h
}this.context=c,this.selector=a;
return this
}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)
}if(e.isFunction(a)){return f.ready(a)
}a.selector!==b&&(this.selector=a.selector,this.context=a.context);
return e.makeArray(a,this)
},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length
},toArray:function(){return G.call(this,0)
},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]
},pushStack:function(a,b,c){var d=this.constructor();
e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");
return d
},each:function(a,b){return e.each(this,a,b)
},ready:function(a){e.bindReady(),B.done(a);
return this
},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)
},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)
},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))
},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)
}))
},end:function(){return this.prevObject||this.constructor(null)
},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;
typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);
for(;
j<k;
j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];
if(i===f){continue
}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)
}}}return i
},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);
return e
},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)
},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)
}e.isReady=!0;
if(a!==!0&&--e.readyWait>0){return
}B.resolveWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")
}},bindReady:function(){if(!B){B=e._Deferred();
if(c.readyState==="complete"){return setTimeout(e.ready,1)
}if(c.addEventListener){c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1)
}else{if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);
var b=!1;
try{b=a.frameElement==null
}catch(d){}c.documentElement.doScroll&&b&&K()
}}}},isFunction:function(a){return e.type(a)==="function"
},isArray:Array.isArray||function(a){return e.type(a)==="array"
},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a
},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)
},type:function(a){return a==null?String(a):J[D.call(a)]||"object"
},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1
}try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf")){return !1
}}catch(c){return !1
}var d;
for(d in a){}return d===b||E.call(a,d)
},isEmptyObject:function(a){for(var b in a){return !1
}return !0
},error:function(a){throw a
},parseJSON:function(b){if(typeof b!="string"||!b){return null
}b=e.trim(b);
if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)
}if(o.test(b.replace(p,"@").replace(q,"]").replace(r,""))){return(new Function("return "+b))()
}e.error("Invalid JSON: "+b)
},parseXML:function(c){var d,f;
try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))
}catch(g){d=b
}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);
return d
},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)
})(b)
},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)
},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()
},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);
if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break
}}}else{for(;
g<h;
){if(c.apply(a[g++],d)===!1){break
}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break
}}}else{for(;
g<h;
){if(c.call(a[g],g,a[g++])===!1){break
}}}}return a
},trim:H?function(a){return a==null?"":H.call(a)
}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")
},makeArray:function(a,b){var c=b||[];
if(a!=null){var d=e.type(a);
a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)
}return c
},inArray:function(a,b){if(!b){return -1
}if(I){return I.call(b,a)
}for(var c=0,d=b.length;
c<d;
c++){if(b[c]===a){return c
}}return -1
},merge:function(a,c){var d=a.length,e=0;
if(typeof c.length=="number"){for(var f=c.length;
e<f;
e++){a[d++]=c[e]
}}else{while(c[e]!==b){a[d++]=c[e++]
}}a.length=d;
return a
},grep:function(a,b,c){var d=[],e;
c=!!c;
for(var f=0,g=a.length;
f<g;
f++){e=!!b(a[f],f),c!==e&&d.push(a[f])
}return d
},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));
if(k){for(;
i<j;
i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)
}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)
}}return h.concat.apply([],h)
},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];
c=a,a=d
}if(!e.isFunction(a)){return b
}var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))
};
g.guid=a.guid=a.guid||g.guid||e.guid++;
return g
},access:function(a,c,d,f,g,h){var i=a.length;
if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d)
}return a
}if(d!==b){f=!h&&f&&e.isFunction(d);
for(var k=0;
k<i;
k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h)
}return a
}return i?g(a[0],c):b
},now:function(){return(new Date).getTime()
},uaMatch:function(a){a=a.toLowerCase();
var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];
return{browser:b[1]||"",version:b[2]||"0"}
},sub:function(){function a(b,c){return new a.fn.init(b,c)
}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));
return e.fn.init.call(this,d,f,b)
},a.fn.init.prototype=a.fn;
var b=a(c);
return a
},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()
}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()
}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())
});
return e
}(),g="done fail isResolved isRejected promise then always pipe".split(" "),h=[].slice;
f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;
b&&(k=b,b=0);
for(g=0,h=c.length;
g<h;
g++){i=c[g],j=f.type(i),j==="array"?e.done.apply(e,i):j==="function"&&a.push(i)
}k&&e.resolveWith(k[0],k[1])
}return this
},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;
try{while(a[0]){a.shift().apply(e,f)
}}finally{b=[e,f],c=0
}}return this
},resolve:function(){e.resolveWith(this,arguments);
return this
},isResolved:function(){return !!c||!!b
},cancel:function(){d=1,a=[];
return this
}};
return e
},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;
f.extend(b,{then:function(a,c){b.done(a).fail(c);
return this
},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)
},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],g=c[1],h;
f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&&f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+"With"](this===b?d:this,[h])
}):b[a](d[g])
})
}).promise()
},promise:function(a){if(a==null){if(d){return d
}d=a={}
}var c=g.length;
while(c--){a[g[c]]=b[g[c]]
}return a
}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);
return b
},when:function(a){function i(a){return function(c){b[a]=arguments.length>1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))
}
}var b=arguments,c=0,d=b.length,e=d,g=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred();
if(d>1){for(;
c<d;
c++){b[c]&&f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e
}e||g.resolveWith(g,b)
}else{g!==a&&g.resolveWith(g,d?[a]:[])
}return g.promise()
}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;
a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];
if(!d||!d.length||!e){return{}
}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;
try{delete a.test
}catch(v){k.deleteExpando=!1
}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1
}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});
for(t in p){o.style[t]=p[t]
}o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom" in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML="",n.removeChild(o);
if(a.attachEvent){for(t in {submit:1,change:1,focusin:1}){s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u
}}o=l=g=h=m=j=a=i=null;
return k
}(),f.boxModel=f.support.boxModel;
var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;
f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];
return !!a&&!l(a)
},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i=f.expando,j=typeof c=="string",k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&&f.expando;
if((!m||e&&m&&l[m]&&!l[m][i])&&j&&d===b){return
}m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));
if(typeof c=="object"||typeof c=="function"){e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c)
}g=l[m],e&&(g[i]||(g[i]={}),g=g[i]),d!==b&&(g[f.camelCase(c)]=d);
if(c==="events"&&!g[c]){return g[i]&&g[i].events
}j?(h=g[c],h==null&&(h=g[f.camelCase(c)])):h=g;
return h
}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;
if(!h[i]){return
}if(b){d=c?h[i][e]:h[i];
if(d){d[b]||(b=f.camelCase(b)),delete d[b];
if(!l(d)){return
}}}if(c){delete h[i][e];
if(!l(h[i])){return
}}var j=h[i][e];
f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)
}},_data:function(a,b,c){return f.data(a,b,c,!0)
},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];
if(b){return b!==!0&&a.getAttribute("classid")===b
}}return !0
}}),f.fn.extend({data:function(a,c){var d=null;
if(typeof a=="undefined"){if(this.length){d=f.data(this[0]);
if(this[0].nodeType===1){var e=this[0].attributes,g;
for(var h=0,i=e.length;
h<i;
h++){g=e[h].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))
}}}return d
}if(typeof a=="object"){return this.each(function(){f.data(this,a)
})
}var j=a.split(".");
j[1]=j[1]?"."+j[1]:"";
if(c===b){d=this.triggerHandler("getData"+j[1]+"!",[j[0]]),d===b&&this.length&&(d=f.data(this[0],a),d=k(this[0],a,d));
return d===b&&j[1]?this.data(j[0]):d
}return this.each(function(){var b=f(this),d=[j[0],c];
b.triggerHandler("setData"+j[1]+"!",d),f.data(this,a,c),b.triggerHandler("changeData"+j[1]+"!",d)
})
},removeData:function(a){return this.each(function(){f.removeData(this,a)
})
}}),f.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))
},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);
if(c){d=d||"fx";
var e=d+"mark",g=a?0:(f.data(c,e,b,!0)||1)-1;
g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,"mark"))
}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";
var e=f.data(a,c,b,!0);
d&&(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));
return e||[]
}},dequeue:function(a,b){b=b||"fx";
var c=f.queue(a,b),d=c.shift(),e;
d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){f.dequeue(a,b)
})),c.length||(f.removeData(a,b+"queue",!0),m(a,b,"queue"))
}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");
if(c===b){return f.queue(this[0],a)
}return this.each(function(){var b=f.queue(this,a,c);
a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)
})
},dequeue:function(a){return this.each(function(){f.dequeue(this,a)
})
},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";
return this.queue(b,function(){var c=this;
setTimeout(function(){f.dequeue(c,b)
},a)
})
},clearQueue:function(a){return this.queue(a||"fx",[])
},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])
}typeof a!="string"&&(c=a,a=b),a=a||"fx";
var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;
while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f._Deferred(),!0)){h++,l.done(m)
}}m();
return d.promise()
}});
var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;
f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)
},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)
})
},prop:function(a,b){return f.access(this,a,b,!0,f.prop)
},removeProp:function(a){a=f.propFix[a]||a;
return this.each(function(){try{this[a]=b,delete this[a]
}catch(c){}})
},addClass:function(a){var b,c,d,e,g,h,i;
if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))
})
}if(a&&typeof a=="string"){b=a.split(o);
for(c=0,d=this.length;
c<d;
c++){e=this[c];
if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a
}else{g=" "+e.className+" ";
for(h=0,i=b.length;
h<i;
h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")
}e.className=f.trim(g)
}}}}return this
},removeClass:function(a){var c,d,e,g,h,i,j;
if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))
})
}if(a&&typeof a=="string"||a===b){c=(a||"").split(o);
for(d=0,e=this.length;
d<e;
d++){g=this[d];
if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(n," ");
for(i=0,j=c.length;
i<j;
i++){h=h.replace(" "+c[i]+" "," ")
}g.className=f.trim(h)
}else{g.className=""
}}}}return this
},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";
if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)
})
}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(o);
while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)
}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""
}}})
},hasClass:function(a){var b=" "+a+" ";
for(var c=0,d=this.length;
c<d;
c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(n," ").indexOf(b)>-1){return !0
}}return !1
},val:function(a){var c,d,e=this[0];
if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];
if(c&&"get" in c&&(d=c.get(e,"value"))!==b){return d
}d=e.value;
return typeof d=="string"?d.replace(p,""):d==null?"":d
}return b
}var g=f.isFunction(a);
return this.each(function(d){var e=f(this),h;
if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""
})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];
if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h
}}})
}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;
return !b||b.specified?a.value:a.text
}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type==="select-one";
if(c<0){return null
}for(var h=g?c:0,i=g?c+1:e.length;
h<i;
h++){var j=e[h];
if(j.selected&&(f.support.optDisabled?!j.disabled:j.getAttribute("disabled")===null)&&(!j.parentNode.disabled||!f.nodeName(j.parentNode,"optgroup"))){b=f(j).val();
if(g){return b
}d.push(b)
}}if(g&&!d.length&&e.length){return f(e[c]).val()
}return d
},set:function(a,b){var c=f.makeArray(b);
f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0
}),c.length||(a.selectedIndex=-1);
return c
}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var g=a.nodeType;
if(!a||g===3||g===8||g===2){return b
}if(e&&c in f.attrFn){return f(a)[c](d)
}if(!("getAttribute" in a)){return f.prop(a,c,d)
}var h,i,j=g!==1||!f.isXMLDoc(a);
j&&(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&&(i=u)));
if(d!==b){if(d===null){f.removeAttr(a,c);
return b
}if(i&&"set" in i&&j&&(h=i.set(a,d,c))!==b){return h
}a.setAttribute(c,""+d);
return d
}if(i&&"get" in i&&j&&(h=i.get(a,c))!==null){return h
}h=a.getAttribute(c);
return h===null?b:h
},removeAttr:function(a,b){var c;
a.nodeType===1&&(b=f.attrFix[b]||b,f.attr(a,b,""),a.removeAttribute(b),t.test(b)&&(c=f.propFix[b]||b) in a&&(a[c]=!1))
},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")
}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;
a.setAttribute("type",b),c&&(a.value=c);
return b
}}}},value:{get:function(a,b){if(u&&f.nodeName(a,"button")){return u.get(a,b)
}return b in a?a.value:null
},set:function(a,b,c){if(u&&f.nodeName(a,"button")){return u.set(a,b,c)
}a.value=b
}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;
if(!a||e===3||e===8||e===2){return b
}var g,h,i=e!==1||!f.isXMLDoc(a);
i&&(c=f.propFix[c]||c,h=f.propHooks[c]);
return d!==b?h&&"set" in h&&(g=h.set(a,d,c))!==b?g:a[c]=d:h&&"get" in h&&(g=h.get(a,c))!==null?g:a[c]
},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");
return c&&c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&&a.href?0:b
}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d;
return f.prop(a,c)===!0||(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b
},set:function(a,b,c){var d;
b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));
return c
}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;
d=a.getAttributeNode(c);
return d&&d.nodeValue!==""?d.nodeValue:b
},set:function(a,b,d){var e=a.getAttributeNode(d);
e||(e=c.createAttribute(d),a.setAttributeNode(e));
return e.nodeValue=b+""
}},f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");
return c
}}})
})),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);
return d===null?b:d
}})
}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b
},set:function(a,b){return a.style.cssText=""+b
}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;
b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);
return null
}})),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value
}}
}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0
}}})
});
var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,"\\$&")
};
f.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1){d=C
}else{if(!d){return
}}var g,h;
d.handler&&(g=d,d=g.handler),d.guid||(d.guid=f.guid++);
var i=f._data(a);
if(!i){return
}var j=i.events,k=i.handle;
j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b
}),k.elem=a,c=c.split(" ");
var l,m=0,n;
while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(".")>-1?(n=l.split("."),l=n.shift(),h.namespace=n.slice(0).sort().join(".")):(n=[],h.namespace=""),h.type=l,h.guid||(h.guid=d.guid);
var o=j[l],p=f.event.special[l]||{};
if(!o){o=j[l]=[];
if(!p.setup||p.setup.call(a,e,n,k)===!1){a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&&a.attachEvent("on"+l,k)
}}p.add&&(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0
}a=null
}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=C);
var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&&f._data(a),t=s&&s.events;
if(!s||!t){return
}c&&c.type&&(d=c.handler,c=c.type);
if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";
for(h in t){f.event.remove(a,h+c)
}return
}c=c.split(" ");
while(h=c[k++]){r=h,q=null,l=h.indexOf(".")<0,m=[],l||(m=h.split("."),h=m.shift(),n=new RegExp("(^|\\.)"+f.map(m.slice(0).sort(),B).join("\\.(?:.*\\.)?")+"(\\.|$)")),p=t[h];
if(!p){continue
}if(!d){for(j=0;
j<p.length;
j++){q=p[j];
if(l||n.test(q.namespace)){f.event.remove(a,r,q.handler,j),p.splice(j--,1)
}}continue
}o=f.event.special[h]||{};
for(j=e||0;
j<p.length;
j++){q=p[j];
if(d.guid===q.guid){if(l||n.test(q.namespace)){e==null&&p.splice(j--,1),o.remove&&o.remove.call(a,q)
}if(e!=null){break
}}}if(p.length===0||e!=null&&p.length===1){(!o.teardown||o.teardown.call(a,m)===!1)&&f.removeEvent(a,h,s.handle),g=null,delete t[h]
}}if(f.isEmptyObject(t)){var u=s.handle;
u&&(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&&f.removeData(a,b,!0)
}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;
h.indexOf("!")>=0&&(h=h.slice(0,-1),j=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());
if(!!e&&!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join("."),c.namespace_re=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)");
if(g||!e){c.preventDefault(),c.stopPropagation()
}if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];
b&&b.events&&b.events[h]&&f.event.trigger(c,d,b.handle.elem)
});
return
}if(e.nodeType===3||e.nodeType===8){return
}c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);
var k=e,l=h.indexOf(":")<0?"on"+h:"";
do{var m=f._data(k,"handle");
c.currentTarget=k,m&&m.apply(k,d),l&&f.acceptData(k)&&k[l]&&k[l].apply(k,d)===!1&&(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&&a
}while(k&&!c.isPropagationStopped());
if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};
if((!o._default||o._default.call(e.ownerDocument,c)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)){try{l&&e[h]&&(n=e[l],n&&(e[l]=null),f.event.triggered=h,e[h]())
}catch(p){}n&&(e[l]=n),f.event.triggered=b
}}return c.result
}},handle:function(c){c=f.event.fix(c||a.event);
var d=((f._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,g=Array.prototype.slice.call(arguments,0);
g[0]=c,c.currentTarget=this;
for(var h=0,i=d.length;
h<i;
h++){var j=d[h];
if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;
var k=j.handler.apply(this,g);
k!==b&&(c.result=k,k===!1&&(c.preventDefault(),c.stopPropagation()));
if(c.isImmediatePropagationStopped()){break
}}}return c.result
},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[f.expando]){return a
}var d=a;
a=f.Event(d);
for(var e=this.props.length,g;
e;
){g=this.props[--e],a[g]=d[g]
}a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);
if(a.pageX==null&&a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;
a.pageX=a.clientX+(i&&i.scrollLeft||j&&j.scrollLeft||0)-(i&&i.clientLeft||j&&j.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||j&&j.scrollTop||0)-(i&&i.clientTop||j&&j.clientTop||0)
}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);
return a
},guid:100000000,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,M(a.origType,a.selector),f.extend({},a,{handler:L,guid:a.handler.guid}))
},remove:function(a){f.event.remove(this,M(a.origType,a.selector),a)
}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)
},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)
}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)
}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)
},f.Event=function(a,b){if(!this.preventDefault){return new f.Event(a,b)
}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?D:C):this.type=a,b&&f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0
},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;
var a=this.originalEvent;
!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)
},stopPropagation:function(){this.isPropagationStopped=D;
var a=this.originalEvent;
!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)
},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()
},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};
var E=function(a){var b=a.relatedTarget,c=!1,d=a.type;
a.type=a.data,b!==this&&(b&&(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))
},F=function(a){a.type=a.data,f.event.handle.apply(this,arguments)
};
f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&&c.selector?F:E,a)
},teardown:function(a){f.event.remove(this,b,a&&a.selector?F:E)
}}
}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,"form")){f.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";
(c==="submit"||c==="image")&&f(b).closest("form").length&&J("submit",this,arguments)
}),f.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=f.nodeName(b,"input")||f.nodeName(b,"button")?b.type:"";
(c==="text"||c==="password")&&f(b).closest("form").length&&a.keyCode===13&&J("submit",this,arguments)
})
}else{return !1
}},teardown:function(a){f.event.remove(this,".specialSubmit")
}});
if(!f.support.changeBubbles){var G,H=function(a){var b=f.nodeName(a,"input")?a.type:"",c=a.value;
b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?f.map(a.options,function(a){return a.selected
}).join("-"):"":f.nodeName(a,"select")&&(c=a.selectedIndex);
return c
},I=function(c){var d=c.target,e,g;
if(!!x.test(d.nodeName)&&!d.readOnly){e=f._data(d,"_change_data"),g=H(d),(c.type!=="focusout"||d.type!=="radio")&&f._data(d,"_change_data",g);
if(e===b||g===e){return
}if(e!=null||g){c.type="change",c.liveFired=b,f.event.trigger(c,arguments[1],d)
}}};
f.event.special.change={filters:{focusout:I,beforedeactivate:I,click:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";
(c==="radio"||c==="checkbox"||f.nodeName(b,"select"))&&I.call(this,a)
},keydown:function(a){var b=a.target,c=f.nodeName(b,"input")?b.type:"";
(a.keyCode===13&&!f.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&I.call(this,a)
},beforeactivate:function(a){var b=a.target;
f._data(b,"_change_data",H(b))
}},setup:function(a,b){if(this.type==="file"){return !1
}for(var c in G){f.event.add(this,c+".specialChange",G[c])
}return x.test(this.nodeName)
},teardown:function(a){f.event.remove(this,".specialChange");
return x.test(this.nodeName)
}},G=f.event.special.change.filters,G.focus=G.beforeactivate
}f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){var c=f.event.fix(a);
c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()
}var d=0;
f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)
},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)
}}
}),f.each(["bind","one"],function(a,c){f.fn[c]=function(a,d,e){var g;
if(typeof a=="object"){for(var h in a){this[c](h,d,a[h],e)
}return this
}if(arguments.length===2||d===!1){e=d,d=b
}c==="one"?(g=function(a){f(this).unbind(a,g);
return e.apply(this,arguments)
},g.guid=e.guid||f.guid++):g=e;
if(a==="unload"&&c!=="one"){this.one(a,d,e)
}else{for(var i=0,j=this.length;
i<j;
i++){f.event.add(this[i],a,g,d)
}}return this
}
}),f.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault){for(var c in a){this.unbind(c,a[c])
}}else{for(var d=0,e=this.length;
d<e;
d++){f.event.remove(this[d],a,b)
}}return this
},delegate:function(a,b,c,d){return this.live(b,c,d,a)
},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)
},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)
})
},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)
}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,"lastToggle"+a.guid)||0)%d;
f.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();
return b[e].apply(this,arguments)||!1
};
e.guid=c;
while(d<b.length){b[d++].guid=c
}return this.click(e)
},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)
}});
var K={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
f.each(["live","die"],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);
if(typeof a=="object"&&!a.preventDefault){for(var o in a){n[c](o,d,a[o],m)
}return this
}if(c==="die"&&!a&&g&&g.charAt(0)==="."){n.unbind(g);
return this
}if(d===!1||f.isFunction(d)){e=d||C,d=b
}a=(a||"").split(" ");
while((h=a[i++])!=null){j=w.exec(h),k="",j&&(k=j[0],h=h.replace(w,""));
if(h==="hover"){a.push("mouseenter"+k,"mouseleave"+k);
continue
}l=h,K[h]?(a.push(K[h]+k),h=h+k):h=(K[h]||h)+k;
if(c==="live"){for(var p=0,q=n.length;
p<q;
p++){f.event.add(n[p],"live."+M(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l})
}}else{n.unbind("live."+M(h,m),e)
}}return this
}
}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);
return arguments.length>0?this.bind(b,a,c):this.trigger(b)
},f.attrFn&&(f.attrFn[b]=!0)
}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;
g<h;
g++){var i=d[g];
if(i){var j=!1;
i=i[a];
while(i){if(i.sizcache===c){j=d[i.sizset];
break
}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);
if(typeof b!="string"){if(i===b){j=!0;
break
}}else{if(k.filter(b,[i]).length>0){j=i;
break
}}}i=i[a]
}d[g]=j
}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;
g<h;
g++){var i=d[g];
if(i){var j=!1;
i=i[a];
while(i){if(i.sizcache===c){j=d[i.sizset];
break
}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);
if(i.nodeName.toLowerCase()===b){j=i;
break
}i=i[a]
}d[g]=j
}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;
[0,0].sort(function(){h=!1;
return 0
});
var k=function(b,d,f,g){f=f||[],d=d||c;
var h=d;
if(d.nodeType!==1&&d.nodeType!==9){return[]
}if(!b||typeof b!="string"){return f
}var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;
do{a.exec(""),i=a.exec(y);
if(i){y=i[3],x.push(i[1]);
if(i[2]){o=i[3];
break
}}}while(i);
if(x.length>1&&m.exec(b)){if(x.length===2&&l.relative[x[0]]){j=v(x[0]+x[1],d)
}else{j=l.relative[x[0]]?[d]:k(x.shift(),d);
while(x.length){b=x.shift(),l.relative[b]&&(b+=x.shift()),j=v(b,j)
}}}else{!g&&x.length>1&&d.nodeType===9&&!w&&l.match.ID.test(x[0])&&!l.match.ID.test(x[x.length-1])&&(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);
if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length>0?n=p(j):u=!1;
while(x.length){r=x.pop(),s=r,l.relative[r]?s=x.pop():r="",s==null&&(s=d),l.relative[r](n,s,w)
}}else{n=x=[]
}}n||(n=j),n||k.error(r||b);
if(e.call(n)==="[object Array]"){if(!u){f.push.apply(f,n)
}else{if(d&&d.nodeType===1){for(t=0;
n[t]!=null;
t++){n[t]&&(n[t]===!0||n[t].nodeType===1&&k.contains(d,n[t]))&&f.push(j[t])
}}else{for(t=0;
n[t]!=null;
t++){n[t]&&n[t].nodeType===1&&f.push(j[t])
}}}}else{p(n,f)
}o&&(k(o,h,f,g),k.uniqueSort(f));
return f
};
k.uniqueSort=function(a){if(r){g=h,a.sort(r);
if(g){for(var b=1;
b<a.length;
b++){a[b]===a[b-1]&&a.splice(b--,1)
}}}return a
},k.matches=function(a,b){return k(a,null,null,b)
},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0
},k.find=function(a,b,c){var d;
if(!a){return[]
}for(var e=0,f=l.order.length;
e<f;
e++){var g,h=l.order[e];
if(g=l.leftMatch[h].exec(a)){var j=g[1];
g.splice(1,1);
if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);
if(d!=null){a=a.replace(l.match[h],"");
break
}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);
return{set:d,expr:a}
},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);
while(a&&c.length){for(var n in l.filter){if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];
g=!1,f.splice(1,1);
if(r.substr(r.length-1)==="\\"){continue
}j===i&&(i=[]);
if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);
if(!f){g=o=!0
}else{if(f===!0){continue
}}}if(f){for(var s=0;
(p=j[s])!=null;
s++){if(p){o=q(p,f,s,j);
var t=e^!!o;
d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)
}}}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");
if(!g){return[]
}break
}}}if(a===h){if(g==null){k.error(a)
}else{break
}}h=a
}return j
},k.error=function(a){throw"Syntax error, unrecognized expression: "+a
};
var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")
},type:function(a){return a.getAttribute("type")
}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;
d&&(b=b.toLowerCase());
for(var f=0,g=a.length,h;
f<g;
f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b
}}e&&k.filter(b,a,!0)
},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;
if(d&&!j.test(b)){b=b.toLowerCase();
for(;
e<f;
e++){c=a[e];
if(c){var g=c.parentNode;
a[e]=g.nodeName.toLowerCase()===b?g:!1
}}}else{for(;
e<f;
e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)
}d&&k.filter(b,a,!0)
}},"":function(a,b,c){var e,f=d++,g=u;
typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("parentNode",b,f,a,e,c)
},"~":function(a,b,c){var e,f=d++,g=u;
typeof b=="string"&&!j.test(b)&&(b=b.toLowerCase(),e=b,g=t),g("previousSibling",b,f,a,e,c)
}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);
return d&&d.parentNode?[d]:[]
}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);
for(var e=0,f=d.length;
e<f;
e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])
}return c.length===0?null:c
}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])
}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";
if(f){return a
}for(var g=0,h;
(h=b[g])!=null;
g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))
}return !1
},ID:function(a){return a[1].replace(i,"")
},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()
},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");
var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);
a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0
}else{a[2]&&k.error(a[0])
}a[0]=d++;
return a
},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");
!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");
return a
},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=k(b[3],null,null,c)
}else{var g=k.filter(b[3],c,d,!0^f);
d||e.push.apply(e,g);
return !1
}}else{if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0])){return !0
}}return b
},POS:function(a){a.unshift(!0);
return a
}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"
},disabled:function(a){return a.disabled===!0
},checked:function(a){return a.checked===!0
},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;
return a.selected===!0
},parent:function(a){return !!a.firstChild
},empty:function(a){return !a.firstChild
},has:function(a,b,c){return !!k(c[3],a).length
},header:function(a){return/h\d/i.test(a.nodeName)
},text:function(a){var b=a.getAttribute("type"),c=a.type;
return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)
},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type
},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type
},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type
},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type
},submit:function(a){var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&"submit"===a.type
},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type
},reset:function(a){var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&"reset"===a.type
},button:function(a){var b=a.nodeName.toLowerCase();
return b==="input"&&"button"===a.type||b==="button"
},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)
},focus:function(a){return a===a.ownerDocument.activeElement
}},setFilters:{first:function(a,b){return b===0
},last:function(a,b,c,d){return b===d.length-1
},even:function(a,b){return b%2===0
},odd:function(a,b){return b%2===1
},lt:function(a,b,c){return b<c[3]-0
},gt:function(a,b,c){return b>c[3]-0
},nth:function(a,b,c){return c[3]-0===b
},eq:function(a,b,c){return c[3]-0===b
}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];
if(f){return f(a,c,b,d)
}if(e==="contains"){return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0
}if(e==="not"){var g=b[3];
for(var h=0,i=g.length;
h<i;
h++){if(g[h]===a){return !1
}}return !0
}k.error(e)
},CHILD:function(a,b){var c=b[1],d=a;
switch(c){case"only":case"first":while(d=d.previousSibling){if(d.nodeType===1){return !1
}}if(c==="first"){return !0
}d=a;
case"last":while(d=d.nextSibling){if(d.nodeType===1){return !1
}}return !0;
case"nth":var e=b[2],f=b[3];
if(e===1&&f===0){return !0
}var g=b[0],h=a.parentNode;
if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;
for(d=h.firstChild;
d;
d=d.nextSibling){d.nodeType===1&&(d.nodeIndex=++i)
}h.sizcache=g
}var j=a.nodeIndex-f;
return e===0?j===0:j%e===0&&j/e>=0
}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b
},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b
},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1
},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];
return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1
},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];
if(f){return f(a,c,b,d)
}}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)
};
for(var o in l.match){l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n))
}var p=function(a,b){a=Array.prototype.slice.call(a,0);
if(b){b.push.apply(b,a);
return b
}return a
};
try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType
}catch(q){p=function(a,b){var c=0,d=b||[];
if(e.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)
}else{if(typeof a.length=="number"){for(var f=a.length;
c<f;
c++){d.push(a[c])
}}else{for(;
a[c];
c++){d.push(a[c])
}}}return d
}
}var r,s;
c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;
return 0
}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1
}return a.compareDocumentPosition(b)&4?-1:1
}:(r=function(a,b){if(a===b){g=!0;
return 0
}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex
}var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;
if(h===i){return s(a,b)
}if(!h){return -1
}if(!i){return 1
}while(j){e.unshift(j),j=j.parentNode
}j=i;
while(j){f.unshift(j),j=j.parentNode
}c=e.length,d=f.length;
for(var k=0;
k<c&&k<d;
k++){if(e[k]!==f[k]){return s(e[k],f[k])
}}return k===c?s(a,f[k],-1):s(e[k],b,1)
},s=function(a,b,c){if(a===b){return c
}var d=a.nextSibling;
while(d){if(d===b){return -1
}d=d.nextSibling
}return 1
}),k.getText=function(a){var b="",c;
for(var d=0;
a[d];
d++){c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes))
}return b
},function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;
a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);
return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]
}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");
return a.nodeType===1&&c&&c.nodeValue===b
}),e.removeChild(a),e=a=null
}(),function(){var a=c.createElement("div");
a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);
if(a[1]==="*"){var d=[];
for(var e=0;
c[e];
e++){c[e].nodeType===1&&d.push(c[e])
}c=d
}return c
}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)
}),a=null
}(),c.querySelectorAll&&function(){var a=k,b=c.createElement("div"),d="__sizzle__";
b.innerHTML="<p class='TEST'></p>";
if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,e,f,g){e=e||c;
if(!g&&!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);
if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return p(e.getElementsByTagName(b),f)
}if(h[2]&&l.find.CLASS&&e.getElementsByClassName){return p(e.getElementsByClassName(h[2]),f)
}}if(e.nodeType===9){if(b==="body"&&e.body){return p([e.body],f)
}if(h&&h[3]){var i=e.getElementById(h[3]);
if(!i||!i.parentNode){return p([],f)
}if(i.id===h[3]){return p([i],f)
}}try{return p(e.querySelectorAll(b),f)
}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var m=e,n=e.getAttribute("id"),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);
n?o=o.replace(/'/g,"\\$&"):e.setAttribute("id",o),r&&q&&(e=e.parentNode);
try{if(!r||q){return p(e.querySelectorAll("[id='"+o+"'] "+b),f)
}}catch(s){}finally{n||m.removeAttribute("id")
}}}}return a(b,e,f,g)
};
for(var e in a){k[e]=a[e]
}b=null
}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;
if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;
try{b.call(c.documentElement,"[test!='']:sizzle")
}catch(f){e=!0
}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");
if(!k.isXML(a)){try{if(e||!l.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);
if(f||!d||a.document&&a.document.nodeType!==11){return f
}}}catch(g){}}return k(c,null,null,[a]).length>0
}
}}(),function(){var a=c.createElement("div");
a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";
if(a.getElementsByClassName("e").length===1){return
}l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])
}},a=null
}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)
}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)
}:k.contains=function(){return !1
},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;
return b?b.nodeName!=="HTML":!1
};
var v=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;
while(c=l.match.PSEUDO.exec(a)){e+=c[0],a=a.replace(l.match.PSEUDO,"")
}a=l.relative[a]?a+"*":a;
for(var g=0,h=f.length;
g<h;
g++){k(a,f[g],d)
}return k.filter(e,d)
};
f.find=k,f.expr=k.selectors,f.expr[":"]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains
}();
var N=/Until$/,O=/^(?:parents|prevUntil|prevAll)/,P=/,/,Q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,S=f.expr.match.POS,T={children:!0,contents:!0,next:!0,prev:!0};
f.fn.extend({find:function(a){var b=this,c,d;
if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;
c<d;
c++){if(f.contains(b[c],this)){return !0
}}})
}var e=this.pushStack("","find",a),g,h,i;
for(c=0,d=this.length;
c<d;
c++){g=e.length,f.find(a,this[c],e);
if(c>0){for(h=g;
h<e.length;
h++){for(i=0;
i<g;
i++){if(e[i]===e[h]){e.splice(h--,1);
break
}}}}}return e
},has:function(a){var b=f(a);
return this.filter(function(){for(var a=0,c=b.length;
a<c;
a++){if(f.contains(this,b[a])){return !0
}}})
},not:function(a){return this.pushStack(V(this,a,!1),"not",a)
},filter:function(a){return this.pushStack(V(this,a,!0),"filter",a)
},is:function(a){return !!a&&(typeof a=="string"?f.filter(a,this).length>0:this.filter(a).length>0)
},closest:function(a,b){var c=[],d,e,g=this[0];
if(f.isArray(a)){var h,i,j={},k=1;
if(g&&a.length){for(d=0,e=a.length;
d<e;
d++){i=a[d],j[i]||(j[i]=S.test(i)?f(i,b||this.context):i)
}while(g&&g.ownerDocument&&g!==b){for(i in j){h=j[i],(h.jquery?h.index(g)>-1:f(g).is(h))&&c.push({selector:i,elem:g,level:k})
}g=g.parentNode,k++
}}return c
}var l=S.test(a)||typeof a!="string"?f(a,b||this.context):0;
for(d=0,e=this.length;
d<e;
d++){g=this[d];
while(g){if(l?l.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);
break
}g=g.parentNode;
if(!g||!g.ownerDocument||g===b||g.nodeType===11){break
}}}c=c.length>1?f.unique(c):c;
return this.pushStack(c,"closest",a)
},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1
}if(typeof a=="string"){return f.inArray(this[0],f(a))
}return f.inArray(a.jquery?a[0]:a,this)
},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);
return this.pushStack(U(c[0])||U(d[0])?d:f.unique(d))
},andSelf:function(){return this.add(this.prevObject)
}}),f.each({parent:function(a){var b=a.parentNode;
return b&&b.nodeType!==11?b:null
},parents:function(a){return f.dir(a,"parentNode")
},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)
},next:function(a){return f.nth(a,2,"nextSibling")
},prev:function(a){return f.nth(a,2,"previousSibling")
},nextAll:function(a){return f.dir(a,"nextSibling")
},prevAll:function(a){return f.dir(a,"previousSibling")
},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)
},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)
},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)
},children:function(a){return f.sibling(a.firstChild)
},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)
}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=R.call(arguments);
N.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!T[a]?f.unique(e):e,(this.length>1||P.test(d))&&O.test(a)&&(e=e.reverse());
return this.pushStack(e,a,g.join(","))
}
}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");
return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)
},dir:function(a,c,d){var e=[],g=a[c];
while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]
}return e
},nth:function(a,b,c,d){b=b||1;
var e=0;
for(;
a;
a=a[c]){if(a.nodeType===1&&++e===b){break
}}return a
},sibling:function(a,b){var c=[];
for(;
a;
a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)
}return c
}});
var W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|object|embed|option|style)/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,bc=/\/(java|ecma)script/i,bd=/^\s*<!(?:\[CDATA\[|\-\-)/,be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,f.support.htmlSerialize||(be._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c.text(a.call(this,b,c.text()))
})
}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))
}return f.text(this)
},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))
})
}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);
this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;
while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild
}return a
}).append(this)
}return this
},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))
})
}return this.each(function(){var b=f(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)
})
},wrap:function(a){return this.each(function(){f(this).wrapAll(a)
})
},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)
}).end()
},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)
})
},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)
})
},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)
})
}if(arguments.length){var a=f(arguments[0]);
a.push.apply(a,this.toArray());
return this.pushStack(a,"before",arguments)
}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)
})
}if(arguments.length){var a=this.pushStack(this,"after",arguments);
a.push.apply(a,f(arguments[0]).toArray());
return a
}},remove:function(a,b){for(var c=0,d;
(d=this[c])!=null;
c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)
}}return this
},empty:function(){for(var a=0,b;
(b=this[a])!=null;
a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));
while(b.firstChild){b.removeChild(b.firstChild)
}}return this
},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;
return this.map(function(){return f.clone(this,a,b)
})
},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null
}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!be[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");
try{for(var c=0,d=this.length;
c<d;
c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)
}}catch(e){this.empty().append(a)
}}else{f.isFunction(a)?this.each(function(b){var c=f(this);
c.html(a.call(this,b,c.html()))
}):this.empty().append(a)
}return this
},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();
c.replaceWith(a.call(this,b,d))
})
}typeof a!="string"&&(a=f(a).detach());
return this.each(function(){var b=this.nextSibling,c=this.parentNode;
f(this).remove(),b?f(b).before(a):f(c).append(a)
})
}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this
},detach:function(a){return this.remove(a,!0)
},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];
if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bb.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)
})
}if(f.isFunction(j)){return this.each(function(e){var g=f(this);
a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)
})
}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;
if(g){c=c&&f.nodeName(g,"tr");
for(var l=0,m=this.length,n=m-1;
l<m;
l++){d.call(c?bf(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)
}}k.length&&f.each(k,bl)
}return this
}}),f.buildFragment=function(a,b,d){var e,g,h,i;
b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&i===c&&a[0].charAt(0)==="<"&&!ba.test(a[0])&&(f.support.checkClone||!bb.test(a[0]))&&(g=!0,h=f.fragments[a[0]],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[a[0]]=h?e:1);
return{fragment:e,cacheable:g}
},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;
if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);
return this
}for(var h=0,i=e.length;
h<i;
h++){var j=(h>0?this.clone(!0):this).get();
f(e[h])[b](j),d=d.concat(j)
}return this.pushStack(d,a,e.selector)
}
}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;
if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bh(a,d),e=bi(a),g=bi(d);
for(h=0;
e[h];
++h){g[h]&&bh(e[h],g[h])
}}if(b){bg(a,d);
if(c){e=bi(a),g=bi(d);
for(h=0;
e[h];
++h){bg(e[h],g[h])
}}}e=g=null;
return d
},clean:function(a,b,d,e){var g;
b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);
var h=[],i;
for(var j=0,k;
(k=a[j])!=null;
j++){typeof k=="number"&&(k+="");
if(!k){continue
}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k)
}else{k=k.replace(Y,"<$1></$2>");
var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=be[l]||be._default,n=m[0],o=b.createElement("div");
o.innerHTML=m[1]+k+m[2];
while(n--){o=o.lastChild
}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];
for(i=q.length-1;
i>=0;
--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])
}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes
}}var r;
if(!f.support.appendChecked){if(k[0]&&typeof(r=k.length)=="number"){for(i=0;
i<r;
i++){bk(k[i])
}}else{bk(k)
}}k.nodeType?h.push(k):h=f.merge(h,k)
}if(d){g=function(a){return !a.type||bc.test(a.type)
};
for(j=0;
h[j];
j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j])
}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);
h.splice.apply(h,[j+1,0].concat(s))
}d.appendChild(h[j])
}}}return h
},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;
for(var i=0,j;
(j=a[i])!=null;
i++){if(j.nodeName&&f.noData[j.nodeName.toLowerCase()]){continue
}c=j[f.expando];
if(c){b=d[c]&&d[c][e];
if(b&&b.events){for(var k in b.events){g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle)
}b.handle&&(b.handle.elem=null)
}h?delete j[f.expando]:j.removeAttribute&&j.removeAttribute(f.expando),delete d[c]
}}}});
var bm=/alpha\([^)]*\)/i,bn=/opacity=([^)]*)/,bo=/([A-Z]|^ms)/g,bp=/^-?\d+(?:px)?$/i,bq=/^-?\d/,br=/^([\-+])=([\-+.\de]+)/,bs={position:"absolute",visibility:"hidden",display:"block"},bt=["Left","Right"],bu=["Top","Bottom"],bv,bw,bx;
f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this
}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)
})
},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bv(a,"opacity","opacity");
return c===""?"1":c
}return a.style.opacity
}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];
c=f.cssProps[i]||i;
if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g
}return j[c]
}h=typeof d,h==="string"&&(g=br.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");
if(d==null||h==="number"&&isNaN(d)){return
}h==="number"&&!f.cssNumber[i]&&(d+="px");
if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d
}catch(l){}}}},css:function(a,c,d){var e,g;
c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");
if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e
}if(bv){return bv(a,c)
}},swap:function(a,b,c){var d={};
for(var e in b){d[e]=a.style[e],a.style[e]=b[e]
}c.call(a);
for(e in b){a.style[e]=d[e]
}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;
if(c){if(a.offsetWidth!==0){return by(a,b,d)
}f.swap(a,bs,function(){e=by(a,b,d)
});
return e
}},set:function(a,b){if(!bp.test(b)){return b
}b=parseFloat(b);
if(b>=0){return b+"px"
}}}
}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bn.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""
},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNaN(b)?"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";
c.zoom=1;
if(b>=1&&f.trim(g.replace(bm,""))===""){c.removeAttribute("filter");
if(d&&!d.filter){return
}}c.filter=bm.test(g)?g.replace(bm,e):g+" "+e
}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;
f.swap(a,{display:"inline-block"},function(){b?c=bv(a,"margin-right","marginRight"):c=a.style.marginRight
});
return c
}})
}),c.defaultView&&c.defaultView.getComputedStyle&&(bw=function(a,c){var d,e,g;
c=c.replace(bo,"-$1").toLowerCase();
if(!(e=a.ownerDocument.defaultView)){return b
}if(g=e.getComputedStyle(a,null)){d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c))
}return d
}),c.documentElement.currentStyle&&(bx=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;
!bp.test(d)&&bq.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));
return d===""?"auto":d
}),bv=bw||bx,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;
return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style.display||f.css(a,"display"))==="none"
},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)
});
var bz=/%20/g,bA=/\[\]$/,bB=/\r?\n/g,bC=/#.*$/,bD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bE=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bF=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bG=/^(?:GET|HEAD)$/,bH=/^\/\//,bI=/\?/,bJ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bK=/^(?:select|textarea)/i,bL=/\s+/,bM=/([?&])_=[^&]*/,bN=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bO=f.fn.load,bP={},bQ={},bR,bS,bT=["*/"]+["*"];
try{bR=e.href
}catch(bU){bR=c.createElement("a"),bR.href="",bR=bR.href
}bS=bN.exec(bR.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bO){return bO.apply(this,arguments)
}if(!this.length){return this
}var e=a.indexOf(" ");
if(e>=0){var g=a.slice(e,a.length);
a=a.slice(0,e)
}var h="GET";
c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));
var i=this;
f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a
}),i.html(g?f("<div>").append(c.replace(bJ,"")).find(g):c)),d&&i.each(d,[c,b,a])
}});
return this
},serialize:function(){return f.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this
}).filter(function(){return this.name&&!this.disabled&&(this.checked||bK.test(this.nodeName)||bE.test(this.type))
}).map(function(a,b){var c=f(this).val();
return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bB,"\r\n")}
}):{name:b.name,value:c.replace(bB,"\r\n")}
}).get()
}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)
}
}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);
return f.ajax({type:c,url:a,data:d,success:e,dataType:g})
}
}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")
},getJSON:function(a,b,c){return f.get(a,b,c,"json")
},ajaxSetup:function(a,b){b?bX(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),bX(a,b);
return a
},ajaxSettings:{url:bR,isLocal:bF.test(bS[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bT},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bV(bP),ajaxTransport:bV(bQ),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;
var o,r,u,w=c,x=l?bZ(d,v,l):b,y,z;
if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y
}if(z=v.getResponseHeader("Etag")){f.etag[k]=z
}}if(a===304){w="notmodified",o=!0
}else{try{r=b$(d,x),w="success",o=!0
}catch(A){w="parsererror",u=A
}}}else{u=w;
if(!w||a){w="error",a<0&&(a=0)
}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.resolveWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))
}}typeof a=="object"&&(c=a,a=b),c=c||{};
var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();
a=m[c]=m[c]||a,l[a]=b
}return this
},getAllResponseHeaders:function(){return s===2?n:null
},getResponseHeader:function(a){var c;
if(s===2){if(!o){o={};
while(c=bD.exec(n)){o[c[1].toLowerCase()]=c[2]
}}c=o[a.toLowerCase()]
}return c===b?null:c
},overrideMimeType:function(a){s||(d.mimeType=a);
return this
},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);
return this
}};
h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;
if(s<2){for(b in a){j[b]=[j[b],a[b]]
}}else{b=a[v.status],v.then(b,b)
}}return this
},d.url=((a||d.url)+"").replace(bC,"").replace(bH,bS[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bL),d.crossDomain==null&&(r=bN.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bS[1]&&r[2]==bS[2]&&(r[3]||(r[1]==="http:"?80:443))==(bS[3]||(bS[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bW(bP,d,c,v);
if(s===2){return !1
}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bG.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");
if(!d.hasContent){d.data&&(d.url+=(bI.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;
if(d.cache===!1){var x=f.now(),y=d.url.replace(bM,"$1_="+x);
d.url=y+(y===d.url?(bI.test(d.url)?"&":"?")+"_="+x:"")
}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bT+"; q=0.01":""):d.accepts["*"]);
for(u in d.headers){v.setRequestHeader(u,d.headers[u])
}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();
return !1
}for(u in {success:1,error:1,complete:1}){v[u](d[u])
}p=bW(bQ,d,c,v);
if(!p){w(-1,"No Transport")
}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")
},d.timeout));
try{s=1,p.send(l,w)
}catch(z){s<2?w(-1,z):f.error(z)
}}return v
},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)
};
c===b&&(c=f.ajaxSettings.traditional);
if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)
})
}else{for(var g in a){bY(g,a[g],c,e)
}}return d.join("&").replace(bz,"+")
}}),f.extend({active:0,lastModified:{},etag:{}});
var b_=f.now(),ca=/(\=)\?(&|$)|\?\?/i;
f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+b_++
}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";
if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ca.test(b.url)||e&&ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";
b.jsonp!==!1&&(j=j.replace(ca,l),b.url===j&&(e&&(k=k.replace(ca,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]
},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])
}),b.converters["script json"]=function(){g||f.error(h+" was not called");
return g[0]
},b.dataTypes[0]="json";
return"script"
}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);
return a
}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)
}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;
return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")
}},e.insertBefore(d,e.firstChild)
},abort:function(){d&&d.onload(0,1)
}}
}});
var cb=a.ActiveXObject?function(){for(var a in cd){cd[a](0,1)
}}:!1,cc=0,cd;
f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ce()||cf()
}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})
}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;
return{send:function(e,g){var h=c.xhr(),i,j;
c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);
if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]
}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");
try{for(j in e){h.setRequestHeader(j,e[j])
}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;
try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cb&&delete cd[i]);
if(e){h.readyState!==4&&h.abort()
}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;
try{k=h.statusText
}catch(o){k=""
}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)
}}}catch(p){e||g(-1,p)
}m&&g(j,k,m,l)
},!c.async||h.readyState===4?d():(i=++cc,cb&&(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)
},abort:function(){d&&d(0,1)
}}
}});
var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cn;
f.fn.extend({show:function(a,b,c){var d,e;
if(a||a===0){return this.animate(cq("show",3),a,b,c)
}for(var g=0,h=this.length;
g<h;
g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cr(d.nodeName)))
}for(g=0;
g<h;
g++){d=this[g];
if(d.style){e=d.style.display;
if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""
}}}return this
},hide:function(a,b,c){if(a||a===0){return this.animate(cq("hide",3),a,b,c)
}for(var d=0,e=this.length;
d<e;
d++){if(this[d].style){var g=f.css(this[d],"display");
g!=="none"&&!f._data(this[d],"olddisplay")&&f._data(this[d],"olddisplay",g)
}}for(d=0;
d<e;
d++){this[d].style&&(this[d].style.display="none")
}return this
},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";
f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");
f(this)[b?"show":"hide"]()
}):this.animate(cq("toggle",3),a,b,c);
return this
},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)
},animate:function(a,b,c,d){var e=f.speed(b,c,d);
if(f.isEmptyObject(a)){return this.each(e.complete,[!1])
}a=f.extend({},a);
return this[e.queue===!1?"each":"queue"](function(){e.queue===!1&&f._mark(this);
var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;
b.animatedProperties={};
for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";
if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)
}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(f.support.inlineBlockNeedsLayout?(j=cr(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))
}b.overflow!=null&&(this.style.overflow="hidden");
for(i in a){k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h==="toggle"?d?"show":"hide":h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?"":"px"),o!=="px"&&(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""))
}return !0
})
},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=f.timers,c=a.length;
b||f._unmark(!0,this);
while(c--){a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))
}}),b||this.dequeue();
return this
}}),f.each({slideDown:cq("show",1),slideUp:cq("hide",1),slideToggle:cq("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)
}
}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};
d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&&f._unmark(this)
};
return d
},easing:{linear:function(a,b,c,d){return c+d*a
},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c
}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}
}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)
},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]
}var a,b=f.css(this.elem,this.prop);
return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a
},custom:function(a,b,c){function g(a){return d.step(a)
}var d=this,e=f.fx;
this.startTime=cn||co(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&&f.timers.push(g)&&!cl&&(cl=setInterval(e.tick,e.interval))
},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()
},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)
},step:function(a){var b=cn||co(),c=!0,d=this.elem,e=this.options,g,h;
if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;
for(g in e.animatedProperties){e.animatedProperties[g]!==!0&&(c=!1)
}if(c){e.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]
}),e.hide&&f(d).hide();
if(e.hide||e.show){for(var i in e.animatedProperties){f.style(d,i,e.orig[i])
}}e.complete.call(d)
}return !1
}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();
return !0
}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;
b<a.length;
++b){a[b]()||a.splice(b--,1)
}a.length||f.fx.stop()
},interval:13,stop:function(){clearInterval(cl),cl=null
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)
},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now
}}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem
}).length
});
var cs=/^t(?:able|d|h)$/i,ct=/^(?:body|html)$/i;
"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;
if(a){return this.each(function(b){f.offset.setOffset(this,a,b)
})
}if(!b||!b.ownerDocument){return null
}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)
}try{c=b.getBoundingClientRect()
}catch(d){}var e=b.ownerDocument,g=e.documentElement;
if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0}
}var h=e.body,i=cu(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;
return{top:n,left:o}
}:f.fn.offset=function(a){var b=this[0];
if(a){return this.each(function(b){f.offset.setOffset(this,a,b)
})
}if(!b||!b.ownerDocument){return null
}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)
}f.offset.initialize();
var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;
while((b=b.parentNode)&&b!==i&&b!==h){if(f.offset.supportsFixedPosition&&k.position==="fixed"){break
}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&&(!f.offset.doesAddBorderForTableAndCells||!cs.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c
}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft
}f.offset.supportsFixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));
return{top:l,left:m}
},f.offset={initialize:function(){var a=c.body,b=c.createElement("div"),d,e,g,h,i=parseFloat(f.css(a,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
f.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position="fixed",e.style.top="20px",this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop
},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;
f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);
return{top:b,left:c}
},setOffset:function(a,b,c){var d=f.css(a,"position");
d==="static"&&(a.style.position="relative");
var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;
j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)
}},f.fn.extend({position:function(){if(!this[0]){return null
}var a=this[0],b=this.offsetParent(),c=this.offset(),d=ct.test(b[0].nodeName)?{top:0,left:0}:b.offset();
c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;
return{top:c.top-d.top,left:c.left-d.left}
},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;
while(a&&!ct.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent
}return a
})
}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;
f.fn[d]=function(c){var e,g;
if(c===b){e=this[0];
if(!e){return null
}g=cu(e);
return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]
}return this.each(function(){g=cu(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c
})
}
}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();
f.fn["inner"+c]=function(){var a=this[0];
return a&&a.style?parseFloat(f.css(a,d,"padding")):null
},f.fn["outer"+c]=function(a){var b=this[0];
return b&&b.style?parseFloat(f.css(b,d,a?"margin":"border")):null
},f.fn[d]=function(a){var e=this[0];
if(!e){return a==null?null:this
}if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c[d](a.call(this,b,c[d]()))
})
}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;
return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g
}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c])
}if(a===b){var i=f.css(e,d),j=parseFloat(i);
return f.isNaN(j)?i:j
}return this.css(d,typeof a=="string"?a:a+"px")
}
}),a.jQuery=a.$=f
})(window);
if(typeof(DOMParser)==="undefined"){var xmldata=null;
DOMParser=function(){};
DOMParser.prototype.parseFromString=function(b,c){var a=c;
if(typeof(ActiveXObject)!=="undefined"){xmldata=new ActiveXObject("MSXML.DomDocument");
xmldata.async=false;
xmldata.loadXML(b);
return xmldata
}else{if(typeof(XMLHttpRequest)!=="undefined"){xmldata=new XMLHttpRequest();
if(!a){a="application/xml"
}xmldata.open("GET","data:"+a+";charset=utf-8,"+encodeURIComponent(b),false);
if(xmldata.overrideMimeType){xmldata.overrideMimeType(a)
}xmldata.send(null);
return xmldata.responseXML
}}}
}if(!Function.prototype.bind){Function.prototype.bind=function(){var c=this,b=Array.prototype.slice.call(arguments),a=b.shift();
return function(){return c.apply(a,b.concat(Array.prototype.slice.call(arguments)))
}
}
}function disableSelection(a){if(typeof a.onselectstart!=="undefined"){a.onselectstart=function(){return false
}
}else{if(typeof a.style.MozUserSelect!=="undefined"){a.style.MozUserSelect="none"
}else{a.onmousedown=function(){return false
}
}}a.style.cursor="default"
}Array.range=function(d,b,m,a){var g=[];
var n="bad";
var j=typeof d;
switch(j){case"number":case"string":n=(+d);
break
}var c="bad";
j=typeof m;
switch(j){case"number":case"string":c=(+m);
break
}if(n==="bad"||isNaN(n)){}else{if((n<=0)&&(c==="bad"||isNaN(c))){}else{var h=(c==="bad"||isNaN(c))?0:c;
var f=(a===undefined)||a?h:h+1;
var k=(b===undefined)||!b?n-1:n;
var e=0;
if(k<f){}else{for(e=f;
e<=k;
e++){g.push(e)
}}}}return g
};
Array.prototype.each=function(c){function a(d){var h=false;
var g=d.length;
var e=0;
for(e=0;
e<g;
e++){var f=c(e,d[e]);
h=d.length!==g;
if((f===false)||h){break
}}return h
}var b=null;
do{b=a(this)
}while(b);
return this
};
Array.prototype.replace=function(e,d,c){var b=0;
if(e!==undefined){if(d!==undefined){var f=(+d);
if(!isNaN(f)&&f>=0&&f<=this.length-1){var a=c===undefined?undefined:(+c);
if(isNaN(a)||a<0||a<f||a>=this.length){this[f]=e
}else{if(f<=a&&a<=this.length-1){for(b=f;
b<=a;
b++){this[b]=e
}}}}}}return this
};
Array.prototype.contains=function(a){return $.inArray(a,this)!==-1
};
Array.prototype.remove=function(c){var a=$.inArray(c,this);
var b=a!==-1;
b&&(this.splice(a,1));
return this
};
Array.prototype.removeAll=function(e){var a,d,c,b;
a=e;
for(c=0,b=a.length;
c<b;
c++){d=a[c];
this.remove(d)
}return this
};
Array.prototype.insert=function(c,b){var a=b===undefined?(this.length?this.length-1:0):b;
this.splice(a,0,c);
return this
};
Array.prototype.insertAll=function(b,a){b.each(function(d,c){this.insert(a,0,c)
});
return this
};
Array.prototype.and=function(f){var e,a,d,c,b;
e=[];
a=[].concat(this);
for(c=0,b=a.length;
c<b;
c++){d=a[c];
f.contains(d)&&e.push(d)
}return e
};
Array.prototype.not=function(a){return[].concat(this).removeAll(this.and(a))
};
Array.prototype.equals=function(a){return this.length===a.length===this.and(a).length
};
Array.prototype.containsAny=function(a){return this.and(a).length
};
Array.prototype.containsAll=function(a){return this.and(a).length===a.length
};
Date.prototype.midnight=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0)
};
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")
};
String.prototype.padStartWithZeros=function(a){var b=this+"";
if(b.length<a){Array.range(a-b.length).each(function(d,c){b="0"+b
})
}return b
};
String.prototype.padEndWithZeros=function(a){var b=this+"";
if(b.length<a){Array.range(a-b.length).each(function(d,c){b=b+"0"
})
}return b
};
Number.prototype.removeTrailingZeros=function(){return +(""+this)
};
var registerNS=function(d){var c=d.split(".");
var a=window;
var b=0;
for(b=0;
b<c.length;
b++){if(a[c[b]]===null||typeof(a[c[b]])!=="object"){a[c[b]]={}
}a=a[c[b]]
}};
registerNS("com.cerner.oncology.util");
com.cerner.oncology.util=com.cerner.oncology.util;
com.cerner.oncology.util.getViewportWidth=function(){var a=0;
if(document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth
}else{if(document.body&&document.body.clientWidth){a=document.body.clientWidth
}else{if(window.innerWidth){a=window.innerWidth-18
}}}return a
};
com.cerner.oncology.util.getViewportHeight=function(){var a=0;
if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight
}else{if(document.body&&document.body.clientHeight){a=document.body.clientHeight
}else{if(window.innerHeight){a=window.innerHeight-18
}}}return a
};
com.cerner.oncology.util.getViewportScrollX=function(){var a=0;
if(document.documentElement&&document.documentElement.scrollLeft){a=document.documentElement.scrollLeft
}else{if(document.body&&document.body.scrollLeft){a=document.body.scrollLeft
}else{if(window.pageXOffset){a=window.pageXOffset
}else{if(window.scrollX){a=window.scrollX
}}}}return a
};
com.cerner.oncology.util.getViewportScrollY=function(){var a=0;
if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop
}else{if(document.body&&document.body.scrollTop){a=document.body.scrollTop
}else{if(window.pageYOffset){a=window.pageYOffset
}else{if(window.scrollY){a=window.scrollY
}}}}return a
};
com.cerner.oncology.util.getAbsoluteViewportWidth=function(){return(+com.cerner.oncology.util.getViewportWidth())+com.cerner.oncology.util.getViewportScrollX()
};
com.cerner.oncology.util.getAbsoluteViewportHeight=function(){return(+com.cerner.oncology.util.getViewportHeight())+com.cerner.oncology.util.getViewportScrollY()
};
com.cerner.oncology.util.stripUnit=function(a){return parseInt(a.replace(/[^\d\.]/g,""),10)
};
com.cerner.oncology.util.positionPopup=function(a,g){$(a).css("position","absolute");
var b=com.cerner.oncology.util.getAbsoluteViewportWidth();
var d=com.cerner.oncology.util.getAbsoluteViewportHeight();
var j=$(a).width();
var h=$(a).height();
var k=(+g.clientX)+com.cerner.oncology.util.getViewportScrollX();
var i=(+g.clientY)+com.cerner.oncology.util.getViewportScrollY();
if((k+j+10)>=b){var f=g.pageX-j-10;
$(a).css({left:f<0?0:f})
}else{$(a).css({left:(+g.pageX)+10})
}if((i+h+10)>=d){var c=g.pageY-h-10;
$(a).css({top:c<0?0:c})
}else{$(a).css({top:(+g.pageY)+10})
}};
com.cerner.oncology.util.createRow=function(d,g,c,b){var f=$(document.createElement("tr"));
c&&c.length&&$(f).addClass(c.join(" "));
var e=b&&b.length?b.join(" "):[];
var a=$(document.createElement(g?"th":"td"));
Array.range(d).each(function(j,h){var k=$(a).clone();
e.length&&k.addClass(e);
$(f).append(k)
});
return f
};
com.cerner.oncology.util.createTable=function(b,f,c){var d=$(document.createElement("table")).attr("summary",b);
f&&$(d).attr("id",f);
c&&c.length&&$(d).addClass(c.join(" "));
var e=$(document.createElement("thead"));
$(d).append(e);
var a=$(document.createElement("tbody"));
$(d).append(a);
return d
};
var JSON;
if(!JSON){JSON={}
}(function(){function f(n){return n<10?"0"+n:n
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()
}
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null"
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){if(typeof rep[i]==="string"){k=rep[i];
v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" "
}}else{if(typeof space==="string"){indent=space
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})
}
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v
}else{delete value[k]
}}}}return reviver.call(holder,key,value)
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j
}throw new SyntaxError("JSON.parse")
}
}}());
registerNS("com.cerner.mpage");
XMLCclRequest.prototype.releasePointer=function(){if(this.readyState===4){if(XMLCCLREQUESTOBJECTPOINTER&&XMLCCLREQUESTOBJECTPOINTER.length){for(id in XMLCCLREQUESTOBJECTPOINTER){if(id===this.uniqueId){delete XMLCCLREQUESTOBJECTPOINTER[id]
}}}}};
com.cerner.mpage.call=function(a,c,b){return function(d){var e=new XMLCclRequest();
e.onreadystatechange=function(){if(e.readyState===4&&e.status===200){var f=true;
var h=$.parseJSON(e.responseText);
var j=null;
for(var g in h){if(h[g]["STATUS_DATA"]){j=h[g]["STATUS_DATA"];
break
}}if(j&&j.STATUS){if(b){b(j)
}else{if(/[fp]/i.test(j.STATUS)){alert(JSON.stringify(j)+"\n\nscript inputs = "+d);
f=false;
$("body").empty()
}}}f&&c(h)
}else{if(e.status>=400&&e.status<=599){alert(e.statusText)
}}};
e.open("GET",a);
e.send(d)
}
};
registerNS("com.cerner.oncology.clinical.trials");
$.extend(com.cerner.oncology.clinical.trials,{therapeuticInd:0,clinTrialsComponentConfig:null,getDate:function(d){var a,f,e,c,b;
e=/\/Date\((.+)\)\//;
a=/^(0|(21))/;
b="";
c=e.exec(d);
if(!a.test(c[1])){f=new Date();
f.setISO8601(c[1]);
b=f.format("mm/dd/yyyy")
}return b
},setTableScrolling:function(){var c,a,b;
c=$("#id-7FE8F7-6");
if(this.clinTrialsComponentConfig){if(this.clinTrialsComponentConfig.SCROLL_ENABLED){if(this.clinTrialsComponentConfig.SCROLL_NUM){$(c).addClass("scrollable-7FE8F7");
a=this.clinTrialsComponentConfig.SCROLL_NUM;
b=$("#id-7FE8F7-5").children().length;
if(b>a){$(c).height(a*18);
if($.browser.msie&&$.browser.version==="6.0"){$("#id-7FE8F7-3").css("padding-right","10px")
}}}}}},addHover:function(a){return function(l){var k,b,f,d,h,g,n,m,c;
$(l.target).closest("tr").attr("class","").addClass("hover-7FE8F7");
m="";
c=0;
n=$("#id-7FE8F7-2");
b=$(document.createElement("div")).hide();
$("body").append(b);
k=$("p.popupData-7FE8F7");
for(h=0,g=k.length;
h<g;
h++){f=k[h];
switch(h){case 0:m=a.PRIMARY_MNEMONIC_AMENDMENT;
break;
case 1:m=a.STATUS;
break;
case 2:m=this.getDate(a.ON_STUDY_DT_TM);
break;
case 3:m=this.getDate(a.OFF_TREATMENT_DT_TM);
break;
case 4:m=this.getDate(a.OFF_STUDY_DT_TM);
break;
case 5:m=a.CONTACT_PERSON_NAME;
break;
case 6:m=a.CONTACT_ROLE_NAME;
break;
case 7:m=a.CONTACT_ORGANIZATION_NAME;
break;
case 8:if(a.CONTACT_PHONE_NUM){
m="Phone: "+a.CONTACT_PHONE_NUM;
}else{
m="";
}
break;
case 9:if(){a.CONTACT_PAGER_NUM){
m="Pager: "+a.CONTACT_PAGER_NUM;
}else{
m="";
}
break;
case 10:m=a.CONTACT_EMAIL_ADDR;
break;
case 11:m=a.PROT_TITLE;
break
}$(f).text(m);
$(b).text(m);
d=15+$(b).width();
c=d>c?d:c
}c=c>350?350:c+10;
$("td.popupDataCont-7FE8F7").width(c);
$(n).width(15+c+$("td.popupLabelCont-7FE8F7").width());
$(b).remove();
$(n).show();
com.cerner.oncology.util.positionPopup(n,l)
}.bind(this)
},addTrial:function(m){var f,k,b,e,c,g,a,d,l,h;
l="";
d=$("#id-7FE8F7-5");
c=4;
h=com.cerner.oncology.util.createRow(c,false);
$(d).append(h);
$(h).addClass($(d).children().length%2?"odd":"even");
g=$(h).attr("class");
a=$(document.createElement("p")).addClass("overflow-7FE8F7 textPadding-7FE8F7");
f=$(h).children();
for(e=0;
e<c;
e++){b=f[e];
$(b).addClass(e?"width20p-7FE8F7":"width40p-7FE8F7");
k=$(a).clone();
$(b).append(k);
switch(e){case 0:l=m.PRIMARY_MNEMONIC;
break;
case 1:l=this.getDate(m.ON_STUDY_DT_TM);
break;
case 2:l=m.STATUS;
break;
case 3:l=m.CONTACT_PERSON_NAME;
break
}$(k).text(l)
}$(h).hover(this.addHover(m),function(){$(this).attr("class",g);
$("#id-7FE8F7-2").hide()
})
},retrieveTrials:function(){var b,c,a;
a=function(f){var e,d;
e=$("#id-7FE8F7-3").closest('div[class~="sec-content"]');
if(e){d=$(e).prev().find('span[class~="sec-total"]');
$(d).text(f)
}};
c=function(h){var d,k,g,f,l,m,e;
d=h.DATA.TRIALS;
if(!d.length){e=$("#id-7FE8F7-5");
m=com.cerner.oncology.util.createRow(4,false);
$(e).append(m);
l=$(document.createElement("p")).addClass("res-none");
$(m).children(":first").append(l);
$(l).text(i18n.NO_RESULTS_FOUND)
}else{d.sort(function(j,i){var p,o,n;
p=new Date(this.getDate(j.ON_STUDY_DT_TM));
o=new Date(this.getDate(i.ON_STUDY_DT_TM));
n=p<o?1:p>o?-1:0;
return n
}.bind(this));
for(g=0,f=d.length;
g<f;
g++){k=d[g];
this.addTrial(k)
}this.setTableScrolling()
}a("("+d.length+")")
}.bind(this);
b="^MINE^,$PAT_PersonId$,"+this.therapeuticInd;
a(i18n.LOADING_DATA+"...");
com.cerner.mpage.call("onc_mp_clin_trials",c)(b)
},loadBedrockConfig:function(){var a;
if(window.m_bedrockMpage){a=$.grep(m_bedrockMpage.MPAGE[0].COMPONENT,function(c,b){return c.FILTER_MEAN==="clin_trials"
});
if(a&&a.length){this.clinTrialsComponentConfig=a[0]
}}},movePopupTable:function(){var a=$("#id-7FE8F7-2");
$(a).remove();
$(document.body).append(a)
},setPopupWidth:function(){var c,a,b;
b=$("#id-7FE8F7-4").text();
c=$(document.createElement("div")).hide();
$("body").append(c);
$(c).text(b);
a=$(c).width()+25;
$("td.popupLabelCont-7FE8F7").width(a);
$(c).remove();
this.movePopupTable();
this.loadBedrockConfig();
this.retrieveTrials()
}});
function ClinicalTrialsComponentStyle(){this.initByNamespace("ct")
}ClinicalTrialsComponentStyle.inherits(ComponentStyle);
function ClinicalTrialsComponent(a){this.therapeuticInd=0;
this.setTherapeuticInd=function(b){this.therapeuticInd=(+b)
};
this.setStyles(new ClinicalTrialsComponentStyle());
this.setCriterion(a);
this.setAlwaysExpanded(false);
this.InsertData=function(){MP_Util.Doc.FinalizeComponent(this.getHTML(),this,"");
com.cerner.oncology.clinical.trials.therapeuticInd=this.therapeuticInd;
com.cerner.oncology.clinical.trials.setPopupWidth()
};
this.HandleSuccess=function(){};
this.getHTML=function(){var b=[];
b.push('<div id="id-7FE8F7-3">');
b.push('<table id="id-7FE8F7-1" summary="clinical trials header table">');
b.push("<thead>");
b.push('<tr class="content-hdr">');
b.push('<th class="width40p-7FE8F7 th-7FE8F7"></th>');
b.push('<th class="width20p-7FE8F7 th-7FE8F7"><p class="textPadding-7FE8F7">On Study</p></th>');
b.push('<th class="width20p-7FE8F7 th-7FE8F7"><p class="textPadding-7FE8F7">Status</p></th>');
b.push('<th class="width20p-7FE8F7 th-7FE8F7"><p class="textPadding-7FE8F7">Contact</p></th>');
b.push("</tr>");
b.push("</thead>");
b.push("<tbody>");
b.push("<tr>");
b.push('<td colspan="4">');
b.push('<div id="id-7FE8F7-6">');
b.push('<table summary="clinical trials data table">');
b.push('<tbody id="id-7FE8F7-5">');
b.push("</tbody>");
b.push("</table>");
b.push("</div>");
b.push("</td>");
b.push("</tr>");
b.push("</tbody>");
b.push("</table>");
b.push('<div id="id-7FE8F7-2" style="display: none;">');
b.push('<table summary="clinical trials popup table">');
b.push("<tbody>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">Protocol:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">Status:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">On Study:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p id="id-7FE8F7-4" class="popupLabel-7FE8F7 textPadding-7FE8F7">Off Treatment:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">Off Study:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">Contact:</p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push('<td class="popupDataCont-7FE8F7" style="display:inherit"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td class="alignRight-7FE8F7 popupLabelCont-7FE8F7"><p class="popupLabel-7FE8F7 textPadding-7FE8F7">Trial Name:</p></td>');
b.push('<td class="popupDataCont-7FE8F7"><p class="popupData-7FE8F7 textPadding-7FE8F7"></p></td>');
b.push("</tr>");
b.push("</tbody>");
b.push("</table>");
b.push("</div>");
b.push("</div>");
return b.join("")
}
}ClinicalTrialsComponent.inherits(MPageComponent);
function CvComponentStyle(){this.initByNamespace("cv");
}CvComponentStyle.inherits(ComponentStyle);
function CvComponent(criterion){this.m_diagnosisTargetVocabCd=0;
this.m_problemTargetVocabCd=0;
this.m_canAddConditionFlag=0;
this.m_historicalLabelDisplay="";
this.m_activeLabelDisplay="";
this.m_visitLabelDisplay="";
this.m_nNewConditionType=-1;
this.m_dNewConditionNomenclatureId=0;
this.m_nNewConditionIndx=0;
this.m_loadedConditions=null;
this.m_sList=[];
this.m_sPlaceHolder="";
this.m_cvDragging=false;
this.m_cvDropLocation="";
this.m_cvDragParentDiv="";
this.m_cvDragNomenId=0;
this.m_cvSourceSection="";
this.m_nProcessing=0;
this.m_nWaitCursor=0;
this.m_bActiveExpanded=true;
this.m_bHistoricalExpanded=false;
this.m_nRefreshCount=0;
this.m_cvAddAsType=-1;
this.m_df=null;
try{this.m_cvProbDxObj=window.external.DiscernObjectFactory("PROBDXUTILS");
MP_Util.LogDiscernInfo(this,"PROBDXUTILS","consolidatedproblems.js","CvComponent");
}catch(err){}this.setCriterion(criterion);
this.setStyles(new CvComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CONSOL_PROB.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CONSOL_PROB.O1 - render component");
this.setIncludeLineNumber(false);
this.m_editMode=false;
this.m_defaultSearchVocab=0;
this.m_visitVocab=0;
this.m_activeVocab=0;
this.m_visitLabel="";
this.m_activeLabel="";
this.m_historicalLabel="";
this.m_visitAddClass=0;
this.m_visitAddType=0;
this.m_activeAddClass=0;
this.m_activeAddType=0;
this.m_compObject={cvObject:[],cvModRootId:null,cvCompId:null,cvCompSec:null,iSearchTypeFlag:0,sec:"",criterion:null,curSearchCounter:0,replySearchCounter:0};
this.setScope(1);
CvComponent.method("InsertData",function(){CERN_CV_O1.GetCvTable(this);
});
CvComponent.method("HandleSuccess",function(conditionData){CERN_CV_O1.RenderComponent(this,conditionData);
});
CvComponent.method("setDefaultSearchVocab",function(value){this.m_defaultSearchVocab=value;
});
CvComponent.method("getDefaultSearchVocab",function(){return this.m_defaultSearchVocab;
});
CvComponent.method("setVisitVocab",function(value){this.m_visitVocab=value;
});
CvComponent.method("getVisitVocab",function(){return this.m_visitVocab;
});
CvComponent.method("setActiveVocab",function(value){this.m_activeVocab=value;
});
CvComponent.method("getActiveVocab",function(){return this.m_activeVocab;
});
CvComponent.method("setVisitLabel",function(value){this.m_visitLabel=value;
});
CvComponent.method("getVisitLabel",function(){return this.m_visitLabel;
});
CvComponent.method("setActiveLabel",function(value){this.m_activeLabel=value;
});
CvComponent.method("getActiveLabel",function(){return this.m_activeLabel;
});
CvComponent.method("setHistoricalLabel",function(value){this.m_historicalLabel=value;
});
CvComponent.method("getHistoricalLabel",function(){return this.m_historicalLabel;
});
CvComponent.method("getVisitAddType",function(){return this.m_visitAddType;
});
CvComponent.method("setVisitAddType",function(value){this.m_visitAddType=value;
});
CvComponent.method("getVisitAddClass",function(){return this.m_visitAddClass;
});
CvComponent.method("setVisitAddClass",function(value){this.m_visitAddClass=value;
});
CvComponent.method("getActiveAddType",function(){return this.m_activeAddType;
});
CvComponent.method("setActiveAddType",function(value){this.m_activeAddType=value;
});
CvComponent.method("getActiveAddClass",function(){return this.m_activeAddClass;
});
CvComponent.method("setActiveAddClass",function(value){this.m_activeAddClass=value;
});
CvComponent.method("setModifyInd",function(value){this.m_modifyInd=(value==1?true:false);
});
CvComponent.method("getModifyInd",function(){return this.m_modifyInd;
});
CvComponent.method("openTab",function(){var criterion=this.getCriterion();
var sParms="/PERSONID="+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+this.getLink()+"+^";
APPLINK(0,criterion.executable,sParms);
this.InsertData();
});
CvComponent.method("getDateFormatter",function(){if(!this.m_df){this.m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}return this.m_df;
});
}CvComponent.inherits(MPageComponent);
var CERN_CV_O1=function(){return{GetCvTable:function(component){component.m_compObject.cvCompId=component.getComponentId();
component.m_compObject.cvModRootId="cv"+component.m_compObject.cvCompId;
component.m_compObject.cvCompSec=_g(component.m_compObject.cvModRootId);
var titleFrag=Util.ce("span");
var innerHTMLArr=[];
innerHTMLArr.push('<span id="cvProcessing',component.m_compObject.cvCompId,'" class="processing hide">',i18n.discernabu.consolproblem_o1.PROCESSING,"</span>");
titleFrag.innerHTML=innerHTMLArr.join("");
var secTitle=Util.Style.g("sec-title",component.m_compObject.cvCompSec,"span")[0];
Util.ia(titleFrag,secTitle);
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,0,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var sendAr=[];
component.m_compObject.criterion=component.getCriterion();
sendAr.push("^MINE^",component.m_compObject.criterion.person_id+".0",component.m_compObject.criterion.provider_id+".0",component.m_compObject.criterion.encntr_id+".0",component.m_compObject.criterion.ppr_cd+".0",component.m_compObject.criterion.position_cd+".0","^"+component.m_compObject.criterion.category_mean+"^",component.getDefaultSearchVocab()+".0");
MP_Core.XMLCclRequestWrapper(component,"MP_GET_CONDITIONS",sendAr,true);
component.m_compObject.sec=component.getStyles().getNameSpace();
component.m_diagnosisTargetVocabCd=component.getVisitVocab();
component.m_diagnosisTargetVocabCd=parseFloat(component.m_diagnosisTargetVocabCd.toFixed(1));
component.m_problemTargetVocabCd=component.getActiveVocab();
component.m_problemTargetVocabCd=parseFloat(component.m_problemTargetVocabCd.toFixed(1));
component.m_historicalLabelDisplay=component.getHistoricalLabel();
component.m_activeLabelDisplay=component.getActiveLabel();
component.m_visitLabelDisplay=component.getVisitLabel();
},RenderComponent:function(component,conditionData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{MP_Util.Doc.HideHovers();
component.setEditMode(true);
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var iconPath="";
iconPath=component.m_compObject.criterion.static_content.replace(/%5C/g,"\\");
iconPath=iconPath.replace(/%20/g," ");
var secHTMLArray=[];
var secHTML="";
var countText="";
var cvSetObject=conditionData.SETTINGS;
var cvDataObject=conditionData.DATA;
var i=0;
var oCondition="";
var optMenuCV="";
var sIndicator=0;
component.m_loadedConditions=conditionData;
if(cvSetObject){var listLength=0;
component.m_canAddConditionFlag=cvSetObject.CAN_ADD_CONDITION_FLAG;
secHTMLArray.push("<div class='cv-ControlDiv' id='cvClassificationDiv",component.m_compObject.cvCompId,"'>","<span class='cv-ClassFilterLabel'>",i18n.discernabu.consolproblem_o1.CLASSIFICATION,":</span>","<span class='cvClassFilterSpan' id='cvClassFilterSpan",component.m_compObject.cvCompId,"'></span></div>","<div class ='cv-ControlDiv' id ='cvControlsDiv",component.m_compObject.cvCompId,"'>","<span class='cv-AddLabel'>",i18n.discernabu.consolproblem_o1.ADD_NEW_AS,"</span>","<span class='cvAddTypeSpan' id='cvAddTypeSpan",component.m_compObject.cvCompId,"'></span>","<span class='cv-SelectList' id='cvSelectListId",component.m_compObject.cvCompId,"'></span>",MP_Util.CreateAutoSuggestBoxHtml(component),"</div>");
listLength=cvDataObject.THIS_VISIT.length;
secHTMLArray.push('<div><div id="TVHD',component.m_compObject.cvCompId,'" class="sub-sec-hd"><span class="sub-sec-title">',component.m_visitLabelDisplay," (",listLength,")</span></div>",'<div id = "cvTV',component.m_compObject.cvCompId,'" class="sub-sec-content"><ul id = "cv-TVList',component.m_compObject.cvCompId,'">');
if(listLength>0){for(i=0;
i<listLength;
i++){oCondition=cvDataObject.THIS_VISIT[i];
var conditionRowID="TV"+oCondition.NOMENCLATURE_ID+"IDX"+oCondition.CONDITION_INDEX+"UNIQ"+component.m_compObject.cvCompId;
var sConditionDisplay=oCondition.DISPLAY;
if(oCondition.ICD9DISPLAY){sConditionDisplay=sConditionDisplay+" ("+oCondition.ICD9DISPLAY+")";
}sIndicator=((component.m_nNewConditionType===0||component.m_nNewConditionType===1)&&((component.m_dNewConditionNomenclatureId>0&&component.m_dNewConditionNomenclatureId==oCondition.NOMENCLATURE_ID)||(component.m_dNewConditionNomenclatureId==0&&component.m_nNewConditionIndx==oCondition.CONDITION_INDEX)))?"*":"";
secHTMLArray.push('<dl class="cv-info" id=',conditionRowID,'><span class = "tv-info">');
var tvCommentCnt=cvDataObject.THIS_VISIT[i].COMMENTS.length;
if(tvCommentCnt>0){secHTMLArray.push('<dt class="icon4972" id=',conditionRowID,"COM",'><img src="',iconPath,'\\images\\4972.gif"/></dt>');
}if(component.getModifyInd()){secHTMLArray.push('<dt class="cv-edit-img cv-hidden" id=',conditionRowID,"MOD",'><img src="',iconPath,'\\images\\6250_16.png"/></dt>');
}secHTMLArray.push('<dt class="cv-name">',sIndicator,sConditionDisplay,"</dt></span></dl>",CERN_CV_O1.renderConditionDetails(component,oCondition));
}}else{secHTMLArray.push('<span class="no-doc">--</span>');
}listLength=cvDataObject.ACTIVE.length;
secHTMLArray.push('</ul></div></div><div><div id="ACHD',component.m_compObject.cvCompId,'" class="sub-sec-hd"><span id="cvActiveToggle',component.m_compObject.cvCompId,'" class="sub-sec-hd-tgl" title="',i18n.HIDE_SECTION,'">-</span><span class="sub-sec-title">',component.m_activeLabelDisplay," (",listLength,')</span></div><div id = "cvAC',component.m_compObject.cvCompId,'" class="sub-sec-content"><ul id = "cv-ACList',component.m_compObject.cvCompId,'">');
if(listLength>0){for(i=0;
i<listLength;
i++){oCondition=cvDataObject.ACTIVE[i];
var conditionRowID="AC"+oCondition.NOMENCLATURE_ID+"IDX"+oCondition.CONDITION_INDEX+"UNIQ"+component.m_compObject.cvCompId;
sIndicator=((component.m_nNewConditionType===1||component.m_nNewConditionType===2)&&((component.m_dNewConditionNomenclatureId>0&&component.m_dNewConditionNomenclatureId==oCondition.NOMENCLATURE_ID)||(component.m_dNewConditionNomenclatureId==0&&component.m_nNewConditionIndx==oCondition.CONDITION_INDEX)))?"*":"";
secHTMLArray.push('<dl class="cv-info" id=',conditionRowID,'><span class = "ac-info">');
var acCommentCnt=cvDataObject.ACTIVE[i].COMMENTS.length;
if(acCommentCnt>0){secHTMLArray.push('<dt class="icon4972" id=',conditionRowID,"COM",'><img src="',iconPath,'\\images\\4972.gif"/></dt>');
}if(component.getModifyInd()){secHTMLArray.push('<dt class="cv-edit-img cv-hidden" id=',conditionRowID,"MOD",'><img src="',iconPath,'\\images\\6250_16.png"/></dt>');
}secHTMLArray.push('<dt class="cv-name">',sIndicator,oCondition.DISPLAY,"</dt></span></dl>",CERN_CV_O1.renderConditionDetails(component,oCondition));
}}else{secHTMLArray.push('<span class="no-doc">--</span>');
}listLength=cvDataObject.HISTORICAL.length;
secHTMLArray.push('</ul></div></div><div><div id="HXHD',component.m_compObject.cvCompId,'" class="sub-sec-hd"><span id="cvHistoricalToggle',component.m_compObject.cvCompId,'" class="sub-sec-hd-tgl" title=',i18n.HIDE_SECTION,'>-</span><span class="sub-sec-title">',component.m_historicalLabelDisplay," (",listLength,")</span></div>",'<div id="cvHX',component.m_compObject.cvCompId,'" class="sub-sec-content"><ul id = "cv-HXList',component.m_compObject.cvCompId,'">');
if(listLength>0){for(i=0;
i<listLength;
i++){oCondition=cvDataObject.HISTORICAL[i];
var conditionRowID="HX"+oCondition.NOMENCLATURE_ID+"IDX"+oCondition.CONDITION_INDEX+"UNIQ"+component.m_compObject.cvCompId;
sIndicator=(component.m_nNewConditionType===3&&((component.m_dNewConditionNomenclatureId>0&&component.m_dNewConditionNomenclatureId==oCondition.NOMENCLATURE_ID)||(component.m_dNewConditionNomenclatureId==0&&component.m_nNewConditionIndx==oCondition.CONDITION_INDEX)))?"*":"";
secHTMLArray.push('<dl class="cv-info cvHistoricalItem" id=',conditionRowID,'><span class = "hs-info">');
var hsCommentCnt=cvDataObject.HISTORICAL[i].COMMENTS.length;
if(hsCommentCnt>0){secHTMLArray.push('<dt class="icon4972" id=',conditionRowID,"COM",'><img src="',iconPath,'\\images\\4972.gif"/></dt>');
}if(component.getModifyInd()){secHTMLArray.push('<dt class="cv-edit-img cv-hidden" id=',conditionRowID,"MOD",'><img src="',iconPath,'\\images\\6250_16.png"/></dt>');
}secHTMLArray.push('<dt class="cv-name">',sIndicator,oCondition.DISPLAY,"</dt></span></dl>",CERN_CV_O1.renderConditionDetails(component,oCondition));
}}else{secHTMLArray.push('<span class="no-doc">--</span>');
}secHTMLArray.push("</ul></div></div></div>");
secHTML=secHTMLArray.join("");
MP_Util.Doc.FinalizeComponent(secHTML,component,countText);
component.m_compObject.iSearchTypeFlag=cvSetObject.CONDITION_SEARCH_TYPE_FLAG;
MP_Util.AddAutoSuggestControl(component,CERN_CV_O1.searchNomenclature,CERN_CV_O1.addCondition,CERN_CV_O1.CreateSuggestionLine);
CERN_CV_O1.cvBuildClassificationMenu(component.m_compObject.cvCompId,cvSetObject.CLASS_VIEW_FILTER_FLAG);
var classificationDiv=_g("cvClassificationDiv"+component.m_compObject.cvCompId);
if(Util.Style.ccss(classificationDiv,"cv-ControlDiv")){Util.Style.rcss(classificationDiv,"cv-ControlDiv");
Util.Style.acss(classificationDiv,"cv-ClassificationDiv");
}var controlsDiv=_g("cvControlsDiv"+component.m_compObject.cvCompId);
if(component.m_canAddConditionFlag>0){controlsDiv.className="sec-content";
controlsDiv.style.overflow="hidden";
}if(component.m_cvAddAsType==-1){switch(component.m_canAddConditionFlag){case 1:case 3:component.m_cvAddAsType=0;
break;
case 2:component.m_cvAddAsType=2;
break;
}if(component.m_canAddConditionFlag>0){CERN_CV_O1.cvBuildConditionAddOptions(-1,component.m_compObject.cvCompId);
}}else{if(component.m_canAddConditionFlag>0){CERN_CV_O1.cvBuildConditionAddOptions(component.m_cvAddAsType,component.m_compObject.cvCompId);
}}component.m_nNewConditionType=-1;
component.m_dNewConditionNomenclatureId=0;
component.m_nNewConditionIndx=0;
}var AC=_g("cvAC"+component.m_compObject.cvCompId);
Util.addEvent(AC,"mouseover",function(){CERN_CV_O1.m_cvDropLocationAC(component.m_compObject.cvCompId);
});
Util.addEvent(AC,"mouseout",function(){CERN_CV_O1.m_cvResetDropLocation(component.m_compObject.cvCompId);
});
var TV=_g("cvTV"+component.m_compObject.cvCompId);
Util.addEvent(TV,"mouseover",function(){CERN_CV_O1.m_cvDropLocationTV(component.m_compObject.cvCompId);
});
Util.addEvent(TV,"mouseout",function(){CERN_CV_O1.m_cvResetDropLocation(component.m_compObject.cvCompId);
});
var mnuConsolidatedViewMenu=_g("moreOptCV"+component.m_compObject.cvCompId);
if(mnuConsolidatedViewMenu){optMenuCV=_g("moreOptMenuCV"+component.m_compObject.cvCompId);
Util.Style.acss(optMenuCV,"menu-hide");
Util.de(mnuConsolidatedViewMenu);
}var menuFrag=Util.ce("span");
var innerHTMLArr=[];
innerHTMLArr.push('<span class="opts-menu" id="moreOptCV',component.m_compObject.cvCompId,'">&nbsp;</span>','<div class="opts-menu-content menu-hide" id="moreOptMenuCV',component.m_compObject.cvCompId,'">','<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVRemoveDiagnoses',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.REMOVE_FROM.replace("{0}",component.m_visitLabelDisplay),"</div>",'<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVResolve',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.RESOLVE,"</div>",'<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVInactive',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.INACTIVATE,"</div>",'<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVCancel',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.CANCEL,"</div>",'<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVMoveToActive',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.MOVE_TO.replace("{0}",component.m_activeLabelDisplay)," </div>",'<div class="opts-menu-item opts-menu-item-dthr" id="mnuCVMoveToThisVisit',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.MOVE_TO.replace("{0}",component.m_visitLabelDisplay)," </div></div>");
menuFrag.innerHTML=innerHTMLArr.join("");
var secHdTgl=Util.Style.g("sec-hd-tgl",component.m_compObject.cvCompSec,"span")[0];
Util.ia(menuFrag,secHdTgl);
optMenuCV=_g("moreOptMenuCV"+component.m_compObject.cvCompId);
Util.addEvent(_g("moreOptCV"+component.m_compObject.cvCompId),"click",function(){var element=_g("cvControlsDiv"+component.m_compObject.cvCompId);
var checkClosed=(Util.gp(Util.gp(element)));
if(!Util.Style.ccss(checkClosed,"closed")&&component.m_nProcessing===0){if(Util.Style.ccss(optMenuCV,"menu-hide")){Util.Style.rcss(optMenuCV,"menu-hide");
}else{Util.Style.acss(optMenuCV,"menu-hide");
}}else{Util.Style.acss(optMenuCV,"menu-hide");
}});
CERN_CV_O1.closeMenuInit(component.m_compObject.cvCompId,optMenuCV);
var cvRows=Util.Style.g("cv-info",_g("cvContent"+component.m_compObject.cvCompId),"dl");
var cvrLen=cvRows.length;
for(i=cvrLen;
i--;
){Util.addEvent(cvRows[i],"click",function(){CERN_CV_O1.cvRowSel(this,component.m_compObject.cvCompId);
});
if(component.getModifyInd()){Util.addEvent(cvRows[i],"mouseover",function(){CERN_CV_O1.cvDisplayModifyIcon(this,component.m_compObject.cvCompId);
});
Util.addEvent(cvRows[i],"mouseout",function(){CERN_CV_O1.cvHideModifyIcon(this,component.m_compObject.cvCompId);
});
}}if(component.getModifyInd()){var cvModIcons=Util.Style.g("cv-edit-img",_g("cvContent"+component.m_compObject.cvCompId),"dt");
var cvModLen=cvModIcons.length;
for(var i=cvModLen;
i--;
){Util.addEvent(cvModIcons[i],"click",function(){CERN_CV_O1.cvLaunchModifyDlg(this,component.m_compObject.cvCompId);
});
}}CERN_CV_O1.initializeIconHovers(cvRows,"cv-comment","icon4972",component.m_compObject.cvCompId);
CERN_CV_O1.initDragDrop(component.m_compObject.cvCompId);
CERN_CV_O1.initializeToggle("cvHistoricalToggle"+component.m_compObject.cvCompId,component.m_bHistoricalExpanded,component.m_compObject.cvCompId);
CERN_CV_O1.initializeToggle("cvActiveToggle"+component.m_compObject.cvCompId,component.m_bActiveExpanded,component.m_compObject.cvCompId);
}catch(err){alert(i18n.ERROR_OCCURED+": "+err.description);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}component.setEditMode(false);
}},loadWithCBParameters:function(url,callback,sec,parameters,compID){function checkReady(){if(xhr.readyState===4){if(xhr.status===200){MP_Util.LogScriptCallInfo(MP_Util.GetCompObjById(compID),this,"consolidatedproblems.js","loadWithCBParameters");
if(url=="mp_modify_problems"){callback(xhr.responseText,sec,compID,2);
}else{callback(xhr.responseText,sec,compID,1);
}}else{alert(i18n.discernabu.consolproblem_o1.PROBLEM_RETRIEVING_DATA.replace("{0}",sec));
}}}var component=MP_Util.GetCompObjById(compID);
var xhr=new XMLCclRequest();
xhr.onreadystatechange=checkReady;
xhr.open("GET",url,true);
if(parameters){xhr.send(parameters);
}else{parameters="^MINE^, "+component.m_compObject.criterion.person_id.toFixed(1)+","+component.m_compObject.criterion.provider_id.toFixed(1)+","+component.m_compObject.criterion.encntr_id.toFixed(1)+",^"+component.m_compObject.criterion.app_name+"^,"+component.m_compObject.criterion.position_cd.toFixed(1)+","+component.m_compObject.criterion.ppr_cd.toFixed(1);
xhr.send(parameters);
}},updateCVActions:function(compID){var component=MP_Util.GetCompObjById(compID);
if(component.m_nProcessing==1){CERN_CV_O1.updateCVMenu(component.m_compObject.cvCompId);
}},processingUI:function(oNamespace,sElementId,nIncrement,bChangeCursor,updateCallback,compID){var processingElement=_g(sElementId);
if(processingElement){if(nIncrement===0){oNamespace.m_nProcessing=0;
oNamespace.m_nWaitCursor=0;
}else{oNamespace.m_nProcessing+=nIncrement;
if(bChangeCursor){oNamespace.m_nWaitCursor+=nIncrement;
}if(oNamespace.m_nProcessing<0){oNamespace.m_nProcessing=0;
}if(oNamespace.m_nWaitCursor<0){oNamespace.m_nWaitCursor=0;
}}var bodyElement=document.getElementsByTagName("body")[0];
if(oNamespace.m_nProcessing===0){Util.Style.acss(processingElement,"hide");
}else{Util.Style.rcss(processingElement,"hide");
}if(oNamespace.m_nWaitCursor===0){Util.Style.rcss(bodyElement,"busy");
}else{Util.Style.acss(bodyElement,"busy");
}if(updateCallback){updateCallback(compID);
}}},cvDisplayModifyIcon:function(row,compID){var component=MP_Util.GetCompObjById(compID);
if(Util.Style.ccss(row,"cv-info")){var nIndex=(row.id).indexOf("IDX")+3;
var nIndex2=(row.id).indexOf("UNIQ");
var dConditionIndx=parseFloat(row.id.substring(nIndex,nIndex2));
var section=row.id.substring(0,2);
var canModify=0;
if(section=="TV"){var mostRecentDiagnosis=CERN_CV_O1.getMostRecentEncntrDiagnosis(0,dConditionIndx,component.m_compObject.cvCompId);
if(mostRecentDiagnosis&&mostRecentDiagnosis.CAN_MODIFY==1){canModify=1;
}}else{if(section=="AC"||section=="HX"){var mostRecentProblem=CERN_CV_O1.getMostRecentProblem(0,dConditionIndx,component.m_compObject.cvCompId);
if(mostRecentProblem&&mostRecentProblem.CAN_MODIFY==1&&mostRecentProblem.PROBLEM_TYPE_FLAG!=2){canModify=1;
}}}if(canModify===1){var cvModIcon=_g(row.id+"MOD");
if(cvModIcon&&Util.Style.ccss(cvModIcon,"cv-hidden")){Util.Style.rcss(cvModIcon,"cv-hidden");
}}}},cvHideModifyIcon:function(row,compID){var cvModIcon=_g(row.id+"MOD");
if(cvModIcon&&!Util.Style.ccss(cvModIcon,"cv-hidden")){Util.Style.acss(cvModIcon,"cv-hidden");
}},cvLaunchModifyDlg:function(row,compID){var component=MP_Util.GetCompObjById(compID);
var rowID=row.id;
var bFound=false;
var mostRecentProblem=null;
var mostRecentEncntrDiagnosis=null;
var retVal=false;
var iType=-1;
var dOriginatingNomenclatureId=parseFloat(rowID.substring(2));
var nIndex=rowID.indexOf("IDX")+3;
var nIndex2=(rowID).indexOf("UNIQ");
var dConditionIndx=parseFloat(rowID.substring(nIndex,nIndex2));
if(rowID.substring(0,2)=="TV"){iType=0;
mostRecentEncntrDiagnosis=CERN_CV_O1.getMostRecentEncntrDiagnosis(0,dConditionIndx,component.m_compObject.cvCompId);
if(mostRecentEncntrDiagnosis&&component.m_cvProbDxObj){try{retVal=component.m_cvProbDxObj.LoadDiagnosisAndInvokeModify(mostRecentEncntrDiagnosis.DIAGNOSIS_ID,component.m_compObject.criterion.person_id,component.m_compObject.criterion.encntr_id,true);
}catch(err){}}}else{if(rowID.substring(0,2)=="AC"||rowID.substring(0,2)=="HX"){if(rowID.substring(0,2)=="AC"){iType=2;
}else{iType=3;
}mostRecentProblem=CERN_CV_O1.getMostRecentProblem(0,dConditionIndx,component.m_compObject.cvCompId);
if(mostRecentProblem&&component.m_cvProbDxObj){try{retVal=component.m_cvProbDxObj.LoadProblemAndInvokeModify(mostRecentProblem.PROBLEM_ID,component.m_compObject.criterion.person_id,true);
}catch(err){}}}}if(retVal){component.m_nNewConditionType=iType;
component.m_dNewConditionNomenclatureId=dOriginatingNomenclatureId;
component.m_nNewConditionIndx=dConditionIndx;
var paramString=[];
var compCriterion=component.m_compObject.criterion;
paramString.push("^MINE^",compCriterion.person_id+".0",compCriterion.provider_id+".0",compCriterion.encntr_id+".0",compCriterion.ppr_cd+".0",compCriterion.position_cd+".0","^"+compCriterion.category_mean+"^",component.getDefaultSearchVocab()+".0");
MP_Core.XMLCclRequestWrapper(component,"MP_GET_CONDITIONS",paramString,true);
}var commentHoverDet=Util.Style.g("cv-comment");
CERN_CV_O1.hoverRefresh(commentHoverDet,commentHoverDet.length);
Util.cancelBubble(window.event);
},initializeIconHovers:function(pRows,detClass,iconClass,compID){var commentClass=detClass;
var l=pRows.length;
for(var i=l;
i--;
){var row=pRows[i];
if(row){var nm=Util.gns(Util.gns(Util.gns(row)));
if(nm){if(Util.Style.ccss(nm,commentClass)){var iconId=row.id+"COM";
var icon=_g(iconId);
if(icon){CERN_CV_O1.iconHS(icon,nm,compID);
}}}}}},iconHS:function(e,n,compID){var component=MP_Util.GetCompObjById(compID);
if(n&&n.tagName=="DL"){e.onmouseenter=function(evt){e.onmouseover=null;
e.onmouseout=null;
component.setEditMode(true);
var cvDets=Util.Style.g("hvr");
CERN_CV_O1.hoverRefresh(cvDets,cvDets.length);
CERN_CV_O1.iconHmo(evt,n,component);
};
e.onmouseover=function(evt){component.setEditMode(true);
var cvDets=Util.Style.g("hvr");
CERN_CV_O1.hoverRefresh(cvDets,cvDets.length);
CERN_CV_O1.iconHmo(evt,n,component);
};
e.onmousemove=function(evt){component.setEditMode(true);
CERN_CV_O1.iconHmm(evt,n);
};
e.onmouseout=function(evt){component.setEditMode(false);
var cvComment=Util.Style.g("cv-comment");
CERN_CV_O1.hoverRefresh(cvComment,cvComment.length);
CERN_CV_O1.iconHmt(evt,n);
};
e.onmouseleave=function(evt){e.onmouseover=null;
e.onmouseout=null;
component.setEditMode(false);
var cvComment=Util.Style.g("cv-comment");
CERN_CV_O1.hoverRefresh(cvComment,cvComment.length);
CERN_CV_O1.iconHmt(evt,n);
};
Util.Style.acss(n,"hover");
}},iconHmo:function(evt,n,comp){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){if(comp){document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}}n.timer=setTimeout(hover,500);
},iconHmm:function(evt,n){if(!n.show){return;
}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
},iconHmt:function(evt,n){n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
},cvRowSel:function(row,compID){var component=MP_Util.GetCompObjById(compID);
row.style.background="#0000FF";
var cvDets=Util.Style.g("hvr");
var detLen=cvDets.length;
if(Util.Style.ccss(row,"condition-selected")){Util.Style.rcss(row,"condition-selected");
Util.Style.rcss(row,"row-selected");
row.style.background="";
cvDets=Util.Style.g("hvr");
detLen=cvDets.length;
for(var i=detLen;
i--;
){cvDets[i].style.display="";
}}else{Util.Style.acss(row,"condition-selected");
if(!Util.Style.ccss(row,"row-selected")){Util.Style.acss(row,"row-selected");
}}var selectLen=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl").length;
if(selectLen>0){if(selectLen==1&&!component.m_editMode){CERN_CV_O1.hoverRefresh(cvDets,detLen);
}}CERN_CV_O1.updateCVMenu(component.m_compObject.cvCompId);
},updateCVMenu:function(compID){var component=MP_Util.GetCompObjById(compID);
var bEnableMenuResolve=false;
var bEnableMenuInactive=false;
var bEnableMenuCancel=false;
var bEnableMenuMedical=false;
var bEnableMenuConfirmProblem=false;
var selectedSectionTV=1;
var selectedSectionActive=2;
var selectedSectionHx=4;
var selectedSection=0;
var dNomenclatureId=0;
var rowType="";
var bPregnancyFound=false;
var dConditionIndx=0;
var nIndex=0;
var bFoundFreeText=false;
if(component.m_nProcessing===0&&component.m_loadedConditions!==null){var cvSelRows=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl");
var cvSelLen=cvSelRows.length;
if(cvSelLen>0){bEnableMenuResolve=true;
bEnableMenuInactive=true;
bEnableMenuCancel=true;
bEnableMenuMedical=true;
bEnableMenuConfirmProblem=true;
for(var i=0;
i<cvSelLen;
i++){nIndex=(cvSelRows[i].id).indexOf("IDX")+3;
dConditionIndx=parseFloat((cvSelRows[i].id).substring(nIndex));
dNomenclatureId=parseFloat((cvSelRows[i].id).substring(2));
if(dNomenclatureId==0){bFoundFreeText=true;
}var condition=CERN_CV_O1.getCondition(0,dConditionIndx,component.m_compObject.cvCompId);
if(condition){if(condition.PROBLEMS.length===0){bEnableMenuResolve=false;
bEnableMenuInactive=false;
bEnableMenuCancel=false;
bEnableMenuMedical=false;
bEnableMenuConfirmProblem=false;
}else{if(condition.PROBLEMS[0].PROBLEM_TYPE_FLAG===2){bPregnancyFound=true;
}else{if(condition.PROBLEMS[0].LIFECYCLE_STATUS_MEAN=="RESOLVED"){bEnableMenuResolve=false;
}else{if(condition.PROBLEMS[0].LIFECYCLE_STATUS_MEAN=="INACTIVE"){bEnableMenuInactive=false;
}}}}if(condition.PROBLEMS.length>0&&condition.PROBLEMS[0].CLASSIFICATION_MEAN=="MEDICAL"){bEnableMenuMedical=false;
}if(condition.PROBLEMS.length>0&&condition.PROBLEMS[0].CONFIRMATION_STATUS_MEAN!="POSSIBLE"){bEnableMenuConfirmProblem=false;
}}rowType=(cvSelRows[i].id).substring(0,2);
if(rowType=="TV"){selectedSection|=selectedSectionTV;
}else{if(rowType=="AC"){selectedSection|=selectedSectionActive;
}else{if(rowType=="HX"){selectedSection|=selectedSectionHx;
}}}}}}if(selectedSection==selectedSectionTV&&(component.m_canAddConditionFlag===1||component.m_canAddConditionFlag===3)){Util.Style.rcss(_g("mnuCVRemoveDiagnoses"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVRemoveDiagnoses"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.removeDiagnoses(component.m_compObject.cvCompId);
});
}else{Util.Style.acss(_g("mnuCVRemoveDiagnoses"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}if(bEnableMenuResolve&&(component.m_canAddConditionFlag===2||component.m_canAddConditionFlag===3)&&bPregnancyFound===false){Util.Style.rcss(_g("mnuCVResolve"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVResolve"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.modifyProblem(component.m_compObject.cvCompId,this.id);
});
}else{Util.Style.acss(_g("mnuCVResolve"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}if(bEnableMenuInactive&&(component.m_canAddConditionFlag===2||component.m_canAddConditionFlag===3)&&bPregnancyFound===false){Util.Style.rcss(_g("mnuCVInactive"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVInactive"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.modifyProblem(component.m_compObject.cvCompId,this.id);
});
}else{Util.Style.acss(_g("mnuCVInactive"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}if(bEnableMenuCancel&&(component.m_canAddConditionFlag===2||component.m_canAddConditionFlag===3)&&bPregnancyFound===false){Util.Style.rcss(_g("mnuCVCancel"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVCancel"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.modifyProblem(component.m_compObject.cvCompId,this.id);
});
}else{Util.Style.acss(_g("mnuCVCancel"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}if(selectedSection&&!(selectedSection&selectedSectionActive)&&(component.m_canAddConditionFlag===2||component.m_canAddConditionFlag===3)&&bPregnancyFound===false&&!bFoundFreeText){Util.Style.rcss(_g("mnuCVMoveToActive"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVMoveToActive"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.moveCondition(component.m_compObject.cvCompId,this.id);
});
}else{Util.Style.acss(_g("mnuCVMoveToActive"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}if(selectedSection&&!(selectedSection&selectedSectionTV)&&(component.m_canAddConditionFlag===1||component.m_canAddConditionFlag===3)&&!bFoundFreeText){Util.Style.rcss(_g("mnuCVMoveToThisVisit"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
Util.addEvent(_g("mnuCVMoveToThisVisit"+component.m_compObject.cvCompId),"click",function(){CERN_CV_O1.moveCondition(component.m_compObject.cvCompId,this.id);
});
}else{Util.Style.acss(_g("mnuCVMoveToThisVisit"+component.m_compObject.cvCompId),"opts-menu-item-dthr");
}},searchNomenclature:function(callback,textBox,component){if(textBox.value.length>1){if(component.m_compObject.iSearchTypeFlag<1){return;
}var xhr=new XMLCclRequest();
var returnData;
var searchPhrase=textBox.value;
var limit=10;
component.m_compObject.curSearchCounter=component.m_compObject.curSearchCounter+1;
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,false,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){MP_Util.LogScriptCallInfo(component,this,"consolidatedproblems.js","searchNomenclature");
var msg=xhr.responseText;
var jsonMsg="";
if(msg){jsonMsg=JSON.parse(msg);
}if(jsonMsg){component.m_compObject.replySearchCounter=jsonMsg.RECORD_DATA.SEARCHINDEX;
if(component.m_compObject.replySearchCounter===component.m_compObject.curSearchCounter&&textBox.value!==""){returnData=jsonMsg.RECORD_DATA.NOMENCLATURE;
callback.autosuggest(returnData);
}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,false,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
}};
xhr.open("GET","mp_search_nomenclatures",true);
xhr.send("^MINE^, ^"+searchPhrase+"^,"+limit+","+component.m_compObject.curSearchCounter+","+component.m_compObject.iSearchTypeFlag);
}},CreateSuggestionLine:function(suggestionObj,searchVal){return CERN_CV_O1.HighlightValue(suggestionObj.NAME,searchVal);
},HighlightValue:function(inString,term){return"<strong>"+inString.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(" ").join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),"</strong>$1<strong>")+"</strong>";
},addCondition:function(nomenclature_id,textbox,component){if(nomenclature_id){var addConditionType=component.m_cvAddAsType;
var cvSearch=_g("cvcontentCtrl"+component.m_compObject.cvCompId);
cvSearch.value="";
CERN_CV_O1.addConditionWithType(nomenclature_id.VALUE+".0",addConditionType,0,component.m_compObject.cvCompId);
}},addConditionWithType:function(dOriginatingNomenclatureId,iType,dConditionIndx,compID){var component=MP_Util.GetCompObjById(compID);
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var dDiagnosisNomenclatureId=0;
var dProblemNomenclatureId=0;
var nLifeStatusCodeFlag=1;
var mostRecentProblem=null;
var paramString="";
var compCriterion=component.m_compObject.criterion;
if(iType==1||iType==2||iType==3){mostRecentProblem=CERN_CV_O1.getMostRecentProblem(dOriginatingNomenclatureId,0,component.m_compObject.cvCompId);
}try{var cvObj2=window.external.DiscernObjectFactory("KIACROSSMAPPING");
MP_Util.LogDiscernInfo(component,"KIACROSSMAPPING","consolidatedproblems.js","addConditionWithType");
switch(iType){case 0:dDiagnosisNomenclatureId=cvObj2.GetDxProbMapping(compCriterion.person_id,compCriterion.encntr_id,4,dOriginatingNomenclatureId,component.m_diagnosisTargetVocabCd,compCriterion.ppr_cd,compCriterion.position_cd,component.m_visitLabelDisplay,component.m_activeLabelDisplay,component.m_historicalLabelDisplay);
break;
case 1:dDiagnosisNomenclatureId=cvObj2.GetDxProbMapping(compCriterion.person_id,compCriterion.encntr_id,4,dOriginatingNomenclatureId,component.m_diagnosisTargetVocabCd,compCriterion.ppr_cd,compCriterion.position_cd,component.m_visitLabelDisplay,component.m_activeLabelDisplay,component.m_historicalLabelDisplay);
if(mostRecentProblem===null||mostRecentProblem.LIFECYCLE_STATUS_MEAN==="ACTIVE"){dProblemNomenclatureId=cvObj2.GetDxProbMapping(compCriterion.person_id,compCriterion.encntr_id,5,dOriginatingNomenclatureId,component.m_problemTargetVocabCd,compCriterion.ppr_cd,compCriterion.position_cd,component.m_visitLabelDisplay,component.m_activeLabelDisplay,component.m_historicalLabelDisplay);
mostRecentProblem=null;
}nLifeStatusCodeFlag=1;
break;
case 2:if(mostRecentProblem===null||mostRecentProblem.LIFECYCLE_STATUS_MEAN==="ACTIVE"){dProblemNomenclatureId=cvObj2.GetDxProbMapping(compCriterion.person_id,compCriterion.encntr_id,5,dOriginatingNomenclatureId,component.m_problemTargetVocabCd,compCriterion.ppr_cd,compCriterion.position_cd,component.m_visitLabelDisplay,component.m_activeLabelDisplay,component.m_historicalLabelDisplay);
mostRecentProblem=null;
}nLifeStatusCodeFlag=1;
break;
case 3:if(mostRecentProblem===null||mostRecentProblem.LIFECYCLE_STATUS_MEAN==="RESOLVED"){dProblemNomenclatureId=cvObj2.GetDxProbMapping(compCriterion.person_id,compCriterion.encntr_id,6,dOriginatingNomenclatureId,component.m_problemTargetVocabCd,compCriterion.ppr_cd,compCriterion.position_cd,component.m_visitLabelDisplay,component.m_activeLabelDisplay,component.m_historicalLabelDisplay);
if(component.m_bHistoricalExpanded===false){CERN_CV_O1.initializeToggle("cvHistoricalToggle"+component.m_compObject.cvCompId,true,component.m_compObject.cvCompId);
}mostRecentProblem=null;
}nLifeStatusCodeFlag=4;
break;
default:}}catch(err){}if(dDiagnosisNomenclatureId>0||dProblemNomenclatureId>0){component.m_nNewConditionType=iType;
component.m_dNewConditionNomenclatureId=dOriginatingNomenclatureId;
component.m_nNewConditionIndx=dConditionIndx;
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var dDiagNomenID=parseFloat(dDiagnosisNomenclatureId);
var dProbNomenID=parseFloat(dProblemNomenclatureId);
var dOrigNomenID=parseFloat(dOriginatingNomenclatureId);
var dDxAddType=parseFloat(component.getVisitAddType());
var dDxAddClass=parseFloat(component.getVisitAddClass());
var dPlAddType=parseFloat(component.getActiveAddType());
var dPlAddClass=parseFloat(component.getActiveAddClass());
paramString="^MINE^,"+compCriterion.person_id.toFixed(1)+","+compCriterion.encntr_id.toFixed(1)+","+compCriterion.provider_id.toFixed(1)+","+compCriterion.position_cd.toFixed(1)+","+compCriterion.ppr_cd.toFixed(1)+","+iType+","+dDiagNomenID.toFixed(1)+","+dProbNomenID.toFixed(1)+","+dOrigNomenID.toFixed(1)+","+nLifeStatusCodeFlag+","+dDxAddType.toFixed(1)+","+dDxAddClass.toFixed(1)+","+dPlAddType.toFixed(1)+","+dPlAddClass.toFixed(1);
CERN_CV_O1.loadWithCBParameters("mp_add_condition",CERN_CV_O1.cvAddLoad,"cv",paramString,component.m_compObject.cvCompId);
}if(mostRecentProblem){var dProblemId=mostRecentProblem.PROBLEM_ID;
if(dProblemId>0){if(mostRecentProblem.PROBLEM_TYPE_FLAG==2){alertMsg=i18n.discernabu.consolproblem_o1.PROBLEM_TYPE_FLAG_2_MSG;
alert(alertMsg);
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
return;
}component.m_nNewConditionType=iType;
component.m_dNewConditionNomenclatureId=dOriginatingNomenclatureId;
component.m_nNewConditionIndx=dConditionIndx;
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
component.m_nRefreshCount++;
paramString="^MINE^,"+dProblemId.toFixed(1)+","+compCriterion.provider_id.toFixed(1)+","+compCriterion.ppr_cd.toFixed(1)+","+nLifeStatusCodeFlag+","+0+","+0;
CERN_CV_O1.loadWithCBParameters("mp_modify_problem",CERN_CV_O1.cvRefresh,"cv",paramString,component.m_compObject.cvCompId);
}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
},removeDiagnoses:function(compID){var component=MP_Util.GetCompObjById(compID);
if(Util.Style.ccss(_g("mnuCVRemoveDiagnoses"+component.m_compObject.cvCompId),"opts-menu-item-dthr")){return;
}else{CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var cvSelRows=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl");
var cvSelLen=cvSelRows.length;
var nIndex=0;
for(var i=0;
i<cvSelLen;
i++){nIndex=(cvSelRows[i].id).indexOf("IDX")+3;
var sNomenID=(cvSelRows[i].id).substring(2);
sNomenID=sNomenID.replace(compID,"");
var condition=CERN_CV_O1.getCondition(0,parseFloat((cvSelRows[i].id).substring(nIndex)),component.m_compObject.cvCompId);
nIndex=(cvSelRows[i].id).indexOf("IDX")+3;
var nIndex2=(cvSelRows[i].id).indexOf("UNIQ");
var dNomenclatureId=parseFloat((cvSelRows[i].id).substring(2));
var dConditionIndx=parseFloat((cvSelRows[i].id).substring(nIndex,nIndex2));
var mostRecentProblem=CERN_CV_O1.getMostRecentProblem(0,dConditionIndx,component.m_compObject.cvCompId);
var iNumberOfDiagnoses=condition.DIAGNOSES.length;
for(var iDiagnosisIndex=0;
iDiagnosisIndex<iNumberOfDiagnoses;
iDiagnosisIndex++){var diagnosis=condition.DIAGNOSES[iDiagnosisIndex];
if(diagnosis.ENCOUNTER_ID==component.m_compObject.criterion.encntr_id){CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
component.m_nRefreshCount++;
var diagID=parseFloat(diagnosis.DIAGNOSIS_ID);
var paramString="^MINE^,"+component.m_compObject.criterion.provider_id.toFixed(1)+","+component.m_compObject.criterion.ppr_cd.toFixed(1)+","+diagID.toFixed(1)+","+0+","+-1;
CERN_CV_O1.loadWithCBParameters("mp_modify_diagnosis",CERN_CV_O1.cvRefresh,"cv",paramString,component.m_compObject.cvCompId);
component.m_nNewConditionType=0;
component.m_dNewConditionNomenclatureId=dNomenclatureId;
component.m_nNewConditionIndx=dConditionIndx;
if(mostRecentProblem===null||mostRecentProblem.LIFECYCLE_STATUS_MEAN==="RESOLVED"||mostRecentProblem.LIFECYCLE_STATUS_MEAN==="INACTIVE"){if(component.m_bHistoricalExpanded===false){CERN_CV_O1.initializeToggle("cvHistoricalToggle"+component.m_compObject.cvCompId,true,component.m_compObject.cvCompId);
}}}}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
}},modifyProblem:function(compID,mnuItemID){var component=MP_Util.GetCompObjById(compID);
if(Util.Style.ccss(_g(mnuItemID),"opts-menu-item-dthr")){return;
}else{CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
var cvSelRows=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl");
var cvSelLen=cvSelRows.length;
var dNomenclatureId=0;
var dConditionIndx=0;
var nIndex=0;
if(cvSelLen>0){var statusFlag=0;
var classification2MedInd=0;
var confirmProblemInd=0;
switch(mnuItemID){case"mnuCVCancel"+compID:statusFlag=2;
break;
case"mnuCVInactive"+compID:statusFlag=3;
break;
case"mnuCVResolve"+compID:statusFlag=4;
break;
case"mnuCVMedical"+compID:classification2MedInd=1;
break;
case"mnuCVConfirmProblem"+compID:confirmProblemInd=1;
break;
default:statusFlag=0;
}var nomenArray=[];
var nomenArrayCnt=0;
var nomenProcessed=false;
for(var i=0;
i<cvSelLen;
i++){dNomenclatureId=((cvSelRows[i].id).substring(2));
dNomenclatureId=parseFloat(dNomenclatureId.replace(compID,""));
nIndex=(cvSelRows[i].id).indexOf("IDX")+3;
dConditionIndx=parseFloat((cvSelRows[i].id).substring(nIndex));
nomenProcessed=false;
nomenArrayCnt=nomenArray.length;
for(var j=0;
j<nomenArrayCnt;
j++){if(nomenArray[j]==dConditionIndx){nomenProcessed=true;
break;
}}if(nomenProcessed){continue;
}nomenArray[nomenArrayCnt]=dConditionIndx;
var mostRecentProblem=CERN_CV_O1.getMostRecentProblem(0,dConditionIndx,component.m_compObject.cvCompId);
if(mostRecentProblem===null||mostRecentProblem.PROBLEM_ID===0){continue;
}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
component.m_nRefreshCount++;
var dMrpProbID=parseFloat(mostRecentProblem.PROBLEM_ID);
var paramString="^MINE^,"+dMrpProbID.toFixed(1)+","+component.m_compObject.criterion.provider_id.toFixed(1)+","+component.m_compObject.criterion.ppr_cd.toFixed(1)+","+statusFlag+","+classification2MedInd+","+confirmProblemInd;
CERN_CV_O1.loadWithCBParameters("mp_modify_problem",CERN_CV_O1.cvRefresh,"cv",paramString,component.m_compObject.cvCompId);
if(statusFlag==3||statusFlag==4){var mostRecentDiagnosis=CERN_CV_O1.getMostRecentDiagnosis(0,parseFloat(dConditionIndx),component.m_compObject.cvCompId);
if(mostRecentDiagnosis===null||mostRecentDiagnosis.ENCOUNTER_ID!==component.m_compObject.criterion.encntr_id){if(component.m_bHistoricalExpanded===false){CERN_CV_O1.initializeToggle("cvHistoricalToggle"+component.m_compObject.cvCompId,true,component.m_compObject.cvCompId);
}}}component.m_nNewConditionType=3;
component.m_dNewConditionNomenclatureId=dNomenclatureId;
component.m_nNewConditionIndx=dConditionIndx;
}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
}},getMostRecentProblem:function(dNomenclatureId,dConditionIndx,compID){var condition=CERN_CV_O1.getCondition(dNomenclatureId,dConditionIndx,compID);
if(condition){if(condition.PROBLEMS.length>0){var mostRecentProblem=condition.PROBLEMS[0];
return mostRecentProblem;
}}return null;
},getMostRecentDiagnosis:function(dNomenclatureId,dConditionIndx,compID){var condition=CERN_CV_O1.getCondition(dNomenclatureId,dConditionIndx,compID);
if(condition){if(condition.DIAGNOSES.length>0){var mostRecentDiagnosis=condition.DIAGNOSES[0];
return mostRecentDiagnosis;
}}return null;
},getMostRecentEncntrDiagnosis:function(dNomenclatureId,dConditionIndx,compID){var component=MP_Util.GetCompObjById(compID);
var condition=CERN_CV_O1.getCondition(dNomenclatureId,dConditionIndx,compID);
if(condition){var diagnosesLen=condition.DIAGNOSES.length;
if(diagnosesLen>0){var mostRecentDiagnosis=0;
for(var i=0;
i<diagnosesLen;
i++){mostRecentDiagnosis=condition.DIAGNOSES[i];
if(mostRecentDiagnosis.ENCOUNTER_ID==component.m_compObject.criterion.encntr_id){return mostRecentDiagnosis;
}}}}return null;
},moveCondition:function(compID,mnuItemID){var component=MP_Util.GetCompObjById(compID);
if(Util.Style.ccss(_g(mnuItemID),"opts-menu-item-dthr")){return;
}else{var cvSelRows=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl");
var cvSelLen=cvSelRows.length;
var dNomenclatureId=0;
var moveToActiveID="mnuCVMoveToActive"+compID;
var moveToThisVisitID="mnuCVMoveToThisVisit"+compID;
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
if(cvSelLen>0){for(var i=0;
i<cvSelLen;
i++){dNomenclatureId=((cvSelRows[i].id).substring(2));
dNomenclatureId=parseFloat(dNomenclatureId.replace(compID,""));
switch(mnuItemID){case moveToActiveID:CERN_CV_O1.addConditionWithType(dNomenclatureId,2,0,compID);
break;
case moveToThisVisitID:CERN_CV_O1.addConditionWithType(dNomenclatureId,0,0,compID);
break;
default:}}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
}},getCondition:function(dNomenclatureId,dConditionIndx,compID){var component=MP_Util.GetCompObjById(compID);
var condition=null;
if(component.m_loadedConditions){condition=CERN_CV_O1.findCondition(dNomenclatureId,dConditionIndx,component.m_loadedConditions.DATA.THIS_VISIT,compID);
if(condition===null){condition=CERN_CV_O1.findCondition(dNomenclatureId,dConditionIndx,component.m_loadedConditions.DATA.ACTIVE,compID);
}if(condition===null){condition=CERN_CV_O1.findCondition(dNomenclatureId,dConditionIndx,component.m_loadedConditions.DATA.HISTORICAL,compID);
}}return condition;
},findCondition:function(dNomenclatureId,dConditionIndx,arrConditions,compID){var iLength=arrConditions.length;
for(var iIndex=0;
iIndex<iLength;
iIndex++){if(dNomenclatureId>0){if(arrConditions[iIndex].NOMENCLATURE_ID==dNomenclatureId){return arrConditions[iIndex];
}}else{if(dConditionIndx>0){if(arrConditions[iIndex].CONDITION_INDEX==dConditionIndx){return arrConditions[iIndex];
}}}}return null;
},cvBuildConditionAddOptions:function(nAddTypeDisp,compID){var component=MP_Util.GetCompObjById(compID);
var addTypeSpan=_g("cvAddTypeSpan"+component.m_compObject.cvCompId);
if(addTypeSpan){Util.de(addTypeSpan);
}addTypeSpan=Util.ce("span");
var addTypeInnerHTMLArr=[];
var sDisplay="";
switch(nAddTypeDisp){case 0:sDisplay=component.m_visitLabelDisplay;
break;
case 1:sDisplay=component.m_visitLabelDisplay+" "+i18n.discernabu.consolproblem_o1.AND+" "+component.m_activeLabelDisplay;
break;
case 2:sDisplay=component.m_activeLabelDisplay;
break;
case 3:sDisplay=component.m_historicalLabelDisplay;
break;
default:if(component.m_canAddConditionFlag===1||component.m_canAddConditionFlag===3){sDisplay=component.m_visitLabelDisplay;
}else{sDisplay=component.m_activeLabelDisplay;
}break;
}switch(component.m_canAddConditionFlag){case 1:addTypeInnerHTMLArr.push('<span class="cvAddTypeSpan" id="cvAddTypeSpan',component.m_compObject.cvCompId,'">',sDisplay,"&nbsp;",'<div class="mnu-selectWindow cv-menu2 menu-hide" id="cvAddTypeMenu',component.m_compObject.cvCompId,'">','<div class="mnu-labelbox">',sDisplay,"</div>",'<div class="mnu-contentbox">','<div class="cv-AddTypeOpt" id="mnuCVAddTypeTV',component.m_compObject.cvCompId,'">',component.m_visitLabelDisplay,"</div></div></div></span>");
break;
case 2:addTypeInnerHTMLArr.push('<span class="cvAddTypeSpan" id="cvAddTypeSpan',component.m_compObject.cvCompId,'">',sDisplay,"&nbsp;",'<div class="mnu-selectWindow cv-menu2 menu-hide" id="cvAddTypeMenu',component.m_compObject.cvCompId,'">','<div class="mnu-labelbox">',sDisplay,"</div>",'<div class="mnu-contentbox">','<div class="cv-AddTypeOpt" id="mnuCVAddTypeAC',component.m_compObject.cvCompId,'">',component.m_activeLabelDisplay,"</div>",'<div class="cv-AddTypeOpt" id="mnuCVAddTypeHS',component.m_compObject.cvCompId,'">',component.m_historicalLabelDisplay,"</div></div></div></span>");
break;
case 3:addTypeInnerHTMLArr.push('<span class="cvAddTypeSpan" id="cvAddTypeSpan',component.m_compObject.cvCompId,'">',sDisplay,"&nbsp;",'<div class="mnu-selectWindow cv-menu2 menu-hide" id="cvAddTypeMenu',component.m_compObject.cvCompId,'">','<div class="mnu-labelbox">',sDisplay,"</div>",'<div class="mnu-contentbox">','<div class="cv-AddTypeOpt" id="mnuCVAddTypeTV',component.m_compObject.cvCompId,'">',component.m_visitLabelDisplay,"</div>",'<div class="cv-AddTypeOpt" id="mnuCVAddTypeTvAc',component.m_compObject.cvCompId,'">',component.m_visitLabelDisplay+" "+i18n.discernabu.consolproblem_o1.AND+" "+component.m_activeLabelDisplay,"</div>",'<div class="cv-AddTypeOpt" id="mnuCVAddTypeAC',component.m_compObject.cvCompId,'">',component.m_activeLabelDisplay,"</div>",'<div class="cv-AddTypeOpt" id="mnuCVAddTypeHS',component.m_compObject.cvCompId,'">',component.m_historicalLabelDisplay,"</div></div></div></span>");
break;
}addTypeSpan.innerHTML=addTypeInnerHTMLArr.join("");
var secAddTypeList=Util.Style.g("cv-AddLabel",_g(component.m_compObject.cvCompId),"span")[0];
Util.ia(addTypeSpan,secAddTypeList);
var addTypeMenu=_g("cvAddTypeMenu"+component.m_compObject.cvCompId);
Util.addEvent(_g("cvAddTypeSpan"+component.m_compObject.cvCompId),"click",function(){if(component.m_nProcessing===0){if(Util.Style.ccss(addTypeMenu,"menu-hide")){Util.Style.rcss(addTypeMenu,"menu-hide");
}else{Util.Style.acss(addTypeMenu,"menu-hide");
}var optMenuCVAddDiv=_g("cvControlsDiv"+component.m_compObject.cvCompId);
var spanElement=_g("cvAddTypeSpan"+component.m_compObject.cvCompId);
addTypeMenu.style.left=spanElement.offsetLeft+"px";
addTypeMenu.style.top=(optMenuCVAddDiv.offsetTop+(optMenuCVAddDiv.offsetHeight/2))+"px";
}});
Util.addEvent(_g("cvAddTypeSpan"+component.m_compObject.cvCompId),"mouseover",CERN_CV_O1.addBorder);
Util.addEvent(_g("cvAddTypeSpan"+component.m_compObject.cvCompId),"mouseout",CERN_CV_O1.removeBorder);
var menuRows=Util.Style.g("cv-AddTypeOpt",addTypeMenu,"div");
var mnLen=menuRows.length;
for(var i=mnLen;
i--;
){Util.addEvent(menuRows[i],"mousedown",function(){CERN_CV_O1.cvHandleAddTypeEvents(component.m_compObject.cvCompId);
});
}CERN_CV_O1.closeMenuInit(component.m_compObject.cvCompId,addTypeMenu);
},cvHandleAddTypeEvents:function(compID){var component=MP_Util.GetCompObjById(compID);
var oEvent=window.event;
var oTarget=oEvent.target||oEvent.srcElement;
if(oEvent.type=="mousedown"){var cvAddTypeSp=_g("cvAddTypeSpan"+compID);
if(oTarget.id=="mnuCVAddTypeTV"+compID){component.m_cvAddAsType=0;
}else{if(oTarget.id=="mnuCVAddTypeTvAc"+compID){component.m_cvAddAsType=1;
}else{if(oTarget.id=="mnuCVAddTypeAC"+compID){component.m_cvAddAsType=2;
}else{if(oTarget.id=="mnuCVAddTypeHS"+compID){component.m_cvAddAsType=3;
}}}}CERN_CV_O1.cvBuildConditionAddOptions(component.m_cvAddAsType,compID);
}},setSelectedIndex:function(listBox,value){for(var i=0;
i<listBox.options.length;
i++){if(listBox.options[i].value==value){listBox.options[i].selected=true;
}}},cvAddLoad:function(xhr,sec,compID,functionID){var component=MP_Util.GetCompObjById(compID);
var msgCondition=xhr;
var alertMsg="";
var jsonCondition=null;
var noProblemPriv=false;
var noDiagnosisPriv=false;
var newFunctionID=functionID;
if(msgCondition){jsonCondition=JSON.parse(msgCondition);
}if(jsonCondition){var m_nNewConditionType=jsonCondition.CONDITION_REPORT.NEWCONDITIONTYPE;
if(jsonCondition.CONDITION_REPORT.PROBLEM.length>0&&jsonCondition.CONDITION_REPORT.PROBLEM[0].RECORD_DATA.PRIVILEGE_IND===0){noProblemPriv=true;
}if(jsonCondition.CONDITION_REPORT.DIAGNOSIS.length>0&&jsonCondition.CONDITION_REPORT.DIAGNOSIS[0].RECORD_DATA.PRIVILEGE_IND===0){noDiagnosisPriv=true;
}if(noProblemPriv&&noDiagnosisPriv){alertMsg=i18n.discernabu.consolproblem_o1.NO_PRIVS_MSG;
alert(alertMsg);
}else{if(noProblemPriv){if(m_nNewConditionType===3){alertMsg=i18n.discernabu.consolproblem_o1.NO_ADD_CONDITION_MSG.replace("{0}",component.m_historicalLabelDisplay);
}else{alertMsg=i18n.discernabu.consolproblem_o1.NO_ADD_CONDITION_MSG.replace("{0}",component.m_activeLabelDisplay);
}alert(alertMsg);
}else{if(noDiagnosisPriv){alertMsg=i18n.discernabu.consolproblem_o1.NO_ADD_CONDITION_MSG.replace("{0}",component.m_visitLabelDisplay);
alert(alertMsg);
}}}var sTargetSection=null;
var bHasDiagnosisDuplicate=(jsonCondition.CONDITION_REPORT.DIAGNOSIS.length>0&&jsonCondition.CONDITION_REPORT.DIAGNOSIS[0].RECORD_DATA.DUPLICATES.length>0);
var bHasProblemDuplicate=(jsonCondition.CONDITION_REPORT.PROBLEM.length>0&&jsonCondition.CONDITION_REPORT.PROBLEM[0].RECORD_DATA.DUPLICATE_IND==1);
if(m_nNewConditionType==1&&bHasDiagnosisDuplicate&&bHasProblemDuplicate){sTargetSection=component.m_visitLabelDisplay+" "+i18n.discernabu.consolproblem_o1.AND+" "+component.m_activeLabelDisplay;
}else{if(m_nNewConditionType==3&&bHasProblemDuplicate){sTargetSection=component.m_historicalLabelDisplay;
}else{if(bHasDiagnosisDuplicate){sTargetSection=component.m_visitLabelDisplay;
}else{if(bHasProblemDuplicate){sTargetSection=component.m_activeLabelDisplay;
}}}}if(sTargetSection){var sDuplicateMessage=i18n.discernabu.consolproblem_o1.DUPLICATE_MSG.replace(/\{0\}/g,sTargetSection);
alert(sDuplicateMessage);
component.m_dNewConditionNomenclatureId=0;
component.m_nNewConditionIndx=0;
}if(jsonCondition.CONDITION_REPORT.DIAGNOSIS.length>0){newFunctionID=0;
}else{newFunctionID=2;
}component.m_bHistoricalExpanded=CERN_CV_O1.isExpanded("cvHistoricalToggle"+compID);
component.m_bActiveExpanded=CERN_CV_O1.isExpanded("cvActiveToggle"+compID);
component.m_nRefreshCount++;
CERN_CV_O1.cvRefresh(xhr,component.m_compObject.sec,compID,newFunctionID);
}},cvRefresh:function(xhr,sec,compID,functionID){var component=MP_Util.GetCompObjById(compID);
var msgCondition=xhr;
var alertMsg="";
var jsonCondition="";
var refreshAr=[];
var cRpt="";
var cRptLen=0;
component.m_nRefreshCount--;
if(component.m_cvProbDxObj){if(component.m_nNewConditionType==0&&(component.m_dNewConditionNomenclatureId>0||component.m_nNewConditionIndx>0)){try{component.m_cvProbDxObj.RefreshDiagnosisCollection(component.m_compObject.criterion.person_id,component.m_compObject.criterion.encntr_id);
}catch(err){}}else{if((component.m_nNewConditionType==2||component.m_nNewConditionType==3)&&(component.m_dNewConditionNomenclatureId>0||component.m_nNewConditionIndx>0)){try{component.m_cvProbDxObj.RefreshProblemCollection(component.m_compObject.criterion.person_id);
}catch(err){}}else{if(component.m_nNewConditionType==1&&(component.m_dNewConditionNomenclatureId>0||component.m_nNewConditionIndx>0)){try{component.m_cvProbDxObj.RefreshDiagnosisCollection(component.m_compObject.criterion.person_id,component.m_compObject.criterion.encntr_id);
component.m_cvProbDxObj.RefreshProblemCollection(component.m_compObject.criterion.person_id);
}catch(err){}}}}}if(msgCondition){jsonCondition=JSON.parse(msgCondition);
}if(functionID===0){cRpt=jsonCondition.CONDITION_REPORT.DIAGNOSIS[0].RECORD_DATA;
}else{if(functionID===1){cRpt=jsonCondition.CONDITION_DATA;
}else{if(functionID===2){cRpt=jsonCondition.CONDITION_REPORT.PROBLEM[0].RECORD_DATA;
}}}if(jsonCondition&&cRpt.PRIVILEGE_IND===0){alertMsg=i18n.discernabu.consolproblem_o1.NO_PRIVS_MSG;
alert(alertMsg);
CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
CERN_CV_O1.updateCVMenu(component.m_compObject.cvCompId);
return;
}else{if(component.m_nRefreshCount===0){CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
component.m_bHistoricalExpanded=CERN_CV_O1.isExpanded("cvHistoricalToggle"+component.m_compObject.cvCompId);
component.m_bActiveExpanded=CERN_CV_O1.isExpanded("cvActiveToggle"+component.m_compObject.cvCompId);
refreshAr.push("^MINE^",component.m_compObject.criterion.person_id+".0",component.m_compObject.criterion.provider_id+".0",component.m_compObject.criterion.encntr_id+".0",component.m_compObject.criterion.ppr_cd+".0",component.m_compObject.criterion.position_cd+".0","^"+component.m_compObject.criterion.category_mean+"^",component.getDefaultSearchVocab()+".0");
MP_Core.XMLCclRequestWrapper(component,"MP_GET_CONDITIONS",refreshAr,true);
}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,-1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
},isExpanded:function(sElementId){var toggleElement=_g(sElementId);
var grandparent=Util.gp(Util.gp(toggleElement));
return !Util.Style.ccss(grandparent,"closed");
},hoverRefresh:function(o,l){for(var i=0;
i<l;
i++){var curDet=o[i];
curDet.style.display="none";
}},cvBuildClassificationMenu:function(compID,filterFlag){var component=MP_Util.GetCompObjById(compID);
var classificationSpan=_g("cvClassFilterSpan"+component.m_compObject.cvCompId);
if(classificationSpan){Util.de(classificationSpan);
}var classType="";
switch(filterFlag){case 0:classType=i18n.discernabu.consolproblem_o1.ALL;
break;
case 1:classType=i18n.discernabu.consolproblem_o1.MEDICAL_AND_PATIENT_STATED;
break;
}var classMenuSpan=Util.ce("span");
var classInnerHTMLArr=[];
classInnerHTMLArr.push('<span class="cvClassFilterSpan" id="cvClassFilterSpan',component.m_compObject.cvCompId,'">',classType,"&nbsp;",'<div class="mnu-selectWindow cv-menu2 menu-hide" id="cvClassFilterMenu',component.m_compObject.cvCompId,'">','<div class="mnu-labelbox">',classType,"</div>",'<div class="mnu-contentbox">','<div class="cv-ClassOpt" id="mnuCVClassificationAll',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.ALL,"</div>",'<div class="cv-ClassOpt" id="mnuCVClassificationPSMed',component.m_compObject.cvCompId,'">',i18n.discernabu.consolproblem_o1.MEDICAL_AND_PATIENT_STATED,"</div></div></div></span>");
classMenuSpan.innerHTML=classInnerHTMLArr.join("");
var secClassificationTgl=Util.Style.g("cv-ClassFilterLabel",component.m_compObject.cvCompSec,"span")[0];
Util.ia(classMenuSpan,secClassificationTgl);
var classFilterMenu=_g("cvClassFilterMenu"+component.m_compObject.cvCompId);
Util.addEvent(_g("cvClassFilterSpan"+component.m_compObject.cvCompId),"click",function(){if(component.m_nProcessing===0){if(Util.Style.ccss(classFilterMenu,"menu-hide")){Util.Style.rcss(classFilterMenu,"menu-hide");
}else{Util.Style.acss(classFilterMenu,"menu-hide");
}var optMenuCVClassDiv=_g("cvClassificationDiv"+component.m_compObject.cvCompId);
var spanElement=_g("cvClassFilterSpan"+component.m_compObject.cvCompId);
classFilterMenu.style.left=spanElement.offsetLeft+"px";
classFilterMenu.style.top=optMenuCVClassDiv.offsetTop+"px";
}});
var classFilterSpan=_g("cvClassFilterSpan"+component.m_compObject.cvCompId);
Util.addEvent(classFilterSpan,"mouseover",CERN_CV_O1.addBorder);
Util.addEvent(classFilterSpan,"mouseout",CERN_CV_O1.removeBorder);
var menuRows=Util.Style.g("cv-ClassOpt",classFilterMenu,"div");
var mnLen=menuRows.length;
for(var i=mnLen;
i--;
){Util.addEvent(menuRows[i],"mousedown",function(){CERN_CV_O1.cvHandleClassificationEvents(component.m_compObject.cvCompId);
});
}CERN_CV_O1.closeMenuInit(component.m_compObject.cvCompId,classFilterMenu);
},cvHandleClassificationEvents:function(compID){function checkReady(){var checkReadyAr=[];
if(xhr.readyState===4){if(xhr.status===200){MP_Util.LogScriptCallInfo(MP_Util.GetCompObjById(compID),this,"consolidatedproblems.js","cvHandleClassificationEvents");
checkReadyAr.push("^MINE^",component.m_compObject.criterion.person_id+".0",component.m_compObject.criterion.provider_id+".0",component.m_compObject.criterion.encntr_id+".0",component.m_compObject.criterion.ppr_cd+".0",component.m_compObject.criterion.position_cd+".0","^"+component.m_compObject.criterion.category_mean+"^",component.getDefaultSearchVocab()+".0");
MP_Core.XMLCclRequestWrapper(component,"MP_GET_CONDITIONS",checkReadyAr,true);
}else{alert(i18n.discernabu.consolproblem_o1.FILTER_MSG);
}}}var component=MP_Util.GetCompObjById(compID);
var oEvent=window.event;
var oTarget=oEvent.target||oEvent.srcElement;
var paramString="";
if(oEvent.type=="mousedown"){var selValue="0";
if(oTarget.id=="mnuCVClassificationAll"+compID){selValue="0";
}else{if(oTarget.id=="mnuCVClassificationPSMed"+compID){selValue="1";
}}CERN_CV_O1.processingUI(component,"cvProcessing"+component.m_compObject.cvCompId,1,true,CERN_CV_O1.updateCVActions,component.m_compObject.cvCompId);
switch(selValue){case"0":paramString="^MINE^, "+component.m_compObject.criterion.provider_id+",^NPM_CLASS_VIEW_FILTER^,^0^";
break;
case"1":paramString="^MINE^, "+component.m_compObject.criterion.provider_id+",^NPM_CLASS_VIEW_FILTER^,^1^";
break;
}var xhr=new XMLCclRequest();
xhr.onreadystatechange=checkReady;
xhr.open("GET","mp_maintain_user_prefs",true);
xhr.send(paramString);
}},renderConditionDetails:function(component,oCondition){var detListLength=0;
var detLeftOverCnt=0;
var sConditionDetailArr=[];
var j=0;
var df=component.getDateFormatter();
sConditionDetailArr.push('<h4 class="cv-det-hd"><span>',i18n.discernabu.consolproblem_o1.DIAGNOSIS_DETAILS,'</span></h4><div class="hvr">','<dl class="cv-det">','<dt class="cv-det-name"><span>',i18n.discernabu.consolproblem_o1.CONDITION,":</span></dt>",'<dd class="cv-det-name">',oCondition.DISPLAY);
if(oCondition.NOMENCLATURE_ID==0){sConditionDetailArr.push("<span> (free text)</span>");
}sConditionDetailArr.push("</dd>");
detListLength=oCondition.PROBLEMS.length;
for(j=0;
j<detListLength;
j++){sConditionDetailArr.push('<dt class="cv-det-name"><span>',i18n.discernabu.consolproblem_o1.PROBLEM_STATUS,":</span></dt>",'<dd class="cv-det-name">',oCondition.PROBLEMS[j].LIFECYCLE_STATUS_DISP,"</dd>");
if(oCondition.PROBLEMS[j].CLASSIFICATION_DISPLAY!==""){sConditionDetailArr.push('<dd class="cv-det-name"><span>',i18n.discernabu.consolproblem_o1.CLASSIFICATION,":</span></dd>",'<dd class="cv-det-name">',oCondition.PROBLEMS[j].CLASSIFICATION_DISPLAY,"</dd>");
}}sConditionDetailArr.push('<dt class="cv-det-name"><span>',i18n.discernabu.consolproblem_o1.RECENT_VISITS,":</span></dt>",'<dd class="cv-det-name"></dd>');
detListLength=oCondition.DIAGNOSES.length;
if(detListLength===0){sConditionDetailArr.push('<dt class="cv-det-name"></dt>','<dd class="cv-det-name">--</dd>');
}else{if(detListLength>5){detLeftOverCnt=detListLength-5;
detListLength=5;
}for(j=0;
j<detListLength;
j++){var dateTime=new Date();
var diagDate="";
if(oCondition.DIAGNOSES[j].DIAGNOSIS_DT_TM!==""){dateTime.setISO8601(oCondition.DIAGNOSES[j].DIAGNOSIS_DT_TM);
diagDate=df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
}sConditionDetailArr.push('<dt class="cv-det-name"></dt>','<dd class="cv-det-name"><span class="cv-dx-text">',diagDate,"</span></dd>");
if(oCondition.DIAGNOSES[j].CLASSIFICATION_DISPLAY!==""){sConditionDetailArr.push('<dd class="cv-det-name"><span>',i18n.discernabu.consolproblem_o1.CLASSIFICATION,":</span></dd>",'<dd class="cv-det-name">',oCondition.DIAGNOSES[j].CLASSIFICATION_DISPLAY,"</dd>");
}}if(detLeftOverCnt>0){sConditionDetailArr.push("</br>",'<dt class="cv-det-name"></dt>','<dd class="cv-det-name"><span class="cv-dx-text">',detLeftOverCnt," more</span></dd>");
}detLeftOverCnt=0;
}sConditionDetailArr.push("</dl></div>");
var commentCnt=oCondition.COMMENTS.length;
var indx=(commentCnt>3)?3:commentCnt;
var commentLength=0;
var charLimit=600;
var breakComment=false;
if(indx>0){sConditionDetailArr.push('<dl class="cv-comment hover"><dt class="cv-det-name"><span>Comment:</span></dt>');
for(var j=0;
j<indx;
j++){var oComments=oCondition.COMMENTS[j];
var sComment=oComments.TEXT.replace(/\r\n|\r|\n/g,"<br />");
if((commentLength+sComment.length)>charLimit){sComment=sComment.substring(0,(charLimit-commentLength));
breakComment=true;
}if(oComments.COMMENT_DT_TM.substring(0,7)==sComment.substring(0,7)||oComments.COMMENT_DT_TM.substring(1,8)==sComment.substring(0,7)){sConditionDetailArr.push('<dt class="cv-det-name"></dt><dd class="cv-det-name">',sComment,"</dd>");
}else{sConditionDetailArr.push('<dt class="cv-det-name"></dt><dd class="cv-det-name">',oComments.COMMENT_DT_TM," - ",oComments.AUTHOR_NAME,": ",sComment,"</dd>");
}commentLength=commentLength+sComment.length;
if(breakComment){break;
}}if(breakComment||commentCnt>3){sConditionDetailArr.push('<dt class="cv-det-name"></dt><dd class="cv-det-name">more...</dd>');
}sConditionDetailArr.push("</dl>");
}return sConditionDetailArr.join("");
},expCol:function(compID,togElement){var gpp=Util.gp(togElement);
if(Util.Style.ccss(gpp,"closed")){Util.Style.rcss(gpp,"closed");
togElement.innerHTML="-";
togElement.title=i18n.HIDE_SECTION;
}else{Util.Style.acss(gpp,"closed");
togElement.innerHTML="+";
togElement.title=i18n.SHOW_SECTION;
var optMenuCV=_g("moreOptMenuCV"+compID);
if(optMenuCV){Util.Style.acss(optMenuCV,"menu-hide");
}}},expColSecHdr:function(compID,togElement){var rowType="";
var gpp=Util.gp(togElement);
if(Util.Style.ccss(gpp,"closed")){var cvSelRows=Util.Style.g("condition-selected",_g("cvContent"+compID),"dl");
var cvSelLen=cvSelRows.length;
if(cvSelLen>0){for(var i=0;
i<cvSelLen;
i++){rowType=(cvSelRows[i].id).substring(0,2);
if((togElement.id=="cvActiveToggle"+compID)&&(rowType=="AC")){Util.Style.rcss(cvSelRows[i],"condition-selected");
Util.Style.rcss(cvSelRows[i],"row-selected");
}else{if((togElement.id=="cvHistoricalToggle"+compID)&&(rowType=="HX")){Util.Style.rcss(cvSelRows[i],"condition-selected");
Util.Style.rcss(cvSelRows[i],"row-selected");
}}}}}},initializeToggle:function(sElementId,bExpanded,compID){var toggleElement=_g(sElementId);
Util.addEvent(toggleElement,"click",function(){CERN_CV_O1.expCol(compID,toggleElement);
});
Util.addEvent(toggleElement,"click",function(){CERN_CV_O1.expColSecHdr(compID,toggleElement);
});
var grandparent=Util.gp(Util.gp(toggleElement));
if(!bExpanded){Util.Style.acss(grandparent,"closed");
toggleElement.innerHTML="+";
toggleElement.title=i18n.SHOW_SECTION;
}else{if(Util.Style.ccss(grandparent,"closed")){Util.Style.rcss(grandparent,"closed");
this.innerHTML="-";
this.title=i18n.HIDE_SECTION;
}}},closeMenuInit:function(compID,inMenu){var menuId="cv"+compID;
if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}function menuLeave(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}},addBorder:function(){if(!Util.Style.ccss(this,"mnu-border")){Util.Style.acss(this,"mnu-border ");
}},removeBorder:function(){if(Util.Style.ccss(this,"mnu-border")){Util.Style.rcss(this,"mnu-border");
}},initDragDrop:function(compID){var component=MP_Util.GetCompObjById(compID);
dndArray=Util.Style.g("tv-info",_g("cvContent"+component.m_compObject.cvCompId),"span");
dndLen=dndArray.length;
for(var x=0,a=dndLen;
x<a;
x++){new CERN_CV_O1.dragObject(dndArray[x],null,null,null,CERN_CV_O1.onCVStartDrag,CERN_CV_O1.onm_cvDragging,CERN_CV_O1.onCVEndDrag,false,component.m_compObject.cvCompId);
}dndArray=Util.Style.g("ac-info",_g("cvContent"+component.m_compObject.cvCompId),"span");
dndLen=dndArray.length;
for(var x=0,a=dndLen;
x<a;
x++){new CERN_CV_O1.dragObject(dndArray[x],null,null,null,CERN_CV_O1.onCVStartDrag,CERN_CV_O1.onm_cvDragging,CERN_CV_O1.onCVEndDrag,false,component.m_compObject.cvCompId);
}dndArray=Util.Style.g("hs-info",_g("cvContent"+component.m_compObject.cvCompId),"span");
dndLen=dndArray.length;
for(var x=0,a=dndLen;
x<a;
x++){new CERN_CV_O1.dragObject(dndArray[x],null,null,null,CERN_CV_O1.onCVStartDrag,CERN_CV_O1.onm_cvDragging,CERN_CV_O1.onCVEndDrag,false,component.m_compObject.cvCompId);
}},m_cvDropLocationTV:function(compID){var component=MP_Util.GetCompObjById(compID);
var TV=_g("cvTV"+compID);
component.m_cvDropLocation="cvTV"+compID;
},m_cvDropLocationAC:function(compID){var component=MP_Util.GetCompObjById(compID);
var AC=_g("cvAC"+compID);
component.m_cvDropLocation="cvAC"+compID;
},m_cvResetDropLocation:function(compID){var component=MP_Util.GetCompObjById(compID);
component.m_cvDropLocation="";
},onCVStartDrag:function(eventObj,element,compID){var component=MP_Util.GetCompObjById(compID);
if(component.m_nProcessing===0){var x=element.parentNode;
var elTopPos=15;
component.m_sPlaceHolder=Util.ce("DIV");
component.m_cvSourceSection=element.className;
while(x.nodeName!="DL"&&x.nodeName!="BODY"){x=x.parentNode;
}component.m_cvDragNomenId=parseFloat((x.id).substring(2));
var cvCursorOffsetPos=getPosition(eventObj);
var cvDivOffsetPos=Util.goff(_g(component.m_compObject.cvModRootId));
var cvDragOffsetTop=cvCursorOffsetPos.y-cvDivOffsetPos[1];
element.style.top=cvDragOffsetTop+"px";
element.style.left="0px";
while(x.nodeName!="DIV"&&x.nodeName!="BODY"){x=x.parentNode;
}component.m_cvDragParentDiv=x.id;
if("cvTV"+compID==x.id){component.m_sList=_g("cv-TVList"+compID);
}else{if("cvAC"+compID==x.id){component.m_sList=_g("cv-ACList"+compID);
}else{if("cvHX"+compID==x.id){component.m_sList=_g("cv-HXList"+compID);
}}}}},onm_cvDragging:function(newPos,element,eventObj,compID){var component=MP_Util.GetCompObjById(compID);
if(component.m_cvDragging==false&&component.m_nProcessing==0&&component.m_sPlaceHolder!=null){if(component.m_cvDragNomenId>0){if(component.m_cvDragParentDiv=="cvHX"+compID){Util.Style.acss(_g("cvTV"+compID),"drop-sections");
Util.Style.acss(_g("cvAC"+compID),"drop-sections");
}else{if(component.m_cvDragParentDiv=="cvTV"+compID){Util.Style.acss(_g("cvAC"+compID),"drop-sections");
}else{if(component.m_cvDragParentDiv=="cvAC"+compID){Util.Style.acss(_g("cvTV"+compID),"drop-sections");
}}}component.m_sPlaceHolder.id="dragPlaceHolder";
component.m_sPlaceHolder.className="cv-info";
var x=element.parentNode;
while(x.nodeName!="DL"&&x.nodeName!="BODY"){x=x.parentNode;
}element.className="drag";
component.m_sList.insertBefore(component.m_sPlaceHolder,x);
component.setEditMode(true);
var cvDets=Util.Style.g("hvr");
var detLen=cvDets.length;
CERN_CV_O1.hoverRefresh(cvDets,detLen);
component.m_sPlaceHolder.innerHTML=element.innerHTML;
component.m_cvDragging=true;
}else{element.style.top="0px";
element.style.left="0px";
component.m_cvSourceSection="";
component.m_cvDragging=false;
component.m_cvDropLocation=="";
component.m_sPlaceHolder=null;
var alertMsg=i18n.discernabu.consolproblem_o1.NO_ACTION_FREETEXT;
alert(alertMsg);
}}},onCVEndDrag:function(element,compID){var component=MP_Util.GetCompObjById(compID);
var sNomenclatureId="";
var dNomenclatureId=0;
if(component.m_nProcessing==0&&component.m_sPlaceHolder!=null){if(component.m_sPlaceHolder.className!=""){component.m_sList.removeChild(component.m_sPlaceHolder);
component.m_sPlaceHolder.className="";
}element.className=component.m_cvSourceSection;
element.style.top="0px";
element.style.left="0px";
component.m_cvSourceSection="";
var selectLen=Util.Style.g("condition-selected",_g("cvContent"+component.m_compObject.cvCompId),"dl").length;
if(selectLen<=0){component.setEditMode(true);
cvDets=Util.Style.g("hvr");
detLen=cvDets.length;
for(var i=detLen;
i--;
){cvDets[i].style.display="";
}}if(component.m_cvDragging){Util.Style.rcss(_g("cvTV"+compID),"drop-sections");
Util.Style.rcss(_g("cvAC"+compID),"drop-sections");
if(component.m_cvDragParentDiv!="cvTV"+compID&&component.m_cvDropLocation==="cvTV"+compID){if(parseFloat(component.m_compObject.criterion.encntr_id)===0){alert(i18n.discernabu.consolproblem_o1.ENCNTR_MSG);
return;
}if(component.m_canAddConditionFlag===1||component.m_canAddConditionFlag===3){sNomenclatureId=String(component.m_cvDragNomenId);
dNomenclatureId=parseFloat(sNomenclatureId.replace(compID,""));
CERN_CV_O1.addConditionWithType(dNomenclatureId,0,0,compID);
}else{alertMsg=i18n.discernabu.consolproblem_o1.NO_ADD_CONDITION_MSG.replace("{0}",component.m_visitLabelDisplay);
alert(alertMsg);
}}else{if(component.m_cvDragParentDiv!="cvAC"+compID&&component.m_cvDropLocation==="cvAC"+compID){if(component.m_canAddConditionFlag===2||component.m_canAddConditionFlag===3){sNomenclatureId=String(component.m_cvDragNomenId);
dNomenclatureId=parseFloat(sNomenclatureId.replace(compID,""));
CERN_CV_O1.addConditionWithType(dNomenclatureId,2,0,compID);
}else{alertMsg=i18n.discernabu.consolproblem_o1.NO_ADD_CONDITION_MSG.replace("{0}",component.m_activeLabelDisplay);
alert(alertMsg);
}}}}component.m_cvDragging=false;
component.m_cvDropLocation="";
component.m_sPlaceHolder=null;
if(selectLen<=0){component.setEditMode(false);
}}},cancelEvent:function(e){e=e?e:window.event;
if(e.stopPropagation){e.stopPropagation();
}if(e.preventDefault){e.preventDefault();
}e.cancelBubble=true;
e.cancel=true;
e.returnValue=false;
return false;
},Position:function(x,y){this.X=x;
this.Y=y;
this.Add=function(val){var newPos=new CERN_CV_O1.Position(this.X,this.Y);
if(val){if(!isNaN(val.X)){newPos.X+=val.X;
}if(!isNaN(val.Y)){newPos.Y+=val.Y;
}}return newPos;
};
this.Subtract=function(val){var newPos=new CERN_CV_O1.Position(this.X,this.Y);
if(val){if(!isNaN(val.X)){newPos.X-=val.X;
}if(!isNaN(val.Y)){newPos.Y-=val.Y;
}}return newPos;
};
this.Min=function(val){var newPos=new CERN_CV_O1.Position(this.X,this.Y);
if(val==null){return newPos;
}if(!isNaN(val.X)&&this.X>val.X){newPos.X=val.X;
}if(!isNaN(val.Y)&&this.Y>val.Y){newPos.Y=val.Y;
}return newPos;
};
this.Max=function(val){var newPos=new CERN_CV_O1.Position(this.X,this.Y);
if(val==null){return newPos;
}if(!isNaN(val.X)&&this.X<val.X){newPos.X=val.X;
}if(!isNaN(val.Y)&&this.Y<val.Y){newPos.Y=val.Y;
}return newPos;
};
this.Bound=function(lower,upper){var newPos=this.Max(lower);
return newPos.Min(upper);
};
this.Check=function(){var newPos=new CERN_CV_O1.Position(this.X,this.Y);
if(isNaN(newPos.X)){newPos.X=0;
}if(isNaN(newPos.Y)){newPos.Y=0;
}return newPos;
};
this.Apply=function(element){if(typeof element=="string"){return;
}if(!isNaN(this.X)){element.style.left=this.X+"px";
}if(!isNaN(this.Y)){element.style.top=this.Y+"px";
}};
},absoluteCursorPostion:function(eventObj){eventObj=eventObj?eventObj:window.event;
if(isNaN(window.scrollX)){return new CERN_CV_O1.Position(eventObj.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,eventObj.clientY+document.documentElement.scrollTop+document.body.scrollTop);
}else{return new CERN_CV_O1.Position(eventObj.clientX+window.scrollX,eventObj.clientY+window.scrollY);
}},dragObject:function(element,attachElement,lowerBound,upperBound,startCallback,moveCallback,endCallback,attachLater,compID){if(typeof element=="string"){element=_g(element);
}if(element==null){return;
}if(lowerBound!=null&&upperBound!=null){var temp=lowerBound.Min(upperBound);
upperBound=lowerBound.Max(upperBound);
lowerBound=temp;
}var cursorStartPos=null;
var elementStartPos=null;
var dragging=false;
var listening=false;
var disposed=false;
var componentID=compID;
function dragStart(eventObj,componentID){eventObj=eventObj?eventObj:window.event;
if(dragging||!listening||disposed){return;
}dragging=true;
if(startCallback!=null){startCallback(eventObj,element,componentID);
}cursorStartPos=CERN_CV_O1.absoluteCursorPostion(eventObj);
elementStartPos=new CERN_CV_O1.Position(parseInt(element.style.left),parseInt(element.style.top));
elementStartPos=elementStartPos.Check();
Util.addEvent(document,"mousemove",function(){dragGo(null,componentID);
});
Util.addEvent(document,"mouseup",function(){dragStopHook(null,componentID);
});
return CERN_CV_O1.cancelEvent(eventObj);
}function dragGo(eventObj,componentID){eventObj=eventObj?eventObj:window.event;
if(!dragging||disposed){return;
}var newPos=CERN_CV_O1.absoluteCursorPostion(eventObj);
newPos=newPos.Add(elementStartPos).Subtract(cursorStartPos);
newPos=newPos.Bound(lowerBound,upperBound);
newPos.Apply(element);
if(moveCallback){moveCallback(newPos,element,eventObj,componentID);
}return CERN_CV_O1.cancelEvent(eventObj);
}function dragStopHook(eventObj,componentID){eventObj=eventObj?eventObj:window.event;
dragStop(componentID);
return CERN_CV_O1.cancelEvent(eventObj);
}function dragStop(componentID){if(!dragging||disposed){return;
}Util.removeEvent(document,"mousemove",function(){dragGo(componentID);
});
Util.removeEvent(document,"mouseup",function(){dragStopHook(null,componentID);
});
cursorStartPos=null;
elementStartPos=null;
if(endCallback!=null){endCallback(element,componentID);
}dragging=false;
}this.Dispose=function(componentID){if(disposed){return;
}this.StopListening(true,componentID);
element=null;
attachElement=null;
lowerBound=null;
upperBound=null;
startCallback=null;
moveCallback=null;
endCallback=null;
disposed=true;
};
this.StartListening=function(componentID){if(listening||disposed){return;
}listening=true;
Util.addEvent(attachElement,"mousedown",function(){dragStart(null,componentID);
});
};
this.StopListening=function(stopCurrentDragging,componentID){if(!listening||disposed){return;
}Util.removeEvent(attachElement,"mousedown",function(){dragStart(null,componentID);
});
listening=false;
if(stopCurrentDragging&&dragging){dragStop(componentID);
}};
this.IsDragging=function(){return dragging;
};
this.IsListening=function(){return listening;
};
this.IsDisposed=function(){return disposed;
};
if(typeof attachElement=="string"){attachElement=_g(attachElement);
}if(attachElement==null){attachElement=element;
}if(!attachLater){this.StartListening(componentID);
}}};
}();

/* jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1
}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");
d.remove();
if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);
if(!cm||!cl.createElement){cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close()
}d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)
}ck[a]=e
}return ck[a]
}function cu(a,b){var c={};
f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a
});
return c
}function ct(){cr=b
}function cs(){setTimeout(ct,0);
return cr=f.now()
}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")
}catch(b){}}function ci(){try{return new a.XMLHttpRequest
}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));
var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;
for(g=1;
g<i;
g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])
}}l=k,k=d[g];
if(k==="*"){k=l
}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];
if(!n){p=b;
for(o in e){j=o.split(" ");
if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];
if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);
break
}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))
}}}return c
}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;
for(i in g){i in d&&(c[g[i]]=d[i])
}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))
}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);
break
}}}if(f[0] in d){j=f[0]
}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;
break
}k||(k=i)
}j=j||k
}if(j){j!==f[0]&&f.unshift(j);
return d[j]
}}function ca(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)
})
}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){ca(a+"["+e+"]",b[e],c,d)
}}else{d(a,b)
}}}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};
for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])
}e&&f.extend(!0,a,e)
}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;
var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;
for(;
i<j&&(k||!l);
i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)))
}(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));
return l
}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");
if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;
for(;
e<g;
e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)
}}}
}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;
if(d>0){if(c!=="border"){for(;
g<h;
g++){c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0
}}return d+"px"
}d=bz(a,b,b);
if(d<0||d==null){d=a.style[b]||0
}d=parseFloat(d)||0;
if(c){for(;
g<h;
g++){d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0)
}}return d+"px"
}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)
}function bo(a){var b=c.createElement("div");
bh.appendChild(b),b.innerHTML=a.outerHTML;
return b.firstChild
}function bn(a){var b=(a.nodeName||"").toLowerCase();
b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)
}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked
}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]
}function bk(a,b){var c;
if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();
if(c==="object"){b.outerHTML=a.outerHTML
}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected
}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue
}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)
}}b.removeAttribute(f.expando)
}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;
if(i){delete h.handle,h.events={};
for(c in i){for(d=0,e=i[c].length;
d<e;
d++){f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)
}}}h.data&&(h.data=f.extend({},h.data))
}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a
}function U(a){var b=V.split("|"),c=a.createDocumentFragment();
if(c.createElement){while(b.length){c.createElement(b.pop())
}}return c
}function T(a,b,c){b=b||0;
if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);
return e===c
})
}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c
})
}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1
});
if(O.test(b)){return f.filter(b,d,!c)
}b=f.filter(b,d)
}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c
})
}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11
}function K(){return !0
}function J(){return !1
}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);
h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())
},0)
}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue
}if(b!=="toJSON"){return !1
}}return !0
}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();
d=a.getAttribute(e);
if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d
}catch(g){}f.data(a,c,d)
}else{d=b
}}return d
}function h(a){var b=g[a]={},c,d;
a=a.split(/\s+/);
for(c=0,d=a.length;
c<d;
c++){b[a[c]]=!0
}return b
}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")
}catch(a){setTimeout(J,1);
return
}e.ready()
}}var e=function(a,b){return new e.fn.init(a,b,h)
},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()
},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};
e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;
if(!a){return this
}if(a.nodeType){this.context=this[0]=a,this.length=1;
return this
}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;
return this
}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];
if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);
return e.merge(this,a)
}h=c.getElementById(g[2]);
if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)
}this.length=1,this[0]=h
}this.context=c,this.selector=a;
return this
}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)
}if(e.isFunction(a)){return f.ready(a)
}a.selector!==b&&(this.selector=a.selector,this.context=a.context);
return e.makeArray(a,this)
},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length
},toArray:function(){return F.call(this,0)
},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]
},pushStack:function(a,b,c){var d=this.constructor();
e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");
return d
},each:function(a,b){return e.each(this,a,b)
},ready:function(a){e.bindReady(),A.add(a);
return this
},eq:function(a){a=+a;
return a===-1?this.slice(a):this.slice(a,a+1)
},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)
},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))
},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)
}))
},end:function(){return this.prevObject||this.constructor(null)
},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;
typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);
for(;
j<k;
j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];
if(i===f){continue
}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)
}}}return i
},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);
return e
},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)
},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)
}e.isReady=!0;
if(a!==!0&&--e.readyWait>0){return
}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")
}},bindReady:function(){if(!A){A=e.Callbacks("once memory");
if(c.readyState==="complete"){return setTimeout(e.ready,1)
}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)
}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);
var b=!1;
try{b=a.frameElement==null
}catch(d){}c.documentElement.doScroll&&b&&J()
}}}},isFunction:function(a){return e.type(a)==="function"
},isArray:Array.isArray||function(a){return e.type(a)==="array"
},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a
},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)
},type:function(a){return a==null?String(a):I[C.call(a)]||"object"
},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1
}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1
}}catch(c){return !1
}var d;
for(d in a){}return d===b||D.call(a,d)
},isEmptyObject:function(a){for(var b in a){return !1
}return !0
},error:function(a){throw new Error(a)
},parseJSON:function(b){if(typeof b!="string"||!b){return null
}b=e.trim(b);
if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)
}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()
}e.error("Invalid JSON: "+b)
},parseXML:function(c){var d,f;
try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))
}catch(g){d=b
}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);
return d
},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)
})(b)
},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)
},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()
},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);
if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break
}}}else{for(;
g<h;
){if(c.apply(a[g++],d)===!1){break
}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break
}}}else{for(;
g<h;
){if(c.call(a[g],g,a[g++])===!1){break
}}}}return a
},trim:G?function(a){return a==null?"":G.call(a)
}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")
},makeArray:function(a,b){var c=b||[];
if(a!=null){var d=e.type(a);
a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)
}return c
},inArray:function(a,b,c){var d;
if(b){if(H){return H.call(b,a,c)
}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;
for(;
c<d;
c++){if(c in b&&b[c]===a){return c
}}}return -1
},merge:function(a,c){var d=a.length,e=0;
if(typeof c.length=="number"){for(var f=c.length;
e<f;
e++){a[d++]=c[e]
}}else{while(c[e]!==b){a[d++]=c[e++]
}}a.length=d;
return a
},grep:function(a,b,c){var d=[],e;
c=!!c;
for(var f=0,g=a.length;
f<g;
f++){e=!!b(a[f],f),c!==e&&d.push(a[f])
}return d
},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));
if(k){for(;
i<j;
i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)
}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)
}}return h.concat.apply([],h)
},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];
c=a,a=d
}if(!e.isFunction(a)){return b
}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))
};
g.guid=a.guid=a.guid||g.guid||e.guid++;
return g
},access:function(a,c,d,f,g,h){var i=a.length;
if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d)
}return a
}if(d!==b){f=!h&&f&&e.isFunction(d);
for(var k=0;
k<i;
k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h)
}return a
}return i?g(a[0],c):b
},now:function(){return(new Date).getTime()
},uaMatch:function(a){a=a.toLowerCase();
var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];
return{browser:b[1]||"",version:b[2]||"0"}
},sub:function(){function a(b,c){return new a.fn.init(b,c)
}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));
return e.fn.init.call(this,d,f,b)
},a.fn.init.prototype=a.fn;
var b=a(c);
return a
},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()
}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()
}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())
});
return e
}(),g={};
f.Callbacks=function(a){a=a?g[a]||h(a):{};
var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;
for(d=0,e=b.length;
d<e;
d++){g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)
}},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;
for(;
c&&l<k;
l++){if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;
break
}}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))
},o={add:function(){if(c){var a=c.length;
m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))
}return this
},remove:function(){if(c){var b=arguments,d=0,e=b.length;
for(;
d<e;
d++){for(var f=0;
f<c.length;
f++){if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);
if(a.unique){break
}}}}}return this
},has:function(a){if(c){var b=0,d=c.length;
for(;
b<d;
b++){if(a===c[b]){return !0
}}}return !1
},empty:function(){c=[];
return this
},disable:function(){c=d=e=b;
return this
},disabled:function(){return !c
},lock:function(){d=b,(!e||e===!0)&&o.disable();
return this
},locked:function(){return !d
},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));
return this
},fire:function(){o.fireWith(this,arguments);
return this
},fired:function(){return !!e
}};
return o
};
var i=[].slice;
f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e
},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);
return this
},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);
return this
},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;
f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])
}):i[a](d[e])
})
}).promise()
},promise:function(a){if(a==null){a=h
}else{for(var b in h){a[b]=h[b]
}}return a
}},i=h.promise({}),j;
for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith
}i.done(function(){e="resolved"
},c.disable,d.lock).fail(function(){e="rejected"
},b.disable,d.lock),a&&a.call(i,i);
return i
},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)
}
}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)
}
}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();
if(d>1){for(;
c<d;
c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g
}g||j.resolveWith(j,b)
}else{j!==a&&j.resolveWith(j,d?[a]:[])
}return k
}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;
q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];
if(!d||!d.length||!e){return{}
}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;
try{delete q.test
}catch(s){b.deleteExpando=!1
}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1
}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);
if(q.attachEvent){for(o in {submit:1,change:1,focusin:1}){n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p
}}k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];
!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))
});
return b
}();
var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;
f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];
return !!a&&!m(a)
},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";
if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return
}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));
if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)
}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);
if(o&&!h[c]){return g.events
}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;
return i
}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;
if(!j[k]){return
}if(b){d=c?j[k]:j[k].data;
if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));
for(e=0,g=b.length;
e<g;
e++){delete d[b[e]]
}if(!(c?m:f.isEmptyObject)(d)){return
}}}if(!c){delete j[k].data;
if(!m(j[k])){return
}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)
}},_data:function(a,b,c){return f.data(a,b,c,!0)
},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];
if(b){return b!==!0&&a.getAttribute("classid")===b
}}return !0
}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;
if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);
if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;
for(var i=0,j=e.length;
i<j;
i++){g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]))
}f._data(this[0],"parsedAttrs",!0)
}}return h
}if(typeof a=="object"){return this.each(function(){f.data(this,a)
})
}d=a.split("."),d[1]=d[1]?"."+d[1]:"";
if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));
return h===b&&d[1]?this.data(d[0]):h
}return this.each(function(){var b=f(this),e=[d[0],c];
b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)
})
},removeData:function(a){return this.each(function(){f.removeData(this,a)
})
}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))
},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);
if(b){c=c||"fx";
var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;
e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))
}},queue:function(a,b,c){var d;
if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));
return d||[]
}},dequeue:function(a,b){b=b||"fx";
var c=f.queue(a,b),d=c.shift(),e={};
d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)
},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))
}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");
if(c===b){return f.queue(this[0],a)
}return this.each(function(){var b=f.queue(this,a,c);
a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)
})
},dequeue:function(a){return this.each(function(){f.dequeue(this,a)
})
},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";
return this.queue(b,function(b,c){var d=setTimeout(b,a);
c.stop=function(){clearTimeout(d)
}
})
},clearQueue:function(a){return this.queue(a||"fx",[])
},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])
}typeof a!="string"&&(c=a,a=b),a=a||"fx";
var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;
while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)
}}m();
return d.promise()
}});
var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;
f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)
},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)
})
},prop:function(a,b){return f.access(this,a,b,!0,f.prop)
},removeProp:function(a){a=f.propFix[a]||a;
return this.each(function(){try{this[a]=b,delete this[a]
}catch(c){}})
},addClass:function(a){var b,c,d,e,g,h,i;
if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))
})
}if(a&&typeof a=="string"){b=a.split(p);
for(c=0,d=this.length;
c<d;
c++){e=this[c];
if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a
}else{g=" "+e.className+" ";
for(h=0,i=b.length;
h<i;
h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")
}e.className=f.trim(g)
}}}}return this
},removeClass:function(a){var c,d,e,g,h,i,j;
if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))
})
}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);
for(d=0,e=this.length;
d<e;
d++){g=this[d];
if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");
for(i=0,j=c.length;
i<j;
i++){h=h.replace(" "+c[i]+" "," ")
}g.className=f.trim(h)
}else{g.className=""
}}}}return this
},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";
if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)
})
}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);
while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)
}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""
}}})
},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;
for(;
c<d;
c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0
}}return !1
},val:function(a){var c,d,e,g=this[0];
if(!!arguments.length){e=f.isFunction(a);
return this.each(function(d){var g=f(this),h;
if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""
})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];
if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h
}}})
}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];
if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d
}d=g.value;
return typeof d=="string"?d.replace(q,""):d==null?"":d
}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;
return !b||b.specified?a.value:a.text
}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";
if(g<0){return null
}c=j?g:0,d=j?g+1:i.length;
for(;
c<d;
c++){e=i[c];
if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();
if(j){return b
}h.push(b)
}}if(j&&!h.length&&i.length){return f(i[g]).val()
}return h
},set:function(a,b){var c=f.makeArray(b);
f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0
}),c.length||(a.selectedIndex=-1);
return c
}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;
if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)
}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)
}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));
if(d!==b){if(d===null){f.removeAttr(a,c);
return
}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g
}a.setAttribute(c,""+d);
return d
}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g
}g=a.getAttribute(c);
return g===null?b:g
}},removeAttr:function(a,b){var c,d,e,g,h=0;
if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;
for(;
h<g;
h++){e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))
}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")
}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;
a.setAttribute("type",b),c&&(a.value=c);
return b
}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)
}return b in a?a.value:null
},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)
}a.value=b
}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;
if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);
return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]
}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");
return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b
}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);
return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b
},set:function(a,b,c){var d;
b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));
return c
}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;
d=a.getAttributeNode(c);
return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b
},set:function(a,b,d){var e=a.getAttributeNode(d);
e||(e=c.createAttribute(d),a.setAttributeNode(e));
return e.nodeValue=b+""
}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");
return c
}}})
}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)
}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);
return d===null?b:d
}})
}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b
},set:function(a,b){return a.style.cssText=""+b
}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;
b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);
return null
}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value
}}
}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0
}}})
});
var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);
b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));
return b
},H=function(a,b){var c=a.attributes||{};
return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))
},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")
};
f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;
if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b
},i.elem=a),c=f.trim(I(c)).split(" ");
for(k=0;
k<c.length;
k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];
if(!r){r=j[m]=[],r.delegateCount=0;
if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)
}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0
}a=null
}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;
if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");
for(h=0;
h<b.length;
h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];
if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)
}continue
}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;
for(n=0;
n<r.length;
n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))
}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])
}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))
}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;
if(E.test(h+f.event.triggered)){return
}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());
if((!e||f.event.customEvent[h])&&!f.event.global[h]){return
}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";
if(!e){j=f.cache;
for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)
}return
}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};
if(p.trigger&&p.trigger.apply(e,d)===!1){return
}r=[[e,p.bindType||h]];
if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;
for(;
m;
m=m.parentNode){r.push([m,s]),n=m
}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])
}for(l=0;
l<r.length&&!c.isPropagationStopped();
l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()
}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));
return c.result
}},dispatch:function(c){c=f.event.fix(c||a.event);
var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;
g[0]=c,c.delegateTarget=this;
if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;
for(l=c.target;
l!=this;
l=l.parentNode||this){o={},q=[],m[0]=l;
for(j=0;
j<e;
j++){r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r)
}q.length&&i.push({elem:l,matches:q})
}}d.length>e&&i.push({elem:this,matches:d.slice(e)});
for(j=0;
j<i.length&&!c.isPropagationStopped();
j++){p=i[j],c.currentTarget=p.elem;
for(k=0;
k<p.matches.length&&!c.isImmediatePropagationStopped();
k++){r=p.matches[k];
if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace)){c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))
}}}return c.result
},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);
return a
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;
a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);
return a
}},fix:function(a){if(a[f.expando]){return a
}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;
a=f.Event(g);
for(d=i.length;
d;
){e=i[--d],a[e]=g[e]
}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);
return h.filter?h.filter(a,g):a
},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)
},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)
}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});
d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()
}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)
}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)
},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)
}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0
},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;
var a=this.originalEvent;
!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)
},stopPropagation:function(){this.isPropagationStopped=K;
var a=this.originalEvent;
!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)
},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()
},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;
if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b
}return h
}}
}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1
}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;
d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)
}),d._submit_attached=!0)
})
},teardown:function(){if(f.nodeName(this,"form")){return !1
}f.event.remove(this,"._submit")
}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)
}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))
})
}return !1
}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;
z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)
}),b._change_attached=!0)
})
},handle:function(a){var b=a.target;
if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)
}},teardown:function(){f.event.remove(this,"._change");
return z.test(this.nodeName)
}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)
};
f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)
},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)
}}
}),f.fn.extend({on:function(a,c,d,e,g){var h,i;
if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);
for(i in a){this.on(i,c,d,a[i],g)
}return this
}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));
if(e===!1){e=J
}else{if(!e){return this
}}g===1&&(h=e,e=function(a){f().off(a);
return h.apply(this,arguments)
},e.guid=h.guid||(h.guid=f.guid++));
return this.each(function(){f.event.add(this,a,e,d,c)
})
},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)
},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;
f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);
return this
}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])
}return this
}if(c===!1||typeof c=="function"){d=c,c=b
}d===!1&&(d=J);
return this.each(function(){f.event.remove(this,a,d,c)
})
},bind:function(a,b,c){return this.on(a,null,b,c)
},unbind:function(a,b){return this.off(a,null,b)
},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);
return this
},die:function(a,b){f(this.context).off(a,this.selector||"**",b);
return this
},delegate:function(a,b,c,d){return this.on(b,a,c,d)
},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)
},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)
})
},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)
}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;
f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();
return b[e].apply(this,arguments)||!1
};
e.guid=c;
while(d<b.length){b[d++].guid=c
}return this.click(e)
},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)
}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);
return arguments.length>0?this.on(b,null,a,c):this.trigger(b)
},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)
}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;
h<i;
h++){var j=e[h];
if(j){var k=!1;
j=j[a];
while(j){if(j[d]===c){k=e[j.sizset];
break
}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);
if(typeof b!="string"){if(j===b){k=!0;
break
}}else{if(m.filter(b,[j]).length>0){k=j;
break
}}}j=j[a]
}e[h]=k
}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;
h<i;
h++){var j=e[h];
if(j){var k=!1;
j=j[a];
while(j){if(j[d]===c){k=e[j.sizset];
break
}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);
if(j.nodeName.toLowerCase()===b){k=j;
break
}j=j[a]
}e[h]=k
}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;
[0,0].sort(function(){i=!1;
return 0
});
var m=function(b,d,e,f){e=e||[],d=d||c;
var h=d;
if(d.nodeType!==1&&d.nodeType!==9){return[]
}if(!b||typeof b!="string"){return e
}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;
do{a.exec(""),i=a.exec(x);
if(i){x=i[3],w.push(i[1]);
if(i[2]){l=i[3];
break
}}}while(i);
if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)
}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);
while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)
}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);
if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;
while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)
}}else{k=w=[]
}}k||(k=j),k||m.error(q||b);
if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)
}else{if(d&&d.nodeType===1){for(t=0;
k[t]!=null;
t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])
}}else{for(t=0;
k[t]!=null;
t++){k[t]&&k[t].nodeType===1&&e.push(j[t])
}}}}else{s(k,e)
}l&&(m(l,h,e,f),m.uniqueSort(e));
return e
};
m.uniqueSort=function(a){if(u){h=i,a.sort(u);
if(h){for(var b=1;
b<a.length;
b++){a[b]===a[b-1]&&a.splice(b--,1)
}}}return a
},m.matches=function(a,b){return m(a,null,null,b)
},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0
},m.find=function(a,b,c){var d,e,f,g,h,i;
if(!a){return[]
}for(e=0,f=o.order.length;
e<f;
e++){h=o.order[e];
if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);
if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);
if(d!=null){a=a.replace(o.match[h],"");
break
}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);
return{set:d,expr:a}
},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);
while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);
if(l.substr(l.length-1)==="\\"){continue
}s===r&&(r=[]);
if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);
if(!f){g=i=!0
}else{if(f===!0){continue
}}}if(f){for(n=0;
(j=s[n])!=null;
n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))
}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");
if(!g){return[]
}break
}}}if(a===q){if(g==null){m.error(a)
}else{break
}}q=a
}return s
},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)
};
var n=m.getText=function(a){var b,c,d=a.nodeType,e="";
if(d){if(d===1||d===9){if(typeof a.textContent=="string"){return a.textContent
}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")
}for(a=a.firstChild;
a;
a=a.nextSibling){e+=n(a)
}}else{if(d===3||d===4){return a.nodeValue
}}}else{for(b=0;
c=a[b];
b++){c.nodeType!==8&&(e+=n(c))
}}return e
},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")
},type:function(a){return a.getAttribute("type")
}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;
d&&(b=b.toLowerCase());
for(var f=0,g=a.length,h;
f<g;
f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b
}}e&&m.filter(b,a,!0)
},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;
if(d&&!l.test(b)){b=b.toLowerCase();
for(;
e<f;
e++){c=a[e];
if(c){var g=c.parentNode;
a[e]=g.nodeName.toLowerCase()===b?g:!1
}}}else{for(;
e<f;
e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)
}d&&m.filter(b,a,!0)
}},"":function(a,b,c){var d,f=e++,g=x;
typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)
},"~":function(a,b,c){var d,f=e++,g=x;
typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)
}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);
return d&&d.parentNode?[d]:[]
}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);
for(var e=0,f=d.length;
e<f;
e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])
}return c.length===0?null:c
}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])
}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";
if(f){return a
}for(var g=0,h;
(h=b[g])!=null;
g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))
}return !1
},ID:function(a){return a[1].replace(j,"")
},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()
},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");
var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);
a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0
}else{a[2]&&m.error(a[0])
}a[0]=e++;
return a
},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");
!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");
return a
},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)
}else{var g=m.filter(b[3],c,d,!0^f);
d||e.push.apply(e,g);
return !1
}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0
}}return b
},POS:function(a){a.unshift(!0);
return a
}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"
},disabled:function(a){return a.disabled===!0
},checked:function(a){return a.checked===!0
},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;
return a.selected===!0
},parent:function(a){return !!a.firstChild
},empty:function(a){return !a.firstChild
},has:function(a,b,c){return !!m(c[3],a).length
},header:function(a){return/h\d/i.test(a.nodeName)
},text:function(a){var b=a.getAttribute("type"),c=a.type;
return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)
},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type
},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type
},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type
},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type
},submit:function(a){var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&"submit"===a.type
},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type
},reset:function(a){var b=a.nodeName.toLowerCase();
return(b==="input"||b==="button")&&"reset"===a.type
},button:function(a){var b=a.nodeName.toLowerCase();
return b==="input"&&"button"===a.type||b==="button"
},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)
},focus:function(a){return a===a.ownerDocument.activeElement
}},setFilters:{first:function(a,b){return b===0
},last:function(a,b,c,d){return b===d.length-1
},even:function(a,b){return b%2===0
},odd:function(a,b){return b%2===1
},lt:function(a,b,c){return b<c[3]-0
},gt:function(a,b,c){return b>c[3]-0
},nth:function(a,b,c){return c[3]-0===b
},eq:function(a,b,c){return c[3]-0===b
}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];
if(f){return f(a,c,b,d)
}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0
}if(e==="not"){var g=b[3];
for(var h=0,i=g.length;
h<i;
h++){if(g[h]===a){return !1
}}return !0
}m.error(e)
},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;
switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1
}}if(k==="first"){return !0
}l=a;
case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1
}}return !0;
case"nth":c=b[2],e=b[3];
if(c===1&&e===0){return !0
}f=b[0],g=a.parentNode;
if(g&&(g[d]!==f||!a.nodeIndex)){i=0;
for(l=g.firstChild;
l;
l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)
}g[d]=f
}j=a.nodeIndex-e;
return c===0?j===0:j%c===0&&j/c>=0
}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b
},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b
},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1
},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];
return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1
},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];
if(f){return f(a,c,b,d)
}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)
};
for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))
}var s=function(a,b){a=Array.prototype.slice.call(a,0);
if(b){b.push.apply(b,a);
return b
}return a
};
try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType
}catch(t){s=function(a,b){var c=0,d=b||[];
if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)
}else{if(typeof a.length=="number"){for(var e=a.length;
c<e;
c++){d.push(a[c])
}}else{for(;
a[c];
c++){d.push(a[c])
}}}return d
}
}var u,v;
c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;
return 0
}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1
}return a.compareDocumentPosition(b)&4?-1:1
}:(u=function(a,b){if(a===b){h=!0;
return 0
}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex
}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;
if(g===i){return v(a,b)
}if(!g){return -1
}if(!i){return 1
}while(j){e.unshift(j),j=j.parentNode
}j=i;
while(j){f.unshift(j),j=j.parentNode
}c=e.length,d=f.length;
for(var k=0;
k<c&&k<d;
k++){if(e[k]!==f[k]){return v(e[k],f[k])
}}return k===c?v(a,f[k],-1):v(e[k],b,1)
},v=function(a,b,c){if(a===b){return c
}var d=a.nextSibling;
while(d){if(d===b){return -1
}d=d.nextSibling
}return 1
}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;
a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);
return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]
}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");
return a.nodeType===1&&c&&c.nodeValue===b
}),e.removeChild(a),e=a=null
}(),function(){var a=c.createElement("div");
a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);
if(a[1]==="*"){var d=[];
for(var e=0;
c[e];
e++){c[e].nodeType===1&&d.push(c[e])
}c=d
}return c
}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)
}),a=null
}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";
b.innerHTML="<p class='TEST'></p>";
if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;
if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);
if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)
}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)
}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)
}if(h&&h[3]){var i=e.getElementById(h[3]);
if(!i||!i.parentNode){return s([],f)
}if(i.id===h[3]){return s([i],f)
}}try{return s(e.querySelectorAll(b),f)
}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);
l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);
try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)
}}catch(r){}finally{l||k.removeAttribute("id")
}}}}return a(b,e,f,g)
};
for(var e in a){m[e]=a[e]
}b=null
}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;
if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;
try{b.call(c.documentElement,"[test!='']:sizzle")
}catch(f){e=!0
}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");
if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);
if(f||!d||a.document&&a.document.nodeType!==11){return f
}}}catch(g){}}return m(c,null,null,[a]).length>0
}
}}(),function(){var a=c.createElement("div");
a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";
if(a.getElementsByClassName("e").length===1){return
}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])
}},a=null
}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)
}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)
}:m.contains=function(){return !1
},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;
return b?b.nodeName!=="HTML":!1
};
var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;
while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")
}a=o.relative[a]?a+"*":a;
for(var h=0,i=g.length;
h<i;
h++){m(a,g[h],e,c)
}return m.filter(f,e)
};
m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains
}();
var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};
f.fn.extend({find:function(a){var b=this,c,d;
if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;
c<d;
c++){if(f.contains(b[c],this)){return !0
}}})
}var e=this.pushStack("","find",a),g,h,i;
for(c=0,d=this.length;
c<d;
c++){g=e.length,f.find(a,this[c],e);
if(c>0){for(h=g;
h<e.length;
h++){for(i=0;
i<g;
i++){if(e[i]===e[h]){e.splice(h--,1);
break
}}}}}return e
},has:function(a){var b=f(a);
return this.filter(function(){for(var a=0,c=b.length;
a<c;
a++){if(f.contains(this,b[a])){return !0
}}})
},not:function(a){return this.pushStack(T(this,a,!1),"not",a)
},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)
},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)
},closest:function(a,b){var c=[],d,e,g=this[0];
if(f.isArray(a)){var h=1;
while(g&&g.ownerDocument&&g!==b){for(d=0;
d<a.length;
d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})
}g=g.parentNode,h++
}return c
}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;
for(d=0,e=this.length;
d<e;
d++){g=this[d];
while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);
break
}g=g.parentNode;
if(!g||!g.ownerDocument||g===b||g.nodeType===11){break
}}}c=c.length>1?f.unique(c):c;
return this.pushStack(c,"closest",a)
},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1
}if(typeof a=="string"){return f.inArray(this[0],f(a))
}return f.inArray(a.jquery?a[0]:a,this)
},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);
return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))
},andSelf:function(){return this.add(this.prevObject)
}}),f.each({parent:function(a){var b=a.parentNode;
return b&&b.nodeType!==11?b:null
},parents:function(a){return f.dir(a,"parentNode")
},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)
},next:function(a){return f.nth(a,2,"nextSibling")
},prev:function(a){return f.nth(a,2,"previousSibling")
},nextAll:function(a){return f.dir(a,"nextSibling")
},prevAll:function(a){return f.dir(a,"previousSibling")
},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)
},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)
},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)
},children:function(a){return f.sibling(a.firstChild)
},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)
}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);
L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());
return this.pushStack(e,a,P.call(arguments).join(","))
}
}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");
return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)
},dir:function(a,c,d){var e=[],g=a[c];
while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]
}return e
},nth:function(a,b,c,d){b=b||1;
var e=0;
for(;
a;
a=a[c]){if(a.nodeType===1&&++e===b){break
}}return a
},sibling:function(a,b){var c=[];
for(;
a;
a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)
}return c
}});
var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);
bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c.text(a.call(this,b,c.text()))
})
}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))
}return f.text(this)
},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))
})
}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);
this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;
while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild
}return a
}).append(this)
}return this
},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))
})
}return this.each(function(){var b=f(this),c=b.contents();
c.length?c.wrapAll(a):b.append(a)
})
},wrap:function(a){var b=f.isFunction(a);
return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)
})
},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)
}).end()
},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)
})
},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)
})
},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)
})
}if(arguments.length){var a=f.clean(arguments);
a.push.apply(a,this.toArray());
return this.pushStack(a,"before",arguments)
}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)
})
}if(arguments.length){var a=this.pushStack(this,"after",arguments);
a.push.apply(a,f.clean(arguments));
return a
}},remove:function(a,b){for(var c=0,d;
(d=this[c])!=null;
c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)
}}return this
},empty:function(){for(var a=0,b;
(b=this[a])!=null;
a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));
while(b.firstChild){b.removeChild(b.firstChild)
}}return this
},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;
return this.map(function(){return f.clone(this,a,b)
})
},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null
}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");
try{for(var c=0,d=this.length;
c<d;
c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)
}}catch(e){this.empty().append(a)
}}else{f.isFunction(a)?this.each(function(b){var c=f(this);
c.html(a.call(this,b,c.html()))
}):this.empty().append(a)
}return this
},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();
c.replaceWith(a.call(this,b,d))
})
}typeof a!="string"&&(a=f(a).detach());
return this.each(function(){var b=this.nextSibling,c=this.parentNode;
f(this).remove(),b?f(b).before(a):f(c).append(a)
})
}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this
},detach:function(a){return this.remove(a,!0)
},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];
if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)
})
}if(f.isFunction(j)){return this.each(function(e){var g=f(this);
a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)
})
}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;
if(g){c=c&&f.nodeName(g,"tr");
for(var l=0,m=this.length,n=m-1;
l<m;
l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)
}}k.length&&f.each(k,bp)
}return this
}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];
b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);
return{fragment:e,cacheable:g}
},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;
if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);
return this
}for(var h=0,i=e.length;
h<i;
h++){var j=(h>0?this.clone(!0):this).get();
f(e[h])[b](j),d=d.concat(j)
}return this.pushStack(d,a,e.selector)
}
}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);
if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);
for(g=0;
d[g];
++g){e[g]&&bk(d[g],e[g])
}}if(b){bj(a,h);
if(c){d=bl(a),e=bl(h);
for(g=0;
d[g];
++g){bj(d[g],e[g])
}}}d=e=null;
return h
},clean:function(a,b,d,e){var g;
b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);
var h=[],i;
for(var j=0,k;
(k=a[j])!=null;
j++){typeof k=="number"&&(k+="");
if(!k){continue
}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k)
}else{k=k.replace(Y,"<$1></$2>");
var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");
b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];
while(n--){o=o.lastChild
}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];
for(i=q.length-1;
i>=0;
--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])
}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes
}}var r;
if(!f.support.appendChecked){if(k[0]&&typeof(r=k.length)=="number"){for(i=0;
i<r;
i++){bn(k[i])
}}else{bn(k)
}}k.nodeType?h.push(k):h=f.merge(h,k)
}if(d){g=function(a){return !a.type||be.test(a.type)
};
for(j=0;
h[j];
j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j])
}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);
h.splice.apply(h,[j+1,0].concat(s))
}d.appendChild(h[j])
}}}return h
},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;
for(var h=0,i;
(i=a[h])!=null;
h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue
}c=i[f.expando];
if(c){b=d[c];
if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)
}b.handle&&(b.handle.elem=null)
}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]
}}}});
var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;
f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this
}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)
})
},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");
return c===""?"1":c
}return a.style.opacity
}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];
c=f.cssProps[i]||i;
if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g
}return j[c]
}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");
if(d==null||h==="number"&&isNaN(d)){return
}h==="number"&&!f.cssNumber[i]&&(d+="px");
if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d
}catch(l){}}}},css:function(a,c,d){var e,g;
c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");
if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e
}if(bz){return bz(a,c)
}},swap:function(a,b,c){var d={};
for(var e in b){d[e]=a.style[e],a.style[e]=b[e]
}c.call(a);
for(e in b){a.style[e]=d[e]
}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;
if(c){if(a.offsetWidth!==0){return bC(a,b,d)
}f.swap(a,bw,function(){e=bC(a,b,d)
});
return e
}},set:function(a,b){if(!bt.test(b)){return b
}b=parseFloat(b);
if(b>=0){return b+"px"
}}}
}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""
},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";
c.zoom=1;
if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");
if(d&&!d.filter){return
}}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e
}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;
f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight
});
return c
}})
}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;
b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));
return c
}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;
f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));
return f===""?"auto":f
}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;
return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"
},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)
});
var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];
try{bV=e.href
}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href
}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS){return bS.apply(this,arguments)
}if(!this.length){return this
}var e=a.indexOf(" ");
if(e>=0){var g=a.slice(e,a.length);
a=a.slice(0,e)
}var h="GET";
c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));
var i=this;
f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a
}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])
}});
return this
},serialize:function(){return f.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this
}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))
}).map(function(a,b){var c=f(this).val();
return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}
}):{name:b.name,value:c.replace(bF,"\r\n")}
}).get()
}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)
}
}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);
return f.ajax({type:c,url:a,data:d,success:e,dataType:g})
}
}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")
},getJSON:function(a,b,c){return f.get(a,b,c,"json")
},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);
return a
},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;
var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;
if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y
}if(z=v.getResponseHeader("Etag")){f.etag[k]=z
}}if(a===304){w="notmodified",o=!0
}else{try{r=cc(d,x),w="success",o=!0
}catch(A){w="parsererror",u=A
}}}else{u=w;
if(!w||a){w="error",a<0&&(a=0)
}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))
}}typeof a=="object"&&(c=a,a=b),c=c||{};
var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();
a=m[c]=m[c]||a,l[a]=b
}return this
},getAllResponseHeaders:function(){return s===2?n:null
},getResponseHeader:function(a){var c;
if(s===2){if(!o){o={};
while(c=bH.exec(n)){o[c[1].toLowerCase()]=c[2]
}}c=o[a.toLowerCase()]
}return c===b?null:c
},overrideMimeType:function(a){s||(d.mimeType=a);
return this
},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);
return this
}};
h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;
if(s<2){for(b in a){j[b]=[j[b],a[b]]
}}else{b=a[v.status],v.then(b,b)
}}return this
},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);
if(s===2){return !1
}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");
if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;
if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);
d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")
}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);
for(u in d.headers){v.setRequestHeader(u,d.headers[u])
}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();
return !1
}for(u in {success:1,error:1,complete:1}){v[u](d[u])
}p=b$(bU,d,c,v);
if(!p){w(-1,"No Transport")
}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")
},d.timeout));
try{s=1,p.send(l,w)
}catch(z){if(s<2){w(-1,z)
}else{throw z
}}}return v
},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)
};
c===b&&(c=f.ajaxSettings.traditional);
if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)
})
}else{for(var g in a){ca(g,a[g],c,e)
}}return d.join("&").replace(bD,"+")
}}),f.extend({active:0,lastModified:{},etag:{}});
var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;
f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++
}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";
if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";
b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]
},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])
}),b.converters["script json"]=function(){g||f.error(h+" was not called");
return g[0]
},b.dataTypes[0]="json";
return"script"
}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);
return a
}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)
}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;
return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")
}},e.insertBefore(d,e.firstChild)
},abort:function(){d&&d.onload(0,1)
}}
}});
var cf=a.ActiveXObject?function(){for(var a in ch){ch[a](0,1)
}}:!1,cg=0,ch;
f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ci()||cj()
}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})
}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;
return{send:function(e,g){var h=c.xhr(),i,j;
c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);
if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]
}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");
try{for(j in e){h.setRequestHeader(j,e[j])
}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;
try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);
if(e){h.readyState!==4&&h.abort()
}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;
try{k=h.statusText
}catch(o){k=""
}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)
}}}catch(p){e||g(-1,p)
}m&&g(j,k,m,l)
},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)
},abort:function(){d&&d(0,1)
}}
}});
var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;
f.fn.extend({show:function(a,b,c){var d,e;
if(a||a===0){return this.animate(cu("show",3),a,b,c)
}for(var g=0,h=this.length;
g<h;
g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)))
}for(g=0;
g<h;
g++){d=this[g];
if(d.style){e=d.style.display;
if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""
}}}return this
},hide:function(a,b,c){if(a||a===0){return this.animate(cu("hide",3),a,b,c)
}var d,e,g=0,h=this.length;
for(;
g<h;
g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))
}for(g=0;
g<h;
g++){this[g].style&&(this[g].style.display="none")
}return this
},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";
f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");
f(this)[b?"show":"hide"]()
}):this.animate(cu("toggle",3),a,b,c);
return this
},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)
},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);
var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;
b.animatedProperties={};
for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";
if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)
}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))
}b.overflow!=null&&(this.style.overflow="hidden");
for(i in a){j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""))
}return !0
}var e=f.speed(b,c,d);
if(f.isEmptyObject(a)){return this.each(e.complete,[!1])
}a=f.extend({},a);
return e.queue===!1?this.each(g):this.queue(e.queue,g)
},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);
return this.each(function(){function h(a,b,c){var e=b[c];
f.removeData(a,c,!0),e.stop(d)
}var b,c=!1,e=f.timers,g=f._data(this);
d||f._unmark(!0,this);
if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)
}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)
}for(b=e.length;
b--;
){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))
}(!d||!c)&&f.dequeue(this,a)
})
}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)
}
}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};
d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;
if(d.queue==null||d.queue===!0){d.queue="fx"
}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)
};
return d
},easing:{linear:function(a,b,c,d){return c+d*a
},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c
}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}
}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)
},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]
}var a,b=f.css(this.elem,this.prop);
return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a
},custom:function(a,c,d){function h(a){return e.step(a)
}var e=this,g=f.fx;
this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)
},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))
},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);
this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()
},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)
},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;
if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;
for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)
}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]
}),i.hide&&f(h).hide();
if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)
}}d=i.complete,d&&(i.complete=!1,d.call(h))
}return !1
}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();
return !0
}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;
for(;
c<b.length;
c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)
}b.length||f.fx.stop()
},interval:13,stop:function(){clearInterval(cp),cp=null
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)
},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now
}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)
}
}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem
}).length
});
var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;
"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;
if(a){return this.each(function(b){f.offset.setOffset(this,a,b)
})
}if(!b||!b.ownerDocument){return null
}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)
}try{c=b.getBoundingClientRect()
}catch(d){}var e=b.ownerDocument,g=e.documentElement;
if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0}
}var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;
return{top:n,left:o}
}:f.fn.offset=function(a){var b=this[0];
if(a){return this.each(function(b){f.offset.setOffset(this,a,b)
})
}if(!b||!b.ownerDocument){return null
}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)
}var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;
while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed"){break
}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c
}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft
}f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));
return{top:l,left:m}
},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;
f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);
return{top:b,left:c}
},setOffset:function(a,b,c){var d=f.css(a,"position");
d==="static"&&(a.style.position="relative");
var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;
j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)
}},f.fn.extend({position:function(){if(!this[0]){return null
}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();
c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;
return{top:c.top-d.top,left:c.left-d.left}
},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;
while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent
}return a
})
}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;
f.fn[d]=function(c){var e,g;
if(c===b){e=this[0];
if(!e){return null
}g=cy(e);
return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]
}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c
})
}
}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();
f.fn["inner"+c]=function(){var a=this[0];
return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null
},f.fn["outer"+c]=function(a){var b=this[0];
return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null
},f.fn[d]=function(a){var e=this[0];
if(!e){return a==null?null:this
}if(f.isFunction(a)){return this.each(function(b){var c=f(this);
c[d](a.call(this,b,c[d]()))
})
}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;
return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g
}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c])
}if(a===b){var i=f.css(e,d),j=parseFloat(i);
return f.isNumeric(j)?j:i
}return this.css(d,typeof a=="string"?a:a+"px")
}
}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f
})
})(window);
var JSON;
if(!JSON){JSON={}
}(function(){function f(n){return n<10?"0"+n:n
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()
}
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null"
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){if(typeof rep[i]==="string"){k=rep[i];
v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" "
}}else{if(typeof space==="string"){indent=space
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})
}
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v
}else{delete value[k]
}}}}return reviver.call(holder,key,value)
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j
}throw new SyntaxError("JSON.parse")
}
}}());
if(typeof(DOMParser)==="undefined"){var xmldata=null;
DOMParser=function(){};
DOMParser.prototype.parseFromString=function(b,c){var a=c;
if(typeof(ActiveXObject)!=="undefined"){xmldata=new ActiveXObject("MSXML.DomDocument");
xmldata.async=false;
xmldata.loadXML(b);
return xmldata
}else{if(typeof(XMLHttpRequest)!=="undefined"){xmldata=new XMLHttpRequest();
if(!a){a="application/xml"
}xmldata.open("GET","data:"+a+";charset=utf-8,"+encodeURIComponent(b),false);
if(xmldata.overrideMimeType){xmldata.overrideMimeType(a)
}xmldata.send(null);
return xmldata.responseXML
}}}
}if(!Function.prototype.bind){Function.prototype.bind=function(){var c=this,b=Array.prototype.slice.call(arguments),a=b.shift();
return function(){return c.apply(a,b.concat(Array.prototype.slice.call(arguments)))
}
}
}function disableSelection(a){if(typeof a.onselectstart!=="undefined"){a.onselectstart=function(){return false
}
}else{if(typeof a.style.MozUserSelect!=="undefined"){a.style.MozUserSelect="none"
}else{a.onmousedown=function(){return false
}
}}a.style.cursor="default"
}Array.range=function(d,b,m,a){var g=[];
var n="bad";
var j=typeof d;
switch(j){case"number":case"string":n=(+d);
break
}var c="bad";
j=typeof m;
switch(j){case"number":case"string":c=(+m);
break
}if(n==="bad"||isNaN(n)){}else{if((n<=0)&&(c==="bad"||isNaN(c))){}else{var h=(c==="bad"||isNaN(c))?0:c;
var f=(a===undefined)||a?h:h+1;
var k=(b===undefined)||!b?n-1:n;
var e=0;
if(k<f){}else{for(e=f;
e<=k;
e++){g.push(e)
}}}}return g
};
Array.prototype.each=function(c){function a(d){var h=false;
var g=d.length;
var e=0;
for(e=0;
e<g;
e++){var f=c(e,d[e]);
h=d.length!==g;
if((f===false)||h){break
}}return h
}var b=null;
do{b=a(this)
}while(b);
return this
};
Array.prototype.replace=function(e,d,c){var b=0;
if(e!==undefined){if(d!==undefined){var f=(+d);
if(!isNaN(f)&&f>=0&&f<=this.length-1){var a=c===undefined?undefined:(+c);
if(isNaN(a)||a<0||a<f||a>=this.length){this[f]=e
}else{if(f<=a&&a<=this.length-1){for(b=f;
b<=a;
b++){this[b]=e
}}}}}}return this
};
Array.prototype.isEmpty=function(){return !this.length
};
Array.prototype.contains=function(a){return $.inArray(a,this)!==-1
};
Array.prototype.remove=function(c){var a=$.inArray(c,this);
var b=a!==-1;
b&&(this.splice(a,1));
return this
};
Array.prototype.removeAll=function(e){var a,d,c,b;
a=e;
for(c=0,b=a.length;
c<b;
c++){d=a[c];
this.remove(d)
}return this
};
Array.prototype.insert=function(c,b){var a=b===undefined?(this.length?this.length-1:0):b;
this.splice(a,0,c);
return this
};
Array.prototype.insertAll=function(b,a){b.each(function(d,c){this.insert(a,0,c)
});
return this
};
Array.prototype.and=function(f){var e,a,d,c,b;
e=[];
a=[].concat(this);
for(c=0,b=a.length;
c<b;
c++){d=a[c];
f.contains(d)&&e.push(d)
}return e
};
Array.prototype.not=function(a){return[].concat(this).removeAll(this.and(a))
};
Array.prototype.equals=function(a){return this.length===a.length===this.and(a).length
};
Array.prototype.containsAny=function(a){return this.and(a).length
};
Array.prototype.containsAll=function(a){return this.and(a).length===a.length
};
Date.prototype.midnight=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0)
};
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")
};
String.prototype.padStartWithZeros=function(a){var b=this+"";
if(b.length<a){Array.range(a-b.length).each(function(d,c){b="0"+b
})
}return b
};
String.prototype.padEndWithZeros=function(a){var b=this+"";
if(b.length<a){Array.range(a-b.length).each(function(d,c){b=b+"0"
})
}return b
};
Number.prototype.removeTrailingZeros=function(){return +(""+this)
};
var registerNS=function(d){var c=d.split(".");
var a=window;
var b=0;
for(b=0;
b<c.length;
b++){if(a[c[b]]===null||typeof(a[c[b]])!=="object"){a[c[b]]={}
}a=a[c[b]]
}};
registerNS("com.cerner.oncology.util");
com.cerner.oncology.util=com.cerner.oncology.util;
com.cerner.oncology.util.getViewportWidth=function(){var a=0;
if(document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth
}else{if(document.body&&document.body.clientWidth){a=document.body.clientWidth
}else{if(window.innerWidth){a=window.innerWidth-18
}}}return a
};
com.cerner.oncology.util.getViewportHeight=function(){var a=0;
if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight
}else{if(document.body&&document.body.clientHeight){a=document.body.clientHeight
}else{if(window.innerHeight){a=window.innerHeight-18
}}}return a
};
com.cerner.oncology.util.getViewportScrollX=function(){var a=0;
if(document.documentElement&&document.documentElement.scrollLeft){a=document.documentElement.scrollLeft
}else{if(document.body&&document.body.scrollLeft){a=document.body.scrollLeft
}else{if(window.pageXOffset){a=window.pageXOffset
}else{if(window.scrollX){a=window.scrollX
}}}}return a
};
com.cerner.oncology.util.getViewportScrollY=function(){var a=0;
if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop
}else{if(document.body&&document.body.scrollTop){a=document.body.scrollTop
}else{if(window.pageYOffset){a=window.pageYOffset
}else{if(window.scrollY){a=window.scrollY
}}}}return a
};
com.cerner.oncology.util.getAbsoluteViewportWidth=function(){return(+com.cerner.oncology.util.getViewportWidth())+com.cerner.oncology.util.getViewportScrollX()
};
com.cerner.oncology.util.getAbsoluteViewportHeight=function(){return(+com.cerner.oncology.util.getViewportHeight())+com.cerner.oncology.util.getViewportScrollY()
};
com.cerner.oncology.util.stripUnit=function(a){return parseInt(a.replace(/[^\d\.]/g,""),10)
};
com.cerner.oncology.util.positionPopup=function(a,g){$(a).css("position","absolute");
var b=com.cerner.oncology.util.getAbsoluteViewportWidth();
var d=com.cerner.oncology.util.getAbsoluteViewportHeight();
var j=$(a).width();
var h=$(a).height();
var k=(+g.clientX)+com.cerner.oncology.util.getViewportScrollX();
var i=(+g.clientY)+com.cerner.oncology.util.getViewportScrollY();
if((k+j+10)>=b){var f=g.pageX-j-10;
$(a).css({left:f<0?0:f})
}else{$(a).css({left:(+g.pageX)+10})
}if((i+h+10)>=d){var c=g.pageY-h-10;
$(a).css({top:c<0?0:c})
}else{$(a).css({top:(+g.pageY)+10})
}};
com.cerner.oncology.util.movePopupToBody=function(a){$("#"+a).remove().appendTo("body")
};
com.cerner.oncology.util.createRow=function(d,g,c,b){var f=$(document.createElement("tr"));
c&&c.length&&$(f).addClass(c.join(" "));
var e=b&&b.length?b.join(" "):[];
var a=$(document.createElement(g?"th":"td"));
Array.range(d).each(function(j,h){var k=$(a).clone();
e.length&&k.addClass(e);
$(f).append(k)
});
return f
};
com.cerner.oncology.util.createTable=function(b,f,c){var d=$(document.createElement("table")).attr("summary",b);
f&&$(d).attr("id",f);
c&&c.length&&$(d).addClass(c.join(" "));
var e=$(document.createElement("thead"));
$(d).append(e);
var a=$(document.createElement("tbody"));
$(d).append(a);
return d
};
com.cerner.oncology.util.getTextWidth=function(b){var c,a;
c=$(document.createElement("div")).hide();
$("body").append(c);
$(c).text($(b).text());
a=$(c).width();
$(c).remove();
return a
};
com.cerner.oncology.util.findLongestText=function(b){var d,c,a,e;
a=0;
for(d=0,c=$(b).length;
d<c;
d++){e=com.cerner.oncology.util.getTextWidth(b[d]);
a=e>a?e:a
}return a
};
com.cerner.oncology.util.isTextOverflowing=function(a){return com.cerner.oncology.util.getTextWidth(a)>$(a).width()
};
com.cerner.oncology.util.loadBedrockConfig=function(c){var a,b;
b=c.toLowerCase();
if(window.m_bedrockMpage){a=$.grep(m_bedrockMpage.MPAGE[0].COMPONENT,function(f,d){return f.FILTER_MEAN===c
})
}return a&&a.length?a[0]:null
};
registerNS("com.cerner.mpage");
com.cerner.mpage.call=function(a,c,b){return function(d){var e=new XMLCclRequest();
e.onreadystatechange=function(){if(e.readyState===4&&e.status===200){var f=true;
try{var h=$.parseJSON(e.responseText);
var j=null;
for(var g in h){if(h[g]["STATUS_DATA"]){j=h[g]["STATUS_DATA"];
break
}}if(j&&j.STATUS){if(b){b(j)
}else{if(/[fp]/i.test(j.STATUS)){alert("status block = "+JSON.stringify(j)+"\nscript = "+a+"\nscript inputs = "+d);
f=false
}}}f&&c(h)
}catch(k){alert("error name = "+k.name+"\nerror message = "+k.message+"\nscript = "+a+"\nscript inputs = "+d+"\nreply = "+e.responseText)
}}else{if(e.status>=400&&e.status<=599){alert("server error during ajax call.\nscript = "+a+"\nscript inputs ="+d+"\najax.statusText = "+e.statusText)
}}};
e.open("GET",a);
e.send(d)
}
};
registerNS("com.cerner.oncology.ctreview");
$.extend(com.cerner.oncology.ctreview,{Bedrock:function(){this.types=[];
this.currScrollNum=0;
this.currScroll=false;
this.histScrollNum=0;
this.histScroll=false;
this.histOpen=false;
this.histLookback=180;
this.loadResponses=true;
this.setTreatmentTypes=function(a){this.types=a||[]
};
this.setCurrentScrollNum=function(a){this.currScrollNum=a
};
this.setCurrentScroll=function(a){this.currScroll=a
};
this.setHistoricalScrollNum=function(a){this.histScrollNum=a
};
this.setHistoricalScroll=function(a){this.histScroll=a
};
this.setHistoricalOpen=function(a){this.histOpen=a
};
this.setHistoricalLookback=function(a){this.histLookback=a
};
this.setLoadResponses=function(a){this.loadResponses=a
}
},bedrock:null,rootDir:"../",popupLabelWidth:0,formatDate:function(a){var b="";
if(a){b=new Date();
b.setISO8601(a);
b=b.format(i18n.discernabu.ctreview.DATE_FORMAT)
}return b
},createTreatmentName:function(b,c,e){var a,d;
d=$(document.createElement("p")).addClass("default-6B6245 ellipses-6B6245");
a=$(document.createElement("img")).addClass("image-6B6245").attr({src:e?this.rootDir+"/images/6404_16.png":this.rootDir+"/images/5893.gif",alt:e?"power plan":"regimen"});
$(d).append(a).append(b);
$(d).hover(function(k){var h,g,j,f,i;
f=com.cerner.oncology.util.getTextWidth;
i=0;
h=0;
j=$(k.delegateTarget).parent().siblings();
g=this.bedrock.loadResponses?0:1;
$("#id-6B6245-23").text(b);
i=f($("#id-6B6245-23"));
i>h&&(h=i);
$("#id-6B6245-14").text(c);
i=f($("#id-6B6245-14"));
i>h&&(h=i);
$("#id-6B6245-16").text($(j[1-g]).text());
i=f($("#id-6B6245-16"));
i>h&&(h=i);
$("#id-6B6245-18").text($(j[2-g]).text());
i=f($("#id-6B6245-18"));
i>h&&(h=i);
$("#id-6B6245-20").text($(j[3-g]).text());
i=f($("#id-6B6245-20"));
i>h&&(h=i);
!c?$("#id-6B6245-24").hide():$("#id-6B6245-24").show();
!$("#id-6B6245-20").text()?$("#id-6B6245-25").hide():$("#id-6B6245-25").show();
$(".data-6B6245").width(h+10);
$("#id-6B6245-12").width(h+this.popupLabelWidth+30);
$("#id-6B6245-12").show();
com.cerner.oncology.util.positionPopup($("#id-6B6245-12"),k)
}.bind(this),function(){$("#id-6B6245-12").hide()
});
return d
},createCycleName:function(b,a){var d,e,c;
d=$(document.createElement("p")).addClass("default-6B6245 cycleName-6B6245 ellipses-6B6245");
c={"0":i18n.PREVIOUS,"1":i18n.CURRENT,"2":i18n.discernabu.ctreview.NEXT};
if(a>=0){e=(c[a]||"")+": "+b
}else{e=b
}$(d).text(e);
$(d).hover(function(g){var f,h;
h=com.cerner.oncology.util.getTextWidth(this)+(+$(this).css("padding-left").match(/\d*/)[0]);
f=$(this).parent().width();
if(h>f){$("#id-6B6245-11").text($(d).text());
$("#id-6B6245-2").show();
com.cerner.oncology.util.positionPopup($("#id-6B6245-2"),g)
}},function(){$("#id-6B6245-2").hide()
});
return d
},createResponse:function(a){var b;
b=$(document.createElement("p")).addClass("default-6B6245");
if(a){$(b).hover(function(c){var d=a.CODE+". "+(a.TEXT.length>255?a.TEXT.slice(0,254)+"...":a.TEXT);
$("#id-6B6245-11").text(d+" "+i18n.discernabu.ctreview.CHARTED_ON+": "+this.formatDate(a.CHART_DATE)+", "+i18n.discernabu.ctreview.BY+" "+a.CHART_PRSNL_NAME+".");
$("#id-6B6245-2").show();
com.cerner.oncology.util.positionPopup($("#id-6B6245-2"),c)
}.bind(this),function(){$("#id-6B6245-2").hide()
})
}else{a={CODE:""}
}return $(b).text(a.CODE)
},createStatus:function(a){var b=$(document.createElement("p")).addClass("default-6B6245");
return $(b).text(a)
},createDate:function(b,a){var e,c;
c=$(document.createElement("p")).addClass("default-6B6245");
e=!b?"":this.formatDate(b);
return $(c).text(a?"Est.* "+e:e)
},setTableScrolling:function(){var f,h,d,a,g,c,b,e;
d=$.browser.msie&&$.browser.version==="6.0";
a=$.browser.msie&&/^(7|8)/.test($.browser.version);
c=false;
if(this.bedrock.currScroll&&this.bedrock.currScrollNum){h=$("#id-6B6245-26");
g=$("#id-6B6245-9").children().length;
b=this.bedrock.currScrollNum;
if(g>b){$(h).height(b*18);
if(a){f=$("#id-6B6245-28 .widthStartTime-6B6245");
e=$(f).width();
$(f).width(e+13)
}c=true
}}if(this.bedrock.histScroll&&this.bedrock.histScrollNum){h=$("#id-6B6245-27");
g=$("#id-6B6245-10").children().length;
b=this.bedrock.histScrollNum;
if(g>b){$(h).height(b*18);
if(a){f=$("#id-6B6245-29 .widthStopTime-6B6245");
e=$(f).width();
$(f).width(e+13)
}c=true
}}if(c){d&&$("#id-6B6245-1").css("padding-right","10px")
}},resizeTables:function(){var b,e,a,d,c;
a=com.cerner.oncology.util.findLongestText;
c=a($(".widthStopTime-6B6245"));
c=c+5;
$(".widthStopTime-6B6245").width(c);
b=$("#id-6B6245-28 .widthStartTime-6B6245");
c=a(b);
c=c+7;
$(b).width(c);
b=$("#id-6B6245-29 .widthStartTime-6B6245");
c=a(b);
c=c+7;
$(b).width(c);
c=a($(".widthStatus-6B6245"));
c=c+7;
$(".widthStatus-6B6245").width(c);
if(this.bedrock.loadResponses){c=a($(".widthResponse-6B6245"));
$(".widthResponse-6B6245").width(c)
}else{$(".widthResponse-6B6245").remove();
$(".scrollable-6B6245").each(function(){e=$(this).parent().attr("colspan");
$(this).parent().attr("colspan",(+e)-1)
})
}$("#id-6B6245-28 .widthStopTime-6B6245").remove();
d=$("#id-6B6245-26").parent();
e=$(d).attr("colspan");
$(d).attr("colspan",(+e)-1);
this.setTableScrolling()
},setComponentMessage:function(c){var b,a;
b=$("#id-6B6245-1").closest('div[class~="sec-content"]');
if(b){a=$(b).prev().find('span[class~="sec-total"]');
$(a).text(c)
}},loadTreatment:function(d){var c,g,f,b,a,e;
e=0;
a=function(h){return{total:function(i){$("#id-6B6245-"+h).text(" ("+i+")")
}}
};
b=function(j){var h,i;
i=com.cerner.oncology.util.createRow(5);
$("#id-6B6245-"+j).append(i);
h=$(document.createElement("p")).addClass("res-none");
$(i).children(":first").append(h);
$(h).text(i18n.NO_RESULTS_FOUND)
};
c=function(h){var i,k,j;
i=h%2?"even":"odd";
k=com.cerner.oncology.util.createRow(5,false,[i]);
$(k).hover(function(){$(k).attr("class","hover-6B6245")
},function(){$(k).attr("class",i)
});
j=$(k).children();
$(j[0]).addClass("widthName-6B6245 ellipses-6B6245");
$(j[1]).addClass("widthResponse-6B6245");
$(j[2]).addClass("widthStatus-6B6245");
$(j[3]).addClass("widthStartTime-6B6245");
$(j[4]).addClass("widthStopTime-6B6245");
return k
};
g=function(n,k){var m,i,o,h,j,l;
l=$(n).children();
if(typeof k.ACCESS_IND!=="undefined"&&!k.ACCESS_IND){m=false;
i=undefined;
o="";
h="";
j=""
}else{m=k.START_EST_IND;
i=!k.RESPONSE_CODE?undefined:{CODE:k.RESPONSE_CODE,TEXT:k.RESPONSE_TEXT,CHART_DATE:k.RESPONSE_CHART_DATE,CHART_PRSNL_NAME:k.RESPONSE_CHART_PRSNL_NAME};
o=k.START;
h=k.STATUS;
j=k.STOP
}$(l[1]).append(this.createResponse(i));
$(l[2]).append(this.createStatus(h));
$(l[3]).append(this.createDate(o,m));
$(l[4]).append(this.createDate(j,false))
}.bind(this);
f=function(u,x,n){var q,j,s,v,o,m,t,w,y,r;
t=u.length;
t?a(n).total(t):b(x);
if(t){v=typeof u[0].CYCLES!=="undefined";
for(s=0;
s<t;
s++){j=u[s];
y=c(s);
$("#id-6B6245-"+x).append(y);
g(y,j);
r=$(y).children();
var h=this.createTreatmentName(j.NAME,j.ORDERED_AS,j.TYPE_FLAG===1);
$(r[0]).append(h);
if(v){w=j.CYCLES.length;
if(j.TYPE_FLAG===0&&!w){$(r[0]).append(this.createCycleName(i18n.discernabu.ctreview.NO_PLANS,-1))
}else{for(o=0,m=w;
o<m;
o++){q=j.CYCLES[o];
y=c(s);
$("#id-6B6245-"+x).append(y);
g(y,q);
r=$(y).children();
$(r[0]).append(this.createCycleName(q.NAME,q.CYCLE_FLAG))
}}}}}return t
}.bind(this);
e=f(d.TREATMENT.CURRENT,"9","7");
e=e+f(d.TREATMENT.HISTORICAL,"10","8");
this.setComponentMessage("("+e+")");
this.resizeTables()
},retrieveTreatment:function(){var a,b;
b=function(c){this.loadTreatment(c)
}.bind(this);
a="^MINE^,$PAT_PersonId$,$USR_PersonId$,$PAT_PPRCode$,"+(this.bedrock.histLookback)+",value("+this.bedrock.types.join(",")+"),"+(+this.bedrock.loadResponses)+",0";
this.setComponentMessage(i18n.LOADING_DATA+"...");
com.cerner.mpage.call("onc_mp_chemotherapy_review",b)(a)
},registerTableToggles:function(){$(".subSec-6B6245").click(function(d){var c,a,b;
b=$(d.delegateTarget).next();
c=$(b).is(":hidden");
a=$(d.delegateTarget).children(":first").children(":first");
if(c){$(d.delegateTarget).removeClass("closed");
$(a).attr("title","Collapse");
$(a).text("-")
}else{$(d.delegateTarget).addClass("closed");
$(a).attr("title","Expand");
$(a).text("+")
}$(b).toggle()
});
if(!this.bedrock.histOpen){$("#id-6B6245-29").hide();
$("#id-6B6245-29").prev().addClass("closed").children(":first").children(":first").attr("title","Expand").text("+")
}this.retrieveTreatment()
},setHistoricalRange:function(){var c,b,a;
b=1000*60*60*24;
a=new Date().midnight();
c=a.getTime()-(this.bedrock.histLookback*b);
$("#id-6B6245-21").text("- "+new Date(c).format(i18n.discernabu.ctreview.DATE_FORMAT)+" "+i18n.discernabu.ctreview.TO_CURRENT);
this.registerTableToggles()
},setHoverLabels:function(){var a;
a=function(d){var c,b;
b=com.cerner.oncology.util.getTextWidth;
c=b(d);
c>this.popupLabelWidth&&(this.popupLabelWidth=c);
return c
}.bind(this);
$("#id-6B6245-22").text(i18n.discernabu.NAME+":");
width=a($("#id-6B6245-22"));
$("#id-6B6245-13").text(i18n.discernabu.ctreview.ORDERED_AS+":");
a($("#id-6B6245-13"));
$("#id-6B6245-15").text(i18n.STATUS+":");
a($("#id-6B6245-15"));
$("#id-6B6245-17").text(i18n.START+":");
a($("#id-6B6245-17"));
$("#id-6B6245-19").text(i18n.STOP+":");
a($("#id-6B6245-19"));
$(".label-6B6245").width(this.popupLabelWidth+10);
this.setHistoricalRange()
},setTableHeaderLabels:function(){var a,c,b;
a=[];
a.push(i18n.discernabu.NAME);
a.push(i18n.discernabu.ctreview.RESPONSE);
a.push(i18n.STATUS);
a.push(i18n.START);
c=a.slice(0);
c.push(i18n.STOP);
b=function(d,k){var f,e,h,g;
g=$(k).children();
for(f=0,e=d.length;
f<e;
f++){h=$(document.createElement("p"));
$(h).text(d[f]);
$(g[f]).append(h)
}};
b(a,$("#id-6B6245-5"));
b(c,$("#id-6B6245-6"));
this.setHoverLabels()
},setTableSectionLabels:function(){$("#id-6B6245-3").text(i18n.CURRENT);
$("#id-6B6245-4").text(i18n.discernabu.ctreview.HISTORICAL);
!this.bedrock&&this.initializeBedrockMember();
this.setTableHeaderLabels()
},initializeBedrockMember:function(){this.bedrock=new this.Bedrock()
},movePopupsToBody:function(){com.cerner.oncology.util.movePopupToBody("id-6B6245-2");
com.cerner.oncology.util.movePopupToBody("id-6B6245-12")
}});
function ChemotherapyReviewComponentStyle(){this.initByNamespace("ctr")
}ChemotherapyReviewComponentStyle.inherits(ComponentStyle);
function ChemotherapyReviewComponent(a){this.classes=[];
this.currentScrollInd="";
this.currentScrollNum="";
this.historicalLookback="";
this.historicalOpen="";
this.historicalScrollInd="";
this.historicalScrollNum="";
this.responseInd="";
this.setStyles(new ChemotherapyReviewComponentStyle());
this.setCriterion(a);
this.setAlwaysExpanded(false);
this.setPowerPlanClasses=function(b){this.classes=b
};
this.setCurrentScrollInd=function(b){this.currentScrollInd=b
};
this.setCurrentScrollNum=function(b){this.currentScrollNum=b
};
this.setHistoricalLookback=function(b){this.historicalLookback=b
};
this.setHistoricalOpen=function(b){this.historicalOpen=b
};
this.setHistoricalScrollInd=function(b){this.historicalScrollInd=b
};
this.setHistoricalScrollNum=function(b){this.historicalScrollNum=b
};
this.setResponseInd=function(b){this.responseInd=b
};
this.InsertData=function(){var b,c;
c=com.cerner.oncology.ctreview;
b=this.getCriterion();
MP_Util.Doc.FinalizeComponent(this.getHTML(),this,"");
c.rootDir=b.static_content;
c.initializeBedrockMember();
c.bedrock.setTreatmentTypes(this.classes);
c.bedrock.setCurrentScrollNum((+this.currentScrollNum));
c.bedrock.setCurrentScroll((+this.currentScrollInd));
c.bedrock.setHistoricalScrollNum((+this.historicalScrollNum));
c.bedrock.setHistoricalScroll((+this.historicalScrollInd));
c.bedrock.setHistoricalOpen((+this.historicalOpen));
c.bedrock.setHistoricalLookback((+this.historicalLookback));
c.bedrock.setLoadResponses((+this.responseInd));
c.movePopupsToBody();
c.setTableSectionLabels()
};
this.HandleSuccess=function(){};
this.getHTML=function(){var b=[];
b.push('<div id="id-6B6245-1">');
b.push('<div class="sub-sec subSec-6B6245 pointer-6B6245">');
b.push('<div class="sub-sec-hd">');
b.push('<span class="sub-sec-hd-tgl">+</span>');
b.push('<span id="id-6B6245-3" class="sub-sec-title"></span>');
b.push('<span id="id-6B6245-7">(0)</span>');
b.push("</div>");
b.push("</div>");
b.push('<table id="id-6B6245-28" class="fixedLayout-6B6245" summary="current chemotherapy review header table">');
b.push("<thead>");
b.push('<tr id="id-6B6245-5">');
b.push('<th class="widthName-6B6245"></th>');
b.push('<th class="widthResponse-6B6245"></th>');
b.push('<th class="widthStatus-6B6245"></th>');
b.push('<th class="widthStartTime-6B6245"></th>');
b.push('<th class="widthStopTime-6B6245"></th>');
b.push("</tr>");
b.push("</thead>");
b.push("<tbody>");
b.push("<tr>");
b.push('<td colspan="5">');
b.push('<div id="id-6B6245-26" class="scrollable-6B6245">');
b.push('<table class="fixedLayout-6B6245" summary="current chemotherapy review table">');
b.push('<tbody id="id-6B6245-9">');
b.push("</tbody>");
b.push("</table>");
b.push("</div>");
b.push("</td>");
b.push("</tr>");
b.push("</tbody>");
b.push("</table>");
b.push('<div class="sub-sec subSec-6B6245 pointer-6B6245">');
b.push('<div class="sub-sec-hd">');
b.push('<span class="sub-sec-hd-tgl">-</span>');
b.push('<span id="id-6B6245-4" class="sub-sec-title"></span>');
b.push('<span id="id-6B6245-8">(0)</span>');
b.push('<span id="id-6B6245-21"></span>');
b.push("</div>");
b.push("</div>");
b.push('<table id="id-6B6245-29" class="fixedLayout-6B6245" summary="historical chemotherapy review header table">');
b.push("<thead>");
b.push('<tr id="id-6B6245-6">');
b.push('<th class="widthName-6B6245"></th>');
b.push('<th class="widthResponse-6B6245"></th>');
b.push('<th class="widthStatus-6B6245"></th>');
b.push('<th class="widthStartTime-6B6245"></th>');
b.push('<th class="widthStopTime-6B6245"></th>');
b.push("</tr>");
b.push("</thead>");
b.push("<tbody>");
b.push("<tr>");
b.push('<td colspan="5">');
b.push('<div id="id-6B6245-27" class="scrollable-6B6245">');
b.push('<table class="fixedLayout-6B6245" summary="historical chemotherapy review table">');
b.push('<tbody id="id-6B6245-10">');
b.push("</tbody>");
b.push("</table>");
b.push("</div>");
b.push("</td>");
b.push("</tr>");
b.push("</tbody>");
b.push("</table>");
b.push('<div id="id-6B6245-2" class="hvr hover">');
b.push('<p id="id-6B6245-11"></p>');
b.push("</div>");
b.push('<table id="id-6B6245-12" class="hvr hover" summary="treatment hover">');
b.push("<tbody>");
b.push("<tr>");
b.push('<td><p id="id-6B6245-22" class="label-6B6245 rightAlign-6B6245"></p></td>');
b.push('<td><p id="id-6B6245-23" class="data-6B6245 paddingLeft3p-6B6245"></p></td>');
b.push("</tr>");
b.push('<tr id="id-6B6245-24">');
b.push('<td><p id="id-6B6245-13" class="label-6B6245 rightAlign-6B6245"></p></td>');
b.push('<td><p id="id-6B6245-14" class="data-6B6245 paddingLeft3p-6B6245"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td><p id="id-6B6245-15" class="label-6B6245 rightAlign-6B6245"></p></td>');
b.push('<td><p id="id-6B6245-16" class="data-6B6245 paddingLeft3p-6B6245"></p></td>');
b.push("</tr>");
b.push("<tr>");
b.push('<td><p id="id-6B6245-17" class="label-6B6245 rightAlign-6B6245"></p></td>');
b.push('<td><p id="id-6B6245-18" class="data-6B6245 paddingLeft3p-6B6245"></p></td>');
b.push("</tr>");
b.push('<tr id="id-6B6245-25">');
b.push('<td><p id="id-6B6245-19" class="label-6B6245 rightAlign-6B6245"></p></td>');
b.push('<td><p id="id-6B6245-20" class="data-6B6245 paddingLeft3p-6B6245"></p></td>');
b.push("</tr>");
b.push("</tbody>");
b.push("</table>");
b.push("</div>");
return b.join("")
}
}ChemotherapyReviewComponent.inherits(MPageComponent);
function DiagnosesComponentStyle(){this.initByNamespace("dx");
}DiagnosesComponentStyle.inherits(ComponentStyle);
function DiagnosesComponent(criterion){this.m_searchTypeFlag=null;
this.m_suggestionLimit=null;
this.m_diagnosisVocab=null;
this.m_diagnosisAddTypeCd=null;
this.m_diagnosisClass=null;
this.m_diagnosisVocabInd=0;
this.curSearchCounter=0;
this.nextSearchCounter=0;
this.replySearchCounter=0;
this.setCriterion(criterion);
this.setStyles(new DiagnosesComponentStyle());
this.setComponentLoadTimerName("USR:MPG.DIAGNOSES.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.DIAGNOSES.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(2);
DiagnosesComponent.method("InsertData",function(){this.setEditMode(true);
CERN_DIAGNOSES_O1.GetDiagnosisTable(this);
});
DiagnosesComponent.method("HandleSuccess",function(recordData){CERN_DIAGNOSES_O1.RenderComponent(this,recordData);
});
DiagnosesComponent.method("setDiagnosisType",function(value){this.m_diagnosisType=value;
});
DiagnosesComponent.method("getDiagnosisType",function(){if(this.m_diagnosisType!==null){return this.m_diagnosisType;
}});
DiagnosesComponent.method("setDiagnosisVocab",function(value){this.m_diagnosisVocab=value;
});
DiagnosesComponent.method("getDiagnosisVocab",function(){return this.m_diagnosisVocab;
});
DiagnosesComponent.method("setDiagnosisAddTypeCd",function(value){this.m_diagnosisAddTypeCd=value;
});
DiagnosesComponent.method("getDiagnosisAddTypeCd",function(){return this.m_diagnosisAddTypeCd;
});
DiagnosesComponent.method("setDiagnosisClassification",function(value){this.m_diagnosisClass=value;
});
DiagnosesComponent.method("getDiagnosisClassification",function(){return this.m_diagnosisClass;
});
DiagnosesComponent.method("setDiagnosisVocabInd",function(value){this.m_diagnosisVocabInd=value;
});
DiagnosesComponent.method("getDiagnosisVocabInd",function(){return this.m_diagnosisVocabInd;
});
DiagnosesComponent.method("getSearchTypeFlag",function(){return this.m_searchTypeFlag;
});
DiagnosesComponent.method("setSearchTypeFlag",function(value){this.m_searchTypeFlag=value;
});
DiagnosesComponent.method("getSuggestionLimit",function(){return this.m_suggestionLimit;
});
DiagnosesComponent.method("setSuggestionLimit",function(value){this.m_suggestionLimit=value;
});
DiagnosesComponent.method("getCurSearchCounter",function(){return this.curSearchCounter;
});
DiagnosesComponent.method("setCurSearchCounter",function(value){this.curSearchCounter=value;
});
DiagnosesComponent.method("incCurSearchCounter",function(){this.curSearchCounter++;
});
DiagnosesComponent.method("getNextSearchCounter",function(){return this.nextSearchCounter;
});
DiagnosesComponent.method("setNextSearchCounter",function(value){this.nextSearchCounter=value;
});
DiagnosesComponent.method("incNextSearchCounter",function(){this.nextSearchCounter++;
});
DiagnosesComponent.method("getReplySearchCounter",function(){return this.replySearchCounter;
});
DiagnosesComponent.method("setReplySearchCounter",function(value){this.replySearchCounter=value;
});
DiagnosesComponent.method("incReplySearchCounter",function(){this.replySearchCounter++;
});
}DiagnosesComponent.inherits(MPageComponent);
var CERN_DIAGNOSES_O1=function(){return{GetDiagnosisTable:function(component){var sendAr=[];
var criterion=component.getCriterion();
var encntrOption=(component.getScope()==2)?(criterion.encntr_id+".0"):"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",encntrOption,0);
var types=component.getDiagnosisType();
var diagnosisType=(types&&types!==null&&types.length>0)?"value("+types.join(",")+")":"0.0";
sendAr.push(diagnosisType);
sendAr.push(criterion.provider_id+".0",criterion.ppr_cd+".0",criterion.position_cd+".0","0.0","1",component.getDiagnosisVocab()+".0",component.getDiagnosisVocabInd());
var request=new MP_Core.ScriptRequest(component,component.getComponentLoadTimerName());
request.setProgramName("MP_GET_DIAGNOSES");
request.setParameters(sendAr);
request.setAsync(true);
MP_Core.XMLCCLRequestCallBack(component,request,CERN_DIAGNOSES_O1.RenderComponent);
},RenderComponent:function(reply){var recordData=reply.getResponse();
var component=reply.getComponent();
var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var dxI18n=i18n.discernabu.diagnoses_o1;
var jsDxHTML=[];
var dxHTML="",countText="";
if(reply.getStatus()!=="F"){if(recordData.DX_CAN_ADD===1){jsDxHTML.push(MP_Util.CreateAutoSuggestBoxHtml(component));
component.setAutoSuggestAddScript("mp_add_diagnosis");
component.setAutoSuggestAddTimerName("USR:MPG.DIAGNOSES.O1 - add diagnosis from auto suggest");
component.setSuggestionLimit(10);
}if(reply.getStatus()==="S"){var diagDate=dxCode=dxTypeCode=dxAnnot=dxName=dxFaceUp=comm=responProvider="";
var dateTime=new Date();
var personnelArray=[];
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var diagnosisArray=recordData.DIAGNOSIS;
diagnosisArray.sort(SortByDiagnosesName);
jsDxHTML.push("<div class ='",MP_Util.GetContentClass(component,diagnosisArray.length),"'>");
for(var i=0,l=diagnosisArray.length;
i<l;
i++){var diagnose=diagnosisArray[i];
dxName=dxFaceUp=diagnose.NAME;
if(diagnose.DISPLAY_AS!=""){dxAnnot=dxFaceUp=diagnose.DISPLAY_AS;
}else{dxAnnot="";
}if(diagnose.CODE!=""&&diagnose.CODE!="()"){dxCode=diagnose.CODE;
}else{dxCode="()";
}if(diagnose.DIAG_DT_TM!=""){diagDate=df.formatISO8601(diagnose.DIAG_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
}else{diagDate="";
}if(diagnose.COMMENTS!=""){var comm=diagnose.COMMENTS;
}else{comm="";
}if(diagnose.PRSNL_ID>0){responProvider=MP_Util.GetValueFromArray(diagnose.PRSNL_ID,personnelArray).fullName;
}else{responProvider="";
}if(diagnose.DIAG_TYPE_CD>0){dxTypeCode=MP_Util.GetValueFromArray(diagnose.DIAG_TYPE_CD,codeArray).display;
}else{dxTypeCode="";
}jsDxHTML.push("<h3 class='info-hd'><span>",dxName,"</span></h3><dl class='dx-info'><dt><span>",dxI18n.DIAGNOSES,":</span></dt><dd class='dx-name'><span>",dxFaceUp,"</span></dd><dt><span>",dxI18n.CODE,":</span></dt><dd class='dx-code'><span class='code'>",dxCode,"</span></dd></dl><h4 class='det-hd'><span>",dxI18n.DETAILS,":</span></h4><div class='hvr'><dl class='dx-det'><dt><span>",dxI18n.DIAGNOSES_NAME,":</span></dt><dd><span>",dxName,"</span></dd><dt><span>",dxI18n.ANNOTATED_DISPLAY,":</span></dt><dd><span>",dxAnnot,"</span></dd><dt><span>",dxI18n.DIAG_TYPE,":</span></dt><dd><span>",dxTypeCode,"</span></dd><dt><span>",dxI18n.DIAGNOSES_DATE,":</span></dt><dd><span>",diagDate,"</span></dd><dt><span>",dxI18n.RESPONSIBLE_PROVIDER_NAME,":</span></dt><dd><span>",responProvider,"</span></dd><dt><span>",dxI18n.COMMENTS,":</span></dt><dd><span>",comm,"</span></dd></dl></div>");
}jsDxHTML.push("</div>");
dxHTML=jsDxHTML.join("");
countText=MP_Util.CreateTitleText(component,l);
}else{if((reply.getStatus()==="Z")){dxHTML=jsDxHTML.join("");
dxHTML+=MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace());
}}MP_Util.Doc.FinalizeComponent(dxHTML,component,countText);
if(recordData.DX_CAN_ADD===1){MP_Util.AddAutoSuggestControl(component,CERN_DIAGNOSES_O1.SearchNomenclature,CERN_DIAGNOSES_O1.HandleSelection,CERN_DIAGNOSES_O1.CreateSuggestionLine);
component.setSearchTypeFlag(recordData.DX_SEARCH_TYPE);
}}else{countText=MP_Util.CreateTitleText(component,0);
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),reply.getError()),component,countText);
}}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}component.setEditMode(false);
}},SearchNomenclature:function(callback,textBox,component){var xhr=new XMLCclRequest();
var returnData;
component.incCurSearchCounter();
xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){MP_Util.LogScriptCallInfo(component,this,"diagnosis.js","SearchNomenclature");
var msg=xhr.responseText;
var jsonMsg="";
if(msg){jsonMsg=JSON.parse(msg);
}if(jsonMsg){var nextSearchCounter=component.getNextSearchCounter();
var replySearchCounter=jsonMsg.RECORD_DATA.SEARCHINDEX;
component.setReplySearchCounter(replySearchCounter);
if(replySearchCounter>nextSearchCounter&&textBox.value!=""){component.setNextSearchCounter(replySearchCounter);
returnData=jsonMsg.RECORD_DATA.NOMENCLATURE;
callback.autosuggest(returnData);
}}}};
xhr.open("GET","mp_search_nomenclatures");
xhr.send("^MINE^, ^"+textBox.value+"^,"+component.getSuggestionLimit()+","+component.getCurSearchCounter()+","+component.getSearchTypeFlag());
},HandleSelection:function(suggestionObj,textBox,component){if(suggestionObj!=null){var criterion=component.getCriterion();
var sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.provider_id+".0",criterion.encntr_id+".0",criterion.ppr_cd+".0",suggestionObj.VALUE+".0",criterion.position_cd+".0","0.0","1",component.getDiagnosisAddTypeCd()+".0",component.getDiagnosisClassification()+".0");
var request=new MP_Core.ScriptRequest(component,component.getAutoSuggestAddTimerName());
request.setProgramName(component.getAutoSuggestAddScript());
request.setParameters(sendAr);
request.setAsync(true);
MP_Core.XMLCCLRequestCallBack(component,request,CERN_DIAGNOSES_O1.AddDiagnosisToList);
}else{alert("No selection was made.  Please make a selection to continue.");
}},AddDiagnosisToList:function(reply){var alertMsg="";
var jsonReply=reply.getResponse();
var component=reply.getComponent();
var componentName="";
var textBox=MP_Util.RetrieveAutoSuggestSearchBox(component);
componentName=i18n.discernabu.DIAGNOSIS;
if(jsonReply&&jsonReply.PRIVILEGE_IND==0){alertMsg=i18n.discernabu.NO_PRIVS;
alertMsg=alertMsg.replace("{name}",componentName);
alert(alertMsg);
textBox.value="";
}else{if(jsonReply&&jsonReply.DUPLICATE_IND==1){alertMsg=i18n.discernabu.DUPLICATE;
alertMsg=alertMsg.replace(/{name}/gi,componentName);
alert(alertMsg);
textBox.value="";
}else{MP_Util.Doc.HideHovers();
component.InsertData();
}}},CreateSuggestionLine:function(suggestionObj,searchVal){return CERN_DIAGNOSES_O1.HighlightValue(suggestionObj.NAME,searchVal);
},HighlightValue:function(inString,term){return"<strong class='highlight'>"+inString.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(" ").join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),"</strong>$1<strong class='highlight'>")+"</strong>";
}};
function SortByDiagnosesName(a,b){var aName=(a.DISPLAY_AS!=""&&a.DISPLAY_AS!=null&&a.DISPLAY_AS!=a.NAME)?a.DISPLAY_AS.toUpperCase():a.NAME.toUpperCase();
var bName=(b.DISPLAY_AS!=""&&b.DISPLAY_AS!=null&&b.DISPLAY_AS!=a.NAME)?b.DISPLAY_AS.toUpperCase():b.NAME.toUpperCase();
if(aName<bName){return -1;
}else{if(aName>bName){return 1;
}else{return 0;
}}}}();

function DiagnosticsComponentStyle(){this.initByNamespace("dg");
}DiagnosticsComponentStyle.inherits(ComponentStyle);
function DiagnosticsComponent(criterion){this.setCriterion(criterion);
this.setLookBackDropDown(true);
this.setStyles(new DiagnosticsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.DIAGNOSTICS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.DIAGNOSTICS.O1 - render component");
this.setIncludeLineNumber(true);
DiagnosticsComponent.method("InsertData",function(){var nameSpace=new CERN_DIAGNOSTICS_O1();
nameSpace.GetDiagnostics(this);
});
DiagnosticsComponent.method("setResultStatusCodes",function(value){this.m_resultStatusCodes=value;
});
DiagnosticsComponent.method("addResultStatusCode",function(value){if(this.m_resultStatusCodes==null){this.m_resultStatusCodes=[];
}this.m_resultStatusCodes.push(value);
});
DiagnosticsComponent.method("getResultStatusCodes",function(){if(this.m_resultStatusCodes!=null){return this.m_resultStatusCodes;
}else{if(this.m_resultStatusMeanings!=null){var resStatusCodeSet=MP_Util.GetCodeSet(8,false);
if(this.m_resultStatusMeanings&&this.m_resultStatusMeanings.length>0){for(var x=this.m_resultStatusMeanings.length;
x--;
){var code=MP_Util.GetCodeByMeaning(resStatusCodeSet,this.m_resultStatusMeanings[x]);
if(code!=null){this.addResultStatusCode(code.codeValue);
}}}}}return this.m_resultStatusCodes;
});
DiagnosticsComponent.method("addResultStatusMeaning",function(value){if(this.m_resultStatusMeanings==null){this.m_resultStatusMeanings=[];
}this.m_resultStatusMeanings.push(value);
});
DiagnosticsComponent.method("setResultStatusMeanings",function(value){this.m_resultStatusMeanings=value;
});
}DiagnosticsComponent.inherits(MPageComponent);
var CERN_DIAGNOSTICS_O1=function(){var isErrorLoadingData=false;
var isDataFound=false;
var totalResultCount=0;
var m_comp=null;
var m_contentNode=null;
var m_rootComponentNode=null;
var m_threadCount=0;
return{GetDiagnostics:function(component){m_comp=component;
var styles=component.getStyles();
m_rootComponentNode=component.getRootComponentNode();
m_contentNode=component.getSectionContentNode();
var groups=component.getGroups();
var xl=(groups!=null)?groups.length:0;
m_threadCount=xl;
CreateInfoHeader(m_contentNode);
if(component.getDateFormat()==3){CreateWithinHeader(m_contentNode);
}for(var x=0;
x<xl;
x++){var group=groups[x];
var subSection=CreateSubHeader(group.getGroupName());
GetVariousAssessment(group,subSection);
}if(m_threadCount===0){FinalizeComponent();
}}};
function CreateWithinHeader(contentNode){var dl=Util.cep("dl",{className:"dg-info-hdr hdr"});
var dd=Util.cep("dd",{className:"dg-name-hd"});
Util.ac(dd,dl);
var span=Util.cep("span");
Util.ac(span,dd);
var txtNbsp=document.createTextNode(String.fromCharCode(160));
Util.ac(txtNbsp,span);
var ddWithin=Util.cep("dd",{className:"dg-within-hd"});
Util.ac(ddWithin,dl);
var spanWithin=Util.cep("span");
Util.ac(spanWithin,ddWithin);
var txtWithin=document.createTextNode(i18n.WITHIN);
Util.ac(txtWithin,spanWithin);
Util.ac(dl,contentNode);
}function CreateInfoHeader(contentNode){var dl=Util.cep("dl",{className:"dg-info-hdr hdr"});
var dd=Util.cep("dd",{className:"dg-name-hd"});
Util.ac(dd,dl);
var span=Util.cep("span");
Util.ac(span,dd);
var txtNbsp=document.createTextNode(String.fromCharCode(160));
Util.ac(txtNbsp,span);
var ddWithin=Util.cep("dd",{className:"dg-within-hd"});
Util.ac(ddWithin,dl);
var spanWithin=Util.cep("span");
Util.ac(spanWithin,ddWithin);
var txtWithin=document.createTextNode(i18n.DATE_TIME);
Util.ac(txtWithin,spanWithin);
var ddStat=Util.cep("dd",{className:"dg-stat-hd"});
Util.ac(ddStat,dl);
var spanStat=Util.cep("span");
Util.ac(spanStat,ddStat);
var txtStat=document.createTextNode(i18n.STATUS);
Util.ac(txtStat,spanStat);
Util.ac(dl,contentNode);
}function CreateSubHeader(label){var subSec=Util.cep("div",{className:"sub-sec"});
var h3=Util.cep("h3",{className:"sub-sec-hd"});
subSec.appendChild(h3);
var spanTgl=Util.cep("span",{className:"sub-sec-hd-tgl",title:i18n.HIDE_SECTION});
h3.appendChild(spanTgl);
var TgltxtNode=document.createTextNode("-");
spanTgl.appendChild(TgltxtNode);
var spanTitle=Util.cep("span",{className:"sub-sec-title"});
h3.appendChild(spanTitle);
var labelTextNode=document.createTextNode(label);
spanTitle.appendChild(labelTextNode);
m_contentNode.appendChild(subSec);
return(subSec);
}function GetDocResults(group,subSection,subSecTitle,events){var ar=[];
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(null,this,"diagnostics.js","GetDocResults");
m_threadCount--;
var strHTML="",sDate="",sDateHvr="",sDisplay="",sResult="",sStatus="";
var jsonEval=JSON.parse(this.responseText);
var subCnt=0;
if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="S"){isDataFound=true;
var codeArray=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
ar.push("<div class='content-body'>");
var docs=jsonEval.RECORD_DATA.DOCS;
docs.sort(SortByEffectiveDate);
for(var i=0,l=docs.length;
i<l;
i++){var ce=docs[i];
var link="";
if(ce.EVENT_CD!==""){var eventObj=MP_Util.GetValueFromArray(ce.EVENT_CD,codeArray);
sDisplay=eventObj.display;
link=MP_Util.CreateClinNoteLink(ce.PERSON_ID+".0",ce.ENCNTR_ID+".0",ce.EVENT_ID+".0",sDisplay,ce.VIEWER_TYPE,ce.PARENT_EVENT_ID+".0");
}if(ce.EFFECTIVE_DATE!==""){var dateTime=new Date();
dateTime.setISO8601(ce.EFFECTIVE_DATE);
sDate=MP_Util.DisplayDateByOption(m_comp,dateTime);
sDateHvr=dateTime.format("longDateTime3");
}if(ce.RESULT_STATUS_CD>0){var statusObj=MP_Util.GetValueFromArray(ce.RESULT_STATUS_CD,codeArray);
sStatus=statusObj.display;
}ar.push("<h3 class='info-hd'>",sDisplay,"</h3><dl class ='dg-info'><dt><span>"+i18n.DIAGNOSTIC+":</span></dt><dd class ='dg-name'><span>",link,"</span>");
if(statusObj.meaning=="MODIFIED"||statusObj.meaning=="ALTERED"){ar.push("<span class='res-modified'>&nbsp;</span>");
}ar.push("</dd><dt><span>",i18n.DATE_TIME,"</span></dt><dd class ='dg-within'>",sDate,"</dd><dt><span>",i18n.STATUS,":</span></dt><dd class='dg-stat'><span>",sStatus,"</span></dd><dd class='dg-image'>");
if(ce.IMAGE_URL!==""){var urlParam='javascript:MPAGES_SVC_EVENT("'+ce.IMAGE_URL+'",^MINE,$PAT_PersonId$^)';
ar.push("<a class='dg-image-found' href='",urlParam,"'>&nbsp;</a>");
}else{ar.push("&nbsp;");
}ar.push("</dd></dl>");
ar.push("<h4 class='det-hd'><span>",i18n.DIAGNOSTIC_DETAILS,"</span></h4><div class='hvr'><dl class='dg-det'><dt><span>",i18n.STUDY,":</span></dt><dd><span>",sDisplay,"</span></dd><dt><span>",i18n.DATE_TIME,":</span></dt><dd><span>",sDateHvr,"</span></dd></dl></div>");
subCnt++;
}ar.push("</div>");
strHTML=ar.join("");
subSecTitle[0].innerHTML=group.getGroupName()+" ("+subCnt+")";
totalResultCount+=subCnt;
var subContent=Util.cep("div",{className:"sub-sec-content"});
subSection.appendChild(subContent);
var contentBody=Util.cep("div",{className:"content-body"});
subContent.appendChild(contentBody);
contentBody.innerHTML=strHTML;
}else{if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="Z"){subSecTitle[0].innerHTML=group.getGroupName()+" (0)";
var subContent1=Util.cep("div",{className:"sub-sec-content"});
subSection.appendChild(subContent1);
var contentBody1=Util.cep("div",{className:"content-body"});
subContent1.appendChild(contentBody1);
contentBody1.innerHTML="<div ><span class='res-none'>"+i18n.NO_RESULTS_FOUND+"</span> </div>";
}else{if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS!="Z"){isErrorLoadingData=true;
}}}if(m_threadCount===0){FinalizeComponent();
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var criterion=m_comp.getCriterion();
info.open("GET","MP_RETRIEVE_DOCUMENTS_JSON");
var encntrOption=(m_comp.getScope()==2)?(criterion.encntr_id+".0"):"0.0";
var codes=m_comp.getResultStatusCodes();
var statusCodes=(codes!=null&&codes.length>0)?"value("+codes.join(",")+")":"0.0";
var eventCodes=(events!=null&&events.length>0)?"value("+events.join(",")+")":"0.0";
var sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",encntrOption,criterion.provider_id+".0",m_comp.getLookbackUnits(),eventCodes,statusCodes,criterion.ppr_cd+".0",m_comp.getLookbackUnitTypeFlag());
info.send(sendAr.join(","));
return;
}function GetVariousAssessment(group,subSection){var events=(group.getEventSets()!=null&&group.getEventSets().length>0)?group.getEventSets():null;
var subSecTitle=Util.Style.g("sub-sec-title",subSection,"SPAN");
if(events==null){subSecTitle[0].innerHTML=group.getGroupName()+" (0)";
m_threadCount--;
return;
}GetDocResults(group,subSection,subSecTitle,events);
}function SortByEffectiveDate(a,b){if(a.EFFECTIVE_DATE>b.EFFECTIVE_DATE){return -1;
}else{if(a.EFFECTIVE_DATE<b.EFFECTIVE_DATE){return 1;
}else{return 0;
}}}function FinalizeComponent(){var styles=m_comp.getStyles();
var totalCount=Util.Style.g("sec-total",m_rootComponentNode,"span");
var sResultText="";
if(isErrorLoadingData){m_contentNode.innerHTML=MP_Util.HandleErrorResponse(styles.getNameSpace());
}else{if(totalResultCount===0){sResultText=MP_Util.CreateTitleText(m_comp,totalResultCount);
m_contentNode.innerHTML=MP_Util.HandleNoDataResponse(styles.getNameSpace());
}else{sResultText=MP_Util.CreateTitleText(m_comp,totalResultCount);
var contentHtml=[];
contentHtml.push("<div class ='",MP_Util.GetContentClass(m_comp,totalResultCount),"'>");
contentHtml.push(m_contentNode.innerHTML);
contentHtml.push("</div>");
m_contentNode.innerHTML=contentHtml.join("");
MP_Util.Doc.InitHovers(styles.getInfo(),m_contentNode);
MP_Util.Doc.InitSubToggles(m_contentNode,"sub-sec-hd-tgl");
MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",m_contentNode,"div"),m_comp.getScrollNumber(),1.6);
}}totalCount[0].innerHTML=sResultText;
}};

function DocumentComponentStyle(){this.initByNamespace("doc");
}DocumentComponentStyle.inherits(ComponentStyle);
function DocumentComponent(criterion){this.setCriterion(criterion);
this.setLookBackDropDown(true);
this.setStyles(new DocumentComponentStyle());
this.setComponentLoadTimerName("USR:MPG.DOCUMENTS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.DOCUMENTS.O1 - render component");
DocumentComponent.method("openTab",function(){var criterion=this.getCriterion();
var sParms="/PERSONID="+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+this.getLink()+"+^";
APPLINK(0,criterion.executable,sParms);
this.InsertData();
});
CERN_EventListener.addListener(this,EventListener.EVENT_ADD_DOC,this.InsertData,this);
}DocumentComponent.inherits(DocumentBaseComponent);

function LaboratoryComponentStyle(){this.initByNamespace("lab");
}LaboratoryComponentStyle.inherits(ComponentStyle);
function LaboratoryComponent(criterion){this.setCriterion(criterion);
this.setLookBackDropDown(true);
this.setStyles(new LaboratoryComponentStyle());
this.setIncludeLineNumber(false);
this.m_graphLink=1;
this.m_showTodayValue=false;
this.m_primaryLabel=i18n.discernabu.laboratory_o1.PRIMARY_RESULTS;
this.m_errorLoadingData=false;
this.m_totalResultCount=0;
this.m_filterLabel="";
LaboratoryComponent.method("InsertData",function(){if(this.getGrouperFilterEventSets()){CERN_LABORATORY_O1.RefreshLabTable(this,this.getGrouperFilterLabel(),this.getGrouperFilterEventSets());
}else{CERN_LABORATORY_O1.GetLaboratoryTable(this);
}});
LaboratoryComponent.method("FilterRefresh",function(label,esArray){CERN_LABORATORY_O1.RefreshLabTable(this,label,esArray);
});
LaboratoryComponent.method("HandleSuccess",function(recordData){CERN_LABORATORY_O1.RenderComponent(this,recordData);
});
LaboratoryComponent.method("setGraphFlag",function(value){this.m_graphLink=value;
});
LaboratoryComponent.method("getGraphFlag",function(){return(this.m_graphLink);
});
LaboratoryComponent.method("setShowTodayValue",function(value){this.m_showTodayValue=value;
});
LaboratoryComponent.method("isShowTodayValue",function(){return(this.m_showTodayValue);
});
LaboratoryComponent.method("setPrimaryLabel",function(value){this.m_primaryLabel=value;
});
LaboratoryComponent.method("getPrimaryLabel",function(){return(this.m_primaryLabel);
});
LaboratoryComponent.method("refresh",function(event,args){if(args!="GrowthChart"){var contentNode=this.getSectionContentNode();
contentNode.innerHTML="";
this.InsertData();
}});
CERN_EventListener.addListener(this,EventListener.EVENT_CLINICAL_EVENT,this.refresh,this);
}LaboratoryComponent.inherits(MPageComponent);
var CERN_LABORATORY_O1=function(){return{GetLaboratoryTable:function(component){var m_comp=component;
var m_rootComponentNode=component.getRootComponentNode();
var m_contentNode=component.getSectionContentNode();
m_contentNode.innerHTML="";
var m_contentSecNode=Util.cep("div",{className:"content-body"});
var groups=component.getGroups();
var xl=(groups!==null)?groups.length:0;
CreateInfoHeader(component,m_contentNode,m_contentSecNode);
var eventSetArray=[];
var group;
var groupES;
var set={};
var esLength;
for(var x=0;
x<xl;
x++){group=groups[x];
groupES=group.getEventSets();
esLength=groupES.length;
for(var y=0;
y<esLength;
y++){set[groupES[y]]=true;
}}for(var eventSet in set){eventSetArray.push(eventSet);
}GetLaboratoryResults(eventSetArray,m_comp,m_contentNode,m_contentSecNode);
},RefreshLabTable:function(component,filterLabel,filterESArray){var m_comp=component;
m_comp.m_filterLabel=filterLabel;
var filterEventSetArray=MP_Util.CreateParamArray(filterESArray,1);
var eventCodeParam="0.0";
var criterion=m_comp.getCriterion();
var sEncntr=(m_comp.getScope()==2)?criterion.encntr_id+".0":"0.0";
var sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",sEncntr,criterion.provider_id+".0",criterion.ppr_cd+".0",3,"^^",filterEventSetArray,eventCodeParam,m_comp.getLookbackUnits(),m_comp.getLookbackUnitTypeFlag(),1);
var request=new MP_Core.ScriptRequest(m_comp,m_comp.getComponentLoadTimerName());
request.setProgramName("MP_RETRIEVE_N_RESULTS_JSON");
request.setParameters(sendAr);
request.setAsync(true);
MP_Core.XMLCCLRequestCallBack(m_comp,request,CERN_LABORATORY_O1.RenderComponent);
},RenderComponent:function(reply){var m_comp=reply.getComponent();
var m_rootComponentNode=m_comp.getRootComponentNode();
m_comp.getSectionContentNode().innerHTML="";
var m_contentNode=m_comp.getSectionContentNode();
var m_contentSecNode=Util.cep("div",{className:"content-body"});
CreateInfoHeader(m_comp,m_contentNode,m_contentSecNode);
var sHTML="";
var countText="";
var subCnt=0;
var recordData=reply.getResponse();
switch(recordData.STATUS_DATA.STATUS){case"S":var codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
var mappedResults=CERN_LABORATORY_O1_UTIL.LoadMeasurementData(reply.getResponse(),personnelArray,codeArray,1);
var groupName=m_comp.m_filterLabel;
var groupSubsection=CreateSubHeader(groupName,false,m_contentSecNode);
var subSecTitle=Util.Style.g("sub-sec-title",groupSubsection,"SPAN");
var subContent=Util.cep("div",{className:"sub-sec-content"});
groupSubsection.appendChild(subContent);
var secContentBody=Util.cep("div",{className:"content-body"});
subContent.appendChild(secContentBody);
AssociateResultsToGroup(groupSubsection,groupName,mappedResults,subSecTitle[0],secContentBody,m_comp);
break;
case"Z":m_comp.m_totalResultCount=0;
break;
case"F":m_comp.m_errorLoadingData=true;
break;
}FinalizeComponent(m_comp,m_contentNode,m_contentSecNode);
}};
function CreateInfoHeader(component,secContentNode,contentSecNode){var m_comp=component;
var labI18n=i18n.discernabu.laboratory_o1;
var firstColumnHeader=component.isShowTodayValue()?labI18n.TODAY:labI18n.LATEST;
var contentHdr=Util.cep("div",{className:"content-hdr"});
Util.ac(contentHdr,secContentNode);
var ar=[];
var withinTH="";
if(m_comp.getDateFormat()==3){withinTH="<br /><span>"+labI18n.WITHIN+"</span>";
}ar.push("<table class='lab-table'><tr class='hdr'><th class='lab-lbl'><span>&nbsp;</span></th><th class='lab-res0'><span>",firstColumnHeader,"</span>",withinTH,"</th><th class='lab-res1'><span>",labI18n.PREVIOUS,"</span>",withinTH,"</th></tr></table>");
contentHdr.innerHTML=ar.join("");
Util.ac(contentSecNode,secContentNode);
}function FinalizeComponent(component,secContentNode,contentSecNode){var m_comp=component;
var m_rootComponentNode=m_comp.getRootComponentNode();
var styles=m_comp.getStyles();
var totalCount=Util.Style.g("sec-total",m_rootComponentNode,"span");
var sResultText="";
if(m_comp.m_errorLoadingData){secContentNode.innerHTML=MP_Util.HandleErrorResponse(styles.getNameSpace());
}else{if(m_comp.m_totalResultCount===0){sResultText=MP_Util.CreateTitleText(m_comp,m_comp.m_totalResultCount);
secContentNode.innerHTML=MP_Util.HandleNoDataResponse();
}else{sResultText=MP_Util.CreateTitleText(m_comp,m_comp.m_totalResultCount);
if(m_comp.m_totalResultCount>m_comp.getScrollNumber()&&m_comp.isScrollingEnabled()){Util.Style.acss(contentSecNode,"scrollable ");
var contentHdr=Util.Style.g("content-hdr",m_rootComponentNode,"div");
Util.Style.acss(contentHdr[0],"lab-scrl-tbl-hd");
}MP_Util.Doc.InitHovers(styles.getInfo(),contentSecNode);
MP_Util.Doc.InitSubToggles(contentSecNode,"sub-sec-hd-tgl");
if(m_comp.isScrollingEnabled()){MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",m_rootComponentNode,"div"),m_comp.getScrollNumber(),"2.8");
}}}totalCount[0].innerHTML=sResultText;
}function CreateSubHeader(label,includeContentBody,contentSecNode){var subSec=Util.cep("div",{className:"sub-sec"});
var h3=Util.cep("h3",{className:"sub-sec-hd lab-sub-scrl-hd"});
subSec.appendChild(h3);
var spanTgl=Util.cep("span",{className:"sub-sec-hd-tgl",title:i18n.discernabu.laboratory_o1.COLLAPSE});
h3.appendChild(spanTgl);
var TgltxtNode=document.createTextNode("-");
spanTgl.appendChild(TgltxtNode);
var spanTitle=Util.cep("span",{className:"sub-sec-title"});
h3.appendChild(spanTitle);
var labelTextNode=document.createTextNode(label);
spanTitle.appendChild(labelTextNode);
if(includeContentBody){var subContent=Util.cep("div",{className:"sub-sec-content"});
subSec.appendChild(subContent);
var contentBody=Util.cep("div",{className:"content-body"});
subContent.appendChild(contentBody);
}contentSecNode.appendChild(subSec);
return(subSec);
}function GetLaboratoryResults(eventSets,component,secContentNode,contentSecNode){var m_comp=component;
var eventSetParams=MP_Util.CreateParamArray(eventSets,1);
var eventCodeParam="0.0";
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){MP_Util.LogScriptCallInfo(m_comp,this,"laboratory.js","GetResultsByGroup");
var sHTML="";
var countText="";
var subCnt=0;
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
switch(recordData.STATUS_DATA.STATUS){case"S":var codeArray=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
var personnelArray=MP_Util.LoadPersonelListJSON(jsonEval.RECORD_DATA.PRSNL);
var mappedResults=CERN_LABORATORY_O1_UTIL.LoadMeasurementData(jsonEval,personnelArray,codeArray);
BuildLaboratoryComponent(mappedResults,m_comp,contentSecNode);
break;
case"Z":m_comp.m_totalResultCount=0;
break;
case"F":m_comp.m_errorLoadingData=true;
break;
}FinalizeComponent(m_comp,secContentNode,contentSecNode);
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var criterion=m_comp.getCriterion();
info.open("GET","MP_RETRIEVE_N_RESULTS_JSON");
var sEncntr=(m_comp.getScope()==2)?criterion.encntr_id+".0":"0.0";
var sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",sEncntr,criterion.provider_id+".0",criterion.ppr_cd+".0",3,"^^",eventSetParams,eventCodeParam,m_comp.getLookbackUnits(),m_comp.getLookbackUnitTypeFlag(),1);
info.send(sendAr.join(","));
}function BuildLaboratoryComponent(mapObjects,component,contentSecNode){var m_comp=component;
var groups=m_comp.getGroups();
var measurementHasMap=getMeasurementHashMap(mapObjects);
for(var x=0,xl=groups.length;
x<xl;
x++){var groupName=groups[x].getGroupName();
var groupEventSets=groups[x].getEventSets();
var sGroupName="";
var measAr=[];
var groupSubsection=CreateSubHeader(groupName,false,contentSecNode);
var subSecTitle=Util.Style.g("sub-sec-title",groupSubsection,"SPAN");
groupMeasurements=returnMeasureArrayByGroupEventSets(groupEventSets,measurementHasMap);
if(groupMeasurements.length===0){if(groupName===i18n.PRIMARY_RESULTS){groupName=m_comp.getPrimaryLabel();
}subSecTitle[0].innerHTML=groupName+" (0)";
}else{if(groupName===i18n.PRIMARY_RESULTS){sGroupName=m_comp.getPrimaryLabel();
var subContent=Util.cep("div",{className:"sub-sec-content"});
groupSubsection.appendChild(subContent);
var secContentBody=Util.cep("div",{className:"content-body"});
subContent.appendChild(secContentBody);
AssociateResultsToGroup(groupSubsection,sGroupName,groupMeasurements,subSecTitle[0],secContentBody,m_comp);
}else{var measurementSubsection;
var measurementSubsectionName="";
var subsectionMeasurements;
contentSecNode.removeChild(groupSubsection);
for(var x=0,xl=groupMeasurements.length;
x<xl;
x++){if(measurementSubsectionName!=groupMeasurements[x].name){subsectionMeasurements=[];
measurementSubsectionName=groupMeasurements[x].name;
measurementSubsection=CreateSubHeader(measurementSubsectionName,false,contentSecNode);
subSecTitle=Util.Style.g("sub-sec-title",measurementSubsection,"SPAN");
var subContent=Util.cep("div",{className:"sub-sec-content"});
measurementSubsection.appendChild(subContent);
var secContentBody=Util.cep("div",{className:"content-body"});
subContent.appendChild(secContentBody);
}subsectionMeasurements.push(groupMeasurements[x]);
if((x===(xl-1))||(x!==(xl-1)&&groupMeasurements[x+1].name!==measurementSubsectionName)){AssociateResultsToGroup(measurementSubsection,measurementSubsectionName,subsectionMeasurements,subSecTitle[0],secContentBody,m_comp);
}}}}}}function returnMeasureArrayByGroupEventSets(groupEventSets,mapObjects){var measurementArray=[];
for(var i=0;
i<groupEventSets.length;
i++){if(mapObjects[groupEventSets[i]]){for(var j=0;
j<mapObjects[groupEventSets[i]].length;
j++){measurementArray.push(mapObjects[groupEventSets[i]][j]);
}}}return measurementArray;
}function getMeasurementHashMap(mapObjects){var measHash=[];
for(var x=0;
x<mapObjects.length;
x++){if(!measHash[mapObjects[x].eventSetCode]){measHash[mapObjects[x].eventSetCode]=[];
}measHash[mapObjects[x].eventSetCode].push(mapObjects[x]);
}return measHash;
}function AssociateResultsToGroup(subSection,subGroupName,measurements,subSecTitle,secContentBody,component){var m_comp=component;
var compId=component.getComponentId();
var subCnt=measurements.length;
var timeNow=new Date();
var ar=[];
ar.push("<table class='lab-table'>");
for(var x=0,xl=measurements.length;
x<xl;
x++){var meas=measurements[x];
var latestMeasDateTime=meas.value[0].getDateTime();
var rowClass=(x%2)?"even":"odd";
ar.push("<tr class='",rowClass,"'>");
var m1=meas.value[0];
if(component.getGraphFlag()===1){ar.push("<td class='lab-lbl'><span class='row-label'><a onClick='MP_Util.GraphResults(",m1.getEventCode().codeValue,",",compId,",0.0);'>",m1.getEventCode().display,"</a></span></td>");
}else{ar.push("<td class='lab-lbl'><span class='row-label'>",m1.getEventCode().display,"</span></td>");
}if(component.isShowTodayValue()){if(timeNow.getFullYear()===latestMeasDateTime.getFullYear()&&timeNow.getMonth()===latestMeasDateTime.getMonth()&&timeNow.getDate()===latestMeasDateTime.getDate()){ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[0],0,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[1],1,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[2],2,m_comp));
}else{ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(null,0,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[0],1,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[1],2,m_comp));
}}else{ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[0],0,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[1],1,m_comp));
ar.push(CERN_LABORATORY_O1_UTIL.CreateResultCell(meas.value[2],2,m_comp));
}ar.push("</tr>");
}ar.push("</table>");
secContentBody.innerHTML=ar.join("");
subSecTitle.innerHTML=subGroupName+" ("+subCnt+")";
m_comp.m_totalResultCount+=subCnt;
}}();
var CERN_LABORATORY_O1_UTIL=function(){var m_df=null;
return{LoadMeasurementData:function(jsonEval,personnelArray,codeArray,refreshInd){var mapObjects=[];
if(refreshInd){var results=jsonEval.RESULTS;
}else{var results=jsonEval.RECORD_DATA.RESULTS;
}for(var i=0,il=results.length;
i<il;
i++){if(results[i].CLINICAL_EVENTS.length>0){for(var j=0,jl=results[i].CLINICAL_EVENTS.length;
j<jl;
j++){var measureArray=[];
var mapObject=null;
if(results[i].EVENT_CD>0){mapObject=new MP_Core.MapObject(results[i].EVENT_CD,measureArray);
}else{mapObject=new MP_Core.MapObject(results[i].EVENT_SET_NAME,measureArray);
}if(results[i].EVENT_SET_CD&&results[i].EVENT_SET_CD>0){mapObject.eventSetCode=results[i].EVENT_SET_CD;
}var meas=results[i].CLINICAL_EVENTS[j];
for(var k=0,kl=meas.MEASUREMENTS.length;
k<kl;
k++){var measurement=new MP_Core.Measurement();
measurement.initFromRec(meas.MEASUREMENTS[k],codeArray);
measureArray.push(measurement);
}measureArray.sort(SortByEffectiveDate);
if(measureArray.length>0){mapObjects.push(mapObject);
}}}}return mapObjects;
},CreateResultCell:function(result,idx,component){var ar=[];
var labI18n=i18n.discernabu.laboratory_o1;
if(result==null){ar.push("<td class='lab-res",idx,"'><dl class='lab-info'><dt><span>",labI18n.VALUE,"</span></dt><dd class='lab-res'><span>--</span></dd></dl></td>");
}else{var obj=result.getResult();
var resStr=GetStringResult(obj,false);
var resHvrStr=GetStringResult(obj,true);
var display=result.getEventCode().display;
var dateTime=result.getDateTime();
var labNormalcy=CalculateNormalcy(result);
var within=MP_Util.CalcWithinTime(dateTime);
var resStatus=result.getStatus().display;
var sCritHigh="",sCritLow="",sNormHigh="",sNormLow="";
if(obj instanceof MP_Core.QuantityValue){var refRange=obj.getRefRange();
if(refRange!=null){if(refRange.getCriticalHigh()!=0||refRange.getCriticalLow()!=0){sCritHigh=refRange.getCriticalHigh();
sCritLow=refRange.getCriticalLow();
}if(refRange.getNormalHigh()!=0||refRange.getNormalLow()!=0){sNormHigh=refRange.getNormalHigh();
sNormLow=refRange.getNormalLow();
}}}var df=GetDateFormatter();
ar.push("<td class='lab-res",idx,"'><dl class='lab-info'><dt><span>",labI18n.VALUE,"</span></dt><dd class='lab-res'><span class='",labNormalcy,"'><span class='res-ind'>&nbsp;</span><span class='res-value'>",GetEventViewerLink(result,resStr),"</span>",MP_Util.Measurement.GetModifiedIcon(result),"</span>");
if(component.getDateFormat()!=4){ar.push("<br /><span class='within'>",MP_Util.DisplayDateByOption(component,dateTime),"</span>");
}ar.push("</dd></dl><h4 class='det-hd'><span>",labI18n.LABORATORY_DETAILS,"</span></h4><div class='hvr'><dl class='lab-det'><dt class='lab-det-type'><span>",display,":</span></dt><dd class='result'><span class='",labNormalcy,"'>",resHvrStr,"</span></dd><dt class='lab-det-type'><span>",labI18n.DATE_TIME,":</span></dt><dd class='result'><span>",df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</span></dd><dt class='lab-det-type'><span>",labI18n.NORMAL_LOW,":</span></dt><dd class='result'><span>",sNormLow,"</span></dd><dt class='lab-det-type'><span>",labI18n.NORMAL_HIGH,":</span></dt><dd class='result'><span>",sNormHigh,"</span></dd><dt class='lab-det-type'><span>",labI18n.CRITICAL_LOW,":</span></dt><dd class='result'><span>",sCritLow,"</span></dd><dt class='lab-det-type'><span>",labI18n.CRITICAL_HIGH,":</span></dt><dd class='result'><span>",sCritHigh,"</span></dd><dt class='lab-det-type'><span>",labI18n.STATUS,":</span></dt><dd class='result'><span>",resStatus,"</span></dd></dl></div></td>");
}return ar.join("");
}};
function GetDateFormatter(){if(m_df==null){m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}return m_df;
}function SortByEffectiveDate(a,b){if(a.getDateTime()>b.getDateTime()){return -1;
}else{if(a.getDateTime()<b.getDateTime()){return 1;
}else{return 0;
}}}function CreateHoverForMeasurement(measurement){var ar=[];
var labI18n=i18n.discernabu.laboratory_o1;
var obj=measurement.getResult();
var resStr=GetStringResult(obj,false);
var resHvrStr=GetStringResult(obj,true);
var display=measurement.getEventCode().display;
var dateTime=measurement.getDateTime();
var labNormalcy=CalculateNormalcy(measurement);
var sCritHigh="",sCritLow="",sNormHigh="",sNormLow="";
if(obj instanceof MP_Core.QuantityValue){var refRange=obj.getRefRange();
if(refRange!=null){if(refRange.getCriticalHigh()!=0||refRange.getCriticalLow()!=0){sCritHigh=refRange.getCriticalHigh();
sCritLow=refRange.getCriticalLow();
}if(refRange.getNormalHigh()!=0||refRange.getNormalLow()!=0){sNormHigh=refRange.getNormalHigh();
sNormLow=refRange.getNormalLow();
}}}var df=GetDateFormatter();
ar.push("<dt class='lab-res'><span>",display,":</span></dt><dd class='lab-det-type'><span class='",labNormalcy,"'>",resHvrStr,"</span></dd><dt class='lab-res'><span>",labI18n.DATE_TIME,":</span></dt><dd class='lab-det-type'><span>",df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</span></dd><dt class='lab-res'><span>",labI18n.NORMAL_LOW,":</span></dt><dd class='lab-det-type'><span>",sNormLow,"</span></dd><dt class='lab-res'><span>",labI18n.NORMAL_HIGH,":</span></dt><dd class='lab-det-type'><span>",sNormHigh,"</span></dd><dt class='lab-res'><span>",labI18n.CRITICAL_LOW,":</span></dt><dd class='lab-det-type'><span>",sCritLow,"</span></dd><dt class='lab-res'><span>",labI18n.CRITICAL_HIGH,":</span></dt><dd class='lab-det-type'><span>",sCritHigh,"</span></dd>");
return(ar.join(""));
}function GetStringResult(result,includeUOM){var value="";
var df=GetDateFormatter();
if(result instanceof MP_Core.QuantityValue){if(includeUOM){value=result.toString();
}else{value=result.getValue();
}}else{if(result instanceof Date){value=df.format(result,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}else{value=result;
}}return value;
}function CalculateCriticalRange(result){var rv="";
if(result instanceof MP_Core.QuantityValue){var rr=result.getRefRange();
if(rr!=null){rv=rr.toCriticalInlineString();
}}return rv;
}function CalculateNormalRange(result){var rv="";
if(result instanceof MP_Core.QuantityValue){var rr=result.getRefRange();
if(rr!=null){rv=rr.toNormalInlineString();
}}return rv;
}function CalculateNormalcy(result){var normalcy="res-normal";
var nc=result.getNormalcy();
if(nc!=null){var normalcyMeaning=nc.meaning;
if(normalcyMeaning!=null){if(normalcyMeaning==="LOW"){normalcy="res-low";
}else{if(normalcyMeaning==="HIGH"){normalcy="res-high";
}else{if(normalcyMeaning==="CRITICAL"||normalcyMeaning==="EXTREMEHIGH"||normalcyMeaning==="PANICHIGH"||normalcyMeaning==="EXTREMELOW"||normalcyMeaning==="PANICLOW"||normalcyMeaning==="VABNORMAL"||normalcyMeaning==="POSITIVE"){normalcy="res-severe";
}else{if(normalcyMeaning==="ABNORMAL"){normalcy="res-abnormal";
}}}}}}return normalcy;
}function GetEventViewerLink(measObject,res){var ar=[];
var params=[measObject.getPersonId(),measObject.getEncntrId(),measObject.getEventId(),'"EVENT"'];
ar.push("<a onclick='MP_Util.LaunchClinNoteViewer(",params.join(","),"); return false;' href='#'>",res,"</a>");
return ar.join("");
}}();

function MedicationsComponentStyle(){this.initByNamespace("med");
}MedicationsComponentStyle.inherits(ComponentStyle);
function MedicationsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new MedicationsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.MEDS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.MEDS.O1 - render component");
this.m_prnLookback=0;
this.setIncludeLineNumber(false);
this.setScope(2);
this.m_scheduled=false;
this.m_continuous=false;
this.m_prn=false;
this.m_admin=false;
this.m_susp=false;
this.m_discont=false;
this.m_scheduledSort=0;
this.m_prnAdminSort=0;
this.m_prnUnschedAvailSort=0;
this.m_continuousSort=0;
this.m_faceUpDtSched=false;
this.m_faceUpDtPRN=false;
this.m_lookBkHrsForAdm=24;
this.m_lookBkHrsForDisCont=24;
this.m_schedLookAhead=0;
MedicationsComponent.method("InsertData",function(){CERN_MEDS_O1.GetMedicationData(this);
});
MedicationsComponent.method("setPRNLookbackDays",function(value){this.m_prnLookback=value;
});
MedicationsComponent.method("getPRNLookbackDays",function(){return(this.m_prnLookback);
});
MedicationsComponent.method("setScheduled",function(value){this.m_scheduled=value;
});
MedicationsComponent.method("isScheduled",function(){return this.m_scheduled;
});
MedicationsComponent.method("setContinuous",function(value){this.m_continuous=value;
});
MedicationsComponent.method("isContinuous",function(){return(this.m_continuous);
});
MedicationsComponent.method("setPRN",function(value){this.m_prn=value;
});
MedicationsComponent.method("isPRN",function(){return(this.m_prn);
});
MedicationsComponent.method("setAdministered",function(value){this.m_admin=value;
});
MedicationsComponent.method("isAdministered",function(){return this.m_admin;
});
MedicationsComponent.method("setSuspended",function(value){this.m_susp=value;
});
MedicationsComponent.method("isSuspended",function(){return this.m_susp;
});
MedicationsComponent.method("setDiscontinued",function(value){this.m_discont=value;
});
MedicationsComponent.method("isDiscontinued",function(){return this.m_discont;
});
MedicationsComponent.method("setAdministeredLookBkHrs",function(value){this.m_lookBkHrsForAdm=value;
});
MedicationsComponent.method("getAdministeredLookBkHrs",function(){return this.m_lookBkHrsForAdm;
});
MedicationsComponent.method("setDiscontinuedLookBkHr",function(value){this.m_lookBkHrsForDisCont=value;
});
MedicationsComponent.method("getDiscontinuedLookBkHr",function(){return this.m_lookBkHrsForDisCont;
});
MedicationsComponent.method("setSchedLookaheadHrs",function(value){this.m_schedLookAhead=value;
});
MedicationsComponent.method("getSchedLookaheadHrs",function(){return(this.m_schedLookAhead);
});
MedicationsComponent.method("setScheduledSort",function(value){this.m_scheduledSort=value;
});
MedicationsComponent.method("getScheduledSort",function(){return(this.m_scheduledSort);
});
MedicationsComponent.method("setPRNAdminSort",function(value){this.m_prnAdminSort=value;
});
MedicationsComponent.method("getPRNAdminSort",function(){return(this.m_prnAdminSort);
});
MedicationsComponent.method("setPRNUnschedAvailSort",function(value){this.m_prnUnschedAvailSort=value;
});
MedicationsComponent.method("getPRNUnschedAvailSort",function(){return(this.m_prnUnschedAvailSort);
});
MedicationsComponent.method("setContinuousSort",function(value){this.m_continuousSort=value;
});
MedicationsComponent.method("getContinuousSort",function(){return(this.m_continuousSort);
});
MedicationsComponent.method("setDisplayScheduleFaceUpDt",function(value){this.m_faceUpDtSched=value;
});
MedicationsComponent.method("getDisplayScheduleFaceUpDt",function(){return(this.m_faceUpDtSched);
});
MedicationsComponent.method("setDisplayPRNFaceUpDt",function(value){this.m_faceUpDtPRN=value;
});
MedicationsComponent.method("getDisplayPRNFaceUpDt",function(){return(this.m_faceUpDtPRN);
});
MedicationsComponent.method("openTab",function(){var criterion=this.getCriterion();
var sParms="/PERSONID="+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+this.getLink()+"+^";
APPLINK(0,criterion.executable,sParms);
this.InsertData();
});
CERN_EventListener.addListener(this,EventListener.EVENT_ORDER_ACTION,this.InsertData,this);
}MedicationsComponent.inherits(MPageComponent);
var CERN_MEDS_O1=function(){function createMedicationItem(orders,codeAr,prsnlAr,faceUpDateFlag,severityFlag){var item=[];
var medOrigDate="",medHvrOrigDate="",startDate="",origOrderDate="",stopDate="",stopReason="",nextDoseDate="",lastDoesDate="",respProv="";
var currentDate=new Date();
var orderStatus=MP_Util.GetValueFromArray(orders.CORE.STATUS_CD,codeAr);
var medsI18n=i18n.discernabu.medications_o1;
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var fullDateTime4Year=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
var medName=getMedicationDisplayName(orders);
var dateTime=new Date();
var sDate=getHeadsUpMedicationDate(orders);
var sRejIcn="";
var sHvrRej="";
var medIsRej="";
if(orders.CORE.REJECTED_IND==1){sRejIcn="<dd class='med-rejected'>&nbsp;</dd>";
sHvrRej="<dd class='med-det-name'><span class='res-severe'>"+medsI18n.REJECTED_BY_PHARMACY+"</span></dd>";
medIsRej="med-is-rej";
}if(sDate){dateTime.setISO8601(sDate);
medOrigDate=df.formatISO8601(sDate,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);
medHvrOrigDate=df.formatISO8601(sDate,fullDateTime4Year);
}if(orders.SCHEDULE.CURRENT_START_DT_TM){startDate=df.formatISO8601(orders.SCHEDULE.CURRENT_START_DT_TM,fullDateTime4Year);
}if(orders.SCHEDULE.ORIG_ORDER_DT_TM){origOrderDate=df.formatISO8601(orders.SCHEDULE.ORIG_ORDER_DT_TM,fullDateTime4Year);
}if(orders.SCHEDULE.PROJECTED_STOP_DT_TM){stopDate=df.formatISO8601(orders.SCHEDULE.PROJECTED_STOP_DT_TM,fullDateTime4Year);
var reason=MP_Util.GetValueFromArray(orders.SCHEDULE.STOP_TYPE_CD,codeAr);
if(reason){stopReason=reason.display;
}}if(orders.DETAILS.NEXT_DOSE_DT_TM){nextDoseDate=df.formatISO8601(orders.DETAILS.NEXT_DOSE_DT_TM,fullDateTime4Year);
}else{nextDoseDate=medsI18n.NOT_DEFINED;
}if(orders.DETAILS.LAST_DOSE_DT_TM){lastDoesDate=df.formatISO8601(orders.DETAILS.LAST_DOSE_DT_TM,fullDateTime4Year);
}var jsSeverity="";
if(orders.SCHEDULE.PRN_IND===0&&orders.SCHEDULE.CONSTANT_IND===0&&orders.SCHEDULE.SUSPENDED_DT_TM===""){if(orders.DETAILS.NEXT_DOSE_DT_TM){dateTime.setISO8601(orders.DETAILS.NEXT_DOSE_DT_TM);
if(!(dateTime<currentDate)){jsSeverity="res-normal";
}else{if(severityFlag){jsSeverity="res-severe";
}}}}if(orders.CORE.RESPONSIBLE_PROVIDER_ID!==0){var prov=MP_Util.GetValueFromArray(orders.CORE.RESPONSIBLE_PROVIDER_ID,prsnlAr);
respProv=prov.fullName;
}item.push("<h3 class='info-hd'><span>",medName,"</span></h3>");
if(faceUpDateFlag){item.push("<dl class='med-info ",medIsRej," '><dd class= 'med-name'><span class= 'med-rej-ind'>&nbsp;</span><span class='",jsSeverity,"'>",medName,"</span><span class='med-sig detail-line'>",orders.DISPLAYS.SIMPLIFIED_DISPLAY_LINE,"</span></dd><dd class= 'med-date'><span class='",jsSeverity,"'>",medOrigDate,"</span></dd></dl>");
}else{item.push("<dl class='med-info ",medIsRej," '><dd><span class= 'med-rej-ind'>&nbsp;</span><span class='",jsSeverity,"'>",medName,"</span><span class='med-sig detail-line'>",orders.DISPLAYS.SIMPLIFIED_DISPLAY_LINE,"</span></dd></dl>");
}item.push("<h4 class='det-hd'><span>",medsI18n.MED_DETAIL,"</span></h4>","<div class='hvr'><dl class='med-det'>",sRejIcn,sHvrRej,"<dt><span>",medsI18n.MED_NAME,":</span></dt><dd class='med-det-name'><span>",getMedicationDisplayNameForHover(orders),"</span></dd>");
item.push("<dt><span>",medsI18n.ORDER_DETAILS,":</span></dt><dd class='med-det-dt'><span>",orders.DISPLAYS.CLINICAL_DISPLAY_LINE,"</span></dd>");
item.push("<dt><span>",medsI18n.ORDER_COMMENTS,":</span></dt><dd class='med-det-dt'><span>",orders.COMMENTS.ORDER_COMMENT.replace(/\n/g,"<br />"),"</span></dd>");
if(medName){item.push("<dt><span>",medsI18n.REQUESTED_START,":</span></dt><dd class='med-det-dt'><span>",startDate,"</span></dd>");
}else{item.push("<dt><span>",medsI18n.REQUESTED_START,":</span></dt><dd class='med-det-dt'><span>&nbsp;</span></dd>");
}item.push("<dt><span>",medsI18n.ORIG_DT_TM,":</span></dt><dd class='med-det-dt'><span>",origOrderDate,"</span></dd>");
item.push("<dt><span>",medsI18n.LAST_DOSE_DT_TM,":</span></dt><dd class='med-det-dt'><span>",lastDoesDate,"</span></dd>");
if(!(orders.SCHEDULE.PRN_IND==1||orders.SCHEDULE.FREQUENCY.UNSCHEDULED_IND==1||orders.SCHEDULE.CONSTANT_IND==1||orderStatus.meaning=="DISCONTINUED"||orderStatus.meaning=="CANCELED"||orderStatus.meaning=="SUSPENDED")){item.push("<dt><span>",medsI18n.NEXT_DOSE_DT_TM,":</span></dt><dd class='med-det-dt'><span>",nextDoseDate,"</span></dd>");
}item.push("<dt><span>",medsI18n.STOP_DT_TM,":</span></dt><dd class='med-det-dt'><span>",stopDate,"</span></dd>","<dt><span>",medsI18n.STOP_REASON,":</span></dt><dd class='med-det-dt'><span>",stopReason,"</span></dd>");
item.push("<dt><span>",medsI18n.RESPONSIBLE_PROVIDER,":</span></dt><dd class='med-det-dt'><span>",respProv,"</span></dd>");
item.push("<dt><span>",medsI18n.STATUS,":</span></dt><dd class='med-det-dt'><span>",orderStatus.display,"</span></dd>","<dt><span>",medsI18n.DETAILS,":</span></dt><dd class='med-det-dt'><span>",orders.DISPLAYS.SIMPLIFIED_DISPLAY_LINE,"</span></dd>","</dl></div>");
return(item.join(""));
}function createMedicationItemFromArray(ordersArray,codeArray,personnelArray,faceUpDateFlag,severityFlag){var jsMedItem=[];
for(var z=0,zl=ordersArray.length;
z<zl;
z++){jsMedItem.push(createMedicationItem(ordersArray[z],codeArray,personnelArray,faceUpDateFlag,severityFlag));
}return jsMedItem;
}function getHeadsUpMedicationDate(a){if(a.SCHEDULE.PRN_IND===1||a.SCHEDULE.FREQUENCY.UNSCHEDULED_IND===1){return a.DETAILS.LAST_DOSE_DT_TM;
}else{if(a.SCHEDULE.CONSTANT_IND===1){return"";
}else{if(a.SCHEDULE.SUSPENDED_DT_TM===""){return a.DETAILS.NEXT_DOSE_DT_TM;
}else{return"";
}}}}function SortByMedicationName(a,b){var aName=getMedicationDisplayName(a);
var bName=getMedicationDisplayName(b);
var aUpper=(aName)?aName.toUpperCase():"";
var bUpper=(bName)?bName.toUpperCase():"";
if(aUpper>bUpper){return 1;
}else{if(aUpper<bUpper){return -1;
}}return 0;
}function SortByLastDose(a,b){if(a.DETAILS.LAST_DOSE_DT_TM>b.DETAILS.LAST_DOSE_DT_TM){return -1;
}else{if(a.DETAILS.LAST_DOSE_DT_TM<b.DETAILS.LAST_DOSE_DT_TM){return 1;
}else{return 0;
}}}function SortByNextDose(a,b){if(a.DETAILS.NEXT_DOSE_DT_TM>b.DETAILS.NEXT_DOSE_DT_TM){return 1;
}else{if(a.DETAILS.NEXT_DOSE_DT_TM<b.DETAILS.NEXT_DOSE_DT_TM){return -1;
}else{return 0;
}}}function getMedicationDisplayName(order){var medName="";
if(order.DISPLAYS){medName=order.DISPLAYS.CLINICAL_NAME;
if(medName===""){medName=order.DISPLAYS.REFERENCE_NAME;
}if(medName===""){medName=order.DISPLAYS.DEPARTMENT_NAME;
}}return(medName);
}function getMedicationDisplayNameForHover(order){var medName="";
if(order.DISPLAYS){medName=order.DISPLAYS.REFERENCE_NAME;
if(medName===""){medName=order.DISPLAYS.CLINICAL_NAME;
}else{if(order.DISPLAYS.CLINICAL_NAME&&order.DISPLAYS.CLINICAL_NAME!==medName){medName=medName.concat(" (",order.DISPLAYS.CLINICAL_NAME,")");
}}if(medName===""){medName=order.DISPLAYS.DEPARTMENT_NAME;
}}return(medName);
}function sortMedications(orders,sortType){switch(sortType){case CERN_MEDS_O1.LastDoseDateTime:orders.sort(SortByLastDose);
break;
case CERN_MEDS_O1.NextDoseDateTime:orders.sort(SortByNextDose);
break;
default:orders.sort(SortByMedicationName);
}}return{GetMedicationData:function(component){var mgr=new MP_Core.XMLCCLRequestThreadManager(CERN_MEDS_O1.RenderReply,component,true);
var criterion=component.getCriterion();
var medsProgramName="MP_GET_ORDERS";
var sendAr=null;
var request=null;
var thread=null;
if(component.isScheduled()||component.isContinuous()||component.isPRN()){sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",0,47,57,0,1,0,0,0,0,2);
sendAr.push("0,0",criterion.ppr_cd+".0");
request=new MP_Core.ScriptRequest(component,"ENG:MPG.MEDS.O1 - load sch, cont, prn data");
request.setProgramName(medsProgramName);
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetMostMedData",component,request);
mgr.addThread(thread);
}if(component.isAdministered()){sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",0,8191,57,0,1,0,0,0,0,2);
sendAr.push("0,0",criterion.ppr_cd+".0");
request=new MP_Core.ScriptRequest(component,"ENG:MPG.MEDS.O1 - load administered data");
request.setProgramName(medsProgramName);
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetAdministeredData",component,request);
mgr.addThread(thread);
}if(component.isSuspended()){sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",0,16,57,0,1,4,0,0,0,2);
sendAr.push("0,0",criterion.ppr_cd+".0");
request=new MP_Core.ScriptRequest(component,"ENG:MPG.MEDS.O1 - load suspended data");
request.setProgramName(medsProgramName);
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetSuspendedData",component,request);
mgr.addThread(thread);
}if(component.isDiscontinued()){sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",component.getDiscontinuedLookBkHr(),192,57,0,1,4,0,0,0,1);
sendAr.push("0,0",criterion.ppr_cd+".0");
request=new MP_Core.ScriptRequest(component,"ENG:MPG.MEDS.O1 - load discontinued data");
request.setProgramName(medsProgramName);
request.setParameters(sendAr);
request.setAsync(true);
thread=new MP_Core.XMLCCLRequestThread("GetDiscontinuedData",component,request);
mgr.addThread(thread);
}mgr.begin();
},RenderReply:function(replyAr,component){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
var medsI18n=i18n.discernabu.medications_o1;
var countText="";
try{var AdministeredCount=0;
var AdministeredRejCount=0;
var codeAr=[];
var codeArray;
var continousCount=0;
var continousRejCount=0;
var dateTime=new Date();
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var DiscontinuedCount=0;
var DiscontinuedRejCount=0;
var item;
var jsAdministered=[];
var jsContinous=[];
var jsDiscontinued=[];
var jsHTML=[];
var jsPRNAdmin=[];
var jsPRNUnschedAvail=[];
var jsScheduled=[];
var jsSuspended=[];
var order;
var personnelArray;
var prnCount=0;
var prnLast48Orders=[];
var prnRejCount=0;
var prnUnschedAvailCount=0;
var prnUnschedAvailRejCount=0;
var prsnlAr=[];
var recordData;
var schedLookaheadHrs;
var scheduledCount=0;
var scheduledRejCount=0;
var sDate;
var sHTML="";
var strRejMedClass="";
var SuspendedCount=0;
var SuspendedRejCount=0;
var z;
var zl;
for(var x=replyAr.length;
x--;
){var reply=replyAr[x];
if(reply.getStatus()=="S"){switch(reply.getName()){case"GetMostMedData":recordData=reply.getResponse();
codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
recordData.ORDERS.sort(SortByMedicationName);
var prnLookbackDays=component.getPRNLookbackDays();
var prnLookbackDate=new Date();
var hrs=prnLookbackDate.getHours()-(24*prnLookbackDays);
prnLookbackDate.setHours(hrs);
schedLookaheadHrs=component.getSchedLookaheadHrs();
var schedLookaheadDate=new Date();
var schedHrs=schedLookaheadDate.getHours()+schedLookaheadHrs;
schedLookaheadDate.setHours(schedHrs);
var orderPrnAdmin=[];
var orderScheduled=[];
var orderPRNUnschedAvail=[];
var orderContinuous=[];
for(var y=0,yl=recordData.ORDERS.length;
y<yl;
y++){dateTime=new Date();
order=recordData.ORDERS[y];
var orderStatus=MP_Util.GetValueFromArray(order.CORE.STATUS_CD,codeArray);
if(orderStatus){item=null;
switch(orderStatus.meaning){case"ORDERED":case"INPROCESS":case"FUTURE":case"INCOMPLETE":case"MEDSTUDENT":if(order.SCHEDULE.PRN_IND==1||order.SCHEDULE.FREQUENCY.UNSCHEDULED_IND==1){if(prnLookbackDays>0){sDate=getHeadsUpMedicationDate(order);
if(sDate){dateTime.setISO8601(sDate);
if(dateTime>=prnLookbackDate){orderPrnAdmin.push(order);
if(order.CORE.REJECTED_IND==1){prnRejCount++;
}prnCount++;
}orderPRNUnschedAvail.push(order);
if(order.CORE.REJECTED_IND==1){prnUnschedAvailRejCount++;
}prnUnschedAvailCount++;
}else{orderPRNUnschedAvail.push(order);
if(order.CORE.REJECTED_IND==1){prnUnschedAvailRejCount++;
}prnUnschedAvailCount++;
}}else{orderPRNUnschedAvail.push(order);
if(order.CORE.REJECTED_IND==1){prnUnschedAvailRejCount++;
}prnUnschedAvailCount++;
}}else{if(order.SCHEDULE.CONSTANT_IND===1){orderContinuous.push(order);
if(order.CORE.REJECTED_IND==1){continousRejCount++;
}continousCount++;
}else{if(order.SCHEDULE.SUSPENDED_DT_TM===""){if(schedLookaheadHrs>0){sDate=getHeadsUpMedicationDate(order);
if(sDate){dateTime.setISO8601(sDate);
if(dateTime<=schedLookaheadDate){orderScheduled.push(order);
if(order.CORE.REJECTED_IND==1){scheduledRejCount++;
}scheduledCount++;
}}}else{orderScheduled.push(order);
if(order.CORE.REJECTED_IND==1){scheduledRejCount++;
}scheduledCount++;
}}}}break;
}}}var prnSort=component.getPRNAdminSort();
sortMedications(orderPrnAdmin,prnSort);
jsPRNAdmin=createMedicationItemFromArray(orderPrnAdmin,codeArray,personnelArray,true);
var schedSort=component.getScheduledSort();
var critFlag=(schedSort===CERN_MEDS_O1.NextDoseDateTime)?true:false;
sortMedications(orderScheduled,schedSort);
jsScheduled=createMedicationItemFromArray(orderScheduled,codeArray,personnelArray,component.getDisplayScheduleFaceUpDt(),critFlag);
var prnUnschedAvailSort=component.getPRNUnschedAvailSort();
sortMedications(orderPRNUnschedAvail,prnUnschedAvailSort);
jsPRNUnschedAvail=createMedicationItemFromArray(orderPRNUnschedAvail,codeArray,personnelArray,component.getDisplayPRNFaceUpDt());
var continuousSort=component.getContinuousSort();
sortMedications(orderContinuous,continuousSort);
jsContinous=createMedicationItemFromArray(orderContinuous,codeArray,personnelArray);
break;
case"GetAdministeredData":var adminLookback=new Date();
adminLookback.setHours(adminLookback.getHours()-component.getAdministeredLookBkHrs());
recordData=reply.getResponse();
codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
recordData.ORDERS.sort(SortByMedicationName);
for(z=0,zl=recordData.ORDERS.length;
z<zl;
z++){order=recordData.ORDERS[z];
if(order.DETAILS.LAST_DOSE_DT_TM){dateTime=new Date();
dateTime.setISO8601(order.DETAILS.LAST_DOSE_DT_TM);
if(dateTime>=adminLookback){jsAdministered.push(createMedicationItem(order,codeArray,personnelArray));
if(order.CORE.REJECTED_IND==1){AdministeredRejCount++;
}AdministeredCount++;
}}}break;
case"GetSuspendedData":recordData=reply.getResponse();
codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
recordData.ORDERS.sort(SortByMedicationName);
for(z=0,zl=recordData.ORDERS.length;
z<zl;
z++){order=recordData.ORDERS[z];
item=createMedicationItem(order,codeArray,personnelArray);
jsSuspended.push(item);
if(order.CORE.REJECTED_IND==1){SuspendedRejCount++;
}SuspendedCount++;
}break;
case"GetDiscontinuedData":recordData=reply.getResponse();
codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
recordData.ORDERS.sort(SortByMedicationName);
for(z=0,zl=recordData.ORDERS.length;
z<zl;
z++){order=recordData.ORDERS[z];
item=createMedicationItem(order,codeArray,personnelArray);
jsDiscontinued.push(item);
if(order.CORE.REJECTED_IND==1){DiscontinuedRejCount++;
}DiscontinuedCount++;
}break;
}}}if(component.isScheduled()){var lookFwdText="";
if(schedLookaheadHrs>0){lookFwdText=" "+medsI18n.NEXT_N_HOURS.replace("{0}",component.getSchedLookaheadHrs());
}jsHTML.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.SCHEDULED," (",scheduledCount,")",lookFwdText," </span></h3>");
if((schedLookaheadHrs>0)&&(scheduledCount>0)&&(component.getDisplayScheduleFaceUpDt())){strRejMedClass="";
if(scheduledRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-hdr'><dl class='med-info-hdr hdr'><dd class='med-name'></dd><dd class='med-date'>",medsI18n.NEXT_DOSE,"</dd></dl></div><div class='content-body ",strRejMedClass," '>",jsScheduled.join(""),"</div></div>");
}else{if(scheduledCount>0){if(scheduledRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsScheduled.join(""),"</div></div>");
}}jsHTML.push("</div>");
}if(component.isContinuous()){jsHTML.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.CONTINOUS," (",continousCount,")</span></h3>");
if(continousCount>0){strRejMedClass="";
if(continousRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsContinous.join(""),"</div></div>");
}jsHTML.push("</div>");
}if(component.getPRNLookbackDays()>0){jsHTML.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.PRN,"/",medsI18n.UNSCHEDULED," (",prnCount,")");
jsHTML.push(" ",medsI18n.ADMIN_LAST_N_HOURS.replace("{0}",component.getPRNLookbackDays()*24));
jsHTML.push("</span></h3>");
if(prnCount>0){strRejMedClass="";
if(prnRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-hdr'><dl class='med-info-hdr hdr'><dd class='med-name'></dd><dd class='med-date'>",medsI18n.LAST_GIVEN,"</dd></dl></div><div class='content-body ",strRejMedClass," '>",jsPRNAdmin.join(""),"</div></div>");
}jsHTML.push("</div>");
}if(component.isPRN()){jsHTML.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.PRN_UNSCHEDULED," (",prnUnschedAvailCount,")");
jsHTML.push("</span></h3>");
if(prnUnschedAvailCount>0){strRejMedClass="";
if(prnUnschedAvailRejCount>0){strRejMedClass="med-has-rej";
}if(component.getDisplayPRNFaceUpDt()){jsHTML.push("<div class='sub-sec-content'><div class='content-hdr'><dl class='med-info-hdr hdr'><dd class='med-name'></dd><dd class='med-date'>",medsI18n.LAST_GIVEN,"</dd></dl></div><div class='content-body ",strRejMedClass," '>",jsPRNUnschedAvail.join(""),"</div></div>");
}else{jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsPRNUnschedAvail.join(""),"</div></div>");
}}jsHTML.push("</div>");
}if(component.isAdministered()){jsHTML.push("<div class='sub-sec closed'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.SHOW_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.ADMINISTERED," (",AdministeredCount,")");
if(component.getAdministeredLookBkHrs()>0){jsHTML.push(" ",medsI18n.LAST_N_HOURS.replace("{0}",component.getAdministeredLookBkHrs()));
}jsHTML.push("</span></h3>");
if(AdministeredCount>0){strRejMedClass="";
if(AdministeredRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsAdministered.join(""),"</div></div>");
}jsHTML.push("</div>");
}if(component.isSuspended()){jsHTML.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",medsI18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.SUSPENDED," (",SuspendedCount,")</span></h3>");
if(SuspendedCount>0){strRejMedClass="";
if(SuspendedRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsSuspended.join(""),"</div></div>");
}jsHTML.push("</div>");
}if(component.isDiscontinued()){jsHTML.push("<div class='sub-sec closed'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl ' title='",medsI18n.SHOW_SECTION,"'>-</span><span class='sub-sec-title'>",medsI18n.DISCONTINUED," (",DiscontinuedCount,")");
if(component.getDiscontinuedLookBkHr()>0){jsHTML.push(" ",medsI18n.LAST_N_HOURS.replace("{0}",component.getDiscontinuedLookBkHr()));
}jsHTML.push("</span></h3>");
if(DiscontinuedCount>0){strRejMedClass="";
if(DiscontinuedRejCount>0){strRejMedClass="med-has-rej";
}jsHTML.push("<div class='sub-sec-content'><div class='content-body ",strRejMedClass," '>",jsDiscontinued.join(""),"</div></div>");
}jsHTML.push("</div>");
}var content=[];
var totalLength=DiscontinuedCount+SuspendedCount+AdministeredCount+prnCount+continousCount+scheduledCount+prnUnschedAvailCount;
content.push("<div class='",MP_Util.GetContentClass(component,totalLength),"'>",jsHTML.join(""),"</div>");
sHTML=content.join("");
countText=MP_Util.CreateTitleText(component,totalLength);
MP_Util.Doc.FinalizeComponent(sHTML,component,countText);
}catch(err){var errMsg=[];
errMsg.push("<b>",medsI18n.JS_ERROR,"</b><br><ul><li>",medsI18n.MESSAGE,": ",err.message,"</li><li>",medsI18n.NAME,": ",err.name,"</li><li>",medsI18n.NUMBER,": ",(err.number&65535),"</li><li>",medsI18n.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
CERN_MEDS_O1.LastDoseDateTime=1;
CERN_MEDS_O1.NextDoseDateTime=2;

function OrdersComponentStyle(){this.initByNamespace("ord");
}OrdersComponentStyle.inherits(ComponentStyle);
function OrdersComponent(criterion){this.setCriterion(criterion);
this.setStyles(new OrdersComponentStyle());
this.setComponentLoadTimerName("USR:MPG.ORDERS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.ORDERS.O1 - render component");
this.setIncludeLineNumber(true);
OrdersComponent.method("InsertData",function(){CERN_ORDERS_O1.GetOrdersTable(this);
});
OrdersComponent.method("HandleSuccess",function(recordData){CERN_ORDERS_O1.RenderComponent(this,recordData);
});
OrdersComponent.method("setCatalogCodes",function(value){this.m_catalogCodes=value;
});
OrdersComponent.method("addCatalogCode",function(value){if(this.m_catalogCodes==null){this.m_catalogCodes=[];
}this.m_catalogCodes.push(value);
});
OrdersComponent.method("getCatalogCodes",function(){return this.m_catalogCodes;
});
OrdersComponent.method("setOrderStatuses",function(value){this.m_orderStatuses=value;
});
OrdersComponent.method("addOrderStatus",function(value){if(this.m_orderStatuses==null){this.m_orderStatuses=[];
}this.m_orderStatuses.push(value);
});
OrdersComponent.method("getOrderStatuses",function(){return this.m_orderStatuses;
});
CERN_EventListener.addListener(this,EventListener.EVENT_ORDER_ACTION,this.InsertData,this);
}OrdersComponent.inherits(MPageComponent);
var CERN_ORDERS_O1=function(){return{GetOrdersTable:function(component){var sendAr=[];
var criterion=component.getCriterion();
var encntrOption=(component.getScope()==2)?(criterion.encntr_id+".0"):"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",encntrOption,criterion.provider_id+".0",component.getLookbackUnits(),129,63,2,0,1,0,0);
var codes=component.getCatalogCodes();
var catType=(codes!=null&&codes.length>0)?"value("+codes.join(",")+")":"0.0";
sendAr.push(catType);
sendAr.push(component.getLookbackUnitTypeFlag());
var statuses=component.getOrderStatuses();
var ordStatuses=(statuses!=null&&statuses.length>0)?"value("+statuses.join(",")+")":"0.0";
sendAr.push(ordStatuses);
sendAr.push("0",criterion.ppr_cd+".0");
MP_Core.XMLCclRequestWrapper(component,"MP_GET_ORDERS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var ordHTML="",countText="",blank="";
var ordArray=[];
var codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var personnelArray=[];
personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
var compNS=component.getStyles().getNameSpace();
var ord_i18n=i18n.discernabu.orders_o1;
ordArray.push("<div class='content-hdr'><dl class='",compNS,"-info-hdr hdr'>");
ordArray.push("<dt class='",compNS,"-nm-hd'><span>",blank,"</span></dt><dt class='",compNS,"-st-hd'><span>",ord_i18n.STATUS,"</span></dt><dt class='",compNS,"-dt-hd'><span>",ord_i18n.ORDERED,"</span></dt></dl></div>");
recordData.ORDERS.sort(OrderDateSort);
var orderLen=recordData.ORDERS.length;
ordArray.push("<div class ='",MP_Util.GetContentClass(component,orderLen),"'>");
for(var j=0;
j<orderLen;
j++){var orders=recordData.ORDERS[j];
var ordName="";
var ordDateTime="";
var strtDateTime="";
var statusTypeDisp="";
var orderDetails="";
var orderComments=orders.COMMENTS.ORDER_COMMENT;
orderComments=orderComments.replace(/\n/g,"<br />");
var ordLongDateTime="";
var strtLongDateTime="";
var responProvider="";
var dateTime=new Date();
if(orders.SCHEDULE!=""){dateTime.setISO8601(orders.SCHEDULE.ORIG_ORDER_DT_TM);
ordDateTime=dateTime.format("longDateTime2");
ordLongDateTime=dateTime.format("longDateTime3");
}if(orders.SCHEDULE!=""){dateTime.setISO8601(orders.SCHEDULE.CURRENT_START_DT_TM);
strtDateTime=dateTime.format("longDateTime2");
strtLongDateTime=dateTime.format("longDateTime3");
}if(orders.CORE!=""){if(orders.CORE.STATUS_CD>0){var statusTypeObj=MP_Util.GetValueFromArray(orders.CORE.STATUS_CD,codeArray);
statusTypeDisp=statusTypeObj.display;
}else{statusTypeDisp="";
}if(orders.CORE.RESPONSIBLE_PROVIDER_ID>0){var prsnlObj=MP_Util.GetValueFromArray(orders.CORE.RESPONSIBLE_PROVIDER_ID,personnelArray);
responProvider=prsnlObj.fullName;
}else{responProvider="";
}}if(orders.DISPLAYS!=""){ordName=orders.DISPLAYS.CLINICAL_NAME;
if(ordName==""){ordName=orders.DISPLAYS.REFERENCE_NAME;
}if(ordName==""){ordName=orders.DISPLAYS.DEPARTMENT_NAME;
}}var odetails=orders.DISPLAYS.CLINICAL_DISPLAY_LINE;
ordArray.push("<dl class='ord-info'><dd class= 'ord-name'><span>",ordName,"</span></dd><dd class= 'ord-status'><span>",statusTypeDisp,"</span></dd><dd class= 'ord-date'><span class='date-time'>",ordDateTime,"</span></dd></dl><h4 class='det-hd'><span>","</span></h4><div class='hvr'><dl class='ord-det'><dt><span>",ord_i18n.ORDER_NAME,":</span></dt><dd><span>",ordName,"</span></dd><dt><span>",ord_i18n.ORDER_DETAILS,":</span></dt><dd><span>",odetails,"</span></dd><dt><span>",ord_i18n.ORDER_COMMENTS,":</span></dt><dd><span>",orderComments,"</span></dd><dt><span>",ord_i18n.ORDER_DATE,":</span></dt><dd><span>",ordLongDateTime,"</span></dd><dt><span>",ord_i18n.START_DT_TM,":</span></dt><dd><span>",strtLongDateTime,"</span></dd>   <dt><span>",ord_i18n.ORDER_STATUS,":</span></dt><dd><span>",statusTypeDisp,"</span></dd><dt><span>",ord_i18n.ORDER_PHYS,":</span></dt><dd><span>",responProvider,"</span></dd></dl></div>");
}ordHTML=ordArray.join("");
countText=MP_Util.CreateTitleText(component,orderLen);
MP_Util.Doc.FinalizeComponent(ordHTML,component,countText);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
function OrderDateSort(a,b){if(a.SCHEDULE.ORIG_ORDER_DT_TM>b.SCHEDULE.ORIG_ORDER_DT_TM){return -1;
}else{if(a.SCHEDULE.ORIG_ORDER_DT_TM<b.SCHEDULE.ORIG_ORDER_DT_TM){return 1;
}else{return 0;
}}}}();

function PathologyComponentStyle(){this.initByNamespace("path");
}PathologyComponentStyle.inherits(ComponentStyle);
function PathologyComponent(criterion){this.setCriterion(criterion);
this.setLookBackDropDown(true);
this.setStyles(new PathologyComponentStyle());
this.setHoverEnabled(false);
this.setComponentLoadTimerName("USR:MPG.PATHOLOGY.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PATHOLOGY.O1 - render component");
}PathologyComponent.inherits(DocumentBaseComponent);

function PatientFamilyEduSumComponentStyle(){this.initByNamespace("pfe");
}PatientFamilyEduSumComponentStyle.inherits(ComponentStyle);
function PatientFamilyEduSumComponent(criterion){this.setCriterion(criterion);
this.setStyles(new PatientFamilyEduSumComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PATFAMEDUSUM.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PATFAMEDUSUM.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(2);
PatientFamilyEduSumComponent.method("InsertData",function(){CERN_PAT_FAMILY_EDU_SUM_O1.GetPatientFamilyEducation(this);
});
PatientFamilyEduSumComponent.method("HandleSuccess",function(recordData){CERN_PAT_FAMILY_EDU_SUM_O1.RenderComponent(this,recordData);
});
PatientFamilyEduSumComponent.method("openTab",function(){var criterion=this.getCriterion();
var peObject={};
peObject=window.external.DiscernObjectFactory("PATIENTEDUCATION");
MP_Util.LogDiscernInfo(this,"PATIENTEDUCATION","patienteducation.js","openTab");
var personId=criterion.person_id;
var encntrId=criterion.encntr_id;
peObject.SetPatient(personId,encntrId);
peObject.SetDefaultTab(0);
peObject.DoModal();
this.InsertData();
});
}PatientFamilyEduSumComponent.inherits(MPageComponent);
var CERN_PAT_FAMILY_EDU_SUM_O1=function(){function SortByDate(a,b){if(a.DATE>b.DATE){return -1;
}else{if(a.DATE<b.DATE){return 1;
}else{return 0;
}}}return{GetPatientFamilyEducation:function(component){var sendAr=[];
var criterion=component.getCriterion();
var groups=component.getGroups();
var events=(groups&&groups.length>0)?groups[0].getEventSets():null;
var sEventSet=MP_Util.CreateParamArray(events,1);
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",sEventSet,criterion.ppr_cd+".0");
MP_Core.XMLCclRequestWrapper(component,"mp_get_pat_edu_sum",sendAr,true);
},RenderComponent:function(component,recordData){var strHTML="",countText="",pfeAr=[];
var dateTime=new Date();
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var patEdi18n=i18n.discernabu.patienteducation;
pfeAr.push("<div class='",MP_Util.GetContentClass(component,recordData.EVENTS.length),"'>");
recordData.EVENTS.sort(SortByDate);
for(var i=0,l=recordData.EVENTS.length;
i<l;
i++){var events=recordData.EVENTS[i];
if(events.DATE!==""){dateTime.setISO8601(events.DATE);
}if(events.DISPLAY!==""){pfeAr.push("<h3 class='info-hd'><span>",events.DISPLAY,"</span></h3><dl class='pfe-info'><dt><span>",events.DISPLAY,"</span></dt><dd class='pfe-name'><span>",events.DISPLAY,"</span></dd><dt><span>",patEdi18n.DATE_TIME,":</span></dt><dd class='pfe-date'><span class='date-time'>",df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR),"</span></dd></dl>");
pfeAr.push("<h4 class='det-hd '><span>","</span></h4><div class='hvr'><dl class='ord-det'><dt><span>",patEdi18n.PE_INSTRUCTION,":</span></dt><dd class='ord-det-dt'><span>",events.DISPLAY,"</span></dd><dt><span>",patEdi18n.PE_DATE,":</span></dt><dd class='ord-det-dt'><span>",df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR),"</span></dd><dt><span>",patEdi18n.PE_PROVIDER,":</span></dt><dd class='ord-det-dt'><span>",events.PROVIDER,"</span></dd></dl></div>");
}}pfeAr.push("</div>");
countText=MP_Util.CreateTitleText(component,recordData.EVENTS.length);
strHTML=pfeAr.join("");
MP_Util.Doc.FinalizeComponent(strHTML,component,countText);
}};
}();

function PlanofCareComponentStyle(){this.initByNamespace("pc");
}PlanofCareComponentStyle.inherits(ComponentStyle);
function PlanofCareComponent(criterion){this.setCriterion(criterion);
this.setStyles(new PlanofCareComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PLANOFCARE.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PLANOFCARE.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(1);
this.m_planStatusCodes=null;
this.m_planClassificationCodes=null;
PlanofCareComponent.method("InsertData",function(){CERN_PLANOFCARE_O1.GetPlans(this);
});
PlanofCareComponent.method("HandleSuccess",function(recordData){CERN_PLANOFCARE_O1.RenderComponent(this,recordData);
});
PlanofCareComponent.method("setPlanStatusCodes",function(value){this.m_planStatusCodes=value;
});
PlanofCareComponent.method("addPlanStatusCode",function(value){if(this.m_planStatusCodes==null){this.m_planStatusCodes=[];
}this.m_planStatusCodes.push(value);
});
PlanofCareComponent.method("getPlanStatusCodes",function(){if(this.m_planStatusCodes!=null){return this.m_planStatusCodes;
}});
PlanofCareComponent.method("setPlanClassificationCodes",function(value){this.m_planClassificationCodes=value;
});
PlanofCareComponent.method("addPlanClassificationCode",function(value){if(this.m_planClassificationCodes==null){this.m_planClassificationCodes=[];
}this.m_planClassificationCodes.push(value);
});
PlanofCareComponent.method("getPlanClassificationCodes",function(){if(this.m_planClassificationCodes!=null){return this.m_planClassificationCodes;
}});
}PlanofCareComponent.inherits(MPageComponent);
var CERN_PLANOFCARE_O1=function(){return{GetPlans:function(component){var sendAr=[];
var criterion=component.getCriterion();
var status_cds=MP_Util.CreateParamArray(component.getPlanStatusCodes(),1);
var classification_cds=MP_Util.CreateParamArray(component.getPlanClassificationCodes(),1);
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.position_cd+".0",criterion.ppr_cd+".0",status_cds,classification_cds);
MP_Core.XMLCclRequestWrapper(component,"MP_GET_PLANS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
var jsPcHTML=[];
var pcHTML="";
var countText="";
var dateTime=new Date();
var codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var plans=recordData.PLANS;
jsPcHTML.push("<div class='content-hdr'><dl class='pc-info-hdr hdr'><dt><dd class='pc-name-hd'><span>",i18n.PLAN_NAME,"</span></dd><dd class='pc-status-hd'><span>",i18n.STATUS,"</span></dd><dd class='pc-dt-hd'><span>",i18n.DATE_TIME,"</span></dd></dt></dl></div>");
jsPcHTML.push("<div class='",MP_Util.GetContentClass(component,plans.length),"'>");
for(var i=0,il=plans.length;
i<il;
i++){var planName="",planStatus="",startDate="";
if(plans[i].NAME!=""){planName=plans[i].NAME;
}jsPcHTML.push("<dl class='pc-info'><dt><dd class='pc-name'><span>",planName,"</span></dd>");
if(plans[i].STATUS_CD!=""&&plans[i].STATUS_CD>0){var statusCode=MP_Util.GetValueFromArray(plans[i].STATUS_CD,codeArray);
planStatus=statusCode.display;
}jsPcHTML.push("<dd class='pc-status'><span>",planStatus,"</span></dd>");
if(plans[i].START_DT_TM!=""){startDate=plans[i].START_DT_TM;
dateTime.setISO8601(startDate);
startDate=dateTime.format("longDateTime2");
}jsPcHTML.push("<dd class='pc-dt'><span class='date-time'>",startDate,"</span></dd></dt></dl>");
}jsPcHTML.push("</div>");
pcHTML=jsPcHTML.join("");
countText=MP_Util.CreateTitleText(component,plans.length);
MP_Util.Doc.FinalizeComponent(pcHTML,component,countText);
}};
}();

function ProblemsComponentStyle(){this.initByNamespace("pl");
}ProblemsComponentStyle.inherits(ComponentStyle);
function ProblemsComponent(criterion){this.m_searchTypeFlag=null;
this.m_suggestionLimit=null;
this.m_problemVocab=null;
this.m_problemAddTypeCd=null;
this.m_problemClass=null;
this.m_problemVocabInd=0;
this.curSearchCounter=0;
this.nextSearchCounter=0;
this.replySearchCounter=0;
this.setCriterion(criterion);
this.setStyles(new ProblemsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PROBLEMS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PROBLEMS.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(1);
ProblemsComponent.method("InsertData",function(){this.setEditMode(true);
CERN_PROBLEMS_O1.GetProblemsTable(this);
});
ProblemsComponent.method("HandleSuccess",function(recordData){CERN_PROBLEMS_O1.RenderComponent(this,recordData);
});
ProblemsComponent.method("getSearchTypeFlag",function(){return this.m_searchTypeFlag;
});
ProblemsComponent.method("setSearchTypeFlag",function(value){this.m_searchTypeFlag=value;
});
ProblemsComponent.method("getSuggestionLimit",function(){return this.m_suggestionLimit;
});
ProblemsComponent.method("setSuggestionLimit",function(value){this.m_suggestionLimit=value;
});
ProblemsComponent.method("getCurSearchCounter",function(){return this.curSearchCounter;
});
ProblemsComponent.method("setCurSearchCounter",function(value){this.curSearchCounter=value;
});
ProblemsComponent.method("incCurSearchCounter",function(){this.curSearchCounter++;
});
ProblemsComponent.method("getNextSearchCounter",function(){return this.nextSearchCounter;
});
ProblemsComponent.method("setNextSearchCounter",function(value){this.nextSearchCounter=value;
});
ProblemsComponent.method("incNextSearchCounter",function(){this.nextSearchCounter++;
});
ProblemsComponent.method("getReplySearchCounter",function(){return this.replySearchCounter;
});
ProblemsComponent.method("setReplySearchCounter",function(value){this.replySearchCounter=value;
});
ProblemsComponent.method("incReplySearchCounter",function(){this.replySearchCounter++;
});
ProblemsComponent.method("setProblemsVocab",function(value){this.m_problemVocab=value;
});
ProblemsComponent.method("getProblemsVocab",function(){return this.m_problemVocab;
});
ProblemsComponent.method("setProblemsAddTypeCd",function(value){this.m_problemAddTypeCd=value;
});
ProblemsComponent.method("getProblemsAddTypeCd",function(){return this.m_problemAddTypeCd;
});
ProblemsComponent.method("setProblemsClassification",function(value){this.m_problemClass=value;
});
ProblemsComponent.method("getProblemsClassification",function(){return this.m_problemClass;
});
ProblemsComponent.method("setProblemsVocabInd",function(value){this.m_problemVocabInd=value;
});
ProblemsComponent.method("getProblemsVocabInd",function(){return this.m_problemVocabInd;
});
}ProblemsComponent.inherits(MPageComponent);
var CERN_PROBLEMS_O1=function(){return{GetProblemsTable:function(component){var sendAr=[];
var criterion=component.getCriterion();
sendAr.push("^MINE^",criterion.person_id+".0","0",criterion.provider_id+".0",criterion.ppr_cd+".0",criterion.position_cd+".0","1",component.getProblemsVocab()+".0",component.getProblemsVocabInd());
var request=new MP_Core.ScriptRequest(component,component.getComponentLoadTimerName());
request.setProgramName("MP_GET_PROBLEMS");
request.setParameters(sendAr);
request.setAsync(true);
MP_Core.XMLCCLRequestCallBack(component,request,CERN_PROBLEMS_O1.RenderComponent);
},RenderComponent:function(reply){var countText="";
var component=reply.getComponent();
try{var recordData=reply.getResponse();
var jsPlHTML=[];
var plHTML="";
if(reply.getStatus()!=="F"){if(recordData.PL_CAN_ADD===1){jsPlHTML.push(MP_Util.CreateAutoSuggestBoxHtml(component));
component.setAutoSuggestAddScript("mp_add_problem");
component.setAutoSuggestAddTimerName("USR:MPG.PROBLEMS.01 - add problem from auto suggest");
component.setSuggestionLimit(10);
}if(reply.getStatus()==="S"){var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
var probLen=(recordData.PROBLEM&&recordData.PROBLEM!==null)?recordData.PROBLEM.length:0;
jsPlHTML.push("<div class='",MP_Util.GetContentClass(component,probLen),"'>");
var problemArray=recordData.PROBLEM;
var codeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
for(var i=0,l=problemArray.length;
i<l;
i++){var responsibleProvider="";
var type="";
var onsetDate="";
var onsetCd="";
var onsetDateFormatted=[];
if(problemArray[i].ONSET_DT_TM&&problemArray[i].ONSET_DT_TM!==""){var onsetFlag=problemArray[i].ONSET_DT_FLAG;
onsetDate=problemArray[i].ONSET_DT_TM;
if(problemArray[i].ONSET_DT_CD>0){onsetCd=MP_Util.GetValueFromArray(problemArray[i].ONSET_DT_CD,codeArray);
onsetDateFormatted=onsetCd.display+" ";
}if(onsetFlag==2){onsetDateFormatted+=df.formatISO8601(onsetDate,mp_formatter.DateTimeFormatter.FULL_4YEAR);
}else{if(onsetFlag==1){onsetDateFormatted+=df.formatISO8601(onsetDate,mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE);
}else{onsetDateFormatted+=df.formatISO8601(onsetDate,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
}}}else{onsetCd="";
if(problemArray[i].ONSET_DT_CD>0){onsetCd=MP_Util.GetValueFromArray(problemArray[i].ONSET_DT_CD,codeArray);
onsetDateFormatted=onsetCd.display;
}}if(problemArray[i].PROVIDER_ID&&problemArray[i].PROVIDER_ID!==0){var provCodeObj=MP_Util.GetValueFromArray(problemArray[i].PROVIDER_ID,personnelArray);
responsibleProvider=provCodeObj.fullName;
}var plCode="";
var plName=problemArray[i].NAME;
var plAnnot=(problemArray[i].DISPLAY_AS&&problemArray[i].DISPLAY_AS!==null)?problemArray[i].DISPLAY_AS:null;
var plFaceUp=plAnnot;
if(plAnnot===null||plAnnot===""){plAnnot="&nbsp;";
plFaceUp=plName;
}if(problemArray[i].CODE&&problemArray[i].CODE!==""){plCode="("+problemArray[i].CODE+")";
}if(problemArray[i].PARENT_PROBLEM_ID===0){type="pl-name";
}else{type="pl-assoc-name";
}jsPlHTML.push("<h3 class='info-hd'><span>",plName,"</span></h3><dl class='pl-info'><dt><span>",i18n.PROBLEMS,":</span></dt><dd class=",type,"><span>",plFaceUp,"</span></dd><dt><span>",i18n.CODE,":</span></dt><dd class='pl-code'><span class='code'>",plCode,"</span></dd></dl><h4 class='det-hd'><span>",i18n.PROBLEMS_DETAILS,":</span></h4><div class='hvr'><dl class='pl-det'><dt><span>",i18n.PROBLEM,":</span></dt><dd class='pl-det-name'><span>",plName,"</span></dd><dt><span>",i18n.ANNOTATED_DISPLAY,":</span></dt><dd class='pl-det-annot'><span>",plAnnot,"</span></dd><dt><span>",i18n.ONSET_DATE,":</span></dt><dd class='pl-det-dt'><span>",onsetDateFormatted,"</span></dd><dt><span>",i18n.RESPONSIBLE_PROVIDER_NAME,":</span></dt><dd class='pl-det-dt'><span>",responsibleProvider,"</span></dd><dt><span>",i18n.COMMENTS,":</span></dt><dd class='pl-det-comment'><span>",MP_Util.Doc.GetComments(problemArray[i],personnelArray),"</span></dd></dl></div>");
}plHTML=jsPlHTML.join("");
countText=MP_Util.CreateTitleText(component,probLen);
jsPlHTML.push("</div>");
}else{if((reply.getStatus()==="Z")){plHTML=jsPlHTML.join("");
plHTML+=MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace());
}}MP_Util.Doc.FinalizeComponent(plHTML,component,countText);
if(recordData.PL_CAN_ADD===1){MP_Util.AddAutoSuggestControl(component,CERN_PROBLEMS_O1.SearchNomenclature,CERN_PROBLEMS_O1.HandleSelection,CERN_PROBLEMS_O1.CreateSuggestionLine);
component.setSearchTypeFlag(recordData.PL_SEARCH_TYPE);
}}else{countText=MP_Util.CreateTitleText(component,0);
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),reply.getError()),component,countText);
}}catch(err){countText=MP_Util.CreateTitleText(component,0);
var errMsg=[];
errMsg.push("<b>",i18n.JS_ERROR,"</b><br><ul><li>",i18n.MESSAGE,": ",err.message,"</li><li>",i18n.NAME,": ",err.name,"</li><li>",i18n.NUMBER,": ",(err.number&65535),"</li><li>",i18n.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
throw (err);
}finally{component.setEditMode(false);
}},SearchNomenclature:function(callback,textBox,component){var xhr=new XMLCclRequest();
var returnData;
component.incCurSearchCounter();
xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){MP_Util.LogScriptCallInfo(component,this,"problem.js","SearchNomenclature");
var msg=xhr.responseText;
var jsonMsg="";
if(msg){jsonMsg=JSON.parse(msg);
}if(jsonMsg){var nextSearchCounter=component.getNextSearchCounter();
var replySearchCounter=jsonMsg.RECORD_DATA.SEARCHINDEX;
component.setReplySearchCounter(replySearchCounter);
if(replySearchCounter>nextSearchCounter&&textBox.value!==""){component.setNextSearchCounter(replySearchCounter);
returnData=jsonMsg.RECORD_DATA.NOMENCLATURE;
callback.autosuggest(returnData);
}}}};
xhr.open("GET","mp_search_nomenclatures");
xhr.send("^MINE^, ^"+textBox.value+"^,"+component.getSuggestionLimit()+","+component.getCurSearchCounter()+","+component.getSearchTypeFlag());
},HandleSelection:function(suggestionObj,textBox,component){var criterion=component.getCriterion();
var sendAr=[];
sendAr.push("^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.position_cd+".0",criterion.ppr_cd+".0",suggestionObj.VALUE+".0","0.0","1","1",component.getProblemsAddTypeCd()+".0",component.getProblemsClassification()+".0");
var request=new MP_Core.ScriptRequest(component,component.getAutoSuggestAddTimerName());
request.setProgramName(component.getAutoSuggestAddScript());
request.setParameters(sendAr);
request.setAsync(true);
MP_Core.XMLCCLRequestCallBack(component,request,CERN_PROBLEMS_O1.AddProblemToList);
},AddProblemToList:function(reply){var alertMsg="";
var jsonReply=reply.getResponse();
var component=reply.getComponent();
var componentName="";
var textBox=MP_Util.RetrieveAutoSuggestSearchBox(component);
componentName=i18n.discernabu.PROBLEM;
if(jsonReply&&jsonReply.PRIVILEGE_IND===0){alertMsg=i18n.discernabu.NO_PRIVS;
alertMsg=alertMsg.replace("{name}",componentName);
alert(alertMsg);
textBox.value="";
}else{if(jsonReply&&jsonReply.DUPLICATE_IND==1){alertMsg=i18n.discernabu.DUPLICATE;
alertMsg=alertMsg.replace(/{name}/gi,componentName);
alert(alertMsg);
textBox.value="";
}else{MP_Util.Doc.HideHovers();
component.InsertData();
}}},CreateSuggestionLine:function(suggestionObj,searchVal){return CERN_PROBLEMS_O1.HighlightValue(suggestionObj.NAME,searchVal);
},HighlightValue:function(inString,term){return"<strong class='highlight'>"+inString.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1").split(" ").join("|")+")(?![^<>]*>)(?![^&;]+;)","gi"),"</strong>$1<strong class='highlight'>")+"</strong>";
}};
}();

function ProcedureComponentStyle(){this.initByNamespace("proc");
}ProcedureComponentStyle.inherits(ComponentStyle);
function ProcedureComponent(criterion){this.setCriterion(criterion);
this.setStyles(new ProcedureComponentStyle());
this.setIncludeLineNumber(true);
this.setScope(1);
this.setComponentLoadTimerName("USR:MPG.PROCEDURE.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PROCEDURE.O1 - render component");
ProcedureComponent.method("InsertData",function(){CERN_PROCEDURE_O1.GetProcedureTable(this);
});
ProcedureComponent.method("HandleSuccess",function(recordData){CERN_PROCEDURE_O1.RenderComponent(this,recordData);
});
}ProcedureComponent.inherits(MPageComponent);
var CERN_PROCEDURE_O1=function(){return{GetProcedureTable:function(component){var sendAr=[];
var criterion=component.getCriterion();
var prsnlInfo=criterion.getPersonnelInfo();
var encntrs=prsnlInfo.getViewableEncounters();
var encntrVal=(encntrs)?"value("+encntrs+")":"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",encntrVal,criterion.provider_id+".0",criterion.ppr_cd+".0");
MP_Core.XMLCclRequestWrapper(component,"mp_get_procedures",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
jsHTML.push("<div class='",MP_Util.GetContentClass(component,recordData.PROC_CNT),"'>");
for(var i=0;
i<recordData.PROC_CNT;
i++){var commentString="";
var onsetDate="";
var dateTime=null;
if(recordData.PROC[i].ONSET!=""){dateTime=new Date();
var onsetDt=recordData.PROC[i].ONSET_UTC;
dateTime.setISO8601(onsetDt);
if(recordData.PROC[i].DATE_FLAG==0||recordData.PROC[i].DATE_FLAG==1){onsetDate=df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
}else{if(recordData.PROC[i].DATE_FLAG==2){onsetDate=df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE);
}else{if(recordData.PROC[i].DATE_FLAG==3){onsetDate=df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_4YEAR);
}}}}jsHTML.push("  <h3 class='info-hd'><SPAN>",recordData.PROC[i].DISPLAY_AS,"</SPAN></h3><dl class='proc-info'><dt class='proc-name'><span>",i18n.PROCEDURE,"</span></dt><dd class='proc-name'><span>",recordData.PROC[i].DISPLAY_AS,"</span></dd><dt class='proc-date'><span>",i18n.SIG_LINE,"</span></dt><dd class='proc-date'><span class='date-time'>",onsetDate,"</span></dd></dl><h4 class='det-hd'><span>",i18n.PROCEDURE_DETAILS,"</span></h4><div class='proc-det hvr'><dt class='proc-det-name'><span>",i18n.PROCEDURE,":</span></dt><dd class='proc-det-name'>",recordData.PROC[i].NAME,"</dd><dt class='proc-det-name'><span>",i18n.DISPLAY_AS,":</span></dt><dd class='proc-det-name'>",recordData.PROC[i].DISPLAY_AS,"</dd><dt class='proc-det-name'><span>",i18n.PROCEDURE_DATE,":</span></dt><dd class='proc-det-name'>",onsetDate,"</dd><dt class='proc-det-name'><span>",i18n.STATUS,":</span></dt><dd class='proc-det-name'>",recordData.PROC[i].STATUS,"</dd><dt class='proc-det-name'><span>",i18n.PROVIDER,":</span></dt><dd class='proc-det-name'>",recordData.PROC[i].PROVIDER,"</dd><dt class='proc-det-name'><span>",i18n.LOCATION,":</span></dt><dd class='proc-det-name'>",recordData.PROC[i].LOCATION,"</dd><dt class='proc-det-name'><span>",i18n.COMMENTS,":</span></dt>");
for(var k=0;
k<recordData.PROC[i].COMMENTS.length;
k++){var begin_dttm="";
if(recordData.PROC[i].COMMENTS[k].BEG_EFFECTIVE_DT_TM!=""){dateTime=new Date();
var beginDt=recordData.PROC[i].COMMENTS[k].BEG_EFFECTIVE_DT_TM;
dateTime.setISO8601(beginDt);
begin_dttm=df.format(dateTime,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
}commentString+=begin_dttm+" - "+recordData.PROC[i].COMMENTS[k].NAME_FULL_FORMATTED+"<br/>"+recordData.PROC[i].COMMENTS[k].LONG_TEXT+"<br/>";
}jsHTML.push("<dd class='proc-det-name'>",commentString,"</dd>");
jsHTML.push("</div>");
}jsHTML.push("</div>");
var countText=MP_Util.CreateTitleText(component,recordData.PROC_CNT);
MP_Util.Doc.FinalizeComponent(jsHTML.join(""),component,countText);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}return;
}};
function formatDateTimeUTC(dttm,format){var dateTime=new Date();
dateTime.setISO8601(dttm);
return dateTime.format(format);
}}();

function VisitsComponentStyle(){this.initByNamespace("vis");
}VisitsComponentStyle.inherits(ComponentStyle);
function VisitsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new VisitsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.VISITS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.VISITS.O1 - render component");
this.setScope(1);
this.setIncludeLineNumber(true);
VisitsComponent.method("HandleSuccess",function(recordData){CERN_VISITS_O1.RenderComponent(this,recordData);
});
VisitsComponent.method("InsertData",function(){CERN_VISITS_O1.GetVisits(this);
});
}VisitsComponent.inherits(MPageComponent);
var CERN_VISITS_O1=function(){return{GetVisits:function(component){var sendAr=[];
var program="mp_get_visits";
var criterion=component.getCriterion();
var prsnlInfo=criterion.getPersonnelInfo();
var encntrs=prsnlInfo.getViewableEncounters();
var encntrVal=(encntrs)?"value("+encntrs+")":"0.0";
sendAr.push("^MINE^",criterion.person_id+".0",criterion.provider_id+".0",encntrVal);
MP_Core.XMLCclRequestWrapper(component,program,sendAr,true);
return;
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var countText="";
var jsHTML=[];
var jsonPrevious=[];
var jsonFuture=[];
var jsPrevious=[];
var jsFuture=[];
var visitCount=recordData.VISIT_CNT;
var futureCount=recordData.FUTURE_VISIT_CNT;
for(var p=0;
p<visitCount;
p++){jsonPrevious.push(recordData.VISIT[p]);
}for(var f=futureCount;
f--;
){jsonFuture.push(recordData.FUTURE_VISIT[f]);
}jsonFuture.sort(VisitSorter);
jsHTML=populateSubSections(jsonPrevious,i18n.PREVIOUS);
jsHTML=jsHTML.concat(populateSubSections(jsonFuture,i18n.FUTURE));
var visLen=visitCount+futureCount;
var content=[];
content.push("<div class ='",MP_Util.GetContentClass(component,visLen),"'>",jsHTML.join(""),"</div>");
var vishtml=content.join("");
countText=MP_Util.CreateTitleText(component,visLen);
MP_Util.Doc.FinalizeComponent(vishtml,component,countText);
}catch(err){alert("An error has occurred in Visits : "+err.name+" - "+err.message);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
function VisitSorter(a,b){var aDate=a.DATE;
var bDate=b.DATE;
if(aDate>bDate){return 1;
}else{if(aDate<bDate){return -1;
}else{return 0;
}}}function VisitSorterRev(a,b){var aDate=a.DATE;
var bDate=b.DATE;
if(aDate>bDate){return -1;
}else{if(aDate<bDate){return 1;
}else{return 0;
}}}function populateSubSections(jsData,sectionName){var DataCount=jsData.length;
var jsSection=[];
var jsHTMLContent=[];
for(p=0;
p<DataCount;
p++){var DataObj=jsData[p];
var dateTime=new Date();
dateTime.setISO8601(DataObj.DATE);
jsSection.push("<dl class='vis-info'>","<dt class='vis-dt'>",i18n.DATE,"</dt>","<dd class='vis-dt'>",dateTime.format("shortDate3"),"</dd><dt class='vis-tp'>",i18n.TYPE,"</dt>","<dd class='vis-tp'>",DataObj.TYPE,"</dd>","<dt class='vis-lc'>",i18n.LOCATION,"</dt>","<dd class='vis-lc'>",DataObj.LOCATION," </dd></dl>","<h4 class='det-hd'><span>",i18n.VISIT_DETAILS,"</span></h4>","<div class='hvr'><dl class='vis-det'>","<dt class='vis-det-vr'><span>",i18n.VISIT_REASON,":</span></dt>","<dd class='vis-det-vr'>",DataObj.DESCRIPTION,"</dd></dl> </div>");
}jsHTMLContent.push("<div class='sub-sec'><h3 class='sub-sec-hd'><span class='sub-sec-hd-tgl' title='",i18n.HIDE_SECTION,"'>-</span><span class='sub-sec-title'>",sectionName," (",DataCount,") </span></h3>","<div class='sub-sec-content'>","<div class='content-hdr'><dl class ='vis-info-hdr hdr'>","<dd class ='vis-dt'><span>",i18n.DATE,"</span></dd>","<dd class ='vis-tp'><span>",i18n.TYPE,"</span></dd>","<dd class ='vis-lc'><span>",i18n.LOCATION,"</span></dd></dl></div>","<div class='content-body'>");
if(jsSection.length>0){jsHTMLContent.push(jsSection.join(""));
}else{jsHTMLContent.push("<span class='res-none'>",i18n.NO_RESULTS_FOUND,"</span>");
}jsHTMLContent.push("</div></div></div>");
return jsHTMLContent;
}}();

function VitalSignComponentStyle(){this.initByNamespace("vs");
}VitalSignComponentStyle.inherits(ComponentStyle);
function VitalSignComponent(criterion){this.setCriterion(criterion);
this.setLookBackDropDown(true);
this.setStyles(new VitalSignComponentStyle());
this.setIncludeLineNumber(false);
this.m_graphLink=1;
this.m_showTodayValue=false;
this.setResultCount(3);
this.setIncludeEventSetInfo(true);
this.setComponentLoadTimerName("USR:MPG.VITALSIGNS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.VITALSIGNS.O1 - render component");
VitalSignComponent.method("HandleSuccess",function(replyAr,component){CERN_VITALSIGN_O1.RenderComponent(component,replyAr);
});
VitalSignComponent.method("setGraphFlag",function(value){this.m_graphLink=value;
});
VitalSignComponent.method("getGraphFlag",function(){return(this.m_graphLink);
});
VitalSignComponent.method("setShowTodayValue",function(value){this.m_showTodayValue=value;
});
VitalSignComponent.method("isShowTodayValue",function(){return(this.m_showTodayValue);
});
VitalSignComponent.method("openTab",function(){var paramString=criterion.person_id+"|"+criterion.encntr_id+"|"+0+"|0|0";
MP_Util.LogMpagesEventInfo(this,"POWERFORM",paramString,"vitals.js","openTab");
MPAGES_EVENT("POWERFORM",paramString);
CERN_EventListener.fireEvent(null,this,EventListener.EVENT_CLINICAL_EVENT,"VitalSigns");
});
VitalSignComponent.method("openDropDown",function(formID){var criterion=this.getCriterion();
var paramString=criterion.person_id+"|"+criterion.encntr_id+"|"+formID+"|0|0";
MP_Util.LogMpagesEventInfo(this,"POWERFORM",paramString,"vitals.js","openDropDown");
MPAGES_EVENT("POWERFORM",paramString);
CERN_EventListener.fireEvent(null,this,EventListener.EVENT_CLINICAL_EVENT,"VitalSigns");
});
VitalSignComponent.method("refresh",function(event,args){this.setEditMode(true);
MP_Util.Doc.HideHovers();
this.InsertData();
});
CERN_EventListener.addListener(this,EventListener.EVENT_CLINICAL_EVENT,this.refresh,this);
}VitalSignComponent.inherits(MeasurementBaseComponent);
var CERN_VITALSIGN_O1=function(){var VitalTable=function(seqGroup){var m_seqGroup=seqGroup;
var m_rows=[];
var m_eventSets=[];
this.addRows=function(group,recordData){var vitalsI18N=i18n.discernabu.vitals_o1;
var results=null;
var oVitalRow=null;
switch(group.getGroupName()){case vitalsI18N.TEMPERATURE:case vitalsI18N.HEART_RATE:case vitalsI18N.BLOOD_PRESSURE:results=CERN_MEASUREMENT_BASE_O1.LoadMeasurementDataArray(recordData);
oVitalRow=new VitalRow(group,m_seqGroup);
oVitalRow.init(results);
m_rows.push(oVitalRow);
break;
default:results=CERN_MEASUREMENT_BASE_O1.LoadMeasurementDataMap(recordData);
flattenEventSets(recordData.EVENT_SETS);
for(var x=results.length;
x--;
){oVitalRow=new VitalRow(group,m_seqGroup);
var result=results[x];
oVitalRow.setId(m_eventSets[result.name]);
oVitalRow.init(result);
m_rows.push(oVitalRow);
}break;
}};
this.getRows=function(){return m_rows;
};
function flattenEventSets(eventSets){if(eventSets&&!m_eventSets.length){for(var x=eventSets.length;
x--;
){var eventSet=eventSets[x];
m_eventSets[eventSet.EVENT_SET_NAME]=eventSet.EVENT_SET_CD;
}}}};
var BPResult=function(label,measAr){var m_ar=measAr;
var m_disp=label;
var m_date=null;
if(measAr&&measAr.length>0){m_date=(measAr[0])?measAr[0].getDateTime():measAr[1].getDateTime();
}this.getDisplay=function(){return m_disp;
};
this.getResults=function(){return m_ar;
};
this.getDateTime=function(){return m_date;
};
};
var VitalRow=function(group,seqGroup){var m_dis=null;
var m_seq=0;
var m_id=0;
var m_measAr=null;
var m_type=0;
var m_group=group;
var m_seqGroup=seqGroup;
this.init=function(results){var vitalsI18N=i18n.discernabu.vitals_o1;
switch(m_group.getGroupName()){case vitalsI18N.TEMPERATURE:m_seq=1;
m_measAr=results;
m_dis=vitalsI18N.TEMPERATURE;
m_id=m_group.getGroupId();
m_type=CERN_VITALSIGN_O1.TYPE_TEMPERATURE;
break;
case vitalsI18N.HEART_RATE:m_seq=2;
m_measAr=results;
m_dis=vitalsI18N.HEART_RATE;
m_id=m_group.getGroupId();
m_type=CERN_VITALSIGN_O1.TYPE_STANDARD_GROUPING;
break;
case vitalsI18N.BLOOD_PRESSURE:m_seq=3;
m_measAr=pairResults(results);
m_dis=vitalsI18N.BLOOD_PRESSURE;
m_id=m_group.getGroupId();
m_type=CERN_VITALSIGN_O1.TYPE_BLOOD_PRESSURE;
break;
default:m_seq=4;
m_measAr=results.value;
m_dis=results.name;
m_type=CERN_VITALSIGN_O1.TYPE_DISCRETE_RESULT;
break;
}if(m_seqGroup){var items=m_seqGroup.getItems();
for(var x=items.length;
x--;
){if(items[x]===m_id){m_seq=x;
break;
}}}};
this.getDisplay=function(){return m_dis;
};
this.getSequence=function(){return m_seq;
};
this.setId=function(val){m_id=val;
};
this.getId=function(){return m_id;
};
this.getMeasureArray=function(){return m_measAr;
};
this.getType=function(){return m_type;
};
this.getEventSets=function(){if(m_group instanceof MPageEventSetGroup){return m_group.getEventSets();
}return null;
};
function pairResults(meas){var bpMeas1=[];
var bpMeas2=[];
var bpMeas3=[];
var measCnt=0;
var label1="";
var label2="";
var label3="";
var currMeas=0;
var bpEventCds=[];
for(var j=0;
((j<meas.length)&&(measCnt<3));
j++){currMeas=meas[j];
var k=j;
var matchFound=false;
var label=[];
var meas1,meas2;
if(currMeas!=-1){if(k+1<(meas.length)){while(currMeas.getDateTime().getTime()==meas[k+1].getDateTime().getTime()){if(currMeas.getUpdateDateTime().getTime()==meas[k+1].getUpdateDateTime().getTime()){label=checkBPPair(currMeas.getEventCode().codeValue,meas[k+1].getEventCode().codeValue,group);
if(label[0]){matchFound=true;
measCnt++;
if(label[1]){meas1=currMeas;
meas2=meas[k+1];
}else{meas2=currMeas;
meas1=meas[k+1];
}if(measCnt==1){bpMeas1.push(meas1);
bpMeas1.push(meas2);
label1=label[0];
}if(measCnt==2){bpMeas2.push(meas1);
bpMeas2.push(meas2);
label2=label[0];
}if(measCnt==3){bpMeas3.push(meas1);
bpMeas3.push(meas2);
label3=label[0];
}meas.splice(k+1,1);
break;
}}k++;
if(k>=(meas.length-1)){break;
}}}if(!matchFound){measCnt++;
var labelOrder=getBPLabel(currMeas.getEventCode().codeValue,group);
if(labelOrder[1]==0){meas1=currMeas;
meas2=0;
}else{meas2=currMeas;
meas1=0;
}if(measCnt==1){bpMeas1.push(meas1);
bpMeas1.push(meas2);
label1=labelOrder[0];
}if(measCnt==2){bpMeas2.push(meas1);
bpMeas2.push(meas2);
label2=labelOrder[0];
}if(measCnt==3){bpMeas3.push(meas1);
bpMeas3.push(meas2);
label3=labelOrder[0];
}}}}var returnAr=[];
if(bpMeas1&&bpMeas1.length>0){returnAr.push(new BPResult(label1,bpMeas1));
}if(bpMeas2&&bpMeas2.length>0){returnAr.push(new BPResult(label2,bpMeas2));
}if(bpMeas3&&bpMeas3.length>0){returnAr.push(new BPResult(label3,bpMeas3));
}return returnAr;
}function getBPLabel(codeValue,group){if(group instanceof MPageGrouper){var bpGroups=group.getGroups();
for(var y=0;
y<bpGroups.length;
y++){if(bpGroups[y] instanceof MPageEventCodeGroup){var groupName=bpGroups[y].getGroupName();
ecArry=bpGroups[y].getEventCodes();
for(var i=0;
i<ecArry.length;
i++){if(ecArry[i]==codeValue){if(i==0){return[groupName,0];
}else{return[groupName,1];
}}}}}}}function checkBPPair(eventCd1,eventCd2,group){var cd1Fnd=false,cd2Fnd=false;
var ec="";
var correctOrder=true;
var ecArry=[];
if(group instanceof MPageGrouper){var bpGroups=group.getGroups();
for(var y=0;
y<bpGroups.length;
y++){if(bpGroups[y] instanceof MPageEventCodeGroup){ecArry=bpGroups[y].getEventCodes();
for(var i=0;
i<ecArry.length;
i++){if(ecArry[i]==eventCd1){cd1Fnd=true;
if(i==0){correctOrder=true;
}else{correctOrder=false;
}}else{if(ecArry[i]==eventCd2){cd2Fnd=true;
}}}if(cd1Fnd&&cd2Fnd){return([bpGroups[y].getGroupName(),correctOrder]);
}}cd1Fnd=false;
cd2Fnd=false;
}}return([false,false]);
}};
var HoverResults=function(oMeasure){var m_df=MP_Util.GetDateFormatter();
var m_normalcy=MP_Util.Measurement.GetNormalcyClass(oMeasure);
var m_date=m_df.format(oMeasure.getDateTime(),mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
var m_display=(oMeasure.getEventCode())?oMeasure.getEventCode().display:"";
var m_status=(oMeasure.getStatus())?oMeasure.getStatus().display:"";
var m_sResult=MP_Util.Measurement.GetString(oMeasure);
var m_sCritHigh="",m_sCritLow="",m_sNormHigh="",m_sNormLow="";
var m_results=oMeasure.getResult();
if(m_results instanceof MP_Core.QuantityValue){var refRange=m_results.getRefRange();
if(refRange){if(refRange.getCriticalHigh()!=0||refRange.getCriticalLow()!=0){m_sCritHigh=refRange.getCriticalHigh();
m_sCritLow=refRange.getCriticalLow();
}if(refRange.getNormalHigh()!=0||refRange.getNormalLow()!=0){m_sNormHigh=refRange.getNormalHigh();
m_sNormLow=refRange.getNormalLow();
}}}this.getDisplay=function(){return m_display;
};
this.getStatus=function(){return m_status;
};
this.getDateTime=function(){return m_date;
};
this.getNormalcy=function(){return m_normalcy;
};
this.getCriticalHigh=function(){return m_sCritHigh;
};
this.getCriticalLow=function(){return m_sCritLow;
};
this.getNormalHigh=function(){return m_sNormHigh;
};
this.getNormalLow=function(){return m_sNormLow;
};
this.getResultDisplay=function(){return m_sResult;
};
this.toHTML=function(){var vitalsI18n=i18n.discernabu.vitals_o1;
var ar=["<h4 class='det-hd'><span>",vitalsI18n.LABORATORY_DETAILS,"</span></h4><div class='hvr'><dl class='vs-det'><dt class='vs-det-type'><span>",m_display,":</span></dt><dd class='result'><span class='",m_normalcy,"'>",m_sResult,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.DATE_TIME,":</span></dt><dd class='result'><span>",m_date,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.STATUS,":</span></dt><dd class='result'><span>",m_status,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.NORMAL_LOW,":</span></dt><dd class='result'><span>",m_sNormLow,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.NORMAL_HIGH,":</span></dt><dd class='result'><span>",m_sNormHigh,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.CRITICAL_LOW,":</span></dt><dd class='result'><span>",m_sCritLow,"</span></dd><dt class='vs-det-type'><span>",vitalsI18n.CRITICAL_HIGH,":</span></dt><dd class='result'><span>",m_sCritHigh,"</span></dd></dl></div>"];
return ar.join("");
};
};
return{RenderComponent:function(component,replyAr){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var ar=[];
var x=0,y=0,xl=0;
var vitalsI18n=i18n.discernabu.vitals_o1;
var seqGroup=null;
var withinText=(component.getDateFormat()==3)?("<span>"+vitalsI18n.WITHIN+"</span>"):"";
var firstColumnHeader=component.isShowTodayValue()?vitalsI18n.TODAY:vitalsI18n.LATEST;
var groups=component.getGroups();
for(x=groups.length;
x--;
){if(groups[x] instanceof MPageSequenceGroup){seqGroup=groups[x];
break;
}}var oVitalTable=new VitalTable(seqGroup);
for(x=replyAr.length;
x--;
){var reply=replyAr[x];
if(reply.getStatus()==="S"){for(y=groups.length;
y--;
){var group=groups[y];
if(group.getGroupName()===reply.getName()){oVitalTable.addRows(group,reply.getResponse());
}}}}var vitalRows=oVitalTable.getRows();
vitalRows.sort(SortVitalRows);
ar.push("<div class='",MP_Util.GetContentClass(component,vitalRows.length),"'>");
ar.push("<div class='content-hdr'><table class='vs-table'><tr class='hdr'><th class='vs-lbl'><span>&nbsp;</span></th><th class='vs-res0'><span>",firstColumnHeader,"</span><br /><span>",withinText,"</span></th><th class='vs-res1'><span>",vitalsI18n.PREVIOUS,"</span><br /><span>",withinText,"</span></th></tr></table><table class='vs-table'>");
for(x=0,xl=vitalRows.length;
x<xl;
x++){ar.push("<tr class='",((x%2)==0)?"odd":"even","'>");
ar.push(createVitalRow(vitalRows[x],component));
ar.push("</tr>");
}ar.push("</table></div></div>");
var sHTML=ar.join("");
var countText=MP_Util.CreateTitleText(component,vitalRows.length);
MP_Util.Doc.FinalizeComponent(sHTML,component,countText);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}component.setEditMode(false);
}}};
function createVitalRow(row,component){var ar=[];
if(component.getGraphFlag()===1){var compId=component.getComponentId();
var groupId=(row.getType()!==CERN_VITALSIGN_O1.TYPE_DISCRETE_RESULT)?row.getId():0;
var eventCode=(row.getType()===CERN_VITALSIGN_O1.TYPE_DISCRETE_RESULT)?row.getMeasureArray()[0].getEventCode().codeValue:0;
ar.push("<td class='vs-lbl'><span class='row-label'><a onClick='MP_Util.GraphResults(",eventCode,",",compId,",",groupId,");'>",row.getDisplay(),"</a></span></td>");
}else{ar.push("<td class='vs-lbl'><span class='row-label'>",row.getDisplay(),"</span></td>");
}ar.push(createVitalCells(row,component));
return ar.join("");
}function createVitalCells(row,component){var ar=[];
var x=0;
var vitalsI18n=i18n.discernabu.vitals_o1;
var oMeasures=row.getMeasureArray();
var nMeasures=(oMeasures.length>3)?3:oMeasures.length;
var timeNow=new Date();
var colNumber=0;
var firstVal=oMeasures[0];
if(component.isShowTodayValue()){if(timeNow.getFullYear()!==firstVal.getDateTime().getFullYear()||timeNow.getMonth()!==firstVal.getDateTime().getMonth()||timeNow.getDate()!==firstVal.getDateTime().getDate()){nMeasures=(oMeasures.length>2)?2:oMeasures.length;
ar.push("<td class='vs-res",colNumber,"'><dl class='vs-info'><dt><span>",vitalsI18n.VALUE,"</span></dt><dd class='vs-res'><span>--</span></dd></dl></td>");
colNumber++;
}}for(x=0;
x<nMeasures;
x++){var oVal=oMeasures[x];
var faceUpDtTm=null;
if(row.getType()!==CERN_VITALSIGN_O1.TYPE_BLOOD_PRESSURE){faceUpDtTm=MP_Util.DisplayDateByOption(component,oVal.getDateTime());
var includeMaxResult=(row.getType()===CERN_VITALSIGN_O1.TYPE_TEMPERATURE&&x===0)?true:false;
if(includeMaxResult){var criterion=component.getCriterion();
var sEncntr=(component.getScope()==2)?criterion.encntr_id+".0":"0.0";
var sEventSets=MP_Util.CreateParamArray(row.getEventSets(),1);
var tempAr=[criterion.person_id+".0",sEncntr,criterion.provider_id+".0",criterion.position_cd+".0",'"'+sEventSets+'"'];
ar.push("<td onmouseover='CERN_VITALSIGNS_O1_UTIL.GetMaxMinTempResult(this, ",tempAr.join(","),");' class='vs-res",colNumber,"'>");
}else{ar.push("<td class='vs-res",colNumber,"'>");
}ar.push("<dl class='vs-info'><dt><span>",vitalsI18n.VALUE,"</span></dt><dd class='vs-res'>",MP_Util.Measurement.GetNormalcyResultDisplay(oVal,true),"<br /><span class='within'>",faceUpDtTm,"</span></dd></dl>",createVitalCellHover(oVal),"</td>");
}else{var resAr=oVal.getResults();
faceUpDtTm=MP_Util.DisplayDateByOption(component,oVal.getDateTime());
var sRes1=(resAr[0])?MP_Util.Measurement.GetNormalcyResultDisplay(resAr[0],true):"--";
var sRes2=(resAr[1])?MP_Util.Measurement.GetNormalcyResultDisplay(resAr[1],true):"--";
ar.push("<td class='vs-res",colNumber,"'><dl class='vs-info'><dt><span>",vitalsI18n.VALUE,"</span></dt><dd class='vs-res'>",sRes1,"/",sRes2,"<br /><span class='within'>",faceUpDtTm,"</span></dd></dl>",createVitalCellHover(oVal),"</td>");
}colNumber++;
}for(x=nMeasures;
x<3;
x++){ar.push("<td class='vs-res",x,"'><dl class='vs-info'><dt><span>",vitalsI18n.VALUE,"</span></dt><dd class='vs-res'><span>--</span></dd></dl></td>");
}return ar.join("");
}function createBPHoverSpan(val1,val2,label,spanClass1,spanClass2){if((!val1||val1==="")&&(!val2||val2==="")){return("<dt class='vs-det-type'><span>"+label+":</span></dt><dd class='result'></dd>");
}var returnAr=["<dt class='vs-det-type'><span>",label,":</span></dt><dd class='result'>"];
var span1=(spanClass1)?"<span class='"+spanClass1+"'>":"<span>";
var span2=(spanClass2)?"<span class='"+spanClass2+"'>":"<span>";
if(val1&&val1!==""){returnAr.push(span1,val1,"</span>");
}else{returnAr.push(span1,"--</span>");
}returnAr.push(" / ");
if(val2&&val2!==""){returnAr.push(span2,val2,"</span>");
}else{returnAr.push(span2,"--</span>");
}returnAr.push("</dd>");
return returnAr.join("");
}function createVitalCellHover(meas){var ar=[];
var vitalsI18n=i18n.discernabu.vitals_o1;
if(meas instanceof BPResult){var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var measAr=meas.getResults();
var meas1=measAr[0];
var meas2=measAr[1];
var hov1=(meas1)?new HoverResults(meas1):null;
var hov2=(meas2)?new HoverResults(meas2):null;
var resVal1=null;
var resVal2=null;
var resNormalcy1=null;
var resNormalcy2=null;
var normLow1=null;
var normLow2=null;
var normHigh1=null;
var normHigh2=null;
var critLow1=null;
var critLow2=null;
var critHigh1=null;
var critHigh2=null;
var status1=null;
var status2=null;
var dateTime=null;
if(meas1){resNormalcy1=hov1.getNormalcy();
resVal1=hov1.getResultDisplay();
normLow1=hov1.getNormalLow();
normHigh1=hov1.getNormalHigh();
critLow1=hov1.getCriticalLow();
critHigh1=hov1.getCriticalHigh();
status1=hov1.getStatus();
dateTime=hov1.getDateTime();
}if(meas2){resNormalcy2=hov2.getNormalcy();
resVal2=hov2.getResultDisplay();
normLow2=hov2.getNormalLow();
normHigh2=hov2.getNormalHigh();
critLow2=hov2.getCriticalLow();
critHigh2=hov2.getCriticalHigh();
status2=hov2.getStatus();
dateTime=hov2.getDateTime();
}ar.push("<h4 class='det-hd'><span>",vitalsI18n.LABORATORY_DETAILS,"</span></h4><div class='hvr'><dl class='vs-det'>",createBPHoverSpan(resVal1,resVal2,meas.getDisplay(),resNormalcy1,resNormalcy2),"<dt class='vs-det-type'><span>",vitalsI18n.DATE_TIME,":</span></dt><dd class='result'><span>",dateTime,"</span></dd>",createBPHoverSpan(status1,status2,vitalsI18n.STATUS),createBPHoverSpan(normLow1,normLow2,vitalsI18n.NORMAL_LOW),createBPHoverSpan(normHigh1,normHigh2,vitalsI18n.NORMAL_HIGH),createBPHoverSpan(critLow1,critLow2,vitalsI18n.CRITICAL_LOW),createBPHoverSpan(critHigh1,critHigh2,vitalsI18n.CRITICAL_HIGH));
ar.push("</dl></div>");
}else{var hover=new HoverResults(meas);
ar.push(hover.toHTML());
}return ar.join("");
}function SortVitalRows(a,b){if(a.getSequence()>b.getSequence()){return 1;
}else{if(a.getSequence()<b.getSequence()){return -1;
}}if(a.getDisplay().toUpperCase()>b.getDisplay().toUpperCase()){return 1;
}if(a.getDisplay().toUpperCase()<b.getDisplay().toUpperCase()){return -1;
}return 0;
}}();
CERN_VITALSIGN_O1.TYPE_STANDARD_GROUPING=0;
CERN_VITALSIGN_O1.TYPE_TEMPERATURE=1;
CERN_VITALSIGN_O1.TYPE_BLOOD_PRESSURE=2;
CERN_VITALSIGN_O1.TYPE_DISCRETE_RESULT=3;
var CERN_VITALSIGNS_O1_UTIL=function(){return{GetMaxMinTempResult:function(cell,personId,encntrId,providerId,pprCd,eventSetCds){if(!Util.Style.ccss(cell,"vs-cached")){var vitalI18N=i18n.discernabu.vitals_o1;
Util.Style.acss(cell,"vs-cached");
var hvrDiv=Util.Style.g("hvr",cell,"div");
var dl=Util.Style.g("vs-det",hvrDiv[0],"dl");
var spanMaxResult=AddAdditionalElement(dl[0],vitalI18N.TWO_DAY_MAX);
var spanMinResult=AddAdditionalElement(dl[0],vitalI18N.TWO_DAY_MIN);
var timerGetMaxTemp=MP_Util.CreateTimer("ENG:MPG.VITALSIGNS.O1 - get 48 hour max temp");
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{MP_Util.LogScriptCallInfo(null,this,"vitals.js","GetMaxMinTempResult");
var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
var df=MP_Util.GetDateFormatter();
if(recordData.STATUS_DATA.STATUS==="S"){var results=CERN_MEASUREMENT_BASE_O1.LoadMeasurementDataArray(recordData);
results.sort(SortTemperatures);
var maxResult=results[0];
var minResult=results[results.length-1];
var sDateMax="&nbsp;<span>"+df.format(maxResult.getDateTime(),mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)+"</span>";
var sDateMin="&nbsp;<span>"+df.format(minResult.getDateTime(),mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR)+"</span>";
spanMaxResult.innerHTML=MP_Util.Measurement.GetNormalcyResultDisplay(maxResult)+sDateMax;
spanMinResult.innerHTML=MP_Util.Measurement.GetNormalcyResultDisplay(minResult)+sDateMin;
}else{if(recordData.STATUS_DATA.STATUS==="Z"){spanMaxResult.innerHTML="&nbsp;";
spanMinResult.innerHTML="&nbsp;";
}else{spanMaxResult.innerHTML=vitalI18N.ERROR_RETREIVING_DATA;
spanMinResult.innerHTML=vitalI18N.ERROR_RETREIVING_DATA;
}}}catch(err){MP_Util.LogJSError(err,null,"vitals.js","GetMaxMinTempResult");
if(timerGetMaxTemp){timerGetMaxTemp.Abort();
timerGetMaxTemp=null;
}spanMaxResult.innerHTML=vitalI18N.ERROR_RETREIVING_DATA;
spanMinResult.innerHTML=vitalI18N.ERROR_RETREIVING_DATA;
}finally{if(timerGetMaxTemp){timerGetMaxTemp.Stop();
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET","MP_RETRIEVE_N_RESULTS_JSON",true);
var sendAr=["^MINE^",personId+".0",encntrId+".0",providerId+".0",pprCd+".0",200,"^^",eventSetCds,"0.0",2,2];
info.send(sendAr.join(","));
}}};
function SortTemperatures(a,b){var val1=GetFahrenheitValue(a);
var val2=GetFahrenheitValue(b);
if(val1>val2){return -1;
}else{if(val1<val2){return 1;
}}return 0;
}function GetFahrenheitValue(temp){var tempObj=temp.getResult();
var uom=(tempObj.getUOM())?tempObj.getUOM().meaning:"";
var tempVal=parseFloat(MP_Util.Measurement.GetString(temp,null,null,true));
if(uom==="DEGC"||tempVal<55){tempVal=(tempVal*1.8)+32;
}return tempVal;
}function AddAdditionalElement(dl,label){var dt=Util.cep("dt",{className:"vs-det-type"});
var span=Util.cep("span");
var txt=document.createTextNode(label+":");
Util.ac(txt,span);
Util.ac(span,dt);
Util.ac(dt,dl);
var dd=Util.cep("dd",{className:"result"});
var spanResult=Util.cep("span");
var txtResult=document.createTextNode(i18n.discernabu.vitals_o1.LOADING_DATA+"...");
Util.ac(txtResult,spanResult);
Util.ac(spanResult,dd);
Util.ac(dd,dl);
return spanResult;
}}();

/**
 * Interacts with Bedrock, retrieving configuration settings, and initiates the MPage framework.
 */
var RenderOncologySummary = function () {
    /* most of this is lifted from
     * http://scm.discern-abu.cerner.corp/svn/com.cerner.discernabu.assembly/tags/master-summary-2.4.6/src/main/resources/driver/js/driver.js
     */
    var catMean, criterion, loadingPolicy, mPage;
    criterion = MP_Util.GetCriterion(JSON.parse(m_criterionJSON), CERN_static_content);
    catMean = criterion.category_mean = 'MP_ONC_SUMMARY';
    loadingPolicy = new MP_Bedrock.LoadingPolicy();
    loadingPolicy.setLoadPageDetails(true);
    loadingPolicy.setLoadComponentBasics(true);
    loadingPolicy.setLoadComponentDetails(true);
    loadingPolicy.setCategoryMean(catMean);
    loadingPolicy.setCriterion(criterion);
    mPage = MP_Bedrock.MPage.LoadBedrockMPage(loadingPolicy);
    mPage.setCustomizeEnabled(false);
    mPage.setName('Oncology Summary');
    MP_Util.Doc.InitLayout(mPage);
    window.setTimeout('MP_Util.Doc.RenderLayout()', 0);
};

