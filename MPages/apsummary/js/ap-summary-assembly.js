/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left");
}catch(a){setTimeout(ma,1);
return;
}c.ready();
}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");
b.parentNode&&b.parentNode.removeChild(b);
}function X(a,b,d,f,e,j){var i=a.length;
if(typeof b==="object"){for(var o in b){X(a,o,b[o],f,e,d);
}return a;
}if(d!==w){f=!j&&f&&c.isFunction(d);
for(o=0;
o<i;
o++){e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);
}return a;
}return i?e(a[0],b):w;
}function J(){return(new Date).getTime();
}function Y(){return false;
}function Z(){return true;
}function na(a,b,d){d[0].type=a;
return c.event.handle.apply(b,d);
}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;
i=c.data(this,"events");
if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;
var u=i.live.slice(0);
for(k=0;
k<u.length;
k++){i=u[k];
i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1);
}j=c(a.target).closest(f,a.currentTarget);
n=0;
for(r=j.length;
n<r;
n++){for(k=0;
k<u.length;
k++){i=u[k];
if(j[n].selector===i.selector){o=j[n].elem;
f=null;
if(i.preType==="mouseenter"||i.preType==="mouseleave"){f=c(a.relatedTarget).closest(i.selector)[0];
}if(!f||f!==o){d.push({elem:o,handleObj:i});
}}}}n=0;
for(r=d.length;
n<r;
n++){j=d[n];
a.currentTarget=j.elem;
a.data=j.handleObj.data;
a.handleObj=j.handleObj;
if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;
break;
}}return b;
}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,"&");
}function qa(a){return !a||!a.parentNode||a.parentNode.nodeType===11;
}function ra(a,b){var d=0;
b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);
if(f=f&&f.events){delete e.handle;
e.events={};
for(var j in f){for(var i in f[j]){c.event.add(this,j,f[j][i],f[j][i].data);
}}}}});
}function sa(a,b,d){var f,e,j;
b=b&&b[0]?b[0].ownerDocument||b[0]:s;
if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=true;
if(j=c.fragments[a[0]]){if(j!==1){f=j;
}}}if(!f){f=b.createDocumentFragment();
c.clean(a,b,f,d);
}if(e){c.fragments[a[0]]=j?f:1;
}return{fragment:f,cacheable:e};
}function K(a,b){var d={};
c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a;
});
return d;
}function wa(a){return"scrollTo" in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false;
}var c=function(a,b){return new c.fn.init(a,b);
},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;
c.fn=c.prototype={init:function(a,b){var d,f;
if(!a){return this;
}if(a.nodeType){this.context=this[0]=a;
this.length=1;
return this;
}if(a==="body"&&!b){this.context=s;
this[0]=s.body;
this.selector="body";
this.length=1;
return this;
}if(typeof a==="string"){if((d=Ta.exec(a))&&(d[1]||!b)){if(d[1]){f=b?b.ownerDocument||b:s;
if(a=Xa.exec(a)){if(c.isPlainObject(b)){a=[s.createElement(a[1])];
c.fn.attr.call(a,b,true);
}else{a=[f.createElement(a[1])];
}}else{a=sa([d[1]],[f]);
a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes;
}return c.merge(this,a);
}else{if(b=s.getElementById(d[2])){if(b.id!==d[2]){return T.find(a);
}this.length=1;
this[0]=b;
}this.context=s;
this.selector=a;
return this;
}}else{if(!b&&/^\w+$/.test(a)){this.selector=a;
this.context=s;
a=s.getElementsByTagName(a);
return c.merge(this,a);
}else{return !b||b.jquery?(b||T).find(a):c(b).find(a);
}}}else{if(c.isFunction(a)){return T.ready(a);
}}if(a.selector!==w){this.selector=a.selector;
this.context=a.context;
}return c.makeArray(a,this);
},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length;
},toArray:function(){return R.call(this,0);
},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a];
},pushStack:function(a,b,d){var f=c();
c.isArray(a)?ba.apply(f,a):c.merge(f,a);
f.prevObject=this;
f.context=this.context;
if(b==="find"){f.selector=this.selector+(this.selector?" ":"")+d;
}else{if(b){f.selector=this.selector+"."+b+"("+d+")";
}}return f;
},each:function(a,b){return c.each(this,a,b);
},ready:function(a){c.bindReady();
if(c.isReady){a.call(s,c);
}else{Q&&Q.push(a);
}return this;
},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1);
},first:function(){return this.eq(0);
},last:function(){return this.eq(-1);
},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","));
},map:function(a){return this.pushStack(c.map(this,function(b,d){return a.call(b,d,b);
}));
},end:function(){return this.prevObject||c(null);
},push:ba,sort:[].sort,splice:[].splice};
c.fn.init.prototype=c.fn;
c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;
if(typeof a==="boolean"){f=a;
a=arguments[1]||{};
b=2;
}if(typeof a!=="object"&&!c.isFunction(a)){a={};
}if(d===b){a=this;
--b;
}for(;
b<d;
b++){if((e=arguments[b])!=null){for(j in e){i=a[j];
o=e[j];
if(a!==o){if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||c.isArray(i))?i:c.isArray(o)?[]:{};
a[j]=c.extend(f,i,o);
}else{if(o!==w){a[j]=o;
}}}}}}return a;
};
c.extend({noConflict:function(a){A.$=Sa;
if(a){A.jQuery=Ra;
}return c;
},isReady:false,ready:function(){if(!c.isReady){if(!s.body){return setTimeout(c.ready,13);
}c.isReady=true;
if(Q){for(var a,b=0;
a=Q[b++];
){a.call(s,c);
}Q=null;
}c.fn.triggerHandler&&c(s).triggerHandler("ready");
}},bindReady:function(){if(!xa){xa=true;
if(s.readyState==="complete"){return c.ready();
}if(s.addEventListener){s.addEventListener("DOMContentLoaded",L,false);
A.addEventListener("load",c.ready,false);
}else{if(s.attachEvent){s.attachEvent("onreadystatechange",L);
A.attachEvent("onload",c.ready);
var a=false;
try{a=A.frameElement==null;
}catch(b){}s.documentElement.doScroll&&a&&ma();
}}}},isFunction:function(a){return $.call(a)==="[object Function]";
},isArray:function(a){return $.call(a)==="[object Array]";
},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval){return false;
}if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,"isPrototypeOf")){return false;
}var b;
for(b in a){}return b===w||aa.call(a,b);
},isEmptyObject:function(a){for(var b in a){return false;
}return true;
},error:function(a){throw a;
},parseJSON:function(a){if(typeof a!=="string"||!a){return null;
}a=c.trim(a);
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+a))();
}else{c.error("Invalid JSON: "+a);
}},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");
d.type="text/javascript";
if(c.support.scriptEval){d.appendChild(s.createTextNode(a));
}else{d.text=a;
}b.insertBefore(d,b.firstChild);
b.removeChild(d);
}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase();
},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);
if(d){if(i){for(f in a){if(b.apply(a[f],d)===false){break;
}}}else{for(;
e<j;
){if(b.apply(a[e++],d)===false){break;
}}}}else{if(i){for(f in a){if(b.call(a[f],f,a[f])===false){break;
}}}else{for(d=a[0];
e<j&&b.call(d,e,d)!==false;
d=a[++e]){}}}return a;
},trim:function(a){return(a||"").replace(Wa,"");
},makeArray:function(a,b){b=b||[];
if(a!=null){a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);
}return b;
},inArray:function(a,b){if(b.indexOf){return b.indexOf(a);
}for(var d=0,f=b.length;
d<f;
d++){if(b[d]===a){return d;
}}return -1;
},merge:function(a,b){var d=a.length,f=0;
if(typeof b.length==="number"){for(var e=b.length;
f<e;
f++){a[d++]=b[f];
}}else{for(;
b[f]!==w;
){a[d++]=b[f++];
}}a.length=d;
return a;
},grep:function(a,b,d){for(var f=[],e=0,j=a.length;
e<j;
e++){!d!==!b(a[e],e)&&f.push(a[e]);
}return f;
},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;
j<i;
j++){e=b(a[j],j,d);
if(e!=null){f[f.length]=e;
}}return f.concat.apply([],f);
},guid:1,proxy:function(a,b,d){if(arguments.length===2){if(typeof b==="string"){d=a;
a=d[b];
b=w;
}else{if(b&&!c.isFunction(b)){d=b;
b=w;
}}}if(!b&&a){b=function(){return a.apply(d||this,arguments);
};
}if(a){b.guid=a.guid=a.guid||b.guid||c.guid++;
}return b;
},uaMatch:function(a){a=a.toLowerCase();
a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];
return{browser:a[1]||"",version:a[2]||"0"};
},browser:{}});
P=c.uaMatch(P);
if(P.browser){c.browser[P.browser]=true;
c.browser.version=P.version;
}if(c.browser.webkit){c.browser.safari=true;
}if(ya){c.inArray=function(a,b){return ya.call(b,a);
};
}T=c(s);
if(s.addEventListener){L=function(){s.removeEventListener("DOMContentLoaded",L,false);
c.ready();
};
}else{if(s.attachEvent){L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);
c.ready();
}};
}}(function(){c.support={};
var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();
d.style.display="none";
d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];
if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};
b.type="text/javascript";
try{b.appendChild(s.createTextNode("window."+f+"=1;"));
}catch(i){}a.insertBefore(b,a.firstChild);
if(A[f]){c.support.scriptEval=true;
delete A[f];
}try{delete b.test;
}catch(o){c.support.deleteExpando=false;
}a.removeChild(b);
if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=false;
d.detachEvent("onclick",k);
});
d.cloneNode(true).fireEvent("onclick");
}d=s.createElement("div");
d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";
a=s.createDocumentFragment();
a.appendChild(d.firstChild);
c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;
c(function(){var k=s.createElement("div");
k.style.width=k.style.paddingLeft="1px";
s.body.appendChild(k);
c.boxModel=c.support.boxModel=k.offsetWidth===2;
s.body.removeChild(k).style.display="none";
});
a=function(k){var n=s.createElement("div");
k="on"+k;
var r=k in n;
if(!r){n.setAttribute(k,"return;");
r=typeof n[k]==="function";
}return r;
};
c.support.submitBubbles=a("submit");
c.support.changeBubbles=a("change");
a=b=d=e=j=null;
}})();
c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};
var G="jQuery"+J(),Ya=0,za={};
c.extend({cache:{},expando:G,noData:{embed:true,object:true,applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var f=a[G],e=c.cache;
if(!f&&typeof b==="string"&&d===w){return null;
}f||(f=++Ya);
if(typeof b==="object"){a[G]=f;
e[f]=c.extend(true,{},b);
}else{if(!e[f]){a[G]=f;
e[f]={};
}}a=e[f];
if(d!==w){a[b]=d;
}return typeof b==="string"?a[b]:a;
}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var d=a[G],f=c.cache,e=f[d];
if(b){if(e){delete e[b];
c.isEmptyObject(e)&&c.removeData(a);
}}else{if(c.support.deleteExpando){delete a[c.expando];
}else{a.removeAttribute&&a.removeAttribute(c.expando);
}delete f[d];
}}}});
c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length){return c.data(this[0]);
}else{if(typeof a==="object"){return this.each(function(){c.data(this,a);
});
}}var d=a.split(".");
d[1]=d[1]?"."+d[1]:"";
if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);
if(f===w&&this.length){f=c.data(this[0],a);
}return f===w&&d[1]?this.data(d[0]):f;
}else{return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,a,b);
});
}},removeData:function(a){return this.each(function(){c.removeData(this,a);
});
}});
c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";
var f=c.data(a,b);
if(!d){return f||[];
}if(!f||c.isArray(d)){f=c.data(a,b,c.makeArray(d));
}else{f.push(d);
}return f;
}},dequeue:function(a,b){b=b||"fx";
var d=c.queue(a,b),f=d.shift();
if(f==="inprogress"){f=d.shift();
}if(f){b==="fx"&&d.unshift("inprogress");
f.call(a,function(){c.dequeue(a,b);
});
}}});
c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;
a="fx";
}if(b===w){return c.queue(this[0],a);
}return this.each(function(){var d=c.queue(this,a,b);
a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a);
});
},dequeue:function(a){return this.each(function(){c.dequeue(this,a);
});
},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;
b=b||"fx";
return this.queue(b,function(){var d=this;
setTimeout(function(){c.dequeue(d,b);
},a);
});
},clearQueue:function(a){return this.queue(a||"fx",[]);
}});
var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,cb=/^(a|area)$/i,Ba=/radio|checkbox/;
c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr);
},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");
this.nodeType===1&&this.removeAttribute(a);
});
},addClass:function(a){if(c.isFunction(a)){return this.each(function(n){var r=c(this);
r.addClass(a.call(this,n,r.attr("class")));
});
}if(a&&typeof a==="string"){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1){if(e.className){for(var j=" "+e.className+" ",i=e.className,o=0,k=b.length;
o<k;
o++){if(j.indexOf(" "+b[o]+" ")<0){i+=" "+b[o];
}}e.className=c.trim(i);
}else{e.className=a;
}}}}return this;
},removeClass:function(a){if(c.isFunction(a)){return this.each(function(k){var n=c(this);
n.removeClass(a.call(this,k,n.attr("class")));
});
}if(a&&typeof a==="string"||a===w){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1&&e.className){if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;
i<o;
i++){j=j.replace(" "+b[i]+" "," ");
}e.className=c.trim(j);
}else{e.className="";
}}}}return this;
},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";
if(c.isFunction(a)){return this.each(function(e){var j=c(this);
j.toggleClass(a.call(this,e,j.attr("class"),b),b);
});
}return this.each(function(){if(d==="string"){for(var e,j=0,i=c(this),o=b,k=a.split(ca);
e=k[j++];
){o=f?o:!i.hasClass(e);
i[o?"addClass":"removeClass"](e);
}}else{if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);
this.className=this.className||a===false?"":c.data(this,"__className__")||"";
}}});
},hasClass:function(a){a=" "+a+" ";
for(var b=0,d=this.length;
b<d;
b++){if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1){return true;
}}return false;
},val:function(a){if(a===w){var b=this[0];
if(b){if(c.nodeName(b,"option")){return(b.attributes.value||{}).specified?b.value:b.text;
}if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;
b=b.type==="select-one";
if(d<0){return null;
}var j=b?d:0;
for(d=b?d+1:e.length;
j<d;
j++){var i=e[j];
if(i.selected){a=c(i).val();
if(b){return a;
}f.push(a);
}}return f;
}if(Ba.test(b.type)&&!c.support.checkOn){return b.getAttribute("value")===null?"on":b.value;
}return(b.value||"").replace(Za,"");
}return w;
}var o=c.isFunction(a);
return this.each(function(k){var n=c(this),r=a;
if(this.nodeType===1){if(o){r=a.call(this,k,n.val());
}if(typeof r==="number"){r+="";
}if(c.isArray(r)&&Ba.test(this.type)){this.checked=c.inArray(n.val(),r)>=0;
}else{if(c.nodeName(this,"select")){var u=c.makeArray(r);
c("option",this).each(function(){this.selected=c.inArray(c(this).val(),u)>=0;
});
if(!u.length){this.selectedIndex=-1;
}}else{this.value=r;
}}}});
}});
c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if(f&&b in c.attrFn){return c(a)[b](d);
}f=a.nodeType!==1||!c.isXMLDoc(a);
var e=d!==w;
b=f&&c.props[b]||b;
if(a.nodeType===1){var j=$a.test(b);
if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d;
}if(c.nodeName(a,"form")&&a.getAttributeNode(b)){return a.getAttributeNode(b).nodeValue;
}if(b==="tabIndex"){return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;
}return a[b];
}if(!c.support.style&&f&&b==="style"){if(e){a.style.cssText=""+d;
}return a.style.cssText;
}e&&a.setAttribute(b,""+d);
a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);
return a===null?w:a;
}return c.style(a,b,d);
}});
var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,function(b){return"\\"+b;
});
};
c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement){a=A;
}var e,j;
if(d.handler){e=d;
d=e.handler;
}if(!d.guid){d.guid=c.guid++;
}if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;
if(!o){j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w;
};
}o.elem=a;
b=b.split(" ");
for(var k,n=0,r;
k=b[n++];
){j=e?c.extend({},e):{handler:d,data:f};
if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();
j.namespace=r.slice(0).sort().join(".");
}else{r=[];
j.namespace="";
}j.type=k;
j.guid=d.guid;
var u=i[k],z=c.event.special[k]||{};
if(!u){u=i[k]=[];
if(!z.setup||z.setup.call(a,f,r,o)===false){if(a.addEventListener){a.addEventListener(k,o,false);
}else{a.attachEvent&&a.attachEvent("on"+k,o);
}}}if(z.add){z.add.call(a,j);
if(!j.handler.guid){j.handler.guid=d.guid;
}}u.push(j);
c.event.global[k]=true;
}a=null;
}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),C=z&&z.events;
if(z&&C){if(b&&b.type){d=b.handler;
b=b.type;
}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";
for(e in C){c.event.remove(a,e+b);
}}else{for(b=b.split(" ");
e=b[j++];
){n=e;
i=e.indexOf(".")<0;
o=[];
if(!i){o=e.split(".");
e=o.shift();
k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)");
}if(r=C[e]){if(d){n=c.event.special[e]||{};
for(B=f||0;
B<r.length;
B++){u=r[B];
if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);
n.remove&&n.remove.call(a,u);
}if(f!=null){break;
}}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false){Ca(a,e,z.handle);
}delete C[e];
}}else{for(var B=0;
B<r.length;
B++){u=r[B];
if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);
r.splice(B--,1);
}}}}}if(c.isEmptyObject(C)){if(b=z.handle){b.elem=null;
}delete z.events;
delete z.handle;
c.isEmptyObject(z)&&c.removeData(a);
}}}}},trigger:function(a,b,d,f){var e=a.type||a;
if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);
if(e.indexOf("!")>=0){a.type=e=e.slice(0,-1);
a.exclusive=true;
}if(!d){a.stopPropagation();
c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem);
});
}if(!d||d.nodeType===3||d.nodeType===8){return w;
}a.result=w;
a.target=d;
b=c.makeArray(b);
b.unshift(a);
}a.currentTarget=d;
(f=c.data(d,"handle"))&&f.apply(d,b);
f=d.parentNode||d.ownerDocument;
try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()])){if(d["on"+e]&&d["on"+e].apply(d,b)===false){a.result=false;
}}}catch(j){}if(!a.isPropagationStopped()&&f){c.event.trigger(a,b,f,true);
}else{if(!a.isDefaultPrevented()){f=a.target;
var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};
if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e]){f["on"+e]=null;
}c.event.triggered=true;
f[e]();
}}catch(n){}if(i){f["on"+e]=i;
}c.event.triggered=false;
}}}},handle:function(a){var b,d,f,e;
a=arguments[0]=c.event.fix(a||A.event);
a.currentTarget=this;
b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");
a.type=d.shift();
f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");
}e=c.data(this,"events");
d=e[a.type];
if(e&&d){d=d.slice(0);
e=0;
for(var j=d.length;
e<j;
e++){var i=d[e];
if(b||f.test(i.namespace)){a.handler=i.handler;
a.data=i.data;
a.handleObj=i;
i=i.handler.apply(this,arguments);
if(i!==w){a.result=i;
if(i===false){a.preventDefault();
a.stopPropagation();
}}if(a.isImmediatePropagationStopped()){break;
}}}}return a.result;
},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[G]){return a;
}var b=a;
a=c.Event(b);
for(var d=this.props.length,f;
d;
){f=this.props[--d];
a[f]=b[f];
}if(!a.target){a.target=a.srcElement||s;
}if(a.target.nodeType===3){a.target=a.target.parentNode;
}if(!a.relatedTarget&&a.fromElement){a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;
}if(a.pageX==null&&a.clientX!=null){b=s.documentElement;
d=s.body;
a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);
a.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0);
}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode)){a.which=a.charCode||a.keyCode;
}if(!a.metaKey&&a.ctrlKey){a.metaKey=a.ctrlKey;
}if(!a.which&&a.button!==w){a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;
}return a;
},guid:100000000,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}));
},remove:function(a){var b=true,d=a.origType.replace(O,"");
c.each(c.data(this,"events").live||[],function(){if(d===this.origType.replace(O,"")){return b=false;
}});
b&&c.event.remove(this,a.origType,oa);
}},beforeunload:{setup:function(a,b,d){if(this.setInterval){this.onbeforeunload=d;
}return false;
},teardown:function(a,b){if(this.onbeforeunload===b){this.onbeforeunload=null;
}}}}};
var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false);
}:function(a,b,d){a.detachEvent("on"+b,d);
};
c.Event=function(a){if(!this.preventDefault){return new c.Event(a);
}if(a&&a.type){this.originalEvent=a;
this.type=a.type;
}else{this.type=a;
}this.timeStamp=J();
this[G]=true;
};
c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;
var a=this.originalEvent;
if(a){a.preventDefault&&a.preventDefault();
a.returnValue=false;
}},stopPropagation:function(){this.isPropagationStopped=Z;
var a=this.originalEvent;
if(a){a.stopPropagation&&a.stopPropagation();
a.cancelBubble=true;
}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;
this.stopPropagation();
},isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y};
var Da=function(a){var b=a.relatedTarget;
try{for(;
b&&b!==this;
){b=b.parentNode;
}if(b!==this){a.type=a.data;
c.event.handle.apply(this,arguments);
}}catch(d){}},Ea=function(a){a.type=a.data;
c.event.handle.apply(this,arguments);
};
c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a);
},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da);
}};
});
if(!c.support.submitBubbles){c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="submit"||d==="image")&&c(b).closest("form").length){return na("submit",this,arguments);
}});
c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13){return na("submit",this,arguments);
}});
}else{return false;
}},teardown:function(){c.event.remove(this,".specialSubmit");
}};
}if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;
if(b==="radio"||b==="checkbox"){d=a.checked;
}else{if(b==="select-multiple"){d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected;
}).join("-"):"";
}else{if(a.nodeName.toLowerCase()==="select"){d=a.selectedIndex;
}}}return d;
},fa=function(a,b){var d=a.target,f,e;
if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");
e=Fa(d);
if(a.type!=="focusout"||d.type!=="radio"){c.data(d,"_change_data",e);
}if(!(f===w||e===f)){if(f!=null||e){a.type="change";
return c.event.trigger(a,b,d);
}}}};
c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;
if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select"){return fa.call(this,a);
}},keydown:function(a){var b=a.target,d=b.type;
if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple"){return fa.call(this,a);
}},beforeactivate:function(a){a=a.target;
c.data(a,"_change_data",Fa(a));
}},setup:function(){if(this.type==="file"){return false;
}for(var a in ea){c.event.add(this,a+".specialChange",ea[a]);
}return da.test(this.nodeName);
},teardown:function(){c.event.remove(this,".specialChange");
return da.test(this.nodeName);
}};
ea=c.event.special.change.filters;
}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);
f.type=b;
return c.event.handle.call(this,f);
}c.event.special[b]={setup:function(){this.addEventListener(a,d,true);
},teardown:function(){this.removeEventListener(a,d,true);
}};
});
c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d){this[b](j,f,d[j],e);
}return this;
}if(c.isFunction(f)){e=f;
f=w;
}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);
return e.apply(this,arguments);
}):e;
if(d==="unload"&&b!=="one"){this.one(d,f,e);
}else{j=0;
for(var o=this.length;
j<o;
j++){c.event.add(this[j],d,i,f);
}}return this;
};
});
c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault){for(var d in a){this.unbind(d,a[d]);
}}else{d=0;
for(var f=this.length;
d<f;
d++){c.event.remove(this[d],a,b);
}}return this;
},delegate:function(a,b,d,f){return this.live(b,d,f,a);
},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a);
},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this);
});
},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);
a.preventDefault();
a.stopPropagation();
c.event.trigger(a,b,this[0]);
return a.result;
}},toggle:function(a){for(var b=arguments,d=1;
d<b.length;
){c.proxy(a,b[d++]);
}return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;
c.data(this,"lastToggle"+a.guid,e+1);
f.preventDefault();
return b[e].apply(this,arguments)||false;
}));
},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);
}});
var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,u=j?this:c(this.context);
if(c.isFunction(f)){e=f;
f=w;
}for(d=(d||"").split(" ");
(i=d[o++])!=null;
){j=O.exec(i);
k="";
if(j){k=j[0];
i=i.replace(O,"");
}if(i==="hover"){d.push("mouseenter"+k,"mouseleave"+k);
}else{n=i;
if(i==="focus"||i==="blur"){d.push(Ga[i]+k);
i+=k;
}else{i=(Ga[i]||i)+k;
}b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n});
}):u.unbind(pa(i,r),e);
}}return this;
};
});
c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b);
};
if(c.attrFn){c.attrFn[b]=true;
}});
A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache){if(c.cache[a].handle){try{c.event.remove(c.cache[a].handle.elem);
}catch(b){}}}});
(function(){function a(g){for(var h="",l,m=0;
g[m];
m++){l=g[m];
if(l.nodeType===3||l.nodeType===4){h+=l.nodeValue;
}else{if(l.nodeType!==8){h+=a(l.childNodes);
}}}return h;
}function b(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1&&!p){t.sizcache=l;
t.sizset=q;
}if(t.nodeName.toLowerCase()===h){y=t;
break;
}t=t[g];
}m[q]=y;
}}}function d(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1){if(!p){t.sizcache=l;
t.sizset=q;
}if(typeof h!=="string"){if(t===h){y=true;
break;
}}else{if(k.filter(h,[t]).length>0){y=t;
break;
}}}t=t[g];
}m[q]=y;
}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,j=Object.prototype.toString,i=false,o=true;
[0,0].sort(function(){o=false;
return 0;
});
var k=function(g,h,l,m){l=l||[];
var q=h=h||s;
if(h.nodeType!==1&&h.nodeType!==9){return[];
}if(!g||typeof g!=="string"){return l;
}for(var p=[],v,t,y,S,H=true,M=x(h),I=g;
(f.exec(""),v=f.exec(I))!==null;
){I=v[3];
p.push(v[1]);
if(v[2]){S=v[3];
break;
}}if(p.length>1&&r.exec(g)){if(p.length===2&&n.relative[p[0]]){t=ga(p[0]+p[1],h);
}else{for(t=n.relative[p[0]]?[h]:k(p.shift(),h);
p.length;
){g=p.shift();
if(n.relative[g]){g+=p.shift();
}t=ga(g,t);
}}}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);
h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0];
}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);
t=v.expr?k.filter(v.expr,v.set):v.set;
if(p.length>0){y=z(t);
}else{H=false;
}for(;
p.length;
){var D=p.pop();
v=D;
if(n.relative[D]){v=p.pop();
}else{D="";
}if(v==null){v=h;
}n.relative[D](y,v,M);
}}else{y=[];
}}y||(y=t);
y||k.error(D||g);
if(j.call(y)==="[object Array]"){if(H){if(h&&h.nodeType===1){for(g=0;
y[g]!=null;
g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g]))){l.push(t[g]);
}}}else{for(g=0;
y[g]!=null;
g++){y[g]&&y[g].nodeType===1&&l.push(t[g]);
}}}else{l.push.apply(l,y);
}}else{z(y,l);
}if(S){k(S,q,l,m);
k.uniqueSort(l);
}return l;
};
k.uniqueSort=function(g){if(B){i=o;
g.sort(B);
if(i){for(var h=1;
h<g.length;
h++){g[h]===g[h-1]&&g.splice(h--,1);
}}}return g;
};
k.matches=function(g,h){return k(g,null,null,h);
};
k.find=function(g,h,l){var m,q;
if(!g){return[];
}for(var p=0,v=n.order.length;
p<v;
p++){var t=n.order[p];
if(q=n.leftMatch[t].exec(g)){var y=q[1];
q.splice(1,1);
if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");
m=n.find[t](q,h,l);
if(m!=null){g=g.replace(n.match[t],"");
break;
}}}}m||(m=h.getElementsByTagName("*"));
return{set:m,expr:g};
};
k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);
g&&h.length;
){for(var H in n.filter){if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;
D=t[1];
y=false;
t.splice(1,1);
if(D.substr(D.length-1)!=="\\"){if(v===p){p=[];
}if(n.preFilter[H]){if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true){continue;
}}else{y=I=true;
}}if(t){for(var U=0;
(D=v[U])!=null;
U++){if(D){I=M(D,t,U,v);
var Ha=m^!!I;
if(l&&I!=null){if(Ha){y=true;
}else{v[U]=false;
}}else{if(Ha){p.push(D);
y=true;
}}}}}if(I!==w){l||(v=p);
g=g.replace(n.match[H],"");
if(!y){return[];
}break;
}}}}if(g===q){if(y==null){k.error(g);
}else{break;
}}q=g;
}return v;
};
k.error=function(g){throw"Syntax error, unrecognized expression: "+g;
};
var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href");
}},relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);
l=l&&!m;
if(m){h=h.toLowerCase();
}m=0;
for(var q=g.length,p;
m<q;
m++){if(p=g[m]){for(;
(p=p.previousSibling)&&p.nodeType!==1;
){}g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h;
}}l&&k.filter(h,g,true);
},">":function(g,h){var l=typeof h==="string";
if(l&&!/\W/.test(h)){h=h.toLowerCase();
for(var m=0,q=g.length;
m<q;
m++){var p=g[m];
if(p){l=p.parentNode;
g[m]=l.nodeName.toLowerCase()===h?l:false;
}}}else{m=0;
for(q=g.length;
m<q;
m++){if(p=g[m]){g[m]=l?p.parentNode:p.parentNode===h;
}}l&&k.filter(h,g,true);
}},"":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("parentNode",h,m,g,p,l);
},"~":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("previousSibling",h,m,g,p,l);
}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l){return(g=h.getElementById(g[1]))?[g]:[];
}},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);
for(var m=0,q=h.length;
m<q;
m++){h[m].getAttribute("name")===g[1]&&l.push(h[m]);
}return l.length===0?null:l;
}},TAG:function(g,h){return h.getElementsByTagName(g[1]);
}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";
if(p){return g;
}p=0;
for(var v;
(v=h[p])!=null;
p++){if(v){if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0)){l||m.push(v);
}else{if(l){h[p]=false;
}}}}return false;
},ID:function(g){return g[1].replace(/\\/g,"");
},TAG:function(g){return g[1].toLowerCase();
},CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);
g[2]=h[1]+(h[2]||1)-0;
g[3]=h[3]-0;
}g[0]=e++;
return g;
},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");
if(!p&&n.attrMap[h]){g[1]=n.attrMap[h];
}if(g[2]==="~="){g[4]=" "+g[4]+" ";
}return g;
},PSEUDO:function(g,h,l,m,q){if(g[1]==="not"){if((f.exec(g[3])||"").length>1||/^\w/.test(g[3])){g[3]=k(g[3],null,null,h);
}else{g=k.filter(g[3],h,l,true^q);
l||m.push.apply(m,g);
return false;
}}else{if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0])){return true;
}}return g;
},POS:function(g){g.unshift(true);
return g;
}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden";
},disabled:function(g){return g.disabled===true;
},checked:function(g){return g.checked===true;
},selected:function(g){return g.selected===true;
},parent:function(g){return !!g.firstChild;
},empty:function(g){return !g.firstChild;
},has:function(g,h,l){return !!k(l[3],g).length;
},header:function(g){return/h\d/i.test(g.nodeName);
},text:function(g){return"text"===g.type;
},radio:function(g){return"radio"===g.type;
},checkbox:function(g){return"checkbox"===g.type;
},file:function(g){return"file"===g.type;
},password:function(g){return"password"===g.type;
},submit:function(g){return"submit"===g.type;
},image:function(g){return"image"===g.type;
},reset:function(g){return"reset"===g.type;
},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button";
},input:function(g){return/input|select|textarea|button/i.test(g.nodeName);
}},setFilters:{first:function(g,h){return h===0;
},last:function(g,h,l,m){return h===m.length-1;
},even:function(g,h){return h%2===0;
},odd:function(g,h){return h%2===1;
},lt:function(g,h,l){return h<l[3]-0;
},gt:function(g,h,l){return h>l[3]-0;
},nth:function(g,h,l){return l[3]-0===h;
},eq:function(g,h,l){return l[3]-0===h;
}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];
if(p){return p(g,l,h,m);
}else{if(q==="contains"){return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;
}else{if(q==="not"){h=h[3];
l=0;
for(m=h.length;
l<m;
l++){if(h[l]===g){return false;
}}return true;
}else{k.error("Syntax error, unrecognized expression: "+q);
}}}},CHILD:function(g,h){var l=h[1],m=g;
switch(l){case"only":case"first":for(;
m=m.previousSibling;
){if(m.nodeType===1){return false;
}}if(l==="first"){return true;
}m=g;
case"last":for(;
m=m.nextSibling;
){if(m.nodeType===1){return false;
}}return true;
case"nth":l=h[2];
var q=h[3];
if(l===1&&q===0){return true;
}h=h[0];
var p=g.parentNode;
if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;
for(m=p.firstChild;
m;
m=m.nextSibling){if(m.nodeType===1){m.nodeIndex=++v;
}}p.sizcache=h;
}g=g.nodeIndex-q;
return l===0?g===0:g%l===0&&g/l>=0;
}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h;
},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h;
},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1;
},ATTR:function(g,h){var l=h[1];
g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);
l=g+"";
var m=h[2];
h=h[4];
return g==null?m==="!=":m==="="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false;
},POS:function(g,h,l,m){var q=n.setFilters[h[2]];
if(q){return q(g,l,h,m);
}}}},r=n.match.POS;
for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);
n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,h){return"\\"+(h-0+1);
}));
}var z=function(g,h){g=Array.prototype.slice.call(g,0);
if(h){h.push.apply(h,g);
return h;
}return g;
};
try{Array.prototype.slice.call(s.documentElement.childNodes,0);
}catch(C){z=function(g,h){h=h||[];
if(j.call(g)==="[object Array]"){Array.prototype.push.apply(h,g);
}else{if(typeof g.length==="number"){for(var l=0,m=g.length;
l<m;
l++){h.push(g[l]);
}}else{for(l=0;
g[l];
l++){h.push(g[l]);
}}}return h;
};
}var B;
if(s.documentElement.compareDocumentPosition){B=function(g,h){if(!g.compareDocumentPosition||!h.compareDocumentPosition){if(g==h){i=true;
}return g.compareDocumentPosition?-1:1;
}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;
if(g===0){i=true;
}return g;
};
}else{if("sourceIndex" in s.documentElement){B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h){i=true;
}return g.sourceIndex?-1:1;
}g=g.sourceIndex-h.sourceIndex;
if(g===0){i=true;
}return g;
};
}else{if(s.createRange){B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h){i=true;
}return g.ownerDocument?-1:1;
}var l=g.ownerDocument.createRange(),m=h.ownerDocument.createRange();
l.setStart(g,0);
l.setEnd(g,0);
m.setStart(h,0);
m.setEnd(h,0);
g=l.compareBoundaryPoints(Range.START_TO_END,m);
if(g===0){i=true;
}return g;
};
}}}(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();
g.innerHTML="<a name='"+h+"'/>";
var l=s.documentElement;
l.insertBefore(g,l.firstChild);
if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p){return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[];
}};
n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");
return m.nodeType===1&&p&&p.nodeValue===q;
};
}l.removeChild(g);
l=g=null;
})();
(function(){var g=s.createElement("div");
g.appendChild(s.createComment(""));
if(g.getElementsByTagName("*").length>0){n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);
if(h[1]==="*"){h=[];
for(var m=0;
l[m];
m++){l[m].nodeType===1&&h.push(l[m]);
}l=h;
}return l;
};
}g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#"){n.attrHandle.href=function(h){return h.getAttribute("href",2);
};
}g=null;
})();
s.querySelectorAll&&function(){var g=k,h=s.createElement("div");
h.innerHTML="<p class='TEST'></p>";
if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;
if(!v&&q.nodeType===9&&!x(q)){try{return z(q.querySelectorAll(m),p);
}catch(t){}}return g(m,q,p,v);
};
for(var l in g){k[l]=g[l];
}h=null;
}}();
(function(){var g=s.createElement("div");
g.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";
if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");
n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m){return l.getElementsByClassName(h[1]);
}};
g=null;
}}})();
var E=s.compareDocumentPosition?function(g,h){return !!(g.compareDocumentPosition(h)&16);
}:function(g,h){return g!==h&&(g.contains?g.contains(h):true);
},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false;
},ga=function(g,h){var l=[],m="",q;
for(h=h.nodeType?[h]:h;
q=n.match.PSEUDO.exec(g);
){m+=q[0];
g=g.replace(n.match.PSEUDO,"");
}g=n.relative[g]?g+"*":g;
q=0;
for(var p=h.length;
q<p;
q++){k(g,h[q],l);
}return k.filter(m,l);
};
c.find=k;
c.expr=k.selectors;
c.expr[":"]=c.expr.filters;
c.unique=k.uniqueSort;
c.text=a;
c.isXMLDoc=x;
c.contains=E;
})();
var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,gb=/,/;
R=Array.prototype.slice;
var Ia=function(a,b,d){if(c.isFunction(b)){return c.grep(a,function(e,j){return !!b.call(e,j,e)===d;
});
}else{if(b.nodeType){return c.grep(a,function(e){return e===b===d;
});
}else{if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1;
});
if(Ua.test(b)){return c.filter(b,f,!d);
}else{b=c.filter(b,f);
}}}}return c.grep(a,function(e){return c.inArray(e,b)>=0===d;
});
};
c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;
f<e;
f++){d=b.length;
c.find(a,this[f],b);
if(f>0){for(var j=d;
j<b.length;
j++){for(var i=0;
i<d;
i++){if(b[i]===b[j]){b.splice(j--,1);
break;
}}}}}return b;
},has:function(a){var b=c(a);
return this.filter(function(){for(var d=0,f=b.length;
d<f;
d++){if(c.contains(this,b[d])){return true;
}}});
},not:function(a){return this.pushStack(Ia(this,a,false),"not",a);
},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a);
},is:function(a){return !!a&&c.filter(a,this).length>0;
},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j={},i;
if(f&&a.length){e=0;
for(var o=a.length;
e<o;
e++){i=a[e];
j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i);
}for(;
f&&f.ownerDocument&&f!==b;
){for(i in j){e=j[i];
if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});
delete j[i];
}}f=f.parentNode;
}}return d;
}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;
return this.map(function(n,r){for(;
r&&r.ownerDocument&&r!==b;
){if(k?k.index(r)>-1:c(r).is(a)){return r;
}r=r.parentNode;
}return null;
});
},index:function(a){if(!a||typeof a==="string"){return c.inArray(this[0],a?c(a):this.parent().children());
}return c.inArray(a.jquery?a[0]:a,this);
},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);
b=c.merge(this.get(),a);
return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b));
},andSelf:function(){return this.add(this.prevObject);
}});
c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null;
},parents:function(a){return c.dir(a,"parentNode");
},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d);
},next:function(a){return c.nth(a,2,"nextSibling");
},prev:function(a){return c.nth(a,2,"previousSibling");
},nextAll:function(a){return c.dir(a,"nextSibling");
},prevAll:function(a){return c.dir(a,"previousSibling");
},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d);
},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d);
},siblings:function(a){return c.sibling(a.parentNode.firstChild,a);
},children:function(a){return c.sibling(a.firstChild);
},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes);
}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);
eb.test(a)||(f=d);
if(f&&typeof f==="string"){e=c.filter(f,e);
}e=this.length>1?c.unique(e):e;
if((this.length>1||gb.test(f))&&fb.test(a)){e=e.reverse();
}return this.pushStack(e,a,R.call(arguments).join(","));
};
});
c.extend({filter:function(a,b,d){if(d){a=":not("+a+")";
}return c.find.matches(a,b);
},dir:function(a,b,d){var f=[];
for(a=a[b];
a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));
){a.nodeType===1&&f.push(a);
a=a[b];
}return f;
},nth:function(a,b,d){b=b||1;
for(var f=0;
a;
a=a[d]){if(a.nodeType===1&&++f===b){break;
}}return a;
},sibling:function(a,b){for(var d=[];
a;
a=a.nextSibling){a.nodeType===1&&a!==b&&d.push(a);
}return d;
}});
var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?a:b+"></"+d+">";
},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
F.optgroup=F.option;
F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;
F.th=F.td;
if(!c.support.htmlSerialize){F._default=[1,"div<div>","</div>"];
}c.fn.extend({text:function(a){if(c.isFunction(a)){return this.each(function(b){var d=c(this);
d.text(a.call(this,b,d.text()));
});
}if(typeof a!=="object"&&a!==w){return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));
}return c.text(this);
},wrapAll:function(a){if(c.isFunction(a)){return this.each(function(d){c(this).wrapAll(a.call(this,d));
});
}if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);
this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var d=this;
d.firstChild&&d.firstChild.nodeType===1;
){d=d.firstChild;
}return d;
}).append(this);
}return this;
},wrapInner:function(a){if(c.isFunction(a)){return this.each(function(b){c(this).wrapInner(a.call(this,b));
});
}return this.each(function(){var b=c(this),d=b.contents();
d.length?d.wrapAll(a):b.append(a);
});
},wrap:function(a){return this.each(function(){c(this).wrapAll(a);
});
},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes);
}).end();
},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a);
});
},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild);
});
},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this);
});
}else{if(arguments.length){var a=c(arguments[0]);
a.push.apply(a,this.toArray());
return this.pushStack(a,"before",arguments);
}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling);
});
}else{if(arguments.length){var a=this.pushStack(this,"after",arguments);
a.push.apply(a,c(arguments[0]).toArray());
return a;
}}},remove:function(a,b){for(var d=0,f;
(f=this[d])!=null;
d++){if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));
c.cleanData([f]);
}f.parentNode&&f.parentNode.removeChild(f);
}}return this;
},empty:function(){for(var a=0,b;
(b=this[a])!=null;
a++){for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));
b.firstChild;
){b.removeChild(b.firstChild);
}}return this;
},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;
if(!d){d=f.createElement("div");
d.appendChild(this.cloneNode(true));
d=d.innerHTML;
}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0];
}else{return this.cloneNode(true);
}});
if(a===true){ra(this,b);
ra(this.find("*"),b.find("*"));
}return b;
},html:function(a){if(a===w){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,""):null;
}else{if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);
try{for(var b=0,d=this.length;
b<d;
b++){if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));
this[b].innerHTML=a;
}}}catch(f){this.empty().append(a);
}}else{c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();
j.empty().append(function(){return a.call(this,e,i);
});
}):this.empty().append(a);
}}return this;
},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a)){return this.each(function(b){var d=c(this),f=d.html();
d.replaceWith(a.call(this,b,f));
});
}if(typeof a!=="string"){a=c(a).detach();
}return this.each(function(){var b=this.nextSibling,d=this.parentNode;
c(this).remove();
b?c(b).before(a):c(d).append(a);
});
}else{return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a);
}},detach:function(a){return this.remove(a,true);
},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||u.appendChild(u.ownerDocument.createElement("tbody")):u;
}var e,j,i=a[0],o=[],k;
if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i)){return this.each(function(){c(this).domManip(a,b,d,true);
});
}if(c.isFunction(i)){return this.each(function(u){var z=c(this);
a[0]=i.call(this,u,b?z.html():w);
z.domManip(a,b,d);
});
}if(this[0]){e=i&&i.parentNode;
e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);
k=e.fragment;
if(j=k.childNodes.length===1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");
for(var n=0,r=this.length;
n<r;
n++){d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k);
}}o.length&&c.each(o,Qa);
}return this;
}});
c.fragments={};
c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];
d=c(d);
var e=this.length===1&&this[0].parentNode;
if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this;
}else{e=0;
for(var j=d.length;
e<j;
e++){var i=(e>0?this.clone(true):this).get();
c.fn[b].apply(c(d[e]),i);
f=f.concat(i);
}return this.pushStack(f,a,d.selector);
}};
});
c.extend({clean:function(a,b,d,f){b=b||s;
if(typeof b.createElement==="undefined"){b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;
}for(var e=[],j=0,i;
(i=a[j])!=null;
j++){if(typeof i==="number"){i+="";
}if(i){if(typeof i==="string"&&!jb.test(i)){i=b.createTextNode(i);
}else{if(typeof i==="string"){i=i.replace(Ka,Ma);
var o=(La.exec(i)||["",""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");
for(r.innerHTML=k[1]+i+k[2];
n--;
){r=r.lastChild;
}if(!c.support.tbody){n=ib.test(i);
o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];
for(k=o.length-1;
k>=0;
--k){c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k]);
}}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);
i=r.childNodes;
}}if(i.nodeType){e.push(i);
}else{e=c.merge(e,i);
}}}if(d){for(j=0;
e[j];
j++){if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript")){f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);
}else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));
d.appendChild(e[j]);
}}}return e;
},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;
(o=a[i])!=null;
i++){if(d=o[c.expando]){b=f[d];
if(b.events){for(var k in b.events){e[k]?c.event.remove(o,k):Ca(o,k,b.handle);
}}if(j){delete o[c.expando];
}else{o.removeAttribute&&o.removeAttribute(c.expando);
}delete f[d];
}}}});
var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=function(a,b){return b.toUpperCase();
};
c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w){return c.curCSS(d,f);
}if(typeof e==="number"&&!kb.test(f)){e+="px";
}c.style(d,f,e);
});
};
c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if((b==="width"||b==="height")&&parseFloat(d)<0){d=w;
}var f=a.style||a,e=d!==w;
if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;
b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";
a=f.filter||c.curCSS(a,"filter")||"";
f.filter=Na.test(a)?a.replace(Na,b):b;
}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":"";
}if(ha.test(b)){b=Pa;
}b=b.replace(ia,ja);
if(e){f[b]=d;
}return f[b];
},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;
function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;
f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);
if(f==="margin"){e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;
}else{e-=parseFloat(c.curCSS(a,"border"+this+"Width",true))||0;
}});
}a.offsetWidth!==0?i():c.swap(a,ob,i);
return Math.max(0,Math.round(e));
}return c.curCSS(a,b,d);
},curCSS:function(a,b,d){var f,e=a.style;
if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";
return f===""?"1":f;
}if(ha.test(b)){b=Pa;
}if(!d&&e&&e[b]){f=e[b];
}else{if(rb){if(ha.test(b)){b="float";
}b=b.replace(lb,"-$1").toLowerCase();
e=a.ownerDocument.defaultView;
if(!e){return null;
}if(a=e.getComputedStyle(a,null)){f=a.getPropertyValue(b);
}if(b==="opacity"&&f===""){f="1";
}}else{if(a.currentStyle){d=b.replace(ia,ja);
f=a.currentStyle[b]||a.currentStyle[d];
if(!mb.test(f)&&nb.test(f)){b=e.left;
var j=a.runtimeStyle.left;
a.runtimeStyle.left=a.currentStyle.left;
e.left=d==="fontSize"?"1em":f||0;
f=e.pixelLeft+"px";
e.left=b;
a.runtimeStyle.left=j;
}}}}return f;
},swap:function(a,b,d){var f={};
for(var e in b){f[e]=a.style[e];
a.style[e]=b[e];
}d.call(a);
for(e in b){a.style[e]=f[e];
}}});
if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";
return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none";
};
c.expr.filters.visible=function(a){return !c.expr.filters.hidden(a);
};
}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;
c.fn.extend({load:function(a,b,d){if(typeof a!=="string"){return zb.call(this,a);
}else{if(!this.length){return this;
}}var f=a.indexOf(" ");
if(f>=0){var e=a.slice(f,a.length);
a=a.slice(0,f);
}f="GET";
if(b){if(c.isFunction(b)){d=b;
b=null;
}else{if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);
f="POST";
}}}var j=this;
c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified"){j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);
}d&&j.each(d,[i.responseText,o,i]);
}});
return this;
},serialize:function(){return c.param(this.serializeArray());
},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this;
}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type));
}).map(function(a,b){a=c(this).val();
return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d};
}):{name:b.name,value:a};
}).get();
}});
c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d);
};
});
c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b=null;
}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f});
},getScript:function(a,b){return c.get(a,null,b,"script");
},getJSON:function(a,b,d){return c.get(a,b,d,"json");
},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b={};
}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f});
},ajaxSetup:function(a){c.extend(c.ajaxSettings,a);
},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest;
}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP");
}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&e.success.call(k,o,i,x);
e.global&&f("ajaxSuccess",[x,e]);
}function d(){e.complete&&e.complete.call(k,x,i);
e.global&&f("ajaxComplete",[x,e]);
e.global&&!--c.active&&c.event.trigger("ajaxStop");
}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p);
}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();
if(e.data&&e.processData&&typeof e.data!=="string"){e.data=c.param(e.data,e.traditional);
}if(e.dataType==="jsonp"){if(n==="GET"){N.test(e.url)||(e.url+=(ka.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?");
}else{if(!e.data||!N.test(e.data)){e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";
}}e.dataType="json";
}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;
if(e.data){e.data=(e.data+"").replace(N,"="+j+"$1");
}e.url=e.url.replace(N,"="+j+"$1");
e.dataType="script";
A[j]=A[j]||function(q){o=q;
b();
d();
A[j]=w;
try{delete A[j];
}catch(p){}z&&z.removeChild(C);
};
}if(e.dataType==="script"&&e.cache===null){e.cache=false;
}if(e.cache===false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");
e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"");
}if(e.data&&n==="GET"){e.url+=(ka.test(e.url)?"&":"?")+e.data;
}e.global&&!c.active++&&c.event.trigger("ajaxStart");
r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);
if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");
C.src=e.url;
if(e.scriptCharset){C.charset=e.scriptCharset;
}if(!j){var B=false;
C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;
b();
d();
C.onload=C.onreadystatechange=null;
z&&C.parentNode&&z.removeChild(C);
}};
}z.insertBefore(C,z.firstChild);
return w;
}var E=false,x=e.xhr();
if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);
try{if(e.data||a&&a.contentType){x.setRequestHeader("Content-Type",e.contentType);
}if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",c.lastModified[e.url]);
c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url]);
}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");
x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default);
}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");
x.abort();
return false;
}e.global&&f("ajaxSend",[x,e]);
var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||d();
E=true;
if(x){x.onreadystatechange=c.noop;
}}else{if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;
x.onreadystatechange=c.noop;
i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";
var p;
if(i==="success"){try{o=c.httpData(x,e.dataType,e);
}catch(v){i="parsererror";
p=v;
}}if(i==="success"||i==="notmodified"){j||b();
}else{c.handleError(e,x,i,p);
}d();
q==="timeout"&&x.abort();
if(e.async){x=null;
}}}};
try{var h=x.abort;
x.abort=function(){x&&h.call(x);
g("abort");
};
}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout");
},e.timeout);
try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null);
}catch(m){c.handleError(e,x,null,m);
d();
}e.async||g();
return x;
}},handleError:function(a,b,d,f){if(a.error){a.error.call(a.context||a,b,d,f);
}if(a.global){(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f]);
}},active:0,httpSuccess:function(a){try{return !a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0;
}catch(b){}return false;
},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");
if(d){c.lastModified[b]=d;
}if(f){c.etag[b]=f;
}return a.status===304||a.status===0;
},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;
a=e?a.responseXML:a.responseText;
e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");
if(d&&d.dataFilter){a=d.dataFilter(a,b);
}if(typeof a==="string"){if(b==="json"||!b&&f.indexOf("json")>=0){a=c.parseJSON(a);
}else{if(b==="script"||!b&&f.indexOf("javascript")>=0){c.globalEval(a);
}}}return a;
},param:function(a,b){function d(i,o){if(c.isArray(o)){c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n);
});
}else{!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n);
}):f(i,o);
}}function f(i,o){o=c.isFunction(o)?o():o;
e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o);
}var e=[];
if(b===w){b=c.ajaxSettings.traditional;
}if(c.isArray(a)||a.jquery){c.each(a,function(){f(this.name,this.value);
});
}else{for(var j in a){d(j,a[j]);
}}return e.join("&").replace(yb,"+");
}});
var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];
c.fn.extend({show:function(a,b){if(a||a===0){return this.animate(K("show",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";
if(c.css(this[a],"display")==="none"){d=this[a].nodeName;
var f;
if(la[d]){f=la[d];
}else{var e=c("<"+d+" />").appendTo("body");
f=e.css("display");
if(f==="none"){f="block";
}e.remove();
la[d]=f;
}c.data(this[a],"olddisplay",f);
}}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display=c.data(this[a],"olddisplay")||"";
}return this;
}},hide:function(a,b){if(a||a===0){return this.animate(K("hide",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
!d&&d!=="none"&&c.data(this[a],"olddisplay",c.css(this[a],"display"));
}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display="none";
}return this;
}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";
if(c.isFunction(a)&&c.isFunction(b)){this._toggle.apply(this,arguments);
}else{a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");
c(this)[f?"show":"hide"]();
}):this.animate(K("toggle",3),a,b);
}return this;
},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d);
},animate:function(a,b,d,f){var e=c.speed(b,d,f);
if(c.isEmptyObject(a)){return this.each(e.complete);
}return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;
for(i in a){var n=i.replace(ia,ja);
if(i!==n){a[n]=a[i];
delete a[i];
i=n;
}if(a[i]==="hide"&&o||a[i]==="show"&&!o){return j.complete.call(this);
}if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");
j.overflow=this.style.overflow;
}if(c.isArray(a[i])){(j.specialEasing=j.specialEasing||{})[i]=a[i][1];
a[i]=a[i][0];
}}if(j.overflow!=null){this.style.overflow="hidden";
}j.curAnim=c.extend({},a);
c.each(a,function(r,u){var z=new c.fx(k,j,r);
if(Ab.test(u)){z[u==="toggle"?o?"show":"hide":u](a);
}else{var C=Bb.exec(u),B=z.cur(true)||0;
if(C){u=parseFloat(C[2]);
var E=C[3]||"px";
if(E!=="px"){k.style[r]=(u||1)+E;
B=(u||1)/z.cur(true)*B;
k.style[r]=B+E;
}if(C[1]){u=(C[1]==="-="?-1:1)*u+B;
}z.custom(B,u,E);
}else{z.custom(B,u,"");
}}});
return true;
});
},stop:function(a,b){var d=c.timers;
a&&this.queue([]);
this.each(function(){for(var f=d.length-1;
f>=0;
f--){if(d[f].elem===this){b&&d[f](true);
d.splice(f,1);
}}});
b||this.dequeue();
return this;
}});
c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f);
};
});
c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};
f.duration=c.fx.off?0:typeof f.duration==="number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;
f.old=f.complete;
f.complete=function(){f.queue!==false&&c(this).dequeue();
c.isFunction(f.old)&&f.old.call(this);
};
return f;
},easing:{linear:function(a,b,d,f){return d+f*a;
},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d;
}},timers:[],fx:function(a,b,d){this.options=b;
this.elem=a;
this.prop=d;
if(!b.orig){b.orig={};
}}});
c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);
(c.fx.step[this.prop]||c.fx.step._default)(this);
if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block";
}},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];
}return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0;
},custom:function(a,b,d){function f(j){return e.step(j);
}this.startTime=J();
this.start=a;
this.end=b;
this.unit=d||this.unit||"px";
this.now=this.start;
this.pos=this.state=0;
var e=this;
f.elem=this.elem;
if(f()&&c.timers.push(f)&&!W){W=setInterval(c.fx.tick,13);
}},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.show=true;
this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());
c(this.elem).show();
},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.hide=true;
this.custom(this.cur(),0);
},step:function(a){var b=J(),d=true;
if(a||b>=this.options.duration+this.startTime){this.now=this.end;
this.pos=this.state=1;
this.update();
this.options.curAnim[this.prop]=true;
for(var f in this.options.curAnim){if(this.options.curAnim[f]!==true){d=false;
}}if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
a=c.data(this.elem,"olddisplay");
this.elem.style.display=a?a:this.options.display;
if(c.css(this.elem,"display")==="none"){this.elem.style.display="block";
}}this.options.hide&&c(this.elem).hide();
if(this.options.hide||this.options.show){for(var e in this.options.curAnim){c.style(this.elem,e,this.options.orig[e]);
}}this.options.complete.call(this.elem);
}return false;
}else{e=b-this.startTime;
this.state=e/this.options.duration;
a=this.options.easing||(c.easing.swing?"swing":"linear");
this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);
this.now=this.start+(this.end-this.start)*this.pos;
this.update();
}return true;
}};
c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;
b<a.length;
b++){a[b]()||a.splice(b--,1);
}a.length||c.fx.stop();
},stop:function(){clearInterval(W);
W=null;
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now);
},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null){a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;
}else{a.elem[a.prop]=a.now;
}}}});
if(c.expr&&c.expr.filters){c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem;
}).length;
};
}c.fn.offset="getBoundingClientRect" in s.documentElement?function(a){var b=this[0];
if(a){return this.each(function(e){c.offset.setOffset(this,a,e);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}var d=b.getBoundingClientRect(),f=b.ownerDocument;
b=f.body;
f=f.documentElement;
return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)};
}:function(a){var b=this[0];
if(a){return this.each(function(r){c.offset.setOffset(this,a,r);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}c.offset.initialize();
var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;
f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;
for(var k=b.offsetTop,n=b.offsetLeft;
(b=b.parentNode)&&b!==o&&b!==i;
){if(c.offset.supportsFixedPosition&&f.position==="fixed"){break;
}j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;
n-=b.scrollLeft;
if(b===d){k+=b.offsetTop;
n+=b.offsetLeft;
if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=d;
d=b.offsetParent;
}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=j;
}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;
n+=o.offsetLeft;
}if(c.offset.supportsFixedPosition&&f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);
n+=Math.max(i.scrollLeft,o.scrollLeft);
}return{top:k,left:n};
};
c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;
c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});
b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);
d=b.firstChild;
f=d.firstChild;
e=d.nextSibling.firstChild.firstChild;
this.doesNotAddBorder=f.offsetTop!==5;
this.doesAddBorderForTableAndCells=e.offsetTop===5;
f.style.position="fixed";
f.style.top="20px";
this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;
f.style.position=f.style.top="";
d.style.overflow="hidden";
d.style.position="relative";
this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;
this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;
a.removeChild(b);
c.offset.initialize=c.noop;
},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;
c.offset.initialize();
if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;
d+=parseFloat(c.curCSS(a,"marginLeft",true))||0;
}return{top:b,left:d};
},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position"))){a.style.position="relative";
}var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;
if(c.isFunction(b)){b=b.call(a,d,e);
}d={top:b.top-e.top+j,left:b.left-e.left+i};
"using" in b?b.using.call(a,d):f.css(d);
}};
c.fn.extend({position:function(){if(!this[0]){return null;
}var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();
d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;
d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;
f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;
f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;
return{top:d.top-f.top,left:d.left-f.left};
},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;
a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";
){a=a.offsetParent;
}return a;
});
}});
c.each(["Left","Top"],function(a,b){var d="scroll"+b;
c.fn[d]=function(f){var e=this[0],j;
if(!e){return null;
}if(f!==w){return this.each(function(){if(j=wa(this)){j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());
}else{this[d]=f;
}});
}else{return(j=wa(e))?"pageXOffset" in j?j[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d];
}};
});
c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null;
};
c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null;
};
c.fn[d]=function(f){var e=this[0];
if(!e){return f==null?null:this;
}if(c.isFunction(f)){return this.each(function(j){var i=c(this);
i[d](f.call(this,j,i[d]()));
});
}return"scrollTo" in e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px");
};
});
A.jQuery=A.$=c;
})(window);
function hmo(evt,n){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}n.timer=setTimeout(hover,500);
}function hmm(evt,n){if(!n.show){return;
}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
}function hmt(evt,n){n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
}function hs(e,n){var priorBgColor=e.style.backgroundColor;
var priorBorderColor=e.style.borderColor;
if(n&&n.tagName=="DIV"){e.onmouseenter=function(evt){e.onmouseover=null;
e.onmouseout=null;
hmo(evt,n);
};
e.onmouseover=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmo(evt,n);
};
e.onmousemove=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmm(evt,n);
};
e.onmouseout=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
hmt(evt,n);
};
e.onmouseleave=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
e.onmouseover=null;
e.onmouseout=null;
hmt(evt,n);
};
Util.Style.acss(n,"hover");
}}function _g(i){return document.getElementById(i);
}function _gbt(t,e){e=e||document;
return e.getElementsByTagName(t);
}var Util=function(){var _e=[],_d=document,_w=window;
return{EventCache:function(){var l=[];
return{add:function(o,e,f){l.push(arguments);
},remove:function(o,e,f){var n;
for(var i=l.length-1;
i>=0;
i=i-1){if(o==l[i][0]&&e==l[i][1]&&f==l[i][2]){n=l[i];
if(n[0].removeEventListener){n[0].removeEventListener(n[1],n[2],n[3]);
}else{if(n[0].detachEvent){if(n[1].substring(0,2)!="on"){n[1]="on"+n[1];
}n[0].detachEvent(n[1],n[0][e+f]);
}}}}},flush:function(){var e;
for(var i=l.length-1;
i>=0;
i=i-1){var o=l[i];
if(o[0].removeEventListener){o[0].removeEventListener(o[1],o[2],o[3]);
}e=o[1];
if(o[1].substring(0,2)!="on"){o[1]="on"+o[1];
}if(o[0].detachEvent){o[0].detachEvent(o[1],o[2]);
if(o[0][e+o[2]]){o[0].detachEvent(o[1],o[0][e+o[2]]);
}}}}};
}(),ce:function(t){var a=_e[t];
if(!a){a=_e[t]=_d.createElement(t);
}if(!a){return null;
}else{return a.cloneNode(false);
}},cep:function(t,p){var e=this.ce(t);
return this.mo(e,p);
},mo:function(o1,o2,d){o1=o1||{};
o2=o2||{};
var p;
for(p in o2){if(p){o1[p]=(o1[p]===undefined)?o2[p]:!d?o2[p]:o1[p];
}}return o1;
},de:function(e){if(e){this.gp(e).removeChild(e);
}},cancelBubble:function(e){e=_w.event||e;
if(!e){return;
}if(e.stopPropagation){e.stopPropagation();
}else{e.cancelBubble=true;
}},preventDefault:function(e){e=_w.event||e;
if(!e){return;
}if(e.preventDefault){e.preventDefault();
}else{e.returnValue=false;
}},goff:function(e){var l=0,t=0;
if(e.offsetParent){while(e.offsetParent){l+=e.offsetLeft;
t+=e.offsetTop;
e=e.offsetParent;
}}else{if(e.x||e.y){l+=e.x||0;
t+=e.y||0;
}}return[l,t];
},gp:function(e){if(!e.parentNode){return e;
}e=e.parentNode;
while(e.nodeType===3&&e.parentNode){e=e.parentNode;
}return e;
},gc:function(e,i){i=i||0;
var j=-1;
if(!e.childNodes[i]){return null;
}e=e.childNodes[0];
while(e&&j<i){if(e.nodeType===1){j++;
if(j===i){break;
}}e=this.gns(e);
}return e;
},gcs:function(e){var r=[],es=e.childNodes;
for(var i=0;
i<es.length;
i++){var x=es[i];
if(x.nodeType===1){r.push(x);
}}return r;
},gns:function(e){if(!e){return null;
}var a=e.nextSibling;
while(a&&a.nodeType!==1){a=a.nextSibling;
}return a;
},gps:function(e){var a=e.previousSibling;
while(a&&a.nodeType!==1){a=a.previousSibling;
}return a;
},ac:function(e,p){p.appendChild(e);
return e;
},ia:function(nn,rn){var p=Util.gp(rn),n=Util.gns(rn);
if(n){p.insertBefore(nn,n);
}else{Util.ac(nn,p);
}},addEvent:function(o,e,f){function ae(obj,evt,fnc){if(!obj.myEvents){obj.myEvents={};
}if(!obj.myEvents[evt]){obj.myEvents[evt]=[];
}var evts=obj.myEvents[evt];
evts[evts.length]=fnc;
}function fe(obj,evt){if(!obj||!obj.myEvents||!obj.myEvents[evt]){return;
}var evts=obj.myEvents[evt];
for(var i=0,len=evts.length;
i<len;
i++){evts[i]();
}}if(o.addEventListener){o.addEventListener(e,f,false);
Util.EventCache.add(o,e,f);
}else{if(o.attachEvent){o["e"+e+f]=f;
o[e+f]=function(){o["e"+e+f](window.event);
};
o.attachEvent("on"+e,o[e+f]);
Util.EventCache.add(o,e,f);
}else{ae(o,e,f);
o["on"+e]=function(){fe(o,e);
};
}}},removeEvent:function(o,e,f){Util.EventCache.remove(o,e,f);
},popup:function(u,n,o){if(!window.open){return false;
}var d={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};
function f(n,v){if(!v){return"";
}return n+"="+v+",";
}function fs(){o=o||{};
var p,n={};
for(p in d){if(p){n[p]=o[p]!==undefined?o[p]:d[p];
}}return n;
}o=fs();
var p=f("dependent",o.dp)+f("directories",o.dr)+f("fullscreen",o.fs)+f("location",o.lb?1:0)+f("menubar",o.mb)+f("resizable",o.rz?1:0)+f("scrollbars",o.scb?1:0)+f("status",o.stb?1:0)+f("toolbar",o.tb?1:0)+f("top",o.tp)+f("left",o.lft)+f("width",o.w)+f("height",o.h)+f("screenX",o.sx)+f("screenY",o.sy);
p=p.substring(0,p.length-1);
var nw=window.open(u,n,p);
window.blur();
if(nw.focus){nw.focus();
}return true;
},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}};
}();
function insertAfter(nn,rn){Util.ia(nn,rn);
}Util.addEvent(window,"unload",Util.EventCache.flush);
Util.Style=function(){return{ccss:function(e,c){if(typeof(e.className)==="undefined"||!e.className){return false;
}var a=e.className.split(" ");
for(var i=0,b=a.length;
i<b;
i++){if(a[i]===c){return true;
}}return false;
},acss:function(e,c){if(this.ccss(e,c)){return e;
}e.className=(e.className?e.className+" ":"")+c;
return e;
},rcss:function(e,c){if(!this.ccss(e,c)){return e;
}var a=e.className.split(" "),d="";
for(var i=0,b=a.length;
i<b;
i++){var f=a[i];
if(f!==c){d+=d.length>0?(" "+f):f;
}}e.className=d;
return e;
},tcss:function(e,c){if(this.ccss(e,c)){this.rcss(e,c);
return false;
}else{this.acss(e,c);
return true;
}},co:function(e){e.style.MozOpacity="";
e.style.opacity="";
e.style.filter="";
},g:function(c,e,t){e=e||document;
t=t||"*";
var ns=[],es=_gbt(t,e),l=es.length;
for(var i=0,j=0;
i<l;
i++){if(this.ccss(es[i],c)){ns[j]=es[i];
j++;
}}return ns;
}};
}();
function getPosition(e){e=e||window.event;
var cursor={x:0,y:0};
if(e.pageX||e.pageY){cursor.x=e.pageX;
cursor.y=e.pageY;
}else{var de=document.documentElement;
var b=document.body;
cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}return cursor;
}function gvs(){var n=window,d=document,b=d.body,e=d.documentElement;
if(typeof n.innerWidth!=="undefined"){return[n.innerHeight,n.innerWidth];
}else{if(typeof e!=="undefined"&&typeof e.clientWidth!=="undefined"&&e.clientWidth!==0){return[e.clientHeight,e.clientWidth];
}else{return[b.clientHeight,b.clientWidth];
}}}function gso(){var d=document,b=d.body,w=window,e=d.documentElement,et=e.scrollTop,bt=b.scrollTop,el=e.scrollLeft,bl=b.scrollLeft;
if(typeof w.pageYOffset==="number"){return[w.pageYOffset,w.pageXOffset];
}if(typeof et==="number"){if(bt>et||bl>el){return[bt,bl];
}return[et,el];
}return[bt,bl];
}if(!this.JSON){this.JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){k=rep[i];
if(typeof k==="string"){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());
mp_formatter={};
mp_formatter.Locale=function(properties){this._className="mp_formatter.Locale";
this._parseList=function(names,expectedItems){var array=[];
if(names===null){throw"Names not defined";
}else{if(typeof names=="object"){array=names;
}else{if(typeof names=="string"){array=names.split(";",expectedItems);
for(var i=0;
i<array.length;
i++){if(array[i][0]=='"'&&array[i][array[i].length-1]=='"'){array[i]=array[i].slice(1,-1);
}else{throw"Missing double quotes";
}}}else{throw"Names must be an array or a string";
}}}if(array.length!=expectedItems){throw"Expected "+expectedItems+" items, got "+array.length;
}return array;
};
this._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return formatString;
}else{throw"Empty or no string";
}};
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing locale properties";
}if(typeof properties.decimal_point!="string"){throw"Error: Invalid/missing decimal_point property";
}this.decimal_point=properties.decimal_point;
if(typeof properties.thousands_sep!="string"){throw"Error: Invalid/missing thousands_sep property";
}this.thousands_sep=properties.thousands_sep;
if(typeof properties.grouping!="string"){throw"Error: Invalid/missing grouping property";
}this.grouping=properties.grouping;
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing time locale properties";
}try{this.time24hr=this._validateFormatString(properties.time24hr);
}catch(error){throw"Error: Invalid time24hr property: "+error;
}try{this.time24hrnosec=this._validateFormatString(properties.time24hrnosec);
}catch(error){throw"Error: Invalid time24hrnosec property: "+error;
}try{this.shortdate2yr=this._validateFormatString(properties.shortdate2yr);
}catch(error){throw"Error: Invalid shortdate2yr property: "+error;
}try{this.fulldate4yr=this._validateFormatString(properties.fulldate4yr);
}catch(error){throw"Error: Invalid fulldate4yr property: "+error;
}try{this.fulldate2yr=this._validateFormatString(properties.fulldate2yr);
}catch(error){throw"Error: Invalid fulldate2yr property: "+error;
}try{this.fullmonth4yrnodate=this._validateFormatString(properties.fullmonth4yrnodate);
}catch(error){throw"Error: Invalid fullmonth4yrnodate property: "+error;
}try{this.full4yr=this._validateFormatString(properties.full4yr);
}catch(error){throw"Error: Invalid full4yr property: "+error;
}try{this.fulldatetime2yr=this._validateFormatString(properties.fulldatetime2yr);
}catch(error){throw"Error: Invalid fulldatetime2yr property: "+error;
}try{this.fulldatetime4yr=this._validateFormatString(properties.fulldatetime4yr);
}catch(error){throw"Error: Invalid fulldatetime4yr property: "+error;
}try{this.fulldatetimenoyr=this._validateFormatString(properties.fulldatetimenoyr);
}catch(error){throw"Error: Invalid fulldatetimenoyr property: "+error;
}};
mp_formatter._getPrecision=function(optionsString){if(typeof optionsString!="string"){return -1;
}var m=optionsString.match(/\.(\d)/);
if(m){return parseInt(m[1],10);
}else{return -1;
}};
mp_formatter._isNumber=function(arg){if(typeof arg=="number"){return true;
}if(typeof arg!="string"){return false;
}var s=arg+"";
return(/^-?(\d+|\d*\.\d+)$/).test(s);
};
mp_formatter._isDate=function(arg){if(arg.getDate){return true;
}return false;
};
mp_formatter._trim=function(str){var whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";
for(var i=0;
i<str.length;
i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);
break;
}}for(i=str.length-1;
i>=0;
i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);
break;
}}return whitespace.indexOf(str.charAt(0))===-1?str:"";
};
mp_formatter._splitNumber=function(amount){if(typeof amount=="number"){amount=amount+"";
}var obj={};
if(amount.charAt(0)=="-"){amount=amount.substring(1);
}var amountParts=amount.split(".");
if(!amountParts[1]){amountParts[1]="";
}obj.integer=amountParts[0];
obj.fraction=amountParts[1];
return obj;
};
mp_formatter._formatIntegerPart=function(intPart,grouping,thousandsSep){if(thousandsSep===""||grouping=="-1"){return intPart;
}var groupSizes=grouping.split(";");
var out="";
var pos=intPart.length;
var size;
while(pos>0){if(groupSizes.length>0){size=parseInt(groupSizes.shift(),10);
}if(isNaN(size)){throw"Error: Invalid grouping";
}if(size==-1){out=intPart.substring(0,pos)+out;
break;
}pos-=size;
if(pos<1){out=intPart.substring(0,pos+size)+out;
break;
}out=thousandsSep+intPart.substring(pos,pos+size)+out;
}return out;
};
mp_formatter._formatFractionPart=function(fracPart,precision){for(var i=0;
fracPart.length<precision;
i++){fracPart=fracPart+"0";
}return fracPart;
};
mp_formatter._hasOption=function(option,optionsString){if(typeof option!="string"||typeof optionsString!="string"){return false;
}if(optionsString.indexOf(option)!=-1){return true;
}else{return false;
}};
mp_formatter._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return true;
}else{return false;
}};
mp_formatter.NumericFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.format=function(number,options){if(typeof number=="string"){number=mp_formatter._trim(number);
}if(!mp_formatter._isNumber(number)){throw"Error: The input is not a number";
}var floatAmount=parseFloat(number,10);
var reqPrecision=mp_formatter._getPrecision(options);
if(reqPrecision!=-1){floatAmount=Math.round(floatAmount*Math.pow(10,reqPrecision))/Math.pow(10,reqPrecision);
}var parsedAmount=mp_formatter._splitNumber(String(floatAmount));
var formattedIntegerPart;
if(floatAmount===0){formattedIntegerPart="0";
}else{formattedIntegerPart=mp_formatter._hasOption("^",options)?parsedAmount.integer:mp_formatter._formatIntegerPart(parsedAmount.integer,this.lc.grouping,this.lc.thousands_sep);
}var formattedFractionPart=reqPrecision!=-1?mp_formatter._formatFractionPart(parsedAmount.fraction,reqPrecision):parsedAmount.fraction;
var formattedAmount=formattedFractionPart.length?formattedIntegerPart+this.lc.decimal_point+formattedFractionPart:formattedIntegerPart;
if(mp_formatter._hasOption("~",options)||floatAmount===0){return formattedAmount;
}else{if(mp_formatter._hasOption("+",options)||floatAmount<0){if(floatAmount>0){return"+"+formattedAmount;
}else{if(floatAmount<0){return"-"+formattedAmount;
}else{return formattedAmount;
}}}else{return formattedAmount;
}}};
};
mp_formatter.DateTimeFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.formatISO8601=function(dateStr,option){if(!mp_formatter._validateFormatString(dateStr)){throw"Error: The input is either empty or no string";
}var date=new Date();
date.setISO8601(dateStr);
return this.format(date,option);
};
this.format=function(dateTime,option){if(!mp_formatter._isDate(dateTime)){throw"Error: The input is not a date object";
}switch(option){case mp_formatter.DateTimeFormatter.TIME_24HOUR:return dateTime.format(this.lc.time24hr);
case mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS:return dateTime.format(this.lc.time24hrnosec);
case mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR:return dateTime.format(this.lc.shortdate2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR:return dateTime.format(this.lc.fulldate4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR:return dateTime.format(this.lc.fulldate2yr);
case mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE:return dateTime.format(this.lc.fullmonth4yrnodate);
case mp_formatter.DateTimeFormatter.FULL_4YEAR:return dateTime.format(this.lc.full4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR:return dateTime.format(this.lc.fulldatetime2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR:return dateTime.format(this.lc.fulldatetime4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR:return dateTime.format(this.lc.fulldatetimenoyr);
default:alert("Unhandled date time formatting option");
}};
};
mp_formatter.DateTimeFormatter.TIME_24HOUR=1;
mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS=2;
mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR=3;
mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR=4;
mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR=5;
mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE=6;
mp_formatter.DateTimeFormatter.FULL_4YEAR=7;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR=8;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR=9;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR=10;
document.createElement("canvas").getContext||(function(){var s=Math,j=s.round,F=s.sin,G=s.cos,V=s.abs,W=s.sqrt,k=10,v=k/2;
function X(){return this.context_||(this.context_=new H(this));
}var L=Array.prototype.slice;
function Y(b,a){var c=L.call(arguments,2);
return function(){return b.apply(a,c.concat(L.call(arguments)));
};
}var M={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var a=b||document;
a.createElement("canvas");
a.attachEvent("onreadystatechange",Y(this.init_,this,a));
}},init_:function(b){b.namespaces.g_vml_||b.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");
b.namespaces.g_o_||b.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");
if(!b.styleSheets.ex_canvas_){var a=b.createStyleSheet();
a.owningElement.id="ex_canvas_";
a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}";
}var c=b.getElementsByTagName("canvas"),d=0;
for(;
d<c.length;
d++){this.initElement(c[d]);
}},initElement:function(b){if(!b.getContext){b.getContext=X;
b.innerHTML="";
b.attachEvent("onpropertychange",Z);
b.attachEvent("onresize",$);
var a=b.attributes;
if(a.width&&a.width.specified){b.style.width=a.width.nodeValue+"px";
}else{b.width=b.clientWidth;
}if(a.height&&a.height.specified){b.style.height=a.height.nodeValue+"px";
}else{b.height=b.clientHeight;
}}return b;
}};
function Z(b){var a=b.srcElement;
switch(b.propertyName){case"width":a.style.width=a.attributes.width.nodeValue+"px";
a.getContext().clearRect();
break;
case"height":a.style.height=a.attributes.height.nodeValue+"px";
a.getContext().clearRect();
break;
}}function $(b){var a=b.srcElement;
if(a.firstChild){a.firstChild.style.width=a.clientWidth+"px";
a.firstChild.style.height=a.clientHeight+"px";
}}M.init();
var N=[],B=0;
for(;
B<16;
B++){var C=0;
for(;
C<16;
C++){N[B*16+C]=B.toString(16)+C.toString(16);
}}function I(){return[[1,0,0],[0,1,0],[0,0,1]];
}function y(b,a){var c=I(),d=0;
for(;
d<3;
d++){var f=0;
for(;
f<3;
f++){var h=0,g=0;
for(;
g<3;
g++){h+=b[d][g]*a[g][f];
}c[d][f]=h;
}}return c;
}function O(b,a){a.fillStyle=b.fillStyle;
a.lineCap=b.lineCap;
a.lineJoin=b.lineJoin;
a.lineWidth=b.lineWidth;
a.miterLimit=b.miterLimit;
a.shadowBlur=b.shadowBlur;
a.shadowColor=b.shadowColor;
a.shadowOffsetX=b.shadowOffsetX;
a.shadowOffsetY=b.shadowOffsetY;
a.strokeStyle=b.strokeStyle;
a.globalAlpha=b.globalAlpha;
a.arcScaleX_=b.arcScaleX_;
a.arcScaleY_=b.arcScaleY_;
a.lineScale_=b.lineScale_;
}function P(b){var a,c=1;
b=String(b);
if(b.substring(0,3)=="rgb"){var d=b.indexOf("(",3),f=b.indexOf(")",d+1),h=b.substring(d+1,f).split(",");
a="#";
var g=0;
for(;
g<3;
g++){a+=N[Number(h[g])];
}if(h.length==4&&b.substr(3,1)=="a"){c=h[3];
}}else{a=b;
}return{color:a,alpha:c};
}function aa(b){switch(b){case"butt":return"flat";
case"round":return"round";
case"square":default:return"square";
}}function H(b){this.m_=I();
this.mStack_=[];
this.aStack_=[];
this.currentPath_=[];
this.fillStyle=this.strokeStyle="#000";
this.lineWidth=1;
this.lineJoin="miter";
this.lineCap="butt";
this.miterLimit=k*1;
this.globalAlpha=1;
this.canvas=b;
var a=b.ownerDocument.createElement("div");
a.style.width=b.clientWidth+"px";
a.style.height=b.clientHeight+"px";
a.style.overflow="hidden";
a.style.position="absolute";
b.appendChild(a);
this.element_=a;
this.lineScale_=this.arcScaleY_=this.arcScaleX_=1;
}var i=H.prototype;
i.clearRect=function(){this.element_.innerHTML="";
};
i.beginPath=function(){this.currentPath_=[];
};
i.moveTo=function(b,a){var c=this.getCoords_(b,a);
this.currentPath_.push({type:"moveTo",x:c.x,y:c.y});
this.currentX_=c.x;
this.currentY_=c.y;
};
i.lineTo=function(b,a){var c=this.getCoords_(b,a);
this.currentPath_.push({type:"lineTo",x:c.x,y:c.y});
this.currentX_=c.x;
this.currentY_=c.y;
};
i.bezierCurveTo=function(b,a,c,d,f,h){var g=this.getCoords_(f,h),l=this.getCoords_(b,a),e=this.getCoords_(c,d);
Q(this,l,e,g);
};
function Q(b,a,c,d){b.currentPath_.push({type:"bezierCurveTo",cp1x:a.x,cp1y:a.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y});
b.currentX_=d.x;
b.currentY_=d.y;
}i.quadraticCurveTo=function(b,a,c,d){var f=this.getCoords_(b,a),h=this.getCoords_(c,d),g={x:this.currentX_+0.6666666666666666*(f.x-this.currentX_),y:this.currentY_+0.6666666666666666*(f.y-this.currentY_)};
Q(this,g,{x:g.x+(h.x-this.currentX_)/3,y:g.y+(h.y-this.currentY_)/3},h);
};
i.arc=function(b,a,c,d,f,h){c*=k;
var g=h?"at":"wa",l=b+G(d)*c-v,e=a+F(d)*c-v,m=b+G(f)*c-v,r=a+F(f)*c-v;
if(l==m&&!h){l+=0.125;
}var n=this.getCoords_(b,a),o=this.getCoords_(l,e),q=this.getCoords_(m,r);
this.currentPath_.push({type:g,x:n.x,y:n.y,radius:c,xStart:o.x,yStart:o.y,xEnd:q.x,yEnd:q.y});
};
i.rect=function(b,a,c,d){this.moveTo(b,a);
this.lineTo(b+c,a);
this.lineTo(b+c,a+d);
this.lineTo(b,a+d);
this.closePath();
};
i.strokeRect=function(b,a,c,d){var f=this.currentPath_;
this.beginPath();
this.moveTo(b,a);
this.lineTo(b+c,a);
this.lineTo(b+c,a+d);
this.lineTo(b,a+d);
this.closePath();
this.stroke();
this.currentPath_=f;
};
i.fillRect=function(b,a,c,d){var f=this.currentPath_;
this.beginPath();
this.moveTo(b,a);
this.lineTo(b+c,a);
this.lineTo(b+c,a+d);
this.lineTo(b,a+d);
this.closePath();
this.fill();
this.currentPath_=f;
};
i.createLinearGradient=function(b,a,c,d){var f=new D("gradient");
f.x0_=b;
f.y0_=a;
f.x1_=c;
f.y1_=d;
return f;
};
i.createRadialGradient=function(b,a,c,d,f,h){var g=new D("gradientradial");
g.x0_=b;
g.y0_=a;
g.r0_=c;
g.x1_=d;
g.y1_=f;
g.r1_=h;
return g;
};
i.drawImage=function(b){var a,c,d,f,h,g,l,e,m=b.runtimeStyle.width,r=b.runtimeStyle.height;
b.runtimeStyle.width="auto";
b.runtimeStyle.height="auto";
var n=b.width,o=b.height;
b.runtimeStyle.width=m;
b.runtimeStyle.height=r;
if(arguments.length==3){a=arguments[1];
c=arguments[2];
h=g=0;
l=d=n;
e=f=o;
}else{if(arguments.length==5){a=arguments[1];
c=arguments[2];
d=arguments[3];
f=arguments[4];
h=g=0;
l=n;
e=o;
}else{if(arguments.length==9){h=arguments[1];
g=arguments[2];
l=arguments[3];
e=arguments[4];
a=arguments[5];
c=arguments[6];
d=arguments[7];
f=arguments[8];
}else{throw Error("Invalid number of arguments");
}}}var q=this.getCoords_(a,c),t=[];
t.push(" <g_vml_:group",' coordsize="',k*10,",",k*10,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");
if(this.m_[0][0]!=1||this.m_[0][1]){var E=[];
E.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",j(q.x/k),",","Dy=",j(q.y/k),"");
var p=q,z=this.getCoords_(a+d,c),w=this.getCoords_(a,c+f),x=this.getCoords_(a+d,c+f);
p.x=s.max(p.x,z.x,w.x,x.x);
p.y=s.max(p.y,z.y,w.y,x.y);
t.push("padding:0 ",j(p.x/k),"px ",j(p.y/k),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",E.join(""),", sizingmethod='clip');");
}else{t.push("top:",j(q.y/k),"px;left:",j(q.x/k),"px;");
}t.push(' ">','<g_vml_:image src="',b.src,'"',' style="width:',k*d,"px;"," height:",k*f,'px;"',' cropleft="',h/n,'"',' croptop="',g/o,'"',' cropright="',(n-h-l)/n,'"',' cropbottom="',(o-g-e)/o,'"'," />","</g_vml_:group>");
this.element_.insertAdjacentHTML("BeforeEnd",t.join(""));
};
i.stroke=function(b){var a=[],c=P(b?this.fillStyle:this.strokeStyle),d=c.color,f=c.alpha*this.globalAlpha;
a.push("<g_vml_:shape",' filled="',!!b,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',k*10," ",k*10,'"',' stroked="',!b,'"',' path="');
var h={x:null,y:null},g={x:null,y:null},l=0;
for(;
l<this.currentPath_.length;
l++){var e=this.currentPath_[l];
switch(e.type){case"moveTo":a.push(" m ",j(e.x),",",j(e.y));
break;
case"lineTo":a.push(" l ",j(e.x),",",j(e.y));
break;
case"close":a.push(" x ");
e=null;
break;
case"bezierCurveTo":a.push(" c ",j(e.cp1x),",",j(e.cp1y),",",j(e.cp2x),",",j(e.cp2y),",",j(e.x),",",j(e.y));
break;
case"at":case"wa":a.push(" ",e.type," ",j(e.x-this.arcScaleX_*e.radius),",",j(e.y-this.arcScaleY_*e.radius)," ",j(e.x+this.arcScaleX_*e.radius),",",j(e.y+this.arcScaleY_*e.radius)," ",j(e.xStart),",",j(e.yStart)," ",j(e.xEnd),",",j(e.yEnd));
break;
}if(e){if(h.x==null||e.x<h.x){h.x=e.x;
}if(g.x==null||e.x>g.x){g.x=e.x;
}if(h.y==null||e.y<h.y){h.y=e.y;
}if(g.y==null||e.y>g.y){g.y=e.y;
}}}a.push(' ">');
if(b){if(typeof this.fillStyle=="object"){var m=this.fillStyle,r=0,n={x:0,y:0},o=0,q=1;
if(m.type_=="gradient"){var t=m.x1_/this.arcScaleX_,E=m.y1_/this.arcScaleY_,p=this.getCoords_(m.x0_/this.arcScaleX_,m.y0_/this.arcScaleY_),z=this.getCoords_(t,E);
r=Math.atan2(z.x-p.x,z.y-p.y)*180/Math.PI;
if(r<0){r+=360;
}if(r<0.000001){r=0;
}}else{var p=this.getCoords_(m.x0_,m.y0_),w=g.x-h.x,x=g.y-h.y;
n={x:(p.x-h.x)/w,y:(p.y-h.y)/x};
w/=this.arcScaleX_*k;
x/=this.arcScaleY_*k;
var R=s.max(w,x);
o=2*m.r0_/R;
q=2*m.r1_/R-o;
}var u=m.colors_;
u.sort(function(ba,ca){return ba.offset-ca.offset;
});
var J=u.length,da=u[0].color,ea=u[J-1].color,fa=u[0].alpha*this.globalAlpha,ga=u[J-1].alpha*this.globalAlpha,S=[],l=0;
for(;
l<J;
l++){var T=u[l];
S.push(T.offset*q+o+" "+T.color);
}a.push('<g_vml_:fill type="',m.type_,'"',' method="none" focus="100%"',' color="',da,'"',' color2="',ea,'"',' colors="',S.join(","),'"',' opacity="',ga,'"',' g_o_:opacity2="',fa,'"',' angle="',r,'"',' focusposition="',n.x,",",n.y,'" />');
}else{a.push('<g_vml_:fill color="',d,'" opacity="',f,'" />');
}}else{var K=this.lineScale_*this.lineWidth;
if(K<1){f*=K;
}a.push("<g_vml_:stroke",' opacity="',f,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',aa(this.lineCap),'"',' weight="',K,'px"',' color="',d,'" />');
}a.push("</g_vml_:shape>");
this.element_.insertAdjacentHTML("beforeEnd",a.join(""));
};
i.fill=function(){this.stroke(true);
};
i.closePath=function(){this.currentPath_.push({type:"close"});
};
i.getCoords_=function(b,a){var c=this.m_;
return{x:k*(b*c[0][0]+a*c[1][0]+c[2][0])-v,y:k*(b*c[0][1]+a*c[1][1]+c[2][1])-v};
};
i.save=function(){var b={};
O(this,b);
this.aStack_.push(b);
this.mStack_.push(this.m_);
this.m_=y(I(),this.m_);
};
i.restore=function(){O(this.aStack_.pop(),this);
this.m_=this.mStack_.pop();
};
function ha(b){var a=0;
for(;
a<3;
a++){var c=0;
for(;
c<2;
c++){if(!isFinite(b[a][c])||isNaN(b[a][c])){return false;
}}}return true;
}function A(b,a,c){if(!!ha(a)){b.m_=a;
if(c){b.lineScale_=W(V(a[0][0]*a[1][1]-a[0][1]*a[1][0]));
}}}i.translate=function(b,a){A(this,y([[1,0,0],[0,1,0],[b,a,1]],this.m_),false);
};
i.rotate=function(b){var a=G(b),c=F(b);
A(this,y([[a,c,0],[-c,a,0],[0,0,1]],this.m_),false);
};
i.scale=function(b,a){this.arcScaleX_*=b;
this.arcScaleY_*=a;
A(this,y([[b,0,0],[0,a,0],[0,0,1]],this.m_),true);
};
i.transform=function(b,a,c,d,f,h){A(this,y([[b,a,0],[c,d,0],[f,h,1]],this.m_),true);
};
i.setTransform=function(b,a,c,d,f,h){A(this,[[b,a,0],[c,d,0],[f,h,1]],true);
};
i.clip=function(){};
i.arcTo=function(){};
i.createPattern=function(){return new U;
};
function D(b){this.type_=b;
this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;
this.colors_=[];
}D.prototype.addColorStop=function(b,a){a=P(a);
this.colors_.push({offset:b,color:a.color,alpha:a.alpha});
};
function U(){}G_vmlCanvasManager=M;
CanvasRenderingContext2D=H;
CanvasGradient=D;
CanvasPattern=U;
})();
(function(){jQuery.color={};
jQuery.color.make=function(G,H,J,I){var A={};
A.r=G||0;
A.g=H||0;
A.b=J||0;
A.a=I!=null?I:1;
A.add=function(C,D){for(var E=0;
E<C.length;
++E){A[C.charAt(E)]+=D;
}return A.normalize();
};
A.scale=function(C,D){for(var E=0;
E<C.length;
++E){A[C.charAt(E)]*=D;
}return A.normalize();
};
A.toString=function(){if(A.a>=1){return"rgb("+[A.r,A.g,A.b].join(",")+")";
}else{return"rgba("+[A.r,A.g,A.b,A.a].join(",")+")";
}};
A.normalize=function(){function C(E,D,F){return D<E?E:(D>F?F:D);
}A.r=C(0,parseInt(A.r),255);
A.g=C(0,parseInt(A.g),255);
A.b=C(0,parseInt(A.b),255);
A.a=C(0,A.a,1);
return A;
};
A.clone=function(){return jQuery.color.make(A.r,A.b,A.g,A.a);
};
return A.normalize();
};
jQuery.color.extract=function(E,F){var A;
do{A=E.css(F).toLowerCase();
if(A!=""&&A!="transparent"){break;
}E=E.parent();
}while(!jQuery.nodeName(E.get(0),"body"));
if(A=="rgba(0, 0, 0, 0)"){A="transparent";
}return jQuery.color.parse(A);
};
jQuery.color.parse=function(A){var F,H=jQuery.color.make;
if(F=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(A)){return H(parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10));
}if(F=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A)){return H(parseInt(F[1],10),parseInt(F[2],10),parseInt(F[3],10),parseFloat(F[4]));
}if(F=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(A)){return H(parseFloat(F[1])*2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55);
}if(F=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(A)){return H(parseFloat(F[1])*2.55,parseFloat(F[2])*2.55,parseFloat(F[3])*2.55,parseFloat(F[4]));
}if(F=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(A)){return H(parseInt(F[1],16),parseInt(F[2],16),parseInt(F[3],16));
}if(F=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(A)){return H(parseInt(F[1]+F[1],16),parseInt(F[2]+F[2],16),parseInt(F[3]+F[3],16));
}var G=jQuery.trim(A).toLowerCase();
if(G=="transparent"){return H(255,255,255,0);
}else{F=B[G];
return H(F[0],F[1],F[2]);
}};
var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};
})();
(function(C){function B(l,W,X,E){var O=[],g={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},P=null,AC=null,AD=null,Y=null,AJ=null,s={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},e={left:0,right:0,top:0,bottom:0},y=0,Q=0,I=0,t=0,L={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},G=this;
G.setData=f;
G.setupGrid=k;
G.draw=AH;
G.getPlaceholder=function(){return l;
};
G.getCanvas=function(){return P;
};
G.getPlotOffset=function(){return e;
};
G.width=function(){return I;
};
G.height=function(){return t;
};
G.offset=function(){var AK=AD.offset();
AK.left+=e.left;
AK.top+=e.top;
return AK;
};
G.getData=function(){return O;
};
G.getAxes=function(){return s;
};
G.getOptions=function(){return g;
};
G.highlight=AE;
G.unhighlight=x;
G.triggerRedrawOverlay=q;
G.pointOffset=function(AK){return{left:parseInt(T(AK,"xaxis").p2c(+AK.x)+e.left),top:parseInt(T(AK,"yaxis").p2c(+AK.y)+e.top)};
};
G.hooks=L;
b(G);
r(X);
c();
f(W);
k();
AH();
AG();
function Z(AM,AK){AK=[G].concat(AK);
for(var AL=0;
AL<AM.length;
++AL){AM[AL].apply(this,AK);
}}function b(){for(var AK=0;
AK<E.length;
++AK){var AL=E[AK];
AL.init(G);
if(AL.options){C.extend(true,g,AL.options);
}}}function r(AK){C.extend(true,g,AK);
if(g.grid.borderColor==null){g.grid.borderColor=g.grid.color;
}if(g.xaxis.noTicks&&g.xaxis.ticks==null){g.xaxis.ticks=g.xaxis.noTicks;
}if(g.yaxis.noTicks&&g.yaxis.ticks==null){g.yaxis.ticks=g.yaxis.noTicks;
}if(g.grid.coloredAreas){g.grid.markings=g.grid.coloredAreas;
}if(g.grid.coloredAreasColor){g.grid.markingsColor=g.grid.coloredAreasColor;
}if(g.lines){C.extend(true,g.series.lines,g.lines);
}if(g.points){C.extend(true,g.series.points,g.points);
}if(g.bars){C.extend(true,g.series.bars,g.bars);
}if(g.shadowSize){g.series.shadowSize=g.shadowSize;
}for(var AL in L){if(g.hooks[AL]&&g.hooks[AL].length){L[AL]=L[AL].concat(g.hooks[AL]);
}}Z(L.processOptions,[g]);
}function f(AK){O=M(AK);
U();
m();
}function M(AN){var AL=[];
for(var AK=0;
AK<AN.length;
++AK){var AM=C.extend(true,{},g.series);
if(AN[AK].data){AM.data=AN[AK].data;
delete AN[AK].data;
C.extend(true,AM,AN[AK]);
AN[AK].data=AM.data;
}else{AM.data=AN[AK];
}AL.push(AM);
}return AL;
}function T(AM,AK){var AL=AM[AK];
if(!AL||AL==1){return s[AK];
}if(typeof AL=="number"){return s[AK.charAt(0)+AL+AK.slice(1)];
}return AL;
}function U(){var AP;
var AV=O.length,AK=[],AN=[];
for(AP=0;
AP<O.length;
++AP){var AS=O[AP].color;
if(AS!=null){--AV;
if(typeof AS=="number"){AN.push(AS);
}else{AK.push(C.color.parse(O[AP].color));
}}}for(AP=0;
AP<AN.length;
++AP){AV=Math.max(AV,AN[AP]+1);
}var AL=[],AO=0;
AP=0;
while(AL.length<AV){var AR;
if(g.colors.length==AP){AR=C.color.make(100,100,100);
}else{AR=C.color.parse(g.colors[AP]);
}var AM=AO%2==1?-1:1;
AR.scale("rgb",1+AM*Math.ceil(AO/2)*0.2);
AL.push(AR);
++AP;
if(AP>=g.colors.length){AP=0;
++AO;
}}var AQ=0,AW;
for(AP=0;
AP<O.length;
++AP){AW=O[AP];
if(AW.color==null){AW.color=AL[AQ].toString();
++AQ;
}else{if(typeof AW.color=="number"){AW.color=AL[AW.color].toString();
}}if(AW.lines.show==null){var AU,AT=true;
for(AU in AW){if(AW[AU].show){AT=false;
break;
}}if(AT){AW.lines.show=true;
}}AW.xaxis=T(AW,"xaxis");
AW.yaxis=T(AW,"yaxis");
}}function m(){var AW=Number.POSITIVE_INFINITY,AQ=Number.NEGATIVE_INFINITY,Ac,Aa,AZ,AV,AL,AR,Ab,AX,AP,AO,AK,Ai,Af,AT;
for(AK in s){s[AK].datamin=AW;
s[AK].datamax=AQ;
s[AK].used=false;
}function AN(Al,Ak,Aj){if(Ak<Al.datamin){Al.datamin=Ak;
}if(Aj>Al.datamax){Al.datamax=Aj;
}}for(Ac=0;
Ac<O.length;
++Ac){AR=O[Ac];
AR.datapoints={points:[]};
Z(L.processRawData,[AR,AR.data,AR.datapoints]);
}for(Ac=0;
Ac<O.length;
++Ac){AR=O[Ac];
var Ah=AR.data,Ae=AR.datapoints.format;
if(!Ae){Ae=[];
Ae.push({x:true,number:true,required:true});
Ae.push({y:true,number:true,required:true});
if(AR.bars.show){Ae.push({y:true,number:true,required:false,defaultValue:0});
}AR.datapoints.format=Ae;
}if(AR.datapoints.pointsize!=null){continue;
}if(AR.datapoints.pointsize==null){AR.datapoints.pointsize=Ae.length;
}AX=AR.datapoints.pointsize;
Ab=AR.datapoints.points;
insertSteps=AR.lines.show&&AR.lines.steps;
AR.xaxis.used=AR.yaxis.used=true;
for(Aa=AZ=0;
Aa<Ah.length;
++Aa,AZ+=AX){AT=Ah[Aa];
var AM=AT==null;
if(!AM){for(AV=0;
AV<AX;
++AV){Ai=AT[AV];
Af=Ae[AV];
if(Af){if(Af.number&&Ai!=null){Ai=+Ai;
if(isNaN(Ai)){Ai=null;
}}if(Ai==null){if(Af.required){AM=true;
}if(Af.defaultValue!=null){Ai=Af.defaultValue;
}}}Ab[AZ+AV]=Ai;
}}if(AM){for(AV=0;
AV<AX;
++AV){Ai=Ab[AZ+AV];
if(Ai!=null){Af=Ae[AV];
if(Af.x){AN(AR.xaxis,Ai,Ai);
}if(Af.y){AN(AR.yaxis,Ai,Ai);
}}Ab[AZ+AV]=null;
}}else{if(insertSteps&&AZ>0&&Ab[AZ-AX]!=null&&Ab[AZ-AX]!=Ab[AZ]&&Ab[AZ-AX+1]!=Ab[AZ+1]){for(AV=0;
AV<AX;
++AV){Ab[AZ+AX+AV]=Ab[AZ+AV];
}Ab[AZ+1]=Ab[AZ-AX+1];
AZ+=AX;
}}}}for(Ac=0;
Ac<O.length;
++Ac){AR=O[Ac];
Z(L.processDatapoints,[AR,AR.datapoints]);
}for(Ac=0;
Ac<O.length;
++Ac){AR=O[Ac];
Ab=AR.datapoints.points,AX=AR.datapoints.pointsize;
var AS=AW,AY=AW,AU=AQ,Ad=AQ;
for(Aa=0;
Aa<Ab.length;
Aa+=AX){if(Ab[Aa]==null){continue;
}for(AV=0;
AV<AX;
++AV){Ai=Ab[Aa+AV];
Af=Ae[AV];
if(!Af){continue;
}if(Af.x){if(Ai<AS){AS=Ai;
}if(Ai>AU){AU=Ai;
}}if(Af.y){if(Ai<AY){AY=Ai;
}if(Ai>Ad){Ad=Ai;
}}}}if(AR.bars.show){var Ag=AR.bars.align=="left"?0:-AR.bars.barWidth/2;
if(AR.bars.horizontal){AY+=Ag;
Ad+=Ag+AR.bars.barWidth;
}else{AS+=Ag;
AU+=Ag+AR.bars.barWidth;
}}AN(AR.xaxis,AS,AU);
AN(AR.yaxis,AY,Ad);
}for(AK in s){if(s[AK].datamin==AW){s[AK].datamin=null;
}if(s[AK].datamax==AQ){s[AK].datamax=null;
}}}function c(){function AK(AM,AL){var AN=document.createElement("canvas");
AN.width=AM;
AN.height=AL;
if(C.browser.msie){AN=window.G_vmlCanvasManager.initElement(AN);
}return AN;
}y=l.width();
Q=l.height();
l.html("");
if(l.css("position")=="static"){l.css("position","relative");
}if(y<=0||Q<=0){throw"Invalid dimensions for plot, width = "+y+", height = "+Q;
}if(C.browser.msie){window.G_vmlCanvasManager.init_(document);
}P=C(AK(y,Q)).appendTo(l).get(0);
Y=P.getContext("2d");
AC=C(AK(y,Q)).css({position:"absolute",left:0,top:0}).appendTo(l).get(0);
AJ=AC.getContext("2d");
AJ.stroke();
}function AG(){AD=C([AC,P]);
if(g.grid.hoverable){AD.mousemove(D);
}if(g.grid.clickable){AD.click(d);
}Z(L.bindEvents,[AD]);
}function k(){function AL(AT,AU){function AP(AV){return AV;
}var AS,AO,AQ=AU.transform||AP,AR=AU.inverseTransform;
if(AT==s.xaxis||AT==s.x2axis){AS=AT.scale=I/(AQ(AT.max)-AQ(AT.min));
AO=AQ(AT.min);
if(AQ==AP){AT.p2c=function(AV){return(AV-AO)*AS;
};
}else{AT.p2c=function(AV){return(AQ(AV)-AO)*AS;
};
}if(!AR){AT.c2p=function(AV){return AO+AV/AS;
};
}else{AT.c2p=function(AV){return AR(AO+AV/AS);
};
}}else{AS=AT.scale=t/(AQ(AT.max)-AQ(AT.min));
AO=AQ(AT.max);
if(AQ==AP){AT.p2c=function(AV){return(AO-AV)*AS;
};
}else{AT.p2c=function(AV){return(AO-AQ(AV))*AS;
};
}if(!AR){AT.c2p=function(AV){return AO-AV/AS;
};
}else{AT.c2p=function(AV){return AR(AO-AV/AS);
};
}}}function AN(AR,AT){var AQ,AS=[],AP;
AR.labelWidth=AT.labelWidth;
AR.labelHeight=AT.labelHeight;
if(AR==s.xaxis||AR==s.x2axis){if(AR.labelWidth==null){AR.labelWidth=y/(AR.ticks.length>0?AR.ticks.length:1);
}if(AR.labelHeight==null){AS=[];
for(AQ=0;
AQ<AR.ticks.length;
++AQ){AP=AR.ticks[AQ].label;
if(AP){AS.push('<div class="tickLabel" style="float:left;width:'+AR.labelWidth+'px">'+AP+"</div>");
}}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+AS.join("")+'<div style="clear:left"></div></div>').appendTo(l);
AR.labelHeight=AO.height();
AO.remove();
}}}else{if(AR.labelWidth==null||AR.labelHeight==null){for(AQ=0;
AQ<AR.ticks.length;
++AQ){AP=AR.ticks[AQ].label;
if(AP){AS.push('<div class="tickLabel">'+AP+"</div>");
}}if(AS.length>0){var AO=C('<div style="position:absolute;top:-10000px;font-size:smaller">'+AS.join("")+"</div>").appendTo(l);
if(AR.labelWidth==null){AR.labelWidth=AO.width();
}if(AR.labelHeight==null){AR.labelHeight=AO.find("div").height();
}AO.remove();
}}}if(AR.labelWidth==null){AR.labelWidth=0;
}if(AR.labelHeight==null){AR.labelHeight=0;
}}function AM(){var AP=g.grid.borderWidth;
for(i=0;
i<O.length;
++i){AP=Math.max(AP,2*(O[i].points.radius+O[i].points.lineWidth/2));
}e.left=e.right=e.top=e.bottom=AP;
var AO=g.grid.labelMargin+g.grid.borderWidth;
if(s.xaxis.labelHeight>0){e.bottom=Math.max(AP,s.xaxis.labelHeight+AO);
}if(s.yaxis.labelWidth>0){e.left=Math.max(AP,s.yaxis.labelWidth+AO);
}if(s.x2axis.labelHeight>0){e.top=Math.max(AP,s.x2axis.labelHeight+AO);
}if(s.y2axis.labelWidth>0){e.right=Math.max(AP,s.y2axis.labelWidth+AO);
}I=y-e.left-e.right;
t=Q-e.bottom-e.top;
}var AK;
for(AK in s){K(s[AK],g[AK]);
}if(g.grid.show){for(AK in s){F(s[AK],g[AK]);
p(s[AK],g[AK]);
AN(s[AK],g[AK]);
}AM();
}else{e.left=e.right=e.top=e.bottom=0;
I=y;
t=Q;
}for(AK in s){AL(s[AK],g[AK]);
}if(g.grid.show){h();
}AI();
}function K(AN,AQ){var AM=+(AQ.min!=null?AQ.min:AN.datamin),AK=+(AQ.max!=null?AQ.max:AN.datamax),AP=AK-AM;
if(AP==0){var AL=AK==0?1:0.01;
if(AQ.min==null){AM-=AL;
}if(AQ.max==null||AQ.min!=null){AK+=AL;
}}else{var AO=AQ.autoscaleMargin;
if(AO!=null){if(AQ.min==null){AM-=AP*AO;
if(AM<0&&AN.datamin!=null&&AN.datamin>=0){AM=0;
}}if(AQ.max==null){AK+=AP*AO;
if(AK>0&&AN.datamax!=null&&AN.datamax<=0){AK=0;
}}}}AN.min=AM;
AN.max=AK;
}function F(AP,AS){var AO;
if(typeof AS.ticks=="number"&&AS.ticks>0){AO=AS.ticks;
}else{if(AP==s.xaxis||AP==s.x2axis){AO=0.3*Math.sqrt(y);
}else{AO=0.3*Math.sqrt(Q);
}}var AX=(AP.max-AP.min)/AO,AZ,AT,AV,AW,AR,AM,AL;
if(AS.mode=="time"){var AU={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};
var AY=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];
var AN=0;
if(AS.minTickSize!=null){if(typeof AS.tickSize=="number"){AN=AS.tickSize;
}else{AN=AS.minTickSize[0]*AU[AS.minTickSize[1]];
}}for(AR=0;
AR<AY.length-1;
++AR){if(AX<(AY[AR][0]*AU[AY[AR][1]]+AY[AR+1][0]*AU[AY[AR+1][1]])/2&&AY[AR][0]*AU[AY[AR][1]]>=AN){break;
}}AZ=AY[AR][0];
AV=AY[AR][1];
if(AV=="year"){AM=Math.pow(10,Math.floor(Math.log(AX/AU.year)/Math.LN10));
AL=(AX/AU.year)/AM;
if(AL<1.5){AZ=1;
}else{if(AL<3){AZ=2;
}else{if(AL<7.5){AZ=5;
}else{AZ=10;
}}}AZ*=AM;
}if(AS.tickSize){AZ=AS.tickSize[0];
AV=AS.tickSize[1];
}AT=function(Ac){var Ah=[],Af=Ac.tickSize[0],Ai=Ac.tickSize[1],Ag=new Date(Ac.min);
var Ab=Af*AU[Ai];
if(Ai=="second"){Ag.setUTCSeconds(A(Ag.getUTCSeconds(),Af));
}if(Ai=="minute"){Ag.setUTCMinutes(A(Ag.getUTCMinutes(),Af));
}if(Ai=="hour"){Ag.setUTCHours(A(Ag.getUTCHours(),Af));
}if(Ai=="month"){Ag.setUTCMonth(A(Ag.getUTCMonth(),Af));
}if(Ai=="year"){Ag.setUTCFullYear(A(Ag.getUTCFullYear(),Af));
}Ag.setUTCMilliseconds(0);
if(Ab>=AU.minute){Ag.setUTCSeconds(0);
}if(Ab>=AU.hour){Ag.setUTCMinutes(0);
}if(Ab>=AU.day){Ag.setUTCHours(0);
}if(Ab>=AU.day*4){Ag.setUTCDate(1);
}if(Ab>=AU.year){Ag.setUTCMonth(0);
}var Ak=0,Aj=Number.NaN,Ad;
do{Ad=Aj;
Aj=Ag.getTime();
Ah.push({v:Aj,label:Ac.tickFormatter(Aj,Ac)});
if(Ai=="month"){if(Af<1){Ag.setUTCDate(1);
var Aa=Ag.getTime();
Ag.setUTCMonth(Ag.getUTCMonth()+1);
var Ae=Ag.getTime();
Ag.setTime(Aj+Ak*AU.hour+(Ae-Aa)*Af);
Ak=Ag.getUTCHours();
Ag.setUTCHours(0);
}else{Ag.setUTCMonth(Ag.getUTCMonth()+Af);
}}else{if(Ai=="year"){Ag.setUTCFullYear(Ag.getUTCFullYear()+Af);
}else{Ag.setTime(Aj+Ab);
}}}while(Aj<Ac.max&&Aj!=Ad);
return Ah;
};
AW=function(Aa,Ad){var Af=new Date(Aa);
if(AS.timeformat!=null){return C.plot.formatDate(Af,AS.timeformat,AS.monthNames);
}var Ab=Ad.tickSize[0]*AU[Ad.tickSize[1]];
var Ac=Ad.max-Ad.min;
var Ae=(AS.twelveHourClock)?" %p":"";
if(Ab<AU.minute){fmt="%h:%M:%S"+Ae;
}else{if(Ab<AU.day){if(Ac<2*AU.day){fmt="%h:%M"+Ae;
}else{fmt="%b %d %h:%M"+Ae;
}}else{if(Ab<AU.month){fmt="%b %d";
}else{if(Ab<AU.year){if(Ac<AU.year){fmt="%b";
}else{fmt="%b %y";
}}else{fmt="%y";
}}}}return C.plot.formatDate(Af,fmt,AS.monthNames);
};
}else{var AK=AS.tickDecimals;
var AQ=-Math.floor(Math.log(AX)/Math.LN10);
if(AK!=null&&AQ>AK){AQ=AK;
}AM=Math.pow(10,-AQ);
AL=AX/AM;
if(AL<1.5){AZ=1;
}else{if(AL<3){AZ=2;
if(AL>2.25&&(AK==null||AQ+1<=AK)){AZ=2.5;
++AQ;
}}else{if(AL<7.5){AZ=5;
}else{AZ=10;
}}}AZ*=AM;
if(AS.minTickSize!=null&&AZ<AS.minTickSize){AZ=AS.minTickSize;
}if(AS.tickSize!=null){AZ=AS.tickSize;
}AP.tickDecimals=Math.max(0,(AK!=null)?AK:AQ);
AT=function(Ac){var Ae=[];
var Af=A(Ac.min,Ac.tickSize),Ab=0,Aa=Number.NaN,Ad;
do{Ad=Aa;
Aa=Af+Ab*Ac.tickSize;
Ae.push({v:Aa,label:Ac.tickFormatter(Aa,Ac)});
++Ab;
}while(Aa<Ac.max&&Aa!=Ad);
return Ae;
};
AW=function(Aa,Ab){return Aa.toFixed(Ab.tickDecimals);
};
}AP.tickSize=AV?[AZ,AV]:AZ;
AP.tickGenerator=AT;
if(C.isFunction(AS.tickFormatter)){AP.tickFormatter=function(Aa,Ab){return""+AS.tickFormatter(Aa,Ab);
};
}else{AP.tickFormatter=AW;
}}function p(AO,AQ){AO.ticks=[];
if(!AO.used){return;
}if(AQ.ticks==null){AO.ticks=AO.tickGenerator(AO);
}else{if(typeof AQ.ticks=="number"){if(AQ.ticks>0){AO.ticks=AO.tickGenerator(AO);
}}else{if(AQ.ticks){var AP=AQ.ticks;
if(C.isFunction(AP)){AP=AP({min:AO.min,max:AO.max});
}var AN,AK;
for(AN=0;
AN<AP.length;
++AN){var AL=null;
var AM=AP[AN];
if(typeof AM=="object"){AK=AM[0];
if(AM.length>1){AL=AM[1];
}}else{AK=AM;
}if(AL==null){AL=AO.tickFormatter(AK,AO);
}AO.ticks[AN]={v:AK,label:AL};
}}}}if(AQ.autoscaleMargin!=null&&AO.ticks.length>0){if(AQ.min==null){AO.min=Math.min(AO.min,AO.ticks[0].v);
}if(AQ.max==null&&AO.ticks.length>1){AO.max=Math.max(AO.max,AO.ticks[AO.ticks.length-1].v);
}}}function AH(){Y.clearRect(0,0,y,Q);
var AL=g.grid;
if(AL.show&&!AL.aboveData){S();
}for(var AK=0;
AK<O.length;
++AK){AA(O[AK]);
}Z(L.draw,[Y]);
if(AL.show&&AL.aboveData){S();
}}function N(AL,AR){var AO=AR+"axis",AK=AR+"2axis",AN,AQ,AP,AM;
if(AL[AO]){AN=s[AO];
AQ=AL[AO].from;
AP=AL[AO].to;
}else{if(AL[AK]){AN=s[AK];
AQ=AL[AK].from;
AP=AL[AK].to;
}else{AN=s[AO];
AQ=AL[AR+"1"];
AP=AL[AR+"2"];
}}if(AQ!=null&&AP!=null&&AQ>AP){return{from:AP,to:AQ,axis:AN};
}return{from:AQ,to:AP,axis:AN};
}function S(){var AO;
Y.save();
Y.translate(e.left,e.top);
if(g.grid.backgroundColor){Y.fillStyle=R(g.grid.backgroundColor,t,0,"rgba(255, 255, 255, 0)");
Y.fillRect(0,0,I,t);
}var AL=g.grid.markings;
if(AL){if(C.isFunction(AL)){AL=AL({xmin:s.xaxis.min,xmax:s.xaxis.max,ymin:s.yaxis.min,ymax:s.yaxis.max,xaxis:s.xaxis,yaxis:s.yaxis,x2axis:s.x2axis,y2axis:s.y2axis});
}for(AO=0;
AO<AL.length;
++AO){var AK=AL[AO],AQ=N(AK,"x"),AN=N(AK,"y");
if(AQ.from==null){AQ.from=AQ.axis.min;
}if(AQ.to==null){AQ.to=AQ.axis.max;
}if(AN.from==null){AN.from=AN.axis.min;
}if(AN.to==null){AN.to=AN.axis.max;
}if(AQ.to<AQ.axis.min||AQ.from>AQ.axis.max||AN.to<AN.axis.min||AN.from>AN.axis.max){continue;
}AQ.from=Math.max(AQ.from,AQ.axis.min);
AQ.to=Math.min(AQ.to,AQ.axis.max);
AN.from=Math.max(AN.from,AN.axis.min);
AN.to=Math.min(AN.to,AN.axis.max);
if(AQ.from==AQ.to&&AN.from==AN.to){continue;
}AQ.from=AQ.axis.p2c(AQ.from);
AQ.to=AQ.axis.p2c(AQ.to);
AN.from=AN.axis.p2c(AN.from);
AN.to=AN.axis.p2c(AN.to);
if(AQ.from==AQ.to||AN.from==AN.to){Y.beginPath();
Y.strokeStyle=AK.color||g.grid.markingsColor;
Y.lineWidth=AK.lineWidth||g.grid.markingsLineWidth;
Y.moveTo(AQ.from,AN.from);
Y.lineTo(AQ.to,AN.to);
Y.stroke();
}else{Y.fillStyle=AK.color||g.grid.markingsColor;
Y.fillRect(AQ.from,AN.to,AQ.to-AQ.from,AN.from-AN.to);
}}}Y.lineWidth=1;
Y.strokeStyle=g.grid.tickColor;
Y.beginPath();
var AM,AP=s.xaxis;
for(AO=0;
AO<AP.ticks.length;
++AO){AM=AP.ticks[AO].v;
if(AM<=AP.min||AM>=s.xaxis.max){continue;
}Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,0);
Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,t);
}AP=s.yaxis;
for(AO=0;
AO<AP.ticks.length;
++AO){AM=AP.ticks[AO].v;
if(AM<=AP.min||AM>=AP.max){continue;
}Y.moveTo(0,Math.floor(AP.p2c(AM))+Y.lineWidth/2);
Y.lineTo(I,Math.floor(AP.p2c(AM))+Y.lineWidth/2);
}AP=s.x2axis;
for(AO=0;
AO<AP.ticks.length;
++AO){AM=AP.ticks[AO].v;
if(AM<=AP.min||AM>=AP.max){continue;
}Y.moveTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,-5);
Y.lineTo(Math.floor(AP.p2c(AM))+Y.lineWidth/2,5);
}AP=s.y2axis;
for(AO=0;
AO<AP.ticks.length;
++AO){AM=AP.ticks[AO].v;
if(AM<=AP.min||AM>=AP.max){continue;
}Y.moveTo(I-5,Math.floor(AP.p2c(AM))+Y.lineWidth/2);
Y.lineTo(I+5,Math.floor(AP.p2c(AM))+Y.lineWidth/2);
}Y.stroke();
if(g.grid.borderWidth){var AR=g.grid.borderWidth;
Y.lineWidth=AR;
Y.strokeStyle=g.grid.borderColor;
Y.strokeRect(-AR/2,-AR/2,I+AR,t+AR);
}Y.restore();
}function h(){l.find(".tickLabels").remove();
var AK=['<div class="tickLabels" style="font-size:smaller;color:'+g.grid.color+'">'];
function AM(AP,AQ){for(var AO=0;
AO<AP.ticks.length;
++AO){var AN=AP.ticks[AO];
if(!AN.label||AN.v<AP.min||AN.v>AP.max){continue;
}AK.push(AQ(AN,AP));
}}var AL=g.grid.labelMargin+g.grid.borderWidth;
AM(s.xaxis,function(AN,AO){return'<div style="position:absolute;top:'+(e.top+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>";
});
AM(s.yaxis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;right:"+(e.right+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:right" class="tickLabel">'+AN.label+"</div>";
});
AM(s.x2axis,function(AN,AO){return'<div style="position:absolute;bottom:'+(e.bottom+t+AL)+"px;left:"+Math.round(e.left+AO.p2c(AN.v)-AO.labelWidth/2)+"px;width:"+AO.labelWidth+'px;text-align:center" class="tickLabel">'+AN.label+"</div>";
});
AM(s.y2axis,function(AN,AO){return'<div style="position:absolute;top:'+Math.round(e.top+AO.p2c(AN.v)-AO.labelHeight/2)+"px;left:"+(e.left+I+AL)+"px;width:"+AO.labelWidth+'px;text-align:left" class="tickLabel">'+AN.label+"</div>";
});
AK.push("</div>");
l.append(AK.join(""));
}function AA(AK){if(AK.lines.show){a(AK);
}if(AK.bars.show){n(AK);
}if(AK.points.show){o(AK);
}}function a(AN){function AM(AY,AZ,AR,Ad,Ac){var Ae=AY.points,AS=AY.pointsize,AW=null,AV=null;
Y.beginPath();
for(var AX=AS;
AX<Ae.length;
AX+=AS){var AU=Ae[AX-AS],Ab=Ae[AX-AS+1],AT=Ae[AX],Aa=Ae[AX+1];
if(AU==null||AT==null){continue;
}if(Ab<=Aa&&Ab<Ac.min){if(Aa<Ac.min){continue;
}AU=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;
Ab=Ac.min;
}else{if(Aa<=Ab&&Aa<Ac.min){if(Ab<Ac.min){continue;
}AT=(Ac.min-Ab)/(Aa-Ab)*(AT-AU)+AU;
Aa=Ac.min;
}}if(Ab>=Aa&&Ab>Ac.max){if(Aa>Ac.max){continue;
}AU=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;
Ab=Ac.max;
}else{if(Aa>=Ab&&Aa>Ac.max){if(Ab>Ac.max){continue;
}AT=(Ac.max-Ab)/(Aa-Ab)*(AT-AU)+AU;
Aa=Ac.max;
}}if(AU<=AT&&AU<Ad.min){if(AT<Ad.min){continue;
}Ab=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;
AU=Ad.min;
}else{if(AT<=AU&&AT<Ad.min){if(AU<Ad.min){continue;
}Aa=(Ad.min-AU)/(AT-AU)*(Aa-Ab)+Ab;
AT=Ad.min;
}}if(AU>=AT&&AU>Ad.max){if(AT>Ad.max){continue;
}Ab=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;
AU=Ad.max;
}else{if(AT>=AU&&AT>Ad.max){if(AU>Ad.max){continue;
}Aa=(Ad.max-AU)/(AT-AU)*(Aa-Ab)+Ab;
AT=Ad.max;
}}if(AU!=AW||Ab!=AV){Y.moveTo(Ad.p2c(AU)+AZ,Ac.p2c(Ab)+AR);
}AW=AT;
AV=Aa;
Y.lineTo(Ad.p2c(AT)+AZ,Ac.p2c(Aa)+AR);
}Y.stroke();
}function AO(AX,Ae,Ac){var Af=AX.points,AR=AX.pointsize,AS=Math.min(Math.max(0,Ac.min),Ac.max),Aa,AV=0,Ad=false;
for(var AW=AR;
AW<Af.length;
AW+=AR){var AU=Af[AW-AR],Ab=Af[AW-AR+1],AT=Af[AW],AZ=Af[AW+1];
if(Ad&&AU!=null&&AT==null){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));
Y.fill();
Ad=false;
continue;
}if(AU==null||AT==null){continue;
}if(AU<=AT&&AU<Ae.min){if(AT<Ae.min){continue;
}Ab=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;
AU=Ae.min;
}else{if(AT<=AU&&AT<Ae.min){if(AU<Ae.min){continue;
}AZ=(Ae.min-AU)/(AT-AU)*(AZ-Ab)+Ab;
AT=Ae.min;
}}if(AU>=AT&&AU>Ae.max){if(AT>Ae.max){continue;
}Ab=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;
AU=Ae.max;
}else{if(AT>=AU&&AT>Ae.max){if(AU>Ae.max){continue;
}AZ=(Ae.max-AU)/(AT-AU)*(AZ-Ab)+Ab;
AT=Ae.max;
}}if(!Ad){Y.beginPath();
Y.moveTo(Ae.p2c(AU),Ac.p2c(AS));
Ad=true;
}if(Ab>=Ac.max&&AZ>=Ac.max){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.max));
Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.max));
AV=AT;
continue;
}else{if(Ab<=Ac.min&&AZ<=Ac.min){Y.lineTo(Ae.p2c(AU),Ac.p2c(Ac.min));
Y.lineTo(Ae.p2c(AT),Ac.p2c(Ac.min));
AV=AT;
continue;
}}var Ag=AU,AY=AT;
if(Ab<=AZ&&Ab<Ac.min&&AZ>=Ac.min){AU=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;
Ab=Ac.min;
}else{if(AZ<=Ab&&AZ<Ac.min&&Ab>=Ac.min){AT=(Ac.min-Ab)/(AZ-Ab)*(AT-AU)+AU;
AZ=Ac.min;
}}if(Ab>=AZ&&Ab>Ac.max&&AZ<=Ac.max){AU=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;
Ab=Ac.max;
}else{if(AZ>=Ab&&AZ>Ac.max&&Ab<=Ac.max){AT=(Ac.max-Ab)/(AZ-Ab)*(AT-AU)+AU;
AZ=Ac.max;
}}if(AU!=Ag){if(Ab<=Ac.min){Aa=Ac.min;
}else{Aa=Ac.max;
}Y.lineTo(Ae.p2c(Ag),Ac.p2c(Aa));
Y.lineTo(Ae.p2c(AU),Ac.p2c(Aa));
}Y.lineTo(Ae.p2c(AU),Ac.p2c(Ab));
Y.lineTo(Ae.p2c(AT),Ac.p2c(AZ));
if(AT!=AY){if(AZ<=Ac.min){Aa=Ac.min;
}else{Aa=Ac.max;
}Y.lineTo(Ae.p2c(AT),Ac.p2c(Aa));
Y.lineTo(Ae.p2c(AY),Ac.p2c(Aa));
}AV=Math.max(AT,AY);
}if(Ad){Y.lineTo(Ae.p2c(AV),Ac.p2c(AS));
Y.fill();
}}Y.save();
Y.translate(e.left,e.top);
Y.lineJoin="round";
var AP=AN.lines.lineWidth,AK=AN.shadowSize;
if(AP>0&&AK>0){Y.lineWidth=AK;
Y.strokeStyle="rgba(0,0,0,0.1)";
var AQ=Math.PI/18;
AM(AN.datapoints,Math.sin(AQ)*(AP/2+AK/2),Math.cos(AQ)*(AP/2+AK/2),AN.xaxis,AN.yaxis);
Y.lineWidth=AK/2;
AM(AN.datapoints,Math.sin(AQ)*(AP/2+AK/4),Math.cos(AQ)*(AP/2+AK/4),AN.xaxis,AN.yaxis);
}Y.lineWidth=AP;
Y.strokeStyle=AN.color;
var AL=V(AN.lines,AN.color,0,t);
if(AL){Y.fillStyle=AL;
AO(AN.datapoints,AN.xaxis,AN.yaxis);
}if(AP>0){AM(AN.datapoints,0,0,AN.xaxis,AN.yaxis);
}Y.restore();
}function o(AN){function AP(AU,AT,Ab,AR,AV,AZ,AY){var Aa=AU.points,AQ=AU.pointsize;
for(var AS=0;
AS<Aa.length;
AS+=AQ){var AX=Aa[AS],AW=Aa[AS+1];
if(AX==null||AX<AZ.min||AX>AZ.max||AW<AY.min||AW>AY.max){continue;
}Y.beginPath();
Y.arc(AZ.p2c(AX),AY.p2c(AW)+AR,AT,0,AV,false);
if(Ab){Y.fillStyle=Ab;
Y.fill();
}Y.stroke();
}}Y.save();
Y.translate(e.left,e.top);
var AO=AN.lines.lineWidth,AL=AN.shadowSize,AK=AN.points.radius;
if(AO>0&&AL>0){var AM=AL/2;
Y.lineWidth=AM;
Y.strokeStyle="rgba(0,0,0,0.1)";
AP(AN.datapoints,AK,null,AM+AM/2,Math.PI,AN.xaxis,AN.yaxis);
Y.strokeStyle="rgba(0,0,0,0.2)";
AP(AN.datapoints,AK,null,AM/2,Math.PI,AN.xaxis,AN.yaxis);
}Y.lineWidth=AO;
Y.strokeStyle=AN.color;
AP(AN.datapoints,AK,V(AN.points,AN.color),0,2*Math.PI,AN.xaxis,AN.yaxis);
Y.restore();
}function AB(AV,AU,Ad,AQ,AY,AN,AL,AT,AS,Ac,AZ){var AM,Ab,AR,AX,AO,AK,AW,AP,Aa;
if(AZ){AP=AK=AW=true;
AO=false;
AM=Ad;
Ab=AV;
AX=AU+AQ;
AR=AU+AY;
if(Ab<AM){Aa=Ab;
Ab=AM;
AM=Aa;
AO=true;
AK=false;
}}else{AO=AK=AW=true;
AP=false;
AM=AV+AQ;
Ab=AV+AY;
AR=Ad;
AX=AU;
if(AX<AR){Aa=AX;
AX=AR;
AR=Aa;
AP=true;
AW=false;
}}if(Ab<AT.min||AM>AT.max||AX<AS.min||AR>AS.max){return;
}if(AM<AT.min){AM=AT.min;
AO=false;
}if(Ab>AT.max){Ab=AT.max;
AK=false;
}if(AR<AS.min){AR=AS.min;
AP=false;
}if(AX>AS.max){AX=AS.max;
AW=false;
}AM=AT.p2c(AM);
AR=AS.p2c(AR);
Ab=AT.p2c(Ab);
AX=AS.p2c(AX);
if(AL){Ac.beginPath();
Ac.moveTo(AM,AR);
Ac.lineTo(AM,AX);
Ac.lineTo(Ab,AX);
Ac.lineTo(Ab,AR);
Ac.fillStyle=AL(AR,AX);
Ac.fill();
}if(AO||AK||AW||AP){Ac.beginPath();
Ac.moveTo(AM,AR+AN);
if(AO){Ac.lineTo(AM,AX+AN);
}else{Ac.moveTo(AM,AX+AN);
}if(AW){Ac.lineTo(Ab,AX+AN);
}else{Ac.moveTo(Ab,AX+AN);
}if(AK){Ac.lineTo(Ab,AR+AN);
}else{Ac.moveTo(Ab,AR+AN);
}if(AP){Ac.lineTo(AM,AR+AN);
}else{Ac.moveTo(AM,AR+AN);
}Ac.stroke();
}}function n(AM){function AL(AS,AR,AU,AP,AT,AW,AV){var AX=AS.points,AO=AS.pointsize;
for(var AQ=0;
AQ<AX.length;
AQ+=AO){if(AX[AQ]==null){continue;
}AB(AX[AQ],AX[AQ+1],AX[AQ+2],AR,AU,AP,AT,AW,AV,Y,AM.bars.horizontal);
}}Y.save();
Y.translate(e.left,e.top);
Y.lineWidth=AM.bars.lineWidth;
Y.strokeStyle=AM.color;
var AK=AM.bars.align=="left"?0:-AM.bars.barWidth/2;
var AN=AM.bars.fill?function(AO,AP){return V(AM.bars,AM.color,AO,AP);
}:null;
AL(AM.datapoints,AK,AK+AM.bars.barWidth,0,AN,AM.xaxis,AM.yaxis);
Y.restore();
}function V(AM,AK,AL,AO){var AN=AM.fill;
if(!AN){return null;
}if(AM.fillColor){return R(AM.fillColor,AL,AO,AK);
}var AP=C.color.parse(AK);
AP.a=typeof AN=="number"?AN:0.4;
AP.normalize();
return AP.toString();
}function AI(){l.find(".legend").remove();
if(!g.legend.show){return;
}var AP=[],AN=false,AV=g.legend.labelFormatter,AU,AR;
for(i=0;
i<O.length;
++i){AU=O[i];
AR=AU.label;
if(!AR){continue;
}if(i%g.legend.noColumns==0){if(AN){AP.push("</tr>");
}AP.push("<tr>");
AN=true;
}if(AV){AR=AV(AR,AU);
}AP.push('<td class="legendColorBox"><div style="border:1px solid '+g.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+AU.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+AR+"</td>");
}if(AN){AP.push("</tr>");
}if(AP.length==0){return;
}var AT='<table style="font-size:smaller;color:'+g.grid.color+'">'+AP.join("")+"</table>";
if(g.legend.container!=null){C(g.legend.container).html(AT);
}else{var AQ="",AL=g.legend.position,AM=g.legend.margin;
if(AM[0]==null){AM=[AM,AM];
}if(AL.charAt(0)=="n"){AQ+="top:"+(AM[1]+e.top)+"px;";
}else{if(AL.charAt(0)=="s"){AQ+="bottom:"+(AM[1]+e.bottom)+"px;";
}}if(AL.charAt(1)=="e"){AQ+="right:"+(AM[0]+e.right)+"px;";
}else{if(AL.charAt(1)=="w"){AQ+="left:"+(AM[0]+e.left)+"px;";
}}var AS=C('<div class="legend">'+AT.replace('style="','style="position:absolute;'+AQ+";")+"</div>").appendTo(l);
if(g.legend.backgroundOpacity!=0){var AO=g.legend.backgroundColor;
if(AO==null){AO=g.grid.backgroundColor;
if(AO&&typeof AO=="string"){AO=C.color.parse(AO);
}else{AO=C.color.extract(AS,"background-color");
}AO.a=1;
AO=AO.toString();
}var AK=AS.children();
C('<div style="position:absolute;width:'+AK.width()+"px;height:"+AK.height()+"px;"+AQ+"background-color:"+AO+';"> </div>').prependTo(AS).css("opacity",g.legend.backgroundOpacity);
}}}var w=[],J=null;
function AF(AR,AP,AM){var AX=g.grid.mouseActiveRadius,Aj=AX*AX+1,Ah=null,Aa=false,Af,Ad;
for(Af=0;
Af<O.length;
++Af){if(!AM(O[Af])){continue;
}var AY=O[Af],AQ=AY.xaxis,AO=AY.yaxis,Ae=AY.datapoints.points,Ac=AY.datapoints.pointsize,AZ=AQ.c2p(AR),AW=AO.c2p(AP),AL=AX/AQ.scale,AK=AX/AO.scale;
if(AY.lines.show||AY.points.show){for(Ad=0;
Ad<Ae.length;
Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+1];
if(AT==null){continue;
}if(AT-AZ>AL||AT-AZ<-AL||AS-AW>AK||AS-AW<-AK){continue;
}var AV=Math.abs(AQ.p2c(AT)-AR),AU=Math.abs(AO.p2c(AS)-AP),Ab=AV*AV+AU*AU;
if(Ab<=Aj){Aj=Ab;
Ah=[Af,Ad/Ac];
}}}if(AY.bars.show&&!Ah){var AN=AY.bars.align=="left"?0:-AY.bars.barWidth/2,Ag=AN+AY.bars.barWidth;
for(Ad=0;
Ad<Ae.length;
Ad+=Ac){var AT=Ae[Ad],AS=Ae[Ad+1],Ai=Ae[Ad+2];
if(AT==null){continue;
}if(O[Af].bars.horizontal?(AZ<=Math.max(Ai,AT)&&AZ>=Math.min(Ai,AT)&&AW>=AS+AN&&AW<=AS+Ag):(AZ>=AT+AN&&AZ<=AT+Ag&&AW>=Math.min(Ai,AS)&&AW<=Math.max(Ai,AS))){Ah=[Af,Ad/Ac];
}}}}if(Ah){Af=Ah[0];
Ad=Ah[1];
Ac=O[Af].datapoints.pointsize;
return{datapoint:O[Af].datapoints.points.slice(Ad*Ac,(Ad+1)*Ac),dataIndex:Ad,series:O[Af],seriesIndex:Af};
}return null;
}function D(AK){if(g.grid.hoverable){H("plothover",AK,function(AL){return AL.hoverable!=false;
});
}}function d(AK){H("plotclick",AK,function(AL){return AL.clickable!=false;
});
}function H(AL,AK,AM){var AN=AD.offset(),AS={pageX:AK.pageX,pageY:AK.pageY},AQ=AK.pageX-AN.left-e.left,AO=AK.pageY-AN.top-e.top;
if(s.xaxis.used){AS.x=s.xaxis.c2p(AQ);
}if(s.yaxis.used){AS.y=s.yaxis.c2p(AO);
}if(s.x2axis.used){AS.x2=s.x2axis.c2p(AQ);
}if(s.y2axis.used){AS.y2=s.y2axis.c2p(AO);
}var AT=AF(AQ,AO,AM);
if(AT){AT.pageX=parseInt(AT.series.xaxis.p2c(AT.datapoint[0])+AN.left+e.left);
AT.pageY=parseInt(AT.series.yaxis.p2c(AT.datapoint[1])+AN.top+e.top);
}if(g.grid.autoHighlight){for(var AP=0;
AP<w.length;
++AP){var AR=w[AP];
if(AR.auto==AL&&!(AT&&AR.series==AT.series&&AR.point==AT.datapoint)){x(AR.series,AR.point);
}}if(AT){AE(AT.series,AT.datapoint,AL);
}}l.trigger(AL,[AS,AT]);
}function q(){if(!J){J=setTimeout(v,30);
}}function v(){J=null;
AJ.save();
AJ.clearRect(0,0,y,Q);
AJ.translate(e.left,e.top);
var AL,AK;
for(AL=0;
AL<w.length;
++AL){AK=w[AL];
if(AK.series.bars.show){z(AK.series,AK.point);
}else{u(AK.series,AK.point);
}}AJ.restore();
Z(L.drawOverlay,[AJ]);
}function AE(AM,AK,AN){if(typeof AM=="number"){AM=O[AM];
}if(typeof AK=="number"){AK=AM.data[AK];
}var AL=j(AM,AK);
if(AL==-1){w.push({series:AM,point:AK,auto:AN});
q();
}else{if(!AN){w[AL].auto=false;
}}}function x(AM,AK){if(AM==null&&AK==null){w=[];
q();
}if(typeof AM=="number"){AM=O[AM];
}if(typeof AK=="number"){AK=AM.data[AK];
}var AL=j(AM,AK);
if(AL!=-1){w.splice(AL,1);
q();
}}function j(AM,AN){for(var AK=0;
AK<w.length;
++AK){var AL=w[AK];
if(AL.series==AM&&AL.point[0]==AN[0]&&AL.point[1]==AN[1]){return AK;
}}return -1;
}function u(AN,AM){var AL=AM[0],AR=AM[1],AQ=AN.xaxis,AP=AN.yaxis;
if(AL<AQ.min||AL>AQ.max||AR<AP.min||AR>AP.max){return;
}var AO=AN.points.radius+AN.points.lineWidth/2;
AJ.lineWidth=AO;
AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();
var AK=1.5*AO;
AJ.beginPath();
AJ.arc(AQ.p2c(AL),AP.p2c(AR),AK,0,2*Math.PI,false);
AJ.stroke();
}function z(AN,AK){AJ.lineWidth=AN.bars.lineWidth;
AJ.strokeStyle=C.color.parse(AN.color).scale("a",0.5).toString();
var AM=C.color.parse(AN.color).scale("a",0.5).toString();
var AL=AN.bars.align=="left"?0:-AN.bars.barWidth/2;
AB(AK[0],AK[1],AK[2]||0,AL,AL+AN.bars.barWidth,0,function(){return AM;
},AN.xaxis,AN.yaxis,AJ,AN.bars.horizontal);
}function R(AM,AL,AQ,AO){if(typeof AM=="string"){return AM;
}else{var AP=Y.createLinearGradient(0,AQ,0,AL);
for(var AN=0,AK=AM.colors.length;
AN<AK;
++AN){var AR=AM.colors[AN];
if(typeof AR!="string"){AR=C.color.parse(AO).scale("rgb",AR.brightness);
AR.a*=AR.opacity;
AR=AR.toString();
}AP.addColorStop(AN/(AK-1),AR);
}return AP;
}}}C.plot=function(G,E,D){var F=new B(C(G),E,D,C.plot.plugins);
return F;
};
C.plot.plugins=[];
C.plot.formatDate=function(H,E,G){var L=function(N){N=""+N;
return N.length==1?"0"+N:N;
};
var D=[];
var M=false;
var K=H.getUTCHours();
var I=K<12;
if(G==null){G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
}if(E.search(/%p|%P/)!=-1){if(K>12){K=K-12;
}else{if(K==0){K=12;
}}}for(var F=0;
F<E.length;
++F){var J=E.charAt(F);
if(M){switch(J){case"h":J=""+K;
break;
case"H":J=L(K);
break;
case"M":J=L(H.getUTCMinutes());
break;
case"S":J=L(H.getUTCSeconds());
break;
case"d":J=""+H.getUTCDate();
break;
case"m":J=""+(H.getUTCMonth()+1);
break;
case"y":J=""+H.getUTCFullYear();
break;
case"b":J=""+G[H.getUTCMonth()];
break;
case"p":J=(I)?("am"):("pm");
break;
case"P":J=(I)?("AM"):("PM");
break;
}D.push(J);
M=false;
}else{if(J=="%"){M=true;
}else{D.push(J);
}}}return D.join("");
};
function A(E,D){return D*Math.floor(E/D);
}})(jQuery);
(function($){var options={series:{stack:null}};
function init(plot){function findMatchingSeries(s,allseries){var res=null;
for(var i=0;
i<allseries.length;
++i){if(s==allseries[i]){break;
}if(allseries[i].stack==s.stack){res=allseries[i];
}}return res;
}function stackData(plot,s,datapoints){if(s.stack==null){return;
}var other=findMatchingSeries(s,plot.getData());
if(!other){return;
}var ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],px,py,intery,qx,qy,withlines=s.lines.show,withbars=s.bars.show,withsteps=withlines&&s.lines.steps,i=0,j=0,l;
while(true){if(i>=points.length){break;
}l=newpoints.length;
if(j>=otherpoints.length||otherpoints[j]==null||points[i]==null){for(m=0;
m<ps;
++m){newpoints.push(points[i+m]);
}i+=ps;
}else{px=points[i];
py=points[i+1];
qx=otherpoints[j];
qy=otherpoints[j+1];
if(px==qx){for(m=0;
m<ps;
++m){newpoints.push(points[i+m]);
}newpoints[l+1]+=qy;
i+=ps;
j+=otherps;
}else{if(px>qx){if(withlines&&i>0&&points[i-ps]!=null){intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px);
newpoints.push(qx);
newpoints.push(intery+qy);
for(m=2;
m<ps;
++m){newpoints.push(points[i+m]);
}}j+=otherps;
}else{for(m=0;
m<ps;
++m){newpoints.push(points[i+m]);
}if(withlines&&j>0&&otherpoints[j-ps]!=null){intery=qy+(otherpoints[j-ps+1]-qy)*(px-qx)/(otherpoints[j-ps]-qx);
newpoints[l+1]+=intery;
}i+=ps;
}}if(l!=newpoints.length&&withbars){newpoints[l+2]+=qy;
}}if(withsteps&&l!=newpoints.length&&l>0&&newpoints[l]!=null&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;
m<ps;
++m){newpoints[l+ps+m]=newpoints[l+m];
}newpoints[l+1]=newpoints[l-ps+1];
}}datapoints.points=newpoints;
}plot.hooks.processDatapoints.push(stackData);
}$.plot.plugins.push({init:init,options:options,name:"stack",version:"1.0"});
})(jQuery);
Function.prototype.method=function(name,func){this.prototype[name]=func;
return this;
};
Function.method("inherits",function(Parent){var d={},p=(this.prototype=new Parent());
this.method("uber",function uber(name){if(!(name in d)){d[name]=0;
}var f,r,t=d[name],v=Parent.prototype;
if(t){while(t){v=v.constructor.prototype;
t-=1;
}f=v[name];
}else{f=p[name];
if(f==this[name]){f=v[name];
}}d[name]+=1;
r=f.apply(this,Array.prototype.slice.apply(arguments,[1]));
d[name]-=1;
return r;
});
return this;
});
function MPageComponent(){this.m_componentId=0;
this.m_reportId=0;
this.m_label="";
this.m_column=0;
this.m_sequence=0;
this.m_link="";
this.m_totalResults=false;
this.m_xOFy=false;
this.m_isExpanded=false;
this.m_isAlwaysExpanded=false;
this.m_scrollNumber=0;
this.m_isScrollEnabled=false;
this.m_styles=null;
this.m_groups=null;
this.m_pageGroupSeq=0;
this.m_lookbackDays=0;
this.m_newLink=false;
this.criterion=null;
this.m_isPlusAdd=false;
this.m_scope=0;
this.m_rootComponentNode=null;
this.m_sectionContentNode=null;
this.m_compLoadTimerName="";
this.m_compRenderTimerName="";
this.m_includeLineNumber=false;
this.m_lookbackUnitTypeFlag=0;
this.m_lookbackUnits=0;
this.m_dateFormat=2;
this.m_isCustomizeView=false;
this.m_menuItems=null;
this.m_displayFilters=null;
this.m_AutoSuggestScript="";
this.m_AutoSuggestAddTimerName="";
MPageComponent.method("isDisplayable",function(){if(this.m_displayFilters!==null&&this.m_displayFilters.length>0){for(var x=this.m_displayFilters.length;
x--;
){var displayFilter=this.m_displayFilters[x];
if(displayFilter.checkFilters()===false){CERN_EventListener.removeAllListeners(this,this);
return false;
}}}return true;
});
MPageComponent.method("getDisplayFilters",function(){return this.m_displayFilters;
});
MPageComponent.method("setDisplayFilters",function(value){this.m_displayFilters=value;
});
MPageComponent.method("addDisplayFilter",function(value){if(this.m_displayFilters===null){this.m_displayFilters=[];
}this.m_displayFilters.push(value);
});
MPageComponent.method("getMenuItems",function(){return this.m_menuItems;
});
MPageComponent.method("setMenuItems",function(value){this.m_menuItems=value;
});
MPageComponent.method("addMenuItem",function(value){if(this.m_menuItems===null){this.m_menuItems=[];
}this.m_menuItems.push(value);
});
MPageComponent.method("getCustomizeView",function(){return this.m_isCustomizeView;
});
MPageComponent.method("setCustomizeView",function(value){this.m_isCustomizeView=value;
});
MPageComponent.method("InsertData",function(){alert("ERROR: InsertData has not been implemented within the component");
});
MPageComponent.method("HandleSuccess",function(){alert("ERROR: HandleSuccess has not been implemented within the component");
});
MPageComponent.method("openTab",function(){alert("ERROR: openTab has not been implemented within the component");
});
MPageComponent.method("getComponentLoadTimerName",function(){return(this.m_compLoadTimerName);
});
MPageComponent.method("setComponentLoadTimerName",function(value){this.m_compLoadTimerName=value;
});
MPageComponent.method("getComponentRenderTimerName",function(){return(this.m_compRenderTimerName);
});
MPageComponent.method("setComponentRenderTimerName",function(value){this.m_compRenderTimerName=value;
});
MPageComponent.method("getRootComponentNode",function(){if(this.m_rootComponentNode===null){var style=this.getStyles();
this.m_rootComponentNode=_g(style.getId());
}return(this.m_rootComponentNode);
});
MPageComponent.method("setRootComponentNode",function(value){this.m_rootComponentNode=value;
});
MPageComponent.method("getSectionContentNode",function(){if(this.m_sectionContentNode===null){var style=this.getStyles();
this.m_sectionContentNode=_g(style.getContentId());
}return(this.m_sectionContentNode);
});
MPageComponent.method("setSectionContentNode",function(value){this.m_sectionContentNode=value;
});
MPageComponent.method("getMPageName",function(){return(this.m_MPageName);
});
MPageComponent.method("setMPageName",function(value){this.m_MPageName=value;
});
MPageComponent.method("getScope",function(){return(this.m_scope);
});
MPageComponent.method("setScope",function(value){this.m_scope=value;
});
MPageComponent.method("isPlusAddEnabled",function(){return(this.m_isPlusAdd);
});
MPageComponent.method("setPlusAddEnabled",function(value){this.m_isPlusAdd=value;
});
MPageComponent.method("getCriterion",function(){return(this.criterion);
});
MPageComponent.method("setCriterion",function(value){this.criterion=value;
});
MPageComponent.method("isNewLink",function(){return(this.m_newLink);
});
MPageComponent.method("setNewLink",function(value){this.m_newLink=value;
});
MPageComponent.method("getPageGroupSequence",function(){return(this.m_pageGroupSeq);
});
MPageComponent.method("setPageGroupSequence",function(value){this.m_pageGroupSeq=value;
});
MPageComponent.method("getLookbackDays",function(){return(this.m_lookbackDays);
});
MPageComponent.method("setLookbackDays",function(value){this.m_lookbackDays=value;
});
MPageComponent.method("getComponentId",function(){return(this.m_componentId);
});
MPageComponent.method("setComponentId",function(value){this.m_componentId=value;
var styles=this.getStyles();
if(styles!==null){styles.setComponentId(value);
}});
MPageComponent.method("getReportId",function(){return(this.m_reportId);
});
MPageComponent.method("setReportId",function(value){this.m_reportId=value;
});
MPageComponent.method("getLabel",function(){return(this.m_label);
});
MPageComponent.method("setLabel",function(value){this.m_label=value;
});
MPageComponent.method("getColumn",function(){return(this.m_column);
});
MPageComponent.method("setColumn",function(value){this.m_column=value;
});
MPageComponent.method("getSequence",function(){return(this.m_sequence);
});
MPageComponent.method("setSequence",function(value){this.m_sequence=value;
});
MPageComponent.method("getLink",function(){return(this.m_link);
});
MPageComponent.method("setLink",function(value){this.m_link=value;
});
MPageComponent.method("isResultsDisplayEnabled",function(){return(this.m_totalResults);
});
MPageComponent.method("setResultsDisplayEnabled",function(value){this.m_totalResults=value;
});
MPageComponent.method("isXofYEnabled",function(){return(this.m_xOFy);
});
MPageComponent.method("setXofYEnabled",function(value){this.m_xOFy=value;
});
MPageComponent.method("isExpanded",function(){return(this.m_isExpanded);
});
MPageComponent.method("setExpanded",function(value){this.m_isExpanded=value;
});
MPageComponent.method("isAlwaysExpanded",function(){return(this.m_isAlwaysExpanded);
});
MPageComponent.method("setAlwaysExpanded",function(value){this.m_isAlwaysExpanded=value;
});
MPageComponent.method("getScrollNumber",function(){return(this.m_scrollNumber);
});
MPageComponent.method("setScrollNumber",function(value){this.m_scrollNumber=value;
});
MPageComponent.method("isScrollingEnabled",function(){return(this.m_isScrollEnabled);
});
MPageComponent.method("setScrollingEnabled",function(value){this.m_isScrollEnabled=value;
});
MPageComponent.method("getStyles",function(){return(this.m_styles);
});
MPageComponent.method("setStyles",function(value){this.m_styles=value;
});
MPageComponent.method("getFilters",function(){return(this.m_filters);
});
MPageComponent.method("getGroups",function(){if(this.m_groups===null){this.m_groups=[];
}return(this.m_groups);
});
MPageComponent.method("setGroups",function(value){this.m_groups=value;
});
MPageComponent.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
MPageComponent.method("getLookbackUnitTypeFlag",function(){return(this.m_lookbackUnitTypeFlag);
});
MPageComponent.method("setLookbackUnitTypeFlag",function(value){this.m_lookbackUnitTypeFlag=value;
});
MPageComponent.method("getLookbackUnits",function(){return(this.m_lookbackUnits);
});
MPageComponent.method("setLookbackUnits",function(value){this.m_lookbackUnits=value;
});
MPageComponent.method("isLineNumberIncluded",function(){return this.m_includeLineNumber;
});
MPageComponent.method("setIncludeLineNumber",function(value){this.m_includeLineNumber=value;
});
MPageComponent.method("getDateFormat",function(){return(this.m_dateFormat);
});
MPageComponent.method("setDateFormat",function(value){this.m_dateFormat=value;
});
MPageComponent.method("setAutoSuggestAddScript",function(value){this.m_AutoSuggestScript=value;
});
MPageComponent.method("getAutoSuggestAddScript",function(){return(this.m_AutoSuggestScript);
});
MPageComponent.method("setAutoSuggestAddTimerName",function(value){this.m_AutoSuggestAddTimerName=value;
});
MPageComponent.method("getAutoSuggestAddTimerName",function(){return(this.m_AutoSuggestAddTimerName);
});
}function MPageGrouper(){this.m_groups=null;
MPageGrouper.method("setGroups",function(value){this.m_groups=value;
});
MPageGrouper.method("getGroups",function(){return this.m_groups;
});
MPageGrouper.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
}MPageGrouper.inherits(MPageGroup);
function MPageGroup(){this.m_groupName="";
this.m_groupSeq=0;
this.m_groupId=0;
MPageGroup.method("setGroupId",function(value){this.m_groupId=value;
});
MPageGroup.method("getGroupId",function(){return this.m_groupId;
});
MPageGroup.method("setGroupName",function(value){this.m_groupName=value;
});
MPageGroup.method("getGroupName",function(){return this.m_groupName;
});
MPageGroup.method("setSequence",function(value){this.m_groupSeq=value;
});
MPageGroup.method("getSequence",function(){return this.m_groupSeq;
});
}function MPageEventSetGroup(){this.m_eventSets=null;
this.m_isSequenced=false;
MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventSetGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets;
});
MPageEventSetGroup.method("setEventSets",function(value){this.m_eventSets=value;
});
MPageEventSetGroup.method("addEventSet",function(value){if(this.m_eventSets===null){this.m_eventSets=[];
}this.m_eventSets.push(value);
});
}MPageEventSetGroup.inherits(MPageGroup);
function MPageEventCodeGroup(){this.m_eventCodes=null;
this.m_isSequenced=false;
MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventCodeGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes;
});
MPageEventCodeGroup.method("setEventCodes",function(value){this.m_eventCodes=value;
});
MPageEventCodeGroup.method("addEventCode",function(value){if(this.m_eventCodes===null){this.m_eventCodes=[];
}this.m_eventCodes.push(value);
});
}MPageEventCodeGroup.inherits(MPageGroup);
function MPageCodeValueGroup(){this.m_codes=null;
MPageCodeValueGroup.method("getCodes",function(){return this.m_codes;
});
MPageCodeValueGroup.method("setCodes",function(value){this.m_codes=value;
});
MPageCodeValueGroup.method("addCode",function(value){if(this.m_codes===null){this.m_codes=[];
}this.m_codes.push(value);
});
}MPageCodeValueGroup.inherits(MPageGroup);
function MPageSequenceGroup(){this.m_items=null;
this.m_mapItems=null;
this.m_isMultiType=false;
MPageSequenceGroup.method("getItems",function(){return this.m_items;
});
MPageSequenceGroup.method("setItems",function(value){this.m_items=value;
});
MPageSequenceGroup.method("addItem",function(value){if(this.m_items===null){this.m_items=[];
}this.m_items.push(value);
});
MPageSequenceGroup.method("setMultiValue",function(value){this.m_isMultiType=value;
});
MPageSequenceGroup.method("isMultiValue",function(){return(this.m_isMultiType);
});
MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems;
});
MPageSequenceGroup.method("setMapItems",function(value){this.m_mapItems=value;
});
}MPageSequenceGroup.inherits(MPageGroup);
function MPageGroupValue(){this.m_id=0;
this.m_name="";
MPageGroupValue.method("getId",function(){return this.m_id;
});
MPageGroupValue.method("setId",function(value){this.m_id=value;
});
MPageGroupValue.method("getName",function(){return this.m_name;
});
MPageGroupValue.method("setName",function(value){this.m_name=value;
});
}function ComponentStyle(){this.m_nameSpace="";
this.m_id="";
this.m_className="section";
this.m_contentId="";
this.m_contentClass="sec-content";
this.m_headerClass="sec-hd";
this.m_headToggle="sec-hd-tgl";
this.m_secTitle="sec-title";
this.m_aLink="";
this.m_secTotal="sec-total";
this.m_info="";
this.m_componentId=0;
ComponentStyle.method("initByNamespace",function(value){this.m_nameSpace=value;
this.m_id=value;
this.m_className+=(" "+value+"-sec");
this.m_contentId=value+"Content";
this.m_aLink=value+"Link";
this.m_info=value+"-info";
});
ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace;
});
ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId;
});
ComponentStyle.method("getClassName",function(){return this.m_className;
});
ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId;
});
ComponentStyle.method("getContentClass",function(){return this.m_contentClass;
});
ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass;
});
ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle;
});
ComponentStyle.method("getTitle",function(){return this.m_secTitle;
});
ComponentStyle.method("getLink",function(){return this.m_aLink;
});
ComponentStyle.method("getTotal",function(){return this.m_secTotal;
});
ComponentStyle.method("getInfo",function(){return this.m_info;
});
ComponentStyle.method("setComponentId",function(value){this.m_componentId=value;
});
ComponentStyle.method("setNameSpace",function(value){this.m_nameSpace=value;
});
ComponentStyle.method("setId",function(value){this.m_id=value;
});
ComponentStyle.method("setClassName",function(value){this.m_className=value;
});
ComponentStyle.method("setContextId",function(value){this.m_contentId=value;
});
ComponentStyle.method("setContextClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setHeaderClass",function(value){this.m_headerClass=value;
});
ComponentStyle.method("setHeaderToggle",function(value){this.m_headToggle=value;
});
ComponentStyle.method("setTitle",function(value){this.m_secTitle=value;
});
ComponentStyle.method("setLink",function(value){this.m_aLink=value;
});
ComponentStyle.method("setTotal",function(value){this.m_secTotal=value;
});
ComponentStyle.method("setInfo",function(value){this.m_info=value;
});
}function MPage(){this.pageId=0;
this.name=null;
this.components=null;
this.banner=true;
this.helpFileName="";
this.helpFileURL="";
this.criterion=null;
this.componentIds=null;
this.isCustomizeView=false;
this.m_isCustomizeEnabled=true;
this.m_titleAnchors=null;
MPage.method("getTitleAnchors",function(){return this.m_titleAnchors;
});
MPage.method("setTitleAnchors",function(value){this.m_titleAnchors=value;
});
MPage.method("addTitleAnchor",function(value){if(this.m_titleAnchors===null){this.m_titleAnchors=[];
}this.m_titleAnchors.push(value);
});
MPage.method("getCustomizeEnabled",function(){return this.m_isCustomizeEnabled;
});
MPage.method("setCustomizeEnabled",function(value){this.m_isCustomizeEnabled=value;
});
MPage.method("getCustomizeView",function(){return this.isCustomizeView;
});
MPage.method("setCustomizeView",function(value){this.isCustomizeView=value;
});
MPage.method("getComponentIds",function(){return(this.componentIds);
});
MPage.method("setComponentIds",function(value){this.componentIds=value;
});
MPage.method("addComponentId",function(value){if(this.componentIds===null){this.componentIds=[];
}this.componentIds.push(value);
});
MPage.method("getCriterion",function(){return(this.criterion);
});
MPage.method("setCriterion",function(value){this.criterion=value;
});
MPage.method("getHelpFileName",function(){return this.helpFileName;
});
MPage.method("setHelpFileName",function(value){this.helpFileName=value;
});
MPage.method("getHelpFileURL",function(){return this.helpFileURL;
});
MPage.method("setHelpFileURL",function(value){this.helpFileURL=value;
});
MPage.method("isBannerEnabled",function(){return this.banner;
});
MPage.method("setBannerEnabled",function(value){this.banner=value;
});
MPage.method("getPageId",function(){return this.pageId;
});
MPage.method("setPageId",function(value){this.pageId=value;
});
MPage.method("getName",function(){return this.name;
});
MPage.method("setName",function(value){this.name=value;
});
MPage.method("getComponents",function(){return this.components;
});
MPage.method("setComponents",function(value){this.components=value;
});
MPage.method("addComponent",function(value){if(this.components===null){this.components=[];
}this.components.push(value);
});
}function SortMPageComponentRows(c1,c2){if(c1.getSequence()<c2.getSequence()){return -1;
}if(c1.getSequence()>c2.getSequence()){return 1;
}return 0;
}function SortMPageComponentCols(c1,c2){if(c1.getColumn()<c2.getColumn()){return -1;
}if(c1.getColumn()>c2.getColumn()){return 1;
}return SortMPageComponentRows(c1,c2);
}function SortMPageComponents(c1,c2){if(c1.getPageGroupSequence()<c2.getPageGroupSequence()){return -1;
}if(c1.getPageGroupSequence()>c2.getPageGroupSequence()){return 1;
}return SortMPageComponentCols(c1,c2);
}var CERN_EventListener=null;
var CERN_MPageComponents=null;
var CERN_TabManagers=null;
var STR_PAD_LEFT=1;
var STR_PAD_RIGHT=2;
var STR_PAD_BOTH=3;
var MPAGE_LOCALE=null;
var MPSERVICE_CONNECT_PATH="../../discern/mpages/reports/";
if(!XMLCclRequest){var XMLCclRequest=function(){var xmlHttp;
try{xmlHttp=new XMLHttpRequest();
}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHttp");
}catch(e){}}if(!xmlHttp){alert("Error creating the XMLHttpRequest object.");
}else{return xmlHttp;
}};
var PlaceRequest=function(request,method,program,async,params){request.open(method,MPSERVICE_CONNECT_PATH+program+"?parameters="+params+"&timestamp="+new Date().getTime(),async);
request.send(null);
return true;
};
}else{var PlaceRequest=function(request,method,program,async,params){request.open(method,program,async);
request.send(params);
return true;
};
}Array.prototype.addAll=function(v){if(v&&v.length>0){for(var x=0,xl=v.length;
x<xl;
x++){this.push(v[x]);
}}};
var MP_Core=function(){var m_numFormatter=null;
return{Criterion:function(person_id,encntr_id,provider_id,executable,static_content,position_cd,ppr_cd,debug_ind,help_file_local_ind,category_mean,backend_loc,locale_id){var m_patInfo=null;
var m_prsnlInfo=null;
this.person_id=person_id;
this.encntr_id=encntr_id;
this.provider_id=provider_id;
this.executable=executable;
this.static_content=static_content;
this.position_cd=position_cd;
this.ppr_cd=ppr_cd;
this.debug_ind=debug_ind;
this.help_file_local_ind=help_file_local_ind;
this.category_mean=category_mean;
this.backend_loc=backend_loc;
this.locale_id=(this.debug_ind)?"en_us":locale_id;
this.setPatientInfo=function(value){m_patInfo=value;
};
this.getPatientInfo=function(){return m_patInfo;
};
this.getPersonnelInfo=function(){if(!m_prsnlInfo){m_prsnlInfo=new MP_Core.PersonnelInformation(this.provider_id,this.person_id);
}return m_prsnlInfo;
};
},PatientInformation:function(){var m_dob=null;
var m_sex=null;
this.setSex=function(value){m_sex=value;
};
this.getSex=function(){return m_sex;
};
this.setDOB=function(value){m_dob=value;
};
this.getDOB=function(){return m_dob;
};
},ScriptRequest:function(component,loadTimerName){var m_comp=component;
var m_load=loadTimerName;
var m_name="";
var m_programName="";
var m_params=null;
var m_async=true;
this.getComponent=function(){return m_comp;
};
this.getLoadTimer=function(){return m_load;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setProgramName=function(value){m_programName=value;
};
this.getProgramName=function(){return m_programName;
};
this.setParameters=function(value){m_params=value;
};
this.getParameters=function(){return m_params;
};
this.setAsync=function(value){m_async=value;
};
this.isAsync=function(){return m_async;
};
},ScriptReply:function(component){var m_name="";
var m_status="F";
var m_err="";
var m_resp=null;
var m_comp=component;
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setStatus=function(value){m_status=value;
};
this.getStatus=function(){return m_status;
};
this.setError=function(value){m_err=value;
};
this.getError=function(){return m_err;
};
this.setResponse=function(value){m_resp=value;
};
this.getResponse=function(){return m_resp;
};
this.getComponent=function(){return m_comp;
};
},PersonnelInformation:function(prsnlId,patientId){var m_prsnlId=prsnlId;
var m_viewableEncntrs=null;
var patConObj=null;
try{patConObj=window.external.DiscernObjectFactory("PVCONTXTMPAGE");
if(patConObj){m_viewableEncntrs=patConObj.GetValidEncounters(patientId);
}}catch(e){}finally{patConObj=null;
}this.getPersonnelId=function(){return m_prsnlId;
};
this.getViewableEncounters=function(){return m_viewableEncntrs;
};
},XMLCclRequestWrapper:function(component,program,paramAr,async){var timerLoadComponent=MP_Util.CreateTimer(component.getComponentLoadTimerName(),component.getCriterion().category_mean);
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{if(recordData.STATUS_DATA.STATUS=="S"){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName(),component.getCriterion().category_mean);
try{var rootComponentNode=component.getRootComponentNode();
var secTitle=Util.Style.g("sec-total",rootComponentNode,"span");
secTitle[0].innerHTML=i18nCore.RENDERING_DATA+"...";
component.HandleSuccess(recordData);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}else{var errMsg=[];
var ss=null;
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length===undefined){ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.JS_ERROR,"</b><br /><ul><li>",i18nCore.MESSAGE,": ",err.message,"</li><li>",i18nCore.NAME,": ",err.name,"</li><li>",i18nCore.NUMBER,": ",(err.number&65535),"</li><li>",i18nCore.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(this.readyState==4&&this.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,"");
if(timerLoadComponent){timerLoadComponent.Abort();
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCclRequestWrapper_notComponent:function(loadTimerName,program,paramAr,async,HandleResponse){var timerLoadComponent=MP_Util.CreateTimer(loadTimerName);
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(info.readyState==4&&info.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){HandleResponse(recordData);
}else{if(recordData.STATUS_DATA.STATUS=="S"){HandleResponse(recordData);
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}HandleResponse(recordData);
}}}catch(err){log.error(err);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(info.readyState==4&&info.status!=200){HandleResponse(recordData,true);
if(timerLoadComponent){timerLoadComponent.Abort();
}}}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCCLRequestCallBack:function(component,request,funcCallback){var timerLoad=MP_Util.CreateTimer(request.getLoadTimer());
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
var reply=new MP_Core.ScriptReply(component);
reply.setName(request.getName());
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
var status=recordData.STATUS_DATA.STATUS;
reply.setStatus(status);
if(status=="Z"){reply.setResponse(recordData);
funcCallback(reply);
}else{if(status=="S"){reply.setResponse(recordData);
funcCallback(reply);
}else{var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
reply.setError(errMsg.join(""));
funcCallback(reply);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
timerLoad=null;
}}finally{if(timerLoad){timerLoad.Stop();
}}}else{if(info.readyState==4&&info.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
}funcCallback(reply);
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET",request.getProgramName(),request.isAsync());
info.send(request.getParameters().join(","));
},XMLCCLRequestThread:function(name,component,request){var m_name=name;
var m_comp=component;
var m_request=request;
m_request.setName(name);
this.getName=function(){return m_name;
};
this.getComponent=function(){return m_comp;
};
this.getRequest=function(){return m_request;
};
},XMLCCLRequestThreadManager:function(callbackFunction,component,handleFinalize){var m_threads=null;
var m_replyAr=null;
var m_isData=false;
var m_isError=false;
this.addThread=function(thread){if(m_threads==null){m_threads=[];
}m_threads.push(thread);
};
this.begin=function(){if(m_threads&&m_threads.length>0){for(x=m_threads.length;
x--;
){var thread=m_threads[x];
MP_Core.XMLCCLRequestCallBack(thread.getComponent(),thread.getRequest(),this.completeThread);
}}else{if(handleFinalize){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(null,component);
}}};
this.completeThread=function(reply){if(m_replyAr==null){m_replyAr=[];
}if(reply.getStatus()=="S"){m_isData=true;
}else{if(reply.getStatus()=="F"){m_isError=true;
}}m_replyAr.push(reply);
if(m_replyAr.length==m_threads.length){if(handleFinalize){if(m_isError){var errMsg=[];
for(var x=m_replyAr.length;
x--;
){var rep=m_replyAr[x];
if(rep.getStatus()=="F"){errMsg.push(rep.getError());
}}MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("<br />")),component,"");
}else{if(!m_isData){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(m_replyAr,component);
}}}else{callbackFunction(m_replyAr,component);
}}};
},MapObject:function(name,value){this.name=name;
this.value=value;
},TabItem:function(key,name,components,prefIdentifier){this.key=key;
this.name=name;
this.components=components;
this.prefIdentifier=prefIdentifier;
},TabManager:function(tabItem){var m_isLoaded=false;
var m_tabItem=tabItem;
var m_isExpandAll=false;
var m_isSelected=false;
this.toggleExpandAll=function(){m_isExpandAll=(!m_isExpandAll);
};
this.loadTab=function(){if(!m_isLoaded){m_isLoaded=true;
var components=m_tabItem.components;
if(components){for(var xl=components.length;
xl--;
){var component=components[xl];
if(component.isDisplayable()){component.InsertData();
}}}}};
this.getTabItem=function(){return m_tabItem;
};
this.getSelectedTab=function(){return m_isSelected;
};
this.setSelectedTab=function(value){m_isSelected=value;
};
},ReferenceRangeResult:function(){var m_valNLow=-1,m_valNHigh=-1,m_valCLow=-1,m_valCHigh=-1;
var m_uomNLow=null,m_uomNHigh=null,m_uomCLow=null,m_uomCHigh=null;
this.init=function(refRange,codeArray){var nf=GetNumericFormatter();
m_valCLow=nf.format(refRange.CRITICAL_LOW.NUMBER);
if(refRange.CRITICAL_LOW.UNIT_CD!=""){m_uomCLow=MP_Util.GetValueFromArray(refRange.CRITICAL_LOW.UNIT_CD,codeArray);
}m_valCHigh=nf.format(refRange.CRITICAL_HIGH.NUMBER);
if(refRange.CRITICAL_HIGH.UNIT_CD!=""){m_uomCHigh=MP_Util.GetValueFromArray(refRange.CRITICAL_HIGH.UNIT_CD,codeArray);
}m_valNLow=nf.format(refRange.NORMAL_LOW.NUMBER);
if(refRange.NORMAL_LOW.UNIT_CD!=""){m_uomNLow=MP_Util.GetValueFromArray(refRange.NORMAL_LOW.UNIT_CD,codeArray);
}m_valNHigh=nf.format(refRange.NORMAL_HIGH.NUMBER);
if(refRange.NORMAL_HIGH.UNIT_CD!=""){m_uomNHigh=MP_Util.GetValueFromArray(refRange.NORMAL_HIGH.UNIT_CD,codeArray);
}};
this.getNormalLow=function(){return m_valNLow;
};
this.getNormalHigh=function(){return m_valNHigh;
};
this.getNormalLowUOM=function(){return m_uomNLow;
};
this.getNormalHighUOM=function(){return m_uomNHigh;
};
this.getCriticalLow=function(){return m_valCLow;
};
this.getCriticalHigh=function(){return m_valCHigh;
};
this.getCriticalLowUOM=function(){return m_uomCLow;
};
this.getCriticalHighUOM=function(){return m_uomCHigh;
};
this.toNormalInlineString=function(){var low=(m_uomNLow!=null)?m_uomNLow.display:"";
var high=(m_uomNHigh!=null)?m_uomNHigh.display:"";
if(m_valNLow!=0||m_valNHigh!=0){return(m_valNLow+"&nbsp;"+low+" - "+m_valNHigh+"&nbsp;"+high);
}else{return"";
}};
this.toCriticalInlineString=function(){var low=(m_uomCLow!=null)?m_uomCLow.display:"";
var high=(m_uomCHigh!=null)?m_uomCHigh.display:"";
if(m_valCLow!=0||m_valCHigh!=0){return(m_valCLow+"&nbsp;"+low+" - "+m_valCHigh+"&nbsp;"+high);
}else{return"";
}};
},QuantityValue:function(){var m_val,m_precision;
var m_uom=null;
var m_refRange=null;
var m_rawValue=0;
var m_hasModifier=false;
this.init=function(result,codeArray){var quantityValue=result.QUANTITY_VALUE;
var referenceRange=result.REFERENCE_RANGE;
for(var l=0,ll=quantityValue.length;
l<ll;
l++){var numRes=quantityValue[l].NUMBER;
m_precision=quantityValue[l].PRECISION;
if(!isNaN(numRes)){m_val=MP_Util.Measurement.SetPrecision(numRes,m_precision);
m_rawValue=numRes;
}if(quantityValue[l].MODIFIER_CD!=""){var modCode=MP_Util.GetValueFromArray(quantityValue[l].MODIFIER_CD,codeArray);
if(modCode!=null){m_val=modCode.display+m_val;
m_hasModifier=true;
}}if(quantityValue[l].UNIT_CD!=""){m_uom=MP_Util.GetValueFromArray(quantityValue[l].UNIT_CD,codeArray);
}for(var m=0,ml=referenceRange.length;
m<ml;
m++){m_refRange=new MP_Core.ReferenceRangeResult();
m_refRange.init(referenceRange[m],codeArray);
}}};
this.getValue=function(){return m_val;
};
this.getRawValue=function(){return m_rawValue;
};
this.getUOM=function(){return m_uom;
};
this.getRefRange=function(){return m_refRange;
};
this.getPrecision=function(){return m_precision;
};
this.toString=function(){if(m_uom!=null){return(m_val+" "+m_uom.display);
}else{return m_val;
}};
this.hasModifier=function(){return m_hasModifier;
};
},Measurement:function(){var m_eventId=0;
var m_personId=0;
var m_encntrId=0;
var m_eventCode=null;
var m_dateTime=null;
var m_updateDateTime=null;
var m_result=null;
var m_normalcy=null;
this.init=function(eventId,personId,encntrId,eventCode,dateTime,resultObj,updateDateTime){m_eventId=eventId;
m_personId=personId;
m_encntrId=encntrId;
m_eventCode=eventCode;
m_dateTime=dateTime;
m_result=resultObj;
m_updateDateTime=updateDateTime;
};
this.getEventId=function(){return m_eventId;
};
this.getPersonId=function(){return m_personId;
};
this.getEncntrId=function(){return m_encntrId;
};
this.getEventCode=function(){return m_eventCode;
};
this.getDateTime=function(){return m_dateTime;
};
this.getUpdateDateTime=function(){return m_updateDateTime;
};
this.getResult=function(){return m_result;
};
this.setNormalcy=function(value){m_normalcy=value;
};
this.getNormalcy=function(){return m_normalcy;
};
},MenuItem:function(){var m_name="";
var m_desc="";
var m_id=0;
this.setDescription=function(value){m_desc=value;
};
this.getDescription=function(){return m_desc;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setId=function(value){m_id=value;
};
this.getId=function(){return m_id;
};
},CriterionFilters:function(criterion){var m_criterion=criterion;
var m_evalAr=[];
this.addFilter=function(type,value){m_evalAr.push(new MP_Core.MapObject(type,value));
};
this.checkFilters=function(){var pass=false;
var patInfo=m_criterion.getPatientInfo();
for(var x=m_evalAr.length;
x--;
){var filter=m_evalAr[x];
switch(filter.name){case MP_Core.CriterionFilters.SEX_MEANING:var sex=patInfo.getSex();
if(sex!=null){if(filter.value==sex.meaning){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_OLDER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob<=filter.value){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_YOUNGER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob>=filter.value){continue;
}}return false;
break;
default:alert("Unhandled criterion filter");
return false;
}}return true;
};
}};
function GetNumericFormatter(){if(m_numFormatter==null){m_numFormatter=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_numFormatter;
}}();
MP_Core.CriterionFilters.SEX_MEANING=1;
MP_Core.CriterionFilters.DOB_OLDER_THAN=2;
MP_Core.CriterionFilters.DOB_YOUNGER_THAN=3;
MP_Core.AppUserPreferenceManager=function(){var m_criterion=null;
var m_prefIdent="";
var m_jsonObject=null;
return{Initialize:function(criterion,preferenceIdentifier){m_criterion=criterion;
m_prefIdent=preferenceIdentifier;
m_jsonObject=null;
},LoadPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject!=null){return;
}else{var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=JSON.parse(recordData.PREF_STRING);
}else{if(recordData.STATUS_DATA.STATUS=="Z"){return;
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error retrieving user preferences "+errAr.join(",");
return;
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^"];
PlaceRequest(info,"GET","MP_GET_USER_PREFS",false,ar.join(","));
return;
}},GetPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject==null){this.LoadPreferences();
}return m_jsonObject;
},SavePreferences:function(){var body=document.body;
var groups=Util.Style.g("col-group",body,"div");
var grpId=0;
var colId=0;
var rowId=0;
var compId=0;
var jsonObject=new Object();
var userPrefs=jsonObject.user_prefs=new Object();
var pagePrefs=userPrefs.page_prefs=new Object();
var components=pagePrefs.components=[];
for(var x=0,xl=groups.length;
x<xl;
x++){grpId=x+1;
var liqLay=Util.Style.g("col-outer1",groups[x],"div");
if(liqLay.length>0){var cols=Util.gcs(liqLay[0]);
for(var y=0,yl=cols.length;
y<yl;
y++){colId=y+1;
var rows=Util.gcs(cols[y]);
for(var z=0,zl=rows.length;
z<zl;
z++){var component=new Object();
rowId=z+1;
compId=jQuery(rows[z]).attr("id");
component.id=compId;
component.group_seq=grpId;
component.col_seq=colId;
component.row_seq=rowId;
if(jQuery(rows[z]).hasClass("closed")){component.expanded=false;
}else{component.expanded=true;
}components.push(component);
}}}}WritePreferences(jsonObject);
m_jsonObject=jsonObject;
history.back();
},ClearPreferences:function(){WritePreferences(null);
history.back();
},GetComponentById:function(id){if(m_jsonObject!=null){var components=m_jsonObject.user_prefs.page_prefs.components;
for(var x=components.length;
x--;
){var component=components[x];
if(component.id==id){return component;
}}}return null;
}};
function WritePreferences(jsonObject,successMessage){var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){m_jsonObject=null;
}else{if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=jsonObject;
if(successMessage!=null&&successMessage.length>0){alert(successMessage);
}}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error saving user preferences: "+errAr.join(",");
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sJson=(jsonObject!=null)?JSON.stringify(jsonObject):"";
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^","^"+sJson+"^"];
PlaceRequest(info,"GET","MP_MAINTAIN_USER_PREFS",false,ar.join(","));
}}();
var MP_Util=function(){return{GetCriterion:function(js_criterion,static_content){var jsCrit=js_criterion.CRITERION;
var criterion=new MP_Core.Criterion(jsCrit.PERSON_ID,(jsCrit.ENCNTRS.length>0)?jsCrit.ENCNTRS[0].ENCNTR_ID:0,jsCrit.PRSNL_ID,jsCrit.EXECUTABLE,static_content,jsCrit.POSITION_CD,jsCrit.PPR_CD,(jsCrit.DEBUG_IND==1)?true:false,jsCrit.HELP_FILE_LOCAL_IND,jsCrit.CATEGORY_MEAN,jsCrit.BACKEND_LOCATION,jsCrit.LOCALE_ID);
var codeArray=MP_Util.LoadCodeListJSON(jsCrit.CODES);
var jsPatInfo=jsCrit.PATIENT_INFO;
var patInfo=new MP_Core.PatientInformation();
MP_Util.IncludeLocaleDefs(criterion.locale_id,CERN_static_content+"/js/locale");
if(jsPatInfo!==undefined){patInfo.setSex(MP_Util.GetValueFromArray(jsPatInfo.SEX_CD,codeArray));
if(jsPatInfo.DOB!=""){var dt=new Date();
dt.setISO8601(jsPatInfo.DOB);
patInfo.setDOB(dt);
}}criterion.setPatientInfo(patInfo);
return criterion;
},IncludeLocaleDefs:function(localeId,localeFolderLoc){var headID=document.getElementsByTagName("head")[0];
var newScript=document.createElement("script");
newScript.type="text/javascript";
var langId=localeId.substr(0,2);
var langLocaleId=localeId.substr(3,2);
switch(langId.toLowerCase()){case"en":if(langLocaleId.toLowerCase()==="au"){newScript.src=localeFolderLoc+"/locale.en_AU.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_AU);
}else{if(langLocaleId.toLowerCase()==="gb"){newScript.src=localeFolderLoc+"/locale.en_GB.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_GB);
}else{newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
}}break;
case"es":newScript.src=localeFolderLoc+"/locale.es.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.es_ES);
break;
case"de":newScript.src=localeFolderLoc+"/locale.de.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.de_DE);
break;
case"fr":newScript.src=localeFolderLoc+"/locale.fr.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.fr_FR);
break;
default:newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
break;
}},CalcLookbackDate:function(lookbackDays){var retDate=new Date();
var hrs=retDate.getHours();
hrs-=(lookbackDays*24);
retDate.setHours(hrs);
return retDate;
},CalcWithinTime:function(dateTime){return(GetDateDiffString(dateTime,null,null,true));
},CalcAge:function(birthDt,fromDate){fromDate=(fromDate==null)?new Date():fromDate;
return(GetDateDiffString(birthDt,fromDate,1,false));
},DisplayDateByOption:function(component,date){var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var dtFormatted="";
switch(component.getDateFormat()){case 1:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR));
case 2:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR));
case 3:return(MP_Util.CalcWithinTime(date));
case 4:return("&nbsp");
default:return df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);
}},DisplaySelectedTab:function(showDiv,anchorId){if(window.name=="a-tab0"){window.name="";
}else{window.name=showDiv+","+anchorId;
}var body=document.body;
var divs=Util.Style.g("div-tab-item",body);
for(var i=divs.length;
i--;
){if(divs[i].id==showDiv){divs[i].style.display="block";
}else{divs[i].style.display="none";
}}var anchors=Util.Style.g("anchor-tab-item",body);
for(var i=anchors.length;
i--;
){if(anchors[i].id==anchorId){anchors[i].className="anchor-tab-item active";
}else{anchors[i].className="anchor-tab-item inactive";
}}var custNode=_g("custView");
if(custNode!=null){custNode.href="";
custNode.innerHTML="";
}for(var yl=CERN_TabManagers.length;
yl--;
){var tabManager=CERN_TabManagers[yl];
var tabItem=tabManager.getTabItem();
if(tabItem.key==showDiv){tabManager.loadTab();
tabManager.setSelectedTab(true);
var components=tabItem.components;
if(components!=null&&components.length>0){for(var xl=components.length;
xl--;
){var component=components[xl];
MP_Util.Doc.AddCustomizeLink(component.getCriterion());
break;
}}}else{tabManager.setSelectedTab(false);
}}},OpenTab:function(compId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openTab();
}}},LaunchMenuSelection:function(compId,menuItemId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var crit=comp.getCriterion();
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openDropDown(menuItemId);
break;
}}},LaunchMenu:function(menuId,componentId){var menu=_g(menuId);
MP_Util.closeMenuInit(menu,componentId);
if(menu!=null){if(Util.Style.ccss(menu,"menu-hide")){_g(componentId).style.zIndex=2;
Util.Style.rcss(menu,"menu-hide");
}else{_g(componentId).style.zIndex=1;
Util.Style.acss(menu,"menu-hide");
}}},closeMenuInit:function(inMenu,compId){var menuId;
var docMenuId=compId+"Menu";
if(inMenu.id==docMenuId){menuId=compId;
}if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}function menuLeave(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}},CreateTitleText:function(component,nbr,optionalText){var ar=[];
if(component.isLineNumberIncluded()){ar.push("(",nbr,")");
}if(optionalText&&optionalText!=""){ar.push(" ",optionalText);
}return ar.join("");
},GetContentClass:function(component,nbr){if(component.isScrollingEnabled()){var scrollNbr=component.getScrollNumber();
if(nbr>=scrollNbr&&scrollNbr>0){return"content-body scrollable";
}}return"content-body";
},CreateTimer:function(timerName,subTimerName,metaData1,metaData2,metaData3){try{var slaTimer=window.external.DiscernObjectFactory("SLATIMER");
}catch(err){return null;
}if(slaTimer){slaTimer.TimerName=timerName;
if(subTimerName){slaTimer.SubtimerName=subTimerName;
}if(metaData1){slaTimer.Metadata1=String(metaData1);
}if(metaData2){slaTimer.Metadata2=String(metaData2);
}if(metaData3){slaTimer.Metadata3=String(metaData3);
}slaTimer.Start();
return slaTimer;
}else{return null;
}},GetCodeSet:function(codeSet,async,displaySortOrder){var codes=new Array();
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="S"){codes=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
}return codes;
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sendVal="^MINE^, "+codeSet+".0";
if(displaySortOrder!=null&&(typeof(displaySortOrder))=="string"){var dispSortDir=displaySortOrder.toLowerCase();
if(dispSortDir=="asc"||dispSortDir=="desc"){sendVal+=(",^"+dispSortDir+"^");
}}PlaceRequest(info,"GET","MP_LAB_GET_CODESET",async,sendVal);
return codes;
},GetCodeByMeaning:function(mapCodes,meaning){for(var x=mapCodes.length;
x--;
){var code=mapCodes[x].value;
if(code.meaning==meaning){return code;
}}},GetItemFromMapArray:function(mapItems,item){for(var x=mapItems.length;
x--;
){if(mapItems[x].name==item){return mapItems[x].value;
}}},AddItemToMapArray:function(mapItems,key,value){var ar=MP_Util.GetItemFromMapArray(mapItems,key);
if(ar==null){ar=[];
mapItems.push(new MP_Core.MapObject(key,ar));
}ar.push(value);
},LookBackTime:function(component){var i18nCore=i18n.discernabu;
var remainder=0;
var lookbackDays=component.getLookbackDays();
if(lookbackDays==0){return(i18nCore.SELECTED_VISIT);
}else{if(lookbackDays==1){return(i18nCore.LAST_N_HOURS.replace("{0}",lookbackDays*24));
}else{return(i18nCore.LAST_N_DAYS.replace("{0}",lookbackDays));
}}},CreateClinNoteLink:function(patient_id,encntr_id,event_id,display,docTypeFlag){var docType=(docTypeFlag&&docTypeFlag>0)?docTypeFlag:1;
var doclink="";
if(event_id>0){var ar=[];
ar.push(patient_id,encntr_id,event_id,docType);
doclink="<a href=javascript:MP_Util.LaunchClinNoteViewer("+ar.join(",")+");>"+display+"</a>";
}else{doclink=display;
}return(doclink);
},LaunchRTFViewer:function(eventId,docTypeFlag){var ar=[];
ar.push("^mine^",eventId+".0",docTypeFlag);
CCLLINK("mp_clin_smry_clinicaldocs",ar.join(","),1);
},LaunchClinNoteViewer:function(patient_id,encntr_id,event_id,docTypeFlag){try{var sParms=patient_id+"|"+encntr_id+"|["+event_id+"]|Documents|15|CLINNOTES|3|CLINNOTES|1";
var tempDate=new Date();
MPAGES_EVENT("CLINICALNOTE",sParms);
var tempDate2=new Date();
if(tempDate2-tempDate<=1000){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}}catch(err){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}},HandleNoDataResponse:function(nameSpace){var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
return("<h3 class='"+ns+"info-hd'><span class='res-normal'>"+i18nCore.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+i18nCore.NO_RESULTS_FOUND+"</span>");
},HandleErrorResponse:function(nameSpace,errorMessage){var ar=[];
var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
ar.push("<h3 class='",ns,"info-hd'><span class='res-normal'>",i18nCore.ERROR_RETREIVING_DATA,"</span></h3>");
ar.push("<dl class='",ns,"info'><dt><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dt><dd><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dd></dl>");
if(errorMessage!=null&&errorMessage.length>0){ar.push("<h4 class='",ns,"det-hd'><span>DETAILS</span></h4><div class='hvr'><dl class='",ns,"det'><dd><span>",errorMessage,"</span></dd></dl></div>");
}return ar.join("");
},GetValueFromArray:function(name,array){if(array!=null){for(var x=0,xi=array.length;
x<xi;
x++){if(array[x].name==name){return(array[x].value);
}}}return(null);
},LoadCodeListJSON:function(parentElement){var codeArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var codeObject=new Object();
codeElement=parentElement[x];
codeObject.codeValue=codeElement.CODE;
codeObject.display=codeElement.DISPLAY;
codeObject.description=codeElement.DESCRIPTION;
codeObject.codeSet=codeElement.CODE_SET;
codeObject.sequence=codeElement.SEQUENCE;
codeObject.meaning=codeElement.MEANING;
var mapObj=new MP_Core.MapObject(codeObject.codeValue,codeObject);
codeArray.push(mapObj);
}}return(codeArray);
},LoadPersonelListJSON:function(parentElement){var personnelArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var perObject=new Object();
codeElement=parentElement[x];
perObject.id=codeElement.ID;
perObject.fullName=codeElement.PROVIDER_NAME.NAME_FULL;
perObject.firstName=codeElement.PROVIDER_NAME.NAME_FIRST;
perObject.middleName=codeElement.PROVIDER_NAME.NAME_MIDDLE;
perObject.lastName=codeElement.PROVIDER_NAME.NAME_LAST;
perObject.userName=codeElement.PROVIDER_NAME.USERNAME;
perObject.initials=codeElement.PROVIDER_NAME.INITIALS;
perObject.title=codeElement.PROVIDER_NAME.TITLE;
var mapObj=new MP_Core.MapObject(perObject.id,perObject);
personnelArray[x]=mapObj;
}}return(personnelArray);
},WriteToFile:function(sText){try{var ForAppending=8;
var TriStateFalse=0;
var fso=new ActiveXObject("Scripting.FileSystemObject");
var newFile=fso.OpenTextFile("c:\\temp\\test.txt",ForAppending,true,TriStateFalse);
newFile.write(sText);
newFile.close();
}catch(err){var strErr="Error:";
strErr+="\nNumber:"+err.number;
strErr+="\nDescription:"+err.description;
document.write(strErr);
}},CalculateAge:function(bdate){var age;
var bdate=new Date(bdate);
var byear=bdate.getFullYear();
var bmonth=bdate.getMonth();
var bday=bdate.getDate();
var bhours=bdate.getHours();
today=new Date();
year=today.getFullYear();
month=today.getMonth();
day=today.getDate();
hours=today.getHours();
if(year==byear&&(day==bday)){age=hours-bhours;
age+=" Hours";
return age;
}else{if(year==byear&&(month==bmonth)){age=day-bday;
age+=" Days";
return age;
}}if(year==byear){age=month-bmonth;
age+=" Months";
return age;
}else{if(month<bmonth){age=year-byear-1;
}else{if(month>bmonth){age=year-byear;
}else{if(month==bmonth){if(day<bday){age=year-byear-1;
}else{if(day>bday){age=year-byear;
}else{if(day==bday){age=year-byear;
}}}}}}}age+=" Years";
return age;
},pad:function(str,len,pad,dir){if(typeof(len)=="undefined"){var len=0;
}if(typeof(pad)=="undefined"){var pad=" ";
}if(typeof(dir)=="undefined"){var dir=STR_PAD_RIGHT;
}if(len+1>=str.length){switch(dir){case STR_PAD_LEFT:str=Array(len+1-str.length).join(pad)+str;
break;
case STR_PAD_BOTH:var right=Math.ceil((padlen=len-str.length)/2);
var left=padlen-right;
str=Array(left+1).join(pad)+str+Array(right+1).join(pad);
break;
default:str=str+Array(len+1-str.length).join(pad);
break;
}}return str;
},GraphResults:function(personId,encntrId,eventCd,staticContent,groupId,providerId,positionCd,pprCD,lookBackUnits,lookBackType){var wParams="left=0,top=0,width=1200,height=700,toolbar=no";
var sParams="^MINE^,"+personId+","+encntrId+","+eventCd+",^"+unescape(staticContent)+"\\discrete-graphing^,"+groupId+","+providerId+","+positionCd+","+pprCD+","+lookBackUnits+","+lookBackType+","+1;
var graphCall="javascript:CCLLINK('mp_graph_results', '"+sParams+"',1)";
javascript:CCLNEWSESSIONWINDOW(graphCall,"_self",wParams,0,1);
Util.preventDefault();
},ReleaseRequestReference:function(reqObj){if(XMLCCLREQUESTOBJECTPOINTER){for(var id in XMLCCLREQUESTOBJECTPOINTER){if(XMLCCLREQUESTOBJECTPOINTER[id]==reqObj){delete (XMLCCLREQUESTOBJECTPOINTER[id]);
}}}},CreateAutoSuggestBoxHtml:function(component){var searchBoxHTML=[];
var compNs=component.getStyles().getNameSpace();
searchBoxHTML.push("<div class='search-box-div'><form name='contentForm'><input type='text' id='",compNs,"contentCtrl'"," class='search-box'></form></div>");
return searchBoxHTML.join("");
},AddAutoSuggestControl:function(component,searchTypeFlag){new AutoSuggestControl(component,searchNomenclature,addNomenclatureFromAutoSuggest,searchTypeFlag);
}};
function GetDateDiffString(beginDate,endDate,mathFlag,abbreviateFlag){var i18nCore=i18n.discernabu;
var timeDiff=0;
var returnVal="";
endDate=(endDate==null)?new Date():endDate;
mathFlag=(mathFlag==null)?0:mathFlag;
var one_minute=1000*60;
var one_hour=one_minute*60;
var one_day=one_hour*24;
var one_week=one_day*7;
var one_month=one_day*(365/12);
var one_year=one_month*12;
var valMinutes=0;
var valHours=0;
var valDays=0;
var valWeeks=0;
var valMonths=0;
var valYears=0;
timeDiff=(endDate.getTime()-beginDate.getTime());
var mathFunc=null;
var comparisonFunc=null;
if(mathFlag==0){mathFunc=function(val){return Math.ceil(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<=upperVal);
};
}else{mathFunc=function(val){return Math.floor(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<upperVal);
};
}valMinutes=mathFunc(timeDiff/one_minute);
valHours=mathFunc(timeDiff/one_hour);
valDays=mathFunc(timeDiff/one_day);
valWeeks=mathFunc(timeDiff/one_week);
valMonths=mathFunc(timeDiff/one_month);
valYears=mathFunc(timeDiff/one_year);
if(comparisonFunc(valHours,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MINS.replace("{0}",valMinutes)):(i18nCore.X_MINUTES.replace("{0}",valMinutes));
}else{if(comparisonFunc(valDays,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_HOURS.replace("{0}",valHours)):(i18nCore.X_HOURS.replace("{0}",valHours));
}else{if(comparisonFunc(valWeeks,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_DAYS.replace("{0}",valDays)):(i18nCore.X_DAYS.replace("{0}",valDays));
}else{if(comparisonFunc(valMonths,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_WEEKS.replace("{0}",valWeeks)):(i18nCore.X_WEEKS.replace("{0}",valWeeks));
}else{if(comparisonFunc(valYears,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MONTHS.replace("{0}",valMonths)):(i18nCore.X_MONTHS.replace("{0}",valMonths));
}else{returnVal=abbreviateFlag?(i18nCore.WITHIN_YEARS.replace("{0}",valYears)):(i18nCore.X_YEARS.replace("{0}",valYears));
}}}}}return(returnVal);
}}();
MP_Util.Doc=function(){var isExpandedAll=false;
return{InitMPageTabLayout:function(arMapObjects,title){var arItems=[];
var sc="",helpFile="",helpURL="",debugInd=false;
var bDisplayBanner=false;
var criterion=null;
var custInd=true;
var anchorArray=null;
for(var x=0,xl=arMapObjects.length;
x<xl;
x++){var key=arMapObjects[x].name;
var page=arMapObjects[x].value;
criterion=page.getCriterion();
arItems.push(new MP_Core.TabItem(key,page.getName(),page.getComponents(),criterion.category_mean));
sc=criterion.static_content;
debugInd=criterion.debug_ind;
helpFile=page.getHelpFileName();
helpURL=page.getHelpFileURL();
custInd=page.getCustomizeEnabled();
anchorArray=page.getTitleAnchors();
if(page.isBannerEnabled()){bDisplayBanner=page.isBannerEnabled();
}}MP_Util.Doc.InitTabLayout(arItems,title,sc,helpFile,helpURL,bDisplayBanner,0,criterion,custInd,anchorArray);
},InitTabLayout:function(arTabItems,title,sc,helpFile,helpURL,includeBanner,debugInd,criterion,custInd,anchorArray){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,debugInd,custInd,anchorArray);
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(includeBanner){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
AddPageTabs(arTabItems,body);
CERN_TabManagers=[];
for(var x=0,xl=arTabItems.length;
x<xl;
x++){var tabItem=arTabItems[x];
var tabManager=new MP_Core.TabManager(tabItem);
if(x==0){tabManager.setSelectedTab(true);
}CERN_TabManagers.push(tabManager);
CreateLiquidLayout(tabItem.components,_g(arTabItems[x].key));
}MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},InitLayout:function(mPage){var body=document.body;
var i18nCore=i18n.discernabu;
var criterion=mPage.getCriterion();
MP_Util.Doc.AddPageTitle(mPage.getName(),body,criterion.debug_ind,mPage.getCustomizeEnabled(),mPage.getTitleAnchors());
var sc=criterion.static_content;
var helpFile=mPage.getHelpFileName();
var helpURL=mPage.getHelpFileURL();
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(mPage.isBannerEnabled()){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
CreateLiquidLayout(mPage.getComponents(),body);
MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},CustomizeLayout:function(title,components){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,0,false,null);
MP_Util.Doc.AddClearPreferences(body);
MP_Util.Doc.AddSavePreferences(body);
body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.USER_CUST_DISCLAIMER+"</span></div>";
var compAr=[];
for(var x=components.length;
x--;
){var component=components[x];
if(component.getColumn()!=99){compAr.push(component);
}}CreateCustomizeLiquidLayout(compAr,body);
SetupExpandCollapse();
},GetComments:function(par,personnelArray){var com="",recDate="";
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
for(var j=0,m=par.COMMENTS.length;
j<m;
j++){if(personnelArray.length!=null){if(par.COMMENTS[j].RECORDED_BY){perCodeObj=MP_Util.GetValueFromArray(par.COMMENTS[j].RECORDED_BY,personnelArray);
}if(par.COMMENTS[j].RECORDED_DT_TM!=""){recDate=df.formatISO8601(par.COMMENTS[j].RECORDED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}if(j>0){com+="<br />";
}com+=recDate+" -  "+perCodeObj.fullName+"<br />"+par.COMMENTS[j].COMMENT_TEXT;
}}return com;
},FinalizeComponent:function(contentHTML,component,countText){var styles=component.getStyles();
var rootComponentNode=component.getRootComponentNode();
var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=countText;
var node=component.getSectionContentNode();
node.innerHTML=contentHTML;
MP_Util.Doc.InitHovers(styles.getInfo(),node);
MP_Util.Doc.InitSubToggles(node,"sub-sec-hd-tgl");
MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",node,"div"),component.getScrollNumber(),"1.6");
},InitScrolling:function(content,num,ht){for(var k=0;
k<content.length;
k++){MP_Util.Doc.InitSectionScrolling(content[k],num,ht);
}},InitSectionScrolling:function(sec,num,ht){var th=num*ht;
var totalHeight=th+"em";
sec.style.height=totalHeight;
sec.style.overflowY="scroll";
sec.style.overflowX="hidden";
},InitHovers:function(trg,par){gen=Util.Style.g(trg,par,"DL");
for(var i=0,l=gen.length;
i<l;
i++){var m=gen[i];
if(m){var nm=Util.gns(Util.gns(m));
if(nm){if(Util.Style.ccss(nm,"hvr")){hs(m,nm);
}}}}},InitSubToggles:function(par,tog){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g(tog,par,"span");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}},ExpandCollapseAll:function(){var i18nCore=i18n.discernabu;
var allSections=Util.Style.g("section");
var expNode=_g("expAll");
if(isExpandedAll){for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.acss(allSections[i],"closed");
secHandle.innerHTML="+";
secHandle.title=i18nCore.SHOW_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.acss(allSubSections[j],"closed");
subSecTgl.innerHTML="+";
subSecTgl.title=i18nCore.SHOW_SECTION;
}}expNode.innerHTML=i18nCore.EXPAND_ALL;
}isExpandedAll=false;
}else{for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.rcss(allSections[i],"closed");
secHandle.innerHTML="-";
secHandle.title=i18nCore.HIDE_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.rcss(allSubSections[j],"closed");
subSecTgl.innerHTML="-";
subSecTgl.title=i18nCore.HIDE_SECTION;
}}expNode.innerHTML=i18nCore.COLLAPSE_ALL;
}isExpandedAll=true;
}},AddPageTitle:function(title,bodyTag,debugInd,custInd,anchorArray){var i18nCore=i18n.discernabu;
var ar=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<div class='pg-hd'>");
ar.push("<h1><span class=pg-title>",title,"</span></h1><span id=pageCtrl class=page-ctrl>");
if(anchorArray!=null){for(var x=0,xl=anchorArray.length;
x<xl;
x++){ar.push(anchorArray[x]);
}}ar.push("<a id=expAll onclick='javascript:MP_Util.Doc.ExpandCollapseAll()'>",i18nCore.EXPAND_ALL,"</a>");
if(custInd){ar.push("<a id=custView></a>");
}ar.push("<a id=helpMenu></a></span></div>");
bodyTag.innerHTML+=ar.join("");
return;
},AddHelpLink:function(staticContent,helpFile){var i18nCore=i18n.discernabu;
if(helpFile!=null&&helpFile!=""){var helpNode=_g("helpMenu");
helpNode.href=staticContent+"\\html\\"+helpFile;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddHelpURL:function(staticContent,url){var i18nCore=i18n.discernabu;
if(url!=null&&url!=""){var helpNode=_g("helpMenu");
helpNode.href=url;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddClearPreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var clearPrefNode=Util.cep("A",{id:"clearPrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.ClearPreferences();"});
clearPrefNode.innerHTML=i18nCore.CLEAR_PREFERENCES;
Util.ac(clearPrefNode,pageCtrl);
},AddSavePreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var savePrefNode=Util.cep("A",{id:"savePrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.SavePreferences();"});
savePrefNode.innerHTML=i18nCore.SAVE_PREFERENCES;
Util.ac(savePrefNode,pageCtrl);
},AddCustomizeLink:function(criterion){var i18nCore=i18n.discernabu;
var custNode=_g("custView");
if(custNode!=null){custNode.innerHTML=i18nCore.CUSTOMIZE;
var compReportIds=GetPageReportIds();
custNode.href=criterion.static_content+"\\user-customization\\html\\cust.html?personnelId="+criterion.provider_id+"&positionCd="+criterion.position_cd+"&categoryMean="+GetPreferenceIdentifier()+"&localeId="+criterion.locale_id;
custNode.href+=(compReportIds.length>0)?"&reportIds="+compReportIds.join(","):"";
}},RenderLayout:function(){if(CERN_TabManagers!=null){var tabManager=null;
if(window.name.length>0){var paramList=window.name.split(",");
MP_Util.DisplaySelectedTab(paramList[0],paramList[1]);
}else{tabManager=CERN_TabManagers[0];
tabManager.setSelectedTab(true);
tabManager.loadTab();
}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var comp=CERN_MPageComponents[x];
if(comp.isDisplayable()){comp.InsertData();
}}}}},ExpandCollapse:function(){var i18nCore=i18n.discernabu;
var gpp=Util.gp(Util.gp(this));
if(Util.Style.ccss(gpp,"closed")){Util.Style.rcss(gpp,"closed");
this.innerHTML="-";
this.title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(gpp,"closed");
this.innerHTML="+";
this.title=i18nCore.SHOW_SECTION;
}}};
function GetPreferenceIdentifier(){var prefIdentifier="";
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
return tabItem.prefIdentifier;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var criterion=CERN_MPageComponents[x].getCriterion();
return criterion.category_mean;
}}}return prefIdentifier;
}function GetPageReportIds(){var ar=[];
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
var components=tabItem.components;
if(components!=null&&components.length>0){for(var y=components.length;
y--;
){ar.push(components[y].getReportId());
}}break;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){ar.push(CERN_MPageComponents[x].getReportId());
}}}return ar;
}function GetComponentArray(components){var grpAr=[];
var colAr=[];
var rowAr=[];
var curCol=-1;
var curGrp=-1;
var sHTML=[];
if(components!=null){components.sort(SortMPageComponents);
for(var x=0,xl=components.length;
x<xl;
x++){var component=components[x];
if(CERN_MPageComponents==null){CERN_MPageComponents=[];
}CERN_MPageComponents.push(component);
if(component.isDisplayable()){var compGrp=component.getPageGroupSequence();
var compCol=component.getColumn();
if(compGrp!=curGrp){curCol=-1;
colAr=[];
grpAr.push(colAr);
curGrp=compGrp;
}if(compCol!=curCol){rowAr=[];
colAr.push(rowAr);
curCol=compCol;
}rowAr.push(component);
}}}return grpAr;
}function CreateCustomizeLiquidLayout(components,parentNode){var sHTML=[];
var grpAr=GetComponentArray(components);
sHTML.push("<div class=pref-columns>");
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
sHTML.push("<div class='col-group three-col'>");
sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var comps=colAr[y];
var colClassName="col"+(y+1)+" cust-col";
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}for(var y=colLen+1;
y<=3;
y++){var colClassName="col"+(y)+" cust-col";
sHTML.push("<div class='",colClassName,"'></div>");
}sHTML.push("</div></div></div></div>");
}sHTML.push("</div>");
parentNode.innerHTML+=sHTML.join("");
}function CreateLiquidLayout(components,parentNode){var grpAr=GetComponentArray(components);
var sHTML=[];
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
if(colLen==1){sHTML.push("<div class='col-group one-col'>");
}else{if(colLen==2){sHTML.push("<div class='col-group two-col'>");
}else{sHTML.push("<div class='col-group three-col'>");
}}sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var colClassName="col"+(y+1);
var comps=colAr[y];
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}sHTML.push("</div></div></div></div>");
}parentNode.innerHTML+=sHTML.join("");
}function SetupExpandCollapse(){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g("sec-hd-tgl");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}}function CreateCompDiv(component){var i18nCore=i18n.discernabu;
var ar=[];
var style=component.getStyles();
var ns=style.getNameSpace();
var compId=style.getId();
var secClass=style.getClassName();
var tabLink=component.getLink();
var loc=component.getCriterion().static_content;
var tglCode=(!component.isAlwaysExpanded())?["<span class='",style.getHeaderToggle(),"' title='",i18nCore.HIDE_SECTION,"'>-</span>"].join(""):"";
if(!component.isExpanded()&&!component.isAlwaysExpanded()){secClass+=" closed";
}var sAnchor=(tabLink!=""&&component.getCustomizeView()==false)?CreateComponentAnchor(component):component.getLabel();
ar.push("<div id='",style.getId(),"' class='",secClass,"'>","<h2 class='",style.getHeaderClass(),"'>",tglCode,"<span class='",style.getTitle(),"'><span>",sAnchor,"</span>");
if(component.getCustomizeView()==false){ar.push("<span class='",style.getTotal(),"'>",i18nCore.LOADING_DATA+"...","</span>");
if(component.isPlusAddEnabled()){ar.push("<a id='",ns,"Add' class=addPlus href=javascript:MP_Util.OpenTab('",compId,"');><img src='",loc,"\\images\\3941.gif'>",i18nCore.ADD,"</a>");
var menuItems=component.getMenuItems();
if(menuItems!=null||menuItems>0){var menuId=compId+"Menu";
ar.push("<a id='",ns,"Drop' class='drop-Down'><img src='",loc,"\\images\\3943_16.gif' onclick='javascript:MP_Util.LaunchMenu(\"",menuId,'", "',compId,"\");'></a>");
ar.push("<div class='form-menu menu-hide' id='",menuId,"'><span>");
for(var x=0,xl=menuItems.length;
x<xl;
x++){var item=menuItems[x];
ar.push("<div>");
ar.push("<a id='lnkID",x,"' href='#' onclick='javascript:MP_Util.LaunchMenuSelection(\"",compId,'",',item.getId(),");'>",item.getDescription(),"</a>");
ar.push("</div>");
}ar.push("</span></div>");
}}}ar.push("</span></h2>");
if(component.getCustomizeView()==false){if(component.getScope()>0){ar.push("<div class=sub-title-disp>",CreateSubTitleText(component),"</div>");
}}ar.push("<div id='",style.getContentId(),"' class='",style.getContentClass(),"'></div></div>");
var arHtml=ar.join("");
return arHtml;
}function CreateSubTitleText(component){var i18nCore=i18n.discernabu;
var subTitleText="";
var scope=component.getScope();
var lookbackDays=component.getLookbackDays();
var lookbackUnits=(lookbackDays>0)?lookbackDays:component.getLookbackUnits();
var lookbackFlag=(lookbackDays>0)?2:component.getLookbackUnitTypeFlag();
if(scope>0){if(lookbackFlag>0&&lookbackUnits>0){var replaceText="";
switch(lookbackFlag){case 1:replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookbackUnits);
break;
case 2:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookbackUnits);
break;
case 3:replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookbackUnits);
break;
case 4:replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookbackUnits);
break;
case 5:replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookbackUnits);
break;
}switch(scope){case 1:subTitleText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
break;
case 2:subTitleText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
break;
}}else{switch(scope){case 1:subTitleText=i18nCore.All_VISITS;
break;
case 2:subTitleText=i18nCore.SELECTED_VISIT;
break;
}}}return subTitleText;
}function CreateComponentAnchor(component){var i18nCore=i18n.discernabu;
var style=component.getStyles();
var criterion=component.getCriterion();
var sParms='javascript:APPLINK(0,"'+criterion.executable+'","/PERSONID='+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+component.getLink()+'^")';
var sAnchor="<a id="+style.getLink()+" title='"+i18nCore.GO_TO_TAB.replace("{0}",component.getLink())+"' href='"+sParms+"'>"+component.getLabel()+"</a>";
return sAnchor;
}function AddPageTabs(items,bodyTag){var ar=[];
var divAr=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<ul class=tabmenu>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
var activeInd=(x==0)?1:0;
ar.push(CreateTabLi(item,activeInd,x));
divAr.push("<div id='",item.key,"' class='div-tab-item'></div>");
}ar.push("</ul>");
bodyTag.innerHTML+=(ar.join("")+divAr.join(""));
}function CreateTabLi(item,activeInd,sequence){var ar=[];
var tabName="";
tabName=item.name;
ar.push("<li>");
var seqClass="a-tab"+sequence;
if(activeInd){ar.push("<a id='",seqClass,"' class='anchor-tab-item active' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}else{ar.push("<a id='",seqClass,"' class='anchor-tab-item inactive' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}ar.push("</li>");
return(ar.join(""));
}}();
MP_Util.Measurement=function(){var m_nf=null;
return{GetString:function(result,codeArray,dateMask){var obj=MP_Util.Measurement.GetObject(result,codeArray);
if(obj instanceof MP_Core.QuantityValue){return obj.toString();
}else{if(obj instanceof Date){return obj.format(dateMask);
}else{return obj;
}}},GetObject:function(result,codeArray){switch(result.CLASSIFICATION.toUpperCase()){case"QUANTITY_VALUE":return GetQuantityValue(result,codeArray);
case"STRING_VALUE":return(GetStringValue(result));
case"DATE_VALUE":return(GetDateValue(result));
case"CODE_VALUE":return(GetCodedResult(result));
case"ENCAPSULATED_VALUE":return(GetEncapsulatedValue(result));
}},SetPrecision:function(num,dec){var nf=GetNumericFormatter();
return nf.format(num,"^."+dec);
}};
function GetNumericFormatter(){if(m_nf==null){m_nf=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_nf;
}function GetEncapsulatedValue(result){var encap=result.ENCAPSULATED_VALUE;
var ar=[];
for(var n=0,nl=encap.length;
n<nl;
n++){var txt=encap[n].TEXT_PLAIN;
if(txt!=null&&txt.length>0){ar.push(txt);
}}return ar.join("");
}function GetQuantityValue(result,codeArray){var qv=new MP_Core.QuantityValue();
qv.init(result,codeArray);
return qv;
}function GetDateValue(result){for(var x=0,xl=result.DATE_VALUE.length;
x<xl;
x++){var date=result.DATE_VALUE[x];
if(date.DATE!=""){var dateTime=new Date();
dateTime.setISO8601(date.DATE);
return dateTime;
}}return null;
}function GetCodedResult(result){var cdValue=result.CODE_VALUE;
var ar=[];
for(var n=0,nl=cdValue.length;
n<nl;
n++){var values=cdValue[n].VALUES;
for(var p=0,pl=values.length;
p<pl;
p++){ar.push(values[p].SOURCE_STRING);
}var sOther=cdValue[n].OTHER_RESPONSE;
if(sOther!=""){ar.push(sOther);
}}return ar.join(", ");
}function GetStringValue(result){var strValue=result.STRING_VALUE;
var ar=[];
for(var n=0,nl=strValue.length;
n<nl;
n++){ar.push(strValue[n].VALUE);
}return ar.join(", ");
}}();
document.getElementsByClassName=function(cl,e){var retnode=[];
var clssnm=new RegExp("\\b"+cl+"\\b");
var elem=this.getElementsByTagName("*",e);
for(var u=0;
u<elem.length;
u++){var classes=elem[u].className;
if(clssnm.test(classes)){retnode.push(elem[u]);
}}return retnode;
};
Function.prototype.bind=function(object){var method=this;
return function(){return method.apply(object,arguments);
};
};
function EventListener(){this.events=[];
this.builtinEvts=[];
}EventListener.prototype.getActionIdx=function(obj,evt,action,binding){if(obj&&evt){var curel=this.events[obj][evt];
if(curel){var len=curel.length;
for(var i=len-1;
i>=0;
i--){if(curel[i].action==action&&curel[i].binding==binding){return i;
}}}else{return -1;
}}return -1;
};
EventListener.prototype.addListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){if(this.getActionIdx(obj,evt,action,binding)==-1){var curevt=this.events[obj][evt];
curevt[curevt.length]={action:action,binding:binding};
}}else{this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}}else{this.events[obj]=[];
this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}};
EventListener.prototype.removeListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){var idx=this.getActionIdx(obj,evt,action,binding);
if(idx>=0){this.events[obj][evt].splice(idx,1);
}}}};
EventListener.prototype.removeAllListeners=function(obj,binding){if(this.events[obj]){for(var el=this.events[obj].length;
el--;
){if(this.events[obj][el]){for(var ev=this.events[obj][el].length;
ev--;
){if(this.events[obj][el][ev].binding==binding){this.events[obj][el].splice(ev,1);
}}}}}};
EventListener.prototype.fireEvent=function(e,obj,evt,args){if(!e){e=window.event;
}if(obj&&this.events){var evtel=this.events[obj];
if(evtel){var curel=evtel[evt];
if(curel){for(var act=curel.length;
act--;
){var action=curel[act].action;
if(curel[act].binding){action=action.bind(curel[act].binding);
}action(e,args);
}}}}};
CERN_EventListener=new EventListener();
EventListener.EVENT_CLINICAL_EVENT=1;
EventListener.EVENT_ORDER_ACTION=2;
function BedrockMPage(categoryMean,componentMapping){this.mean=categoryMean;
this.componentMapping=componentMapping;
BedrockMPage.method("getCategoryMean",function(){return mean;
});
}BedrockMPage.inherits(MPage);
function BedrockMPageGroupValue(){m_sequence=0;
m_description="";
MPageGroupValue.method("getSequence",function(){return this.m_sequence;
});
MPageGroupValue.method("setSequence",function(value){this.m_sequence=value;
});
MPageGroupValue.method("getDescription",function(){return this.m_description;
});
MPageGroupValue.method("setDescription",function(value){this.m_description=value;
});
}BedrockMPageGroupValue.inherits(MPageGroupValue);
var MP_Bedrock=function(){return{CreateBedrockMPage:function(categoryMean,componentMapping,criterion,funcFilterMapping,compFuncFilterMapping){var returnPage=new BedrockMPage(categoryMean,componentMapping);
returnPage.setCriterion(criterion);
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(info.readyState==4&&info.status==200){var jsonText=JSON.parse(info.responseText);
returnPage.setPageId(jsonText.RECORD_DATA.BR_DATAMART_CATEGORY_ID);
var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}returnPage.setComponents(LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping));
}};
PlaceRequest(info,"GET","MP_GET_BRSEC_PARAMS",false,"^MINE^, ^"+categoryMean+"^");
if(info.readyState==4&&info.status==200){var jsonText=JSON.parse(info.responseText);
returnPage.setPageId(jsonText.RECORD_DATA.BR_DATAMART_CATEGORY_ID);
var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}returnPage.setComponents(LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping));
}return returnPage;
}};
function LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping){var components=[];
var section=jsonText.RECORD_DATA.SECTION;
for(var x=0,xl=section.length;
x<xl;
x++){var jsonSection=section[x];
var componentType=MP_Util.GetValueFromArray(jsonSection.BEDROCK_NAME,componentMapping);
if(componentType!=null){var jsComponentFunc=null;
var componentFunc=MP_Util.GetValueFromArray(jsonSection.BEDROCK_NAME,compFuncFilterMapping);
if(componentFunc!=null){jsComponentFunc=JSON.parse(componentFunc);
}var component=new componentType(criterion);
InitializeBedrockComponent(component,jsonSection,jsComponentFunc);
components.push(component);
}}components.sort(SortMPageComponents);
return(components);
}function InitializeBedrockComponent(component,jsonComponent,jsComponentFunc){component.setComponentId(jsonComponent.BR_DATAMART_FILTER_ID);
component.setLabel(jsonComponent.LABEL);
component.setColumn(jsonComponent.COL_SEQ);
component.setSequence(jsonComponent.ROW_SEQ);
component.setLink(jsonComponent.LINK);
component.setResultsDisplayEnabled(jsonComponent.TOTAL_RESULTS);
component.setXofYEnabled(jsonComponent.X_OF_Y);
component.setExpanded(jsonComponent.EXPANDED);
component.setScrollNumber(jsonComponent.SCROLL_NUM);
component.setScrollingEnabled(jsonComponent.SCROLL_ENABLED);
component.setLookbackDays(jsonComponent.LOOKBACK_DAYS);
component.setPlusAddEnabled((jsonComponent.ISPLUSADD==1?true:false));
component.setLookbackUnits(jsonComponent.LOOKBACKUNITS);
component.setLookbackUnitTypeFlag(jsonComponent.LOOKBACKTYPEFLAG);
component.setDateFormat(jsonComponent.DATE_DISPLAY_FLAG);
if(component.getScope()==0){component.setScope(jsonComponent.SCOPE);
}for(var x=0,xl=jsonComponent.FILTER.length;
x<xl;
x++){var filter=jsonComponent.FILTER[x];
switch(filter.FILTER_CATEGORY_MEAN){case"EVENT":var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
break;
}}var eGroup=new MPageEventCodeGroup();
for(var y=0,yl=aValue.length;
y<yl;
y++){eGroup.addEventCode(aValue[y].getId());
}eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"EVENT_SET":case"PRIM_EVENT_SET":var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
break;
}}var eGroup=new MPageEventSetGroup();
for(var y=0,yl=aValue.length;
y<yl;
y++){eGroup.addEventSet(aValue[y].getId());
}eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"EVENT_SEQ":var groups=component.getGroups();
if(groups!=null){for(var y=0,yl=groups.length;
y<yl;
y++){var group=groups[y];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventCodes(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){group.addEventCode(aValue[z].getId());
}}}}break;
case"EVENT_SET_SEQ":var groups=component.getGroups();
if(groups!=null){for(var y=0,yl=groups.length;
y<yl;
y++){var group=groups[y];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventSets(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){group.addEventSet(aValue[z].getId());
}}}}break;
default:var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
}}}}}function GetAssociatedGroup(filterMean,groups){for(var x=0,xl=groups.length;
x<xl;
x++){if(groups[x].getGroupName()==filterMean){return groups[x];
}}return null;
}function GetFilterValues(jsonFilter){var aReturn=[];
for(var x=0,xl=jsonFilter.VALUES.length;
x<xl;
x++){var jsonValue=jsonFilter.VALUES[x];
var value=new BedrockMPageGroupValue();
value.setId(jsonValue.PARENT_ENTITY_ID);
value.setName(jsonValue.PARENT_ENTITY_NAME);
value.setDescription(jsonValue.FREETEXT_DESC);
value.setSequence(jsonValue.GROUP_SEQ);
aReturn.push(value);
}return aReturn;
}function GetFunctionByFilterMean(jsFuncs,mean){var funcs=jsFuncs.FUNCTIONS;
for(var x=0,xl=funcs.length;
x<xl;
x++){var func=funcs[x];
if(func.FILTER_MEAN==mean){return funcs[x];
}}return null;
}function GetValueFromComponentFunc(func,aValues){var ar=[];
for(var x=0,xl=aValues.length;
x<xl;
x++){switch(func.FIELD){case"FREETEXT_DESC":ar.push(aValues[x].getDescription());
break;
case"PARENT_ENTITY_ID":ar.push(aValues[x].getId());
break;
default:break;
}}var strFunc="";
if(func.TYPE=="Array"){strFunc="component."+func.NAME+"(["+ar.join(",")+"])";
}else{strFunc="component."+func.NAME+"("+ar.join(",")+")";
}return strFunc;
}function SetComponentAttribute(component,func,value){var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}}}();
var color_functions=function(hex){return{GetComplement:function(hex,tint){var r,g,b,ra,ga,ba;
var rgb=Hex2RGB(hex);
r=rgb.r;
b=rgb.b;
g=rgb.g;
ra=Math.round(r+(255-r)*tint);
ga=Math.round(g+(255-g)*tint);
ba=Math.round(b+(255-b)*tint);
return RGB2Hex(ra,ga,ba);
}};
function Dec2Hex(d){var hexdig="0123456789ABCDEF";
return hexdig.charAt((d-(d%16))/16)+hexdig.charAt(d%16);
}function RGB2Hex(r,g,b){return Dec2Hex(r)+Dec2Hex(g)+Dec2Hex(b);
}function Hex2RGB(hex){var m=hex.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);
var rgb=new Object();
if(!m){return false;
}else{if(m[1].length===6){rgb={r:parseInt(m[1].substr(0,2),16),g:parseInt(m[1].substr(2,2),16),b:parseInt(m[1].substr(4,2),16)};
}else{rgb={r:parseInt(m[1].charAt(0)+m[1].charAt(0),16),g:parseInt(m[1].charAt(1)+m[1].charAt(1),16),b:parseInt(m[1].charAt(2)+m[1].charAt(2),16)};
}return rgb;
}}}();
(function($){$.fn.gradient=function(options){options=$.extend({from:"000000",to:"ffffff",direction:"horizontal",position:"top",length:null},options||{});
var createColorPath=function(startColor,endColor,distance){var colorPath=[],colorPercent=1,distance=(distance<100)?distance:100;
do{colorPath[colorPath.length]=setColorHue(longHexToDec(startColor),colorPercent,longHexToDec(endColor));
colorPercent-=((100/distance)*0.01);
}while(colorPercent>0);
return colorPath;
},setColorHue=function(originColor,opacityPercent,maskRGB){var returnColor=[];
for(var i=0;
i<originColor.length;
i++){returnColor[i]=Math.round(originColor[i]*opacityPercent)+Math.round(maskRGB[i]*(1-opacityPercent));
}return returnColor;
},longHexToDec=function(longHex){return new Array(toDec(longHex.substring(0,2)),toDec(longHex.substring(2,4)),toDec(longHex.substring(4,6)));
},toDec=function(hex){return parseInt(hex,16);
};
return this.each(function(){var $this=$(this),width=$this.innerWidth(),height=$this.innerHeight(),x=0,y=0,w=1,h=1,html=[],length=options.length||(options.direction=="vertical"?width:height),position=(options.position=="bottom"?"bottom:0;":"top:0;")+(options.position=="right"?"right:0;":"left:0;"),colorArray=createColorPath(options.from,options.to,length);
if(options.direction=="horizontal"){h=Math.round(length/colorArray.length)||1;
w=width;
}else{w=Math.round(length/colorArray.length)||1;
h=height;
}html.push('<div class="gradient" style="');
if((ieVersion<7)&&(ieVersion>0)){html.push("position: absolute; ");
}html.push(position+" width: "+(options.direction=="vertical"?length+"px":"100%")+"; height: "+(options.direction=="vertical"?"100%":length+"px")+"; overflow: hidden; z-index: 0; background-color: #"+(options.position.indexOf("bottom")!=-1?options.from:options.to)+'">');
for(var i=0;
i<colorArray.length;
i++){html.push('<div style="');
if((ieVersion<7)&&(ieVersion>0)){html.push("position: absolute; ");
}html.push("z-index:1;top:"+y+"px;left:"+x+"px;height:"+(options.direction=="vertical"?"100%":h+"px")+";width:"+(options.direction=="vertical"?w+"px":"100%")+";background-color:rgb("+colorArray[i][0]+","+colorArray[i][1]+","+colorArray[i][2]+');"></div>');
options.direction=="vertical"?x+=w:y+=h;
if(y>=height||x>=width){break;
}}html.push("</div>");
if($this.css("position")=="static"){$this.css("position","relative");
}$this.html('<div style="display:'+$this.css("display")+'; position: relative; z-index: 2;">'+this.innerHTML+"</div>").prepend(html.join(""));
});
};
})(jQuery);
var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init);
},init:function(){if(jscolor.binding){jscolor.bind();
}if(jscolor.preloading){jscolor.preload();
}},getDir:function(){if(!jscolor.dir){var detected=jscolor.detectDir();
jscolor.dir=detected!==false?detected:"jscolor/";
}return jscolor.dir;
},detectDir:function(){var base=location.href;
var e=document.getElementsByTagName("base");
for(var i=0;
i<e.length;
i+=1){if(e[i].href){base=e[i].href;
}}var e=document.getElementsByTagName("script");
for(var i=0;
i<e.length;
i+=1){if(e[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[i].src)){var src=new jscolor.URI(e[i].src);
var srcAbs=src.toAbsolute(base);
srcAbs.path=srcAbs.path.replace(/[^\/]+$/,"");
srcAbs.query=null;
srcAbs.fragment=null;
return srcAbs.toString();
}}return false;
},bind:function(){var matchClass=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");
var e=document.getElementsByTagName("input");
for(var i=0;
i<e.length;
i+=1){var m;
if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};
if(m[3]){try{eval("prop="+m[3]);
}catch(eInvalidProp){}}e[i].color=new jscolor.color(e[i],prop);
}}},preload:function(){for(var fn in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(fn)){jscolor.loadImage(fn);
}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(filename){jscolor.imgRequire[filename]=true;
},loadImage:function(filename){if(!jscolor.imgLoaded[filename]){jscolor.imgLoaded[filename]=new Image();
jscolor.imgLoaded[filename].src=jscolor.getDir()+filename;
}},fetchElement:function(mixed){return typeof mixed==="string"?document.getElementById(mixed):mixed;
},addEvent:function(el,evnt,func){if(el.addEventListener){el.addEventListener(evnt,func,false);
}else{if(el.attachEvent){el.attachEvent("on"+evnt,func);
}}},fireEvent:function(el,evnt){if(!el){return;
}if(document.createEventObject){var ev=document.createEventObject();
el.fireEvent("on"+evnt,ev);
}else{if(document.createEvent){var ev=document.createEvent("HTMLEvents");
ev.initEvent(evnt,true,true);
el.dispatchEvent(ev);
}else{if(el["on"+evnt]){el["on"+evnt]();
}}}},getElementPos:function(e){var e1=e,e2=e;
var x=0,y=0;
if(e1.offsetParent){do{x+=e1.offsetLeft;
y+=e1.offsetTop;
}while(e1=e1.offsetParent);
}while((e2=e2.parentNode)&&e2.nodeName.toUpperCase()!=="BODY"){x-=e2.scrollLeft;
y-=e2.scrollTop;
}return[x,y];
},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight];
},getMousePos:function(e){if(!e){e=window.event;
}if(typeof e.pageX==="number"){return[e.pageX,e.pageY];
}else{if(typeof e.clientX==="number"){return[e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY+document.body.scrollTop+document.documentElement.scrollTop];
}}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset];
}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop];
}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop];
}else{return[0,0];
}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight];
}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight];
}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight];
}else{return[0,0];
}}}},URI:function(uri){this.scheme=null;
this.authority=null;
this.path="";
this.query=null;
this.fragment=null;
this.parse=function(uri){var m=uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);
this.scheme=m[3]?m[2]:null;
this.authority=m[5]?m[6]:null;
this.path=m[7];
this.query=m[9]?m[10]:null;
this.fragment=m[12]?m[13]:null;
return this;
};
this.toString=function(){var result="";
if(this.scheme!==null){result=result+this.scheme+":";
}if(this.authority!==null){result=result+"//"+this.authority;
}if(this.path!==null){result=result+this.path;
}if(this.query!==null){result=result+"?"+this.query;
}if(this.fragment!==null){result=result+"#"+this.fragment;
}return result;
};
this.toAbsolute=function(base){var base=new jscolor.URI(base);
var r=this;
var t=new jscolor.URI;
if(base.scheme===null){return false;
}if(r.scheme!==null&&r.scheme.toLowerCase()===base.scheme.toLowerCase()){r.scheme=null;
}if(r.scheme!==null){t.scheme=r.scheme;
t.authority=r.authority;
t.path=removeDotSegments(r.path);
t.query=r.query;
}else{if(r.authority!==null){t.authority=r.authority;
t.path=removeDotSegments(r.path);
t.query=r.query;
}else{if(r.path===""){t.path=base.path;
if(r.query!==null){t.query=r.query;
}else{t.query=base.query;
}}else{if(r.path.substr(0,1)==="/"){t.path=removeDotSegments(r.path);
}else{if(base.authority!==null&&base.path===""){t.path="/"+r.path;
}else{t.path=base.path.replace(/[^\/]+$/,"")+r.path;
}t.path=removeDotSegments(t.path);
}t.query=r.query;
}t.authority=base.authority;
}t.scheme=base.scheme;
}t.fragment=r.fragment;
return t;
};
function removeDotSegments(path){var out="";
while(path){if(path.substr(0,3)==="../"||path.substr(0,2)==="./"){path=path.replace(/^\.+/,"").substr(1);
}else{if(path.substr(0,3)==="/./"||path==="/."){path="/"+path.substr(3);
}else{if(path.substr(0,4)==="/../"||path==="/.."){path="/"+path.substr(4);
out=out.replace(/\/?[^\/]*$/,"");
}else{if(path==="."||path===".."){path="";
}else{var rm=path.match(/^\/?[^\/]*/)[0];
path=path.substr(rm.length);
out=out+rm;
}}}}}return out;
}if(uri){this.parse(uri);
}},color:function(target,prop){this.required=true;
this.adjust=true;
this.hash=false;
this.caps=true;
this.valueElement=target;
this.styleElement=target;
this.hsv=[0,0,1];
this.rgb=[1,1,1];
this.pickerOnfocus=true;
this.pickerMode="HSV";
this.pickerPosition="bottom";
this.pickerFace=10;
this.pickerFaceColor="ThreeDFace";
this.pickerBorder=1;
this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";
this.pickerInset=1;
this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";
this.pickerZIndex=10000;
for(var p in prop){if(prop.hasOwnProperty(p)){this[p]=prop[p];
}}this.hidePicker=function(){if(isPickerOwner()){removePicker();
}};
this.showPicker=function(){if(!isPickerOwner()){var tp=jscolor.getElementPos(target);
var ts=jscolor.getElementSize(target);
var vp=jscolor.getViewPos();
var vs=jscolor.getViewSize();
var ps=[2*this.pickerBorder+4*this.pickerInset+2*this.pickerFace+jscolor.images.pad[0]+2*jscolor.images.arrow[0]+jscolor.images.sld[0],2*this.pickerBorder+2*this.pickerInset+2*this.pickerFace+jscolor.images.pad[1]];
var a,b,c;
switch(this.pickerPosition.toLowerCase()){case"left":a=1;
b=0;
c=-1;
break;
case"right":a=1;
b=0;
c=1;
break;
case"top":a=0;
b=1;
c=-1;
break;
default:a=0;
b=1;
c=1;
break;
}var l=(ts[b]+ps[b])/2;
var pp=[-vp[a]+tp[a]+ps[a]>vs[a]?(-vp[a]+tp[a]+ts[a]/2>vs[a]/2&&tp[a]+ts[a]-ps[a]>=0?tp[a]+ts[a]-ps[a]:tp[a]):tp[a],-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c>vs[b]?(-vp[b]+tp[b]+ts[b]/2>vs[b]/2&&tp[b]+ts[b]-l-l*c>=0?tp[b]+ts[b]-l-l*c:tp[b]+ts[b]-l+l*c):(tp[b]+ts[b]-l+l*c>=0?tp[b]+ts[b]-l+l*c:tp[b]+ts[b]-l-l*c)];
drawPicker(pp[a],pp[b]);
}};
this.importColor=function(){if(!valueElement){this.exportColor();
}else{if(!this.adjust){if(!this.fromString(valueElement.value,leaveValue)){styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;
styleElement.style.color=styleElement.jscStyle.color;
this.exportColor(leaveValue|leaveStyle);
}}else{if(!this.required&&/^\s*$/.test(valueElement.value)){valueElement.value="";
styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;
styleElement.style.color=styleElement.jscStyle.color;
this.exportColor(leaveValue|leaveStyle);
}else{if(this.fromString(valueElement.value)){}else{this.exportColor();
}}}}};
this.exportColor=function(flags){if(!(flags&leaveValue)&&valueElement){var value=this.toString();
if(this.caps){value=value.toUpperCase();
}if(this.hash){value="#"+value;
}valueElement.value=value;
}if(!(flags&leaveStyle)&&styleElement){styleElement.style.backgroundColor="#"+this.toString();
styleElement.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000";
}if(!(flags&leavePad)&&isPickerOwner()){redrawPad();
}if(!(flags&leaveSld)&&isPickerOwner()){redrawSld();
}};
this.fromHSV=function(h,s,v,flags){h<0&&(h=0)||h>6&&(h=6);
s<0&&(s=0)||s>1&&(s=1);
v<0&&(v=0)||v>1&&(v=1);
this.rgb=HSV_RGB(h===null?this.hsv[0]:(this.hsv[0]=h),s===null?this.hsv[1]:(this.hsv[1]=s),v===null?this.hsv[2]:(this.hsv[2]=v));
this.exportColor(flags);
};
this.fromRGB=function(r,g,b,flags){r<0&&(r=0)||r>1&&(r=1);
g<0&&(g=0)||g>1&&(g=1);
b<0&&(b=0)||b>1&&(b=1);
var hsv=RGB_HSV(r===null?this.rgb[0]:(this.rgb[0]=r),g===null?this.rgb[1]:(this.rgb[1]=g),b===null?this.rgb[2]:(this.rgb[2]=b));
if(hsv[0]!==null){this.hsv[0]=hsv[0];
}if(hsv[2]!==0){this.hsv[1]=hsv[1];
}this.hsv[2]=hsv[2];
this.exportColor(flags);
};
this.fromString=function(hex,flags){var m=hex.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);
if(!m){return false;
}else{if(m[1].length===6){this.fromRGB(parseInt(m[1].substr(0,2),16)/255,parseInt(m[1].substr(2,2),16)/255,parseInt(m[1].substr(4,2),16)/255,flags);
}else{this.fromRGB(parseInt(m[1].charAt(0)+m[1].charAt(0),16)/255,parseInt(m[1].charAt(1)+m[1].charAt(1),16)/255,parseInt(m[1].charAt(2)+m[1].charAt(2),16)/255,flags);
}return true;
}};
this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1));
};
function RGB_HSV(r,g,b){var n=Math.min(Math.min(r,g),b);
var v=Math.max(Math.max(r,g),b);
var m=v-n;
if(m===0){return[null,0,v];
}var h=r===n?3+(b-g)/m:(g===n?5+(r-b)/m:1+(g-r)/m);
return[h===6?0:h,m/v,v];
}function HSV_RGB(h,s,v){if(h===null){return[v,v,v];
}var i=Math.floor(h);
var f=i%2?h-i:1-(h-i);
var m=v*(1-s);
var n=v*(1-s*f);
switch(i){case 6:case 0:return[v,n,m];
case 1:return[n,v,m];
case 2:return[m,v,n];
case 3:return[m,n,v];
case 4:return[n,m,v];
case 5:return[v,m,n];
}}function removePicker(){delete jscolor.picker.owner;
document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB);
}function drawPicker(x,y){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div")};
for(var i=0,segSize=4;
i<jscolor.images.sld[1];
i+=segSize){var seg=document.createElement("div");
seg.style.height=segSize+"px";
seg.style.fontSize="1px";
seg.style.lineHeight="0";
jscolor.picker.sld.appendChild(seg);
}jscolor.picker.padM.className="jscolor_cross";
jscolor.picker.sldM.className="jscolor_arrow";
jscolor.picker.pad.className=modeID>0?"jscolor_pad_dark":"jscolor_pad_light";
jscolor.picker.sldB.appendChild(jscolor.picker.sld);
jscolor.picker.box.appendChild(jscolor.picker.sldB);
jscolor.picker.box.appendChild(jscolor.picker.sldM);
jscolor.picker.padB.appendChild(jscolor.picker.pad);
jscolor.picker.box.appendChild(jscolor.picker.padB);
jscolor.picker.box.appendChild(jscolor.picker.padM);
jscolor.picker.boxB.appendChild(jscolor.picker.box);
}var p=jscolor.picker;
posPad=[x+THIS.pickerBorder+THIS.pickerFace+THIS.pickerInset,y+THIS.pickerBorder+THIS.pickerFace+THIS.pickerInset];
posSld=[null,y+THIS.pickerBorder+THIS.pickerFace+THIS.pickerInset];
p.box.onmouseup=p.box.onmouseout=function(){target.focus();
};
p.box.onmousedown=function(){abortBlur=true;
};
p.box.onmousemove=function(e){holdPad&&setPad(e);
holdSld&&setSld(e);
};
p.padM.onmouseup=p.padM.onmouseout=function(){if(holdPad){holdPad=false;
jscolor.fireEvent(valueElement,"change");
}};
p.padM.onmousedown=function(e){holdPad=true;
setPad(e);
};
p.sldM.onmouseup=p.sldM.onmouseout=function(){if(holdSld){holdSld=false;
jscolor.fireEvent(valueElement,"change");
}};
p.sldM.onmousedown=function(e){holdSld=true;
setSld(e);
};
p.box.style.width=4*THIS.pickerInset+2*THIS.pickerFace+jscolor.images.pad[0]+2*jscolor.images.arrow[0]+jscolor.images.sld[0]+"px";
p.box.style.height=2*THIS.pickerInset+2*THIS.pickerFace+jscolor.images.pad[1]+"px";
p.boxB.style.position="absolute";
p.boxB.style.clear="both";
p.boxB.style.left=x+"px";
p.boxB.style.top=y+"px";
p.boxB.style.zIndex=THIS.pickerZIndex;
p.boxB.style.border=THIS.pickerBorder+"px solid";
p.boxB.style.borderColor=THIS.pickerBorderColor;
p.boxB.style.background=THIS.pickerFaceColor;
p.pad.style.width=jscolor.images.pad[0]+"px";
p.pad.style.height=jscolor.images.pad[1]+"px";
p.padB.style.position="absolute";
p.padB.style.left=THIS.pickerFace+"px";
p.padB.style.top=THIS.pickerFace+"px";
p.padB.style.border=THIS.pickerInset+"px solid";
p.padB.style.borderColor=THIS.pickerInsetColor;
p.padM.style.position="absolute";
p.padM.style.left="0";
p.padM.style.top="0";
p.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";
p.padM.style.height=p.box.style.height;
p.padM.style.cursor="crosshair";
p.sld.style.overflow="hidden";
p.sld.style.width=jscolor.images.sld[0]+"px";
p.sld.style.height=jscolor.images.sld[1]+"px";
p.sldB.style.position="absolute";
p.sldB.style.right=THIS.pickerFace+"px";
p.sldB.style.top=THIS.pickerFace+"px";
p.sldB.style.border=THIS.pickerInset+"px solid";
p.sldB.style.borderColor=THIS.pickerInsetColor;
p.sldM.style.position="absolute";
p.sldM.style.right="0";
p.sldM.style.top="0";
p.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px";
p.sldM.style.height=p.box.style.height;
try{p.sldM.style.cursor="pointer";
}catch(eOldIE){p.sldM.style.cursor="hand";
}switch(modeID){case 0:var padImg="hs.png";
break;
case 1:var padImg="hv.png";
break;
}redrawPad();
redrawSld();
jscolor.picker.owner=THIS;
document.getElementsByTagName("body")[0].appendChild(p.boxB);
}function redrawPad(){switch(modeID){case 0:var yComponent=1;
break;
case 1:var yComponent=2;
break;
}var x=Math.round((THIS.hsv[0]/6)*(jscolor.images.pad[0]-1));
var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.pad[1]-1));
jscolor.picker.padM.style.backgroundPosition=(THIS.pickerFace+THIS.pickerInset+x-Math.floor(jscolor.images.cross[0]/2))+"px "+(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.cross[1]/2))+"px";
var seg=jscolor.picker.sld.childNodes;
switch(modeID){case 0:var rgb=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1);
for(var i=0;
i<seg.length;
i+=1){seg[i].style.backgroundColor="rgb("+(rgb[0]*(1-i/seg.length)*100)+"%,"+(rgb[1]*(1-i/seg.length)*100)+"%,"+(rgb[2]*(1-i/seg.length)*100)+"%)";
}break;
case 1:var rgb,s,c=[THIS.hsv[2],0,0];
var i=Math.floor(THIS.hsv[0]);
var f=i%2?THIS.hsv[0]-i:1-(THIS.hsv[0]-i);
switch(i){case 6:case 0:rgb=[0,1,2];
break;
case 1:rgb=[1,0,2];
break;
case 2:rgb=[2,0,1];
break;
case 3:rgb=[2,1,0];
break;
case 4:rgb=[1,2,0];
break;
case 5:rgb=[0,2,1];
break;
}for(var i=0;
i<seg.length;
i+=1){s=1-1/(seg.length-1)*i;
c[1]=c[0]*(1-s*f);
c[2]=c[0]*(1-s);
seg[i].style.backgroundColor="rgb("+(c[rgb[0]]*100)+"%,"+(c[rgb[1]]*100)+"%,"+(c[rgb[2]]*100)+"%)";
}break;
}}function redrawSld(){switch(modeID){case 0:var yComponent=2;
break;
case 1:var yComponent=1;
break;
}var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.sld[1]-1));
jscolor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.arrow[1]/2))+"px";
}function isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===THIS;
}function blurTarget(){if(valueElement===target){THIS.importColor();
}if(THIS.pickerOnfocus){THIS.hidePicker();
}}function blurValue(){if(valueElement!==target){THIS.importColor();
}}function setPad(e){var posM=jscolor.getMousePos(e);
var x=posM[0]-posPad[0];
var y=posM[1]-posPad[1];
switch(modeID){case 0:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),1-y/(jscolor.images.pad[1]-1),null,leaveSld);
break;
case 1:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),null,1-y/(jscolor.images.pad[1]-1),leaveSld);
break;
}}function setSld(e){var posM=jscolor.getMousePos(e);
var y=posM[1]-posPad[1];
switch(modeID){case 0:THIS.fromHSV(null,null,1-y/(jscolor.images.sld[1]-1),leavePad);
break;
case 1:THIS.fromHSV(null,1-y/(jscolor.images.sld[1]-1),null,leavePad);
break;
}}var THIS=this;
var modeID=this.pickerMode.toLowerCase()==="hvs"?1:0;
var abortBlur=false;
var valueElement=jscolor.fetchElement(this.valueElement),styleElement=jscolor.fetchElement(this.styleElement);
var holdPad=false,holdSld=false;
var posPad,posSld;
var leaveValue=1<<0,leaveStyle=1<<1,leavePad=1<<2,leaveSld=1<<3;
jscolor.addEvent(target,"focus",function(){if(THIS.pickerOnfocus){THIS.showPicker();
}});
jscolor.addEvent(target,"blur",function(){if(!abortBlur){window.setTimeout(function(){abortBlur||blurTarget();
abortBlur=false;
},0);
}else{abortBlur=false;
}});
if(valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue);
};
jscolor.addEvent(valueElement,"keyup",updateField);
jscolor.addEvent(valueElement,"input",updateField);
jscolor.addEvent(valueElement,"blur",blurValue);
valueElement.setAttribute("autocomplete","off");
}if(styleElement){styleElement.jscStyle={backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color};
}this.importColor();
}};
jscolor.install();
(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];
this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};
function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");
}this.benchmark=benchmark;
function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);
}else{alert(s);
}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";
}var rows=table.tBodies[0].rows;
if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;
for(var i=0;
i<l;
i++){var p=false;
if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);
}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);
}}if(!p){p=detectParserForColumn(table,cells[i]);
}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";
}list.push(p);
}}if(table.config.debug){log(parsersDebug);
}return list;
}function detectParserForColumn(table,node){var l=parsers.length;
for(var i=1;
i<l;
i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];
}}return parsers[0];
}function getParserById(name){var l=parsers.length;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];
}}return false;
}function buildCache(table){if(table.config.debug){var cacheTime=new Date();
}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};
for(var i=0;
i<totalRows;
++i){var c=table.tBodies[0].rows[i],cols=[];
cache.row.push($(c));
for(var j=0;
j<totalCells;
++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));
}cols.push(i);
cache.normalized.push(cols);
cols=null;
}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);
}return cache;
}function getElementText(config,node){if(!node){return"";
}var t="";
if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;
}else{t=node.innerHTML;
}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);
}else{t=$(node).text();
}}return t;
}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date();
}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];
for(var i=0;
i<totalRows;
i++){rows.push(r[n[i][checkCell]]);
if(!table.config.appender){var o=r[n[i][checkCell]];
var l=o.length;
for(var j=0;
j<l;
j++){tableBody[0].appendChild(o[j]);
}}}if(table.config.appender){table.config.appender(table,rows);
}rows=null;
if(table.config.debug){benchmark("Rebuilt table:",appendTime);
}applyWidget(table);
setTimeout(function(){$(table).trigger("sortEnd");
},0);
}function buildHeaders(table){if(table.config.debug){var time=new Date();
}var meta=($.metadata)?true:false,tableHeadersRows=[];
for(var i=0;
i<table.tHead.rows.length;
i++){tableHeadersRows[i]=0;
}$tableHeaders=$("thead th",table);
$tableHeaders.each(function(index){this.count=0;
this.column=index;
this.order=formatSortingOrder(table.config.sortInitialOrder);
if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true;
}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);
}table.config.headerList[index]=this;
});
if(table.config.debug){benchmark("Built headers:",time);
log($tableHeaders);
}return $tableHeaders;
}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;
for(var i=0;
i<c.length;
i++){var cell=c[i];
if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));
}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);
}}}return arr;
}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;
}return false;
}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;
}return false;
}function applyWidget(table){var c=table.config.widgets;
var l=c.length;
for(var i=0;
i<l;
i++){getWidgetById(c[i]).format(table);
}}function getWidgetById(name){var l=widgets.length;
for(var i=0;
i<l;
i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];
}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;
}else{i=(v==(0||1))?v:0;
}return i;
}function isValueInArray(v,a){var l=a.length;
for(var i=0;
i<l;
i++){if(a[i][0]==v){return true;
}}return false;
}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);
var h=[];
$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);
}});
var l=list.length;
for(var i=0;
i<l;
i++){h[list[i][0]].addClass(css[list[i][1]]);
}}function fixColumnWidth(table,$headers){var c=table.config;
if(c.widthFixed){var colgroup=$("<colgroup>");
$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()));
});
$(table).prepend(colgroup);
}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;
for(var i=0;
i<l;
i++){var s=sortList[i],o=c.headerList[s[0]];
o.count=s[1];
o.count++;
}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();
}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;
for(var i=0;
i<l;
i++){var c=sortList[i][0];
var order=sortList[i][1];
var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");
var e="e"+i;
dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";
dynamicExp+="if("+e+") { return "+e+"; } ";
dynamicExp+="else { ";
}var orgOrderCol=cache.normalized[0].length-1;
dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";
for(var i=0;
i<l;
i++){dynamicExp+="}; ";
}dynamicExp+="return 0; ";
dynamicExp+="}; ";
eval(dynamicExp);
cache.normalized.sort(sortWrapper);
if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);
}return cache;
}function sortText(a,b){return((a<b)?-1:((a>b)?1:0));
}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));
}function sortNumeric(a,b){return a-b;
}function sortNumericDesc(a,b){return b-a;
}function getCachedSortType(parsers,i){return parsers[i].type;
}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return;
}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;
this.config={};
config=$.extend(this.config,$.tablesorter.defaults,settings);
$this=$(this);
$headers=buildHeaders(this);
this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
var sortCSS=[config.cssDesc,config.cssAsc];
fixColumnWidth(this);
$headers.click(function(e){$this.trigger("sortStart");
var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;
if(!this.sortDisabled&&totalRows>0){var $cell=$(this);
var i=this.column;
this.order=this.count++%2;
if(!e[config.sortMultiSortKey]){config.sortList=[];
if(config.sortForce!=null){var a=config.sortForce;
for(var j=0;
j<a.length;
j++){if(a[j][0]!=i){config.sortList.push(a[j]);
}}}config.sortList.push([i,this.order]);
}else{if(isValueInArray(i,config.sortList)){for(var j=0;
j<config.sortList.length;
j++){var s=config.sortList[j],o=config.headerList[s[0]];
if(s[0]==i){o.count=s[1];
o.count++;
s[1]=o.count%2;
}}}else{config.sortList.push([i,this.order]);
}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);
appendToTable($this[0],multisort($this[0],config.sortList,cache));
},1);
return false;
}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false;
};
return false;
}});
$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
}).bind("sorton",function(e,list){$(this).trigger("sortStart");
config.sortList=list;
var sortList=config.sortList;
updateHeaderSortCount(this,sortList);
setHeadersCss(this,$headers,sortList,sortCSS);
appendToTable(this,multisort(this,sortList,cache));
}).bind("appendCache",function(){appendToTable(this,cache);
}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);
}).bind("applyWidgets",function(){applyWidget(this);
});
if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;
}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);
}applyWidget(this);
});
};
this.addParser=function(parser){var l=parsers.length,a=true;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;
}}if(a){parsers.push(parser);
}};
this.addWidget=function(widget){widgets.push(widget);
};
this.formatFloat=function(s){var i=parseFloat(s);
return(isNaN(i))?0:i;
};
this.formatInt=function(s){var i=parseInt(s);
return(isNaN(i))?0:i;
};
this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;
var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";
return RegExp(exp).test($.trim(s));
};
this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild);
}}empty.apply(table.tBodies[0]);
}else{table.tBodies[0].innerHTML="";
}};
}});
$.fn.extend({tablesorter:$.tablesorter.construct});
var ts=$.tablesorter;
ts.addParser({id:"text",is:function(s){return true;
},format:function(s){return $.trim(s.toLowerCase());
},type:"text"});
ts.addParser({id:"digit",is:function(s,table){var c=table.config;
return $.tablesorter.isDigit(s,c);
},format:function(s){return $.tablesorter.formatFloat(s);
},type:"numeric"});
ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));
},type:"numeric"});
ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);
},format:function(s){var a=s.split("."),r="",l=a.length;
for(var i=0;
i<l;
i++){var item=a[i];
if(item.length==2){r+="0"+item;
}else{r+=item;
}}return $.tablesorter.formatFloat(r);
},type:"numeric"});
ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);
},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""));
},type:"text"});
ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);
},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");
},type:"numeric"});
ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));
},type:"numeric"});
ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));
},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);
},format:function(s,table){var c=table.config;
s=s.replace(/\-/g,"/");
if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");
}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");
}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");
}}}return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);
},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());
},type:"numeric"});
ts.addParser({id:"metadata",is:function(s){return false;
},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;
return $(cell).metadata()[p];
},type:"numeric"});
ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();
}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);
if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);
}}});
})(jQuery);
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");
};
Date.prototype.addDays=function(n){this.setDate(this.getDate()+n);
return this;
};
Date.prototype.addHours=function(n){this.setHours(this.getHours()+n);
return this;
};
jQuery.extend(jQuery.expr[":"],{Contains:function(a,i,m){return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
}});
var gColTableFilters={};
$.fn.tableFilter=function(tableSelector){var filterSelector=$(this).attr("id");
if(filterSelector===undefined){return false;
}if(gColTableFilters[filterSelector]===undefined){gColTableFilters[filterSelector]=new Array(tableSelector);
}else{if(MP_LAB_UTIL.ItemInArray(gColTableFilters[filterSelector],tableSelector)){$(this).unbind().keyup(updateTable);
return false;
}else{gColTableFilters[filterSelector].push(tableSelector);
}}updateTable=function(e){keys=[27,32,37,38,39,40];
if($.inArray(e.keyCode,keys)>=0){return false;
}if($(this).val().trim()!==""){if(e.keyCode!=13){return false;
}}filterId=$(this).attr("id");
if(filterId=="ALLfilter"){for(filter in gColTableFilters){if(filter!="ALLfilter"){$("#"+filter).val("");
}}}var tableList=gColTableFilters[filterId];
for(x in tableList){if(tableList.hasOwnProperty(x)){table=$(tableList[x]);
table.find("tr:gt(0)").hide();
table.find(".filterSpacer").remove();
if(ieVersion>0&&$(this).val().trim()!==""){table.find("tbody").prepend('<tr class="filterSpacer"><td>&nbsp</td></tr>');
}table.find('td:Contains("'+$(this).val()+'")').parents("tr").show();
}}if($("table tr.rowSelectedMajor:hidden").length>0){$("body").trigger("FILTER_CMPLT_NO_ROW_SELECTED",[filterId,$(this).val()]);
}else{}};
$(this).unbind().keyup(updateTable);
};
var MP_LAB_UTIL=function(){var m_df=null;
return{HideTooltip:function(){$("div.hvr").remove();
},ShowTooltip:function(evt,tipText){var p=getPosition(evt),top=p.y+30,left=p.x+20;
$("div.hvr").remove();
$('<div class="hvr">'+tipText+"</div>").appendTo("body");
$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
MP_LAB_UTIL.PositionTooltip(event);
},PositionTooltip:function(event){var p=getPosition(event),vp=gvs(),so=gso(),left=p.x-5,top=p.y+20;
var tooltip=$("div.hvr");
if(left+tooltip.width()>vp[1]+so[1]){left=left-40-tooltip.width();
}if(top+tooltip.height()>vp[0]+so[0]){top=top-40-tooltip.height();
}$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
},GetDateString:function(date,format){var emptyDateRegEx=/([0]{4})(-([0]{2})(-([0]{2})(T([0]{2}):([0]{2})(:([0]{2})(\.([0]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/;
var newDate=new Date();
var bUseFormatter=true;
if(date===undefined){return"";
}if(m_df===null){m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}if(date instanceof Date){newDate=date;
}else{if(date.match(new RegExp(emptyDateRegEx))||date.length==0){return"";
}newDate.setISO8601(date);
}if(format===undefined){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDate2"){format=mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR;
}else{if(format==="shortTime"){format=mp_formatter.DateTimeFormatter.TIME_24HOUR;
}else{if(format==="convertibleDtTm"){format="dd-mmm-yyyy HH:MM:ss";
bUseFormatter=false;
}else{if(format==="mediumDate"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDateTimeDashed"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}}}}}}if(bUseFormatter){return m_df.format(newDate,format);
}else{return newDate.format(format);
}},ShowModalDialog:function(text,type,callback){var el;
if(!document.getElementById("confirmDialog")){var centerEl=document.createElement("div");
centerEl.id="centerpoint";
el=document.createElement("div");
el.id="confirmDialog";
centerEl.appendChild(el);
document.body.appendChild(centerEl);
}var id=$("#confirmDialog");
switch(type){case 1:id.html("<span class=question>"+text+'</span><br /><hr /><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 2:id.html("<span class=question>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CANCEL+'" id=btnCancel><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 3:id.html("<span class=plainText>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CLOSE+'" id=btnModalClose></span>');
break;
default:return false;
}if($("#confirmDialog span").hasClass("question")){id.height(75);
id.width(200);
}else{id.width(400);
}var maskHeight=$(document).height();
var maskWidth=$(window).width();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
if(ieVersion==0||ieVersion>=7){var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2).show();
}else{var winH=$(window).height();
var winW=$(window).width();
var p=getPosition(event),top=p.y+30,left=p.x+20;
id.css("top",top+"px").css("left",left+"px").show();
}$("#confirmDialog").unbind().bind("click",function(e){var result=0;
if($(e.target).is("#btnYes")){result=1;
}else{if($(e.target).is("#btnNo")){result=2;
}else{if($(e.target).is("#btnCancel")){result=3;
}else{if($(e.target).is("#btnModalClose")){result=4;
}}}}if(result>0){$("#mask").hide();
$("#confirmDialog").hide();
if((callback!==undefined)&&$.isFunction(callback)){callback(result);
}return true;
}});
},GetPagePrefs:function(nAppNbr,sPrefSection,callback,async){var isAsync=typeof(async)=="boolean"?async:true;
var paramsAr=[];
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETPAGEPREFS.O1 - retrieving page prefs","PCS_GET_MPAGE_PREF",paramsAr,isAsync,function(recordData,failure){if(!failure){if(recordData.SSETTINGS==""){callback();
}else{var sReplaced=recordData.SETTINGSJSON.replace(/\u0001/g,'"');
try{var paramName="settingsJSON=";
if(sReplaced.indexOf(paramName)==0&&sReplaced.length>=paramName.length){sReplaced=sReplaced.substr(paramName.length,sReplaced.length-paramName.length);
}sReplaced=sReplaced.replace(/\__EQLS__/g,"=");
var sSettingsJSON=JSON.parse(sReplaced);
callback(sSettingsJSON);
}catch(err){callback();
}}}});
},SetPagePrefs:function(nAppNbr,sPrefSection,oParams,callback){var paramsAr=[];
var replaceQuotes=JSON.stringify(oParams).replace(/"/g,"\u0001");
replaceQuotes=replaceQuotes.replace(/\=/g,"__EQLS__");
replaceQuotes="settingsJSON="+replaceQuotes+"\r\n";
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'","^"+replaceQuotes+"^");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.SETPAGEPREFS.O1 - saving page prefs","PCS_UPD_MPAGE_PREF",paramsAr,true,callback);
},ItemInArray:function(array,item){var j=0;
while(j<array.length){if(array[j]==item){return true;
}else{j++;
}}return false;
},MakeTableSortable:function(tablename,zebra){if(zebra){$(tablename).tablesorter({widgets:["zebra"],widgetZebra:{css:["data-evenrow","data-oddrow"]}});
}else{$(tablename).tablesorter();
}$(tablename).bind("sortEnd",function(){$(tablename+" .firstChild").removeClass("firstChild");
var val=$(tablename+" tbody tr:first-child td");
val.addClass("firstChild");
});
},Strip_Tags:function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");
var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:"";
});
}};
}();
var MP_LAB_RESULT=function(){function getRefRange(item,result,textOnly){var stSpan=" ";
var endSpan=" ";
var strFlags="";
var sRefRange="";
if(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
stSpan='<span class="result-critical" title="Reference Range" id="'+sRefRange+'">';
endSpan="</span>";
}else{if(item.NORMAL_RANGE_FLAG!==undefined){switch(item.NORMAL_RANGE_FLAG){case 1:sRefRange=item.NORMAL_LOW;
break;
case 2:sRefRange=item.NORMAL_HIGH;
break;
case 3:sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
break;
default:sRefRange=item.NORMAL_ALPHA.trim();
}}else{if(item.NORMAL_ALPHA!==undefined){if(item.NORMAL_HIGH>0||item.NORMAL_LOW>0||item.NORMAL_ALPHA.length>0){if(item.NORMAL_HIGH>0){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
}else{sRefRange=item.NORMAL_ALPHA.trim();
}}}}stSpan='<span class="result-norm" title="Reference Range" id=">= '+sRefRange+'">';
endSpan="</span>";
}if(textOnly){return sRefRange;
}else{return stSpan+result+endSpan;
}}function getResultProcessFlags(sText,item){if((item.DILUTION_FACTOR!==undefined)&&(item.DILUTION_FACTOR>0)){sText+="x"+item.DILUTION_FACTOR+" ";
}switch(item.NORMAL_MEAN.trim()){case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_HIGH:case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_LOW:case MP_LAB_RESULT.PROCESS_MEAN.ALP_ABNORMAL:sText+=item.NORMAL_DISP.trim();
break;
}if(item.CRITICAL_MEAN!==undefined){if((item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL)||(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_CRITICAL)){sText+=item.CRITICAL_DISP.trim();
}}if(item.REVIEW_MEAN!==undefined){if((item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.REVIEW)||(item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_REVIEW)){sText+=item.REVIEW_DISP.trim();
}}if(item.LINEAR_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.LINEAR){sText+=item.LINEAR_DISP.trim();
}if(item.FEASIBLE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.FEASIBLE){sText+=item.FEASIBLE_DISP.trim();
}if(item.DELTA_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.DELTA_FAIL){sText+=item.DELTA_DISP.trim();
}if(item.INTERP_DATA_ID>0){sText+="(i)";
}if(item.QC_OVERRIDE_MEAN!==undefined){if(item.QC_OVERRIDE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.QCOVERRIDE){sText+=item.QC_OVERRIDE_DISP.trim();
}}if(item.NOTIFY_MEAN!==undefined){if(item.NOTIFY_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_NOTIFY){sText+=item.NOTIFY_DISP.trim();
}}if((item.NOMENCLATURE_ID>0)&&(item.LONG_TEXT_ID>0)){sText+="(t)";
}return sText;
}return{STATUS_MEAN:{PERFORMED:"PERFORMED",INREVIEW:"INREVIEW",VERIFIED:"VERIFIED",AUTOVERIFIED:"AUTOVERIFIED"},TYPE:{TEXT:"1",ALPHA:"2",NUMERIC:"3",INTERP:"4",MULTI_ALPHA:"5",DATE:"6",FREETEXT:"7",CALC:"8",CODESET:"9",TIME:"10",DATE_TIME:"11",COUNT:"13",YES_NO:"18",ALPHA_FREETEXT:"21"},PROCESS_MEAN:{ALP_ABNORMAL:"ALP_ABNORMAL",NORMAL_HIGH:"NORMAL_HIGH",NORMAL_LOW:"NORMAL_LOW",ALP_CRITICAL:"ALP_CRITICAL",CRITICAL:"CRITICAL",REVIEW:"REVIEW",ALP_REVIEW:"ALP_REVIEW",DELTA_FAIL:"DELTA_FAIL",FEASIBLE:"FEASIBLE",LINEAR:"LINEAR",ALP_NOTIFY:"ALP_NOTIFY",NOTIFY:"NOTIFY",QCOVERRIDE:"QC_OVERRIDE"},GetLabResult:function(item){var result="",sText="";
switch(item.RESULT_TYPE_MEAN.trim()){case MP_LAB_RESULT.TYPE.TEXT:case MP_LAB_RESULT.TYPE.FREETEXT:sText="";
if(item.ASCII_TEXT.trim().length>30){result=item.ASCII_TEXT.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}if(item.RESULT_TYPE_MEAN.trim()==MP_LAB_RESULT.TYPE.FREETEXT){result+=" "+getResultProcessFlags(sText,item);
}break;
case MP_LAB_RESULT.TYPE.ALPHA:sText="";
result=item.RESULT_VALUE_ALPHA;
result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.INTERP:sText="";
if(!item.ASCII_TEXT_LONG){item.ASCII_TEXT_LONG="";
}if(item.RESULT_VALUE_ALPHA.trim().length>0){result=item.RESULT_VALUE_ALPHA.trim();
result+=" "+getResultProcessFlags(sText,item);
if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){result+='<input class="btnMoreText" type="button" value="..."/>';
}}else{if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){if(item.ASCII_TEXT_LONG.trim().length>0){result=item.ASCII_TEXT_LONG.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}}else{if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
}}break;
case MP_LAB_RESULT.TYPE.CALC:case MP_LAB_RESULT.TYPE.NUMERIC:if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.DATE:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortDate2");
break;
case MP_LAB_RESULT.TYPE.DATE_TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM);
break;
case MP_LAB_RESULT.TYPE.TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortTime");
break;
case MP_LAB_RESULT.TYPE.CODESET:result=item.RESULT_CODE_SET_DISP;
break;
default:result=item.ASCII_TEXT.trim();
}return getRefRange(item,result);
},GetRefRangeText:function(item){return getRefRange(item,"",true);
}};
}();
if(window.APPLINK){var runApp=function(params){APPLINK(0,"labapplauncher.exe",params);
};
}else{var runApp=function(params){mywindow=window.open("cernerlablaunch://"+params,"mylauncherwindow","scrollbars=yes,copyhistory=no,resizable=yes");
mywindow.close();
};
}function APCaseListViewComponentStyle(){this.initByNamespace("apcaselist");
}APCaseListViewComponentStyle.inherits(ComponentStyle);
function CaseListViewComponent(criterion){this.setCriterion(criterion);
this.setStyles(new APCaseListViewComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CASELISTVIEW.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CASELISTVIEW.O1 - render component");
this.setIncludeLineNumber(true);
this.setPlusAddEnabled(false);
this.setExpanded(true);
this.setScope(0);
this.m_defaultdays=null;
this.workflowCd=0;
this.workflowDisp="{"+i18n.lab.ap_summary.NONE_SELECTED+"}";
var contentHTML="";
this.n_Workflow_Step=0;
this.exclWeekend=0;
this.colors={overdue:"FF0000",ontime:"0000FF"};
CaseListViewComponent.method("InsertData",function(days){if(days){this.m_defaultdays=days;
}CERN_CASELISTVIEW_O1.GetCaseList(this);
});
CaseListViewComponent.method("HandleSuccess",function(recordData){CERN_CASELISTVIEW_O1.RenderComponent(this,recordData);
});
CaseListViewComponent.method("setDefaultDays",function(value){this.m_defaultdays=value;
});
CaseListViewComponent.method("getDefaultDays",function(){return this.m_defaultdays;
});
CaseListViewComponent.method("HandleColorChange",function(overdue,ontime){if(overdue){this.colors.overdue=overdue;
}if(ontime){this.colors.ontime=ontime;
}CERN_CASELISTVIEW_O1.SetColors(this);
});
CaseListViewComponent.method("HandleWorkflowChange",function(workflowCd,workflowDisp){if(workflowCd!=this.workflowCd){this.workflowCd=workflowCd;
this.workflowDisp=workflowDisp;
this.InsertData();
}});
}CaseListViewComponent.inherits(MPageComponent);
var CERN_CASELISTVIEW_O1=function(){var LOOKBACKDAY_ULIMIT=30;
var LOOKBACKDAY_LLIMIT=1;
var popupStatus=0;
var patientNthCol=0;
var pathologistNthCol=0;
var specimenNthCol=0;
var prefixNameNthCol=0;
var residentNthCol=0;
var aliasNthCol=0;
var tatDisplay=[];
var section="MP_APCASELIST";
var APPNUMBER=1050009;
var APPSECTION="APCASELIST_LOOKBACK";
var appCaseListSettings={lookback_days:null};
jQuery.extend(jQuery.expr[":"],{Contains:function(a,i,m){return jQuery(a).text().toLowerCase().indexOf(m[3].toLowerCase())>=0;
}});
jQuery.extend(jQuery.expr[":"],{StartsWith:function(a,i,m){return jQuery(a).text().toLowerCase()==m[3].toLowerCase();
}});
function CreateEventHandlers(component){var rows=$("#cl-table tr.apcaselist-info");
rows.hover(function(event){$(this).addClass("data-row-hover");
var text=$(this).find("td.hvr_text:first").html();
if((text!=null)&&(text!="")){ShowTooltip(event,text);
}},function(event){$(this).removeClass("data-row-hover");
HideTooltip(event);
}).mousemove(function(event){PositionTooltip(event);
});
$("#cl-lkbd-ok").click(function(){DoOk(component);
});
$("#cl-workflow-select").click(function(e){MP_WORKFLOWSELECTOR.ShowWorkflowSelector(e,component.workflowCd,section,function(workflowCd,workflowDisp){component.HandleWorkflowChange(workflowCd,workflowDisp);
});
});
$("#Color_Customize").click(function(e){MP_COLORSELECTOR.ShowColorSelector(e,section,component);
});
$("#filter").click(function(){AlignFilterPopup();
LoadFilterPopup(component);
});
$("#cl-lkbd-filterPopupClose").click(function(){DisablePopup();
});
$("#cl-lkbd-cancel").click(function(){DisablePopup();
});
$("#cl-lkbd-default").click(function(){DoDefault(component);
});
$("#filterItems").change(function(){FilterSelectionOnchange(component);
});
$("#filterItems").keyup(function(e){if(e.keyCode==13){FilterSelectionOnchange(component);
}});
$("#cl-lkbd-text").keyup(function(e){if(e.keyCode==13&&popupStatus==1){DoOk(component);
}else{if(e.keyCode==27&&popupStatus==1){DisablePopup();
}}});
$("#cl-lkbd-filter").keyup(function(e){if(e.keyCode==27&&popupStatus==1){DisablePopup();
}});
$("tr.apcaselist-info").css("cursor","pointer").click(function(){if(tatDisplay[this.id]==true){tatDisplay[this.id]=false;
$(this).siblings(".expand-"+this.id).hide();
$(this).siblings(".expand-"+this.id).empty();
}else{tatDisplay[this.id]=true;
LoadWorkflowDetails(component,this);
}});
}function DisablePopup(){if(popupStatus==1){$("#cl-lkbd-bgPopup").fadeOut("slow");
$("#cl-lkbd-filterPopup").fadeOut("slow");
popupStatus=0;
$("#filter").focus();
}}function AlignFilterPopup(){var graphHeight=$("#cl-lkbd-graphframe").height();
$("#cl-lkbd-filterPopup").css({position:"absolute",top:1,right:1});
}function LoadFilterPopup(comp){var tableHeight=$("#cl-view").height();
tableHeight+=$("#cl-lkbd-filter").height();
var selected_filter=document.getElementById("filterItems").value;
switch(selected_filter){case"lookbackdays":document.getElementById("cl-lkbd-text").value=comp.getDefaultDays();
$("#cl-lkbd-suggest").html(i18n.lab.ap_summary.LOOKBACK_DAYS_SUGGEST);
$("#cl-lkbd-suggest").show();
break;
case"alias":$("#cl-lkbd-suggest").html(i18n.lab.ap_summary.PATIENT_ALIAS_SUGGEST);
$("#cl-lkbd-suggest").show();
break;
default:$("#cl-lkbd-suggest").hide();
break;
}if(popupStatus==0){$("#cl-lkbd-bgPopup").css({opacity:"0.7"});
$("#cl-lkbd-bgPopup").css({height:tableHeight});
$("#cl-lkbd-bgPopup").fadeIn("slow");
$("#cl-lkbd-filterPopup").fadeIn("slow");
$("#cl-lkbd-text").focus();
$("#cl-lkbd-error").fadeOut("fast");
popupStatus=1;
}}function isInteger(val){if(val==null||val.length<=0){return false;
}for(var i=0;
i<val.length;
i++){var ch=val.charAt(i);
if(i==0&&ch=="-"){continue;
}if(ch<"0"||ch>"9"){return false;
}}return true;
}function AccurateLbDays(){var n_days=document.getElementById("cl-lkbd-text").value;
if(isInteger(n_days)){if(n_days>=LOOKBACKDAY_LLIMIT){return true;
}else{$("#cl-lkbd-error").fadeIn("slow");
$("#cl-lkbd-text").focus();
return false;
}}else{$("#cl-lkbd-error").fadeIn("slow");
$("#cl-lkbd-text").focus();
return false;
}}function DoUpdate(component,lbDays){component.InsertData(lbDays);
component.setDefaultDays(lbDays);
writeDefaultDays(lbDays);
}function DoDefault(component){var selected_filter=document.getElementById("filterItems").value;
switch(selected_filter){case"lookbackdays":document.getElementById("cl-lkbd-text").value=gAPSum_BedrockLookback;
if(AccurateLbDays()){DoUpdate(component,gAPSum_BedrockLookback);
}break;
default:ShowTable("cl-table");
}}function DoOk(component){var selected_filter=document.getElementById("filterItems").value;
var val=document.getElementById("cl-lkbd-text").value;
var val_lowercase=val.toLowerCase();
switch(selected_filter){case"lookbackdays":if(AccurateLbDays()==true){DoUpdate(component,val);
}break;
case"name":DoFilter(selected_filter,val_lowercase,patientNthCol);
break;
case"pathologist":DoFilter(selected_filter,val_lowercase,pathologistNthCol);
break;
case"specimen":DoFilter(selected_filter,val_lowercase,specimenNthCol);
break;
case"prefix":DoFilter(selected_filter,val_lowercase,prefixNameNthCol);
break;
case"resident":DoFilter(selected_filter,val_lowercase,residentNthCol);
break;
case"alias":DoFilter(selected_filter,val_lowercase,aliasNthCol);
break;
default:break;
}}function DoFilter(filter,val,col){FilterTableByColumn("cl-table",filter,col,val);
DisablePopup();
}function FilterTableByColumn(table,filter,col,value){$("#"+table).find("tr:gt(0)").hide();
if(filter=="prefix"&&value.length>0){$("#"+table+" td:nth-child("+col+")").filter(':StartsWith("'+value+'")').parents("tr").show();
}else{$("#"+table+" td:nth-child("+col+")").filter(':Contains("'+value+'")').parents("tr").show();
}var table_height=$("#"+table).height();
if(table_height<=100){$("#cl-main").css({"margin-bottom":"150px"});
}else{$("#cl-main").css({"margin-bottom":"auto"});
}}function ShowTable(table){$("#"+table).find("tr:gt(0)").show();
DisablePopup();
}function ToggleColumn(table_id,col_no,do_show){var stl;
if(do_show){stl="block";
}else{stl="none";
}var tbl=document.getElementById(table_id);
var rows=tbl.getElementsByTagName("tr");
var nRows=rows.length;
for(var row=0;
row<nRows;
row++){var cells=rows[row].getElementsByTagName("td");
if(cells.length==0){cells=rows[row].getElementsByTagName("th");
}cells[col_no].style.display=stl;
}}function FilterSelectionOnchange(comp){var selected_filter=document.getElementById("filterItems").value;
switch(selected_filter){case"lookbackdays":document.getElementById("cl-lkbd-text").value=comp.getDefaultDays();
EnableButton("cl-lkbd-default",true);
$("#cl-lkbd-suggest").html(i18n.lab.ap_summary.LOOKBACK_DAYS_SUGGEST);
$("#cl-lkbd-suggest").show();
break;
case"alias":$("#cl-lkbd-suggest").html(i18n.lab.ap_summary.PATIENT_ALIAS_SUGGEST);
$("#cl-lkbd-suggest").show();
document.getElementById("cl-lkbd-text").value="";
EnableButton("cl-lkbd-default",false);
break;
default:document.getElementById("cl-lkbd-text").value="";
EnableButton("cl-lkbd-default",false);
$("#cl-lkbd-suggest").hide();
break;
}}function HideTooltip(){$("div.hvr").remove();
}function ShowTooltip(evt,tipText,showSmallTooltip){var p=getPosition(evt),top=p.y+30,left=p.x+20;
$("div.hvr").remove();
$('<div class="hvr">'+tipText+"</div>").appendTo("body");
$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
if(showSmallTooltip){$("div.hvr").css({"max-width":"150px"});
}PositionTooltip(event);
}function PositionTooltip(event){var p=getPosition(event),vp=gvs(),so=gso(),left=p.x-5,top=p.y+20;
var tooltip=$("div.hvr");
if(left+tooltip.width()>vp[1]+so[1]){left=left-40-tooltip.width();
}if(top+tooltip.height()>vp[0]+so[0]){top=top-40-tooltip.height();
}$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
}function ShowModalDialog(text){var el;
if(!document.getElementById("confirmDialog")){el=document.createElement("div");
el.id="confirmDialog";
document.body.appendChild(el);
}var id=$("#confirmDialog");
id.html("<span class=plainText>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.ap_summary.CLOSE+'" id=btnModalClose></span>');
id.width(400);
var maskHeight=$(document).height();
var maskWidth=$(window).width();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2).show();
$("#confirmDialog").unbind().bind("click",function(e){var result=0;
if($(e.target).is("#btnModalClose")){result=4;
}if(result>0){$("#mask").hide();
$("#confirmDialog").hide();
return true;
}});
}function EnableButton(btnId,flag){var btn=document.getElementById(btnId);
if(flag==true){btn.disabled=false;
}else{btn.disabled=true;
}}function SetColors(component){var overdue=component.colors.overdue;
var ontime=component.colors.ontime;
var compOverdue=color_functions.GetComplement(overdue,0.6);
var compOntime=color_functions.GetComplement(ontime,0.6);
$(".overdue").css("color","#"+overdue);
$("td.apcaselist-data").css({"background-color":"#"+ontime,border:"1px solid #"+compOntime});
$("td.step_overdue").css({"background-color":"#"+overdue,border:"1px solid #"+compOverdue});
}function AddFilterBlock(){var jsAlHTML=[];
jsAlHTML.push("<div id='cl-lkbd-filter'>");
jsAlHTML.push("<div id='cl-lkbd-bgPopup'></div>");
jsAlHTML.push("<div id='cl-lkbd-graphframe'></div>");
jsAlHTML.push("<div id='cl-lkbd-filterPopup'>");
jsAlHTML.push("<a id='cl-lkbd-filterPopupClose' href='javascript:'>x</a>");
jsAlHTML.push("<div id='cl-lkbd-error'>",i18n.lab.ap_summary.LOOKBACK_DAYS_ERROR,"</div><br />");
jsAlHTML.push("<div id='cl-bt-padding'>");
jsAlHTML.push("<select id='filterItems'>");
jsAlHTML.push("<option value='lookbackdays'>",i18n.lab.ap_summary.LOOKBACK_DAYS,"</option>");
jsAlHTML.push("<option value='name'>",i18n.NAME,"</option>");
jsAlHTML.push("<option value='pathologist'>",i18n.lab.ap_summary.PATHOLOGIST,"</option>");
jsAlHTML.push("<option value='specimen'>",i18n.lab.ap_summary.SPECIMEN,"</option>");
jsAlHTML.push("<option value='prefix'>",i18n.lab.ap_summary.PREFIX,"</option>");
jsAlHTML.push("<option value='resident'>",i18n.lab.ap_summary.RESIDENT,"</option>");
jsAlHTML.push("<option value='alias'>",i18n.lab.ap_summary.PATIENT_IDENTIFIER,"</option>");
jsAlHTML.push("</select>");
jsAlHTML.push("</div>");
jsAlHTML.push("<div id='cl-bt-padding'>");
jsAlHTML.push("<input type='text' id='cl-lkbd-text' name='cl-lkbd-text' size='16' /><br />");
jsAlHTML.push("<span id=cl-lkbd-suggest>",i18n.lab.ap_summary.LOOKBACK_DAYS_SUGGEST,"</span>");
jsAlHTML.push("</div>");
jsAlHTML.push("<div id='cl-lkbd-actionButtons'><input id='cl-lkbd-ok' type='submit' value='",i18n.lab.ap_summary.OK,"'/>");
jsAlHTML.push("<input id='cl-lkbd-cancel' type='submit' value='",i18n.CANCEL,"'/>");
jsAlHTML.push("<input id='cl-lkbd-default' type='submit' value='",i18n.lab.ap_summary.DEFAULT,"'/>");
jsAlHTML.push("</div>");
jsAlHTML.push("</div>");
return(jsAlHTML.join(""));
}function ProcessWorkflowDetailResults(component,case_id,recordData,selector){var jsAlHTML=[];
var content_html="";
jsAlHTML.push("<td class=apcaselist-fill-col></td>");
jsAlHTML.push("<td colspan='",component.n_Workflow_Step,"'>");
jsAlHTML.push("<div class='case-expand-div' id=case-detail-"+case_id+">");
jsAlHTML.push("<table class='apcaselist-tat-table' id='table-detail-"+case_id+"'>");
jsAlHTML.push("<thead>");
jsAlHTML.push("<tr>");
jsAlHTML.push("<th class=apcaselist-tat-detail>",i18n.lab.ap_summary.SPECIMEN,"</th>");
jsAlHTML.push("<th class=apcaselist-tat-detail>",i18n.lab.ap_summary.INVENTORY,"</th>");
jsAlHTML.push("<th class=apcaselist-tat-detail>",i18n.LOCATION,"</th>");
if(component.exclWeekend>=0){jsAlHTML.push("<th class=apcaselist-tat-detail>",i18n.lab.ap_summary.WORKFLOW_STEP_AT,"</th>");
jsAlHTML.push("<th class=apcaselist-tat-detail>",i18n.lab.ap_summary.WORKFLOW_STEP_TAT,"</th>");
}else{jsAlHTML.push("<th class=hidden>",i18n.lab.ap_summary.WORKFLOW_STEP_AT,"</th>");
jsAlHTML.push("<th class=hidden>",i18n.lab.ap_summary.WORKFLOW_STEP_TAT,"</th>");
}jsAlHTML.push("<th class=hidden>sort_seq</th>");
jsAlHTML.push("<th class='hidden'></th>");
jsAlHTML.push("</tr>");
jsAlHTML.push("</thead>");
jsAlHTML.push("<tbody>");
var case_detail=recordData.CASE_DETAIL;
var n_case_detail=case_detail.length;
for(var i=0;
i<n_case_detail;
++i){var inventory_detail=case_detail[i].INVENTORY_DETAIL;
var n_inventory_detail=inventory_detail.length;
for(var j=0;
j<n_inventory_detail;
++j){var specimen=inventory_detail[j].SPECIMEN;
var inventory_item=inventory_detail[j].INVENTORY_ITEM;
var tracking_location=inventory_detail[j].TRACKING_LOCATION;
var estimated_tat=inventory_detail[j].ESTIMATED_TAT;
var actual_tat=inventory_detail[j].ACTUAL_TAT;
var sort_seq=inventory_detail[j].INVENTORY_ITEM_SORT_SEQ;
var pieces=inventory_detail[j].PIECES;
var modifier=inventory_detail[j].ORIGIN_MODIFIER;
var hasPieces=pieces!=null&&($.trim(pieces).length>0);
var hasModifier=modifier!=null&&($.trim(modifier).length>0);
var specimen_short="";
jsAlHTML.push("<tr>");
if(specimen.length>45){specimen_short=specimen.substring(0,45)+' <input class="btnMoreText" type="button" value="..."/>';
}else{specimen_short=specimen;
}jsAlHTML.push("<td class=apcaselist-tat-detail title='"+specimen+"'>",specimen_short,"</td>");
jsAlHTML.push("<td class=apcaselist-tat-detail>",inventory_item,"</td>");
jsAlHTML.push("<td class=apcaselist-tat-detail>",tracking_location,"</td>");
if(component.exclWeekend>=0){jsAlHTML.push("<td class=apcaselist-tat-detail>",estimated_tat,"</td>");
if(estimated_tat>=actual_tat){jsAlHTML.push("<td class=apcaselist-tat-detail>",actual_tat,"</td>");
}else{jsAlHTML.push("<td class=apcaselist-tat-detail><span class=overdue>",actual_tat,"<span></td>");
}}else{jsAlHTML.push("<td class=hidden>",estimated_tat,"</td>");
jsAlHTML.push("<td class=hidden>",actual_tat,"</td>");
}jsAlHTML.push("<td class=hidden>",sort_seq,"</td>");
jsAlHTML.push("<td class='hidden hvr_text' data-show-small-tip='true'>");
if(hasPieces||hasModifier){jsAlHTML.push("<dl class='apcaselist-det'>");
if(hasPieces){jsAlHTML.push("<dt><span>",i18n.lab.ap_summary.PIECES,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",pieces,"</span></dd>");
}if(hasModifier){jsAlHTML.push("<dt><span>",i18n.lab.ap_summary.MODIFIER,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",modifier,"</span></dd>");
}jsAlHTML.push("</dl>");
}jsAlHTML.push("</td>");
jsAlHTML.push("</tr>");
}}jsAlHTML.push("</tbody>");
jsAlHTML.push("</table>");
jsAlHTML.push("</div>");
jsAlHTML.push("</td>");
content_html=jsAlHTML.join("");
$(selector).siblings(".expand-"+case_id).append(content_html);
$(".overdue").css("color","#"+component.colors.overdue);
$(".btnMoreText",".expand-"+case_id).each(function(){var elem=$(this);
var full_text=elem.parents("td").attr("title");
elem.data("text",full_text);
elem.parents("td").removeAttr("title");
});
$(".btnMoreText",".expand-"+case_id).click(function(){var elem=$(this);
var full_text=elem.data("text");
ShowModalDialog(full_text);
});
$(selector).siblings(".expand-"+case_id).show();
$("#table-detail-"+case_id).tablesorter();
$("#table-detail-"+case_id).trigger("update");
$("#table-detail-"+case_id).trigger("sorton",[[[5,0]]]);
var rows=$("#table-detail-"+case_id+" tbody tr");
rows.hover(function(event){$(this).addClass("data-row-hover");
var hoverTdEl=$(this).find("td.hvr_text:first");
var showSmallToolTip=hoverTdEl.attr("data-show-small-tip")=="true";
var text=hoverTdEl.html();
if((text!=null)&&(text!="")){ShowTooltip(event,text,showSmallToolTip);
}},function(event){$(this).removeClass("data-row-hover");
HideTooltip(event);
}).mousemove(function(event){PositionTooltip(event);
});
}function LoadWorkflowDetails(component,selector){var sendAr=[];
var component_id=component.getComponentId();
var case_id=selector.id;
var lbDays=getDefaultDays(component);
sendAr.push("MINE");
sendAr.push(lbDays,component.workflowCd+".00",case_id+".00");
MP_Core.XMLCclRequestWrapper_notComponent(component,"PCS_GET_WORKFLOW_DETAIL",sendAr,true,function(data){ProcessWorkflowDetailResults(component,case_id,data,selector);
});
}function ltrim(stringToTrim){return stringToTrim.replace(/^\s+/,"");
}function rtrim(stringToTrim){return stringToTrim.replace(/\s+$/,"");
}function writeDefaultDays(days){appCaseListSettings.lookback_days=days;
MP_LAB_UTIL.SetPagePrefs(APPNUMBER,APPSECTION,appCaseListSettings,function(recordData){return false;
});
}function getDefaultDays(component){var days=0;
if(component.getDefaultDays()>0){days=component.getDefaultDays();
}else{component.setDefaultDays(gAPSum_BedrockLookback);
days=gAPSum_BedrockLookback;
}return days;
}function getData(component){var currentLookbackDays=getDefaultDays(component);
var sendAr=[];
var criterion=component.getCriterion();
sendAr.push("^MINE^");
sendAr.push(currentLookbackDays,component.workflowCd+".00");
MP_Core.XMLCclRequestWrapper(component,"PCS_GET_WORKFLOW_ACTIVITY",sendAr,true);
}return{GetCaseList:function(component){MP_COLORSELECTOR.GetColorPref(section,component);
if(component.getDefaultDays()>0){getData(component);
}else{MP_LAB_UTIL.GetPagePrefs(APPNUMBER,APPSECTION,function(sSettingsJSON){appCaseListSettings=sSettingsJSON?$.extend(appCaseListSettings,sSettingsJSON):appCaseListSettings;
var days=parseInt(appCaseListSettings.lookback_days);
if(days>0){component.setDefaultDays(days);
}getData(component);
});
}},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsAlHTML=[];
var alHTML="";
var countText="";
var n_case=0;
var n_step=0;
popupStatus=0;
var workflowStepList=recordData.WORKFLOW_STEP;
n_step=recordData.WORKFLOW_STEP.length;
var caseDetailList=recordData.CASE_DETAIL;
n_case=recordData.CASE_DETAIL.length;
component.workflowCd=recordData.WORKFLOWCD;
if(component.workflowCd>0){component.workflowDisp=recordData.WORKFLOWDISP;
}component.exclWeekend=recordData.EXCL_WEEKENDS;
jsAlHTML.push("<div id='cl-main'>");
jsAlHTML.push("<div id='cl-top-bar'>"+i18n.lab.ap_summary.WORKFLOW+": <a  href='javascript:' id='cl-workflow-select'>",component.workflowDisp,"</a><a href='javascript:'  id='filter'>",i18n.lab.ap_summary.FILTER,"</a>");
jsAlHTML.push("</a><a href='javascript:'  id='Color_Customize'>",i18n.CUSTOMIZE,"</a></div>");
jsAlHTML.push(AddFilterBlock());
jsAlHTML.push("</div>");
jsAlHTML.push("<div id='cl-view'>");
component.n_Workflow_Step=n_step;
if(component.workflowCd>0){jsAlHTML.push("<table id='cl-table'>");
jsAlHTML.push("<tr class=apcaselist-info>");
for(var i=0;
i<=n_step;
i++){if(i<=0){jsAlHTML.push("<th class=apcaselist-name>","Case","</th>");
}else{jsAlHTML.push("<th class=apcaselist-name>",workflowStepList[i-1].STEP_DISP,"</th>");
}}patientNthCol=n_step+2;
pathologistNthCol=n_step+3;
specimenNthCol=n_step+4;
prefixNameNthCol=n_step+5;
residentNthCol=n_step+6;
aliasNthCol=n_step+7;
jsAlHTML.push("<th class='hidden'>","Patient","</th>");
jsAlHTML.push("<th class='hidden'>","Pathologist","</th>");
jsAlHTML.push("<th class='hidden'>","Specimen","</th>");
jsAlHTML.push("<th class='hidden'>","Prefix Name","</th>");
jsAlHTML.push("<th class='hidden'>","Resident","</th>");
jsAlHTML.push("<th class='hidden'>","Alias","</th>");
jsAlHTML.push("</tr>");
for(var i=0;
i<n_case;
i++){var isAPCase=caseDetailList[i].INV_TYPE=="AP";
var case_number=caseDetailList[i].CASE_NUMBER;
var caseNumberDisp;
var nCaseId=caseDetailList[i].CASE_ID;
var n_blocks=caseDetailList[i].WORKFLOW_STEP.length;
var person_idx=0;
var person=caseDetailList[i].PERSON[person_idx].NAME;
var person_dob=caseDetailList[i].PERSON[person_idx].DOB;
var person_id=caseDetailList[i].PERSON[person_idx].ID;
var n_alias=caseDetailList[i].PERSON[person_idx].ALIAS.length;
var pathologist=caseDetailList[i].PATHOLOGIST;
var specimenStr=caseDetailList[i].SPECIMENSTR;
var prefixnameStr=ltrim(caseDetailList[i].PREFIX_NAME);
var resident=caseDetailList[i].RESIDENT;
var workflow_progress=new Array(n_step,false);
var person_lowercase=person.toLowerCase();
var pathologist_lowercase=pathologist.toLowerCase();
var specimenStr_lowercase=specimenStr.toLowerCase();
var prefixnameStr_lowercase=prefixnameStr.toLowerCase();
var resident_lowercase=resident.toLowerCase();
var overdue=new Array(n_step,false);
tatDisplay[nCaseId]=false;
for(var j=0;
j<n_blocks;
j++){var step_seq=caseDetailList[i].WORKFLOW_STEP[j].STEP_SEQ;
var overdue_bit=caseDetailList[i].WORKFLOW_STEP[j].ITEMS_OVERDUE;
workflow_progress[step_seq-1]=true;
if(overdue_bit==1){overdue[step_seq-1]=true;
}}jsAlHTML.push("<tr id='"+nCaseId+"' class=apcaselist-info>");
if(isAPCase&&caseDetailList[i].RELATED_ACCESSIONS!=null&&caseDetailList[i].RELATED_ACCESSIONS.length>0){var caseAccHtml=[];
caseAccHtml.push("<ul class='ul-apcaselist-info'>");
for(var j=0;
j<caseDetailList[i].RELATED_ACCESSIONS.length;
j++){var julianAcc=caseDetailList[i].RELATED_ACCESSIONS[j].ACCESSION;
var liCss=(j==0)?"apcaselist-data-case-top":"apcaselist-data-case-middle";
caseAccHtml.push("<li class='"+liCss+"'>"+julianAcc+"</li>");
}caseAccHtml.push("<li class='apcaselist-data-case-bottom'>"+case_number+"</li>");
caseAccHtml.push("</ul>");
caseNumberDisp="<td>"+caseAccHtml.join("")+"</td>";
}else{caseNumberDisp="<td class='apcaselist-data-case'>"+case_number+"</td>";
}for(var j=0;
j<=n_step;
j++){if(j<=0){jsAlHTML.push(caseNumberDisp);
}else{if(workflow_progress[j-1]==true){if(overdue[j-1]==true){jsAlHTML.push("<td class='apcaselist-data step_overdue'></td>");
}else{jsAlHTML.push("<td class='apcaselist-data'></td>");
}}else{jsAlHTML.push("<td class=apcaselist-empty></td>");
}}}var jsperson_aliases=[];
var alperson_aliases="";
for(var k=0;
k<n_alias;
k++){var person_alias=caseDetailList[i].PERSON[person_idx].ALIAS[k].ALIAS_DISP;
jsperson_aliases.push(person_alias);
}alperson_aliases=jsperson_aliases.join(" ");
var alperson_aliases_lowercase=alperson_aliases.toLowerCase();
jsAlHTML.push("<td class='hidden'>",person_lowercase,"</td>");
jsAlHTML.push("<td class='hidden'>",pathologist_lowercase,"</td>");
jsAlHTML.push("<td class='hidden'>",specimenStr_lowercase,"</td>");
jsAlHTML.push("<td class='hidden'>",prefixnameStr_lowercase,"</td>");
jsAlHTML.push("<td class='hidden'>",resident_lowercase,"</td>");
jsAlHTML.push("<td class='hidden'>",alperson_aliases_lowercase,"</td>");
jsAlHTML.push("<td class='hidden hvr_text'>");
jsAlHTML.push("<dl class='apcaselist-det'>");
jsAlHTML.push("<dt><span>",i18n.NAME,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",person,"</span></dd>");
jsAlHTML.push("<dt><span>",i18n.DOB,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",person_dob,"</span></dd>");
if(isAPCase){jsAlHTML.push("<dt><span>",i18n.lab.ap_summary.PATHOLOGIST,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",pathologist,"</span></dd>");
}for(var k=0;
k<n_alias;
k++){var person_alias=caseDetailList[i].PERSON[person_idx].ALIAS[k].ALIAS_DISP;
var person_alias_type=caseDetailList[i].PERSON[person_idx].ALIAS[k].ALIAS_TYPE;
jsAlHTML.push("<dt><span>",person_alias_type,":","</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",person_alias,"</span></dd>");
}if(isAPCase){jsAlHTML.push("<dt><span>",i18n.lab.ap_summary.RESIDENT,":</span></dt>");
jsAlHTML.push("<dd class='apcaselist-det-name'><span class='res-normal'>",resident,"</span></dd>");
}jsAlHTML.push("</dl>");
jsAlHTML.push("</td>");
jsAlHTML.push("</tr>");
jsAlHTML.push("<tr class='case_expand expand-"+nCaseId+"'>");
jsAlHTML.push("</tr>");
}jsAlHTML.push("</table>");
}jsAlHTML.push("</div>");
if(n_case<=5){jsAlHTML.push("<div id='cl-bottom-pad'>");
jsAlHTML.push("</div>");
}jsAlHTML.push("</div>");
alHTML=jsAlHTML.join("");
countText=MP_Util.CreateTitleText(component,n_case);
MP_Util.Doc.FinalizeComponent(alHTML,component,countText);
SetColors(component);
CreateEventHandlers(component);
$("#filter").focus();
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},SetColors:function(comp){SetColors(comp);
}};
}();
function APDummyComponentStyle(){this.initByNamespace("apDummy");
}APDummyComponentStyle.inherits(ComponentStyle);
function APDummyComponent(criterion){this.setCriterion(criterion);
this.setScope(0);
this.setStyles(new APDummyComponentStyle());
this.LOOKBACK_DAYS=0;
APDummyComponent.method("InsertData",function(){});
APDummyComponent.method("HandleSuccess",function(recordData){});
APDummyComponent.method("GetPageName",function(){return this.m_label;
});
APDummyComponent.method("SetLookback",function(value){this.LOOKBACK_DAYS=value;
});
APDummyComponent.method("GetLookback",function(){return this.LOOKBACK_DAYS;
});
}APDummyComponent.inherits(MPageComponent);
function APSumCountsComponentStyle(){this.initByNamespace("apSum");
}APSumCountsComponentStyle.inherits(ComponentStyle);
function APSumCountsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new APSumCountsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.APINVSUMCOUNTS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.APINVSUMCOUNTS.O1 - render component");
this.setIncludeLineNumber(true);
this.setPlusAddEnabled(false);
this.setExpanded(true);
this.setScope(0);
this.workflowCd=0;
this.workflowDisp="{"+i18n.lab.ap_summary.NONE_SELECTED+"}";
this.m_defaultdays=null;
this.isClrPrefLoaded=false;
this.colors={overdue:"FF0000",ontime:"0000FF"};
APSumCountsComponent.method("InsertData",function(days){if(days){this.m_defaultdays=days;
}CERN_APINVSUMCOUNTS_O1.GetInventorySumCounts(this);
});
APSumCountsComponent.method("HandleSuccess",function(recordData){CERN_APINVSUMCOUNTS_O1.RenderComponent(this,recordData);
});
APSumCountsComponent.method("setDefaultDays",function(value){this.m_defaultdays=value;
});
APSumCountsComponent.method("getDefaultDays",function(){return this.m_defaultdays;
});
APSumCountsComponent.method("HandleColorChange",function(overdue,ontime){if(overdue){this.colors.overdue=overdue;
}if(ontime){this.colors.ontime=ontime;
}CERN_APINVSUMCOUNTS_O1.GetInventorySumCounts(this);
});
APSumCountsComponent.method("HandleWorkflowChange",function(workflowCd,workflowDisp){if(workflowCd!=this.workflowCd){this.workflowCd=workflowCd;
this.workflowDisp=workflowDisp;
this.InsertData();
}});
}APSumCountsComponent.inherits(MPageComponent);
var CERN_APINVSUMCOUNTS_O1=function(){var popupStatus=0;
var maxlkbkdays=30;
var previousPoint=null;
var apDataOk=new Array();
var apDataDue=new Array();
var apData=new Array();
var section="MP_APINVSUMMARY";
var APPNUMBER=1050009;
var APPSECTION="APSUM_LOOKBACK";
var appSumSettings={lookback_days:null};
function GraphEventHandlers(component){$("#graphfilter").click(function(){alignFilterPopup();
loadFilterPopup(component);
});
$("#invsum-workflow-select").click(function(e){MP_WORKFLOWSELECTOR.ShowWorkflowSelector(e,component.workflowCd,section,function(workflowCd,workflowDisp){component.HandleWorkflowChange(workflowCd,workflowDisp);
});
});
$("#inv_Color_Customize").click(function(e){MP_COLORSELECTOR.ShowColorSelector(e,section,component);
});
$("#filterPopupClose").click(function(){disablePopup();
});
$("#cancel").click(function(){disablePopup();
});
$("#ok").click(function(){if(accuratelbdays()){disablePopup();
updateLookBackDays(document.getElementById("lookbackdays").value,component);
}});
$("#default").click(function(){disablePopup();
updateLookBackDays(gAPSum_BedrockLookback,component);
});
$("#lookbackdays").keyup(function(e){if(e.keyCode==13&&popupStatus==1){if(accuratelbdays()){disablePopup();
updateLookBackDays(document.getElementById("lookbackdays").value,component);
}}else{if(e.keyCode==27&&popupStatus==1){$("#filterPopup").keyup(e);
}}});
$("#filterPopup").keyup(function(e){if(e.keyCode==27&&popupStatus==1){disablePopup();
}});
enableGraphEvents();
}function enableGraphEvents(){var label="";
$("#graphframe").bind("plothover",function(event,pos,item){if(item){if(previousPoint!=item.datapoint){previousPoint=item.datapoint;
$("#tooltip").remove();
var di=item.dataIndex;
if(apData.length>0){label=i18n.lab.ap_summary.TOTAL+": "+apData[di][1];
}if(apDataDue.length>0||apDataOk.length>0){if(item.seriesIndex==0){label=i18n.lab.ap_summary.ON_TIME+": ";
}else{label=i18n.lab.ap_summary.OVERDUE+": ";
}var diVal=new Array();
diVal=item.series.data[di];
var okTotal=apDataOk[di][1];
var dueTotal=apDataDue[di][1];
if(okTotal==null){okTotal=0;
}if(dueTotal==null){dueTotal=0;
}var total=okTotal+dueTotal;
label+=diVal[1]+"</br> "+i18n.lab.ap_summary.TOTAL+": "+total;
}showTooltip(item.pageX,item.pageY,label);
}}else{$("#tooltip").remove();
previousPoint=null;
}});
$("#graphframe").mouseout(function(){$("#tooltip").remove();
previousPoint=null;
});
$("#graphframe").bind("plotclick",function(event,pos,item){if(item){if(previousPoint!=item.datapoint){previousPoint=item.datapoint;
$("#tooltip").remove();
var di=item.dataIndex;
if(apData.length>0){label=i18n.lab.ap_summary.TOTAL+": "+apData[di][1];
}if(apDataDue.length>0||apDataOk.length>0){if(item.seriesIndex==0){label=i18n.lab.ap_summary.ON_TIME+": ";
}else{label=i18n.lab.ap_summary.OVERDUE+": ";
}var diVal=new Array();
diVal=item.series.data[di];
var okTotal=apDataOk[di][1];
var dueTotal=apDataDue[di][1];
if(okTotal==null){okTotal=0;
}if(dueTotal==null){dueTotal=0;
}var total=okTotal+dueTotal;
label+=diVal[1]+"</br> "+i18n.lab.ap_summary.TOTAL+": "+total;
}showTooltip(item.pageX,item.pageY,label);
}}});
}function disablePopup(){if(popupStatus==1){$("#bgPopup").fadeOut("slow");
$("#filterPopup").fadeOut("slow");
popupStatus=0;
$("#graphfilter").focus();
}}function alignFilterPopup(){var graphHeight=$("#graphframe").height();
$("#filterPopup").css({position:"absolute",top:1,right:1});
$("#graphframe").css({height:graphHeight});
}function loadFilterPopup(comp){document.getElementById("lookbackdays").value=comp.getDefaultDays();
$("#lkbd-suggest").show();
if(popupStatus==0){$("#bgPopup").css({opacity:"0.7"});
$("#bgPopup").fadeIn("slow");
$("#filterPopup").fadeIn("slow");
$("#lkbkerror").fadeOut("fast");
$("#lookbackdays").focus();
popupStatus=1;
}}function updateLookBackDays(days,comp){comp.InsertData(days);
comp.setDefaultDays(days);
writeDefaultDays(days);
}function IsNumeric(val){var numExp=/^[0-9]+$/;
if(val.match(numExp)){return true;
}else{return false;
}}function accuratelbdays(){var lookbackdays=document.getElementById("lookbackdays").value;
if(IsNumeric(lookbackdays)&&(parseInt(lookbackdays)>=1)){return true;
}else{$("#lkbkerror").fadeIn("slow");
$("#lookbackdays").focus();
return false;
}}function showTooltip(x,y,contents){$('<div id="tooltip">'+contents+"</div>").css({position:"absolute",display:"none","z-index":1,top:y-30,left:x-5,border:"1px solid #fdd",padding:"2px","background-color":"#FFFFCC",opacity:0.8}).appendTo("body").fadeIn(0);
}function redrawGraphDiv(){var phdiv=document.getElementById("placeholder");
var gfdiv=document.getElementById("graphframe");
phdiv.removeChild(gfdiv);
var ngfdiv=document.createElement("div");
ngfdiv.setAttribute("id","graphframe");
phdiv.appendChild(ngfdiv);
}function PlotGraph(workflowStepList,displaytat,overdueColor,ontimeColor){var css_id="#graphframe";
var placeHolder=$(css_id);
var plotData;
var docWidth=0;
var DOCUMENT_OFFSET=30;
var xData=new Array();
apData=new Array();
apDataDue=new Array();
apDataOk=new Array();
if(displaytat==0){for(var i=0,k=workflowStepList.length;
i<k;
i++){var currentStep=workflowStepList[i];
apData.push([i,currentStep.INVENTORY_COUNT]);
xData.push([i,currentStep.STEP_DISP]);
}var plotData=[{data:apData,color:ontimeColor,shadowSize:0}];
}else{for(var i=0,k=workflowStepList.length;
i<k;
i++){var currentStep=workflowStepList[i];
var okItems=currentStep.ITEMS_OK;
var oDueItems=currentStep.ITEMS_OVERDUE;
apDataDue.push([i,oDueItems]);
apDataOk.push([i,okItems]);
xData.push([i,currentStep.STEP_DISP]);
}var plotData=[{data:apDataOk,color:ontimeColor,shadowSize:0},{data:apDataDue,color:overdueColor,shadowSize:0}];
}var options={series:{stack:true,lines:{show:false,steps:false},bars:{show:true,barWidth:0.6,align:"center"}},grid:{hoverable:true,clickable:true},xaxis:{ticks:xData,autoscaleMargin:0.02},yaxis:{min:0}};
try{var plot=$.plot(placeHolder,plotData,options);
}catch(err){}$(window).resize(function(){try{redrawGraphDiv();
$.plot($(css_id),plotData,options);
enableGraphEvents();
}catch(err){}});
}function writeDefaultDays(days){appSumSettings.lookback_days=days;
MP_LAB_UTIL.SetPagePrefs(APPNUMBER,APPSECTION,appSumSettings,function(recordData){return false;
});
}function getDefaultDays(component){var days=0;
if(component.getDefaultDays()>0){days=component.getDefaultDays();
}else{component.setDefaultDays(gAPSum_BedrockLookback);
days=gAPSum_BedrockLookback;
}return days;
}function getData(component){var sendAr=[];
var criterion=component.getCriterion();
var lookBackDays=getDefaultDays(component);
sendAr.push("^MINE^",lookBackDays,component.workflowCd+".00");
MP_Core.XMLCclRequestWrapper(component,"PCS_GET_TRACKING_COUNTS",sendAr,true);
}return{GetInventorySumCounts:function(component){if(component.isClrPrefLoaded==false){MP_COLORSELECTOR.GetColorPref(section,component);
component.isClrPrefLoaded=true;
}if(component.getDefaultDays()>0){getData(component);
}else{MP_LAB_UTIL.GetPagePrefs(APPNUMBER,APPSECTION,function(sSettingsJSON){appSumSettings=sSettingsJSON?$.extend(appSumSettings,sSettingsJSON):appSumSettings;
var days=parseInt(appSumSettings.lookback_days);
if(days>0){component.setDefaultDays(days);
}getData(component);
});
}},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsAlHTML=[];
var alHTML="";
var countText="";
var steps=0;
var displaytat=0;
var inventoryCount=0;
displaytat=recordData.DISPLAY_TAT;
steps=recordData.WORKFLOW_STEP.length;
component.workflowCd=recordData.WORKFLOWCD;
if(component.workflowCd>0){component.workflowDisp=recordData.WORKFLOWDISP;
}jsAlHTML.push("<div id='placeholder'>","<div id='bgPopup'></div>");
jsAlHTML.push("<span id='invsum-top-bar'>"+i18n.lab.ap_summary.WORKFLOW+": <a  href='javascript:' id='invsum-workflow-select'>",component.workflowDisp,"</a><a  href='javascript:'  id='graphfilter'>",i18n.lab.ap_summary.FILTER,"</a>");
jsAlHTML.push("</a><a href='javascript:'  id='inv_Color_Customize'>",i18n.CUSTOMIZE,"</a></span>");
jsAlHTML.push("<div id='filterPopup'><a href='javascript:' id='filterPopupClose'>x</a>","<div id='lkbkerror'>",i18n.lab.ap_summary.LOOKBACK_DAYS_ERROR,"</div><br />",i18n.lab.ap_summary.LOOKBACK_DAYS,": <input type='text' id='lookbackdays' name='lookbackdays' size='2' /><br />","<span id=lkbd-suggest>",i18n.lab.ap_summary.LOOKBACK_DAYS_SUGGEST,"</span><br />","<div id='actionButtons'><input id='ok' type='submit' value='",i18n.lab.ap_summary.OK,"'/>","<input id='cancel' type='submit' value='",i18n.CANCEL,"'/>","<input id='default' type='submit' value='",i18n.lab.ap_summary.DEFAULT,"'/></div></div>","<div id='graphframe'></div></div>");
alHTML=jsAlHTML.join("");
if(steps>0){for(var i=0;
i<steps;
i++){if(recordData.WORKFLOW_STEP[i].INVENTORY_COUNT>0){inventoryCount+=recordData.WORKFLOW_STEP[i].INVENTORY_COUNT;
}}}countText=MP_Util.CreateTitleText(component,inventoryCount);
MP_Util.Doc.FinalizeComponent(alHTML,component,countText);
PlotGraph(recordData.WORKFLOW_STEP,displaytat,"#"+component.colors.overdue,"#"+component.colors.ontime);
GraphEventHandlers(component);
$("#graphfilter").focus();
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
var MP_COLORSELECTOR=function(){this.defaultOntime="0000FF";
this.defaultOverDue="FF0000";
this.Ontime="0000FF";
this.Overdue="FF0000";
var APPNUMBER=1050009;
function CloseDialog(e){e.preventDefault();
$("#mask").hide();
$(".window").hide();
}function buildDialog(section,component){var el;
if(!document.getElementById("color_dialog")){el=document.createElement("div");
el.id="color_dialog";
el.className="window";
document.body.appendChild(el);
var clrBox=$("#color_dialog");
var jsHTML=[];
var code={};
jsHTML.push('<h4 id="dialog_caption">'+i18n.lab.ap_summary.COLORSELECTOR+": "+component.getLabel()+"</h4>");
jsHTML.push('<div id="workflow_selector_box">');
jsHTML.push(i18n.lab.ap_summary.OVERDUE+" <input value='' class='color hash' id='OverdueColor' autocomplete='off'>");
jsHTML.push(i18n.lab.ap_summary.ON_TIME+" <input value='' class='color hash' id='OntimeColor' autocomplete='off'>");
jsHTML.push("</div>");
jsHTML.push("<div id='cl-clr-actionButtons'><input id='cl-clr-ok' type='submit' value='",i18n.lab.ap_summary.OK,"'/>");
jsHTML.push("<input id='cl-clr-cancel' type='submit' value='",i18n.CANCEL,"'/>");
jsHTML.push("<input id='cl-clr-default' type='submit' value='",i18n.lab.ap_summary.DEFAULT,"'/>");
jsHTML.push("</div>");
clrBox.html(jsHTML.join(""));
var maskdiv=document.createElement("div");
maskdiv.id="mask";
document.getElementsByTagName("body")[0].appendChild(maskdiv);
}else{$("#dialog_caption").html(i18n.lab.ap_summary.COLORSELECTOR+": "+component.getLabel());
}MP_COLORSELECTOR.SetColor(component.colors.overdue,component.colors.ontime);
jscolor.bind();
SetupClickEvent(section,component);
}function ShowDialog(e){e.preventDefault();
var id=$("#color_dialog");
var maskHeight=$(document).height();
var maskWidth=$(window).width();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2);
id.show();
$("#color_dialog").focus();
$("#color_dialog").keyup(function(e){if(e.keyCode==27){CloseDialog(e);
}});
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
}function IsValidColor(color){var regex=/^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$/;
return regex.test(color);
}function SetupClickEvent(section,component){$("#cl-clr-default").unbind().click(function(e){MP_COLORSELECTOR.SetDefaultColor("FF0000","0000FF");
component.colors.overdue=defaultOverDue;
component.colors.ontime=defaultOntime;
SetPagePrefs(APPNUMBER,section,component.colors,function(recordData){return false;
});
component.HandleColorChange();
CloseDialog(e);
});
$("#cl-clr-ok").unbind().click(function(e){storeColors();
var overdue=MP_COLORSELECTOR.GetOverdue();
var ontime=MP_COLORSELECTOR.GetOntime();
component.colors.overdue=overdue?overdue:component.colors.overdue;
component.colors.ontime=ontime?ontime:component.colors.ontime;
SetPagePrefs(APPNUMBER,section,component.colors,function(recordData){return false;
});
component.HandleColorChange();
CloseDialog(e);
});
$("#cl-clr-cancel").unbind().click(function(e){CloseDialog(e);
});
}function storeColors(){var color=$("#OntimeColor").val();
MP_COLORSELECTOR.SetOntime(IsValidColor(color)?color:component.colors.ontime);
color=$("#OverdueColor").val();
MP_COLORSELECTOR.SetOverdue(IsValidColor(color)?color:component.colors.overdue);
}function SetPagePrefs(nAppNbr,sPrefSection,sParams,callback){var paramsAr=[];
var dfltstr='{"defaultColor":[';
var replaceQuotes=dfltstr.replace(/"/g,"\u0001")+JSON.stringify(sParams).replace(/"/g,"\u0001");
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'","'"+replaceQuotes+"]}'");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.SETPAGEPREFS.O1 - saving page prefs","PCS_UPD_MPAGE_PREF",paramsAr,true,callback);
}return{SetDefaultColor:function(overdue,ontime){MP_COLORSELECTOR.defaultOverDue=overdue;
MP_COLORSELECTOR.defaultOntime=ontime;
},SetColor:function(overdue,ontime){$("#OverdueColor").val(overdue);
$("#OntimeColor").val(ontime);
$("#OverdueColor").css("background-color","#"+overdue);
$("#OntimeColor").css("background-color","#"+ontime);
},ShowColorSelector:function(e,section,component){buildDialog(section,component);
ShowDialog(e);
},GetDefaultOnTimeClr:function(){return this.defaultOntime;
},GetDefaultOverDueClr:function(){return this.defaultOverDue;
},GetColorPref:function(section,component){MP_LAB_UTIL.GetPagePrefs(APPNUMBER,section,function(sSettingsJSON){if(sSettingsJSON!=undefined){if(sSettingsJSON.defaultColor.length>0){var sOverdue=sSettingsJSON.defaultColor[0].overdue!=undefined?sSettingsJSON.defaultColor[0].overdue:this.defaultOverDue;
var sOntime=sSettingsJSON.defaultColor[0].ontime!=undefined?sSettingsJSON.defaultColor[0].ontime:this.defaultOntime;
component.colors.overdue=sOverdue;
component.colors.ontime=sOntime;
}else{component.colors.overdue=this.defaultOverDue;
component.colors.ontime=this.defaultOntime;
}}});
},SetOverdue:function(color){this.overdue=color;
},GetOverdue:function(){return this.overdue;
},SetOntime:function(color){this.ontime=color;
},GetOntime:function(){return this.ontime;
}};
}();
var MP_WORKFLOWSELECTOR=function(){function CloseDialog(e){e.preventDefault();
$("#mask").hide();
$(".window").hide();
}function ShowDialog(e,workflowCd){e.preventDefault();
var id=$("#workflow_dialog");
var maskHeight=$(document).height();
var maskWidth=$(window).width();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2);
id.find("#workflow_select").val(workflowCd);
id.show();
$("#workflow_select").focus();
$("#workflow_dialog").keyup(function(e){if(e.keyCode==27){CloseDialog(e);
}});
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
}function SetupClickEvent(section,callback){$("#workflow_select").unbind("change").change(function(){var workflowCd=$(this).val();
if(workflowCd>0){var workflowDisp=$("#workflow_select :selected").text();
}else{var workflowDisp="{"+i18n.lab.ap_summary.NONE_SELECTED+"}";
}SetPagePrefs(1050009,section+"_WORKFLOW",workflowCd,function(){if(callback!==undefined){callback(workflowCd,workflowDisp);
}});
});
}function SetPagePrefs(nAppNbr,sPrefSection,sParams,callback){var paramsAr=[];
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'",'"defaultWorkflow='+sParams+'"');
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.SETPAGEPREFS.O1 - saving page prefs","PCS_UPD_MPAGE_PREF",paramsAr,true,callback);
}return{LoadWorkflows:function(){var el;
if(!document.getElementById("workflow_dialog")){el=document.createElement("div");
el.id="workflow_dialog";
el.className="window";
document.body.appendChild(el);
var workflow=MP_Util.GetCodeSet(2075,false);
var wfCnt=workflow.length;
var wfBox=$("#workflow_dialog");
var jsHTML=[];
var code={};
jsHTML.push("<h4>"+i18n.lab.ap_summary.AVAILABLE+" "+i18n.lab.ap_summary.WORKFLOWS+":</h4>");
jsHTML.push('<div id="workflow_selector_box">');
jsHTML.push('<select name="'+i18n.lab.ap_summary.WORKFLOWS+'" id=workflow_select>');
jsHTML.push('<option value=0 title=""></option>');
for(var i=0;
i<wfCnt;
i++){code=workflow[i].value;
jsHTML.push("<option value="+code.codeValue+' title="'+code.description+'">'+code.display+"</option>");
code=null;
}jsHTML.push("</select>");
jsHTML.push('</div><div class=close_label><a href="javascript:" class="close">'+i18n.lab.ap_summary.CLOSE+"</a></div>");
wfBox.html(jsHTML.join(""));
var maskdiv=document.createElement("div");
maskdiv.id="mask";
document.getElementsByTagName("body")[0].appendChild(maskdiv);
SetupClickEvent("MP_APCASELIST");
$(".window .close").click(function(e){CloseDialog(e);
});
}},ShowWorkflowSelector:function(e,nWorkFlowCd,section,callback){SetupClickEvent(section,callback);
ShowDialog(e,nWorkFlowCd);
}};
}();
if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieVersion=new Number(RegExp.$1);
}else{var ieVersion=0;
}var gAPSum_BedrockLookback=0;
function RenderPage(){var js_criterion=JSON.parse(m_criterionJSON);
var criterion=MP_Util.GetCriterion(js_criterion,CERN_static_content);
var FuncFilterMapping=Array(new MP_Core.MapObject("BANNER",'{"FUNCTION":{"NAME":"setDefaultDays","TYPE":"Boolean","FIELD":"FREETEXT_DESC"}}'));
var compFuncFilterMapping=Array(new MP_Core.MapObject("mp_ap_track_page",'{"FUNCTIONS":[{"FILTER_MEAN": "AP_TRACK_LOOKBACK", "NAME":"SetLookback", "TYPE":"Number", "FIELD": "FREETEXT_DESC"}]}'));
var inptComponentMapping=Array(new MP_Core.MapObject("mp_ap_track_case_list",CaseListViewComponent),new MP_Core.MapObject("mp_ap_track_inventory",APSumCountsComponent),new MP_Core.MapObject("mp_ap_track_page",APDummyComponent));
var inptMPage=MP_Bedrock.CreateBedrockMPage("MP_AP_TRACK_SUMMARY",inptComponentMapping,criterion,FuncFilterMapping,compFuncFilterMapping);
var tmpComp=inptMPage.getComponents();
var dummyComp,dCompIdx;
for(var i=0;
i<tmpComp.length;
i++){var comp=tmpComp[i];
if(comp instanceof APDummyComponent){dummyComp=comp;
dCompIdx=i;
}}tmpComp.splice(dCompIdx,1);
inptMPage.setComponents(tmpComp);
gAPSum_BedrockLookback=dummyComp.GetLookback();
inptMPage.setName(dummyComp.GetPageName());
dummyComp=null;
MP_Util.Doc.InitLayout(inptMPage);
MP_WORKFLOWSELECTOR.LoadWorkflows();
MP_Util.Doc.RenderLayout();
MP_Util.Doc.ExpandCollapseAll();
}