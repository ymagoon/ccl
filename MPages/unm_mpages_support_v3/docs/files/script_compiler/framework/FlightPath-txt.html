<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>/www/mpages_googlecode/script_compiler/framework/FlightPath.txt</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script><script type="text/javascript" src="../shjs/sh_main.js"></script><script type="text/javascript" src="../shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile CTopic" id=MainTopic><h1 class=CTitle><a name="FlightPath.txt"></a>FlightPath.txt</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#FlightPath.txt" >FlightPath.txt</a></td><td class=SDescription></td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#FlightPath_Overview" >FlightPath Overview</a></td><td class=SDescription>Myna FlightPath is a Model-View-Controller(MVC) web application framework inspired by CakePHP, CFWheels and Ruby On Rails.</td></tr><tr class="SGeneric"><td class=SEntry><a href="#Glossary" >Glossary</a></td><td class=SDescription>Terms used when talking about Myna FlightPath Applications</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Getting_Started" >Getting Started</a></td><td class=SDescription>To create a FlightPath template, navigate to the Myna Administrator and select &ldquo;Add/Update FlightPath App&rdquo;, and enter a path and folder name, relative to the Myna web root. </td></tr><tr class="SGeneric"><td class=SEntry><a href="#FlightPath_Config" >FlightPath Config</a></td><td class=SDescription>FlightPath configuration is stored in the &ldquo;config&rdquo; property of $application.</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Behaviors" >Behaviors</a></td><td class=SDescription>Behaviors are functions that are applied to the current object.</td></tr><tr class="SGeneric"><td class=SEntry><a href="#Elements" >Elements</a></td><td class=SDescription>An element file is a specialized view (see: <a href="#Views" class=LGeneric id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">Views</a>) that is intended to contain a fragment of output (usually HTML) that can be used in a view</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Layouts" >Layouts</a></td><td class=SDescription>A layout file is a specialized view (see: <a href="#Views" class=LGeneric id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">Views</a>) that is intended to wrap content before sending it to the browser.</td></tr><tr class="SGeneric"><td class=SEntry><a href="#Modules" >Modules</a></td><td class=SDescription>Modules are self-contained FlightPath applications that can be embedded in other applications. </td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Routes" >Routes</a></td><td class=SDescription>Routes are URL patterns that can be mapped to controllers and actions. </td></tr><tr class="SGeneric"><td class=SEntry><a href="#Views" >Views</a></td><td class=SDescription>View Templates are .ejs templates used to render the result of an action. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="FlightPath_Overview"></a>FlightPath Overview</h3><div class=CBody><p class=CParagraph>Myna FlightPath is a Model-View-Controller(MVC) web application framework inspired by CakePHP, CFWheels and Ruby On Rails.</p><h4 class=CHeading>Before you begin</h4><ul class=CBulletList><li>What is MVC?&nbsp; <a href="http://wikipedia.org/wiki/Model-view-controller" class=LURL>http://wikipedia.org/wiki/Model-view-controller</a></li><li>What is CoC?&nbsp; (convention over configuration)?&nbsp; <a href="http://wikipedia.org/wiki/Convention_over_configuration" class=LURL>http://wikipedia.org<span class=HB>- </span>/wiki<span class=HB>- </span>/Convention_over_configuration</a></li></ul><p class=CParagraph>Myna FlightPath is an application template that implements much of the infrastructure web developers typically have to create to start working on a web application.&nbsp; This allows you to write your business logic as plain JavaScript functions, your displays as EJS templates, and have your data objects automatically generated from the database, nearly eliminating the need to write SQL.</p><h4 class=CHeading>FlightPath Features</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>MVC framework</td><td class=CDLDescription>Strong separation of data, business logic and display.Each of these can be manipulated independent of the others.</td></tr><tr><td class=CDLEntry>Automatic model generation</td><td class=CDLDescription>If your application has a single datasource, FlightPath will create models for that datasource automatically, just when needed.&nbsp; FlightPath will also analyze foreign key relationships and create related models.&nbsp; Data type constraints are also analyzed and become validators.&nbsp; See: &lt;Model&gt;</td></tr><tr><td class=CDLEntry>URL &ldquo;routes&rdquo;</td><td class=CDLDescription>It is possible with FlightPath to map virtually any URL to an action.&nbsp; &ldquo;appdir/book/get/12&rdquo;, &ldquo;appdir/mypage.html&rdquo;, &ldquo;appdir/index.sjs?controller=test&amp;action=run&rdquo; are all valid URLs.&nbsp; An action can even have multiple routes assigned to it.</td></tr><tr><td class=CDLEntry>Ext.Direct support</td><td class=CDLDescription>FlightPath provides a builtin-in controller to handle Ext.Direct API calls.&nbsp; See: &lt;Controller: Direct&gt;</td></tr><tr><td class=CDLEntry>Authentication and authorization</td><td class=CDLDescription>FlightPath comes with an optional permissions behavior that can secure individual controllers or whole applications.&nbsp; See: &lt;Behavior: MynaAuth&gt;</td></tr></table></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Glossary"></a>Glossary</h3><div class=CBody><p class=CParagraph>Terms used when talking about Myna FlightPath Applications</p><h4 class=CHeading>Terms</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$flash</td><td class=CDLDescription>Global temporary message store.&nbsp; Intended for displaying messages to the user regardless of which action will be next loaded.&nbsp; Used by &lt;$FP.redirectTo&gt; and the default <u>Layout</u>.&nbsp; See: &lt;$flash&gt;</td></tr><tr><td class=CDLEntry>$FP</td><td class=CDLDescription>Global FlightPath object that contains functions accessible from everywhere in a FlightPath application.&nbsp; See: &lt;$FP&gt;</td></tr><tr><td class=CDLEntry>Action</td><td class=CDLDescription>A function on a <u>Controller</u> that takes input from a web request, sets data on the controller instance, and picks a <u>View</u> to render the data back to the browser.</td></tr><tr><td class=CDLEntry>bean</td><td class=CDLDescription>An instance of a <u>beanClass</u>.&nbsp; Represents a single object from a &lt;Model&gt; data store.</td></tr><tr><td class=CDLEntry>beanClass</td><td class=CDLDescription>A class associated with a Model that represents a &ldquo;row&rdquo; of data from that model.&nbsp; This class contains functions for getting and setting values, validating values, field metadata, etc.&nbsp; Also contains liks to related <u>beans</u> from related &lt;models&gt;</td></tr><tr><td class=CDLEntry>Behavior</td><td class=CDLDescription>A mixin class that overrides, alters, or appends functionality to a class.&nbsp; Behaviors can be applied to either <u>Controllers</u> or <u>Models</u>.&nbsp; See: <a href="#Behaviors" class=LGeneric id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">Behaviors</a></td></tr><tr><td class=CDLEntry>camelCase</td><td class=CDLDescription>name format where all words are lower case, first letter of each word after the first capitalized, with no separation. ex: employeeAction</td></tr><tr><td class=CDLEntry>Controller</td><td class=CDLDescription>Refers to either a &lt;Controller&gt; class or instance.&nbsp; Controllers contain <u>Actions</u> manage <u>Layouts</u>, an contain <u>Behaviors</u>, and <u>Filters</u></td></tr><tr><td class=CDLEntry>Element</td><td class=CDLDescription>Specialized <u>View</u> template for containing output snippets to be included in a <u>View</u></td></tr><tr><td class=CDLEntry>Filter</td><td class=CDLDescription>A function applied in the init() function of a Controller to be executed before or after an <u>Action</u>.&nbsp; This can be used to alter how actions are performed without changing the actions themselves.&nbsp; For example authentication and permissions checks can be performed in filters and certain actions can be denied or audited.&nbsp; See: &lt;Controller.addFilter&gt;</td></tr><tr><td class=CDLEntry>file_case</td><td class=CDLDescription>a name format where all words are lower case, and separated by underbars(_). ex: employee_action</td></tr><tr><td class=CDLEntry>Helpers</td><td class=CDLDescription>Helpers are function libraries used inside of <u>Views</u> and <u>Actions</u> for repetitive tasks, usually related to generating output.&nbsp; See: &lt;$FP.helpers.Html&gt;</td></tr><tr><td class=CDLEntry>Layout</td><td class=CDLDescription>Specialized <u>View</u> template set in a <u>Controller</u> to wrap content created by an <u>Action</u>, See: Layouts</td></tr><tr><td class=CDLEntry>Model</td><td class=CDLDescription>Refers to either a &lt;Model&gt; class or instance.&nbsp; Models in FlightPath are static singletons (Only one instance per request).&nbsp; Model Functions can return one or more &lt;beanClass&gt; instances that contain the actual model data</td></tr><tr><td class=CDLEntry>ProperCase</td><td class=CDLDescription>name format where all words are lower case, first letter capitalized with no separation. ex: EmployeeAction</td></tr><tr><td class=CDLEntry>Route</td><td class=CDLDescription>A URL pattern that maps to a controller an d action.&nbsp; A FlightPath application can support multiple routes.&nbsp; See: <a href="#Routes" class=LGeneric id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">Routes</a></td></tr><tr><td class=CDLEntry>url-case</td><td class=CDLDescription>a name format where all words are lower case, and separated by underbars(_) or dashs(-). ex: employee-action, employee_action</td></tr><tr><td class=CDLEntry>View</td><td class=CDLDescription>An .ejs template intended to be sent to the browser.&nbsp; There are also specialized views: <a href="#Layouts" class=LGeneric id=link5 onMouseOver="ShowTip(event, 'tt4', 'link5')" onMouseOut="HideTip('tt4')">Layouts</a> and <a href="#Elements" class=LGeneric id=link6 onMouseOver="ShowTip(event, 'tt5', 'link6')" onMouseOut="HideTip('tt5')">Elements</a></td></tr></table></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Getting_Started"></a>Getting Started</h3><div class=CBody><p class=CParagraph>To create a FlightPath template, navigate to the Myna Administrator and select &ldquo;Add/Update FlightPath App&rdquo;, and enter a path and folder name, relative to the Myna web root.&nbsp; If this directory does not exist, it will be created.&nbsp; Once The FlightPath template has been unpacked you will see a directory structure like this:</p><blockquote><pre class="CCode sh_myna">+-application.sjs<br>+-app/<br>  +...<br>+-framework/<br>  +...</pre></blockquote><p class=CParagraph>The &ldquo;framework&rdquo; folder contains the FlightPath framework code.&nbsp; These files will be overwritten future uses of the &ldquo;Add/Update FlightPath App&rdquo; feature.&nbsp; Here you will find built-in controllers and behaviors such as &lt;Controller: Direct&gt; and &lt;Behavior: MynaAuth&gt;.&nbsp; You should not modify any files in this folder.</p><p class=CParagraph>&rdquo;application.sjs&rdquo; is a standard Myna application definition (See: &lt;$application&gt;), With custom &ldquo;config&rdquo; section specific to FlightPath (See: <a href="#FlightPath_Config" class=LGeneric id=link7 onMouseOver="ShowTip(event, 'tt6', 'link7')" onMouseOut="HideTip('tt6')">FlightPath Config</a>)</p><p class=CParagraph>The &ldquo;app&rdquo; folder contains your application.&nbsp; These files will not be altered by future uses of the &ldquo;Add/Update FlightPath App&rdquo; feature.</p><blockquote><pre class="CCode sh_myna">+-app/<br>    +-behaviors/<br>    | +-controllers/<br>    | \-models/<br>    +-controllers/<br>    | \-global.sjs<br>    +-models/<br>    | \-global.sjs<br>    +-modules/<br>    +-static/<br>    \-views/<br>      +-elements/<br>      +-home.ejs<br>      +-layouts/<br>      | \-default.ejs<br>      \-themes/</pre></blockquote><h4 class=CHeading>&rdquo;app&rdquo; sub-folders</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>behaviors</td><td class=CDLDescription>Stores &lt;Controller&gt; behaviors in the &ldquo;controllers&rdquo; folder and &lt;Model&gt; behaviors in the &ldquo;model&rdquo; folder.&nbsp; See <a href="#Behaviors" class=LGeneric id=link8 onMouseOver="ShowTip(event, 'tt2', 'link8')" onMouseOut="HideTip('tt2')">Behaviors</a></td></tr><tr><td class=CDLEntry>controllers</td><td class=CDLDescription>Stores &lt;Controller&gt; files.&nbsp; File names should be lower case with underbars (_) between words and &ldquo;_controller&rdquo; on the end, e.g.&nbsp; MyItem becomes my_item_controller.sjs.&nbsp; The global.sjs file is included before every controller file.&nbsp; Use this file for global initialization and/or to add common functions to all controllers.&nbsp; The init() in the global.sjs file is executed before the controller&rsquo;s init()</td></tr><tr><td class=CDLEntry>models</td><td class=CDLDescription>Stores &lt;Model&gt; files.&nbsp; File names should be lower case with underbars (_) between words and &ldquo;_model&rdquo; on the end, e.g.&nbsp; MyItem becomes my_item_model.sjs.&nbsp; The global.sjs file is included before every model file.&nbsp; Use this file for global initialization and/or to add common functions to all models.&nbsp; The init() in the global.sjs file is executed before the model&rsquo;s init()</td></tr><tr><td class=CDLEntry>modules</td><td class=CDLDescription>Modules are self-contained FlightPath applications that can be embedded in other applications.&nbsp; These controllers, models and views can be accessed as if they were in the main application.&nbsp; See: <a href="#Modules" class=LGeneric id=link9 onMouseOver="ShowTip(event, 'tt7', 'link9')" onMouseOut="HideTip('tt7')">Modules</a></td></tr><tr><td class=CDLEntry>static</td><td class=CDLDescription>This folder contains static content that will not be interpreted as Myna or FlightPath code.&nbsp; These files are accessed via <a href="http://server.tld/appname/static/filename" class=LURL>http://server.tld/appname/static/filename</a> This is a good place for images, client-side JavaScript files and css files</td></tr><tr><td class=CDLEntry>views</td><td class=CDLDescription>This folder contains a sub-folder for each controller that has views.&nbsp; For example the view for the Main controller&rsquo;s index() action would be views/main/index.ejs</td></tr><tr><td class=CDLEntry>views/home.ejs</td><td class=CDLDescription>default page loaded if no homeRoute is defined (see: <a href="#FlightPath_Config" class=LGeneric id=link10 onMouseOver="ShowTip(event, 'tt6', 'link10')" onMouseOut="HideTip('tt6')">FlightPath Config</a>)</td></tr><tr><td class=CDLEntry>views/elements</td><td class=CDLDescription>This folder contains any <u>Elements</u> defined for the app</td></tr><tr><td class=CDLEntry>views/layouts</td><td class=CDLDescription>This folder contains any <u>Layouts</u> defined for the app, including the global layout.&nbsp; This folder may also contain sub-folders by controller name.</td></tr><tr><td class=CDLEntry>views/layouts</td><td class=CDLDescription>reserved for future use</td></tr></table><h4 class=CHeading>Hello World!</h4><p class=CParagraph>First, let&rsquo;s edit our application.sjs file and disable our default datasource, for now</p><blockquote><pre class="CCode sh_myna">// in application.sjs<br>...<br>config:{<br>    ds:{<br>        //&quot;default&quot;:&quot;flight_path_app&quot;<br>    },<br>...</pre></blockquote><p class=CParagraph>You should probably edit the appname and other metadata properties while you are here</p><h4 class=CHeading>Let&rsquo;s create a Main controller and an index() action</h4><blockquote><pre class="CCode sh_myna">// in app/controllers/main_controller.sjs<br><br>function index(){<br>    this.renderContent(&quot;Hello World!&quot;)<br>}</pre></blockquote><p class=CParagraph>You can now access this via  /yourapp/</p><p class=CParagraph>This works because the default route (See: <a href="#FlightPath_Config" class=LGeneric id=link11 onMouseOver="ShowTip(event, 'tt6', 'link11')" onMouseOut="HideTip('tt6')">FlightPath Config</a>) is set to Main.index.&nbsp; The full URL would be /yourapp/main/index</p><p class=CParagraph>This is fine for a single line of text, but it is not very flexible for HTML.&nbsp; Lets add a view:</p><blockquote><pre class="CCode sh_myna">// in app/controllers/main_controller.sjs<br><br>function index(){<br>    this.set(&quot;text&quot;,&quot;Hello World!&quot;);<br>}</pre></blockquote><blockquote><pre class="CCode sh_myna">&lt;%-- in app/views/main/main_index.ejs --%&gt;<br>&lt;h1&gt;&lt;%=text%&gt;&lt;/h1&gt;</pre></blockquote><p class=CParagraph>In our controller we set some data that then appears as a global variable in our view.&nbsp; If you view source on this page you&rsquo;ll see something like this:</p><blockquote><pre class="CCode sh_myna">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br>&lt;head&gt;<br>    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;<br>    &lt;meta name=&quot;keywords&quot; content=&quot;&quot; /&gt;<br>    &lt;title&gt;Main.index&lt;/title&gt;<br>    &lt;link rel=&quot;shortcut icon&quot; href=&quot;/dev/favicon.ico&quot; &gt;<br>    &lt;script type=&quot;text/javascript&quot; src=&quot;/dev/shared/js/libOO/client.sjs&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;div class=&quot;flash_message_container&quot;&gt;<br>&lt;/div&gt;<br>&lt;h1&gt;Hello World!&lt;/h1&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</pre></blockquote><p class=CParagraph>All that extra HTML wrapping your view is coming from the default layout in app/views/layouts/default.ejs.&nbsp; Unless you make a call to &lt;Controller.setLayout&gt; all views in your app will be wrapped in this layout.&nbsp; You can manipulate the metadata in this layout by setting properties on &lt;Controller.$page&gt;.&nbsp; Let&rsquo;s set a title for our page.</p><blockquote><pre class="CCode sh_myna">// in app/controllers/main_controller.sjs<br><br>function index(){<br>    this.$page.title = &quot;Howdy&quot;<br>    this.set(&quot;text&quot;,&quot;Hello World!&quot;);<br>}</pre></blockquote><h4 class=CHeading>Working with databases</h4><p class=CParagraph>That&rsquo;s entertaining, but it would be nice to work with some actual data.&nbsp; Let&rsquo;s create a database to work with</p><blockquote><pre class="CCode sh_myna">// in application.sjs<br>...<br>config:{<br>    ds:{<br>        &quot;default&quot;:&quot;fp_app&quot;<br>    }<br>    ...<br>}<br>...<br>onRequestStart:function(){ // run directly before requested file<br>    if (!Myna.Admin.dsExists(&quot;fp_app&quot;)){<br>        Myna.Admin.createLocalDatabase(&quot;fp_app&quot;)<br>        var db = new Myna.Database(&quot;fp_app&quot;);<br>        db.getTable(&quot;authors&quot;).create({<br>            recreate:true,<br>            columns:[{<br>                name:&quot;id&quot;,<br>                isPrimaryKey:true,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            },{<br>                name:&quot;name&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br><br>            }]<br>        });<br><br>        db.getTable(&quot;posts&quot;).create({<br>            recreate:true,<br>            columns:[{<br>                name:&quot;id&quot;,<br>                isPrimaryKey:true,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            },{<br>                name:&quot;slug&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br><br>            },{<br>                name:&quot;created&quot;,<br>                type:&quot;DATE&quot;,<br>            },{<br>                name:&quot;author_id&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                references:{<br>                    table:&quot;authors&quot;,<br>                    column:&quot;id&quot;,<br>                    onDelete:&quot;cascade&quot;,<br>                    onUpdate:&quot;cascade&quot;,<br>                }<br>            }]<br>        });<br><br>        db.getTable(&quot;post_contents&quot;).create({<br>            recreate:true,<br>            columns:[{<br>                name:&quot;id&quot;,<br>                isPrimaryKey:true,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            },{<br>                name:&quot;post_id&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                references:{<br>                    table:&quot;posts&quot;,<br>                    column:&quot;id&quot;,<br>                    onDelete:&quot;cascade&quot;,<br>                    onUpdate:&quot;cascade&quot;,<br>                }<br>            },{<br>                name:&quot;content&quot;,<br>                type:&quot;TEXT&quot;<br>            }]<br>        });<br><br>        db.getTable(&quot;tags&quot;).create({<br>            recreate:true,<br>            columns:[{<br>                name:&quot;id&quot;,<br>                isPrimaryKey:true,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            },{<br>                name:&quot;tag_name&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>            }]<br>        });<br><br>        db.getTable(&quot;posts_tags&quot;).create({<br>            recreate:true,<br>            columns:[{<br>                name:&quot;post_id&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            },{<br>                name:&quot;tag_id&quot;,<br>                type:&quot;VARCHAR&quot;,<br>                maxLength:255,<br>                allowNull:false,<br>            }]<br>        });<br><br><br><br>    }<br><br>    var frameworkFolder=this.config.frameworkFolder||this.dir + &quot;framework&quot;<br>    Myna.include(frameworkFolder+&quot;/FlightPath.sjs&quot;,{}).init().handleRequest();<br>}<br>...</pre></blockquote><p class=CParagraph>This creates a local database with some example tables for a blog application.&nbsp; Have a look at &lt;Myna.Admin&gt;, &lt;Myna.Database&gt; and &lt;Myna.Table&gt; for more details.&nbsp; If you were including this in a real application, you might limit it to development environments or at least move it to onApplicationStart which runs less often.</p><p class=CParagraph>Notice that the names are plural, and the primary and foreign keys are defined.&nbsp; This is important for the &lt;Models&gt; to properly auto generate (See: &lt;Model.Model Conventions&gt;).</p><h4 class=CHeading>Creating a post editor</h4><p class=CParagraph>Lets create a way to edit our posts.</p><blockquote><pre class="CCode sh_myna">//in app/controllers/post_controller.sjs<br>function edit(params){<br>    // Generate ID for new record if none-supplied. That way ID will be in<br>    // the URL and refreshing the page won't create a new record<br>    if (!params.id){<br>        $FP.redirectTo({<br>            id:this.model.genKey()<br>        })<br>    }<br><br>    // only get here if not re-directed<br>    this.set(&quot;bean&quot;,this.model.get(params));<br>}</pre></blockquote><p class=CParagraph>Here we&rsquo;re creating an &ldquo;edit&rdquo; action that can be used for both new posts and existing posts.&nbsp; New posts will generate a unique key that will be used when the post is saved.&nbsp; If you looks at &lt;ManagerObject.genKey&gt;, you will see that for tables with a varchar primary key, the default key generator outputs UUID&rsquo;s.&nbsp; This can be overridden in &lt;Model&gt; definitions.&nbsp; See &lt;$FP.redirectTo&gt; for how redirects work.</p><p class=CParagraph>Finally, we set a local &ldquo;bean&rdquo; property with the result of &ldquo;this.model.get(params)&rdquo; (See: &lt;Model.get&gt;).&nbsp; This creates a temporary <u>bean</u> that contains either the data of an existing <u>bean</u>, or the default values for a new <u>bean</u></p><h4 class=CHeading>Now we need a view to display it</h4><blockquote><pre class="CCode sh_myna">&lt;%-- in app/views/post/post_edit.ejs --%&gt;<br><br>&lt;form action=&quot;&lt;%=Html.url({action:&quot;save&quot;,id:bean.id})%&gt;&quot; method=&quot;post&quot;&gt;<br>    &lt;table width=&quot;100%&quot; height=&quot;1&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; &gt;<br>        &lt;tr&gt;<br>            &lt;th &gt;&lt;%=bean.getLabel(&quot;id&quot;)%&gt;:&lt;/th&gt;&lt;td&gt;&lt;%=bean.id%&gt;, &lt;%=bean.getLabel(&quot;created&quot;)%&gt;: &lt;%=bean.get_created()%&gt;&lt;td&gt;<br>        &lt;/tr&gt;<br>        &lt;tr&gt;<br>            &lt;th&gt;&lt;%=bean.getLabel(&quot;slug&quot;)%&gt;:&lt;/th&gt;<br>            &lt;td&gt;&lt;input name=&quot;slug&quot; value=&quot;&lt;%=String(bean.get_slug()||&quot;&quot;)%&gt;&quot;&gt;&lt;td&gt;<br>        &lt;/tr&gt;<br>        &lt;tr&gt;<br>            &lt;th&gt;&lt;%=bean.Author().getLabel(&quot;name&quot;)%&gt;:&lt;/th&gt;<br>            &lt;td&gt;&lt;input name=&quot;Author.name&quot; value=&quot;&lt;%=String(bean.Author().name||&quot;&quot;)%&gt;&quot;&gt;&lt;td&gt;<br>        &lt;/tr&gt;<br>        &lt;tr&gt;<br>            &lt;th colspan=&quot;2&quot; align=&quot;left&quot;&gt;&lt;%=bean.PostContent().getLabel(&quot;content&quot;)%&gt;:&lt;/th&gt;<br>        &lt;/tr&gt;<br>        &lt;tr&gt;<br>            &lt;td colspan=&quot;2&quot; align=&quot;left&quot;&gt;<br>                &lt;textarea cols=&quot;70&quot; rows=&quot;50&quot; name=&quot;PostContent.content&quot;&gt;&lt;%=String(bean.PostContent().content||&quot;&quot;)%&gt;&lt;/textarea&gt;<br>            &lt;td&gt;<br>        &lt;/tr&gt;<br>        &lt;tr&gt;<br>            &lt;td colspan=&quot;2&quot; align=&quot;right&quot;&gt;<br>                &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;<br>            &lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/table&gt;<br>&lt;/form&gt;</pre></blockquote><p class=CParagraph>Note the form action.&nbsp; Here we are using the Html helper (see: &lt;$FP.helpers.Html&gt;) to make a URL for our &ldquo;save&rdquo; action.&nbsp; Next, note that the &ldquo;bean&rdquo; property we set in the action is now a global variable in the view (See: <a href="#Views" class=LGeneric id=link12 onMouseOver="ShowTip(event, 'tt1', 'link12')" onMouseOut="HideTip('tt1')">Views</a>).&nbsp; We&rsquo;re using &lt;Model.beanClass.getLabel&gt; to get a label for each field.&nbsp; This allows for centralized field name definition in Model files, and potentially even international language translation.</p><p class=CParagraph>The bean&rsquo;s getters (get_created, get_slug, etc) will return either the current value or the default value defined in the Model file, depending on whether this is a new or an existing record.</p><p class=CParagraph>Notice the line containing &ldquo;bean.Author()&rdquo;.&nbsp; This is accessing the related parent author bean.&nbsp; Myna knows that Posts belongTo Authors because of the foreign key defined on the posts table.&nbsp; If this is a new post then there will not be an associated parent Author record.&nbsp; In this case a new parent record will be created.&nbsp; Normally you would probably want to have a &lt;select&gt; here and have a separate Author controller manage Author records.&nbsp; On the next line, notice that the name for the input field is &ldquo;Author.name&rdquo;.&nbsp; Myna recognizes structure and array notation in query variables and attempts to reconstruct complex objects from them (See: &lt;$req.data&gt; and &lt;Object.setByPath&gt;) This means that the &ldquo;params&rdquo; object passed the &ldquo;save&rdquo; action will have an Author object with a &ldquo;name&rdquo; property.&nbsp; Because the Post model knows that it belongsTo Author, it will automatically create or load the related Author record and set its &ldquo;name&rdquo; property.&nbsp; More on that when we get to save()</p><p class=CParagraph>Notice that we are doing something similar with PostContent.&nbsp; Because the post_contents table has a foreign key to posts, the Post model knows it potentially has a &ldquo;hasMany&rdquo; or &ldquo;hasOne&rdquo; relationship with post_contents.&nbsp; By using &ldquo;PostContent.content&rdquo; we are using the &ldquo;hasOne&rdquo; relationship to create a content row and associate it with this post.</p><h4 class=CHeading>Ok, now we need to write a &ldquo;save&rdquo; action</h4><blockquote><pre class="CCode sh_myna">// in app/controllers/post_controller.sjs<br>...<br>function save(params){<br>    var bean = this.model.get(params);<br>    var validation = bean.save();<br><br>    if (validation.success) {<br>        $FP.redirectTo({<br>            action:&quot;index&quot;,<br>            success:&quot;Record Saved.&quot;<br>        })<br>    } else {<br>        $FP.redirectTo({<br>            action:&quot;edit&quot;,<br>            id:bean.id,<br>            error:validation<br>        })<br>    }<br>}</pre></blockquote><p class=CParagraph>Here we create a temporary bean via &lt;Model.get&gt; and the attempt to save it via &lt;Model.beanClass.save&gt;, which returns a &lt;Myna.ValidationResult&gt;.&nbsp; If successful we redirect to the index page, otherwise back to the edit page.&nbsp; The extra parameters to redirectTo (&ldquo;success&rdquo; and &ldquo;error&rdquo;) are converted into &lt;$flash&gt; messages and displayed via the default layout</p><p class=CParagraph>All that is left now is to make the index page to display our posts</p><blockquote><pre class="CCode sh_myna">// in app/controllers/post_controller.sjs<br>...<br>function index(params){<br>    //this will pass paging info from params to the underlying query<br>    params.setDefaultProperties({<br>        page:1,<br>        pageSize:25<br>    })<br>    this.set(&quot;rows&quot;,this.model.findBeans({},params))<br>}</pre></blockquote><blockquote><pre class="CCode sh_myna">&lt;%-- in app/views/post/post_index.ejs --%&gt;<br><br>&lt;%=Html.link({<br>    action:&quot;edit&quot;,<br>    text:&quot;Add Post&quot;<br>})%&gt;<br>&lt;table width=&quot;100%&quot; height=&quot;1&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; &gt;<br>    &lt;tr&gt;<br>        &lt;th&gt;&lt;%=$controller.model.getLabel(&quot;id&quot;)%&gt;&lt;/th&gt;<br>        &lt;th&gt;&lt;%=$controller.model.getLabel(&quot;slug&quot;)%&gt;&lt;/th&gt;<br>        &lt;th&gt;&lt;%=$controller.model.getLabel(&quot;created&quot;)%&gt;&lt;/th&gt;<br>        &lt;th&gt;&lt;%=$controller.model.Author.getLabel(&quot;name&quot;)%&gt;&lt;/th&gt;<br>    &lt;/tr&gt;<br>    &lt;@loop array=&quot;rows&quot; element=&quot;bean&quot; index=&quot;i&quot;&gt;<br>        &lt;tr&gt;<br>            &lt;td&gt;<br>                &lt;%=Html.link({<br>                    action:&quot;edit&quot;,<br>                    id:bean.id,<br>                    text:bean.id<br>                })%&gt;<br>            &lt;/td&gt;<br>            &lt;td&gt;&lt;%=bean.get_slug()%&gt;&lt;/td&gt;<br>            &lt;td&gt;&lt;%=bean.get_created().format(&quot;m/d/Y H:i:s&quot;)%&gt;&lt;/td&gt;<br>            &lt;td&gt;&lt;%=bean.Author().get_name()%&gt;&lt;/td&gt;<br>        &lt;/tr&gt;<br>    &lt;/@loop&gt;<br>&lt;/table&gt;<br>&lt;table width=&quot;100%&quot; height=&quot;1&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; &gt;<br>    &lt;tr&gt;<br>        &lt;td nowrap&gt;<br>            &lt;@if $params.page != 1&gt;<br>                &lt;%=Html.link({<br>                    params:{<br>                        page:parseInt($params.page)-1<br>                    },<br>                    text:&quot;&amp;lt;&amp;lt; previous page&quot;<br>                })%&gt;<br>            &lt;/@if&gt;<br>        &lt;/td&gt;<br>        &lt;td width=&quot;100%&quot;&gt;&amp;nbsp;&lt;/td&gt;<br>        &lt;td nowrap&gt;<br>            &lt;@if rows.length == $params.pageSize&gt;<br>                &lt;%=Html.link({<br>                    params:{<br>                        page:parseInt($params.page)+1<br>                    },<br>                    text:&quot;next page &gt;&gt;&quot;<br>                })%&gt;<br>            &lt;/@if&gt;<br>        &lt;/td&gt;<br>    &lt;/tr&gt;<br>&lt;/table&gt;</pre></blockquote><p class=CParagraph>Now we can page through our results and add new posts.</p><h4 class=CHeading>Next Steps</h4><ul class=CBulletList><li>learn how to customize database &lt;Models&gt;</li><li>Work with custom <a href="#Layouts" class=LGeneric id=link13 onMouseOver="ShowTip(event, 'tt4', 'link13')" onMouseOut="HideTip('tt4')">Layouts</a></li><li>Apply controller <a href="#Behaviors" class=LGeneric id=link14 onMouseOver="ShowTip(event, 'tt2', 'link14')" onMouseOut="HideTip('tt2')">Behaviors</a></li><li>Review built-in extensions: &lt;Controller: Direct&gt;, &lt;Behavior: FormatJson&gt;, &lt;Behavior: FormatPdf&gt;, &lt;Behavior: MynaAuth</li></ul></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="FlightPath_Config"></a>FlightPath Config</h3><div class=CBody><p class=CParagraph>FlightPath configuration is stored in the &ldquo;config&rdquo; property of $application.</p><p class=CParagraph>Here is the default FlightPath config</p><blockquote><pre class="CCode sh_myna">//--------- FlightPath config -----------------------------------------<br>    config:{<br>        ds:{<br>            &quot;default&quot;:&quot;flight_path_app&quot;<br>        },<br>        homeRoute:{<br>            controller:&quot;Main&quot;,<br>            action:&quot;index&quot;<br>        },<br>        routes:[{<br>            name:&quot;pages&quot;,<br>            pattern:&quot;page/$page*&quot;,<br>            controller:&quot;page&quot;,<br>            action:&quot;display&quot;,<br>            page:&quot;$page&quot;<br>        },{<br>            name:&quot;default&quot;,<br>            pattern:&quot;$controller/$action/$id/$restParams*&quot;,<br>            controller:&quot;$controller&quot;,<br>            action:&quot;$action&quot;,<br>            id:&quot;$id&quot;<br>            restParams:&quot;$restParams&quot;<br>        }],<br>        //frameworkFolder:&quot;file:/home/mark/myna/web/shared/js/FlightPath/framework&quot;,<br>        MyCustomProperty:&quot;woot!&quot;<br>    },</pre></blockquote><h4 class=CHeading>&rdquo;ds&rdquo;</h4><p class=CParagraph>This structure lists data sources and their manager aliases, where the property is the alias, and the value is the DS name.&nbsp; Normally you only need the default data source.&nbsp; However, if you need access to models from multiple data sources, list them here.&nbsp; Note that you also need to set the manager property of the model to match the manager alias defined here, for any models beyond the default model/DS</p><h4 class=CHeading>&rdquo;homeRoute&rdquo;</h4><p class=CParagraph>Defines the default route the will be executed when no url is provided, i.e.&nbsp; &ldquo;http/server.tld/appname/&rdquo;.&nbsp; This structure should include everything that should be passed as &ldquo;params&rdquo; to the action</p><h4 class=CHeading>&rdquo;routes&rdquo;</h4><p class=CParagraph>Defines what routes are available in this app.&nbsp; See: <a href="#Routes" class=LGeneric id=link15 onMouseOver="ShowTip(event, 'tt3', 'link15')" onMouseOut="HideTip('tt3')">Routes</a></p><h4 class=CHeading>&rdquo;frameworkFolder&rdquo;</h4><p class=CParagraph>Defaults to &ldquo;framework&rdquo;.&nbsp; This is the &lt;MynaPath&gt; to where the framework folder is located.&nbsp; Setting this to a central location will allow all FlightPath apps to share these files and be upgraded at once.&nbsp; Using the example path of &ldquo;<a href="file:/home/mark/myna/web/shared/js/FlightPath/framework" class=LURL>file:/home<span class=HB>- </span>/mark<span class=HB>- </span>/myna<span class=HB>- </span>/web<span class=HB>- </span>/shared<span class=HB>- </span>/js<span class=HB>- </span>/FlightPath<span class=HB>- </span>/framework</a>&rdquo; will cause the app to always use the version of the FlightPath framework included with the server.&nbsp; When Myna is upgraded, this folder is as well.</p><h4 class=CHeading>&rdquo;MyCustomProperty&rdquo;</h4><p class=CParagraph>All properties in the config will be applied to &lt;$FP&gt; and are available there from any model, controller or view</p></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Behaviors"></a>Behaviors</h3><div class=CBody><p class=CParagraph>Behaviors are functions that are applied to the current object.</p><p class=CParagraph>Behaviors can be applied to either models or controllers to modify their functionality.&nbsp; If you want to add a set of functions multiple controllers or models behaviors are a good mechanism.</p><ul class=CBulletList><li>Built-in controller behaviors are stored in framework/behaviors/controllers/&lt;behavior name&gt;.sjs</li><li>Custom controller behaviors are stored in app/behaviors/controllers/&lt;behavior name&gt;.sjs</li><li>Built-in model behaviors are stored in framework/behaviors/models/&lt;behavior name&gt;.sjs</li><li>Custom model behaviors are stored in app/behaviors/models/&lt;behavior name&gt;.sjs</li></ul><p class=CParagraph>In the case of a name conflict, custom behaviors hide built-in behaviors</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">//in some_controller.sjs<br>function init(){<br>    // loads the built-in PDF andJSON filters<br>    // Each of these has an &quot;init&quot; function that adds the appropriate<br>    // before and after filters<br>    this.applyBehavior([<br>        &quot;FormatPdf&quot;,<br>        &quot;FormatJson&quot;<br>    ]);<br><br>    //loads a single behavior with options<br>    this.applyBehavior(&quot;MynaAuth&quot;,{<br>        whitelist:[<br>            &quot;Main.index&quot;,<br>            &quot;Main.logout&quot;<br>        ],<br>        redirectParams:{<br>            message: &quot;Enter your AD domain credentials&quot;,<br>            providers:[&quot;ldap_ad&quot;]<br>        }<br>    });<br>}</pre></blockquote><h4 class=CHeading>See</h4><ul class=CBulletList><li>&lt;Controller.applyBehavior&gt;</li><li>&lt;Model.applyBehavior&gt;</li></ul></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Elements"></a>Elements</h3><div class=CBody><p class=CParagraph>An element file is a specialized view (see: <a href="#Views" class=LGeneric id=link16 onMouseOver="ShowTip(event, 'tt1', 'link16')" onMouseOut="HideTip('tt1')">Views</a>) that is intended to contain a fragment of output (usually HTML) that can be used in a view</p><h4 class=CHeading>Element Locations</h4><ul class=CBulletList><li>app/views/elements/&lt;name&gt;.ejs,</li><li>app/views/elements/&lt;controller name&gt;/&lt;name&gt;.ejs</li></ul><blockquote><pre class="CCode sh_myna">//in app/views/test/index.ejs<br><br>&lt;%=getElement(&quot;shared/common_commonlinks.ejs&quot;)%&gt;<br>&lt;%=getElement()%&gt;</pre></blockquote><h4 class=CHeading>See</h4><ul class=CBulletList><li>&lt;Controller.getElement&gt;</li></ul></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Layouts"></a>Layouts</h3><div class=CBody><p class=CParagraph>A layout file is a specialized view (see: <a href="#Views" class=LGeneric id=link17 onMouseOver="ShowTip(event, 'tt1', 'link17')" onMouseOut="HideTip('tt1')">Views</a>) that is intended to wrap content before sending it to the browser.</p><h4 class=CHeading>Layout Locations</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Global Default</td><td class=CDLDescription>app/views/layouts/default.ejs</td></tr><tr><td class=CDLEntry>Controller Default</td><td class=CDLDescription>app/views/layouts/&lt;controller name&gt;/default.ejs</td></tr><tr><td class=CDLEntry>General Layouts</td><td class=CDLDescription>app/views/layouts/&lt;layout name&gt;.ejs</td></tr></table><p class=CParagraph>General layouts are stored in app/views/layouts/&lt;layout name&gt;.ejs.&nbsp; The global default layout is stioreController default layouts are store Layouts are applied by calling &lt;Controller.addLayout&gt; or &lt;Controller.setLayout&gt;</p><p class=CParagraph>Layouts can wrap other layouts.&nbsp; For example the global default layout wraps the controller Layouts are layered like so:</p><blockquote><pre class="CCode sh_myna">/app/views/layouts/default.ejs wraps<br>    /app/views/layouts/controllername/default.ejs wraps<br>        /app/views/controllername/actionname.ejs</pre></blockquote><h4 class=CHeading>Calling this function adds additional layouts that wrap the view, like so</h4><blockquote><pre class="CCode sh_myna">    function init(){<br>        this.addLayout(&quot;mylayout1&quot;)<br>        this.addLayout(&quot;otherController/mylayout2.ejs&quot;)<br>    }<br><br>//results in<br>/app/views/layouts/default.ejs wraps<br>    /app/views/layouts/controllername/default.ejs wraps<br>        /app/views/layouts/mylayout1.ejs wraps<br>            /app/views/layouts/otherController/mylayout2.ejs wraps<br>                /app/views/controllername/actionname.ejs</pre></blockquote></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Modules"></a>Modules</h3><div class=CBody><p class=CParagraph>Modules are self-contained FlightPath applications that can be embedded in other applications.&nbsp; These controllers, models and views can be accessed as if they were in the main application.</p><p class=CParagraph>A module can be created from a FlightPath application by copying its &ldquo;app&rdquo; folder to the new application&rsquo;s &ldquo;app/modules&rdquo; folder and then renaming it to the module name.&nbsp; Then all folders except &ldquo;models&rdquo;, &ldquo;controllers&rdquo; and &ldquo;views&rdquo; should be removed.&nbsp; Local models, controllers and views are always found before module models, controllers and views, so published modules should have names that are unique for these objects.</p></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Routes"></a>Routes</h3><div class=CBody><p class=CParagraph>Routes are URL patterns that can be mapped to controllers and actions.&nbsp; Routes are defined in the config section of the application.sjs for your app (See: <a href="#FlightPath_Config" class=LGeneric id=link18 onMouseOver="ShowTip(event, 'tt6', 'link18')" onMouseOut="HideTip('tt6')">FlightPath Config</a>).&nbsp; An incoming URL is matched against the routes array from top to bottom, exiting early if a match is found</p><h4 class=CHeading>Route Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>name</td><td class=CDLDescription>name of the route.&nbsp; This is used by &lt;$FP.helpers.Html.url&gt; and &lt;$FP.helpers.Html.link&gt; to create URL&rsquo;s that match a particular route.</td></tr><tr><td class=CDLEntry>pattern</td><td class=CDLDescription>String.&nbsp; Pattern to match. see <b>Pattern Definitions</b> below</td></tr><tr><td class=CDLEntry>controller</td><td class=CDLDescription>String.&nbsp; Either the URL name of a controller or the placeholder variable that should contain the controller name</td></tr><tr><td class=CDLEntry>action</td><td class=CDLDescription>String.&nbsp; Either the URL name of an action or the placeholder variable that should contain the action name</td></tr><tr><td class=CDLEntry>id</td><td class=CDLDescription><b>Optional</b> String.&nbsp; Either a hard-coded id value or the placeholder variable that should contain the id</td></tr><tr><td class=CDLEntry>&lt;other&gt;</td><td class=CDLDescription><b>Optional</b> any other properties will become parameters to the action.&nbsp; Value can be a literal or a placeholder variable</td></tr></table><h4 class=CHeading>Pattern Definitions</h4><p class=CParagraph>Patterns are a series of tokens separated by slashes(/). tokens can be:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>String literals</td><td class=CDLDescription>&rdquo;page&rdquo;,</td></tr><tr><td class=CDLEntry>Variable placeholders</td><td class=CDLDescription>&rdquo;$page&rdquo;</td></tr><tr><td class=CDLEntry>Globbing variable placeholders (must be last token)</td><td class=CDLDescription>&rdquo;$page*&rdquo;</td></tr><tr><td class=CDLEntry>Regular expressions</td><td class=CDLDescription>&rdquo;rpt\\d+\\.\\w{3}&rdquo;</td></tr><tr><td class=CDLEntry>Regular expression variable placeholders</td><td class=CDLDescription>&rdquo;$report(rpt\\d+\\.\\w{3})&rdquo;</td></tr><tr><td class=CDLEntry>Request method prefix (only before first token)</td><td class=CDLDescription>&rdquo;[GET]&lt;first token&gt;/&lt;next token...&gt;&rdquo;</td></tr><tr><td class=CDLEntry>Request method prefix variable placeholder (before first token)</td><td class=CDLDescription>&rdquo;[$method]&lt;first token&gt;/&lt;next token...&gt;&rdquo;</td></tr></table><h4 class=CHeading>Examples</h4><p class=CParagraph>The URL is examined from left to right matching URL tokens to route tokens.</p><p class=CParagraph><b>Literal tokens</b> are matched as if they were lower case</p><blockquote><pre class="CCode sh_myna">name:&quot;home&quot;,<br>pattern:&quot;index.html&quot;,<br>controller:&quot;main&quot;,<br>action:&quot;index&quot;<br>/*<br>    &quot;server.tld/&lt;appname&gt;/index.html&quot;<br>        controller:&quot;main&quot;,<br>        action:&quot;index&quot;<br>*/</pre></blockquote><p class=CParagraph><b>Variable placeholders</b> start with $ and can only consist of letters, numbers and the underbar (_).&nbsp; Variable placeholders capture the token in the URL at the position where they appear and assign that value to the route property that has the same value as the placeholder.</p><blockquote><pre class="CCode sh_myna">name:&quot;emp&quot;,<br>pattern:&quot;emp/$empnum&quot;,<br>controller:&quot;emp&quot;,<br>action:&quot;display&quot;,<br>id:&quot;$empnum&quot;<br>/*<br>    &quot;server.tld/&lt;appname&gt;/emp/22045563&quot;<br>        controller:&quot;emp&quot;,<br>        action:&quot;display&quot;,<br>        id:&quot;22045563&quot;<br>*/</pre></blockquote><p class=CParagraph><b>Globbing variable placeholders</b> capture the rest of the URL, including slashes(/)</p><blockquote><pre class="CCode sh_myna">name:&quot;pages&quot;,<br>pattern:&quot;page/$page*&quot;,<br>controller:&quot;page&quot;,<br>action:&quot;display&quot;,<br>page:&quot;$page&quot;<br>/*<br>    &quot;server.tld/&lt;appname&gt;/page/archive/2011/dec/christmas-party&quot;<br>        controller:&quot;page&quot;,<br>        action:&quot;display&quot;,<br>        page:&quot;archive/2011/dec/christmas-party&quot;<br>*/</pre></blockquote><p class=CParagraph><b>Regular expressions</b> need to be matched but don&rsquo;t capture.&nbsp; Note that they still only match one token</p><blockquote><pre class="CCode sh_myna">name:&quot;deleted&quot;,<br>pattern:&quot;oldstuff/.*&quot;,<br>controller:&quot;deleted&quot;,<br>action:&quot;error-deleted-content&quot;,<br>/*<br>    &quot;server.tld/&lt;appname&gt;/oldstuff/some-random-file.xls&quot;<br>        controller:&quot;deleted&quot;,<br>        action:&quot;error-deleted-content&quot;,<br>*/</pre></blockquote><p class=CParagraph><b>Regular expression variable placeholders</b> capture the matched token</p><blockquote><pre class="CCode sh_myna">name:&quot;reports&quot;,<br>pattern:&quot;reports/$report(rpt\\d+\\.\\w{3})&quot;,<br>controller:&quot;report&quot;,<br>action:&quot;generate_report&quot;,<br>id:&quot;$report&quot;<br>/*<br>    &quot;server.tld/&lt;appname&gt;/reports/rpt12345.doc&quot;<br>        controller:&quot;page&quot;,<br>        action:&quot;generate_report&quot;,<br>        report:&quot;rpt12345.doc&quot;<br>*/</pre></blockquote><p class=CParagraph>The <b>Request method prefix</b> can be used to test or capture the method used to submit the web request (GET,POST,PUT,DELETE,HEAD).&nbsp; This can be a literal or a variable placeholder.</p><blockquote><pre class="CCode sh_myna">name:&quot;default&quot;,<br>pattern:&quot;[$method]$controller/$action/$id/$rest*&quot;,<br>controller:&quot;$controller&quot;,<br>action:&quot;$action&quot;,<br>id:&quot;$id&quot;,<br>method::&quot;$method&quot;,<br>extraPath:&quot;$rest&quot;<br><br>/*<br>    &quot;server.tld/&lt;appname&gt;/emp/get/22012/pdf&quot;<br>        controller:&quot;emp&quot;,<br>        action:&quot;get&quot;,<br>        id:&quot;22012&quot;,<br>        method:&quot;GET&quot;<br>        extraPath:&quot;pdf&quot;<br>*/</pre></blockquote></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Views"></a>Views</h3><div class=CBody><p class=CParagraph>View Templates are .ejs templates used to render the result of an action.&nbsp; They are stored in app/views.&nbsp; Normally views are loaded automatically for a given controller and action by looking in app/views/&lt;controller name&gt;/&lt;controller_name&gt;_&lt;action_name&gt;.ejs.&nbsp; Views can also be directly rendered via &lt;Controller.render&gt;</p><p class=CParagraph>There are also two specialized kinds of view files: <a href="#Layouts" class=LGeneric id=link19 onMouseOver="ShowTip(event, 'tt4', 'link19')" onMouseOut="HideTip('tt4')">Layouts</a> and <a href="#Elements" class=LGeneric id=link20 onMouseOver="ShowTip(event, 'tt5', 'link20')" onMouseOut="HideTip('tt5')">Elements</a>.&nbsp; Generally <a href="#Layouts" class=LGeneric id=link21 onMouseOver="ShowTip(event, 'tt4', 'link21')" onMouseOut="HideTip('tt4')">Layouts</a> wrap view templates, and view templates include <a href="#Elements" class=LGeneric id=link22 onMouseOver="ShowTip(event, 'tt5', 'link22')" onMouseOut="HideTip('tt5')">Elements</a></p><p class=CParagraph>Views <a href="#Layouts" class=LGeneric id=link23 onMouseOver="ShowTip(event, 'tt4', 'link23')" onMouseOut="HideTip('tt4')">Layouts</a> and <a href="#Elements" class=LGeneric id=link24 onMouseOver="ShowTip(event, 'tt5', 'link24')" onMouseOut="HideTip('tt5')">Elements</a> have access to several global properties</p><h4 class=CHeading>View Properties</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$controller</td><td class=CDLDescription>A reference to the controller that called this view</td></tr><tr><td class=CDLEntry>$model</td><td class=CDLDescription>A reference to this controllers default model, may be null</td></tr><tr><td class=CDLEntry>$params</td><td class=CDLDescription>A reference to the params of the most recent action</td></tr><tr><td class=CDLEntry>$page</td><td class=CDLDescription>A reference to this controller&rsquo;s &lt;Controller.$page&gt; property</td></tr><tr><td class=CDLEntry>getElement</td><td class=CDLDescription>A reference to &lt;getElement&gt;</td></tr><tr><td class=CDLEntry>[data properties]</td><td class=CDLDescription>All of the calling controller&rsquo;s &lt;Controller.data&gt; properties are available as global variables</td></tr><tr><td class=CDLEntry>[$FP.helpers classes]</td><td class=CDLDescription>&rdquo;Html&rdquo; refers to $FP.helpers.Html, etc</td></tr></table><p class=CParagraph>.</p></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class="MFile MEntry"><a href="../../deity/compiled-js.html">deity/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../deity/concatenated-js.html">deity/<span class=HB> </span>concatenated.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent2')">Univnm</a><div class=MGroupContent id=MGroupContent2><div class="MFile MEntry"><a href="../../univnm/controller-js.html">controller.js</a></div><div class="MFile MEntry"><a href="../../univnm/controller_shared-js.html">controller_shared.js</a></div><div class="MFile MEntry"><a href="../../univnm/controller_touch-js.html">controller_touch.js</a></div><div class="MFile MEntry"><a href="../../univnm/db-js.html">db.js</a></div><div class="MFile MEntry"><a href="../../univnm/env-js.html">env.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent1')">Ext</a><div class=MGroupContent id=MGroupContent1><div class="MFile MEntry"><a href="../../univnm/ext/BetterActionColumn-js.html">BetterActionColumn.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/CclDirect-js.html">CclDirect.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/MpageStandardComponent-js.html">MpageStandardComponent.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/QueryStore-js.html">QueryStore.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/QuickDrop-js.html">QuickDrop.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/RowProxy-js.html">RowProxy.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/SequenceGenerator-js.html">SequenceGenerator.js</a></div><div class="MFile MEntry"><a href="../../univnm/ext/SupaGrid-js.html">SupaGrid.js</a></div></div></div><div class="MFile MEntry"><a href="../../univnm/jslib-js.html">jslib.js</a></div><div class="MFile MEntry"><a href="../../univnm/MPageComponent-js.html">MPageComponent.js</a></div><div class="MFile MEntry"><a href="../../univnm/mpages_core-js.html">mpages_core.js</a></div><div class="MFile MEntry"><a href="../../univnm/univnm-pck.html">univnm.pck</a></div><div class="MFile MEntry"><a href="../../univnm/univnm_mpage_component-js.html">univnm_mpage_component.js</a></div></div></div><div class="MFile MEntry"><a href="../../docs/javascript/main-js.html">docs/<span class=HB> </span>javascript/<span class=HB> </span>main.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent4')">Dist</a><div class=MGroupContent id=MGroupContent4><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent3')">Js</a><div class=MGroupContent id=MGroupContent3><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/ccl_direct_proxy-js.html">ccl_direct_proxy.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/ccl_proxy-js.html">ccl_proxy.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/env-js.html">env.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/jquery-mpages-js.html">jquery.<span class=HB> </span>mpages.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/mpages_core-js.html">mpages_core.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/mpages_jslib-js.html">mpages_jslib.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/PCRemotingProvider-js.html">PCRemotingProvider.js</a></div></div></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/docs/javascript/main-js.html">main.js</a></div></div></div><div class="MFile MEntry"><a href="../../menu/compiled-js.html">menu/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../menu/concatenated-js.html">menu/<span class=HB> </span>concatenated.js</a></div><div class="MFile MEntry"><a href="../../query_builder/compiled-js.html">query_builder/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../query_builder/concatenated-js.html">query_builder/<span class=HB> </span>concatenated.js</a></div><div class="MFile MEntry"><a href="../env-rhino-js.html">script_compiler/<span class=HB> </span>env.<span class=HB> </span>rhino.js</a></div><div class="MFile MEntry" id=MSelected>script_compiler/<span class=HB> </span>framework/<span class=HB> </span>FlightPath.txt</div><div class="MFile MEntry"><a href="../../template/compiled-js.html">template/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../template/concatenated-js.html">template/<span class=HB> </span>concatenated.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent5')">Index</a><div class=MGroupContent id=MGroupContent5><div class="MIndex MEntry"><a href="../../../index/General.html">Everything</a></div><div class="MIndex MEntry"><a href="../../../index/Classes.html">Classes</a></div><div class="MIndex MEntry"><a href="../../../index/Events.html">Events</a></div><div class="MIndex MEntry"><a href="../../../index/Files.html">Files</a></div><div class="MIndex MEntry"><a href="../../../index/Functions.html">Functions</a></div><div class="MIndex MEntry"><a href="../../../index/Properties.html">Properties</a></div><div class="MIndex MEntry"><a href="../../../index/Variables.html">Variables</a></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Events">Events</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Properties">Properties</option><option value="Variables">Variables</option></select></div><div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div><script language=JavaScript><!--
if (document.getElementById){for (var menu = 1; menu < 6; menu++){if (menu != 2 && menu != 4){document.getElementById("MGroupContent" + menu).style.display = "none";};};}// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CGeneric>View Templates are .ejs templates used to render the result of an action. </div></div><div class=CToolTip id="tt2"><div class=CGeneric>Behaviors are functions that are applied to the current object.</div></div><div class=CToolTip id="tt3"><div class=CGeneric>Routes are URL patterns that can be mapped to controllers and actions. </div></div><div class=CToolTip id="tt4"><div class=CGeneric>A layout file is a specialized view (see: Views) that is intended to wrap content before sending it to the browser.</div></div><div class=CToolTip id="tt5"><div class=CGeneric>An element file is a specialized view (see: Views) that is intended to contain a fragment of output (usually HTML) that can be used in a view</div></div><div class=CToolTip id="tt6"><div class=CGeneric>FlightPath configuration is stored in the &ldquo;config&rdquo; property of $application.</div></div><div class=CToolTip id="tt7"><div class=CGeneric>Modules are self-contained FlightPath applications that can be embedded in other applications. </div></div><!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>