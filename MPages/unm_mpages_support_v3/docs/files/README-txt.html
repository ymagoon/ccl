<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>/www/mpages_googlecode/univnm/README.txt</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script><script type="text/javascript" src="../shjs/sh_main.js"></script><script type="text/javascript" src="../shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile CTopic" id=MainTopic><h1 class=CTitle><a name="README.txt"></a>README.txt</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#README.txt" >README.txt</a></td><td class=SDescription></td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Using_the_UnivNM_MPages" >Using the UnivNM MPages</a></td><td class=SDescription>To use the UnivNM MPages, simply copy all the files in this folder to I:\custom\mpages in your Cerner domain, or a directory on your web server. </td></tr><tr class="SGeneric"><td class=SEntry><a href="#Deploying_the_UnivNM_server_package" >Deploying the UnivNM server package</a></td><td class=SDescription>the UnivNM server is a Java-based MynaJS web application. </td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#Configuring_UnivNM_MPages" >Configuring UnivNM MPages</a></td><td class=SDescription>There are several levels of use for the UnivNM Mpages, and each requires it&rsquo;s own configuration.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Using_the_UnivNM_MPages"></a>Using the UnivNM MPages</h3><div class=CBody><p class=CParagraph>To use the UnivNM MPages, simply copy all the files in this folder to I:\custom\mpages in your Cerner domain, or a directory on your web server.&nbsp; If you want to use the server-side UnivNM support applications (script compiler, mobile/xhr proxy, error reporter, cerner_auth) you will need to deploy the univnm_server package.&nbsp; This package includes all of the UnivNM MPages as well.&nbsp; See &ldquo;Configuring UnivNM Mpages&rdquo; once the UnivNM MPages have been deployed</p></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Deploying_the_UnivNM_server_package"></a>Deploying the UnivNM server package</h3><div class=CBody><p class=CParagraph>the UnivNM server is a Java-based MynaJS web application.&nbsp; It can be deployed on Tomcat, WebSphere, or any other Java Servlet container.&nbsp; It can also be deployed using Myna&rsquo;s embedded Tomcat server.&nbsp; To install the server, run this in a command/console window:</p><blockquote><pre class="CCode sh_myna">java -jar univnm_server.war --help</pre></blockquote><h4 class=CHeading>This will display the installers usage help</h4><blockquote><pre class="CCode sh_myna">usage: java -jar myna-X.war -m &lt;mode&gt; [options]<br> -c,--context &lt;arg&gt;      Webapp context. Must Start with &quot;/&quot; Default: /<br> -h,--help               Displays help.<br> -ks,--keystore &lt;arg&gt;    keystore path. Default:<br>                         &lt;webroot&gt;/WEB-INF/myna/myna_keystore<br> -ksa,--ks-alias &lt;arg&gt;   certificate alias. Default: myna<br> -ksp,--ks-pass &lt;arg&gt;    keystore password. Default: changeit<br> -l,--logfile &lt;arg&gt;      Log file to use. Will be created if it does not<br>                         exist. Default: ./&lt;context&gt;.log<br> -m,--mode &lt;arg&gt;         Mode: one of [upgrade, install].<br>                         &quot;upgrade&quot;: Upgrades myna installation in webroot<br>                         and exits. &quot;install&quot;: Unpacks to webroot, and<br>                         installs startup files<br> -p,--port &lt;arg&gt;         HTTP port. Set to 0 to disable HTTP. Default:<br>                         8180<br> -s,--servername &lt;arg&gt;   Name of this instance. Defaults to either &quot;myna&quot;<br>                         or the value of &lt;context&gt; if defined<br> -sp,--ssl-port &lt;arg&gt;    SSL (HTTPS) port. Set to 0 to disable SSL,<br>                         Default: 0<br> -u,--user &lt;arg&gt;         User to own and run the Myna installation. Only<br>                         applies to unix installs. Default: nobody<br> -w,--webroot &lt;arg&gt;      Webroot to use. Will be created if<br>                         webroot/WEB-INF does not exist. Default: ./myna</pre></blockquote><h4 class=CHeading>Here is an example commandline for a Linux install (must be run as root)</h4><blockquote><pre class="CCode sh_myna">java -jar univnm_server.war -m install -c univnm -u www -p 0 -sp 8443 -w /www/univnm</pre></blockquote><h4 class=CHeading>This will</h4><ul class=CBulletList><li>Create the webroot in /www/univnm</li><li>all files owned by user &ldquo;www&rdquo;</li><li>NO HTTP support</li><li>HTTPS on port 8443 (run as user &ldquo;root&rdquo; if you want to use 443)</li><li>context is /univnm</li><li>init script /etc/init.d/univnm created that can start and stop the UnivNM Myna server.</li><li>URL to webroot: <a href="https://yourserver:8443/univnm/" class=LURL>https://yourserver:8443/univnm/</a></li></ul><h4 class=CHeading>Here is an example commandline for a Windows install</h4><blockquote><pre class="CCode sh_myna">java -jar univnm_server.war -m install -c univnm -u www -p 0 -sp 8443 -w c:\www\univnm</pre></blockquote><h4 class=CHeading>This will</h4><ul class=CBulletList><li>Create the webroot in c:\www\univnm</li><li>NO HTTP support</li><li>HTTPS on port 8443 (run as user &ldquo;root&rdquo; if you want to use 443)</li><li>context is /univnm</li><li>Create a startup batch file in c:\www\univnm\WEB-INF/myna/install/start_univnm.bat</li><li>URL to webroot: <a href="https://yourserver:8443/univnm/" class=LURL>https://yourserver:8443/univnm/</a></li></ul></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Configuring_UnivNM_MPages"></a>Configuring UnivNM MPages</h3><div class=CBody><p class=CParagraph>There are several levels of use for the UnivNM Mpages, and each requires it&rsquo;s own configuration.</p><ul class=CBulletList><li>Level 1: mpages_core only, or mpages_core + jslib</li><li>Level 2: above plus MPages in browser (fake local data)</li><li>Level 3: above plus proxy to mpages_service (real CCLS)</li><li>Level 4: Full Support (client-side SQL, ACL, auditing, MPage menu, error reporting, etc)</li></ul><h4 class=CHeading>Configuration details by  level</h4><h4 class=CHeading>Level 1: mpage_core only, or mpage_code + jslib</h4><p class=CParagraph>This has no server-side requirements. univnm/mpages_core.js includes the functions necessary to run an mpage via a &ldquo;&lt;url&gt;&rdquo; report name value in prefmaint. univnm/jslib.js includes many helpful functions for working with JS, especially univnm.jslib.ccl_callback() which simplifies XMLCCLRquest calls.&nbsp; Simply include this files in your mpage to take advantage of these features.&nbsp; You can optionally copy univnm/env.js to your mpages directory and customize it to your environment.&nbsp; Here is the load order you should use on your mpages:</p><blockquote><pre class="CCode sh_myna">&lt;script type=&quot;text/javascript&quot; src=&quot;../env.js&quot;&gt;&lt;/script&gt;<br>&lt;script type=&quot;text/javascript&quot; src=&quot;../univnm/jslib.js&quot;&gt;&lt;/script&gt;<br>&lt;script type=&quot;text/javascript&quot; src=&quot;../univnm/mpages_core.js&quot;&gt;&lt;/script&gt;</pre></blockquote><p class=CParagraph>Installing univnm_echo_ids.prg in your domain will allow univnm.jslib.load_mpage_ids() to gather information about the user and patient and loads the following variables in the univnm scope:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>univnm.user_id</td><td class=CDLDescription>The id of the logged in user</td></tr><tr><td class=CDLEntry>univnm.patient_id</td><td class=CDLDescription>The id of the current patient</td></tr><tr><td class=CDLEntry>univnm.encounter_id</td><td class=CDLDescription>The id of the current encounter</td></tr><tr><td class=CDLEntry>univnm.cur_node</td><td class=CDLDescription>Script node server name</td></tr><tr><td class=CDLEntry>univnm.cur_user</td><td class=CDLDescription>Script User Name</td></tr><tr><td class=CDLEntry>univnm.cur_server</td><td class=CDLDescription>SCP server number (e.g.&nbsp; 79)</td></tr><tr><td class=CDLEntry>univnm.full_name</td><td class=CDLDescription>Lastname, Firstname of current user</td></tr></table><h4 class=CHeading>Level 2: above plus MPages in browser (fake local data)</h4><p class=CParagraph>This level allows you to run inside a browser by faking CCL calls with local response files.&nbsp; To do this you must have an env.js file configure on your webserver, and in particular a serviceUrl defined.&nbsp; Here is an example that will look in a &ldquo;data&rdquo; subfolder of your MPage for files named &lt;cclname&gt;.json:</p><p class=CParagraph>serviceUrl:&rdquo;data/{ccl}.json&rdquo;</p><p class=CParagraph>simply place a valid CCL response in this directory and it will be used to simulate running in PowerChart.&nbsp; You MUST make all of your XCR calls via univnm.jslib.ccl_callback for this to work.&nbsp; Pass</p><p class=CParagraph>&rdquo;?user_id=val&amp;patient_id=val&amp;encounter_id=val&rdquo;</p><p class=CParagraph>.. in the URL to set the simulated ids in the mpage that load_mpage_ids will retrieve</p><h4 class=CHeading>Level 3: above plus proxy to mpages_service</h4><p class=CParagraph>Proxy access allows MPages to run in a browser using XHR to make callbacks to the MPages WebService.&nbsp; Because you can only make AJAX callbacks to teh server your page came from, you can normally only access the MPages WebService if your pages are deployed on the same WebSphere server.&nbsp; This level of support is for RHO clients and anyone else who does not want, or is not able, to deploy MPages on the MPages Service web server.&nbsp; This works be deploying the UnivNM Myna server as described above.&nbsp; Once deployed you can place you MPages in the webroot of this server and adjust your serviceUrl and serviceMethod in env.js like so:</p><blockquote><pre class="CCode sh_myna">serviceUrl:&quot;https://myhost.com/cerner_proxy/route.sjs?ccl={ccl}&quot;<br>serviceMethod:&quot;POST&quot;</pre></blockquote><p class=CParagraph>Be sure to edit cerner_proxy/route.sjs to set the name of your MPages WebService server!</p><p class=CParagraph>You must also run/connect to your local UnivNM server over SSL</p><p class=CParagraph>Now calls to univnm.jslib.ccl_callback will run through the proxy and return real data</p><h4 class=CHeading>Level 4: Full Support</h4><p class=CParagraph>Full support includes all of the custom code needed to deploy the UnivNM MPages.&nbsp; Some Features of full Support:</p><ul class=CBulletList><li>Menu A top-level MPage for listing other MPages.&nbsp; Provides a tabbed interface of available application based on the current logged in user</li><li>Deity (aka &ldquo;The God Page&rdquo;) A permissions MPage for restricting MPage access by any combination of user or position.&nbsp; Also supports granting user management access to application administrator.&nbsp; Also manages menu definitions for the Menu MPage</li><li>Client-side SQL The univnm.db object contains JavaScript functions for running queries on any table, and writing back to custom tables without writing any CCL code.</li><li>Query Builder An MPage for running interactive queries and generating JS templates for use in MPages</li><li>MPage Template.&nbsp; An ExtJS4 skeleton app that manages ACL, status, preferences, debugging, web- based authentication and error reporting</li><li>cust_stats.&nbsp; A custom table collecting information about who is accessing which mpages, and when</li><li>cust_sql_audit a custom table that lists all sql executed, begin and end time, and user id</li><li>cust_values A custom table that stores app and user preferences.</li><li>Ext Components Several custom Ext component that make working with data grids and forms easier, such as query-backed stores and ORM models.</li></ul><h4 class=CHeading>Setup for Full Support</h4><ul class=CBulletList><li>All of the above configuration</li><li>Create an Oracle schema in you domain called &ldquo;unmh&rdquo;</li><li>Import univnm/cust_tables.sql</li><li>Grant unmh select access to any tables in v500 you want to be able to query</li><li>Run all of the .prg files in the univnm directory in the target domain</li></ul></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class="MFile MEntry" id=MSelected>README.txt</div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent3')">UnivNM</a><div class=MGroupContent id=MGroupContent3><div class="MFile MEntry"><a href="env-js.html">env.js</a></div><div class="MFile MEntry"><a href="jslib-js.html">jslib.js</a></div><div class="MFile MEntry"><a href="mpages_core-js.html">mpages_core.js</a></div><div class="MFile MEntry"><a href="controller-js.html">controller.js</a></div><div class="MFile MEntry"><a href="controller_shared-js.html">controller_shared.js</a></div><div class="MFile MEntry"><a href="controller_touch-js.html">controller_touch.js</a></div><div class="MFile MEntry"><a href="db-js.html">db.js</a></div><div class="MFile MEntry"><a href="univnm-pck.html">univnm.pck</a></div><div class="MFile MEntry"><a href="univnm_code-pck.html">univnm_code.pck</a></div><div class="MFile MEntry"><a href="univnm_mpage_component-js.html">univnm_mpage_component.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent1')">Ext</a><div class=MGroupContent id=MGroupContent1><div class="MFile MEntry"><a href="ext/BetterActionColumn-js.html">BetterActionColumn.js</a></div><div class="MFile MEntry"><a href="ext/CclDirect-js.html">CclDirect.js</a></div><div class="MFile MEntry"><a href="ext/MpageStandardComponent-js.html">MpageStandardComponent.js</a></div><div class="MFile MEntry"><a href="ext/QueryStore-js.html">QueryStore.js</a></div><div class="MFile MEntry"><a href="ext/QuickDrop-js.html">QuickDrop.js</a></div><div class="MFile MEntry"><a href="ext/RowProxy-js.html">RowProxy.js</a></div><div class="MFile MEntry"><a href="ext/SequenceGenerator-js.html">SequenceGenerator.js</a></div><div class="MFile MEntry"><a href="ext/Statusbar-js.html">Statusbar.js</a></div><div class="MFile MEntry"><a href="ext/SupaGrid-js.html">SupaGrid.js</a></div></div></div><div class="MFile MEntry"><a href="cust_tables-sql.html">cust_tables.sql</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent2')">Sql</a><div class=MGroupContent id=MGroupContent2><div class="MFile MEntry"><a href="sql/cust_tables-sql.html">cust_tables.sql</a></div><div class="MFile MEntry"><a href="sql/univnm-pck.html">univnm.pck</a></div><div class="MFile MEntry"><a href="sql/univnm_code-pck.html">univnm_code.pck</a></div></div></div></div></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent4')">Index</a><div class=MGroupContent id=MGroupContent4><div class="MIndex MEntry"><a href="../index/General.html">Everything</a></div><div class="MIndex MEntry"><a href="../index/Classes.html">Classes</a></div><div class="MIndex MEntry"><a href="../index/Events.html">Events</a></div><div class="MIndex MEntry"><a href="../index/Files.html">Files</a></div><div class="MIndex MEntry"><a href="../index/Functions.html">Functions</a></div><div class="MIndex MEntry"><a href="../index/Properties.html">Properties</a></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Events">Events</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Properties">Properties</option></select></div><div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div><script language=JavaScript><!--
if (document.getElementById){for (var menu = 1; menu < 5; menu++){if (menu != 3 && menu != 4){document.getElementById("MGroupContent" + menu).style.display = "none";};};}// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>