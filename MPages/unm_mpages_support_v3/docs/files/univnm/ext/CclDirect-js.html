<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>/www/mpages_googlecode/univnm/ext/CclDirect.js</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script><script type="text/javascript" src="../shjs/sh_main.js"></script><script type="text/javascript" src="../shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile CTopic" id=MainTopic><h1 class=CTitle><a name="CclDirect.js"></a>CclDirect.js</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#CclDirect.js" >CclDirect.js</a></td><td class=SDescription></td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#License" >License</a></td><td class=SDescription>The MIT License</td></tr><tr class="SGeneric"><td class=SEntry><a href="#Ext_Direct" >Ext Direct</a></td><td class=SDescription>Using Ext Direct with MPages</td></tr><tr class="SGeneric SMarked"><td class=SEntry><a href="#ccl_direct.prg" >ccl_direct.prg</a></td><td class=SDescription>The source code for the CCL router is in the shared/ folder as ccl_direct.prg</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="License"></a>License</h3><div class=CBody><p class=CParagraph>The MIT License</p><p class=CParagraph>Copyright &copy; 2010 University of New Mexico Hospitals</p><p class=CParagraph>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &ldquo;Software&rdquo;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p><p class=CParagraph>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p><p class=CParagraph>THE SOFTWARE IS PROVIDED &ldquo;AS IS&rdquo;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.&nbsp; IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Ext_Direct"></a>Ext Direct</h3><div class=CBody><p class=CParagraph>Using Ext Direct with MPages</p><h4 class=CHeading>What id Ext Direct?</h4><p class=CParagraph>Ext Direct (<a href="http://www.sencha.com/products/js/direct.php" class=LURL>http://www.sencha.com/products/js/direct.php</a>) is Remote Procedure Call (RPC) protocol that allows for local function definitions of remote web services.&nbsp; Of particular benefit for MPages is the ability to combine multiple callbacks into a single request.&nbsp; By default, all requests made within 10 milliseconds are batched into a single callback.</p><h4 class=CHeading>Here is a quick example</h4><h4 class=CHeading>Old way</h4><blockquote><pre class="CCode sh_myna">&lt;script&gt;<br>    // a function like this needs to be created for every CCL callback<br>    function getStuffAboutPatient(patientId, callback){<br>        var ccl = new XMLCclRequest();<br>        ccl.onreadystatechange=function(){<br>            if (calllback.readyState==4) {<br>                var status = callback.status<br>                if (status==&quot;200&quot; || status==&quot;0&quot;){<br>                    callback(eval(&quot;(&quot; + ccl.responseText + &quot;)&quot;))<br>                }<br>            }<br>        }<br>        ccl.open(&quot;GET&quot;, &quot;GETSTUFFABOUTPATIENT&quot;, true);<br>        ccl.send(&quot;^MINE^, &quot; + patientId);<br>    }<br>    ...<br>    //Make the call<br>    for (var x=0; x &lt; patients.length; ++x){<br>        //each of these is a different callback, causing an async bottleneck<br>        getStuffAboutPatient(patients[x],function(result){<br>            //do stuff with result<br>        });<br>    }<br>&lt;/script&gt;</pre></blockquote><h4 class=CHeading>Ext Direct Way</h4><blockquote><pre class="CCode sh_myna">&lt;script src=&quot;../shared/js/mpages_core.js&quot;&gt;&lt;/script&gt;<br>&lt;script src=&quot;../shared/js/mpages_jslib.js&quot;&gt;&lt;/script&gt;<br>&lt;script src=&quot;../ext/ext-3.2.1/adapter/ext/ext-base.js&quot;&gt;&lt;/script&gt;<br>&lt;script src=&quot;../ext/ext-3.2.1/ext-all.js&quot;&gt;&lt;/script&gt;<br>&lt;script src=&quot;../shared/js/PCRemotingProvider.js&quot;&gt;&lt;/script&gt;<br>&lt;script&gt;<br>    //Ext will generate functions from this API<br>    Ext.Direct.addProvider({<br>        ccl:&quot;ccl_direct&quot;, //name of the router program<br>        type:&quot;pcremoting&quot;, //indicates that Ext should use our custom provider<br>        enableBuffer:300, //time to wait for requests before sending callback<br>        urlPrefix:&quot;data&quot;, //Where to look for dummy output file when inMpage==false<br>        actions:{<br>            MyApp:[{// can be any name you want. Functions will be generated in this namespace.<br>                name:&quot;getStuffAboutPatient&quot;, // CCL name<br>                len:1 //This is always 1<br>                //,&quot;dontBatch&quot;:true // this causes this ccl to NOT be included in batch callbacks<br>            }]<br>        }<br>    })<br><br>    //Make the call<br>    for (var x=0; x &lt; patients.length; ++x){<br>        //each of these will be fired within 10 ms, so they are bundled into one callback<br>        MyApp.getStuffAboutPatient([&quot;MINE&quot;,patients[x]],function(result){<br>            //do stuff with result<br>        });<br>    }<br>&lt;/script&gt;</pre></blockquote><h4 class=CHeading>To use Ext.Direct with CCL</h4><ul class=CBulletList><li>You need to include the PCRemotingProvider.js file,</li><li>You need to install the <a href="#ccl_direct.prg" class=LGeneric id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">ccl_direct.prg</a> file into the backend.</li><li>Every CCL that will be called in this method must call &ldquo;return()&rdquo; with a string JSON response</li><li>Finally you need to create an API that describes your CCL scripts.&nbsp; For more detail on the options available in the API definition, see <a href="http://dev.sencha.com/deploy/dev/docs/?class=Ext.direct.RemotingProvider" class=LURL>http://dev.sencha.com<span class=HB>- </span>/deploy<span class=HB>- </span>/dev<span class=HB>- </span>/docs<span class=HB>- </span>/?class=Ext.direct.RemotingProvider</a></li></ul><h4 class=CHeading>Note</h4><p class=CParagraph>We have made a few extensions to the default Ext.Direct API definition that are only supported by the PCRemoting provider</p><h4 class=CHeading>UNM Extensions</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>urlPrefix</td><td class=CDLDescription><b>Optional, default current directory</b> This can be defined as a root level property or in a method definition.&nbsp; This defines the path to find a file with the same name as the method name that contains an example return text to use when inMpage==false</td></tr><tr><td class=CDLEntry>dontBatch</td><td class=CDLDescription><b>Optional, default false</b> This is set in the method definition.&nbsp; When true, this causes this method to NOT be included in batch calls.&nbsp; In the case of both &ldquo;dontBatch&rdquo; and batchable calls being made within the timeout, all batchable calls will be made first in a single callback, followed by the &ldquo;dontBatch&rdquo; calls in the order they were requested</td></tr></table></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="ccl_direct.prg"></a>ccl_direct.prg</h3><div class=CBody><p class=CParagraph>The source code for the CCL router is in the shared/ folder as ccl_direct.prg</p></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class="MFile MEntry"><a href="../../deity/compiled-js.html">deity/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../deity/concatenated-js.html">deity/<span class=HB> </span>concatenated.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent2')">Univnm</a><div class=MGroupContent id=MGroupContent2><div class="MFile MEntry"><a href="../controller-js.html">controller.js</a></div><div class="MFile MEntry"><a href="../controller_shared-js.html">controller_shared.js</a></div><div class="MFile MEntry"><a href="../controller_touch-js.html">controller_touch.js</a></div><div class="MFile MEntry"><a href="../db-js.html">db.js</a></div><div class="MFile MEntry"><a href="../env-js.html">env.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent1')">Ext</a><div class=MGroupContent id=MGroupContent1><div class="MFile MEntry"><a href="BetterActionColumn-js.html">BetterActionColumn.js</a></div><div class="MFile MEntry" id=MSelected>CclDirect.js</div><div class="MFile MEntry"><a href="MpageStandardComponent-js.html">MpageStandardComponent.js</a></div><div class="MFile MEntry"><a href="QueryStore-js.html">QueryStore.js</a></div><div class="MFile MEntry"><a href="QuickDrop-js.html">QuickDrop.js</a></div><div class="MFile MEntry"><a href="RowProxy-js.html">RowProxy.js</a></div><div class="MFile MEntry"><a href="SequenceGenerator-js.html">SequenceGenerator.js</a></div><div class="MFile MEntry"><a href="SupaGrid-js.html">SupaGrid.js</a></div></div></div><div class="MFile MEntry"><a href="../jslib-js.html">jslib.js</a></div><div class="MFile MEntry"><a href="../MPageComponent-js.html">MPageComponent.js</a></div><div class="MFile MEntry"><a href="../mpages_core-js.html">mpages_core.js</a></div><div class="MFile MEntry"><a href="../univnm-pck.html">univnm.pck</a></div><div class="MFile MEntry"><a href="../univnm_mpage_component-js.html">univnm_mpage_component.js</a></div></div></div><div class="MFile MEntry"><a href="../../docs/javascript/main-js.html">docs/<span class=HB> </span>javascript/<span class=HB> </span>main.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent4')">Dist</a><div class=MGroupContent id=MGroupContent4><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent3')">Js</a><div class=MGroupContent id=MGroupContent3><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/ccl_direct_proxy-js.html">ccl_direct_proxy.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/ccl_proxy-js.html">ccl_proxy.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/env-js.html">env.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/jquery-mpages-js.html">jquery.<span class=HB> </span>mpages.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/mpages_core-js.html">mpages_core.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/mpages_jslib-js.html">mpages_jslib.js</a></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/js/PCRemotingProvider-js.html">PCRemotingProvider.js</a></div></div></div><div class="MFile MEntry"><a href="../../dist/mpages/mpages/shared/docs/javascript/main-js.html">main.js</a></div></div></div><div class="MFile MEntry"><a href="../../menu/compiled-js.html">menu/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../menu/concatenated-js.html">menu/<span class=HB> </span>concatenated.js</a></div><div class="MFile MEntry"><a href="../../query_builder/compiled-js.html">query_builder/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../query_builder/concatenated-js.html">query_builder/<span class=HB> </span>concatenated.js</a></div><div class="MFile MEntry"><a href="../../script_compiler/env-rhino-js.html">script_compiler/<span class=HB> </span>env.<span class=HB> </span>rhino.js</a></div><div class="MFile MEntry"><a href="../../script_compiler/framework/FlightPath-txt.html">script_compiler/<span class=HB> </span>framework/<span class=HB> </span>FlightPath.txt</a></div><div class="MFile MEntry"><a href="../../template/compiled-js.html">template/<span class=HB> </span>compiled.js</a></div><div class="MFile MEntry"><a href="../../template/concatenated-js.html">template/<span class=HB> </span>concatenated.js</a></div><div class="MGroup MEntry"><a href="javascript:ToggleMenu('MGroupContent5')">Index</a><div class=MGroupContent id=MGroupContent5><div class="MIndex MEntry"><a href="../../../index/General.html">Everything</a></div><div class="MIndex MEntry"><a href="../../../index/Classes.html">Classes</a></div><div class="MIndex MEntry"><a href="../../../index/Events.html">Events</a></div><div class="MIndex MEntry"><a href="../../../index/Files.html">Files</a></div><div class="MIndex MEntry"><a href="../../../index/Functions.html">Functions</a></div><div class="MIndex MEntry"><a href="../../../index/Properties.html">Properties</a></div><div class="MIndex MEntry"><a href="../../../index/Variables.html">Variables</a></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Events">Events</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Properties">Properties</option><option value="Variables">Variables</option></select></div><div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div><script language=JavaScript><!--
if (document.getElementById){for (var menu = 1; menu < 6; menu++){if (menu != 1 && menu != 2){document.getElementById("MGroupContent" + menu).style.display = "none";};};}// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CGeneric>The source code for the CCL router is in the shared/ folder as ccl_direct.prg</div></div><!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>