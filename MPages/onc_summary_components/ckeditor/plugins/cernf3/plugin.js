F3Helper=function(){return{isFreeText:function(oElement){return true;
}};
}();
CKEDITOR.plugins.add("cernf3",{lang:"en,en-gb,de,fr,es",init:function(editor){var ddf3={canUndo:false,editorFocus:true,exec:function(editor){var editingArea=editor.plugins.divarea?editor.ui.space("contents").$:editor.document.$.body;
var oInitialRange=editor.document.$.selection.createRange();
var editingAreaRange=oInitialRange.duplicate();
editingAreaRange.moveToElementText(editingArea);
var iEndOfDocument=0;
var bEndFound=false;
while(iEndOfDocument<2){var oRangeToSearch=editingAreaRange.duplicate();
if(bEndFound==true){oInitialRange.collapse(true);
oInitialRange.moveToElementText(editingArea);
oRangeToSearch=oInitialRange.duplicate();
bEndFound=false;
}else{if(oInitialRange.text=="_"){oRangeToSearch.setEndPoint("StartToEnd",oInitialRange);
}else{oRangeToSearch.setEndPoint("StartToStart",oInitialRange);
}}if(oRangeToSearch.findText("_")){if(!editingAreaRange.inRange(oRangeToSearch)){bEndFound=true;
iEndOfDocument++;
continue;
}var oRange2Parent=oRangeToSearch.parentElement();
var bIsFreeText=F3Helper.isFreeText(oRange2Parent);
if(true==bIsFreeText){oRangeToSearch.select();
return;
}else{oRangeToSearch.collapse(false);
oInitialRange=oRangeToSearch;
}}else{bEndFound=true;
iEndOfDocument++;
}}}};
var ddf3_back={canUndo:false,editorFocus:true,exec:function(editor){var editingArea=editor.plugins.divarea?editor.ui.space("contents").$:editor.document.$.body;
var oInitialRange=editor.document.$.selection.createRange();
var editingAreaRange=oInitialRange.duplicate();
editingAreaRange.moveToElementText(editingArea);
var iStartOfDocument=0;
var bStartFound=false;
while(iStartOfDocument<2){var oRangeToSearch=editingAreaRange.duplicate();
if(bStartFound==true){oInitialRange.collapse(false);
oInitialRange.moveToElementText(editingArea);
oRangeToSearch=oInitialRange.duplicate();
bStartFound=false;
}else{if(oInitialRange.text=="_"){oRangeToSearch.setEndPoint("EndToStart",oInitialRange);
}else{oRangeToSearch.setEndPoint("EndToEnd",oInitialRange);
}}if(oRangeToSearch.findText("_",-1,0)){if(!editingAreaRange.inRange(oRangeToSearch)){bStartFound=true;
iStartOfDocument++;
continue;
}var oRange2Parent=oRangeToSearch.parentElement();
var bIsFreeText=F3Helper.isFreeText(oRange2Parent);
if(true==bIsFreeText){oRangeToSearch.select();
return;
}else{oRangeToSearch.collapse(true);
oInitialRange=oRangeToSearch;
}}else{bStartFound=true;
iStartOfDocument++;
}}}};
DDCOMMON.addHotKeys(editor,editor.lang.cernf3.HotKeyArray);
editor.addCommand(DDCMD_PREV_UNDERSCORE,ddf3_back);
editor.addCommand(DDCMD_NEXT_UNDERSCORE,ddf3);
}});
