function LhQualityMeasureStyle(){this.initByNamespace("lh");
}LhQualityMeasureStyle.prototype=new ComponentStyle();
LhQualityMeasureStyle.prototype.constructor=ComponentStyle;
function LhQualityMeasures(criterion){this.setCriterion(criterion);
this.setStyles(new LhQualityMeasureStyle());
this.setComponentLoadTimerName("USR:MPG.QM_SUMMARY.01 - load component");
this.setComponentRenderTimerName("ENG:MPG.QM_SUMMARY.01 - render component");
this.setIncludeLineNumber(true);
this.setScope(1);
this.resultCount=0;
}LhQualityMeasures.prototype=new MPageComponent();
LhQualityMeasures.prototype.constructor=MPageComponent;
LhQualityMeasures.prototype.retrieveComponentData=function(){var component=this;
var index=this.getCookieIndex();
var cookieContent=JSON.parse(this.getCookie("LhQualityMeasures"));
var criterion=component.getCriterion();
var sendAr=["^MINE^",criterion.person_id+".0",criterion.encntr_id+".0",criterion.provider_id+".0",criterion.position_cd+".0",criterion.ppr_cd+".0",2,2,2];
var conditionIndex=cookieContent.data[index].selectedIndex;
if(conditionIndex){sendAr.push(conditionIndex);
}else{sendAr.push(0);
}var loadTimer=new RTMSTimer(component.getComponentLoadTimerName(),criterion.category_mean);
var renderTimer=new RTMSTimer(component.getComponentRenderTimerName(),criterion.category_mean);
var request=new ComponentScriptRequest();
request.setComponent(component);
request.setLoadTimer(loadTimer);
request.setRenderTimer(renderTimer);
request.setProgramName("lh_mp_component");
request.setParameterArray(sendAr);
request.performRequest();
};
LhQualityMeasures.prototype.renderComponent=function(replyObj){var index=this.getCookieIndex();
var cookieContent=JSON.parse(this.getCookie("LhQualityMeasures"));
var renderResults=[];
var comp=this;
var compId=comp.getComponentId();
var criterion=comp.getCriterion();
try{var recordData=replyObj;
var totalOutcomes=recordData.OUTCOMES_COMPLETE.length+recordData.OUTCOMES_INCOMPLETE.length;
renderResults.push("<div class='lh-content-body' style='max-height: initial;'>");
renderResults.push("<div class='lh-qm-cbo'><form><span class='lh-qm-cond-lbl'>",recordData.FILTERDISPLAY,"</span><select id='qmTask",compId,"'>");
var strAlarmClock="";
var condtionsLength=recordData.CONDITIONS.length;
for(var i=0;
i<condtionsLength;
i++){var activeCondition=recordData.CONDITIONS[i];
var selectInd=activeCondition.CONDITION===recordData.SELECTED_CONDITION_ID?"selected":"";
renderResults.push("<option value="+activeCondition.CONDITION_ID+" selected="+selectInd+">"+activeCondition.CONDITION_NAME+"</option>");
}renderResults.push("</select></form></div>");
renderResults.push("<div id='condID",compId,"'>");
renderResults.push("<div id='incomp"+compId+"' class='lh-sub-sec'>");
renderResults.push("<h3 class='lh-sub-sec-hd'><span class='lh-sub-sec-hd-tgl' title=",i18n.HIDE_SECTION,">-</span><span class='lh-sub-sec-title'>",i18n.QM_INCOMPLETE," (",recordData.OUTCOMES_INCOMPLETE.length,")</span></h3>");
renderResults.push("<div class='lh-sub-sec-content'>");
if(recordData.OUTCOMES_INCOMPLETE.length>0){var incompleteOutcomesLength=recordData.OUTCOMES_INCOMPLETE.length;
for(var j=0;
j<incompleteOutcomesLength;
j++){renderResults.push("<div class='lh-sub-sub-sec-content'>");
var tip="Tip"+j;
var hoverDisplay="";
var outcomeIncomplete=recordData.OUTCOMES_INCOMPLETE[j];
hoverDisplay=outcomeIncomplete.HOVERDISPLAY;
renderResults.push("<div id= ",tip," left='' top='' style='position:absolute; z-index:1000;background-color:#FFC;border:1px solid #000;padding:5px; visibility: hidden;'>",hoverDisplay,"</div>");
strAlarmClock="";
if(outcomeIncomplete.SHOWICONIND=="1"){strAlarmClock="<span>&nbsp;&nbsp;&nbsp;<img class='lh-alarm'></img></span>";
}renderResults.push("<h3 class='lh-sub-sec-hd-test'><span class='lh-sub-sec-hd-tgl' title=",i18n.HIDE_SECTION,">-</span><span class='lh-sub-sec-title' onmouseover='LhQualityMeasures.prototype.ShowHover(\""+outcomeIncomplete.HOVERDISPLAY+'",'+j+","+0+","+-15+");' onmouseout='LhQualityMeasures.prototype.HideHover(",j,");'>",outcomeIncomplete.OUTCOME_NAME,"</span>",strAlarmClock,"</h3>");
renderResults.push("<div class='lh-sub-sec-content'>");
var incompleteMeasuresLength=recordData.OUTCOMES_INCOMPLETE[j].MEASURES.length;
for(var k=0;
k<incompleteMeasuresLength;
k++){var incompleteMeasures=recordData.OUTCOMES_INCOMPLETE[j].MEASURES[k];
firstTaskFound=0;
var meas_name_class="";
var meas_data_class="lh-qm-ic-name-display";
if(incompleteMeasures.HIGHLIGHTIND==1){if(incompleteMeasures.HIGHLIGHTCOLOR){meas_name_class=" "+incompleteMeasures.HIGHLIGHTCOLOR;
meas_data_class="lh-qm-font12 "+incompleteMeasures.HIGHLIGHTCOLOR;
}if(incompleteMeasures.HIGHLIGHTFONTWEIGHT==1){meas_name_class+=" lh-qm-bold-display";
}}renderResults.push("<dl class='lh-qm-info'>");
renderResults.push("<dt><span>measure</span></dt><dd class='lh-qm-ic-name",meas_name_class,"'><span>",incompleteMeasures.NAME,"</span></dd>");
renderResults.push("</dl>");
renderResults.push("<dl class='lh-qm-info'>");
renderResults.push("<dt>");
renderResults.push("<dd class='lh-qm-ic-name-grp'>");
if(incompleteMeasures.ORDERSETIND==1){if(incompleteMeasures.ORDERPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInOrder'>",incompleteMeasures.ORDERINCOMPLETEDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERMEASUREIND==1&&incompleteMeasures.DITHERMEASUREIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInDoc'>",recordData.ORDERDISPLAY,"</span>");
}else{if(incompleteMeasures.ORDERTASKIND==1){renderResults.push("<a id = 'openInOrder' onclick='LhQualityMeasures.OpenQMOrderWindow("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.ORDERDISPLAY,"</a>");
}else{if(incompleteMeasures.ORDERTASKIND==2){renderResults.push("<a id = 'openInOrder' onclick='LhQualityMeasures.OpenQMOrderProfileWindow("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.ORDERDISPLAY,"</a>");
}}}}firstTaskFound=1;
}if(incompleteMeasures.COLSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(incompleteMeasures.COLPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInCol'>",incompleteMeasures.COLINCOMPLETEDISPLAY,"</span>");
}else{if(incompleteMeasures.COLTASKIND==1){renderResults.push("<a id = 'openInPresOrder' onclick='LhQualityMeasures.OpenQMOrderWindow("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.COLDISPLAY,"</a>");
}else{if(incompleteMeasures.COLTASKIND==3){renderResults.push("<a id = 'openInColForm' onclick='LhQualityMeasures.OpenQMForm("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+","+incompleteMeasures.COLFORMID+")'>",recordData.COLDISPLAY,"</a>");
}else{if(incompleteMeasures.COLTASKIND==4){renderResults.push("<a id = 'openInDocView' onclick='LhQualityMeasures.OpenChartTab(\""+incompleteMeasures.COLTABNAME+'" ,'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.COLDISPLAY,"</a>");
}else{if(incompleteMeasures.COLTASKIND==5){if(incompleteMeasures.COLTABNAME.indexOf("!")>0){renderResults.push("<a id = 'openInDocNote' onclick='LhQualityMeasures.OpenQMPowerNote(\""+incompleteMeasures.COLTABNAME+'",'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.COLDISPLAY,"</a>");
}else{renderResults.push("<a id = 'openInDocNote' onclick='LhQualityMeasures.AddEPByCKI(\""+incompleteMeasures.COLTABNAME+'",'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.COLDISPLAY,"</a>");
}}}}}}firstTaskFound=1;
}if(incompleteMeasures.ADMINSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(incompleteMeasures.ADMINPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInAdmin'>",incompleteMeasures.ADMININCOMPLETEDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERMEASUREIND==1&&incompleteMeasures.DITHERMEASUREIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInDoc'>",recordData.ADMINDISPLAY,"</span>");
}else{if(incompleteMeasures.ADMINTASKIND==2){renderResults.push("<a id = 'openInAdminMAR' onclick='LhQualityMeasures.OpenChartTab(\""+incompleteMeasures.ADMINTABNAME+'" ,'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.ADMINDISPLAY,"</a>");
}else{if(incompleteMeasures.ADMINTASKIND==3){renderResults.push("<a id = 'openInAdminForm' onclick='LhQualityMeasures.OpenQMForm("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+","+incompleteMeasures.ADMINFORMID+")'>",recordData.ADMINDISPLAY,"</a>");
}else{if(incompleteMeasures.ADMINTASKIND==4){renderResults.push("<a id = 'openInAdminView' onclick='LhQualityMeasures.OpenChartTab(\""+incompleteMeasures.ADMINTABNAME+'" ,'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.ADMINDISPLAY,"</a>");
}}}}}firstTaskFound=1;
}if(incompleteMeasures.PRESSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(incompleteMeasures.PRESPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInPres'>",incompleteMeasures.PRESINCOMPLETEDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERACEIPRESIND==1&&incompleteMeasures.DITHERPRESAMIIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInDoc'>",recordData.PRESDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERARBPRESIND==1&&incompleteMeasures.DITHERPRESAMIIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInDoc'>",recordData.PRESDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERMEASUREIND==1&&incompleteMeasures.DITHERMEASUREIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayInDoc'>",recordData.PRESDISPLAY,"</span>");
}else{if(incompleteMeasures.PRESTASKIND==1){renderResults.push("<a id = 'openInPresOrder' onclick='LhQualityMeasures.OpenQMOrderWindow("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.PRESDISPLAY,"</a>");
}else{if(incompleteMeasures.PRESTASKIND==6){renderResults.push("<a id = 'openInPresRec' onclick='LhQualityMeasures.OpenQMMedsRec("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.PRESDISPLAY,"</a>");
}}}}}}firstTaskFound=1;
}if(incompleteMeasures.DOCSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(incompleteMeasures.DOCPRESENTIND==1){if(outcomeIncomplete.DITHERDOCIND==1&&incompleteMeasures.DELAYDITHERIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERDOCIND==1&&incompleteMeasures.VANCOPRESIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERDOCIND==2&&incompleteMeasures.DELAYDITHERIND==2){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",incompleteMeasures.DOCINCOMPLETEDISPLAY,"</span>");
}}}}else{if(outcomeIncomplete.DITHERMEASUREIND==1&&incompleteMeasures.DITHERMEASUREIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERDOCIND==3&&incompleteMeasures.ORALFACTORDITHER==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.ADMINMETIND==1&&incompleteMeasures.CONTRAIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.PRESMETIND==1&&incompleteMeasures.CONTRAIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERDOCIND==1&&incompleteMeasures.DELAYDITHERIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeIncomplete.DITHERDOCIND==1&&incompleteMeasures.VANCOPRESIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayInDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(incompleteMeasures.DOCTASKIND==1){renderResults.push("<a id = 'openInDocOrder' onclick='LhQualityMeasures.OpenQMOrderWindow("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.DOCDISPLAY,"</a>");
}else{if(incompleteMeasures.DOCTASKIND==3){renderResults.push("<a id = 'openInDocForm' onclick='LhQualityMeasures.OpenQMForm("+recordData.PERSON_ID+","+recordData.ENCNTR_ID+","+incompleteMeasures.DOCFORMID+")'>",recordData.DOCDISPLAY,"</a>");
}else{if(incompleteMeasures.DOCTASKIND==4){renderResults.push("<a id = 'openInDocView' onclick='LhQualityMeasures.OpenChartTab(\""+incompleteMeasures.DOCTABNAME+'" ,'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.DOCDISPLAY,"</a>");
}else{if(incompleteMeasures.DOCTASKIND==5){if(incompleteMeasures.DOCTABNAME.indexOf("!")>0){renderResults.push("<a id = 'openInDocNote' onclick='LhQualityMeasures.OpenQMPowerNote(\""+incompleteMeasures.DOCTABNAME+'",'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.DOCDISPLAY,"</a>");
}else{renderResults.push("<a id = 'openInDocNote' onclick='LhQualityMeasures.AddEPByCKI(\""+incompleteMeasures.DOCTABNAME+'",'+recordData.PERSON_ID+","+recordData.ENCNTR_ID+")'>",recordData.DOCDISPLAY,"</a>");
}}}}}}}}}}}}firstTaskFound=1;
}renderResults.push("</dd>");
renderResults.push("</dt>");
renderResults.push("</dl>");
}renderResults.push("</div>");
renderResults.push("</div>");
}}else{renderResults.push("<span class='lh-res-none'>",i18n.NO_RESULTS_FOUND,"</span>");
}renderResults.push("</div>");
renderResults.push("</div>");
renderResults.push("<div id='comp"+compId+"' class='lh-sub-sec'>");
renderResults.push("<h3 class='lh-sub-sec-hd'><span class = 'lh-sub-sec-hd-tgl' title="+i18n.HIDE_SECTION+"></span><span class='lh-sub-sec-title'>"+i18n.QM_COMPLETE+" (",recordData.OUTCOMES_COMPLETE.length,")</span></h3>");
renderResults.push("<div class='lh-sub-sec-content'>");
if(recordData.OUTCOMES_COMPLETE.length>0){var completeOutcomeLength=recordData.OUTCOMES_COMPLETE.length;
for(var j=0;
j<completeOutcomeLength;
j++){renderResults.push("<div class='lh-sub-sub-sec-content'>");
var tip2="TipA"+j;
var outcomeComplete=recordData.OUTCOMES_COMPLETE[j];
var hover2Display="";
hover2Display=outcomeComplete.HOVERDISPLAY;
renderResults.push("<div id= ",tip2," left='' top='' style='position:absolute; z-index:1000;background-color:#FFC;border:1px solid #000; visibility:hidden;'>",hover2Display,"</div>");
strAlarmClock="";
if(outcomeComplete.SHOWICONIND=="1"){strAlarmClock="<span>&nbsp;&nbsp;&nbsp;<img class='lh-alarm'></img></span>";
}renderResults.push("<h3 class='lh-sub-sec-hd-test'><span class='lh-sub-sec-hd-tgl' title=",i18n.HIDE_SECTION,">-</span><span class='lh-sub-sec-title' onmouseover='LhQualityMeasures.prototype.ShowHover(\""+outcomeComplete.HOVERDISPLAY+'",'+j+","+0+","+-15+",\"TipA\");' onmouseout='LhQualityMeasures.prototype.HideHover("+j+',"TipA");\'>',outcomeComplete.OUTCOME_NAME,"</span>",strAlarmClock,"</h3>");
renderResults.push("<div class='lh-sub-sec-content'>");
var completeMeasuresLength=outcomeComplete.MEASURES.length;
for(var k=0;
k<completeMeasuresLength;
k++){var completeMeasure=outcomeComplete.MEASURES[k];
firstTaskFound=0;
var meas_name_class="";
var meas_data_class="lh-qm-ic-name-display";
if(completeMeasure.HIGHLIGHTIND==1){if(completeMeasure.HIGHLIGHTCOLOR){meas_name_class=" "+completeMeasure.HIGHLIGHTCOLOR;
meas_data_class="lh-qm-font12 "+completeMeasure.HIGHLIGHTCOLOR;
}if(completeMeasure.HIGHLIGHTFONTWEIGHT==1){meas_name_class+=" lh-qm-bold-display";
}}renderResults.push("<dl class='lh-qm-info'>");
renderResults.push("<dt><span>measure</span></dt><dd class='lh-qm-ic-name",meas_name_class,"'><span>",completeMeasure.NAME,"</span></dd>");
renderResults.push("</dl>");
renderResults.push("<dl class='lh-qm-info'>");
renderResults.push("<dt>");
renderResults.push("<dd class='lh-qm-ic-name-grp'>");
if(completeMeasure.ORDERSETIND==1){if(completeMeasure.ORDERPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayOrder'>",completeMeasure.ORDERCOMPLETEDISPLAY,"</span>");
}else{renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayOrder'>",recordData.ORDERDISPLAY,"</span>");
}firstTaskFound=1;
}if(completeMeasure.COLSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(completeMeasure.COLPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayCol'>",completeMeasure.COLCOMPLETEDISPLAY,"</span>");
}else{renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayCol'>",recordData.COLDISPLAY,"</span>");
}firstTaskFound=1;
}if(completeMeasure.ADMINSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(completeMeasure.ADMINPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayAdmin'>",completeMeasure.ADMINCOMPLETEDISPLAY,"</span>");
}else{renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayAdmin'>",recordData.ADMINDISPLAY,"</span>");
}firstTaskFound=1;
}if(completeMeasure.PRESSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(completeMeasure.PRESPRESENTIND==1){renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayPres'>",completeMeasure.PRESCOMPLETEDISPLAY,"</span>");
}else{renderResults.push("<span class = 'lh-qm-ic-name-display' id = 'displayPres'>",recordData.PRESDISPLAY,"</span>");
}firstTaskFound=1;
}if(completeMeasure.DOCSETIND==1){if(firstTaskFound==1){renderResults.push(" | ");
}if(completeMeasure.DOCPRESENTIND==1){if(outcomeComplete.DITHERDOCIND==1&&completeMeasure.DELAYDITHERIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeComplete.DITHERDOCIND==2&&completeMeasure.DELAYDITHERIND==2){renderResults.push("<span class = '",meas_data_class,"' id = 'displayDoc'>",recordData.DOCDISPLAY,"</span>");
}else{if(outcomeComplete.DITHERDOCIND==1&&completeMeasure.VANCOPRESIND==1){renderResults.push("<span class = '",meas_data_class,"' id = 'displayDoc'>",recordData.DOCDISPLAY,"</span>");
}else{renderResults.push("<span class = '",meas_data_class,"' id = 'displayDoc'>",completeMeasure.DOCCOMPLETEDISPLAY,"</span>");
}}}}else{renderResults.push("<span class = '",meas_data_class,"' id = 'displayDoc'>",recordData.DOCDISPLAY,"</span>");
}firstTaskFound=1;
}renderResults.push("</dd>");
renderResults.push("</dt>");
renderResults.push("</dl>");
}renderResults.push("</div>");
renderResults.push("</div>");
}}else{if(recordData.OUTCOMES_COMPLETE.length===0){renderResults.push("<span class='lh-res-none'>",i18n.NO_RESULTS_FOUND,"</span>");
}}renderResults.push("</div>");
renderResults.push("</div>");
renderResults.push("</div>");
renderResults.push("</div>");
}catch(err){logger.logJSError(err,this,"LhQualityMeasures.js","renderComponent");
}this.finalizeComponent(renderResults.join(""),MP_Util.CreateTitleText(this,totalOutcomes));
var lastChild=comp.getRootComponentNode().lastChild;
var dropDown=document.getElementById("qmTask"+compId);
var condition=cookieContent.data[index].selectedCond;
if(condition==""&&dropDown.options.length>1){condition="All";
}for(var i=0;
i<dropDown.options.length;
i++){if(dropDown.options[i].text==condition){dropDown.selectedIndex=i;
}}MP_Util.Doc.InitSubToggles(lastChild,"lh-sub-sec-hd-tgl");
var completeSectionToggle=document.getElementById("comp"+compId).childNodes[0].firstChild;
completeSectionToggle.onclick=function(e){cookieContent.data[index].expcollInd=this.title;
LhQualityMeasures.prototype.setCookie("LhQualityMeasures",cookieContent);
};
var expcoll_ind=cookieContent.data[index].expcollInd;
if(expcoll_ind==""){var conditions=[];
for(var j=0;
j<recordData.CONDITIONS.length;
j++){if(JSON.stringify(recordData.CONDITIONS[j].COLLAPSE_IND)==1){conditions.push(recordData.CONDITIONS[j].CONDITION_NAME);
}}if(recordData.CONDITIONS.length==1&&conditions.length==1){condition=recordData.CONDITIONS.CONDITION_NAME;
completeSectionToggle.click();
}else{for(var m=0;
m<conditions.length;
m++){if(condition==conditions[m]){completeSectionToggle.click();
}}}}else{if(expcoll_ind==="Expand"){completeSectionToggle.click();
}}var self=this;
dropDown.onchange=function(e){var index=self.getCookieIndex();
var cookieContent=JSON.parse(self.getCookie("LhQualityMeasures"));
cookieContent.data[index].selectedIndex=this.value;
cookieContent.data[index].selectedCond=this.options[this.selectedIndex].text;
cookieContent.data[index].expcollInd="";
LhQualityMeasures.prototype.setCookie("LhQualityMeasures",cookieContent);
comp.retrieveComponentData();
};
};
LhQualityMeasures.prototype.getCookie=function(cName){var trimString=function(str){return str.replace(/^\s+|\s+$/g,"");
};
var name=cName+"=";
var ca=document.cookie.split(";");
for(var i=0;
i<ca.length;
i++){var c=trimString(ca[i]);
if(c.indexOf(name)==0){return c.substring(name.length,c.length);
}}return"";
};
LhQualityMeasures.prototype.ShowHover=function(strHoverText,idValue,xOffSet,yOffSet,idStr){idStr=idStr||"Tip";
var x="";
var y="";
var tmpID=idStr+idValue;
var tDIV=document.getElementById(tmpID);
tDIV.style.left="";
tDIV.style.top="";
x=tDIV.offsetLeft;
tDIV.setAttribute("left",x);
y=tDIV.offsetTop;
tDIV.setAttribute("top",y);
x=parseInt(x)-parseInt(xOffSet);
y=parseInt(y)-parseInt(yOffSet);
tDIV.style.left=x;
tDIV.style.top=y;
tDIV.style.width="250px";
tDIV.style.visibility="visible";
};
LhQualityMeasures.prototype.HideHover=function(valueHide,idHide){idHide=idHide||"Tip";
var tmpId=idHide+valueHide;
var tDIV=document.getElementById(tmpId);
tDIV.style.visibility="hidden";
};
LhQualityMeasures.OpenQMOrderWindow=function(qmPersonId,qmEncntrId){var orderWindowString=qmPersonId+"|"+qmEncntrId+"|";
orderWindowString+="{ORDER|0|0|0|0|0}";
orderWindowString+="|24|{2|127}{3|127}|8";
MP_Util.LogMpagesEventInfo(null,"ORDERS",orderWindowString,"LhQualityMeasures.js","OpenQMOrderWindow");
MPAGES_EVENT("Orders",orderWindowString);
};
LhQualityMeasures.OpenQMOrderProfileWindow=function(qmPersonId,qmEncntrId){var mrObject={};
mrObject=CERN_Platform.getDiscernObject("ORDERS");
if(mrObject!=null){mrObject.PersonId=qmPersonId;
mrObject.EncntrId=qmEncntrId;
mrObject.reconciliationMode=0;
MP_Util.LogMpagesEventInfo(null,"ORDERS","OpenQMMedsRec","LhQualityMeasures.js","OpenQMMedsRec");
mrObject.LaunchOrdersMode(0,0,0);
}};
LhQualityMeasures.OpenQMForm=function(qmPersonId,qmEncntrId,formId){var dPersonId=qmPersonId;
var dEncounterId=qmEncntrId;
var activityId=0;
var chartMode=0;
var mpObj=CERN_Platform.getDiscernObject("POWERFORM");
if(mpObj!=null){mpObj.OpenForm(dPersonId,dEncounterId,formId,activityId,chartMode);
}};
LhQualityMeasures.OpenChartTab=function(tabName,qmPersonId,qmEncntrId){APPLINK(0,"$APP_AppName$","/PERSONID="+qmPersonId+" /ENCNTRID="+qmEncntrId+" /FIRSTTAB=^"+tabName+"^");
};
LhQualityMeasures.OpenQMPowerNote=function(noteName,qmPersonId,qmEncntrId){var personId=qmPersonId;
var encounterId=qmencntrId;
var noteset="";
noteset=personId+"|"+encounterId+"|"+noteName+"|0";
var noteXmlStr=MPAGES_EVENT("POWERNOTE",noteset);
};
LhQualityMeasures.AddEPByCKI=function(noteName,qmPersonId,qmEncntrId){var mdPersonId=qmPersonId;
var mdEncounterId=qmEncntrId;
var mbStrEPCKISource="";
var mbStrEPCKIIdentifier="";
if(noteName.indexOf("---")>0){mbStrEPCKISource=noteName.split("---")[0];
mbStrEPCKIIdentifier=noteName.split("---")[1];
}else{mbStrEPCKISource="CKI";
mbStrEPCKIIdentifier=noteName;
}var PowerNoteMPageUtils=CERN_Platform.getDiscernObject("POWERNOTE");
if(PowerNoteMPageUtils!=null){PowerNoteMPageUtils.BeginNoteFromEncounterPathway(mdPersonId,mdEncounterId,mbStrEPCKISource,mbStrEPCKIIdentifier);
}};
LhQualityMeasures.OpenQMMedsRec=function(qmPersonId,qmEncntrId){var mrObject={};
var code=MP_Util.GetCodeValueByMeaning("DISCHARGEMED",54732);
mrObject=CERN_Platform.getDiscernObject("ORDERS");
if(mrObject!=null){mrObject.PersonId=qmPersonId;
mrObject.EncntrId=qmEncntrId;
mrObject.reconciliationMode=3;
mrObject.defaultVenue=(code)?code.codeValue:0;
MP_Util.LogMpagesEventInfo(null,"ORDERS","OpenQMMedsRec","LhQualityMeasures.js","OpenQMMedsRec");
mrObject.LaunchOrdersMode(2,0,0);
}};
LhQualityMeasures.prototype.getCookieIndex=function(){var cookieHolder=this.getCookie("LhQualityMeasures");
var component=this;
var criterion=component.getCriterion();
var encntrData={ID:criterion.encntr_id,selectedIndex:"",selectedCond:"",expcollInd:""};
var data={frameWork:"",data:[encntrData]};
if(cookieHolder===""){LhQualityMeasures.prototype.setCookie("LhQualityMeasures",data);
return 0;
}else{var obj=JSON.parse(cookieHolder);
for(var i=0;
i<obj.data.length;
i++){if(obj.data[i].ID==criterion.encntr_id){return i;
}}obj.data.push(encntrData);
LhQualityMeasures.prototype.setCookie("LhQualityMeasures",obj);
return(obj.data.length-1);
}};
LhQualityMeasures.prototype.setCookie=function(cookieName,data){if(data&&cookieName){document.cookie=cookieName+"="+JSON.stringify(data);
}};
MP_Util.setObjectDefinitionMapping("SM_QM",LhQualityMeasures);
