var CERN_SOCIAL_HISTORY_CONSOLIDATED=function(){var shxi18n=i18n.discernabu.consolidated_history;
return{processSidepanelContent:function(component,rowDataObj){var markup="";
var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
var compId=component.getComponentId();
var longDtaTextItemsArr=[];
var closeLastListElement=false;
var dtaResultTypeArr=["1","7","21","22"];
var dtaResultType=null;
if(!component.shxCodeArray){component.shxCodeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
}component.shxSidePanel.setTitleText(rowDataObj.CATEGORY);
var previousDtaItem=null;
var shxDetailsCnt=(rowDataObj.SHX_DETAIL.length)?rowDataObj.SHX_DETAIL[0].DETAIL_QUAL.length:0;
for(var i=0;
i<shxDetailsCnt;
i++){dtaResultType=null;
var currentDtaItem=rowDataObj.SHX_DETAIL[0].DETAIL_QUAL[i];
dtaResultType=(currentDtaItem.DEFAULT_RESULT_TYPE)?MP_Util.GetValueFromArray(currentDtaItem.DEFAULT_RESULT_TYPE,component.shxCodeArray):null;
if(dtaResultType&&$.inArray(dtaResultType.MEANING,dtaResultTypeArr)!==-1){markup+=(closeLastListElement)?"</dl>":"";
markup+=self.buildShxSidePanelItemMarkup(currentDtaItem.DETAIL_LABEL,currentDtaItem.DETAIL_RESPONSE,"row-view");
continue;
}if(!previousDtaItem){closeLastListElement=true;
markup+="<dl class='shx-side-panel-detail-item column-view'>";
markup+="<dt class='shx-side-panel-description secondary-text label'>"+currentDtaItem.DETAIL_LABEL+"</dt>";
}else{if(previousDtaItem.DETAIL_LABEL!==currentDtaItem.DETAIL_LABEL){markup+="</dl><dl class='shx-side-panel-detail-item column-view'>";
markup+="<dt class='shx-side-panel-description secondary-text label'>"+currentDtaItem.DETAIL_LABEL+"</dt>";
}}markup+="<dd class='shx-side-panel-description response'>"+currentDtaItem.DETAIL_RESPONSE+"</dd>";
previousDtaItem=currentDtaItem;
}markup+=(closeLastListElement)?"</dl>":"";
var comments=rowDataObj.COMMENTS;
var commentTxt="";
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
if(rowDataObj.COMMENT_CNT>0){var commentLen=comments.length;
for(var x=0;
x<commentLen;
x++){var cmmtDate=df.formatISO8601(comments[x].COMMENT_DT,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
commentTxt+=cmmtDate+" - "+comments[x].COMMENT_PRSNL_NAME+" - "+comments[x].COMMENT_TXT+"<br />";
}}markup+=(commentTxt)?self.buildShxSidePanelItemMarkup(i18n.COMMENTS+":",commentTxt,"row-view"):"";
return markup;
},renderMultiselectSidepanelContent:function(component,rowsDataArr){var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
try{var unavailableMessage=self.getBatchActionUnavailableMessage(rowsDataArr);
var markup="<div id='sidePanelScrollContainer"+component.getComponentId()+"' class='sp-body-content-area'>";
var selectedRowsCnt=rowsDataArr.length;
var sortArr=[];
for(var i=0;
i<selectedRowsCnt;
i++){var info="";
var rowData=rowsDataArr[i];
var displayMessage=rowData.IS_PED?"":unavailableMessage;
info=self.buildShxSidePanelItemMarkup("",rowData.CATEGORY,"")+" "+displayMessage;
info+="<div class='sp-separator'>&nbsp;</div>";
sortArr.push(info);
}markup+=sortArr.sort().join("");
markup+="</div>";
component.shxSidePanel.removeAlertBanner();
component.shxSidePanel.setActionsAsHTML("");
component.shxSidePanel.setTitleText(selectedRowsCnt+" "+shxi18n.ITEMS_SELECTED);
var isMultiSelectionValid=self.validateMultiSelection(rowsDataArr);
if(isMultiSelectionValid){if(component.shxUpdatePriv){self.createRemoveRequestButton(component,shxi18n.REMOVE_REQUEST+" ("+selectedRowsCnt+")");
component.shxSidePanel.setActionsAsHTML(component.shxRemoveRequestsButton.render());
component.shxRemoveRequestsButton.attachEvents();
}}else{var invalidSelectionBanner=new MPageUI.AlertBanner();
invalidSelectionBanner.setType(MPageUI.ALERT_OPTIONS.TYPE.INFO);
invalidSelectionBanner.setSecondaryText(shxi18n.INVALID_SELECTION);
component.shxSidePanel.setAlertBannerAsHTML(invalidSelectionBanner.render());
}component.shxSidePanel.setApplyBodyContentsPadding(true);
component.shxSidePanel.setContents(markup,"tabContentsContainer"+component.getComponentId());
}catch(err){self.displayShxErrorBanner(component);
logger.logWarning(err);
}},processPEDSidepanelContent:function(component,rowDataObj){var markup="";
var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
try{var updatedDt=new Date();
var outsideRecordsDtDisplay="--";
if(rowDataObj.UPDT_DT_TM!==""){updatedDt.setISO8601(rowDataObj.UPDT_DT_TM);
outsideRecordsDtDisplay=updatedDt.format("mediumDate")+" "+updatedDt.format("militaryTime");
}if(component.shxUpdatePriv){self.createRemoveRequestButton(component,shxi18n.REMOVE_REQUEST);
component.shxSidePanel.setActionsAsHTML(component.shxRemoveRequestsButton.render());
component.shxRemoveRequestsButton.attachEvents();
}var sidePanelHTMLPed="<dl>";
sidePanelHTMLPed+='<dt class="chx-expand-content-section">';
sidePanelHTMLPed+='<span class="chx-side-panel-tgl">';
sidePanelHTMLPed+='<span class="chx-hide-expand-btn" title="'+shxi18n.COLLAPSE+'">&nbsp</span>';
sidePanelHTMLPed+='<span class="chx-pat-req-icon">&nbsp</span><span>'+shxi18n.OUTSIDE_REQUESTS+"</span></span>";
sidePanelHTMLPed+='<span class="chx-pull-right">';
markup+=self.buildShxSidePanelItemMarkup(shxi18n.ADDITION,shxi18n.ADD+" "+rowDataObj.CATEGORY,"row-view");
markup+=self.processSidepanelContent(component,rowDataObj);
markup+="</br>";
markup+=self.buildShxSidePanelItemMarkup(shxi18n.ORIGINATING_AUTHOR+":",rowDataObj.LAST_UPDATED_BY,"column-view");
var submittedByType="--";
if(!component.shxCodeArray){component.shxCodeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
}if(rowDataObj.INTEROP[0]&&rowDataObj.INTEROP[0].SUBMITTED_BY_TYPE){submittedByType=MP_Util.GetValueFromArray(rowDataObj.INTEROP[0].SUBMITTED_BY_TYPE,component.shxCodeArray);
if(submittedByType){submittedByType=submittedByType.display;
}}markup+=self.buildShxSidePanelItemMarkup(shxi18n.ORIGINATING_SOURCE+":",submittedByType,"column-view");
sidePanelHTMLPed+=outsideRecordsDtDisplay+'</span></dt><dd><div class="chx-expand-content">'+markup+"</div></dd></dl>";
return sidePanelHTMLPed;
}catch(err){self.displayShxErrorBanner(component);
logger.logWarning(err);
}},getBatchActionUnavailableMessage:function(selectedRowArr){var rowCount=selectedRowArr.length;
var pedRowIndicator=false;
var millRowIndicator=false;
for(var i=0;
i<rowCount;
i++){if(selectedRowArr[i].IS_PED){pedRowIndicator=true;
}else{millRowIndicator=true;
}}var unavailableMessage=(pedRowIndicator&&millRowIndicator)?'<span class="secondary-text chx-batch-act-unavailable">('+shxi18n.BATCH_ACTIONS_UNAVAILABLE+")</span>":"";
return unavailableMessage;
},attachOutsideRecordsEvent:function(component){var sidePanelContainer=component.shxSidePanelContainer;
sidePanelContainer.on("click",".chx-side-panel-tgl",function(){var $patReqSubSection=sidePanelContainer.find(".chx-expand-content");
var $outsideRecordsTarget=($(this).find(".chx-hide-expand-btn").length)?$(this).find(".chx-hide-expand-btn"):$(this).find(".chx-show-expand-btn");
if($patReqSubSection.hasClass("chx-section-closed")){$outsideRecordsTarget.removeClass("chx-show-expand-btn").addClass("chx-hide-expand-btn");
$patReqSubSection.removeClass("chx-section-closed");
}else{$outsideRecordsTarget.removeClass("chx-hide-expand-btn").addClass("chx-show-expand-btn");
$patReqSubSection.addClass("chx-section-closed");
}});
},renderSidePanelContent:function(component,rowDataObj){var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
var compId=component.getComponentId();
var sidePanelContentHTML="";
var isPatientEnteredDataRow=false;
var outsideRecordsClass="";
component.shxSidePanel.setActionsAsHTML("");
if(rowDataObj.IS_PED){isPatientEnteredDataRow=true;
outsideRecordsClass="shx-outside-records chx-sp-body-contents";
component.shxSidePanel.setApplyBodyContentsPadding(false);
sidePanelContentHTML+=self.processPEDSidepanelContent(component,rowDataObj);
}else{component.shxSidePanel.setApplyBodyContentsPadding(true);
sidePanelContentHTML+=self.processSidepanelContent(component,rowDataObj);
sidePanelContentHTML+="</br>";
sidePanelContentHTML+=self.buildShxSidePanelItemMarkup(i18n.LAST_UPDATED_BY+":",rowDataObj.LAST_UPDATED_BY,"column-view");
sidePanelContentHTML+=self.buildShxSidePanelItemMarkup(i18n.LAST_UPDATED+":",rowDataObj.LAST_UPDATED_DT,"column-view");
sidePanelContentHTML+=self.buildShxSidePanelItemMarkup(i18n.RCM_LAST_REVIEW_DATE+":",rowDataObj.LAST_REVIEW_DATE,"column-view");
}var markup="<div id='sidePanelScrollContainer"+compId+"' class='"+outsideRecordsClass+" sp-body-content-area'>";
markup+=sidePanelContentHTML;
markup+="</div>";
if(isPatientEnteredDataRow){markup+="<div class='sp-separator'>&nbsp;</div>";
}component.shxSidePanel.setContents(markup,"tabContentsContainer"+compId);
},buildShxSidePanelItemMarkup:function(label,response,customClass){var markup="";
if(response!==""){markup+="<dl class='shx-side-panel-detail-item "+(customClass||"")+"'>";
markup+="<dt class='shx-side-panel-description secondary-text label'>"+label+"</dt>";
markup+="<dd class='shx-side-panel-description response'>"+response+"</dd>";
markup+="</dl>";
}return markup;
},toggleSidePanel:function(component,showPanel){var compId=component.getComponentId();
var $tabContainer=$("#tabContentsContainer"+compId).find(".chx-tabpage");
if(showPanel){$tabContainer.addClass("shx-side-panel-open");
var $tableContainer=$tabContainer.find(".shx-table");
var tableHeight=($tableContainer.length)?$tableContainer.height():175;
component.shxSidePanel.setMinHeight(Math.max(tableHeight,175)+"px");
component.shxSidePanel.setHeight(tableHeight+"px");
component.shxSidePanel.showPanel();
component.shxSidePanel.resizePanel(component.calculateTabContainerMaxHeight("shx-table")+"px");
component.shxSidePanel.expandSidePanel();
}else{$tabContainer.removeClass("shx-side-panel-open");
component.shxSidePanel.hidePanel();
component.shxSidePanel.collapseSidePanel();
}},processResultsForRender:function(component,recordData){var i=0;
var j=0;
var updatedPrsn="";
var personnelArray=MP_Util.LoadPersonelListJSON(recordData.PRSNL);
component.shxCodeArray=MP_Util.LoadCodeListJSON(recordData.CODES);
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var updateDT=new Date();
var socialCnt=(recordData&&recordData.SOCIAL)?recordData.SOCIAL.length:0;
var updatedTime="";
var requestTypeObj=null;
var shxItem=null;
recordData.PATIENT_REQUESTS=[];
recordData.CHART_SOCIAL_HISTORIES=[];
for(i=0;
i<socialCnt;
i++){shxItem=recordData.SOCIAL[i];
shxItem.LAST_UPDATED_BY="--";
shxItem.LAST_UPDATED_DT="--";
shxItem.LAST_REVIEW_DATE="--";
if(component.shouldDisplayPatientEnteredData()){var interopItem=shxItem.INTEROP[0];
requestTypeObj=(interopItem&&interopItem.REQUEST_TYPE)?MP_Util.GetValueFromArray(interopItem.REQUEST_TYPE,component.shxCodeArray):null;
shxItem.SOCIAL_HISTORY_REQUEST_TEXT=(requestTypeObj)?"<span>"+i18n.ADD+"</span>":"<span>--</span>";
}shxItem.SOCIAL_HISTORY_CATEGORY_TEXT="<span>"+shxItem.CATEGORY+"</span>";
updatedTime="";
if(shxItem.UPDT_DT_TM!==""){updateDT.setISO8601(shxItem.UPDT_DT_TM);
updatedTime=df.format(updateDT,mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR);
shxItem.LAST_UPDATED_DT=updatedTime||"--";
shxItem.LAST_REVIEW_DATE=updatedTime||"--";
}if(requestTypeObj){updatedPrsn=shxItem.INTEROP[0].SUBMITTED_BY_NAME;
}else{if(shxItem.UPDT_PRSNL_ID>0){updatedPrsn=MP_Util.GetValueFromArray(shxItem.UPDT_PRSNL_ID,personnelArray).fullName;
}}shxItem.LAST_UPDATED_BY=updatedPrsn||"--";
var detailsCnt=0;
if(shxItem.SHX_DETAIL_CNT>0){shxItem.SOCIAL_HISTORY_DETAILS_TEXT="";
var shxDetail=shxItem.SHX_DETAIL[0];
detailsCnt=shxDetail.DETAIL_QUAL.length;
var detailItem="";
var detailsObj={};
for(j=0;
j<detailsCnt;
j++){detailItem=shxDetail.DETAIL_QUAL[j];
detailsObj[detailItem.DETAIL_LABEL]=detailsObj[detailItem.DETAIL_LABEL]||[];
detailsObj[detailItem.DETAIL_LABEL].push(detailItem.DETAIL_RESPONSE||"--");
}var answersCnt=0;
detailItem="";
$.each(detailsObj,function(key,value){answersCnt+=1;
var label=(requestTypeObj)?key+":":key;
var response=(value.length)?value.join(", "):"--";
detailItem="<span class='chx-detail-lbl'>"+label+"</span><span class='chx-detail'>"+response+"</span>";
if(answersCnt<4){shxItem.SOCIAL_HISTORY_DETAILS_TEXT+=detailItem;
}});
}else{shxItem.SOCIAL_HISTORY_DETAILS_TEXT="<span class='chx-detail-lbl'>--</span>";
}if(component.shouldDisplayPatientEnteredData()){if(requestTypeObj){shxItem.IS_PED=true;
recordData.PATIENT_REQUESTS.push(shxItem);
}else{recordData.CHART_SOCIAL_HISTORIES.push(shxItem);
}}}},processSelectedPEDShxForRemoval:function(component){var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
try{var removeShxArr=[];
var selectedShx=component.getSocialHistoryCompTable().getSelection();
var shxCnt=selectedShx.length;
var codesArray=MP_Util.LoadCodeListJSON(component.shxRecordData.CODES);
var statusCode=MP_Util.GetCodeByMeaning(codesArray,"ACKNOWLEDGED").codeValue;
var criterion=component.getCriterion();
for(var i=0;
i<shxCnt;
i++){var shx=selectedShx[i];
var interopCnt=(shx.INTEROP)?shx.INTEROP.length:0;
for(var j=0;
j<interopCnt;
j++){var patientRequest=shx.INTEROP[j];
removeShxArr.push('{"EXT_DATA_INFO_ID":'+patientRequest.EXT_DATA_INFO_ID+'.0,"STATUS_CODE":'+statusCode+'.0,"CHART_REFERENCE_ID": 0.0,"PERSONNEL_ID":'+criterion.provider_id+'.0,"ENCNTR_ID":'+criterion.encntr_id+".0}");
}}return removeShxArr;
}catch(err){self.displayShxErrorBanner(component);
logger.logWarning(err);
}},displayShxErrorBanner:function(component){component.shxSidePanel.removeAlertBanner();
var alertBanner=new MPageUI.AlertBanner();
alertBanner.setType(MPageUI.ALERT_OPTIONS.TYPE.ERROR);
alertBanner.setSecondaryText(shxi18n.REMOVE_PAT_REQUEST_ERROR_TEXT);
component.shxSidePanel.setAlertBannerAsHTML(alertBanner.render());
},removePEDRequests:function(component){var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
var shxItemsArr=[];
var shxReconcileCAPTimer=new CapabilityTimer("CAP:MPG Social History Reconcile Patient Entered Data");
shxReconcileCAPTimer.capture();
shxItemsArr=self.processSelectedPEDShxForRemoval(component);
var requestJson='{"REQUESTIN":{"UPDATESTATUS":['+shxItemsArr+"]}}";
var scriptRequest=new ScriptRequest();
scriptRequest.setProgramName("mp_exec_std_request");
scriptRequest.setDataBlob(requestJson);
scriptRequest.setRawDataIndicator(true);
scriptRequest.setParameterArray(["^MINE^","^^",3202004,3202004,964756]);
scriptRequest.setResponseHandler(function(scriptReply){try{var responseData=JSON.parse(scriptReply.getResponse());
if(responseData.RECORD_DATA.STATUS.SUCCESS_INDICATOR===1){component.retrieveComponentData();
}else{self.displayShxErrorBanner(component);
}}catch(err){self.displayShxErrorBanner(component);
logger.logWarning(err);
}});
scriptRequest.performRequest();
},createRemoveRequestButton:function(component,label){if(!component.shxRemoveRequestsButton){var removeRequestsBtn=new MPageUI.Button();
removeRequestsBtn.setLabel(label);
removeRequestsBtn.setStyle(MPageUI.BUTTON_OPTIONS.STYLE.SECONDARY);
removeRequestsBtn.setOnClickCallback(function(){CERN_SOCIAL_HISTORY_CONSOLIDATED.removePEDRequests(component);
});
component.shxRemoveRequestsButton=removeRequestsBtn;
}else{component.shxRemoveRequestsButton.setLabel(label);
component.shxRemoveRequestsButton.clearElementCache();
}},initializeSidePanel:function(component){var self=this;
var historiesObj=component;
var compId=component.getComponentId();
var shxSidePanelId="shxSidePanel"+compId;
var $tableContainer=$("#chxSocHist"+compId+"table");
var $tabContainer=$("#tabContentsContainer"+compId).find(".chx-tabpage");
var minHeight=175;
var windowPadding=60;
var maxViewHeight=($("#vwpBody").height()-windowPadding)+"px";
var tableHeight=($tableContainer.length)?$tableContainer.height():minHeight;
var offsetHeight=$tabContainer.height()-tableHeight;
component.shxSidePanelContainer=$("#"+shxSidePanelId);
component.shxSidePanel=new CompSidePanel(compId,shxSidePanelId);
if(!component.shxSidePanelContainer.length){var shxSidePanelContainer="<div id='"+shxSidePanelId+"' class='shx-side-panel'>&nbsp;</div>";
$tabContainer.append(shxSidePanelContainer);
component.shxSidePanelContainer=$("#shxSidePanel"+compId);
}var sidePanelHTML="<div id='sidePanelScrollContainer"+compId+"'><div id='shx"+compId+"sidePanelResultList' class='shx-side-panel-result-list'>";
component.shxSidePanel.setExpandOption(component.shxSidePanel.expandOption.EXPAND_DOWN);
component.shxSidePanel.setOffsetHeight(offsetHeight);
component.shxSidePanel.setHeight(tableHeight+"px");
component.shxSidePanel.setMinHeight(minHeight+"px");
component.shxSidePanel.setMaxHeight(maxViewHeight);
component.shxSidePanel.renderPreBuiltSidePanel();
component.shxSidePanel.setActionsAsHTML("<div id='shxSidePanelActions"+compId+"' class='shx-sp-actions'></div>");
component.shxSidePanel.setContents(sidePanelHTML,"tabContentsContainer"+compId);
component.shxSidePanel.showCornerCloseButton();
component.shxSidePanel.setCornerCloseFunction(function(){self.toggleSidePanel(historiesObj,false);
historiesObj.getSocialHistoryCompTable().deselectAll();
});
},validateMultiSelection:function(selectionArr){var isValid=true;
var selectionCnt=selectionArr.length;
for(var i=0;
i<selectionCnt;
i++){var rowData=selectionArr[i];
if(!rowData.IS_PED){isValid=false;
break;
}}return isValid;
},AddSocialHistoryLinkPED:function(component){var secContent=component.getSectionContentNode();
var socialHistoryLink=component.getSocialLink();
var historiesComoponentTabLink=socialHistoryLink?socialHistoryLink:component.getLink();
$(secContent).on("click",".chx-shx-tab-link",function(){var criterion=component.getCriterion();
var sParms="/PERSONID="+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+historiesComoponentTabLink+"^";
APPLINK(0,criterion.executable,sParms);
});
},RenderComponent:function(component,recordData){var self=CERN_SOCIAL_HISTORY_CONSOLIDATED;
try{component.shxRecordData=recordData;
var componentId=component.getComponentId();
var patientReqCount=0;
var chartSocHistCount=(recordData)?recordData.SOCIAL_CNT:0;
var socHistHtml="";
var unverifiedIcon="";
var columnArr=[];
var dataObj={};
var sortByColumnId="CATEGORY";
var socHistTable=new MPageUI.Table();
socHistTable.setOptions({select:MPageUI.TABLE_OPTIONS.SELECT.SINGLE_ROW,namespace:"shx-table"});
self.processResultsForRender(component,recordData);
columnArr.push({id:"CATEGORY",label:i18n.CATEGORY,sortOptions:{primary:{field:"CATEGORY",direction:MPageUI.TABLE_OPTIONS.SORT.ASCENDING}},contents:function(data){return data.SOCIAL_HISTORY_CATEGORY_TEXT;
},css:"category-column"},{id:"DETAILS",label:i18n.DETAILS,contents:function(data){return data.SOCIAL_HISTORY_DETAILS_TEXT;
},css:"details-column"});
if(component.shouldDisplayPatientEnteredData()){dataObj=null;
patientReqCount=(recordData&&recordData.PATIENT_REQUESTS)?recordData.PATIENT_REQUESTS.length:0;
unverifiedIcon=(patientReqCount)?"<span class='pat-req-icon table-grp-header'></span>":"";
component.shxUpdatePriv=recordData.UPDATE_PRIV||0;
dataObj={groups:[{id:"GROUP_PATIENT_REQUEST",css:"patient-req-group",label:unverifiedIcon+shxi18n.PATIENT_REQUESTS,showCount:true,expanded:true,collapsible:false,records:recordData.PATIENT_REQUESTS},{css:"chart-group",id:"GROUP_CHART_SOCIAL_HISTORIES",label:shxi18n.CHART_SOCIAL_HISTORY,showCount:true,expanded:true,collapsible:false,records:recordData.CHART_SOCIAL_HISTORIES}]};
if(patientReqCount){columnArr=[];
socHistTable.setOptions({select:MPageUI.TABLE_OPTIONS.SELECT.MULTI_ROW,});
sortByColumnId="REQUEST";
columnArr.push({id:"REQUEST",label:i18n.REQUEST,contents:function(data){return data.SOCIAL_HISTORY_REQUEST_TEXT;
},sortOptions:{primary:{field:"REQUEST",direction:MPageUI.TABLE_OPTIONS.SORT.ASCENDING},secondary:{field:"CATEGORY",direction:MPageUI.TABLE_OPTIONS.SORT.ASCENDING}},css:"request-column"},{id:"CATEGORY",label:i18n.CATEGORY,contents:function(data){return data.SOCIAL_HISTORY_CATEGORY_TEXT;
},css:"category-column"},{id:"DETAILS",label:i18n.DETAILS,contents:function(data){return data.SOCIAL_HISTORY_DETAILS_TEXT;
},css:"details-column"});
}chartSocHistCount=recordData.CHART_SOCIAL_HISTORIES.length;
}else{dataObj={records:recordData.SOCIAL};
}socHistTable.setData(dataObj);
socHistTable.setColumns(columnArr);
socHistTable.sortBy({column:{id:sortByColumnId,direction:MPageUI.TABLE_OPTIONS.SORT.ASCENDING}});
socHistTable.setOnRowClickCallback(function(data){if(component.shxSidePanel){component.shxSidePanel.removeAlertBanner();
}var rowSelectionArr=this.getSelection();
var selectionCnt=rowSelectionArr.length;
switch(selectionCnt){case 0:this.deselectAll();
self.toggleSidePanel(component,false);
break;
case 1:self.renderSidePanelContent(component,rowSelectionArr[0]);
self.toggleSidePanel(component,true);
break;
default:if(component.shouldDisplayPatientEnteredData()){self.renderMultiselectSidepanelContent(component,rowSelectionArr);
self.toggleSidePanel(component,true);
}break;
}});
socHistHtml+=socHistTable.render();
component.setSocialHistoryCompTable(socHistTable);
component.loadTabData(chartSocHistCount,socHistHtml,component.HistoryComponentIndexObj.SOCIAL_HISTORY,function(){if(component.shouldDisplayPatientEnteredData()){CERN_SOCIAL_HISTORY_CONSOLIDATED.AddSocialHistoryLinkPED(component);
}},patientReqCount);
}catch(err){logger.logWarning(err);
}}};
}();
