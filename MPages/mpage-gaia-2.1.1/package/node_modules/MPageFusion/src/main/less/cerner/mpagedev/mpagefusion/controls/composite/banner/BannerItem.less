/* stylelint-disable value-keyword-case */

@bannerItem-class: mpageui-BannerItem;

.@{bannerItem-class} {
    .flex-display();
    .flex(1);

    padding: @relative-base @relative-tight;

    &-content {
        .flex-display();
        .flex(1 1 auto);
        .flex-direction(column);
        overflow: hidden;
    }

    &-main {
        .flex-display();
        .flex(1 1 auto);
        .align-items(flex-start);

        > .@{bannerItem-class}-actions {
            margin-left: @relative-tight;
        }
    }

    &-disclose {
        .@{bannerItem-class}-actions {
            margin-top: @relative-base;
        }
    }

    &-text {
        display: inline-block;
        .flex(1);

        > strong {
            margin-right: @relative-tight;
        }
    }

    &-actions {
        .flex-display();
        .justify-content(flex-end);

        > :first-child {
            margin-right: @relative-tight;
        }

        > :last-child {
            margin-right: 0;
        }
    }

    &-toggleDetails {
        cursor: pointer;
        text-decoration: underline;
        white-space: nowrap;
        margin-left: @relative-tight;
    }

    &-moreDetailsText {
        margin-top: @relative-base;
    }

    &-icon {
        margin-right: 0.5rem;
        height: 1.3333rem;
        width: 1.3333rem;
        .flex-shrink(0);
    }

    // States
    &.is-showing-more {
        .@{bannerItem-class}-moreDetailsText {
            display: inline-block;
        }
    }
}

/*
 * For the "DEFAULT" display mode.
 */
.@{bannerItem-class}--default {
    // On smaller screens, we want to hide the "inline" actions
    // and use the "lower" actions in the disclose area.
    .@{bannerItem-class}-main > .@{bannerItem-class}-actions {
        .screen-md-down({
            display: none;
        });
    }

    .@{bannerItem-class}-toggle {
        transform: rotate(-180deg);
        transition: transform 150ms;

        &.is-expanded {
            transform: rotate(0);
        }

        .screen-md-up({
            display: none;
        });
    }

    .@{bannerItem-class}-text {
        .screen-md-down({
            .text-truncate();

            &.no-truncation {
                white-space: normal;
                overflow: auto;
            }
        });
    }

    .@{bannerItem-class}-moreDetailsText {
        display: none;
    }

    .@{bannerItem-class}-disclose {
        // On larger screens we want to hide the
        // "lower" actions and instead use the "inline" actions
        .@{bannerItem-class}-actions {
            display: none;
        }

        .screen-md-down({
            display: none;

            .@{bannerItem-class}-actions {
                .flex-display();
            }
        });
    }

    .@{bannerItem-class}-toggleDetails {
        .screen-md-down({
            display: none;
        });
    }

    // State
    // Note, the is-expanded state is only relevant for "DEFAULT"
    // display modes AND below the MD breakpoint.
    &.is-expanded {
        .screen-md-down({
            // We have to specifically show this element inside the disclose
            // area because it is also being controlled by the is-showing-more
            // state.
            .@{bannerItem-class}-moreDetailsText {
                display: inline-block;
            }

            // Reset text overflow in expanded mode so we no longer
            // get ellipsis
            .@{bannerItem-class}-text {
                white-space: normal;
                overflow: auto;
            }

            .@{bannerItem-class}-disclose {
                display: block;
            }
        });
    }
}

.@{bannerItem-class}--detail {
    .@{bannerItem-class}-main > .@{bannerItem-class}-actions {
        display: none;
    }

    .@{bannerItem-class}-toggleDetails {
        display: none;
    }

    // Expand / collapse does not display in DETAIL mode
    .@{bannerItem-class}-toggle {
        display: none;
    }
}

.@{bannerItem-class}--compact {
    .@{bannerItem-class}-main > .@{bannerItem-class}-actions {
        display: none;
    }

    .@{bannerItem-class}-moreDetailsText {
        display: none;
    }

    // Expand / collapse does not display in COMPACT mode
    .@{bannerItem-class}-toggle {
        display: none;
    }
}

/*
 * Severity specific classes
 */
.severity-style-gen(@lightShade; @darkShade;) {
    background-color: @lightShade;
    box-shadow: 2px 0 0 @darkShade inset;

    .@{bannerItem-class}-icon {
        color: @darkShade;
    }
}

.@{bannerItem-class}--alert, .@{bannerItem-class}--error {
    .severity-style-gen(@negative-bg-30; @clinical-critical;);
}

.@{bannerItem-class}--warning {
    .severity-style-gen(#FFF3CE; #FFC20A;)
}

.@{bannerItem-class}--info {
    .severity-style-gen(@medium-bg-40; @accent-fg-30;)
}

.@{bannerItem-class}--gapChecking {
    .severity-style-gen(@medium-bg-40; @negative-fg-10;)
}

.@{bannerItem-class}--outsideRecords {
    .severity-style-gen(@medium-bg-40; @clinical-unverified;)
}

.@{bannerItem-class}--success {
    .severity-style-gen(@medium-bg-40; @green60;)
}

/* stylelint-enable value-keyword-case */
