@flex-grid-columns:                                     12;
@flex-grid-unit:                                        (100 / @flex-grid-columns);
@flex-grid-pad-small:                                   @absolute-very-tight;
@flex-grid-pad-medium:                                  @absolute-tight;
@flex-grid-pad-large:                                   @absolute-base;

.calculateFlexBasis(@columns: 0) {
    @flexBasisUnit: (@flex-grid-unit * @columns);
    @flexBasis: ~"@{flexBasisUnit}%";
    .flex(0 0 @flexBasis);
    max-width: @flexBasis;          // Force IE to obey the laws of Flex!
}

.calculateOffset(@columns: 0) {
    @marginOffsetUnit: (@flex-grid-unit * @columns);
    @marginOffset: ~"@{marginOffsetUnit}%";
    margin-left: @marginOffset;
}

.calculateFlexColumns() {
    &-1 { .calculateFlexBasis(1); }
    &-2 { .calculateFlexBasis(2); }
    &-3 { .calculateFlexBasis(3); }
    &-4 { .calculateFlexBasis(4); }
    &-5 { .calculateFlexBasis(5); }
    &-6 { .calculateFlexBasis(6); }
    &-7 { .calculateFlexBasis(7); }
    &-8 { .calculateFlexBasis(8); }
    &-9 { .calculateFlexBasis(9); }
    &-10 { .calculateFlexBasis(10); }
    &-11 { .calculateFlexBasis(11); }
    &-12 { .calculateFlexBasis(12); }
}

.calculateFlexOffset() {
    &-1 { .calculateOffset(1) }
    &-2 { .calculateOffset(2) }
    &-3 { .calculateOffset(3) }
    &-4 { .calculateOffset(4) }
    &-5 { .calculateOffset(5) }
    &-6 { .calculateOffset(6) }
    &-7 { .calculateOffset(7) }
    &-8 { .calculateOffset(8) }
    &-9 { .calculateOffset(9) }
    &-10 { .calculateOffset(10) }
    &-11 { .calculateOffset(11) }
    &-12 { .calculateOffset(12) }
}

//------------------------------------------------------------------------------
// Row
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-row {
    .flex-display(flex);
    .flex-direction(row);
    .flex-wrap(wrap);
    .flex(0 1 auto);
}

//------------------------------------------------------------------------------
// Row -> Align Items
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-row--align {
    &-top {
        .align-items(flex-start);
        &-sm {
            .screen-sm-up({
                .align-items(flex-start);
            });
        }
        &-md {
            .screen-md-up({
                .align-items(flex-start);
            });
        }
        &-lg {
            .screen-lg-up({
                .align-items(flex-start);
            });
        }
    }
    &-middle {
        .align-items(center);
        &-sm {
            .screen-sm-up({
                .align-items(center);
            });
        }
        &-md {
            .screen-md-up({
                .align-items(center);
            });
        }
        &-lg {
            .screen-lg-up({
                .align-items(center);
            });
        }
    }
    &-bottom {
        .align-items(flex-end);
        &-sm {
            .screen-sm-up({
                .align-items(flex-end);
            });
        }
        &-md {
            .screen-md-up({
                .align-items(flex-end);
            });
        }
        &-lg {
            .screen-lg-up({
                .align-items(flex-end);
            });
        }
    }
}

//------------------------------------------------------------------------------
// Row -> Justify
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-row--justify {
    &-start {
        .justify-content(flex-start);

        &-sm {
            .screen-sm-up({
                .justify-content(flex-start);
            });
        }
        &-md {
            .screen-md-up({
                .justify-content(flex-start);
            });
        }
        &-lg {
            .screen-lg-up({
                .justify-content(flex-start);
            });
        }
    }
    &-center {
        .justify-content(center);

        &-sm {
            .screen-sm-up({
                .justify-content(center);
            });
        }
        &-md {
            .screen-md-up({
                .justify-content(center);
            });
        }
        &-lg {
            .screen-lg-up({
                .justify-content(center);
            });
        }
    }
    &-end {
        .justify-content(flex-end);

        &-sm {
            .screen-sm-up({
                .justify-content(flex-end);
            });
        }
        &-md {
            .screen-md-up({
                .justify-content(flex-end);
            });
        }
        &-lg {
            .screen-lg-up({
                .justify-content(flex-end);
            });
        }
    }
    &-between {
        .justify-content(space-between);

        &-sm {
            .screen-sm-up({
                .justify-content(space-between);
            });
        }
        &-md {
            .screen-md-up({
                .justify-content(space-between);
            });
        }
        &-lg {
            .screen-lg-up({
                .justify-content(space-between);
            });
        }
    }
}

//------------------------------------------------------------------------------
// Columns Flex Sizes
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-col {
    .flex(1);
    padding: @flex-grid-pad-small;
}

/* stylelint-disable selector-attribute-operator-blacklist */
[class*="mpageui-u-flexgrid-col"] {
    padding: @flex-grid-pad-small;
}
/* stylelint-enable selector-attribute-operator-blacklist */

.mpageui-u-flexgrid-col {
    .calculateFlexColumns();
}

.mpageui-u-flexgrid-col-sm {
    .screen-sm-up({
        .calculateFlexColumns();
    })
}

.mpageui-u-flexgrid-col-md {
    .screen-md-up({
        .calculateFlexColumns();
    });
}

.mpageui-u-flexgrid-col-lg {
    .screen-lg-up({
        .calculateFlexColumns();
    });
}

//------------------------------------------------------------------------------
// Columns Offset
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-col--offset {
    .calculateFlexOffset();
}

.mpageui-u-flexgrid-col--offset-sm {
    .screen-sm-up({
        .calculateFlexOffset();
    });
}

.mpageui-u-flexgrid-col--offset-md {
    .screen-md-up({
        .calculateFlexOffset();
    });
}

.mpageui-u-flexgrid-col--offset-lg {
    .screen-lg-up({
        .calculateFlexOffset();
    });
}

//------------------------------------------------------------------------------
// Misc Modifiers
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-row--distribute {
    .justify-content(space-between);
}

//------------------------------------------------------------------------------
// Padding
//------------------------------------------------------------------------------
.mpageui-u-flexgrid-col--pad-very-tight {
    padding: @flex-grid-pad-small;
}

.mpageui-u-flexgrid-col--pad-tight {
    padding: @flex-grid-pad-medium;
}

.mpageui-u-flexgrid-col--pad-base {
    padding: @flex-grid-pad-large;
}

.mpageui-u-flexgrid-col--pad-none {
    padding: 0;
}
