"use strict";

const baseConfig = (type, version = "DEV") => ({
    loader: "babel-loader",
    options: {
        presets: [
            ["env", { "modules": false }],
            ["babili"]
        ],
        plugins: [
            ["transform-es2015-classes", { loose: true }],
            ["transform-runtime", {
                "helpers": true,
                "polyfill": type === "DIST",
                "regenerator": type === "DIST",
                "moduleName": "babel-runtime"
            }],
            ["babel-plugin-minify-replace", {
                "replacements": [
                    {
                        "identifierName": "VERSION",
                        "replacement": {
                            type: "StringLiteral",
                            value: version
                        }
                    },
                    {
                        "identifierName": "__DEV__",
                        "replacement": {
                            type: "booleanLiteral",
                            value: type === "DEV"
                        }
                    }
                ]
            }]
        ]
    }
});

module.exports = {
    baseConfig
};
