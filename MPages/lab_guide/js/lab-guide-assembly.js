/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left");
}catch(a){setTimeout(ma,1);
return;
}c.ready();
}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");
b.parentNode&&b.parentNode.removeChild(b);
}function X(a,b,d,f,e,j){var i=a.length;
if(typeof b==="object"){for(var o in b){X(a,o,b[o],f,e,d);
}return a;
}if(d!==w){f=!j&&f&&c.isFunction(d);
for(o=0;
o<i;
o++){e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);
}return a;
}return i?e(a[0],b):w;
}function J(){return(new Date).getTime();
}function Y(){return false;
}function Z(){return true;
}function na(a,b,d){d[0].type=a;
return c.event.handle.apply(b,d);
}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;
i=c.data(this,"events");
if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;
var u=i.live.slice(0);
for(k=0;
k<u.length;
k++){i=u[k];
i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1);
}j=c(a.target).closest(f,a.currentTarget);
n=0;
for(r=j.length;
n<r;
n++){for(k=0;
k<u.length;
k++){i=u[k];
if(j[n].selector===i.selector){o=j[n].elem;
f=null;
if(i.preType==="mouseenter"||i.preType==="mouseleave"){f=c(a.relatedTarget).closest(i.selector)[0];
}if(!f||f!==o){d.push({elem:o,handleObj:i});
}}}}n=0;
for(r=d.length;
n<r;
n++){j=d[n];
a.currentTarget=j.elem;
a.data=j.handleObj.data;
a.handleObj=j.handleObj;
if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;
break;
}}return b;
}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,"&");
}function qa(a){return !a||!a.parentNode||a.parentNode.nodeType===11;
}function ra(a,b){var d=0;
b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);
if(f=f&&f.events){delete e.handle;
e.events={};
for(var j in f){for(var i in f[j]){c.event.add(this,j,f[j][i],f[j][i].data);
}}}}});
}function sa(a,b,d){var f,e,j;
b=b&&b[0]?b[0].ownerDocument||b[0]:s;
if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=true;
if(j=c.fragments[a[0]]){if(j!==1){f=j;
}}}if(!f){f=b.createDocumentFragment();
c.clean(a,b,f,d);
}if(e){c.fragments[a[0]]=j?f:1;
}return{fragment:f,cacheable:e};
}function K(a,b){var d={};
c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a;
});
return d;
}function wa(a){return"scrollTo" in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false;
}var c=function(a,b){return new c.fn.init(a,b);
},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;
c.fn=c.prototype={init:function(a,b){var d,f;
if(!a){return this;
}if(a.nodeType){this.context=this[0]=a;
this.length=1;
return this;
}if(a==="body"&&!b){this.context=s;
this[0]=s.body;
this.selector="body";
this.length=1;
return this;
}if(typeof a==="string"){if((d=Ta.exec(a))&&(d[1]||!b)){if(d[1]){f=b?b.ownerDocument||b:s;
if(a=Xa.exec(a)){if(c.isPlainObject(b)){a=[s.createElement(a[1])];
c.fn.attr.call(a,b,true);
}else{a=[f.createElement(a[1])];
}}else{a=sa([d[1]],[f]);
a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes;
}return c.merge(this,a);
}else{if(b=s.getElementById(d[2])){if(b.id!==d[2]){return T.find(a);
}this.length=1;
this[0]=b;
}this.context=s;
this.selector=a;
return this;
}}else{if(!b&&/^\w+$/.test(a)){this.selector=a;
this.context=s;
a=s.getElementsByTagName(a);
return c.merge(this,a);
}else{return !b||b.jquery?(b||T).find(a):c(b).find(a);
}}}else{if(c.isFunction(a)){return T.ready(a);
}}if(a.selector!==w){this.selector=a.selector;
this.context=a.context;
}return c.makeArray(a,this);
},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length;
},toArray:function(){return R.call(this,0);
},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a];
},pushStack:function(a,b,d){var f=c();
c.isArray(a)?ba.apply(f,a):c.merge(f,a);
f.prevObject=this;
f.context=this.context;
if(b==="find"){f.selector=this.selector+(this.selector?" ":"")+d;
}else{if(b){f.selector=this.selector+"."+b+"("+d+")";
}}return f;
},each:function(a,b){return c.each(this,a,b);
},ready:function(a){c.bindReady();
if(c.isReady){a.call(s,c);
}else{Q&&Q.push(a);
}return this;
},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1);
},first:function(){return this.eq(0);
},last:function(){return this.eq(-1);
},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","));
},map:function(a){return this.pushStack(c.map(this,function(b,d){return a.call(b,d,b);
}));
},end:function(){return this.prevObject||c(null);
},push:ba,sort:[].sort,splice:[].splice};
c.fn.init.prototype=c.fn;
c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;
if(typeof a==="boolean"){f=a;
a=arguments[1]||{};
b=2;
}if(typeof a!=="object"&&!c.isFunction(a)){a={};
}if(d===b){a=this;
--b;
}for(;
b<d;
b++){if((e=arguments[b])!=null){for(j in e){i=a[j];
o=e[j];
if(a!==o){if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||c.isArray(i))?i:c.isArray(o)?[]:{};
a[j]=c.extend(f,i,o);
}else{if(o!==w){a[j]=o;
}}}}}}return a;
};
c.extend({noConflict:function(a){A.$=Sa;
if(a){A.jQuery=Ra;
}return c;
},isReady:false,ready:function(){if(!c.isReady){if(!s.body){return setTimeout(c.ready,13);
}c.isReady=true;
if(Q){for(var a,b=0;
a=Q[b++];
){a.call(s,c);
}Q=null;
}c.fn.triggerHandler&&c(s).triggerHandler("ready");
}},bindReady:function(){if(!xa){xa=true;
if(s.readyState==="complete"){return c.ready();
}if(s.addEventListener){s.addEventListener("DOMContentLoaded",L,false);
A.addEventListener("load",c.ready,false);
}else{if(s.attachEvent){s.attachEvent("onreadystatechange",L);
A.attachEvent("onload",c.ready);
var a=false;
try{a=A.frameElement==null;
}catch(b){}s.documentElement.doScroll&&a&&ma();
}}}},isFunction:function(a){return $.call(a)==="[object Function]";
},isArray:function(a){return $.call(a)==="[object Array]";
},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval){return false;
}if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,"isPrototypeOf")){return false;
}var b;
for(b in a){}return b===w||aa.call(a,b);
},isEmptyObject:function(a){for(var b in a){return false;
}return true;
},error:function(a){throw a;
},parseJSON:function(a){if(typeof a!=="string"||!a){return null;
}a=c.trim(a);
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+a))();
}else{c.error("Invalid JSON: "+a);
}},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");
d.type="text/javascript";
if(c.support.scriptEval){d.appendChild(s.createTextNode(a));
}else{d.text=a;
}b.insertBefore(d,b.firstChild);
b.removeChild(d);
}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase();
},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);
if(d){if(i){for(f in a){if(b.apply(a[f],d)===false){break;
}}}else{for(;
e<j;
){if(b.apply(a[e++],d)===false){break;
}}}}else{if(i){for(f in a){if(b.call(a[f],f,a[f])===false){break;
}}}else{for(d=a[0];
e<j&&b.call(d,e,d)!==false;
d=a[++e]){}}}return a;
},trim:function(a){return(a||"").replace(Wa,"");
},makeArray:function(a,b){b=b||[];
if(a!=null){a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);
}return b;
},inArray:function(a,b){if(b.indexOf){return b.indexOf(a);
}for(var d=0,f=b.length;
d<f;
d++){if(b[d]===a){return d;
}}return -1;
},merge:function(a,b){var d=a.length,f=0;
if(typeof b.length==="number"){for(var e=b.length;
f<e;
f++){a[d++]=b[f];
}}else{for(;
b[f]!==w;
){a[d++]=b[f++];
}}a.length=d;
return a;
},grep:function(a,b,d){for(var f=[],e=0,j=a.length;
e<j;
e++){!d!==!b(a[e],e)&&f.push(a[e]);
}return f;
},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;
j<i;
j++){e=b(a[j],j,d);
if(e!=null){f[f.length]=e;
}}return f.concat.apply([],f);
},guid:1,proxy:function(a,b,d){if(arguments.length===2){if(typeof b==="string"){d=a;
a=d[b];
b=w;
}else{if(b&&!c.isFunction(b)){d=b;
b=w;
}}}if(!b&&a){b=function(){return a.apply(d||this,arguments);
};
}if(a){b.guid=a.guid=a.guid||b.guid||c.guid++;
}return b;
},uaMatch:function(a){a=a.toLowerCase();
a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];
return{browser:a[1]||"",version:a[2]||"0"};
},browser:{}});
P=c.uaMatch(P);
if(P.browser){c.browser[P.browser]=true;
c.browser.version=P.version;
}if(c.browser.webkit){c.browser.safari=true;
}if(ya){c.inArray=function(a,b){return ya.call(b,a);
};
}T=c(s);
if(s.addEventListener){L=function(){s.removeEventListener("DOMContentLoaded",L,false);
c.ready();
};
}else{if(s.attachEvent){L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);
c.ready();
}};
}}(function(){c.support={};
var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();
d.style.display="none";
d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];
if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};
b.type="text/javascript";
try{b.appendChild(s.createTextNode("window."+f+"=1;"));
}catch(i){}a.insertBefore(b,a.firstChild);
if(A[f]){c.support.scriptEval=true;
delete A[f];
}try{delete b.test;
}catch(o){c.support.deleteExpando=false;
}a.removeChild(b);
if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=false;
d.detachEvent("onclick",k);
});
d.cloneNode(true).fireEvent("onclick");
}d=s.createElement("div");
d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";
a=s.createDocumentFragment();
a.appendChild(d.firstChild);
c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;
c(function(){var k=s.createElement("div");
k.style.width=k.style.paddingLeft="1px";
s.body.appendChild(k);
c.boxModel=c.support.boxModel=k.offsetWidth===2;
s.body.removeChild(k).style.display="none";
});
a=function(k){var n=s.createElement("div");
k="on"+k;
var r=k in n;
if(!r){n.setAttribute(k,"return;");
r=typeof n[k]==="function";
}return r;
};
c.support.submitBubbles=a("submit");
c.support.changeBubbles=a("change");
a=b=d=e=j=null;
}})();
c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};
var G="jQuery"+J(),Ya=0,za={};
c.extend({cache:{},expando:G,noData:{embed:true,object:true,applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var f=a[G],e=c.cache;
if(!f&&typeof b==="string"&&d===w){return null;
}f||(f=++Ya);
if(typeof b==="object"){a[G]=f;
e[f]=c.extend(true,{},b);
}else{if(!e[f]){a[G]=f;
e[f]={};
}}a=e[f];
if(d!==w){a[b]=d;
}return typeof b==="string"?a[b]:a;
}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var d=a[G],f=c.cache,e=f[d];
if(b){if(e){delete e[b];
c.isEmptyObject(e)&&c.removeData(a);
}}else{if(c.support.deleteExpando){delete a[c.expando];
}else{a.removeAttribute&&a.removeAttribute(c.expando);
}delete f[d];
}}}});
c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length){return c.data(this[0]);
}else{if(typeof a==="object"){return this.each(function(){c.data(this,a);
});
}}var d=a.split(".");
d[1]=d[1]?"."+d[1]:"";
if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);
if(f===w&&this.length){f=c.data(this[0],a);
}return f===w&&d[1]?this.data(d[0]):f;
}else{return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,a,b);
});
}},removeData:function(a){return this.each(function(){c.removeData(this,a);
});
}});
c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";
var f=c.data(a,b);
if(!d){return f||[];
}if(!f||c.isArray(d)){f=c.data(a,b,c.makeArray(d));
}else{f.push(d);
}return f;
}},dequeue:function(a,b){b=b||"fx";
var d=c.queue(a,b),f=d.shift();
if(f==="inprogress"){f=d.shift();
}if(f){b==="fx"&&d.unshift("inprogress");
f.call(a,function(){c.dequeue(a,b);
});
}}});
c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;
a="fx";
}if(b===w){return c.queue(this[0],a);
}return this.each(function(){var d=c.queue(this,a,b);
a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a);
});
},dequeue:function(a){return this.each(function(){c.dequeue(this,a);
});
},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;
b=b||"fx";
return this.queue(b,function(){var d=this;
setTimeout(function(){c.dequeue(d,b);
},a);
});
},clearQueue:function(a){return this.queue(a||"fx",[]);
}});
var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,cb=/^(a|area)$/i,Ba=/radio|checkbox/;
c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr);
},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");
this.nodeType===1&&this.removeAttribute(a);
});
},addClass:function(a){if(c.isFunction(a)){return this.each(function(n){var r=c(this);
r.addClass(a.call(this,n,r.attr("class")));
});
}if(a&&typeof a==="string"){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1){if(e.className){for(var j=" "+e.className+" ",i=e.className,o=0,k=b.length;
o<k;
o++){if(j.indexOf(" "+b[o]+" ")<0){i+=" "+b[o];
}}e.className=c.trim(i);
}else{e.className=a;
}}}}return this;
},removeClass:function(a){if(c.isFunction(a)){return this.each(function(k){var n=c(this);
n.removeClass(a.call(this,k,n.attr("class")));
});
}if(a&&typeof a==="string"||a===w){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1&&e.className){if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;
i<o;
i++){j=j.replace(" "+b[i]+" "," ");
}e.className=c.trim(j);
}else{e.className="";
}}}}return this;
},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";
if(c.isFunction(a)){return this.each(function(e){var j=c(this);
j.toggleClass(a.call(this,e,j.attr("class"),b),b);
});
}return this.each(function(){if(d==="string"){for(var e,j=0,i=c(this),o=b,k=a.split(ca);
e=k[j++];
){o=f?o:!i.hasClass(e);
i[o?"addClass":"removeClass"](e);
}}else{if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);
this.className=this.className||a===false?"":c.data(this,"__className__")||"";
}}});
},hasClass:function(a){a=" "+a+" ";
for(var b=0,d=this.length;
b<d;
b++){if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1){return true;
}}return false;
},val:function(a){if(a===w){var b=this[0];
if(b){if(c.nodeName(b,"option")){return(b.attributes.value||{}).specified?b.value:b.text;
}if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;
b=b.type==="select-one";
if(d<0){return null;
}var j=b?d:0;
for(d=b?d+1:e.length;
j<d;
j++){var i=e[j];
if(i.selected){a=c(i).val();
if(b){return a;
}f.push(a);
}}return f;
}if(Ba.test(b.type)&&!c.support.checkOn){return b.getAttribute("value")===null?"on":b.value;
}return(b.value||"").replace(Za,"");
}return w;
}var o=c.isFunction(a);
return this.each(function(k){var n=c(this),r=a;
if(this.nodeType===1){if(o){r=a.call(this,k,n.val());
}if(typeof r==="number"){r+="";
}if(c.isArray(r)&&Ba.test(this.type)){this.checked=c.inArray(n.val(),r)>=0;
}else{if(c.nodeName(this,"select")){var u=c.makeArray(r);
c("option",this).each(function(){this.selected=c.inArray(c(this).val(),u)>=0;
});
if(!u.length){this.selectedIndex=-1;
}}else{this.value=r;
}}}});
}});
c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if(f&&b in c.attrFn){return c(a)[b](d);
}f=a.nodeType!==1||!c.isXMLDoc(a);
var e=d!==w;
b=f&&c.props[b]||b;
if(a.nodeType===1){var j=$a.test(b);
if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d;
}if(c.nodeName(a,"form")&&a.getAttributeNode(b)){return a.getAttributeNode(b).nodeValue;
}if(b==="tabIndex"){return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;
}return a[b];
}if(!c.support.style&&f&&b==="style"){if(e){a.style.cssText=""+d;
}return a.style.cssText;
}e&&a.setAttribute(b,""+d);
a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);
return a===null?w:a;
}return c.style(a,b,d);
}});
var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,function(b){return"\\"+b;
});
};
c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement){a=A;
}var e,j;
if(d.handler){e=d;
d=e.handler;
}if(!d.guid){d.guid=c.guid++;
}if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;
if(!o){j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w;
};
}o.elem=a;
b=b.split(" ");
for(var k,n=0,r;
k=b[n++];
){j=e?c.extend({},e):{handler:d,data:f};
if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();
j.namespace=r.slice(0).sort().join(".");
}else{r=[];
j.namespace="";
}j.type=k;
j.guid=d.guid;
var u=i[k],z=c.event.special[k]||{};
if(!u){u=i[k]=[];
if(!z.setup||z.setup.call(a,f,r,o)===false){if(a.addEventListener){a.addEventListener(k,o,false);
}else{a.attachEvent&&a.attachEvent("on"+k,o);
}}}if(z.add){z.add.call(a,j);
if(!j.handler.guid){j.handler.guid=d.guid;
}}u.push(j);
c.event.global[k]=true;
}a=null;
}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),C=z&&z.events;
if(z&&C){if(b&&b.type){d=b.handler;
b=b.type;
}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";
for(e in C){c.event.remove(a,e+b);
}}else{for(b=b.split(" ");
e=b[j++];
){n=e;
i=e.indexOf(".")<0;
o=[];
if(!i){o=e.split(".");
e=o.shift();
k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)");
}if(r=C[e]){if(d){n=c.event.special[e]||{};
for(B=f||0;
B<r.length;
B++){u=r[B];
if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);
n.remove&&n.remove.call(a,u);
}if(f!=null){break;
}}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false){Ca(a,e,z.handle);
}delete C[e];
}}else{for(var B=0;
B<r.length;
B++){u=r[B];
if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);
r.splice(B--,1);
}}}}}if(c.isEmptyObject(C)){if(b=z.handle){b.elem=null;
}delete z.events;
delete z.handle;
c.isEmptyObject(z)&&c.removeData(a);
}}}}},trigger:function(a,b,d,f){var e=a.type||a;
if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);
if(e.indexOf("!")>=0){a.type=e=e.slice(0,-1);
a.exclusive=true;
}if(!d){a.stopPropagation();
c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem);
});
}if(!d||d.nodeType===3||d.nodeType===8){return w;
}a.result=w;
a.target=d;
b=c.makeArray(b);
b.unshift(a);
}a.currentTarget=d;
(f=c.data(d,"handle"))&&f.apply(d,b);
f=d.parentNode||d.ownerDocument;
try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()])){if(d["on"+e]&&d["on"+e].apply(d,b)===false){a.result=false;
}}}catch(j){}if(!a.isPropagationStopped()&&f){c.event.trigger(a,b,f,true);
}else{if(!a.isDefaultPrevented()){f=a.target;
var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};
if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e]){f["on"+e]=null;
}c.event.triggered=true;
f[e]();
}}catch(n){}if(i){f["on"+e]=i;
}c.event.triggered=false;
}}}},handle:function(a){var b,d,f,e;
a=arguments[0]=c.event.fix(a||A.event);
a.currentTarget=this;
b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");
a.type=d.shift();
f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");
}e=c.data(this,"events");
d=e[a.type];
if(e&&d){d=d.slice(0);
e=0;
for(var j=d.length;
e<j;
e++){var i=d[e];
if(b||f.test(i.namespace)){a.handler=i.handler;
a.data=i.data;
a.handleObj=i;
i=i.handler.apply(this,arguments);
if(i!==w){a.result=i;
if(i===false){a.preventDefault();
a.stopPropagation();
}}if(a.isImmediatePropagationStopped()){break;
}}}}return a.result;
},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[G]){return a;
}var b=a;
a=c.Event(b);
for(var d=this.props.length,f;
d;
){f=this.props[--d];
a[f]=b[f];
}if(!a.target){a.target=a.srcElement||s;
}if(a.target.nodeType===3){a.target=a.target.parentNode;
}if(!a.relatedTarget&&a.fromElement){a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;
}if(a.pageX==null&&a.clientX!=null){b=s.documentElement;
d=s.body;
a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);
a.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0);
}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode)){a.which=a.charCode||a.keyCode;
}if(!a.metaKey&&a.ctrlKey){a.metaKey=a.ctrlKey;
}if(!a.which&&a.button!==w){a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;
}return a;
},guid:100000000,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}));
},remove:function(a){var b=true,d=a.origType.replace(O,"");
c.each(c.data(this,"events").live||[],function(){if(d===this.origType.replace(O,"")){return b=false;
}});
b&&c.event.remove(this,a.origType,oa);
}},beforeunload:{setup:function(a,b,d){if(this.setInterval){this.onbeforeunload=d;
}return false;
},teardown:function(a,b){if(this.onbeforeunload===b){this.onbeforeunload=null;
}}}}};
var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false);
}:function(a,b,d){a.detachEvent("on"+b,d);
};
c.Event=function(a){if(!this.preventDefault){return new c.Event(a);
}if(a&&a.type){this.originalEvent=a;
this.type=a.type;
}else{this.type=a;
}this.timeStamp=J();
this[G]=true;
};
c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;
var a=this.originalEvent;
if(a){a.preventDefault&&a.preventDefault();
a.returnValue=false;
}},stopPropagation:function(){this.isPropagationStopped=Z;
var a=this.originalEvent;
if(a){a.stopPropagation&&a.stopPropagation();
a.cancelBubble=true;
}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;
this.stopPropagation();
},isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y};
var Da=function(a){var b=a.relatedTarget;
try{for(;
b&&b!==this;
){b=b.parentNode;
}if(b!==this){a.type=a.data;
c.event.handle.apply(this,arguments);
}}catch(d){}},Ea=function(a){a.type=a.data;
c.event.handle.apply(this,arguments);
};
c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a);
},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da);
}};
});
if(!c.support.submitBubbles){c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="submit"||d==="image")&&c(b).closest("form").length){return na("submit",this,arguments);
}});
c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13){return na("submit",this,arguments);
}});
}else{return false;
}},teardown:function(){c.event.remove(this,".specialSubmit");
}};
}if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;
if(b==="radio"||b==="checkbox"){d=a.checked;
}else{if(b==="select-multiple"){d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected;
}).join("-"):"";
}else{if(a.nodeName.toLowerCase()==="select"){d=a.selectedIndex;
}}}return d;
},fa=function(a,b){var d=a.target,f,e;
if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");
e=Fa(d);
if(a.type!=="focusout"||d.type!=="radio"){c.data(d,"_change_data",e);
}if(!(f===w||e===f)){if(f!=null||e){a.type="change";
return c.event.trigger(a,b,d);
}}}};
c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;
if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select"){return fa.call(this,a);
}},keydown:function(a){var b=a.target,d=b.type;
if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple"){return fa.call(this,a);
}},beforeactivate:function(a){a=a.target;
c.data(a,"_change_data",Fa(a));
}},setup:function(){if(this.type==="file"){return false;
}for(var a in ea){c.event.add(this,a+".specialChange",ea[a]);
}return da.test(this.nodeName);
},teardown:function(){c.event.remove(this,".specialChange");
return da.test(this.nodeName);
}};
ea=c.event.special.change.filters;
}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);
f.type=b;
return c.event.handle.call(this,f);
}c.event.special[b]={setup:function(){this.addEventListener(a,d,true);
},teardown:function(){this.removeEventListener(a,d,true);
}};
});
c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d){this[b](j,f,d[j],e);
}return this;
}if(c.isFunction(f)){e=f;
f=w;
}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);
return e.apply(this,arguments);
}):e;
if(d==="unload"&&b!=="one"){this.one(d,f,e);
}else{j=0;
for(var o=this.length;
j<o;
j++){c.event.add(this[j],d,i,f);
}}return this;
};
});
c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault){for(var d in a){this.unbind(d,a[d]);
}}else{d=0;
for(var f=this.length;
d<f;
d++){c.event.remove(this[d],a,b);
}}return this;
},delegate:function(a,b,d,f){return this.live(b,d,f,a);
},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a);
},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this);
});
},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);
a.preventDefault();
a.stopPropagation();
c.event.trigger(a,b,this[0]);
return a.result;
}},toggle:function(a){for(var b=arguments,d=1;
d<b.length;
){c.proxy(a,b[d++]);
}return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;
c.data(this,"lastToggle"+a.guid,e+1);
f.preventDefault();
return b[e].apply(this,arguments)||false;
}));
},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);
}});
var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,u=j?this:c(this.context);
if(c.isFunction(f)){e=f;
f=w;
}for(d=(d||"").split(" ");
(i=d[o++])!=null;
){j=O.exec(i);
k="";
if(j){k=j[0];
i=i.replace(O,"");
}if(i==="hover"){d.push("mouseenter"+k,"mouseleave"+k);
}else{n=i;
if(i==="focus"||i==="blur"){d.push(Ga[i]+k);
i+=k;
}else{i=(Ga[i]||i)+k;
}b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n});
}):u.unbind(pa(i,r),e);
}}return this;
};
});
c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b);
};
if(c.attrFn){c.attrFn[b]=true;
}});
A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache){if(c.cache[a].handle){try{c.event.remove(c.cache[a].handle.elem);
}catch(b){}}}});
(function(){function a(g){for(var h="",l,m=0;
g[m];
m++){l=g[m];
if(l.nodeType===3||l.nodeType===4){h+=l.nodeValue;
}else{if(l.nodeType!==8){h+=a(l.childNodes);
}}}return h;
}function b(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1&&!p){t.sizcache=l;
t.sizset=q;
}if(t.nodeName.toLowerCase()===h){y=t;
break;
}t=t[g];
}m[q]=y;
}}}function d(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1){if(!p){t.sizcache=l;
t.sizset=q;
}if(typeof h!=="string"){if(t===h){y=true;
break;
}}else{if(k.filter(h,[t]).length>0){y=t;
break;
}}}t=t[g];
}m[q]=y;
}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,j=Object.prototype.toString,i=false,o=true;
[0,0].sort(function(){o=false;
return 0;
});
var k=function(g,h,l,m){l=l||[];
var q=h=h||s;
if(h.nodeType!==1&&h.nodeType!==9){return[];
}if(!g||typeof g!=="string"){return l;
}for(var p=[],v,t,y,S,H=true,M=x(h),I=g;
(f.exec(""),v=f.exec(I))!==null;
){I=v[3];
p.push(v[1]);
if(v[2]){S=v[3];
break;
}}if(p.length>1&&r.exec(g)){if(p.length===2&&n.relative[p[0]]){t=ga(p[0]+p[1],h);
}else{for(t=n.relative[p[0]]?[h]:k(p.shift(),h);
p.length;
){g=p.shift();
if(n.relative[g]){g+=p.shift();
}t=ga(g,t);
}}}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);
h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0];
}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);
t=v.expr?k.filter(v.expr,v.set):v.set;
if(p.length>0){y=z(t);
}else{H=false;
}for(;
p.length;
){var D=p.pop();
v=D;
if(n.relative[D]){v=p.pop();
}else{D="";
}if(v==null){v=h;
}n.relative[D](y,v,M);
}}else{y=[];
}}y||(y=t);
y||k.error(D||g);
if(j.call(y)==="[object Array]"){if(H){if(h&&h.nodeType===1){for(g=0;
y[g]!=null;
g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g]))){l.push(t[g]);
}}}else{for(g=0;
y[g]!=null;
g++){y[g]&&y[g].nodeType===1&&l.push(t[g]);
}}}else{l.push.apply(l,y);
}}else{z(y,l);
}if(S){k(S,q,l,m);
k.uniqueSort(l);
}return l;
};
k.uniqueSort=function(g){if(B){i=o;
g.sort(B);
if(i){for(var h=1;
h<g.length;
h++){g[h]===g[h-1]&&g.splice(h--,1);
}}}return g;
};
k.matches=function(g,h){return k(g,null,null,h);
};
k.find=function(g,h,l){var m,q;
if(!g){return[];
}for(var p=0,v=n.order.length;
p<v;
p++){var t=n.order[p];
if(q=n.leftMatch[t].exec(g)){var y=q[1];
q.splice(1,1);
if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");
m=n.find[t](q,h,l);
if(m!=null){g=g.replace(n.match[t],"");
break;
}}}}m||(m=h.getElementsByTagName("*"));
return{set:m,expr:g};
};
k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);
g&&h.length;
){for(var H in n.filter){if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;
D=t[1];
y=false;
t.splice(1,1);
if(D.substr(D.length-1)!=="\\"){if(v===p){p=[];
}if(n.preFilter[H]){if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true){continue;
}}else{y=I=true;
}}if(t){for(var U=0;
(D=v[U])!=null;
U++){if(D){I=M(D,t,U,v);
var Ha=m^!!I;
if(l&&I!=null){if(Ha){y=true;
}else{v[U]=false;
}}else{if(Ha){p.push(D);
y=true;
}}}}}if(I!==w){l||(v=p);
g=g.replace(n.match[H],"");
if(!y){return[];
}break;
}}}}if(g===q){if(y==null){k.error(g);
}else{break;
}}q=g;
}return v;
};
k.error=function(g){throw"Syntax error, unrecognized expression: "+g;
};
var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href");
}},relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);
l=l&&!m;
if(m){h=h.toLowerCase();
}m=0;
for(var q=g.length,p;
m<q;
m++){if(p=g[m]){for(;
(p=p.previousSibling)&&p.nodeType!==1;
){}g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h;
}}l&&k.filter(h,g,true);
},">":function(g,h){var l=typeof h==="string";
if(l&&!/\W/.test(h)){h=h.toLowerCase();
for(var m=0,q=g.length;
m<q;
m++){var p=g[m];
if(p){l=p.parentNode;
g[m]=l.nodeName.toLowerCase()===h?l:false;
}}}else{m=0;
for(q=g.length;
m<q;
m++){if(p=g[m]){g[m]=l?p.parentNode:p.parentNode===h;
}}l&&k.filter(h,g,true);
}},"":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("parentNode",h,m,g,p,l);
},"~":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("previousSibling",h,m,g,p,l);
}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l){return(g=h.getElementById(g[1]))?[g]:[];
}},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);
for(var m=0,q=h.length;
m<q;
m++){h[m].getAttribute("name")===g[1]&&l.push(h[m]);
}return l.length===0?null:l;
}},TAG:function(g,h){return h.getElementsByTagName(g[1]);
}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";
if(p){return g;
}p=0;
for(var v;
(v=h[p])!=null;
p++){if(v){if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0)){l||m.push(v);
}else{if(l){h[p]=false;
}}}}return false;
},ID:function(g){return g[1].replace(/\\/g,"");
},TAG:function(g){return g[1].toLowerCase();
},CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);
g[2]=h[1]+(h[2]||1)-0;
g[3]=h[3]-0;
}g[0]=e++;
return g;
},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");
if(!p&&n.attrMap[h]){g[1]=n.attrMap[h];
}if(g[2]==="~="){g[4]=" "+g[4]+" ";
}return g;
},PSEUDO:function(g,h,l,m,q){if(g[1]==="not"){if((f.exec(g[3])||"").length>1||/^\w/.test(g[3])){g[3]=k(g[3],null,null,h);
}else{g=k.filter(g[3],h,l,true^q);
l||m.push.apply(m,g);
return false;
}}else{if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0])){return true;
}}return g;
},POS:function(g){g.unshift(true);
return g;
}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden";
},disabled:function(g){return g.disabled===true;
},checked:function(g){return g.checked===true;
},selected:function(g){return g.selected===true;
},parent:function(g){return !!g.firstChild;
},empty:function(g){return !g.firstChild;
},has:function(g,h,l){return !!k(l[3],g).length;
},header:function(g){return/h\d/i.test(g.nodeName);
},text:function(g){return"text"===g.type;
},radio:function(g){return"radio"===g.type;
},checkbox:function(g){return"checkbox"===g.type;
},file:function(g){return"file"===g.type;
},password:function(g){return"password"===g.type;
},submit:function(g){return"submit"===g.type;
},image:function(g){return"image"===g.type;
},reset:function(g){return"reset"===g.type;
},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button";
},input:function(g){return/input|select|textarea|button/i.test(g.nodeName);
}},setFilters:{first:function(g,h){return h===0;
},last:function(g,h,l,m){return h===m.length-1;
},even:function(g,h){return h%2===0;
},odd:function(g,h){return h%2===1;
},lt:function(g,h,l){return h<l[3]-0;
},gt:function(g,h,l){return h>l[3]-0;
},nth:function(g,h,l){return l[3]-0===h;
},eq:function(g,h,l){return l[3]-0===h;
}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];
if(p){return p(g,l,h,m);
}else{if(q==="contains"){return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;
}else{if(q==="not"){h=h[3];
l=0;
for(m=h.length;
l<m;
l++){if(h[l]===g){return false;
}}return true;
}else{k.error("Syntax error, unrecognized expression: "+q);
}}}},CHILD:function(g,h){var l=h[1],m=g;
switch(l){case"only":case"first":for(;
m=m.previousSibling;
){if(m.nodeType===1){return false;
}}if(l==="first"){return true;
}m=g;
case"last":for(;
m=m.nextSibling;
){if(m.nodeType===1){return false;
}}return true;
case"nth":l=h[2];
var q=h[3];
if(l===1&&q===0){return true;
}h=h[0];
var p=g.parentNode;
if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;
for(m=p.firstChild;
m;
m=m.nextSibling){if(m.nodeType===1){m.nodeIndex=++v;
}}p.sizcache=h;
}g=g.nodeIndex-q;
return l===0?g===0:g%l===0&&g/l>=0;
}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h;
},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h;
},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1;
},ATTR:function(g,h){var l=h[1];
g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);
l=g+"";
var m=h[2];
h=h[4];
return g==null?m==="!=":m==="="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false;
},POS:function(g,h,l,m){var q=n.setFilters[h[2]];
if(q){return q(g,l,h,m);
}}}},r=n.match.POS;
for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);
n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,h){return"\\"+(h-0+1);
}));
}var z=function(g,h){g=Array.prototype.slice.call(g,0);
if(h){h.push.apply(h,g);
return h;
}return g;
};
try{Array.prototype.slice.call(s.documentElement.childNodes,0);
}catch(C){z=function(g,h){h=h||[];
if(j.call(g)==="[object Array]"){Array.prototype.push.apply(h,g);
}else{if(typeof g.length==="number"){for(var l=0,m=g.length;
l<m;
l++){h.push(g[l]);
}}else{for(l=0;
g[l];
l++){h.push(g[l]);
}}}return h;
};
}var B;
if(s.documentElement.compareDocumentPosition){B=function(g,h){if(!g.compareDocumentPosition||!h.compareDocumentPosition){if(g==h){i=true;
}return g.compareDocumentPosition?-1:1;
}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;
if(g===0){i=true;
}return g;
};
}else{if("sourceIndex" in s.documentElement){B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h){i=true;
}return g.sourceIndex?-1:1;
}g=g.sourceIndex-h.sourceIndex;
if(g===0){i=true;
}return g;
};
}else{if(s.createRange){B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h){i=true;
}return g.ownerDocument?-1:1;
}var l=g.ownerDocument.createRange(),m=h.ownerDocument.createRange();
l.setStart(g,0);
l.setEnd(g,0);
m.setStart(h,0);
m.setEnd(h,0);
g=l.compareBoundaryPoints(Range.START_TO_END,m);
if(g===0){i=true;
}return g;
};
}}}(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();
g.innerHTML="<a name='"+h+"'/>";
var l=s.documentElement;
l.insertBefore(g,l.firstChild);
if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p){return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[];
}};
n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");
return m.nodeType===1&&p&&p.nodeValue===q;
};
}l.removeChild(g);
l=g=null;
})();
(function(){var g=s.createElement("div");
g.appendChild(s.createComment(""));
if(g.getElementsByTagName("*").length>0){n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);
if(h[1]==="*"){h=[];
for(var m=0;
l[m];
m++){l[m].nodeType===1&&h.push(l[m]);
}l=h;
}return l;
};
}g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#"){n.attrHandle.href=function(h){return h.getAttribute("href",2);
};
}g=null;
})();
s.querySelectorAll&&function(){var g=k,h=s.createElement("div");
h.innerHTML="<p class='TEST'></p>";
if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;
if(!v&&q.nodeType===9&&!x(q)){try{return z(q.querySelectorAll(m),p);
}catch(t){}}return g(m,q,p,v);
};
for(var l in g){k[l]=g[l];
}h=null;
}}();
(function(){var g=s.createElement("div");
g.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";
if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");
n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m){return l.getElementsByClassName(h[1]);
}};
g=null;
}}})();
var E=s.compareDocumentPosition?function(g,h){return !!(g.compareDocumentPosition(h)&16);
}:function(g,h){return g!==h&&(g.contains?g.contains(h):true);
},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false;
},ga=function(g,h){var l=[],m="",q;
for(h=h.nodeType?[h]:h;
q=n.match.PSEUDO.exec(g);
){m+=q[0];
g=g.replace(n.match.PSEUDO,"");
}g=n.relative[g]?g+"*":g;
q=0;
for(var p=h.length;
q<p;
q++){k(g,h[q],l);
}return k.filter(m,l);
};
c.find=k;
c.expr=k.selectors;
c.expr[":"]=c.expr.filters;
c.unique=k.uniqueSort;
c.text=a;
c.isXMLDoc=x;
c.contains=E;
})();
var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,gb=/,/;
R=Array.prototype.slice;
var Ia=function(a,b,d){if(c.isFunction(b)){return c.grep(a,function(e,j){return !!b.call(e,j,e)===d;
});
}else{if(b.nodeType){return c.grep(a,function(e){return e===b===d;
});
}else{if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1;
});
if(Ua.test(b)){return c.filter(b,f,!d);
}else{b=c.filter(b,f);
}}}}return c.grep(a,function(e){return c.inArray(e,b)>=0===d;
});
};
c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;
f<e;
f++){d=b.length;
c.find(a,this[f],b);
if(f>0){for(var j=d;
j<b.length;
j++){for(var i=0;
i<d;
i++){if(b[i]===b[j]){b.splice(j--,1);
break;
}}}}}return b;
},has:function(a){var b=c(a);
return this.filter(function(){for(var d=0,f=b.length;
d<f;
d++){if(c.contains(this,b[d])){return true;
}}});
},not:function(a){return this.pushStack(Ia(this,a,false),"not",a);
},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a);
},is:function(a){return !!a&&c.filter(a,this).length>0;
},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j={},i;
if(f&&a.length){e=0;
for(var o=a.length;
e<o;
e++){i=a[e];
j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i);
}for(;
f&&f.ownerDocument&&f!==b;
){for(i in j){e=j[i];
if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});
delete j[i];
}}f=f.parentNode;
}}return d;
}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;
return this.map(function(n,r){for(;
r&&r.ownerDocument&&r!==b;
){if(k?k.index(r)>-1:c(r).is(a)){return r;
}r=r.parentNode;
}return null;
});
},index:function(a){if(!a||typeof a==="string"){return c.inArray(this[0],a?c(a):this.parent().children());
}return c.inArray(a.jquery?a[0]:a,this);
},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);
b=c.merge(this.get(),a);
return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b));
},andSelf:function(){return this.add(this.prevObject);
}});
c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null;
},parents:function(a){return c.dir(a,"parentNode");
},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d);
},next:function(a){return c.nth(a,2,"nextSibling");
},prev:function(a){return c.nth(a,2,"previousSibling");
},nextAll:function(a){return c.dir(a,"nextSibling");
},prevAll:function(a){return c.dir(a,"previousSibling");
},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d);
},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d);
},siblings:function(a){return c.sibling(a.parentNode.firstChild,a);
},children:function(a){return c.sibling(a.firstChild);
},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes);
}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);
eb.test(a)||(f=d);
if(f&&typeof f==="string"){e=c.filter(f,e);
}e=this.length>1?c.unique(e):e;
if((this.length>1||gb.test(f))&&fb.test(a)){e=e.reverse();
}return this.pushStack(e,a,R.call(arguments).join(","));
};
});
c.extend({filter:function(a,b,d){if(d){a=":not("+a+")";
}return c.find.matches(a,b);
},dir:function(a,b,d){var f=[];
for(a=a[b];
a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));
){a.nodeType===1&&f.push(a);
a=a[b];
}return f;
},nth:function(a,b,d){b=b||1;
for(var f=0;
a;
a=a[d]){if(a.nodeType===1&&++f===b){break;
}}return a;
},sibling:function(a,b){for(var d=[];
a;
a=a.nextSibling){a.nodeType===1&&a!==b&&d.push(a);
}return d;
}});
var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?a:b+"></"+d+">";
},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
F.optgroup=F.option;
F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;
F.th=F.td;
if(!c.support.htmlSerialize){F._default=[1,"div<div>","</div>"];
}c.fn.extend({text:function(a){if(c.isFunction(a)){return this.each(function(b){var d=c(this);
d.text(a.call(this,b,d.text()));
});
}if(typeof a!=="object"&&a!==w){return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));
}return c.text(this);
},wrapAll:function(a){if(c.isFunction(a)){return this.each(function(d){c(this).wrapAll(a.call(this,d));
});
}if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);
this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var d=this;
d.firstChild&&d.firstChild.nodeType===1;
){d=d.firstChild;
}return d;
}).append(this);
}return this;
},wrapInner:function(a){if(c.isFunction(a)){return this.each(function(b){c(this).wrapInner(a.call(this,b));
});
}return this.each(function(){var b=c(this),d=b.contents();
d.length?d.wrapAll(a):b.append(a);
});
},wrap:function(a){return this.each(function(){c(this).wrapAll(a);
});
},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes);
}).end();
},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a);
});
},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild);
});
},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this);
});
}else{if(arguments.length){var a=c(arguments[0]);
a.push.apply(a,this.toArray());
return this.pushStack(a,"before",arguments);
}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling);
});
}else{if(arguments.length){var a=this.pushStack(this,"after",arguments);
a.push.apply(a,c(arguments[0]).toArray());
return a;
}}},remove:function(a,b){for(var d=0,f;
(f=this[d])!=null;
d++){if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));
c.cleanData([f]);
}f.parentNode&&f.parentNode.removeChild(f);
}}return this;
},empty:function(){for(var a=0,b;
(b=this[a])!=null;
a++){for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));
b.firstChild;
){b.removeChild(b.firstChild);
}}return this;
},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;
if(!d){d=f.createElement("div");
d.appendChild(this.cloneNode(true));
d=d.innerHTML;
}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0];
}else{return this.cloneNode(true);
}});
if(a===true){ra(this,b);
ra(this.find("*"),b.find("*"));
}return b;
},html:function(a){if(a===w){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,""):null;
}else{if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);
try{for(var b=0,d=this.length;
b<d;
b++){if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));
this[b].innerHTML=a;
}}}catch(f){this.empty().append(a);
}}else{c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();
j.empty().append(function(){return a.call(this,e,i);
});
}):this.empty().append(a);
}}return this;
},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a)){return this.each(function(b){var d=c(this),f=d.html();
d.replaceWith(a.call(this,b,f));
});
}if(typeof a!=="string"){a=c(a).detach();
}return this.each(function(){var b=this.nextSibling,d=this.parentNode;
c(this).remove();
b?c(b).before(a):c(d).append(a);
});
}else{return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a);
}},detach:function(a){return this.remove(a,true);
},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||u.appendChild(u.ownerDocument.createElement("tbody")):u;
}var e,j,i=a[0],o=[],k;
if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i)){return this.each(function(){c(this).domManip(a,b,d,true);
});
}if(c.isFunction(i)){return this.each(function(u){var z=c(this);
a[0]=i.call(this,u,b?z.html():w);
z.domManip(a,b,d);
});
}if(this[0]){e=i&&i.parentNode;
e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);
k=e.fragment;
if(j=k.childNodes.length===1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");
for(var n=0,r=this.length;
n<r;
n++){d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k);
}}o.length&&c.each(o,Qa);
}return this;
}});
c.fragments={};
c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];
d=c(d);
var e=this.length===1&&this[0].parentNode;
if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this;
}else{e=0;
for(var j=d.length;
e<j;
e++){var i=(e>0?this.clone(true):this).get();
c.fn[b].apply(c(d[e]),i);
f=f.concat(i);
}return this.pushStack(f,a,d.selector);
}};
});
c.extend({clean:function(a,b,d,f){b=b||s;
if(typeof b.createElement==="undefined"){b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;
}for(var e=[],j=0,i;
(i=a[j])!=null;
j++){if(typeof i==="number"){i+="";
}if(i){if(typeof i==="string"&&!jb.test(i)){i=b.createTextNode(i);
}else{if(typeof i==="string"){i=i.replace(Ka,Ma);
var o=(La.exec(i)||["",""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");
for(r.innerHTML=k[1]+i+k[2];
n--;
){r=r.lastChild;
}if(!c.support.tbody){n=ib.test(i);
o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];
for(k=o.length-1;
k>=0;
--k){c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k]);
}}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);
i=r.childNodes;
}}if(i.nodeType){e.push(i);
}else{e=c.merge(e,i);
}}}if(d){for(j=0;
e[j];
j++){if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript")){f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);
}else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));
d.appendChild(e[j]);
}}}return e;
},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;
(o=a[i])!=null;
i++){if(d=o[c.expando]){b=f[d];
if(b.events){for(var k in b.events){e[k]?c.event.remove(o,k):Ca(o,k,b.handle);
}}if(j){delete o[c.expando];
}else{o.removeAttribute&&o.removeAttribute(c.expando);
}delete f[d];
}}}});
var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=function(a,b){return b.toUpperCase();
};
c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w){return c.curCSS(d,f);
}if(typeof e==="number"&&!kb.test(f)){e+="px";
}c.style(d,f,e);
});
};
c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if((b==="width"||b==="height")&&parseFloat(d)<0){d=w;
}var f=a.style||a,e=d!==w;
if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;
b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";
a=f.filter||c.curCSS(a,"filter")||"";
f.filter=Na.test(a)?a.replace(Na,b):b;
}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":"";
}if(ha.test(b)){b=Pa;
}b=b.replace(ia,ja);
if(e){f[b]=d;
}return f[b];
},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;
function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;
f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);
if(f==="margin"){e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;
}else{e-=parseFloat(c.curCSS(a,"border"+this+"Width",true))||0;
}});
}a.offsetWidth!==0?i():c.swap(a,ob,i);
return Math.max(0,Math.round(e));
}return c.curCSS(a,b,d);
},curCSS:function(a,b,d){var f,e=a.style;
if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";
return f===""?"1":f;
}if(ha.test(b)){b=Pa;
}if(!d&&e&&e[b]){f=e[b];
}else{if(rb){if(ha.test(b)){b="float";
}b=b.replace(lb,"-$1").toLowerCase();
e=a.ownerDocument.defaultView;
if(!e){return null;
}if(a=e.getComputedStyle(a,null)){f=a.getPropertyValue(b);
}if(b==="opacity"&&f===""){f="1";
}}else{if(a.currentStyle){d=b.replace(ia,ja);
f=a.currentStyle[b]||a.currentStyle[d];
if(!mb.test(f)&&nb.test(f)){b=e.left;
var j=a.runtimeStyle.left;
a.runtimeStyle.left=a.currentStyle.left;
e.left=d==="fontSize"?"1em":f||0;
f=e.pixelLeft+"px";
e.left=b;
a.runtimeStyle.left=j;
}}}}return f;
},swap:function(a,b,d){var f={};
for(var e in b){f[e]=a.style[e];
a.style[e]=b[e];
}d.call(a);
for(e in b){a.style[e]=f[e];
}}});
if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";
return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none";
};
c.expr.filters.visible=function(a){return !c.expr.filters.hidden(a);
};
}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;
c.fn.extend({load:function(a,b,d){if(typeof a!=="string"){return zb.call(this,a);
}else{if(!this.length){return this;
}}var f=a.indexOf(" ");
if(f>=0){var e=a.slice(f,a.length);
a=a.slice(0,f);
}f="GET";
if(b){if(c.isFunction(b)){d=b;
b=null;
}else{if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);
f="POST";
}}}var j=this;
c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified"){j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);
}d&&j.each(d,[i.responseText,o,i]);
}});
return this;
},serialize:function(){return c.param(this.serializeArray());
},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this;
}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type));
}).map(function(a,b){a=c(this).val();
return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d};
}):{name:b.name,value:a};
}).get();
}});
c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d);
};
});
c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b=null;
}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f});
},getScript:function(a,b){return c.get(a,null,b,"script");
},getJSON:function(a,b,d){return c.get(a,b,d,"json");
},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b={};
}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f});
},ajaxSetup:function(a){c.extend(c.ajaxSettings,a);
},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest;
}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP");
}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&e.success.call(k,o,i,x);
e.global&&f("ajaxSuccess",[x,e]);
}function d(){e.complete&&e.complete.call(k,x,i);
e.global&&f("ajaxComplete",[x,e]);
e.global&&!--c.active&&c.event.trigger("ajaxStop");
}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p);
}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();
if(e.data&&e.processData&&typeof e.data!=="string"){e.data=c.param(e.data,e.traditional);
}if(e.dataType==="jsonp"){if(n==="GET"){N.test(e.url)||(e.url+=(ka.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?");
}else{if(!e.data||!N.test(e.data)){e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";
}}e.dataType="json";
}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;
if(e.data){e.data=(e.data+"").replace(N,"="+j+"$1");
}e.url=e.url.replace(N,"="+j+"$1");
e.dataType="script";
A[j]=A[j]||function(q){o=q;
b();
d();
A[j]=w;
try{delete A[j];
}catch(p){}z&&z.removeChild(C);
};
}if(e.dataType==="script"&&e.cache===null){e.cache=false;
}if(e.cache===false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");
e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"");
}if(e.data&&n==="GET"){e.url+=(ka.test(e.url)?"&":"?")+e.data;
}e.global&&!c.active++&&c.event.trigger("ajaxStart");
r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);
if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");
C.src=e.url;
if(e.scriptCharset){C.charset=e.scriptCharset;
}if(!j){var B=false;
C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;
b();
d();
C.onload=C.onreadystatechange=null;
z&&C.parentNode&&z.removeChild(C);
}};
}z.insertBefore(C,z.firstChild);
return w;
}var E=false,x=e.xhr();
if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);
try{if(e.data||a&&a.contentType){x.setRequestHeader("Content-Type",e.contentType);
}if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",c.lastModified[e.url]);
c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url]);
}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");
x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default);
}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");
x.abort();
return false;
}e.global&&f("ajaxSend",[x,e]);
var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||d();
E=true;
if(x){x.onreadystatechange=c.noop;
}}else{if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;
x.onreadystatechange=c.noop;
i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";
var p;
if(i==="success"){try{o=c.httpData(x,e.dataType,e);
}catch(v){i="parsererror";
p=v;
}}if(i==="success"||i==="notmodified"){j||b();
}else{c.handleError(e,x,i,p);
}d();
q==="timeout"&&x.abort();
if(e.async){x=null;
}}}};
try{var h=x.abort;
x.abort=function(){x&&h.call(x);
g("abort");
};
}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout");
},e.timeout);
try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null);
}catch(m){c.handleError(e,x,null,m);
d();
}e.async||g();
return x;
}},handleError:function(a,b,d,f){if(a.error){a.error.call(a.context||a,b,d,f);
}if(a.global){(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f]);
}},active:0,httpSuccess:function(a){try{return !a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0;
}catch(b){}return false;
},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");
if(d){c.lastModified[b]=d;
}if(f){c.etag[b]=f;
}return a.status===304||a.status===0;
},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;
a=e?a.responseXML:a.responseText;
e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");
if(d&&d.dataFilter){a=d.dataFilter(a,b);
}if(typeof a==="string"){if(b==="json"||!b&&f.indexOf("json")>=0){a=c.parseJSON(a);
}else{if(b==="script"||!b&&f.indexOf("javascript")>=0){c.globalEval(a);
}}}return a;
},param:function(a,b){function d(i,o){if(c.isArray(o)){c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n);
});
}else{!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n);
}):f(i,o);
}}function f(i,o){o=c.isFunction(o)?o():o;
e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o);
}var e=[];
if(b===w){b=c.ajaxSettings.traditional;
}if(c.isArray(a)||a.jquery){c.each(a,function(){f(this.name,this.value);
});
}else{for(var j in a){d(j,a[j]);
}}return e.join("&").replace(yb,"+");
}});
var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];
c.fn.extend({show:function(a,b){if(a||a===0){return this.animate(K("show",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";
if(c.css(this[a],"display")==="none"){d=this[a].nodeName;
var f;
if(la[d]){f=la[d];
}else{var e=c("<"+d+" />").appendTo("body");
f=e.css("display");
if(f==="none"){f="block";
}e.remove();
la[d]=f;
}c.data(this[a],"olddisplay",f);
}}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display=c.data(this[a],"olddisplay")||"";
}return this;
}},hide:function(a,b){if(a||a===0){return this.animate(K("hide",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
!d&&d!=="none"&&c.data(this[a],"olddisplay",c.css(this[a],"display"));
}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display="none";
}return this;
}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";
if(c.isFunction(a)&&c.isFunction(b)){this._toggle.apply(this,arguments);
}else{a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");
c(this)[f?"show":"hide"]();
}):this.animate(K("toggle",3),a,b);
}return this;
},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d);
},animate:function(a,b,d,f){var e=c.speed(b,d,f);
if(c.isEmptyObject(a)){return this.each(e.complete);
}return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;
for(i in a){var n=i.replace(ia,ja);
if(i!==n){a[n]=a[i];
delete a[i];
i=n;
}if(a[i]==="hide"&&o||a[i]==="show"&&!o){return j.complete.call(this);
}if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");
j.overflow=this.style.overflow;
}if(c.isArray(a[i])){(j.specialEasing=j.specialEasing||{})[i]=a[i][1];
a[i]=a[i][0];
}}if(j.overflow!=null){this.style.overflow="hidden";
}j.curAnim=c.extend({},a);
c.each(a,function(r,u){var z=new c.fx(k,j,r);
if(Ab.test(u)){z[u==="toggle"?o?"show":"hide":u](a);
}else{var C=Bb.exec(u),B=z.cur(true)||0;
if(C){u=parseFloat(C[2]);
var E=C[3]||"px";
if(E!=="px"){k.style[r]=(u||1)+E;
B=(u||1)/z.cur(true)*B;
k.style[r]=B+E;
}if(C[1]){u=(C[1]==="-="?-1:1)*u+B;
}z.custom(B,u,E);
}else{z.custom(B,u,"");
}}});
return true;
});
},stop:function(a,b){var d=c.timers;
a&&this.queue([]);
this.each(function(){for(var f=d.length-1;
f>=0;
f--){if(d[f].elem===this){b&&d[f](true);
d.splice(f,1);
}}});
b||this.dequeue();
return this;
}});
c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f);
};
});
c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};
f.duration=c.fx.off?0:typeof f.duration==="number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;
f.old=f.complete;
f.complete=function(){f.queue!==false&&c(this).dequeue();
c.isFunction(f.old)&&f.old.call(this);
};
return f;
},easing:{linear:function(a,b,d,f){return d+f*a;
},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d;
}},timers:[],fx:function(a,b,d){this.options=b;
this.elem=a;
this.prop=d;
if(!b.orig){b.orig={};
}}});
c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);
(c.fx.step[this.prop]||c.fx.step._default)(this);
if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block";
}},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];
}return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0;
},custom:function(a,b,d){function f(j){return e.step(j);
}this.startTime=J();
this.start=a;
this.end=b;
this.unit=d||this.unit||"px";
this.now=this.start;
this.pos=this.state=0;
var e=this;
f.elem=this.elem;
if(f()&&c.timers.push(f)&&!W){W=setInterval(c.fx.tick,13);
}},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.show=true;
this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());
c(this.elem).show();
},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.hide=true;
this.custom(this.cur(),0);
},step:function(a){var b=J(),d=true;
if(a||b>=this.options.duration+this.startTime){this.now=this.end;
this.pos=this.state=1;
this.update();
this.options.curAnim[this.prop]=true;
for(var f in this.options.curAnim){if(this.options.curAnim[f]!==true){d=false;
}}if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
a=c.data(this.elem,"olddisplay");
this.elem.style.display=a?a:this.options.display;
if(c.css(this.elem,"display")==="none"){this.elem.style.display="block";
}}this.options.hide&&c(this.elem).hide();
if(this.options.hide||this.options.show){for(var e in this.options.curAnim){c.style(this.elem,e,this.options.orig[e]);
}}this.options.complete.call(this.elem);
}return false;
}else{e=b-this.startTime;
this.state=e/this.options.duration;
a=this.options.easing||(c.easing.swing?"swing":"linear");
this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);
this.now=this.start+(this.end-this.start)*this.pos;
this.update();
}return true;
}};
c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;
b<a.length;
b++){a[b]()||a.splice(b--,1);
}a.length||c.fx.stop();
},stop:function(){clearInterval(W);
W=null;
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now);
},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null){a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;
}else{a.elem[a.prop]=a.now;
}}}});
if(c.expr&&c.expr.filters){c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem;
}).length;
};
}c.fn.offset="getBoundingClientRect" in s.documentElement?function(a){var b=this[0];
if(a){return this.each(function(e){c.offset.setOffset(this,a,e);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}var d=b.getBoundingClientRect(),f=b.ownerDocument;
b=f.body;
f=f.documentElement;
return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)};
}:function(a){var b=this[0];
if(a){return this.each(function(r){c.offset.setOffset(this,a,r);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}c.offset.initialize();
var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;
f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;
for(var k=b.offsetTop,n=b.offsetLeft;
(b=b.parentNode)&&b!==o&&b!==i;
){if(c.offset.supportsFixedPosition&&f.position==="fixed"){break;
}j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;
n-=b.scrollLeft;
if(b===d){k+=b.offsetTop;
n+=b.offsetLeft;
if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=d;
d=b.offsetParent;
}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=j;
}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;
n+=o.offsetLeft;
}if(c.offset.supportsFixedPosition&&f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);
n+=Math.max(i.scrollLeft,o.scrollLeft);
}return{top:k,left:n};
};
c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;
c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});
b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);
d=b.firstChild;
f=d.firstChild;
e=d.nextSibling.firstChild.firstChild;
this.doesNotAddBorder=f.offsetTop!==5;
this.doesAddBorderForTableAndCells=e.offsetTop===5;
f.style.position="fixed";
f.style.top="20px";
this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;
f.style.position=f.style.top="";
d.style.overflow="hidden";
d.style.position="relative";
this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;
this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;
a.removeChild(b);
c.offset.initialize=c.noop;
},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;
c.offset.initialize();
if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;
d+=parseFloat(c.curCSS(a,"marginLeft",true))||0;
}return{top:b,left:d};
},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position"))){a.style.position="relative";
}var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;
if(c.isFunction(b)){b=b.call(a,d,e);
}d={top:b.top-e.top+j,left:b.left-e.left+i};
"using" in b?b.using.call(a,d):f.css(d);
}};
c.fn.extend({position:function(){if(!this[0]){return null;
}var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();
d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;
d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;
f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;
f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;
return{top:d.top-f.top,left:d.left-f.left};
},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;
a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";
){a=a.offsetParent;
}return a;
});
}});
c.each(["Left","Top"],function(a,b){var d="scroll"+b;
c.fn[d]=function(f){var e=this[0],j;
if(!e){return null;
}if(f!==w){return this.each(function(){if(j=wa(this)){j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());
}else{this[d]=f;
}});
}else{return(j=wa(e))?"pageXOffset" in j?j[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d];
}};
});
c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null;
};
c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null;
};
c.fn[d]=function(f){var e=this[0];
if(!e){return f==null?null:this;
}if(c.isFunction(f)){return this.each(function(j){var i=c(this);
i[d](f.call(this,j,i[d]()));
});
}return"scrollTo" in e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px");
};
});
A.jQuery=A.$=c;
})(window);
function hmo(evt,n){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}n.timer=setTimeout(hover,500);
}function hmm(evt,n){if(!n.show){return;
}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
}function hmt(evt,n){n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
}function hs(e,n){var priorBgColor=e.style.backgroundColor;
var priorBorderColor=e.style.borderColor;
if(n&&n.tagName=="DIV"){e.onmouseenter=function(evt){e.onmouseover=null;
e.onmouseout=null;
hmo(evt,n);
};
e.onmouseover=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmo(evt,n);
};
e.onmousemove=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmm(evt,n);
};
e.onmouseout=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
hmt(evt,n);
};
e.onmouseleave=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
e.onmouseover=null;
e.onmouseout=null;
hmt(evt,n);
};
Util.Style.acss(n,"hover");
}}function _g(i){return document.getElementById(i);
}function _gbt(t,e){e=e||document;
return e.getElementsByTagName(t);
}var Util=function(){var _e=[],_d=document,_w=window;
return{EventCache:function(){var l=[];
return{add:function(o,e,f){l.push(arguments);
},remove:function(o,e,f){var n;
for(var i=l.length-1;
i>=0;
i=i-1){if(o==l[i][0]&&e==l[i][1]&&f==l[i][2]){n=l[i];
if(n[0].removeEventListener){n[0].removeEventListener(n[1],n[2],n[3]);
}else{if(n[0].detachEvent){if(n[1].substring(0,2)!="on"){n[1]="on"+n[1];
}n[0].detachEvent(n[1],n[0][e+f]);
}}}}},flush:function(){var e;
for(var i=l.length-1;
i>=0;
i=i-1){var o=l[i];
if(o[0].removeEventListener){o[0].removeEventListener(o[1],o[2],o[3]);
}e=o[1];
if(o[1].substring(0,2)!="on"){o[1]="on"+o[1];
}if(o[0].detachEvent){o[0].detachEvent(o[1],o[2]);
if(o[0][e+o[2]]){o[0].detachEvent(o[1],o[0][e+o[2]]);
}}}}};
}(),ce:function(t){var a=_e[t];
if(!a){a=_e[t]=_d.createElement(t);
}if(!a){return null;
}else{return a.cloneNode(false);
}},cep:function(t,p){var e=this.ce(t);
return this.mo(e,p);
},mo:function(o1,o2,d){o1=o1||{};
o2=o2||{};
var p;
for(p in o2){if(p){o1[p]=(o1[p]===undefined)?o2[p]:!d?o2[p]:o1[p];
}}return o1;
},de:function(e){if(e){this.gp(e).removeChild(e);
}},cancelBubble:function(e){e=_w.event||e;
if(!e){return;
}if(e.stopPropagation){e.stopPropagation();
}else{e.cancelBubble=true;
}},preventDefault:function(e){e=_w.event||e;
if(!e){return;
}if(e.preventDefault){e.preventDefault();
}else{e.returnValue=false;
}},goff:function(e){var l=0,t=0;
if(e.offsetParent){while(e.offsetParent){l+=e.offsetLeft;
t+=e.offsetTop;
e=e.offsetParent;
}}else{if(e.x||e.y){l+=e.x||0;
t+=e.y||0;
}}return[l,t];
},gp:function(e){if(!e.parentNode){return e;
}e=e.parentNode;
while(e.nodeType===3&&e.parentNode){e=e.parentNode;
}return e;
},gc:function(e,i){i=i||0;
var j=-1;
if(!e.childNodes[i]){return null;
}e=e.childNodes[0];
while(e&&j<i){if(e.nodeType===1){j++;
if(j===i){break;
}}e=this.gns(e);
}return e;
},gcs:function(e){var r=[],es=e.childNodes;
for(var i=0;
i<es.length;
i++){var x=es[i];
if(x.nodeType===1){r.push(x);
}}return r;
},gns:function(e){if(!e){return null;
}var a=e.nextSibling;
while(a&&a.nodeType!==1){a=a.nextSibling;
}return a;
},gps:function(e){var a=e.previousSibling;
while(a&&a.nodeType!==1){a=a.previousSibling;
}return a;
},ac:function(e,p){p.appendChild(e);
return e;
},ia:function(nn,rn){var p=Util.gp(rn),n=Util.gns(rn);
if(n){p.insertBefore(nn,n);
}else{Util.ac(nn,p);
}},addEvent:function(o,e,f){function ae(obj,evt,fnc){if(!obj.myEvents){obj.myEvents={};
}if(!obj.myEvents[evt]){obj.myEvents[evt]=[];
}var evts=obj.myEvents[evt];
evts[evts.length]=fnc;
}function fe(obj,evt){if(!obj||!obj.myEvents||!obj.myEvents[evt]){return;
}var evts=obj.myEvents[evt];
for(var i=0,len=evts.length;
i<len;
i++){evts[i]();
}}if(o.addEventListener){o.addEventListener(e,f,false);
Util.EventCache.add(o,e,f);
}else{if(o.attachEvent){o["e"+e+f]=f;
o[e+f]=function(){o["e"+e+f](window.event);
};
o.attachEvent("on"+e,o[e+f]);
Util.EventCache.add(o,e,f);
}else{ae(o,e,f);
o["on"+e]=function(){fe(o,e);
};
}}},removeEvent:function(o,e,f){Util.EventCache.remove(o,e,f);
},popup:function(u,n,o){if(!window.open){return false;
}var d={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};
function f(n,v){if(!v){return"";
}return n+"="+v+",";
}function fs(){o=o||{};
var p,n={};
for(p in d){if(p){n[p]=o[p]!==undefined?o[p]:d[p];
}}return n;
}o=fs();
var p=f("dependent",o.dp)+f("directories",o.dr)+f("fullscreen",o.fs)+f("location",o.lb?1:0)+f("menubar",o.mb)+f("resizable",o.rz?1:0)+f("scrollbars",o.scb?1:0)+f("status",o.stb?1:0)+f("toolbar",o.tb?1:0)+f("top",o.tp)+f("left",o.lft)+f("width",o.w)+f("height",o.h)+f("screenX",o.sx)+f("screenY",o.sy);
p=p.substring(0,p.length-1);
var nw=window.open(u,n,p);
window.blur();
if(nw.focus){nw.focus();
}return true;
},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}};
}();
function insertAfter(nn,rn){Util.ia(nn,rn);
}Util.addEvent(window,"unload",Util.EventCache.flush);
Util.Style=function(){return{ccss:function(e,c){if(typeof(e.className)==="undefined"||!e.className){return false;
}var a=e.className.split(" ");
for(var i=0,b=a.length;
i<b;
i++){if(a[i]===c){return true;
}}return false;
},acss:function(e,c){if(this.ccss(e,c)){return e;
}e.className=(e.className?e.className+" ":"")+c;
return e;
},rcss:function(e,c){if(!this.ccss(e,c)){return e;
}var a=e.className.split(" "),d="";
for(var i=0,b=a.length;
i<b;
i++){var f=a[i];
if(f!==c){d+=d.length>0?(" "+f):f;
}}e.className=d;
return e;
},tcss:function(e,c){if(this.ccss(e,c)){this.rcss(e,c);
return false;
}else{this.acss(e,c);
return true;
}},co:function(e){e.style.MozOpacity="";
e.style.opacity="";
e.style.filter="";
},g:function(c,e,t){e=e||document;
t=t||"*";
var ns=[],es=_gbt(t,e),l=es.length;
for(var i=0,j=0;
i<l;
i++){if(this.ccss(es[i],c)){ns[j]=es[i];
j++;
}}return ns;
}};
}();
function getPosition(e){e=e||window.event;
var cursor={x:0,y:0};
if(e.pageX||e.pageY){cursor.x=e.pageX;
cursor.y=e.pageY;
}else{var de=document.documentElement;
var b=document.body;
cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}return cursor;
}function gvs(){var n=window,d=document,b=d.body,e=d.documentElement;
if(typeof n.innerWidth!=="undefined"){return[n.innerHeight,n.innerWidth];
}else{if(typeof e!=="undefined"&&typeof e.clientWidth!=="undefined"&&e.clientWidth!==0){return[e.clientHeight,e.clientWidth];
}else{return[b.clientHeight,b.clientWidth];
}}}function gso(){var d=document,b=d.body,w=window,e=d.documentElement,et=e.scrollTop,bt=b.scrollTop,el=e.scrollLeft,bl=b.scrollLeft;
if(typeof w.pageYOffset==="number"){return[w.pageYOffset,w.pageXOffset];
}if(typeof et==="number"){if(bt>et||bl>el){return[bt,bl];
}return[et,el];
}return[bt,bl];
}if(!this.JSON){this.JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){k=rep[i];
if(typeof k==="string"){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());
mp_formatter={};
mp_formatter.Locale=function(properties){this._className="mp_formatter.Locale";
this._parseList=function(names,expectedItems){var array=[];
if(names===null){throw"Names not defined";
}else{if(typeof names=="object"){array=names;
}else{if(typeof names=="string"){array=names.split(";",expectedItems);
for(var i=0;
i<array.length;
i++){if(array[i][0]=='"'&&array[i][array[i].length-1]=='"'){array[i]=array[i].slice(1,-1);
}else{throw"Missing double quotes";
}}}else{throw"Names must be an array or a string";
}}}if(array.length!=expectedItems){throw"Expected "+expectedItems+" items, got "+array.length;
}return array;
};
this._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return formatString;
}else{throw"Empty or no string";
}};
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing locale properties";
}if(typeof properties.decimal_point!="string"){throw"Error: Invalid/missing decimal_point property";
}this.decimal_point=properties.decimal_point;
if(typeof properties.thousands_sep!="string"){throw"Error: Invalid/missing thousands_sep property";
}this.thousands_sep=properties.thousands_sep;
if(typeof properties.grouping!="string"){throw"Error: Invalid/missing grouping property";
}this.grouping=properties.grouping;
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing time locale properties";
}try{this.time24hr=this._validateFormatString(properties.time24hr);
}catch(error){throw"Error: Invalid time24hr property: "+error;
}try{this.time24hrnosec=this._validateFormatString(properties.time24hrnosec);
}catch(error){throw"Error: Invalid time24hrnosec property: "+error;
}try{this.shortdate2yr=this._validateFormatString(properties.shortdate2yr);
}catch(error){throw"Error: Invalid shortdate2yr property: "+error;
}try{this.fulldate4yr=this._validateFormatString(properties.fulldate4yr);
}catch(error){throw"Error: Invalid fulldate4yr property: "+error;
}try{this.fulldate2yr=this._validateFormatString(properties.fulldate2yr);
}catch(error){throw"Error: Invalid fulldate2yr property: "+error;
}try{this.fullmonth4yrnodate=this._validateFormatString(properties.fullmonth4yrnodate);
}catch(error){throw"Error: Invalid fullmonth4yrnodate property: "+error;
}try{this.full4yr=this._validateFormatString(properties.full4yr);
}catch(error){throw"Error: Invalid full4yr property: "+error;
}try{this.fulldatetime2yr=this._validateFormatString(properties.fulldatetime2yr);
}catch(error){throw"Error: Invalid fulldatetime2yr property: "+error;
}try{this.fulldatetime4yr=this._validateFormatString(properties.fulldatetime4yr);
}catch(error){throw"Error: Invalid fulldatetime4yr property: "+error;
}try{this.fulldatetimenoyr=this._validateFormatString(properties.fulldatetimenoyr);
}catch(error){throw"Error: Invalid fulldatetimenoyr property: "+error;
}};
mp_formatter._getPrecision=function(optionsString){if(typeof optionsString!="string"){return -1;
}var m=optionsString.match(/\.(\d)/);
if(m){return parseInt(m[1],10);
}else{return -1;
}};
mp_formatter._isNumber=function(arg){if(typeof arg=="number"){return true;
}if(typeof arg!="string"){return false;
}var s=arg+"";
return(/^-?(\d+|\d*\.\d+)$/).test(s);
};
mp_formatter._isDate=function(arg){if(arg.getDate){return true;
}return false;
};
mp_formatter._trim=function(str){var whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";
for(var i=0;
i<str.length;
i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);
break;
}}for(i=str.length-1;
i>=0;
i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);
break;
}}return whitespace.indexOf(str.charAt(0))===-1?str:"";
};
mp_formatter._splitNumber=function(amount){if(typeof amount=="number"){amount=amount+"";
}var obj={};
if(amount.charAt(0)=="-"){amount=amount.substring(1);
}var amountParts=amount.split(".");
if(!amountParts[1]){amountParts[1]="";
}obj.integer=amountParts[0];
obj.fraction=amountParts[1];
return obj;
};
mp_formatter._formatIntegerPart=function(intPart,grouping,thousandsSep){if(thousandsSep===""||grouping=="-1"){return intPart;
}var groupSizes=grouping.split(";");
var out="";
var pos=intPart.length;
var size;
while(pos>0){if(groupSizes.length>0){size=parseInt(groupSizes.shift(),10);
}if(isNaN(size)){throw"Error: Invalid grouping";
}if(size==-1){out=intPart.substring(0,pos)+out;
break;
}pos-=size;
if(pos<1){out=intPart.substring(0,pos+size)+out;
break;
}out=thousandsSep+intPart.substring(pos,pos+size)+out;
}return out;
};
mp_formatter._formatFractionPart=function(fracPart,precision){for(var i=0;
fracPart.length<precision;
i++){fracPart=fracPart+"0";
}return fracPart;
};
mp_formatter._hasOption=function(option,optionsString){if(typeof option!="string"||typeof optionsString!="string"){return false;
}if(optionsString.indexOf(option)!=-1){return true;
}else{return false;
}};
mp_formatter._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return true;
}else{return false;
}};
mp_formatter.NumericFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.format=function(number,options){if(typeof number=="string"){number=mp_formatter._trim(number);
}if(!mp_formatter._isNumber(number)){throw"Error: The input is not a number";
}var floatAmount=parseFloat(number,10);
var reqPrecision=mp_formatter._getPrecision(options);
if(reqPrecision!=-1){floatAmount=Math.round(floatAmount*Math.pow(10,reqPrecision))/Math.pow(10,reqPrecision);
}var parsedAmount=mp_formatter._splitNumber(String(floatAmount));
var formattedIntegerPart;
if(floatAmount===0){formattedIntegerPart="0";
}else{formattedIntegerPart=mp_formatter._hasOption("^",options)?parsedAmount.integer:mp_formatter._formatIntegerPart(parsedAmount.integer,this.lc.grouping,this.lc.thousands_sep);
}var formattedFractionPart=reqPrecision!=-1?mp_formatter._formatFractionPart(parsedAmount.fraction,reqPrecision):parsedAmount.fraction;
var formattedAmount=formattedFractionPart.length?formattedIntegerPart+this.lc.decimal_point+formattedFractionPart:formattedIntegerPart;
if(mp_formatter._hasOption("~",options)||floatAmount===0){return formattedAmount;
}else{if(mp_formatter._hasOption("+",options)||floatAmount<0){if(floatAmount>0){return"+"+formattedAmount;
}else{if(floatAmount<0){return"-"+formattedAmount;
}else{return formattedAmount;
}}}else{return formattedAmount;
}}};
};
mp_formatter.DateTimeFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.formatISO8601=function(dateStr,option){if(!mp_formatter._validateFormatString(dateStr)){throw"Error: The input is either empty or no string";
}var date=new Date();
date.setISO8601(dateStr);
return this.format(date,option);
};
this.format=function(dateTime,option){if(!mp_formatter._isDate(dateTime)){throw"Error: The input is not a date object";
}switch(option){case mp_formatter.DateTimeFormatter.TIME_24HOUR:return dateTime.format(this.lc.time24hr);
case mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS:return dateTime.format(this.lc.time24hrnosec);
case mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR:return dateTime.format(this.lc.shortdate2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR:return dateTime.format(this.lc.fulldate4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR:return dateTime.format(this.lc.fulldate2yr);
case mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE:return dateTime.format(this.lc.fullmonth4yrnodate);
case mp_formatter.DateTimeFormatter.FULL_4YEAR:return dateTime.format(this.lc.full4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR:return dateTime.format(this.lc.fulldatetime2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR:return dateTime.format(this.lc.fulldatetime4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR:return dateTime.format(this.lc.fulldatetimenoyr);
default:alert("Unhandled date time formatting option");
}};
};
mp_formatter.DateTimeFormatter.TIME_24HOUR=1;
mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS=2;
mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR=3;
mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR=4;
mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR=5;
mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE=6;
mp_formatter.DateTimeFormatter.FULL_4YEAR=7;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR=8;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR=9;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR=10;
Function.prototype.method=function(name,func){this.prototype[name]=func;
return this;
};
Function.method("inherits",function(Parent){var d={},p=(this.prototype=new Parent());
this.method("uber",function uber(name){if(!(name in d)){d[name]=0;
}var f,r,t=d[name],v=Parent.prototype;
if(t){while(t){v=v.constructor.prototype;
t-=1;
}f=v[name];
}else{f=p[name];
if(f==this[name]){f=v[name];
}}d[name]+=1;
r=f.apply(this,Array.prototype.slice.apply(arguments,[1]));
d[name]-=1;
return r;
});
return this;
});
function MPageComponent(){this.m_componentId=0;
this.m_reportId=0;
this.m_label="";
this.m_column=0;
this.m_sequence=0;
this.m_link="";
this.m_totalResults=false;
this.m_xOFy=false;
this.m_isExpanded=false;
this.m_isAlwaysExpanded=false;
this.m_scrollNumber=0;
this.m_isScrollEnabled=false;
this.m_styles=null;
this.m_groups=null;
this.m_pageGroupSeq=0;
this.m_lookbackDays=0;
this.m_newLink=false;
this.criterion=null;
this.m_isPlusAdd=false;
this.m_scope=0;
this.m_rootComponentNode=null;
this.m_sectionContentNode=null;
this.m_compLoadTimerName="";
this.m_compRenderTimerName="";
this.m_includeLineNumber=false;
this.m_lookbackUnitTypeFlag=0;
this.m_lookbackUnits=0;
this.m_dateFormat=2;
this.m_isCustomizeView=false;
this.m_menuItems=null;
this.m_displayFilters=null;
this.m_AutoSuggestScript="";
this.m_AutoSuggestAddTimerName="";
MPageComponent.method("isDisplayable",function(){if(this.m_displayFilters!==null&&this.m_displayFilters.length>0){for(var x=this.m_displayFilters.length;
x--;
){var displayFilter=this.m_displayFilters[x];
if(displayFilter.checkFilters()===false){CERN_EventListener.removeAllListeners(this,this);
return false;
}}}return true;
});
MPageComponent.method("getDisplayFilters",function(){return this.m_displayFilters;
});
MPageComponent.method("setDisplayFilters",function(value){this.m_displayFilters=value;
});
MPageComponent.method("addDisplayFilter",function(value){if(this.m_displayFilters===null){this.m_displayFilters=[];
}this.m_displayFilters.push(value);
});
MPageComponent.method("getMenuItems",function(){return this.m_menuItems;
});
MPageComponent.method("setMenuItems",function(value){this.m_menuItems=value;
});
MPageComponent.method("addMenuItem",function(value){if(this.m_menuItems===null){this.m_menuItems=[];
}this.m_menuItems.push(value);
});
MPageComponent.method("getCustomizeView",function(){return this.m_isCustomizeView;
});
MPageComponent.method("setCustomizeView",function(value){this.m_isCustomizeView=value;
});
MPageComponent.method("InsertData",function(){alert("ERROR: InsertData has not been implemented within the component");
});
MPageComponent.method("HandleSuccess",function(){alert("ERROR: HandleSuccess has not been implemented within the component");
});
MPageComponent.method("openTab",function(){alert("ERROR: openTab has not been implemented within the component");
});
MPageComponent.method("getComponentLoadTimerName",function(){return(this.m_compLoadTimerName);
});
MPageComponent.method("setComponentLoadTimerName",function(value){this.m_compLoadTimerName=value;
});
MPageComponent.method("getComponentRenderTimerName",function(){return(this.m_compRenderTimerName);
});
MPageComponent.method("setComponentRenderTimerName",function(value){this.m_compRenderTimerName=value;
});
MPageComponent.method("getRootComponentNode",function(){if(this.m_rootComponentNode===null){var style=this.getStyles();
this.m_rootComponentNode=_g(style.getId());
}return(this.m_rootComponentNode);
});
MPageComponent.method("setRootComponentNode",function(value){this.m_rootComponentNode=value;
});
MPageComponent.method("getSectionContentNode",function(){if(this.m_sectionContentNode===null){var style=this.getStyles();
this.m_sectionContentNode=_g(style.getContentId());
}return(this.m_sectionContentNode);
});
MPageComponent.method("setSectionContentNode",function(value){this.m_sectionContentNode=value;
});
MPageComponent.method("getMPageName",function(){return(this.m_MPageName);
});
MPageComponent.method("setMPageName",function(value){this.m_MPageName=value;
});
MPageComponent.method("getScope",function(){return(this.m_scope);
});
MPageComponent.method("setScope",function(value){this.m_scope=value;
});
MPageComponent.method("isPlusAddEnabled",function(){return(this.m_isPlusAdd);
});
MPageComponent.method("setPlusAddEnabled",function(value){this.m_isPlusAdd=value;
});
MPageComponent.method("getCriterion",function(){return(this.criterion);
});
MPageComponent.method("setCriterion",function(value){this.criterion=value;
});
MPageComponent.method("isNewLink",function(){return(this.m_newLink);
});
MPageComponent.method("setNewLink",function(value){this.m_newLink=value;
});
MPageComponent.method("getPageGroupSequence",function(){return(this.m_pageGroupSeq);
});
MPageComponent.method("setPageGroupSequence",function(value){this.m_pageGroupSeq=value;
});
MPageComponent.method("getLookbackDays",function(){return(this.m_lookbackDays);
});
MPageComponent.method("setLookbackDays",function(value){this.m_lookbackDays=value;
});
MPageComponent.method("getComponentId",function(){return(this.m_componentId);
});
MPageComponent.method("setComponentId",function(value){this.m_componentId=value;
var styles=this.getStyles();
if(styles!==null){styles.setComponentId(value);
}});
MPageComponent.method("getReportId",function(){return(this.m_reportId);
});
MPageComponent.method("setReportId",function(value){this.m_reportId=value;
});
MPageComponent.method("getLabel",function(){return(this.m_label);
});
MPageComponent.method("setLabel",function(value){this.m_label=value;
});
MPageComponent.method("getColumn",function(){return(this.m_column);
});
MPageComponent.method("setColumn",function(value){this.m_column=value;
});
MPageComponent.method("getSequence",function(){return(this.m_sequence);
});
MPageComponent.method("setSequence",function(value){this.m_sequence=value;
});
MPageComponent.method("getLink",function(){return(this.m_link);
});
MPageComponent.method("setLink",function(value){this.m_link=value;
});
MPageComponent.method("isResultsDisplayEnabled",function(){return(this.m_totalResults);
});
MPageComponent.method("setResultsDisplayEnabled",function(value){this.m_totalResults=value;
});
MPageComponent.method("isXofYEnabled",function(){return(this.m_xOFy);
});
MPageComponent.method("setXofYEnabled",function(value){this.m_xOFy=value;
});
MPageComponent.method("isExpanded",function(){return(this.m_isExpanded);
});
MPageComponent.method("setExpanded",function(value){this.m_isExpanded=value;
});
MPageComponent.method("isAlwaysExpanded",function(){return(this.m_isAlwaysExpanded);
});
MPageComponent.method("setAlwaysExpanded",function(value){this.m_isAlwaysExpanded=value;
});
MPageComponent.method("getScrollNumber",function(){return(this.m_scrollNumber);
});
MPageComponent.method("setScrollNumber",function(value){this.m_scrollNumber=value;
});
MPageComponent.method("isScrollingEnabled",function(){return(this.m_isScrollEnabled);
});
MPageComponent.method("setScrollingEnabled",function(value){this.m_isScrollEnabled=value;
});
MPageComponent.method("getStyles",function(){return(this.m_styles);
});
MPageComponent.method("setStyles",function(value){this.m_styles=value;
});
MPageComponent.method("getFilters",function(){return(this.m_filters);
});
MPageComponent.method("getGroups",function(){if(this.m_groups===null){this.m_groups=[];
}return(this.m_groups);
});
MPageComponent.method("setGroups",function(value){this.m_groups=value;
});
MPageComponent.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
MPageComponent.method("getLookbackUnitTypeFlag",function(){return(this.m_lookbackUnitTypeFlag);
});
MPageComponent.method("setLookbackUnitTypeFlag",function(value){this.m_lookbackUnitTypeFlag=value;
});
MPageComponent.method("getLookbackUnits",function(){return(this.m_lookbackUnits);
});
MPageComponent.method("setLookbackUnits",function(value){this.m_lookbackUnits=value;
});
MPageComponent.method("isLineNumberIncluded",function(){return this.m_includeLineNumber;
});
MPageComponent.method("setIncludeLineNumber",function(value){this.m_includeLineNumber=value;
});
MPageComponent.method("getDateFormat",function(){return(this.m_dateFormat);
});
MPageComponent.method("setDateFormat",function(value){this.m_dateFormat=value;
});
MPageComponent.method("setAutoSuggestAddScript",function(value){this.m_AutoSuggestScript=value;
});
MPageComponent.method("getAutoSuggestAddScript",function(){return(this.m_AutoSuggestScript);
});
MPageComponent.method("setAutoSuggestAddTimerName",function(value){this.m_AutoSuggestAddTimerName=value;
});
MPageComponent.method("getAutoSuggestAddTimerName",function(){return(this.m_AutoSuggestAddTimerName);
});
}function MPageGrouper(){this.m_groups=null;
MPageGrouper.method("setGroups",function(value){this.m_groups=value;
});
MPageGrouper.method("getGroups",function(){return this.m_groups;
});
MPageGrouper.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
}MPageGrouper.inherits(MPageGroup);
function MPageGroup(){this.m_groupName="";
this.m_groupSeq=0;
this.m_groupId=0;
MPageGroup.method("setGroupId",function(value){this.m_groupId=value;
});
MPageGroup.method("getGroupId",function(){return this.m_groupId;
});
MPageGroup.method("setGroupName",function(value){this.m_groupName=value;
});
MPageGroup.method("getGroupName",function(){return this.m_groupName;
});
MPageGroup.method("setSequence",function(value){this.m_groupSeq=value;
});
MPageGroup.method("getSequence",function(){return this.m_groupSeq;
});
}function MPageEventSetGroup(){this.m_eventSets=null;
this.m_isSequenced=false;
MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventSetGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets;
});
MPageEventSetGroup.method("setEventSets",function(value){this.m_eventSets=value;
});
MPageEventSetGroup.method("addEventSet",function(value){if(this.m_eventSets===null){this.m_eventSets=[];
}this.m_eventSets.push(value);
});
}MPageEventSetGroup.inherits(MPageGroup);
function MPageEventCodeGroup(){this.m_eventCodes=null;
this.m_isSequenced=false;
MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventCodeGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes;
});
MPageEventCodeGroup.method("setEventCodes",function(value){this.m_eventCodes=value;
});
MPageEventCodeGroup.method("addEventCode",function(value){if(this.m_eventCodes===null){this.m_eventCodes=[];
}this.m_eventCodes.push(value);
});
}MPageEventCodeGroup.inherits(MPageGroup);
function MPageCodeValueGroup(){this.m_codes=null;
MPageCodeValueGroup.method("getCodes",function(){return this.m_codes;
});
MPageCodeValueGroup.method("setCodes",function(value){this.m_codes=value;
});
MPageCodeValueGroup.method("addCode",function(value){if(this.m_codes===null){this.m_codes=[];
}this.m_codes.push(value);
});
}MPageCodeValueGroup.inherits(MPageGroup);
function MPageSequenceGroup(){this.m_items=null;
this.m_mapItems=null;
this.m_isMultiType=false;
MPageSequenceGroup.method("getItems",function(){return this.m_items;
});
MPageSequenceGroup.method("setItems",function(value){this.m_items=value;
});
MPageSequenceGroup.method("addItem",function(value){if(this.m_items===null){this.m_items=[];
}this.m_items.push(value);
});
MPageSequenceGroup.method("setMultiValue",function(value){this.m_isMultiType=value;
});
MPageSequenceGroup.method("isMultiValue",function(){return(this.m_isMultiType);
});
MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems;
});
MPageSequenceGroup.method("setMapItems",function(value){this.m_mapItems=value;
});
}MPageSequenceGroup.inherits(MPageGroup);
function MPageGroupValue(){this.m_id=0;
this.m_name="";
MPageGroupValue.method("getId",function(){return this.m_id;
});
MPageGroupValue.method("setId",function(value){this.m_id=value;
});
MPageGroupValue.method("getName",function(){return this.m_name;
});
MPageGroupValue.method("setName",function(value){this.m_name=value;
});
}function ComponentStyle(){this.m_nameSpace="";
this.m_id="";
this.m_className="section";
this.m_contentId="";
this.m_contentClass="sec-content";
this.m_headerClass="sec-hd";
this.m_headToggle="sec-hd-tgl";
this.m_secTitle="sec-title";
this.m_aLink="";
this.m_secTotal="sec-total";
this.m_info="";
this.m_componentId=0;
ComponentStyle.method("initByNamespace",function(value){this.m_nameSpace=value;
this.m_id=value;
this.m_className+=(" "+value+"-sec");
this.m_contentId=value+"Content";
this.m_aLink=value+"Link";
this.m_info=value+"-info";
});
ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace;
});
ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId;
});
ComponentStyle.method("getClassName",function(){return this.m_className;
});
ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId;
});
ComponentStyle.method("getContentClass",function(){return this.m_contentClass;
});
ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass;
});
ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle;
});
ComponentStyle.method("getTitle",function(){return this.m_secTitle;
});
ComponentStyle.method("getLink",function(){return this.m_aLink;
});
ComponentStyle.method("getTotal",function(){return this.m_secTotal;
});
ComponentStyle.method("getInfo",function(){return this.m_info;
});
ComponentStyle.method("setComponentId",function(value){this.m_componentId=value;
});
ComponentStyle.method("setNameSpace",function(value){this.m_nameSpace=value;
});
ComponentStyle.method("setId",function(value){this.m_id=value;
});
ComponentStyle.method("setClassName",function(value){this.m_className=value;
});
ComponentStyle.method("setContextId",function(value){this.m_contentId=value;
});
ComponentStyle.method("setContextClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setHeaderClass",function(value){this.m_headerClass=value;
});
ComponentStyle.method("setHeaderToggle",function(value){this.m_headToggle=value;
});
ComponentStyle.method("setTitle",function(value){this.m_secTitle=value;
});
ComponentStyle.method("setLink",function(value){this.m_aLink=value;
});
ComponentStyle.method("setTotal",function(value){this.m_secTotal=value;
});
ComponentStyle.method("setInfo",function(value){this.m_info=value;
});
}function MPage(){this.pageId=0;
this.name=null;
this.components=null;
this.banner=true;
this.helpFileName="";
this.helpFileURL="";
this.criterion=null;
this.componentIds=null;
this.isCustomizeView=false;
this.m_isCustomizeEnabled=true;
this.m_titleAnchors=null;
MPage.method("getTitleAnchors",function(){return this.m_titleAnchors;
});
MPage.method("setTitleAnchors",function(value){this.m_titleAnchors=value;
});
MPage.method("addTitleAnchor",function(value){if(this.m_titleAnchors===null){this.m_titleAnchors=[];
}this.m_titleAnchors.push(value);
});
MPage.method("getCustomizeEnabled",function(){return this.m_isCustomizeEnabled;
});
MPage.method("setCustomizeEnabled",function(value){this.m_isCustomizeEnabled=value;
});
MPage.method("getCustomizeView",function(){return this.isCustomizeView;
});
MPage.method("setCustomizeView",function(value){this.isCustomizeView=value;
});
MPage.method("getComponentIds",function(){return(this.componentIds);
});
MPage.method("setComponentIds",function(value){this.componentIds=value;
});
MPage.method("addComponentId",function(value){if(this.componentIds===null){this.componentIds=[];
}this.componentIds.push(value);
});
MPage.method("getCriterion",function(){return(this.criterion);
});
MPage.method("setCriterion",function(value){this.criterion=value;
});
MPage.method("getHelpFileName",function(){return this.helpFileName;
});
MPage.method("setHelpFileName",function(value){this.helpFileName=value;
});
MPage.method("getHelpFileURL",function(){return this.helpFileURL;
});
MPage.method("setHelpFileURL",function(value){this.helpFileURL=value;
});
MPage.method("isBannerEnabled",function(){return this.banner;
});
MPage.method("setBannerEnabled",function(value){this.banner=value;
});
MPage.method("getPageId",function(){return this.pageId;
});
MPage.method("setPageId",function(value){this.pageId=value;
});
MPage.method("getName",function(){return this.name;
});
MPage.method("setName",function(value){this.name=value;
});
MPage.method("getComponents",function(){return this.components;
});
MPage.method("setComponents",function(value){this.components=value;
});
MPage.method("addComponent",function(value){if(this.components===null){this.components=[];
}this.components.push(value);
});
}function SortMPageComponentRows(c1,c2){if(c1.getSequence()<c2.getSequence()){return -1;
}if(c1.getSequence()>c2.getSequence()){return 1;
}return 0;
}function SortMPageComponentCols(c1,c2){if(c1.getColumn()<c2.getColumn()){return -1;
}if(c1.getColumn()>c2.getColumn()){return 1;
}return SortMPageComponentRows(c1,c2);
}function SortMPageComponents(c1,c2){if(c1.getPageGroupSequence()<c2.getPageGroupSequence()){return -1;
}if(c1.getPageGroupSequence()>c2.getPageGroupSequence()){return 1;
}return SortMPageComponentCols(c1,c2);
}var CERN_EventListener=null;
var CERN_MPageComponents=null;
var CERN_TabManagers=null;
var STR_PAD_LEFT=1;
var STR_PAD_RIGHT=2;
var STR_PAD_BOTH=3;
var MPAGE_LOCALE=null;
var MPSERVICE_CONNECT_PATH="../../discern/mpages/reports/";
if(!XMLCclRequest){var XMLCclRequest=function(){var xmlHttp;
try{xmlHttp=new XMLHttpRequest();
}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHttp");
}catch(e){}}if(!xmlHttp){alert("Error creating the XMLHttpRequest object.");
}else{return xmlHttp;
}};
var PlaceRequest=function(request,method,program,async,params){request.open(method,MPSERVICE_CONNECT_PATH+program+"?parameters="+params+"&timestamp="+new Date().getTime(),async);
request.send(null);
return true;
};
}else{var PlaceRequest=function(request,method,program,async,params){request.open(method,program,async);
request.send(params);
return true;
};
}Array.prototype.addAll=function(v){if(v&&v.length>0){for(var x=0,xl=v.length;
x<xl;
x++){this.push(v[x]);
}}};
var MP_Core=function(){var m_numFormatter=null;
return{Criterion:function(person_id,encntr_id,provider_id,executable,static_content,position_cd,ppr_cd,debug_ind,help_file_local_ind,category_mean,backend_loc,locale_id){var m_patInfo=null;
var m_prsnlInfo=null;
this.person_id=person_id;
this.encntr_id=encntr_id;
this.provider_id=provider_id;
this.executable=executable;
this.static_content=static_content;
this.position_cd=position_cd;
this.ppr_cd=ppr_cd;
this.debug_ind=debug_ind;
this.help_file_local_ind=help_file_local_ind;
this.category_mean=category_mean;
this.backend_loc=backend_loc;
this.locale_id=(this.debug_ind)?"en_us":locale_id;
this.setPatientInfo=function(value){m_patInfo=value;
};
this.getPatientInfo=function(){return m_patInfo;
};
this.getPersonnelInfo=function(){if(!m_prsnlInfo){m_prsnlInfo=new MP_Core.PersonnelInformation(this.provider_id,this.person_id);
}return m_prsnlInfo;
};
},PatientInformation:function(){var m_dob=null;
var m_sex=null;
this.setSex=function(value){m_sex=value;
};
this.getSex=function(){return m_sex;
};
this.setDOB=function(value){m_dob=value;
};
this.getDOB=function(){return m_dob;
};
},ScriptRequest:function(component,loadTimerName){var m_comp=component;
var m_load=loadTimerName;
var m_name="";
var m_programName="";
var m_params=null;
var m_async=true;
this.getComponent=function(){return m_comp;
};
this.getLoadTimer=function(){return m_load;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setProgramName=function(value){m_programName=value;
};
this.getProgramName=function(){return m_programName;
};
this.setParameters=function(value){m_params=value;
};
this.getParameters=function(){return m_params;
};
this.setAsync=function(value){m_async=value;
};
this.isAsync=function(){return m_async;
};
},ScriptReply:function(component){var m_name="";
var m_status="F";
var m_err="";
var m_resp=null;
var m_comp=component;
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setStatus=function(value){m_status=value;
};
this.getStatus=function(){return m_status;
};
this.setError=function(value){m_err=value;
};
this.getError=function(){return m_err;
};
this.setResponse=function(value){m_resp=value;
};
this.getResponse=function(){return m_resp;
};
this.getComponent=function(){return m_comp;
};
},PersonnelInformation:function(prsnlId,patientId){var m_prsnlId=prsnlId;
var m_viewableEncntrs=null;
var patConObj=null;
try{patConObj=window.external.DiscernObjectFactory("PVCONTXTMPAGE");
if(patConObj){m_viewableEncntrs=patConObj.GetValidEncounters(patientId);
}}catch(e){}finally{patConObj=null;
}this.getPersonnelId=function(){return m_prsnlId;
};
this.getViewableEncounters=function(){return m_viewableEncntrs;
};
},XMLCclRequestWrapper:function(component,program,paramAr,async){var timerLoadComponent=MP_Util.CreateTimer(component.getComponentLoadTimerName(),component.getCriterion().category_mean);
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{if(recordData.STATUS_DATA.STATUS=="S"){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName(),component.getCriterion().category_mean);
try{var rootComponentNode=component.getRootComponentNode();
var secTitle=Util.Style.g("sec-total",rootComponentNode,"span");
secTitle[0].innerHTML=i18nCore.RENDERING_DATA+"...";
component.HandleSuccess(recordData);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}else{var errMsg=[];
var ss=null;
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length===undefined){ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.JS_ERROR,"</b><br /><ul><li>",i18nCore.MESSAGE,": ",err.message,"</li><li>",i18nCore.NAME,": ",err.name,"</li><li>",i18nCore.NUMBER,": ",(err.number&65535),"</li><li>",i18nCore.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(this.readyState==4&&this.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,"");
if(timerLoadComponent){timerLoadComponent.Abort();
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCclRequestWrapper_notComponent:function(loadTimerName,program,paramAr,async,HandleResponse){var timerLoadComponent=MP_Util.CreateTimer(loadTimerName);
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(info.readyState==4&&info.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){HandleResponse(recordData);
}else{if(recordData.STATUS_DATA.STATUS=="S"){HandleResponse(recordData);
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}HandleResponse(recordData);
}}}catch(err){log.error(err);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(info.readyState==4&&info.status!=200){HandleResponse(recordData,true);
if(timerLoadComponent){timerLoadComponent.Abort();
}}}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCCLRequestCallBack:function(component,request,funcCallback){var timerLoad=MP_Util.CreateTimer(request.getLoadTimer());
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
var reply=new MP_Core.ScriptReply(component);
reply.setName(request.getName());
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
var status=recordData.STATUS_DATA.STATUS;
reply.setStatus(status);
if(status=="Z"){reply.setResponse(recordData);
funcCallback(reply);
}else{if(status=="S"){reply.setResponse(recordData);
funcCallback(reply);
}else{var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
reply.setError(errMsg.join(""));
funcCallback(reply);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
timerLoad=null;
}}finally{if(timerLoad){timerLoad.Stop();
}}}else{if(info.readyState==4&&info.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
}funcCallback(reply);
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET",request.getProgramName(),request.isAsync());
info.send(request.getParameters().join(","));
},XMLCCLRequestThread:function(name,component,request){var m_name=name;
var m_comp=component;
var m_request=request;
m_request.setName(name);
this.getName=function(){return m_name;
};
this.getComponent=function(){return m_comp;
};
this.getRequest=function(){return m_request;
};
},XMLCCLRequestThreadManager:function(callbackFunction,component,handleFinalize){var m_threads=null;
var m_replyAr=null;
var m_isData=false;
var m_isError=false;
this.addThread=function(thread){if(m_threads==null){m_threads=[];
}m_threads.push(thread);
};
this.begin=function(){if(m_threads&&m_threads.length>0){for(x=m_threads.length;
x--;
){var thread=m_threads[x];
MP_Core.XMLCCLRequestCallBack(thread.getComponent(),thread.getRequest(),this.completeThread);
}}else{if(handleFinalize){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(null,component);
}}};
this.completeThread=function(reply){if(m_replyAr==null){m_replyAr=[];
}if(reply.getStatus()=="S"){m_isData=true;
}else{if(reply.getStatus()=="F"){m_isError=true;
}}m_replyAr.push(reply);
if(m_replyAr.length==m_threads.length){if(handleFinalize){if(m_isError){var errMsg=[];
for(var x=m_replyAr.length;
x--;
){var rep=m_replyAr[x];
if(rep.getStatus()=="F"){errMsg.push(rep.getError());
}}MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("<br />")),component,"");
}else{if(!m_isData){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(m_replyAr,component);
}}}else{callbackFunction(m_replyAr,component);
}}};
},MapObject:function(name,value){this.name=name;
this.value=value;
},TabItem:function(key,name,components,prefIdentifier){this.key=key;
this.name=name;
this.components=components;
this.prefIdentifier=prefIdentifier;
},TabManager:function(tabItem){var m_isLoaded=false;
var m_tabItem=tabItem;
var m_isExpandAll=false;
var m_isSelected=false;
this.toggleExpandAll=function(){m_isExpandAll=(!m_isExpandAll);
};
this.loadTab=function(){if(!m_isLoaded){m_isLoaded=true;
var components=m_tabItem.components;
if(components){for(var xl=components.length;
xl--;
){var component=components[xl];
if(component.isDisplayable()){component.InsertData();
}}}}};
this.getTabItem=function(){return m_tabItem;
};
this.getSelectedTab=function(){return m_isSelected;
};
this.setSelectedTab=function(value){m_isSelected=value;
};
},ReferenceRangeResult:function(){var m_valNLow=-1,m_valNHigh=-1,m_valCLow=-1,m_valCHigh=-1;
var m_uomNLow=null,m_uomNHigh=null,m_uomCLow=null,m_uomCHigh=null;
this.init=function(refRange,codeArray){var nf=GetNumericFormatter();
m_valCLow=nf.format(refRange.CRITICAL_LOW.NUMBER);
if(refRange.CRITICAL_LOW.UNIT_CD!=""){m_uomCLow=MP_Util.GetValueFromArray(refRange.CRITICAL_LOW.UNIT_CD,codeArray);
}m_valCHigh=nf.format(refRange.CRITICAL_HIGH.NUMBER);
if(refRange.CRITICAL_HIGH.UNIT_CD!=""){m_uomCHigh=MP_Util.GetValueFromArray(refRange.CRITICAL_HIGH.UNIT_CD,codeArray);
}m_valNLow=nf.format(refRange.NORMAL_LOW.NUMBER);
if(refRange.NORMAL_LOW.UNIT_CD!=""){m_uomNLow=MP_Util.GetValueFromArray(refRange.NORMAL_LOW.UNIT_CD,codeArray);
}m_valNHigh=nf.format(refRange.NORMAL_HIGH.NUMBER);
if(refRange.NORMAL_HIGH.UNIT_CD!=""){m_uomNHigh=MP_Util.GetValueFromArray(refRange.NORMAL_HIGH.UNIT_CD,codeArray);
}};
this.getNormalLow=function(){return m_valNLow;
};
this.getNormalHigh=function(){return m_valNHigh;
};
this.getNormalLowUOM=function(){return m_uomNLow;
};
this.getNormalHighUOM=function(){return m_uomNHigh;
};
this.getCriticalLow=function(){return m_valCLow;
};
this.getCriticalHigh=function(){return m_valCHigh;
};
this.getCriticalLowUOM=function(){return m_uomCLow;
};
this.getCriticalHighUOM=function(){return m_uomCHigh;
};
this.toNormalInlineString=function(){var low=(m_uomNLow!=null)?m_uomNLow.display:"";
var high=(m_uomNHigh!=null)?m_uomNHigh.display:"";
if(m_valNLow!=0||m_valNHigh!=0){return(m_valNLow+"&nbsp;"+low+" - "+m_valNHigh+"&nbsp;"+high);
}else{return"";
}};
this.toCriticalInlineString=function(){var low=(m_uomCLow!=null)?m_uomCLow.display:"";
var high=(m_uomCHigh!=null)?m_uomCHigh.display:"";
if(m_valCLow!=0||m_valCHigh!=0){return(m_valCLow+"&nbsp;"+low+" - "+m_valCHigh+"&nbsp;"+high);
}else{return"";
}};
},QuantityValue:function(){var m_val,m_precision;
var m_uom=null;
var m_refRange=null;
var m_rawValue=0;
var m_hasModifier=false;
this.init=function(result,codeArray){var quantityValue=result.QUANTITY_VALUE;
var referenceRange=result.REFERENCE_RANGE;
for(var l=0,ll=quantityValue.length;
l<ll;
l++){var numRes=quantityValue[l].NUMBER;
m_precision=quantityValue[l].PRECISION;
if(!isNaN(numRes)){m_val=MP_Util.Measurement.SetPrecision(numRes,m_precision);
m_rawValue=numRes;
}if(quantityValue[l].MODIFIER_CD!=""){var modCode=MP_Util.GetValueFromArray(quantityValue[l].MODIFIER_CD,codeArray);
if(modCode!=null){m_val=modCode.display+m_val;
m_hasModifier=true;
}}if(quantityValue[l].UNIT_CD!=""){m_uom=MP_Util.GetValueFromArray(quantityValue[l].UNIT_CD,codeArray);
}for(var m=0,ml=referenceRange.length;
m<ml;
m++){m_refRange=new MP_Core.ReferenceRangeResult();
m_refRange.init(referenceRange[m],codeArray);
}}};
this.getValue=function(){return m_val;
};
this.getRawValue=function(){return m_rawValue;
};
this.getUOM=function(){return m_uom;
};
this.getRefRange=function(){return m_refRange;
};
this.getPrecision=function(){return m_precision;
};
this.toString=function(){if(m_uom!=null){return(m_val+" "+m_uom.display);
}else{return m_val;
}};
this.hasModifier=function(){return m_hasModifier;
};
},Measurement:function(){var m_eventId=0;
var m_personId=0;
var m_encntrId=0;
var m_eventCode=null;
var m_dateTime=null;
var m_updateDateTime=null;
var m_result=null;
var m_normalcy=null;
this.init=function(eventId,personId,encntrId,eventCode,dateTime,resultObj,updateDateTime){m_eventId=eventId;
m_personId=personId;
m_encntrId=encntrId;
m_eventCode=eventCode;
m_dateTime=dateTime;
m_result=resultObj;
m_updateDateTime=updateDateTime;
};
this.getEventId=function(){return m_eventId;
};
this.getPersonId=function(){return m_personId;
};
this.getEncntrId=function(){return m_encntrId;
};
this.getEventCode=function(){return m_eventCode;
};
this.getDateTime=function(){return m_dateTime;
};
this.getUpdateDateTime=function(){return m_updateDateTime;
};
this.getResult=function(){return m_result;
};
this.setNormalcy=function(value){m_normalcy=value;
};
this.getNormalcy=function(){return m_normalcy;
};
},MenuItem:function(){var m_name="";
var m_desc="";
var m_id=0;
this.setDescription=function(value){m_desc=value;
};
this.getDescription=function(){return m_desc;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setId=function(value){m_id=value;
};
this.getId=function(){return m_id;
};
},CriterionFilters:function(criterion){var m_criterion=criterion;
var m_evalAr=[];
this.addFilter=function(type,value){m_evalAr.push(new MP_Core.MapObject(type,value));
};
this.checkFilters=function(){var pass=false;
var patInfo=m_criterion.getPatientInfo();
for(var x=m_evalAr.length;
x--;
){var filter=m_evalAr[x];
switch(filter.name){case MP_Core.CriterionFilters.SEX_MEANING:var sex=patInfo.getSex();
if(sex!=null){if(filter.value==sex.meaning){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_OLDER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob<=filter.value){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_YOUNGER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob>=filter.value){continue;
}}return false;
break;
default:alert("Unhandled criterion filter");
return false;
}}return true;
};
}};
function GetNumericFormatter(){if(m_numFormatter==null){m_numFormatter=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_numFormatter;
}}();
MP_Core.CriterionFilters.SEX_MEANING=1;
MP_Core.CriterionFilters.DOB_OLDER_THAN=2;
MP_Core.CriterionFilters.DOB_YOUNGER_THAN=3;
MP_Core.AppUserPreferenceManager=function(){var m_criterion=null;
var m_prefIdent="";
var m_jsonObject=null;
return{Initialize:function(criterion,preferenceIdentifier){m_criterion=criterion;
m_prefIdent=preferenceIdentifier;
m_jsonObject=null;
},LoadPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject!=null){return;
}else{var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=JSON.parse(recordData.PREF_STRING);
}else{if(recordData.STATUS_DATA.STATUS=="Z"){return;
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error retrieving user preferences "+errAr.join(",");
return;
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^"];
PlaceRequest(info,"GET","MP_GET_USER_PREFS",false,ar.join(","));
return;
}},GetPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject==null){this.LoadPreferences();
}return m_jsonObject;
},SavePreferences:function(){var body=document.body;
var groups=Util.Style.g("col-group",body,"div");
var grpId=0;
var colId=0;
var rowId=0;
var compId=0;
var jsonObject=new Object();
var userPrefs=jsonObject.user_prefs=new Object();
var pagePrefs=userPrefs.page_prefs=new Object();
var components=pagePrefs.components=[];
for(var x=0,xl=groups.length;
x<xl;
x++){grpId=x+1;
var liqLay=Util.Style.g("col-outer1",groups[x],"div");
if(liqLay.length>0){var cols=Util.gcs(liqLay[0]);
for(var y=0,yl=cols.length;
y<yl;
y++){colId=y+1;
var rows=Util.gcs(cols[y]);
for(var z=0,zl=rows.length;
z<zl;
z++){var component=new Object();
rowId=z+1;
compId=jQuery(rows[z]).attr("id");
component.id=compId;
component.group_seq=grpId;
component.col_seq=colId;
component.row_seq=rowId;
if(jQuery(rows[z]).hasClass("closed")){component.expanded=false;
}else{component.expanded=true;
}components.push(component);
}}}}WritePreferences(jsonObject);
m_jsonObject=jsonObject;
history.back();
},ClearPreferences:function(){WritePreferences(null);
history.back();
},GetComponentById:function(id){if(m_jsonObject!=null){var components=m_jsonObject.user_prefs.page_prefs.components;
for(var x=components.length;
x--;
){var component=components[x];
if(component.id==id){return component;
}}}return null;
}};
function WritePreferences(jsonObject,successMessage){var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){m_jsonObject=null;
}else{if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=jsonObject;
if(successMessage!=null&&successMessage.length>0){alert(successMessage);
}}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error saving user preferences: "+errAr.join(",");
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sJson=(jsonObject!=null)?JSON.stringify(jsonObject):"";
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^","^"+sJson+"^"];
PlaceRequest(info,"GET","MP_MAINTAIN_USER_PREFS",false,ar.join(","));
}}();
var MP_Util=function(){return{GetCriterion:function(js_criterion,static_content){var jsCrit=js_criterion.CRITERION;
var criterion=new MP_Core.Criterion(jsCrit.PERSON_ID,(jsCrit.ENCNTRS.length>0)?jsCrit.ENCNTRS[0].ENCNTR_ID:0,jsCrit.PRSNL_ID,jsCrit.EXECUTABLE,static_content,jsCrit.POSITION_CD,jsCrit.PPR_CD,(jsCrit.DEBUG_IND==1)?true:false,jsCrit.HELP_FILE_LOCAL_IND,jsCrit.CATEGORY_MEAN,jsCrit.BACKEND_LOCATION,jsCrit.LOCALE_ID);
var codeArray=MP_Util.LoadCodeListJSON(jsCrit.CODES);
var jsPatInfo=jsCrit.PATIENT_INFO;
var patInfo=new MP_Core.PatientInformation();
MP_Util.IncludeLocaleDefs(criterion.locale_id,CERN_static_content+"/js/locale");
if(jsPatInfo!==undefined){patInfo.setSex(MP_Util.GetValueFromArray(jsPatInfo.SEX_CD,codeArray));
if(jsPatInfo.DOB!=""){var dt=new Date();
dt.setISO8601(jsPatInfo.DOB);
patInfo.setDOB(dt);
}}criterion.setPatientInfo(patInfo);
return criterion;
},IncludeLocaleDefs:function(localeId,localeFolderLoc){var headID=document.getElementsByTagName("head")[0];
var newScript=document.createElement("script");
newScript.type="text/javascript";
var langId=localeId.substr(0,2);
var langLocaleId=localeId.substr(3,2);
switch(langId.toLowerCase()){case"en":if(langLocaleId.toLowerCase()==="au"){newScript.src=localeFolderLoc+"/locale.en_AU.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_AU);
}else{if(langLocaleId.toLowerCase()==="gb"){newScript.src=localeFolderLoc+"/locale.en_GB.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_GB);
}else{newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
}}break;
case"es":newScript.src=localeFolderLoc+"/locale.es.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.es_ES);
break;
case"de":newScript.src=localeFolderLoc+"/locale.de.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.de_DE);
break;
case"fr":newScript.src=localeFolderLoc+"/locale.fr.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.fr_FR);
break;
default:newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
break;
}},CalcLookbackDate:function(lookbackDays){var retDate=new Date();
var hrs=retDate.getHours();
hrs-=(lookbackDays*24);
retDate.setHours(hrs);
return retDate;
},CalcWithinTime:function(dateTime){return(GetDateDiffString(dateTime,null,null,true));
},CalcAge:function(birthDt,fromDate){fromDate=(fromDate==null)?new Date():fromDate;
return(GetDateDiffString(birthDt,fromDate,1,false));
},DisplayDateByOption:function(component,date){var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var dtFormatted="";
switch(component.getDateFormat()){case 1:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR));
case 2:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR));
case 3:return(MP_Util.CalcWithinTime(date));
case 4:return("&nbsp");
default:return df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);
}},DisplaySelectedTab:function(showDiv,anchorId){if(window.name=="a-tab0"){window.name="";
}else{window.name=showDiv+","+anchorId;
}var body=document.body;
var divs=Util.Style.g("div-tab-item",body);
for(var i=divs.length;
i--;
){if(divs[i].id==showDiv){divs[i].style.display="block";
}else{divs[i].style.display="none";
}}var anchors=Util.Style.g("anchor-tab-item",body);
for(var i=anchors.length;
i--;
){if(anchors[i].id==anchorId){anchors[i].className="anchor-tab-item active";
}else{anchors[i].className="anchor-tab-item inactive";
}}var custNode=_g("custView");
if(custNode!=null){custNode.href="";
custNode.innerHTML="";
}for(var yl=CERN_TabManagers.length;
yl--;
){var tabManager=CERN_TabManagers[yl];
var tabItem=tabManager.getTabItem();
if(tabItem.key==showDiv){tabManager.loadTab();
tabManager.setSelectedTab(true);
var components=tabItem.components;
if(components!=null&&components.length>0){for(var xl=components.length;
xl--;
){var component=components[xl];
MP_Util.Doc.AddCustomizeLink(component.getCriterion());
break;
}}}else{tabManager.setSelectedTab(false);
}}},OpenTab:function(compId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openTab();
}}},LaunchMenuSelection:function(compId,menuItemId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var crit=comp.getCriterion();
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openDropDown(menuItemId);
break;
}}},LaunchMenu:function(menuId,componentId){var menu=_g(menuId);
MP_Util.closeMenuInit(menu,componentId);
if(menu!=null){if(Util.Style.ccss(menu,"menu-hide")){_g(componentId).style.zIndex=2;
Util.Style.rcss(menu,"menu-hide");
}else{_g(componentId).style.zIndex=1;
Util.Style.acss(menu,"menu-hide");
}}},closeMenuInit:function(inMenu,compId){var menuId;
var docMenuId=compId+"Menu";
if(inMenu.id==docMenuId){menuId=compId;
}if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}function menuLeave(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}},CreateTitleText:function(component,nbr,optionalText){var ar=[];
if(component.isLineNumberIncluded()){ar.push("(",nbr,")");
}if(optionalText&&optionalText!=""){ar.push(" ",optionalText);
}return ar.join("");
},GetContentClass:function(component,nbr){if(component.isScrollingEnabled()){var scrollNbr=component.getScrollNumber();
if(nbr>=scrollNbr&&scrollNbr>0){return"content-body scrollable";
}}return"content-body";
},CreateTimer:function(timerName,subTimerName,metaData1,metaData2,metaData3){try{var slaTimer=window.external.DiscernObjectFactory("SLATIMER");
}catch(err){return null;
}if(slaTimer){slaTimer.TimerName=timerName;
if(subTimerName){slaTimer.SubtimerName=subTimerName;
}if(metaData1){slaTimer.Metadata1=String(metaData1);
}if(metaData2){slaTimer.Metadata2=String(metaData2);
}if(metaData3){slaTimer.Metadata3=String(metaData3);
}slaTimer.Start();
return slaTimer;
}else{return null;
}},GetCodeSet:function(codeSet,async,displaySortOrder){var codes=new Array();
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="S"){codes=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
}return codes;
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sendVal="^MINE^, "+codeSet+".0";
if(displaySortOrder!=null&&(typeof(displaySortOrder))=="string"){var dispSortDir=displaySortOrder.toLowerCase();
if(dispSortDir=="asc"||dispSortDir=="desc"){sendVal+=(",^"+dispSortDir+"^");
}}PlaceRequest(info,"GET","MP_LAB_GET_CODESET",async,sendVal);
return codes;
},GetCodeByMeaning:function(mapCodes,meaning){for(var x=mapCodes.length;
x--;
){var code=mapCodes[x].value;
if(code.meaning==meaning){return code;
}}},GetItemFromMapArray:function(mapItems,item){for(var x=mapItems.length;
x--;
){if(mapItems[x].name==item){return mapItems[x].value;
}}},AddItemToMapArray:function(mapItems,key,value){var ar=MP_Util.GetItemFromMapArray(mapItems,key);
if(ar==null){ar=[];
mapItems.push(new MP_Core.MapObject(key,ar));
}ar.push(value);
},LookBackTime:function(component){var i18nCore=i18n.discernabu;
var remainder=0;
var lookbackDays=component.getLookbackDays();
if(lookbackDays==0){return(i18nCore.SELECTED_VISIT);
}else{if(lookbackDays==1){return(i18nCore.LAST_N_HOURS.replace("{0}",lookbackDays*24));
}else{return(i18nCore.LAST_N_DAYS.replace("{0}",lookbackDays));
}}},CreateClinNoteLink:function(patient_id,encntr_id,event_id,display,docTypeFlag){var docType=(docTypeFlag&&docTypeFlag>0)?docTypeFlag:1;
var doclink="";
if(event_id>0){var ar=[];
ar.push(patient_id,encntr_id,event_id,docType);
doclink="<a href=javascript:MP_Util.LaunchClinNoteViewer("+ar.join(",")+");>"+display+"</a>";
}else{doclink=display;
}return(doclink);
},LaunchRTFViewer:function(eventId,docTypeFlag){var ar=[];
ar.push("^mine^",eventId+".0",docTypeFlag);
CCLLINK("mp_clin_smry_clinicaldocs",ar.join(","),1);
},LaunchClinNoteViewer:function(patient_id,encntr_id,event_id,docTypeFlag){try{var sParms=patient_id+"|"+encntr_id+"|["+event_id+"]|Documents|15|CLINNOTES|3|CLINNOTES|1";
var tempDate=new Date();
MPAGES_EVENT("CLINICALNOTE",sParms);
var tempDate2=new Date();
if(tempDate2-tempDate<=1000){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}}catch(err){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}},HandleNoDataResponse:function(nameSpace){var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
return("<h3 class='"+ns+"info-hd'><span class='res-normal'>"+i18nCore.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+i18nCore.NO_RESULTS_FOUND+"</span>");
},HandleErrorResponse:function(nameSpace,errorMessage){var ar=[];
var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
ar.push("<h3 class='",ns,"info-hd'><span class='res-normal'>",i18nCore.ERROR_RETREIVING_DATA,"</span></h3>");
ar.push("<dl class='",ns,"info'><dt><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dt><dd><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dd></dl>");
if(errorMessage!=null&&errorMessage.length>0){ar.push("<h4 class='",ns,"det-hd'><span>DETAILS</span></h4><div class='hvr'><dl class='",ns,"det'><dd><span>",errorMessage,"</span></dd></dl></div>");
}return ar.join("");
},GetValueFromArray:function(name,array){if(array!=null){for(var x=0,xi=array.length;
x<xi;
x++){if(array[x].name==name){return(array[x].value);
}}}return(null);
},LoadCodeListJSON:function(parentElement){var codeArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var codeObject=new Object();
codeElement=parentElement[x];
codeObject.codeValue=codeElement.CODE;
codeObject.display=codeElement.DISPLAY;
codeObject.description=codeElement.DESCRIPTION;
codeObject.codeSet=codeElement.CODE_SET;
codeObject.sequence=codeElement.SEQUENCE;
codeObject.meaning=codeElement.MEANING;
var mapObj=new MP_Core.MapObject(codeObject.codeValue,codeObject);
codeArray.push(mapObj);
}}return(codeArray);
},LoadPersonelListJSON:function(parentElement){var personnelArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var perObject=new Object();
codeElement=parentElement[x];
perObject.id=codeElement.ID;
perObject.fullName=codeElement.PROVIDER_NAME.NAME_FULL;
perObject.firstName=codeElement.PROVIDER_NAME.NAME_FIRST;
perObject.middleName=codeElement.PROVIDER_NAME.NAME_MIDDLE;
perObject.lastName=codeElement.PROVIDER_NAME.NAME_LAST;
perObject.userName=codeElement.PROVIDER_NAME.USERNAME;
perObject.initials=codeElement.PROVIDER_NAME.INITIALS;
perObject.title=codeElement.PROVIDER_NAME.TITLE;
var mapObj=new MP_Core.MapObject(perObject.id,perObject);
personnelArray[x]=mapObj;
}}return(personnelArray);
},WriteToFile:function(sText){try{var ForAppending=8;
var TriStateFalse=0;
var fso=new ActiveXObject("Scripting.FileSystemObject");
var newFile=fso.OpenTextFile("c:\\temp\\test.txt",ForAppending,true,TriStateFalse);
newFile.write(sText);
newFile.close();
}catch(err){var strErr="Error:";
strErr+="\nNumber:"+err.number;
strErr+="\nDescription:"+err.description;
document.write(strErr);
}},CalculateAge:function(bdate){var age;
var bdate=new Date(bdate);
var byear=bdate.getFullYear();
var bmonth=bdate.getMonth();
var bday=bdate.getDate();
var bhours=bdate.getHours();
today=new Date();
year=today.getFullYear();
month=today.getMonth();
day=today.getDate();
hours=today.getHours();
if(year==byear&&(day==bday)){age=hours-bhours;
age+=" Hours";
return age;
}else{if(year==byear&&(month==bmonth)){age=day-bday;
age+=" Days";
return age;
}}if(year==byear){age=month-bmonth;
age+=" Months";
return age;
}else{if(month<bmonth){age=year-byear-1;
}else{if(month>bmonth){age=year-byear;
}else{if(month==bmonth){if(day<bday){age=year-byear-1;
}else{if(day>bday){age=year-byear;
}else{if(day==bday){age=year-byear;
}}}}}}}age+=" Years";
return age;
},pad:function(str,len,pad,dir){if(typeof(len)=="undefined"){var len=0;
}if(typeof(pad)=="undefined"){var pad=" ";
}if(typeof(dir)=="undefined"){var dir=STR_PAD_RIGHT;
}if(len+1>=str.length){switch(dir){case STR_PAD_LEFT:str=Array(len+1-str.length).join(pad)+str;
break;
case STR_PAD_BOTH:var right=Math.ceil((padlen=len-str.length)/2);
var left=padlen-right;
str=Array(left+1).join(pad)+str+Array(right+1).join(pad);
break;
default:str=str+Array(len+1-str.length).join(pad);
break;
}}return str;
},GraphResults:function(personId,encntrId,eventCd,staticContent,groupId,providerId,positionCd,pprCD,lookBackUnits,lookBackType){var wParams="left=0,top=0,width=1200,height=700,toolbar=no";
var sParams="^MINE^,"+personId+","+encntrId+","+eventCd+",^"+unescape(staticContent)+"\\discrete-graphing^,"+groupId+","+providerId+","+positionCd+","+pprCD+","+lookBackUnits+","+lookBackType+","+1;
var graphCall="javascript:CCLLINK('mp_graph_results', '"+sParams+"',1)";
javascript:CCLNEWSESSIONWINDOW(graphCall,"_self",wParams,0,1);
Util.preventDefault();
},ReleaseRequestReference:function(reqObj){if(XMLCCLREQUESTOBJECTPOINTER){for(var id in XMLCCLREQUESTOBJECTPOINTER){if(XMLCCLREQUESTOBJECTPOINTER[id]==reqObj){delete (XMLCCLREQUESTOBJECTPOINTER[id]);
}}}},CreateAutoSuggestBoxHtml:function(component){var searchBoxHTML=[];
var compNs=component.getStyles().getNameSpace();
searchBoxHTML.push("<div class='search-box-div'><form name='contentForm'><input type='text' id='",compNs,"contentCtrl'"," class='search-box'></form></div>");
return searchBoxHTML.join("");
},AddAutoSuggestControl:function(component,searchTypeFlag){new AutoSuggestControl(component,searchNomenclature,addNomenclatureFromAutoSuggest,searchTypeFlag);
}};
function GetDateDiffString(beginDate,endDate,mathFlag,abbreviateFlag){var i18nCore=i18n.discernabu;
var timeDiff=0;
var returnVal="";
endDate=(endDate==null)?new Date():endDate;
mathFlag=(mathFlag==null)?0:mathFlag;
var one_minute=1000*60;
var one_hour=one_minute*60;
var one_day=one_hour*24;
var one_week=one_day*7;
var one_month=one_day*(365/12);
var one_year=one_month*12;
var valMinutes=0;
var valHours=0;
var valDays=0;
var valWeeks=0;
var valMonths=0;
var valYears=0;
timeDiff=(endDate.getTime()-beginDate.getTime());
var mathFunc=null;
var comparisonFunc=null;
if(mathFlag==0){mathFunc=function(val){return Math.ceil(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<=upperVal);
};
}else{mathFunc=function(val){return Math.floor(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<upperVal);
};
}valMinutes=mathFunc(timeDiff/one_minute);
valHours=mathFunc(timeDiff/one_hour);
valDays=mathFunc(timeDiff/one_day);
valWeeks=mathFunc(timeDiff/one_week);
valMonths=mathFunc(timeDiff/one_month);
valYears=mathFunc(timeDiff/one_year);
if(comparisonFunc(valHours,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MINS.replace("{0}",valMinutes)):(i18nCore.X_MINUTES.replace("{0}",valMinutes));
}else{if(comparisonFunc(valDays,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_HOURS.replace("{0}",valHours)):(i18nCore.X_HOURS.replace("{0}",valHours));
}else{if(comparisonFunc(valWeeks,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_DAYS.replace("{0}",valDays)):(i18nCore.X_DAYS.replace("{0}",valDays));
}else{if(comparisonFunc(valMonths,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_WEEKS.replace("{0}",valWeeks)):(i18nCore.X_WEEKS.replace("{0}",valWeeks));
}else{if(comparisonFunc(valYears,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MONTHS.replace("{0}",valMonths)):(i18nCore.X_MONTHS.replace("{0}",valMonths));
}else{returnVal=abbreviateFlag?(i18nCore.WITHIN_YEARS.replace("{0}",valYears)):(i18nCore.X_YEARS.replace("{0}",valYears));
}}}}}return(returnVal);
}}();
MP_Util.Doc=function(){var isExpandedAll=false;
return{InitMPageTabLayout:function(arMapObjects,title){var arItems=[];
var sc="",helpFile="",helpURL="",debugInd=false;
var bDisplayBanner=false;
var criterion=null;
var custInd=true;
var anchorArray=null;
for(var x=0,xl=arMapObjects.length;
x<xl;
x++){var key=arMapObjects[x].name;
var page=arMapObjects[x].value;
criterion=page.getCriterion();
arItems.push(new MP_Core.TabItem(key,page.getName(),page.getComponents(),criterion.category_mean));
sc=criterion.static_content;
debugInd=criterion.debug_ind;
helpFile=page.getHelpFileName();
helpURL=page.getHelpFileURL();
custInd=page.getCustomizeEnabled();
anchorArray=page.getTitleAnchors();
if(page.isBannerEnabled()){bDisplayBanner=page.isBannerEnabled();
}}MP_Util.Doc.InitTabLayout(arItems,title,sc,helpFile,helpURL,bDisplayBanner,0,criterion,custInd,anchorArray);
},InitTabLayout:function(arTabItems,title,sc,helpFile,helpURL,includeBanner,debugInd,criterion,custInd,anchorArray){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,debugInd,custInd,anchorArray);
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(includeBanner){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
AddPageTabs(arTabItems,body);
CERN_TabManagers=[];
for(var x=0,xl=arTabItems.length;
x<xl;
x++){var tabItem=arTabItems[x];
var tabManager=new MP_Core.TabManager(tabItem);
if(x==0){tabManager.setSelectedTab(true);
}CERN_TabManagers.push(tabManager);
CreateLiquidLayout(tabItem.components,_g(arTabItems[x].key));
}MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},InitLayout:function(mPage){var body=document.body;
var i18nCore=i18n.discernabu;
var criterion=mPage.getCriterion();
MP_Util.Doc.AddPageTitle(mPage.getName(),body,criterion.debug_ind,mPage.getCustomizeEnabled(),mPage.getTitleAnchors());
var sc=criterion.static_content;
var helpFile=mPage.getHelpFileName();
var helpURL=mPage.getHelpFileURL();
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(mPage.isBannerEnabled()){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
CreateLiquidLayout(mPage.getComponents(),body);
MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},CustomizeLayout:function(title,components){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,0,false,null);
MP_Util.Doc.AddClearPreferences(body);
MP_Util.Doc.AddSavePreferences(body);
body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.USER_CUST_DISCLAIMER+"</span></div>";
var compAr=[];
for(var x=components.length;
x--;
){var component=components[x];
if(component.getColumn()!=99){compAr.push(component);
}}CreateCustomizeLiquidLayout(compAr,body);
SetupExpandCollapse();
},GetComments:function(par,personnelArray){var com="",recDate="";
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
for(var j=0,m=par.COMMENTS.length;
j<m;
j++){if(personnelArray.length!=null){if(par.COMMENTS[j].RECORDED_BY){perCodeObj=MP_Util.GetValueFromArray(par.COMMENTS[j].RECORDED_BY,personnelArray);
}if(par.COMMENTS[j].RECORDED_DT_TM!=""){recDate=df.formatISO8601(par.COMMENTS[j].RECORDED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}if(j>0){com+="<br />";
}com+=recDate+" -  "+perCodeObj.fullName+"<br />"+par.COMMENTS[j].COMMENT_TEXT;
}}return com;
},FinalizeComponent:function(contentHTML,component,countText){var styles=component.getStyles();
var rootComponentNode=component.getRootComponentNode();
var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=countText;
var node=component.getSectionContentNode();
node.innerHTML=contentHTML;
MP_Util.Doc.InitHovers(styles.getInfo(),node);
MP_Util.Doc.InitSubToggles(node,"sub-sec-hd-tgl");
MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",node,"div"),component.getScrollNumber(),"1.6");
},InitScrolling:function(content,num,ht){for(var k=0;
k<content.length;
k++){MP_Util.Doc.InitSectionScrolling(content[k],num,ht);
}},InitSectionScrolling:function(sec,num,ht){var th=num*ht;
var totalHeight=th+"em";
sec.style.height=totalHeight;
sec.style.overflowY="scroll";
sec.style.overflowX="hidden";
},InitHovers:function(trg,par){gen=Util.Style.g(trg,par,"DL");
for(var i=0,l=gen.length;
i<l;
i++){var m=gen[i];
if(m){var nm=Util.gns(Util.gns(m));
if(nm){if(Util.Style.ccss(nm,"hvr")){hs(m,nm);
}}}}},InitSubToggles:function(par,tog){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g(tog,par,"span");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}},ExpandCollapseAll:function(){var i18nCore=i18n.discernabu;
var allSections=Util.Style.g("section");
var expNode=_g("expAll");
if(isExpandedAll){for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.acss(allSections[i],"closed");
secHandle.innerHTML="+";
secHandle.title=i18nCore.SHOW_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.acss(allSubSections[j],"closed");
subSecTgl.innerHTML="+";
subSecTgl.title=i18nCore.SHOW_SECTION;
}}expNode.innerHTML=i18nCore.EXPAND_ALL;
}isExpandedAll=false;
}else{for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.rcss(allSections[i],"closed");
secHandle.innerHTML="-";
secHandle.title=i18nCore.HIDE_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.rcss(allSubSections[j],"closed");
subSecTgl.innerHTML="-";
subSecTgl.title=i18nCore.HIDE_SECTION;
}}expNode.innerHTML=i18nCore.COLLAPSE_ALL;
}isExpandedAll=true;
}},AddPageTitle:function(title,bodyTag,debugInd,custInd,anchorArray){var i18nCore=i18n.discernabu;
var ar=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<div class='pg-hd'>");
ar.push("<h1><span class=pg-title>",title,"</span></h1><span id=pageCtrl class=page-ctrl>");
if(anchorArray!=null){for(var x=0,xl=anchorArray.length;
x<xl;
x++){ar.push(anchorArray[x]);
}}ar.push("<a id=expAll onclick='javascript:MP_Util.Doc.ExpandCollapseAll()'>",i18nCore.EXPAND_ALL,"</a>");
if(custInd){ar.push("<a id=custView></a>");
}ar.push("<a id=helpMenu></a></span></div>");
bodyTag.innerHTML+=ar.join("");
return;
},AddHelpLink:function(staticContent,helpFile){var i18nCore=i18n.discernabu;
if(helpFile!=null&&helpFile!=""){var helpNode=_g("helpMenu");
helpNode.href=staticContent+"\\html\\"+helpFile;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddHelpURL:function(staticContent,url){var i18nCore=i18n.discernabu;
if(url!=null&&url!=""){var helpNode=_g("helpMenu");
helpNode.href=url;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddClearPreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var clearPrefNode=Util.cep("A",{id:"clearPrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.ClearPreferences();"});
clearPrefNode.innerHTML=i18nCore.CLEAR_PREFERENCES;
Util.ac(clearPrefNode,pageCtrl);
},AddSavePreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var savePrefNode=Util.cep("A",{id:"savePrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.SavePreferences();"});
savePrefNode.innerHTML=i18nCore.SAVE_PREFERENCES;
Util.ac(savePrefNode,pageCtrl);
},AddCustomizeLink:function(criterion){var i18nCore=i18n.discernabu;
var custNode=_g("custView");
if(custNode!=null){custNode.innerHTML=i18nCore.CUSTOMIZE;
var compReportIds=GetPageReportIds();
custNode.href=criterion.static_content+"\\user-customization\\html\\cust.html?personnelId="+criterion.provider_id+"&positionCd="+criterion.position_cd+"&categoryMean="+GetPreferenceIdentifier()+"&localeId="+criterion.locale_id;
custNode.href+=(compReportIds.length>0)?"&reportIds="+compReportIds.join(","):"";
}},RenderLayout:function(){if(CERN_TabManagers!=null){var tabManager=null;
if(window.name.length>0){var paramList=window.name.split(",");
MP_Util.DisplaySelectedTab(paramList[0],paramList[1]);
}else{tabManager=CERN_TabManagers[0];
tabManager.setSelectedTab(true);
tabManager.loadTab();
}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var comp=CERN_MPageComponents[x];
if(comp.isDisplayable()){comp.InsertData();
}}}}},ExpandCollapse:function(){var i18nCore=i18n.discernabu;
var gpp=Util.gp(Util.gp(this));
if(Util.Style.ccss(gpp,"closed")){Util.Style.rcss(gpp,"closed");
this.innerHTML="-";
this.title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(gpp,"closed");
this.innerHTML="+";
this.title=i18nCore.SHOW_SECTION;
}}};
function GetPreferenceIdentifier(){var prefIdentifier="";
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
return tabItem.prefIdentifier;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var criterion=CERN_MPageComponents[x].getCriterion();
return criterion.category_mean;
}}}return prefIdentifier;
}function GetPageReportIds(){var ar=[];
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
var components=tabItem.components;
if(components!=null&&components.length>0){for(var y=components.length;
y--;
){ar.push(components[y].getReportId());
}}break;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){ar.push(CERN_MPageComponents[x].getReportId());
}}}return ar;
}function GetComponentArray(components){var grpAr=[];
var colAr=[];
var rowAr=[];
var curCol=-1;
var curGrp=-1;
var sHTML=[];
if(components!=null){components.sort(SortMPageComponents);
for(var x=0,xl=components.length;
x<xl;
x++){var component=components[x];
if(CERN_MPageComponents==null){CERN_MPageComponents=[];
}CERN_MPageComponents.push(component);
if(component.isDisplayable()){var compGrp=component.getPageGroupSequence();
var compCol=component.getColumn();
if(compGrp!=curGrp){curCol=-1;
colAr=[];
grpAr.push(colAr);
curGrp=compGrp;
}if(compCol!=curCol){rowAr=[];
colAr.push(rowAr);
curCol=compCol;
}rowAr.push(component);
}}}return grpAr;
}function CreateCustomizeLiquidLayout(components,parentNode){var sHTML=[];
var grpAr=GetComponentArray(components);
sHTML.push("<div class=pref-columns>");
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
sHTML.push("<div class='col-group three-col'>");
sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var comps=colAr[y];
var colClassName="col"+(y+1)+" cust-col";
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}for(var y=colLen+1;
y<=3;
y++){var colClassName="col"+(y)+" cust-col";
sHTML.push("<div class='",colClassName,"'></div>");
}sHTML.push("</div></div></div></div>");
}sHTML.push("</div>");
parentNode.innerHTML+=sHTML.join("");
}function CreateLiquidLayout(components,parentNode){var grpAr=GetComponentArray(components);
var sHTML=[];
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
if(colLen==1){sHTML.push("<div class='col-group one-col'>");
}else{if(colLen==2){sHTML.push("<div class='col-group two-col'>");
}else{sHTML.push("<div class='col-group three-col'>");
}}sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var colClassName="col"+(y+1);
var comps=colAr[y];
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}sHTML.push("</div></div></div></div>");
}parentNode.innerHTML+=sHTML.join("");
}function SetupExpandCollapse(){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g("sec-hd-tgl");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}}function CreateCompDiv(component){var i18nCore=i18n.discernabu;
var ar=[];
var style=component.getStyles();
var ns=style.getNameSpace();
var compId=style.getId();
var secClass=style.getClassName();
var tabLink=component.getLink();
var loc=component.getCriterion().static_content;
var tglCode=(!component.isAlwaysExpanded())?["<span class='",style.getHeaderToggle(),"' title='",i18nCore.HIDE_SECTION,"'>-</span>"].join(""):"";
if(!component.isExpanded()&&!component.isAlwaysExpanded()){secClass+=" closed";
}var sAnchor=(tabLink!=""&&component.getCustomizeView()==false)?CreateComponentAnchor(component):component.getLabel();
ar.push("<div id='",style.getId(),"' class='",secClass,"'>","<h2 class='",style.getHeaderClass(),"'>",tglCode,"<span class='",style.getTitle(),"'><span>",sAnchor,"</span>");
if(component.getCustomizeView()==false){ar.push("<span class='",style.getTotal(),"'>",i18nCore.LOADING_DATA+"...","</span>");
if(component.isPlusAddEnabled()){ar.push("<a id='",ns,"Add' class=addPlus href=javascript:MP_Util.OpenTab('",compId,"');><img src='",loc,"\\images\\3941.gif'>",i18nCore.ADD,"</a>");
var menuItems=component.getMenuItems();
if(menuItems!=null||menuItems>0){var menuId=compId+"Menu";
ar.push("<a id='",ns,"Drop' class='drop-Down'><img src='",loc,"\\images\\3943_16.gif' onclick='javascript:MP_Util.LaunchMenu(\"",menuId,'", "',compId,"\");'></a>");
ar.push("<div class='form-menu menu-hide' id='",menuId,"'><span>");
for(var x=0,xl=menuItems.length;
x<xl;
x++){var item=menuItems[x];
ar.push("<div>");
ar.push("<a id='lnkID",x,"' href='#' onclick='javascript:MP_Util.LaunchMenuSelection(\"",compId,'",',item.getId(),");'>",item.getDescription(),"</a>");
ar.push("</div>");
}ar.push("</span></div>");
}}}ar.push("</span></h2>");
if(component.getCustomizeView()==false){if(component.getScope()>0){ar.push("<div class=sub-title-disp>",CreateSubTitleText(component),"</div>");
}}ar.push("<div id='",style.getContentId(),"' class='",style.getContentClass(),"'></div></div>");
var arHtml=ar.join("");
return arHtml;
}function CreateSubTitleText(component){var i18nCore=i18n.discernabu;
var subTitleText="";
var scope=component.getScope();
var lookbackDays=component.getLookbackDays();
var lookbackUnits=(lookbackDays>0)?lookbackDays:component.getLookbackUnits();
var lookbackFlag=(lookbackDays>0)?2:component.getLookbackUnitTypeFlag();
if(scope>0){if(lookbackFlag>0&&lookbackUnits>0){var replaceText="";
switch(lookbackFlag){case 1:replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookbackUnits);
break;
case 2:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookbackUnits);
break;
case 3:replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookbackUnits);
break;
case 4:replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookbackUnits);
break;
case 5:replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookbackUnits);
break;
}switch(scope){case 1:subTitleText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
break;
case 2:subTitleText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
break;
}}else{switch(scope){case 1:subTitleText=i18nCore.All_VISITS;
break;
case 2:subTitleText=i18nCore.SELECTED_VISIT;
break;
}}}return subTitleText;
}function CreateComponentAnchor(component){var i18nCore=i18n.discernabu;
var style=component.getStyles();
var criterion=component.getCriterion();
var sParms='javascript:APPLINK(0,"'+criterion.executable+'","/PERSONID='+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+component.getLink()+'^")';
var sAnchor="<a id="+style.getLink()+" title='"+i18nCore.GO_TO_TAB.replace("{0}",component.getLink())+"' href='"+sParms+"'>"+component.getLabel()+"</a>";
return sAnchor;
}function AddPageTabs(items,bodyTag){var ar=[];
var divAr=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<ul class=tabmenu>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
var activeInd=(x==0)?1:0;
ar.push(CreateTabLi(item,activeInd,x));
divAr.push("<div id='",item.key,"' class='div-tab-item'></div>");
}ar.push("</ul>");
bodyTag.innerHTML+=(ar.join("")+divAr.join(""));
}function CreateTabLi(item,activeInd,sequence){var ar=[];
var tabName="";
tabName=item.name;
ar.push("<li>");
var seqClass="a-tab"+sequence;
if(activeInd){ar.push("<a id='",seqClass,"' class='anchor-tab-item active' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}else{ar.push("<a id='",seqClass,"' class='anchor-tab-item inactive' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}ar.push("</li>");
return(ar.join(""));
}}();
MP_Util.Measurement=function(){var m_nf=null;
return{GetString:function(result,codeArray,dateMask){var obj=MP_Util.Measurement.GetObject(result,codeArray);
if(obj instanceof MP_Core.QuantityValue){return obj.toString();
}else{if(obj instanceof Date){return obj.format(dateMask);
}else{return obj;
}}},GetObject:function(result,codeArray){switch(result.CLASSIFICATION.toUpperCase()){case"QUANTITY_VALUE":return GetQuantityValue(result,codeArray);
case"STRING_VALUE":return(GetStringValue(result));
case"DATE_VALUE":return(GetDateValue(result));
case"CODE_VALUE":return(GetCodedResult(result));
case"ENCAPSULATED_VALUE":return(GetEncapsulatedValue(result));
}},SetPrecision:function(num,dec){var nf=GetNumericFormatter();
return nf.format(num,"^."+dec);
}};
function GetNumericFormatter(){if(m_nf==null){m_nf=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_nf;
}function GetEncapsulatedValue(result){var encap=result.ENCAPSULATED_VALUE;
var ar=[];
for(var n=0,nl=encap.length;
n<nl;
n++){var txt=encap[n].TEXT_PLAIN;
if(txt!=null&&txt.length>0){ar.push(txt);
}}return ar.join("");
}function GetQuantityValue(result,codeArray){var qv=new MP_Core.QuantityValue();
qv.init(result,codeArray);
return qv;
}function GetDateValue(result){for(var x=0,xl=result.DATE_VALUE.length;
x<xl;
x++){var date=result.DATE_VALUE[x];
if(date.DATE!=""){var dateTime=new Date();
dateTime.setISO8601(date.DATE);
return dateTime;
}}return null;
}function GetCodedResult(result){var cdValue=result.CODE_VALUE;
var ar=[];
for(var n=0,nl=cdValue.length;
n<nl;
n++){var values=cdValue[n].VALUES;
for(var p=0,pl=values.length;
p<pl;
p++){ar.push(values[p].SOURCE_STRING);
}var sOther=cdValue[n].OTHER_RESPONSE;
if(sOther!=""){ar.push(sOther);
}}return ar.join(", ");
}function GetStringValue(result){var strValue=result.STRING_VALUE;
var ar=[];
for(var n=0,nl=strValue.length;
n<nl;
n++){ar.push(strValue[n].VALUE);
}return ar.join(", ");
}}();
document.getElementsByClassName=function(cl,e){var retnode=[];
var clssnm=new RegExp("\\b"+cl+"\\b");
var elem=this.getElementsByTagName("*",e);
for(var u=0;
u<elem.length;
u++){var classes=elem[u].className;
if(clssnm.test(classes)){retnode.push(elem[u]);
}}return retnode;
};
Function.prototype.bind=function(object){var method=this;
return function(){return method.apply(object,arguments);
};
};
function EventListener(){this.events=[];
this.builtinEvts=[];
}EventListener.prototype.getActionIdx=function(obj,evt,action,binding){if(obj&&evt){var curel=this.events[obj][evt];
if(curel){var len=curel.length;
for(var i=len-1;
i>=0;
i--){if(curel[i].action==action&&curel[i].binding==binding){return i;
}}}else{return -1;
}}return -1;
};
EventListener.prototype.addListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){if(this.getActionIdx(obj,evt,action,binding)==-1){var curevt=this.events[obj][evt];
curevt[curevt.length]={action:action,binding:binding};
}}else{this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}}else{this.events[obj]=[];
this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}};
EventListener.prototype.removeListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){var idx=this.getActionIdx(obj,evt,action,binding);
if(idx>=0){this.events[obj][evt].splice(idx,1);
}}}};
EventListener.prototype.removeAllListeners=function(obj,binding){if(this.events[obj]){for(var el=this.events[obj].length;
el--;
){if(this.events[obj][el]){for(var ev=this.events[obj][el].length;
ev--;
){if(this.events[obj][el][ev].binding==binding){this.events[obj][el].splice(ev,1);
}}}}}};
EventListener.prototype.fireEvent=function(e,obj,evt,args){if(!e){e=window.event;
}if(obj&&this.events){var evtel=this.events[obj];
if(evtel){var curel=evtel[evt];
if(curel){for(var act=curel.length;
act--;
){var action=curel[act].action;
if(curel[act].binding){action=action.bind(curel[act].binding);
}action(e,args);
}}}}};
CERN_EventListener=new EventListener();
EventListener.EVENT_CLINICAL_EVENT=1;
EventListener.EVENT_ORDER_ACTION=2;
(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];
this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};
function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");
}this.benchmark=benchmark;
function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);
}else{alert(s);
}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";
}var rows=table.tBodies[0].rows;
if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;
for(var i=0;
i<l;
i++){var p=false;
if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);
}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);
}}if(!p){p=detectParserForColumn(table,cells[i]);
}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";
}list.push(p);
}}if(table.config.debug){log(parsersDebug);
}return list;
}function detectParserForColumn(table,node){var l=parsers.length;
for(var i=1;
i<l;
i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];
}}return parsers[0];
}function getParserById(name){var l=parsers.length;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];
}}return false;
}function buildCache(table){if(table.config.debug){var cacheTime=new Date();
}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};
for(var i=0;
i<totalRows;
++i){var c=table.tBodies[0].rows[i],cols=[];
cache.row.push($(c));
for(var j=0;
j<totalCells;
++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));
}cols.push(i);
cache.normalized.push(cols);
cols=null;
}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);
}return cache;
}function getElementText(config,node){if(!node){return"";
}var t="";
if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;
}else{t=node.innerHTML;
}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);
}else{t=$(node).text();
}}return t;
}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date();
}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];
for(var i=0;
i<totalRows;
i++){rows.push(r[n[i][checkCell]]);
if(!table.config.appender){var o=r[n[i][checkCell]];
var l=o.length;
for(var j=0;
j<l;
j++){tableBody[0].appendChild(o[j]);
}}}if(table.config.appender){table.config.appender(table,rows);
}rows=null;
if(table.config.debug){benchmark("Rebuilt table:",appendTime);
}applyWidget(table);
setTimeout(function(){$(table).trigger("sortEnd");
},0);
}function buildHeaders(table){if(table.config.debug){var time=new Date();
}var meta=($.metadata)?true:false,tableHeadersRows=[];
for(var i=0;
i<table.tHead.rows.length;
i++){tableHeadersRows[i]=0;
}$tableHeaders=$("thead th",table);
$tableHeaders.each(function(index){this.count=0;
this.column=index;
this.order=formatSortingOrder(table.config.sortInitialOrder);
if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true;
}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);
}table.config.headerList[index]=this;
});
if(table.config.debug){benchmark("Built headers:",time);
log($tableHeaders);
}return $tableHeaders;
}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;
for(var i=0;
i<c.length;
i++){var cell=c[i];
if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));
}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);
}}}return arr;
}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;
}return false;
}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;
}return false;
}function applyWidget(table){var c=table.config.widgets;
var l=c.length;
for(var i=0;
i<l;
i++){getWidgetById(c[i]).format(table);
}}function getWidgetById(name){var l=widgets.length;
for(var i=0;
i<l;
i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];
}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;
}else{i=(v==(0||1))?v:0;
}return i;
}function isValueInArray(v,a){var l=a.length;
for(var i=0;
i<l;
i++){if(a[i][0]==v){return true;
}}return false;
}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);
var h=[];
$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);
}});
var l=list.length;
for(var i=0;
i<l;
i++){h[list[i][0]].addClass(css[list[i][1]]);
}}function fixColumnWidth(table,$headers){var c=table.config;
if(c.widthFixed){var colgroup=$("<colgroup>");
$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()));
});
$(table).prepend(colgroup);
}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;
for(var i=0;
i<l;
i++){var s=sortList[i],o=c.headerList[s[0]];
o.count=s[1];
o.count++;
}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();
}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;
for(var i=0;
i<l;
i++){var c=sortList[i][0];
var order=sortList[i][1];
var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");
var e="e"+i;
dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";
dynamicExp+="if("+e+") { return "+e+"; } ";
dynamicExp+="else { ";
}var orgOrderCol=cache.normalized[0].length-1;
dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";
for(var i=0;
i<l;
i++){dynamicExp+="}; ";
}dynamicExp+="return 0; ";
dynamicExp+="}; ";
eval(dynamicExp);
cache.normalized.sort(sortWrapper);
if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);
}return cache;
}function sortText(a,b){return((a<b)?-1:((a>b)?1:0));
}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));
}function sortNumeric(a,b){return a-b;
}function sortNumericDesc(a,b){return b-a;
}function getCachedSortType(parsers,i){return parsers[i].type;
}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return;
}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;
this.config={};
config=$.extend(this.config,$.tablesorter.defaults,settings);
$this=$(this);
$headers=buildHeaders(this);
this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
var sortCSS=[config.cssDesc,config.cssAsc];
fixColumnWidth(this);
$headers.click(function(e){$this.trigger("sortStart");
var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;
if(!this.sortDisabled&&totalRows>0){var $cell=$(this);
var i=this.column;
this.order=this.count++%2;
if(!e[config.sortMultiSortKey]){config.sortList=[];
if(config.sortForce!=null){var a=config.sortForce;
for(var j=0;
j<a.length;
j++){if(a[j][0]!=i){config.sortList.push(a[j]);
}}}config.sortList.push([i,this.order]);
}else{if(isValueInArray(i,config.sortList)){for(var j=0;
j<config.sortList.length;
j++){var s=config.sortList[j],o=config.headerList[s[0]];
if(s[0]==i){o.count=s[1];
o.count++;
s[1]=o.count%2;
}}}else{config.sortList.push([i,this.order]);
}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);
appendToTable($this[0],multisort($this[0],config.sortList,cache));
},1);
return false;
}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false;
};
return false;
}});
$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
}).bind("sorton",function(e,list){$(this).trigger("sortStart");
config.sortList=list;
var sortList=config.sortList;
updateHeaderSortCount(this,sortList);
setHeadersCss(this,$headers,sortList,sortCSS);
appendToTable(this,multisort(this,sortList,cache));
}).bind("appendCache",function(){appendToTable(this,cache);
}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);
}).bind("applyWidgets",function(){applyWidget(this);
});
if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;
}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);
}applyWidget(this);
});
};
this.addParser=function(parser){var l=parsers.length,a=true;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;
}}if(a){parsers.push(parser);
}};
this.addWidget=function(widget){widgets.push(widget);
};
this.formatFloat=function(s){var i=parseFloat(s);
return(isNaN(i))?0:i;
};
this.formatInt=function(s){var i=parseInt(s);
return(isNaN(i))?0:i;
};
this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;
var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";
return RegExp(exp).test($.trim(s));
};
this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild);
}}empty.apply(table.tBodies[0]);
}else{table.tBodies[0].innerHTML="";
}};
}});
$.fn.extend({tablesorter:$.tablesorter.construct});
var ts=$.tablesorter;
ts.addParser({id:"text",is:function(s){return true;
},format:function(s){return $.trim(s.toLowerCase());
},type:"text"});
ts.addParser({id:"digit",is:function(s,table){var c=table.config;
return $.tablesorter.isDigit(s,c);
},format:function(s){return $.tablesorter.formatFloat(s);
},type:"numeric"});
ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));
},type:"numeric"});
ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);
},format:function(s){var a=s.split("."),r="",l=a.length;
for(var i=0;
i<l;
i++){var item=a[i];
if(item.length==2){r+="0"+item;
}else{r+=item;
}}return $.tablesorter.formatFloat(r);
},type:"numeric"});
ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);
},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""));
},type:"text"});
ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);
},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");
},type:"numeric"});
ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));
},type:"numeric"});
ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));
},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);
},format:function(s,table){var c=table.config;
s=s.replace(/\-/g,"/");
if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");
}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");
}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");
}}}return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);
},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());
},type:"numeric"});
ts.addParser({id:"metadata",is:function(s){return false;
},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;
return $(cell).metadata()[p];
},type:"numeric"});
ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();
}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);
if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);
}}});
})(jQuery);
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");
};
Date.prototype.addDays=function(n){this.setDate(this.getDate()+n);
return this;
};
Date.prototype.addHours=function(n){this.setHours(this.getHours()+n);
return this;
};
jQuery.extend(jQuery.expr[":"],{Contains:function(a,i,m){return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
}});
var gColTableFilters={};
$.fn.tableFilter=function(tableSelector){var filterSelector=$(this).attr("id");
if(filterSelector===undefined){return false;
}if(gColTableFilters[filterSelector]===undefined){gColTableFilters[filterSelector]=new Array(tableSelector);
}else{if(MP_LAB_UTIL.ItemInArray(gColTableFilters[filterSelector],tableSelector)){$(this).unbind().keyup(updateTable);
return false;
}else{gColTableFilters[filterSelector].push(tableSelector);
}}updateTable=function(e){keys=[27,32,37,38,39,40];
if($.inArray(e.keyCode,keys)>=0){return false;
}if($(this).val().trim()!==""){if(e.keyCode!=13){return false;
}}filterId=$(this).attr("id");
if(filterId=="ALLfilter"){for(filter in gColTableFilters){if(filter!="ALLfilter"){$("#"+filter).val("");
}}}var tableList=gColTableFilters[filterId];
for(x in tableList){if(tableList.hasOwnProperty(x)){table=$(tableList[x]);
table.find("tr:gt(0)").hide();
table.find(".filterSpacer").remove();
if(ieVersion>0&&$(this).val().trim()!==""){table.find("tbody").prepend('<tr class="filterSpacer"><td>&nbsp</td></tr>');
}table.find('td:Contains("'+$(this).val()+'")').parents("tr").show();
}}if($("table tr.rowSelectedMajor:hidden").length>0){$("body").trigger("FILTER_CMPLT_NO_ROW_SELECTED",[filterId,$(this).val()]);
}else{}};
$(this).unbind().keyup(updateTable);
};
var MP_LAB_UTIL=function(){var m_df=null;
return{HideTooltip:function(){$("div.hvr").remove();
},ShowTooltip:function(evt,tipText){var p=getPosition(evt),top=p.y+30,left=p.x+20;
$("div.hvr").remove();
$('<div class="hvr">'+tipText+"</div>").appendTo("body");
$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
MP_LAB_UTIL.PositionTooltip(event);
},PositionTooltip:function(event){var p=getPosition(event),vp=gvs(),so=gso(),left=p.x-5,top=p.y+20;
var tooltip=$("div.hvr");
if(left+tooltip.width()>vp[1]+so[1]){left=left-40-tooltip.width();
}if(top+tooltip.height()>vp[0]+so[0]){top=top-40-tooltip.height();
}$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
},GetDateString:function(date,format){var emptyDateRegEx=/([0]{4})(-([0]{2})(-([0]{2})(T([0]{2}):([0]{2})(:([0]{2})(\.([0]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/;
var newDate=new Date();
var bUseFormatter=true;
if(date===undefined){return"";
}if(m_df===null){m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}if(date instanceof Date){newDate=date;
}else{if(date.match(new RegExp(emptyDateRegEx))||date.length==0){return"";
}newDate.setISO8601(date);
}if(format===undefined){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDate2"){format=mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR;
}else{if(format==="shortTime"){format=mp_formatter.DateTimeFormatter.TIME_24HOUR;
}else{if(format==="convertibleDtTm"){format="dd-mmm-yyyy HH:MM:ss";
bUseFormatter=false;
}else{if(format==="mediumDate"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDateTimeDashed"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}}}}}}if(bUseFormatter){return m_df.format(newDate,format);
}else{return newDate.format(format);
}},ShowModalDialog:function(text,type,callback){var el;
if(!document.getElementById("confirmDialog")){var centerEl=document.createElement("div");
centerEl.id="centerpoint";
el=document.createElement("div");
el.id="confirmDialog";
centerEl.appendChild(el);
document.body.appendChild(centerEl);
}var id=$("#confirmDialog");
switch(type){case 1:id.html("<span class=question>"+text+'</span><br /><hr /><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 2:id.html("<span class=question>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CANCEL+'" id=btnCancel><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 3:id.html("<span class=plainText>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CLOSE+'" id=btnModalClose></span>');
break;
default:return false;
}if($("#confirmDialog span").hasClass("question")){id.height(75);
id.width(200);
}else{id.width(400);
}var maskHeight=$(document).height();
var maskWidth=$(window).width();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
if(ieVersion==0||ieVersion>=7){var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2).show();
}else{var winH=$(window).height();
var winW=$(window).width();
var p=getPosition(event),top=p.y+30,left=p.x+20;
id.css("top",top+"px").css("left",left+"px").show();
}$("#confirmDialog").unbind().bind("click",function(e){var result=0;
if($(e.target).is("#btnYes")){result=1;
}else{if($(e.target).is("#btnNo")){result=2;
}else{if($(e.target).is("#btnCancel")){result=3;
}else{if($(e.target).is("#btnModalClose")){result=4;
}}}}if(result>0){$("#mask").hide();
$("#confirmDialog").hide();
if((callback!==undefined)&&$.isFunction(callback)){callback(result);
}return true;
}});
},GetPagePrefs:function(nAppNbr,sPrefSection,callback,async){var isAsync=typeof(async)=="boolean"?async:true;
var paramsAr=[];
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETPAGEPREFS.O1 - retrieving page prefs","PCS_GET_MPAGE_PREF",paramsAr,isAsync,function(recordData,failure){if(!failure){if(recordData.SSETTINGS==""){callback();
}else{var sReplaced=recordData.SETTINGSJSON.replace(/\u0001/g,'"');
try{var paramName="settingsJSON=";
if(sReplaced.indexOf(paramName)==0&&sReplaced.length>=paramName.length){sReplaced=sReplaced.substr(paramName.length,sReplaced.length-paramName.length);
}sReplaced=sReplaced.replace(/\__EQLS__/g,"=");
var sSettingsJSON=JSON.parse(sReplaced);
callback(sSettingsJSON);
}catch(err){callback();
}}}});
},SetPagePrefs:function(nAppNbr,sPrefSection,oParams,callback){var paramsAr=[];
var replaceQuotes=JSON.stringify(oParams).replace(/"/g,"\u0001");
replaceQuotes=replaceQuotes.replace(/\=/g,"__EQLS__");
replaceQuotes="settingsJSON="+replaceQuotes+"\r\n";
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'","^"+replaceQuotes+"^");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.SETPAGEPREFS.O1 - saving page prefs","PCS_UPD_MPAGE_PREF",paramsAr,true,callback);
},ItemInArray:function(array,item){var j=0;
while(j<array.length){if(array[j]==item){return true;
}else{j++;
}}return false;
},MakeTableSortable:function(tablename,zebra){if(zebra){$(tablename).tablesorter({widgets:["zebra"],widgetZebra:{css:["data-evenrow","data-oddrow"]}});
}else{$(tablename).tablesorter();
}$(tablename).bind("sortEnd",function(){$(tablename+" .firstChild").removeClass("firstChild");
var val=$(tablename+" tbody tr:first-child td");
val.addClass("firstChild");
});
},Strip_Tags:function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");
var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:"";
});
}};
}();
var MP_LAB_RESULT=function(){function getRefRange(item,result,textOnly){var stSpan=" ";
var endSpan=" ";
var strFlags="";
var sRefRange="";
if(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
stSpan='<span class="result-critical" title="Reference Range" id="'+sRefRange+'">';
endSpan="</span>";
}else{if(item.NORMAL_RANGE_FLAG!==undefined){switch(item.NORMAL_RANGE_FLAG){case 1:sRefRange=item.NORMAL_LOW;
break;
case 2:sRefRange=item.NORMAL_HIGH;
break;
case 3:sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
break;
default:sRefRange=item.NORMAL_ALPHA.trim();
}}else{if(item.NORMAL_ALPHA!==undefined){if(item.NORMAL_HIGH>0||item.NORMAL_LOW>0||item.NORMAL_ALPHA.length>0){if(item.NORMAL_HIGH>0){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
}else{sRefRange=item.NORMAL_ALPHA.trim();
}}}}stSpan='<span class="result-norm" title="Reference Range" id=">= '+sRefRange+'">';
endSpan="</span>";
}if(textOnly){return sRefRange;
}else{return stSpan+result+endSpan;
}}function getResultProcessFlags(sText,item){if((item.DILUTION_FACTOR!==undefined)&&(item.DILUTION_FACTOR>0)){sText+="x"+item.DILUTION_FACTOR+" ";
}switch(item.NORMAL_MEAN.trim()){case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_HIGH:case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_LOW:case MP_LAB_RESULT.PROCESS_MEAN.ALP_ABNORMAL:sText+=item.NORMAL_DISP.trim();
break;
}if(item.CRITICAL_MEAN!==undefined){if((item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL)||(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_CRITICAL)){sText+=item.CRITICAL_DISP.trim();
}}if(item.REVIEW_MEAN!==undefined){if((item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.REVIEW)||(item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_REVIEW)){sText+=item.REVIEW_DISP.trim();
}}if(item.LINEAR_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.LINEAR){sText+=item.LINEAR_DISP.trim();
}if(item.FEASIBLE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.FEASIBLE){sText+=item.FEASIBLE_DISP.trim();
}if(item.DELTA_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.DELTA_FAIL){sText+=item.DELTA_DISP.trim();
}if(item.INTERP_DATA_ID>0){sText+="(i)";
}if(item.QC_OVERRIDE_MEAN!==undefined){if(item.QC_OVERRIDE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.QCOVERRIDE){sText+=item.QC_OVERRIDE_DISP.trim();
}}if(item.NOTIFY_MEAN!==undefined){if(item.NOTIFY_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_NOTIFY){sText+=item.NOTIFY_DISP.trim();
}}if((item.NOMENCLATURE_ID>0)&&(item.LONG_TEXT_ID>0)){sText+="(t)";
}return sText;
}return{STATUS_MEAN:{PERFORMED:"PERFORMED",INREVIEW:"INREVIEW",VERIFIED:"VERIFIED",AUTOVERIFIED:"AUTOVERIFIED"},TYPE:{TEXT:"1",ALPHA:"2",NUMERIC:"3",INTERP:"4",MULTI_ALPHA:"5",DATE:"6",FREETEXT:"7",CALC:"8",CODESET:"9",TIME:"10",DATE_TIME:"11",COUNT:"13",YES_NO:"18",ALPHA_FREETEXT:"21"},PROCESS_MEAN:{ALP_ABNORMAL:"ALP_ABNORMAL",NORMAL_HIGH:"NORMAL_HIGH",NORMAL_LOW:"NORMAL_LOW",ALP_CRITICAL:"ALP_CRITICAL",CRITICAL:"CRITICAL",REVIEW:"REVIEW",ALP_REVIEW:"ALP_REVIEW",DELTA_FAIL:"DELTA_FAIL",FEASIBLE:"FEASIBLE",LINEAR:"LINEAR",ALP_NOTIFY:"ALP_NOTIFY",NOTIFY:"NOTIFY",QCOVERRIDE:"QC_OVERRIDE"},GetLabResult:function(item){var result="",sText="";
switch(item.RESULT_TYPE_MEAN.trim()){case MP_LAB_RESULT.TYPE.TEXT:case MP_LAB_RESULT.TYPE.FREETEXT:sText="";
if(item.ASCII_TEXT.trim().length>30){result=item.ASCII_TEXT.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}if(item.RESULT_TYPE_MEAN.trim()==MP_LAB_RESULT.TYPE.FREETEXT){result+=" "+getResultProcessFlags(sText,item);
}break;
case MP_LAB_RESULT.TYPE.ALPHA:sText="";
result=item.RESULT_VALUE_ALPHA;
result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.INTERP:sText="";
if(!item.ASCII_TEXT_LONG){item.ASCII_TEXT_LONG="";
}if(item.RESULT_VALUE_ALPHA.trim().length>0){result=item.RESULT_VALUE_ALPHA.trim();
result+=" "+getResultProcessFlags(sText,item);
if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){result+='<input class="btnMoreText" type="button" value="..."/>';
}}else{if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){if(item.ASCII_TEXT_LONG.trim().length>0){result=item.ASCII_TEXT_LONG.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}}else{if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
}}break;
case MP_LAB_RESULT.TYPE.CALC:case MP_LAB_RESULT.TYPE.NUMERIC:if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.DATE:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortDate2");
break;
case MP_LAB_RESULT.TYPE.DATE_TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM);
break;
case MP_LAB_RESULT.TYPE.TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortTime");
break;
case MP_LAB_RESULT.TYPE.CODESET:result=item.RESULT_CODE_SET_DISP;
break;
default:result=item.ASCII_TEXT.trim();
}return getRefRange(item,result);
},GetRefRangeText:function(item){return getRefRange(item,"",true);
}};
}();
if(window.APPLINK){var runApp=function(params){APPLINK(0,"labapplauncher.exe",params);
};
}else{var runApp=function(params){mywindow=window.open("cernerlablaunch://"+params,"mylauncherwindow","scrollbars=yes,copyhistory=no,resizable=yes");
mywindow.close();
};
}function BedrockMPage(categoryMean,componentMapping){this.mean=categoryMean;
this.componentMapping=componentMapping;
BedrockMPage.method("getCategoryMean",function(){return mean;
});
}BedrockMPage.inherits(MPage);
function BedrockMPageGroupValue(){m_sequence=0;
m_description="";
MPageGroupValue.method("getSequence",function(){return this.m_sequence;
});
MPageGroupValue.method("setSequence",function(value){this.m_sequence=value;
});
MPageGroupValue.method("getDescription",function(){return this.m_description;
});
MPageGroupValue.method("setDescription",function(value){this.m_description=value;
});
}BedrockMPageGroupValue.inherits(MPageGroupValue);
var MP_Bedrock=function(){return{CreateBedrockMPage:function(categoryMean,componentMapping,criterion,funcFilterMapping,compFuncFilterMapping){var returnPage=new BedrockMPage(categoryMean,componentMapping);
returnPage.setCriterion(criterion);
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(info.readyState==4&&info.status==200){var jsonText=JSON.parse(info.responseText);
returnPage.setPageId(jsonText.RECORD_DATA.BR_DATAMART_CATEGORY_ID);
var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}returnPage.setComponents(LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping));
}};
PlaceRequest(info,"GET","MP_GET_BRSEC_PARAMS",false,"^MINE^, ^"+categoryMean+"^");
if(info.readyState==4&&info.status==200){var jsonText=JSON.parse(info.responseText);
returnPage.setPageId(jsonText.RECORD_DATA.BR_DATAMART_CATEGORY_ID);
var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}returnPage.setComponents(LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping));
}return returnPage;
}};
function LoadBedrockComponentInformation(jsonText,componentMapping,criterion,compFuncFilterMapping){var components=[];
var section=jsonText.RECORD_DATA.SECTION;
for(var x=0,xl=section.length;
x<xl;
x++){var jsonSection=section[x];
var componentType=MP_Util.GetValueFromArray(jsonSection.BEDROCK_NAME,componentMapping);
if(componentType!=null){var jsComponentFunc=null;
var componentFunc=MP_Util.GetValueFromArray(jsonSection.BEDROCK_NAME,compFuncFilterMapping);
if(componentFunc!=null){jsComponentFunc=JSON.parse(componentFunc);
}var component=new componentType(criterion);
InitializeBedrockComponent(component,jsonSection,jsComponentFunc);
components.push(component);
}}components.sort(SortMPageComponents);
return(components);
}function InitializeBedrockComponent(component,jsonComponent,jsComponentFunc){component.setComponentId(jsonComponent.BR_DATAMART_FILTER_ID);
component.setLabel(jsonComponent.LABEL);
component.setColumn(jsonComponent.COL_SEQ);
component.setSequence(jsonComponent.ROW_SEQ);
component.setLink(jsonComponent.LINK);
component.setResultsDisplayEnabled(jsonComponent.TOTAL_RESULTS);
component.setXofYEnabled(jsonComponent.X_OF_Y);
component.setExpanded(jsonComponent.EXPANDED);
component.setScrollNumber(jsonComponent.SCROLL_NUM);
component.setScrollingEnabled(jsonComponent.SCROLL_ENABLED);
component.setLookbackDays(jsonComponent.LOOKBACK_DAYS);
component.setPlusAddEnabled((jsonComponent.ISPLUSADD==1?true:false));
component.setLookbackUnits(jsonComponent.LOOKBACKUNITS);
component.setLookbackUnitTypeFlag(jsonComponent.LOOKBACKTYPEFLAG);
component.setDateFormat(jsonComponent.DATE_DISPLAY_FLAG);
if(component.getScope()==0){component.setScope(jsonComponent.SCOPE);
}for(var x=0,xl=jsonComponent.FILTER.length;
x<xl;
x++){var filter=jsonComponent.FILTER[x];
switch(filter.FILTER_CATEGORY_MEAN){case"EVENT":var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
break;
}}var eGroup=new MPageEventCodeGroup();
for(var y=0,yl=aValue.length;
y<yl;
y++){eGroup.addEventCode(aValue[y].getId());
}eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"EVENT_SET":case"PRIM_EVENT_SET":var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
break;
}}var eGroup=new MPageEventSetGroup();
for(var y=0,yl=aValue.length;
y<yl;
y++){eGroup.addEventSet(aValue[y].getId());
}eGroup.setGroupName(filter.FILTER_MEAN);
eGroup.setSequence(filter.FILTER_SEQ);
component.addGroup(eGroup);
break;
case"EVENT_SEQ":var groups=component.getGroups();
if(groups!=null){for(var y=0,yl=groups.length;
y<yl;
y++){var group=groups[y];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventCodes(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){group.addEventCode(aValue[z].getId());
}}}}break;
case"EVENT_SET_SEQ":var groups=component.getGroups();
if(groups!=null){for(var y=0,yl=groups.length;
y<yl;
y++){var group=groups[y];
if(group.getSequence()==filter.FILTER_SEQ){group.setEventSets(null);
group.setSequenced(true);
var aValue=GetFilterValues(filter);
for(var z=0,zl=aValue.length;
z<zl;
z++){group.addEventSet(aValue[z].getId());
}}}}break;
default:var aValue=GetFilterValues(filter);
if(jsComponentFunc!=null){var filterFunc=GetFunctionByFilterMean(jsComponentFunc,filter.FILTER_MEAN);
if(filterFunc){var strFunc=GetValueFromComponentFunc(filterFunc,aValue);
var ret=eval(strFunc);
}}}}}function GetAssociatedGroup(filterMean,groups){for(var x=0,xl=groups.length;
x<xl;
x++){if(groups[x].getGroupName()==filterMean){return groups[x];
}}return null;
}function GetFilterValues(jsonFilter){var aReturn=[];
for(var x=0,xl=jsonFilter.VALUES.length;
x<xl;
x++){var jsonValue=jsonFilter.VALUES[x];
var value=new BedrockMPageGroupValue();
value.setId(jsonValue.PARENT_ENTITY_ID);
value.setName(jsonValue.PARENT_ENTITY_NAME);
value.setDescription(jsonValue.FREETEXT_DESC);
value.setSequence(jsonValue.GROUP_SEQ);
aReturn.push(value);
}return aReturn;
}function GetFunctionByFilterMean(jsFuncs,mean){var funcs=jsFuncs.FUNCTIONS;
for(var x=0,xl=funcs.length;
x<xl;
x++){var func=funcs[x];
if(func.FILTER_MEAN==mean){return funcs[x];
}}return null;
}function GetValueFromComponentFunc(func,aValues){var ar=[];
for(var x=0,xl=aValues.length;
x<xl;
x++){switch(func.FIELD){case"FREETEXT_DESC":ar.push(aValues[x].getDescription());
break;
case"PARENT_ENTITY_ID":ar.push(aValues[x].getId());
break;
default:break;
}}var strFunc="";
if(func.TYPE=="Array"){strFunc="component."+func.NAME+"(["+ar.join(",")+"])";
}else{strFunc="component."+func.NAME+"("+ar.join(",")+")";
}return strFunc;
}function SetComponentAttribute(component,func,value){var jsMPage=jsonText.RECORD_DATA.MPAGE;
for(var y=0,yl=jsMPage.length;
y<yl;
y++){var strFunc=MP_Util.GetItemFromMapArray(funcFilterMapping,jsMPage[y].FILTER_MEAN);
if(strFunc!=null&&strFunc!=""){var jsonFunc=JSON.parse(strFunc);
var jsFunction=jsonFunc.FUNCTION;
switch(jsFunction.TYPE){case"Boolean":var location="jsMPage[y].VALUES[0]."+jsFunction.FIELD;
var sValue=eval(location);
var bValue=(sValue=="0")?false:true;
var strFunc="returnPage."+jsFunction.NAME+"("+bValue+")";
var ret=eval(strFunc);
break;
}}}}}();
var CERN_CLGSELECTORS_O1=function(){var selectorSettings={specimen_cd:0,specimen_disp:"",rpt_priority_cd:0,species_cd:0};
var selectorDefaults={specimen_cd:0,rpt_priority_cd:0,species_cd:0};
var m_bshow_specimen=true;
var m_bshow_rpt_priority=true;
var m_bshow_species=true;
var m_specimen_string="";
var m_htmlContainer="";
var m_specimenList=[];
var codeset_cache=[];
function build_rpt_priority(){var selected_entry=selectorDefaults.rpt_priority_cd;
var aHTML=[];
var code_set=codeset_cache.a1905;
if(!code_set){code_set=MP_Util.GetCodeSet(1905,false);
codeset_cache.a1905=code_set;
}var codeCnt=code_set.length;
var code={};
aHTML.push("<div id='rpt_priority_div' class='selector_div'>",i18n.lab.lab_guide.REPORT_PRIORITY);
aHTML.push('<br /><select name="'+i18n.lab.lab_guide.REPORT_PRIORITY+'" ');
if(!m_bshow_rpt_priority){aHTML.push("disabled=disabled ");
}aHTML.push("id=rpt_priority_select>");
aHTML.push("<option ");
if(selected_entry<=0){aHTML.push("selected=selected ");
}aHTML.push('value=0 title=""></option>');
for(var i=0;
i<codeCnt;
i++){code=code_set[i].value;
aHTML.push("<option ");
if((selected_entry==code.codeValue)||(codeCnt==1)){selectorSettings.rpt_priority_cd=code.codeValue;
aHTML.push("selected=selected ");
}aHTML.push("value="+code.codeValue+' title="'+code.description+'">'+code.display+"</option>");
code=null;
}aHTML.push("</select>");
return aHTML.join("");
}function build_specimens(){var aHTML=[];
aHTML.push("<div id='specimen_div' class='selector_div'>");
aHTML.push("</div>");
return aHTML.join("");
}function get_specimen_list(catalog_cd){var paramsAr=[];
selectorSettings={specimen_cd:0,specimen_disp:"",rpt_priority_cd:0,species_cd:0};
paramsAr.push("MINE",catalog_cd+".00");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETSPECIMENS.O1 - getting specimen list","pcs_get_specimen_list",paramsAr,true,function(data,failure){set_specimens(data,failure,catalog_cd);
build_selectors_string(catalog_cd);
});
}function set_specimens(data,failure,catalog_cd){var aHTML=[];
var specCnt=0;
var selected_entry=selectorDefaults.specimen_cd;
specCnt=data.SPEC_LIST.length;
aHTML.push("<div id='specimen_div' class='selector_div'>",i18n.lab.lab_guide.SPECIMEN);
aHTML.push('<br /><select name="'+i18n.lab.lab_guide.SPECIMEN+'" ');
if(!m_bshow_specimen){aHTML.push("disabled=disabled ");
}aHTML.push("id=specimen_select>");
aHTML.push("<option ");
if(selected_entry<=0){aHTML.push("selected=selected ");
}aHTML.push('value=0 title=""></option>');
for(var i=0;
i<specCnt;
i++){specimen=data.SPEC_LIST[i];
aHTML.push("<option ");
if((selected_entry==specimen.SPECIMEN_TYPE_CD)||(specCnt==1)){selectorSettings.specimen_cd=specimen.SPECIMEN_TYPE_CD;
selectorSettings.specimen_disp=specimen.SPECIMEN_TYPE_DISP;
aHTML.push("selected=selected ");
}aHTML.push("value="+specimen.SPECIMEN_TYPE_CD+' title="'+specimen.SPECIMEN_TYPE_DISP+'">'+specimen.SPECIMEN_TYPE_DISP+"</option>");
code=null;
}aHTML.push("</select>");
aHTML.push("</div>");
m_specimenList["a"+catalog_cd]=aHTML.join("");
}function build_species(){var selected_entry=selectorDefaults.species_cd;
var aHTML=[];
var code_set=codeset_cache.a226;
if(!code_set){code_set=MP_Util.GetCodeSet(226,false);
codeset_cache.a226=code_set;
}if(selected_entry<=0){selected_entry=MP_Util.GetCodeByMeaning(code_set,"HUMAN").codeValue;
}var codeCnt=code_set.length;
var code={};
aHTML.push("<div id='species_div' class='selector_div'>",i18n.lab.lab_guide.SPECIES);
aHTML.push('<br /><select name="'+i18n.lab.lab_guide.SPECIES+'" ');
if(!m_bshow_species){aHTML.push("disabled=disabled ");
}aHTML.push("id=species_select>");
aHTML.push("<option ");
if(selected_entry<=0){aHTML.push("selected=selected ");
}aHTML.push('value=0 title=""></option>');
for(var i=0;
i<codeCnt;
i++){code=code_set[i].value;
aHTML.push("<option ");
if((selected_entry==code.codeValue)||(codeCnt==1)){selectorSettings.species_cd=code.codeValue;
aHTML.push("selected=selected ");
}aHTML.push("value="+code.codeValue+' title="'+code.description+'">'+code.display+"</option>");
code=null;
}aHTML.push("</select>");
aHTML.push("</div>");
return aHTML.join("");
}function build_selectors_string(catalog_cd){var aHTML=[];
aHTML.push(m_specimenList["a"+catalog_cd]);
aHTML.push(build_rpt_priority());
aHTML.push(build_species());
$("#"+m_htmlContainer).html(aHTML.join(""));
bind_events();
}function trigger_fields_valid(){$("body").trigger("MP_LAB_GUIDE.GET_ORG_FIELDS");
}function all_fields_valid(){var okay=0;
if(!m_bshow_specimen||(selectorSettings.specimen_cd>0)){okay|=1;
}if(!m_bshow_rpt_priority||(selectorSettings.rpt_priority_cd>0)){okay|=2;
}if(!m_bshow_species||(selectorSettings.species_cd>0)){okay|=4;
}if(!m_bshow_rpt_priority&&!m_bshow_specimen&&!m_bshow_species){okay=0;
}if(okay==7){return true;
}return false;
}function get_saved_values(callback){MP_LAB_UTIL.GetPagePrefs(1050009,"CLG Selectors",callback);
}function save_values(){MP_LAB_UTIL.SetPagePrefs(1050009,"CLG Selectors",selectorSettings,function(recordData){return false;
});
}function bind_events(){$("#specimen_select").unbind("change").change(function(){var val=$(this).val();
selectorSettings.specimen_cd=val;
selectorSettings.specimen_disp=$("#specimen_select option:selected").text();
if(val>0){selectorDefaults.specimen_cd=val;
save_values();
}if(all_fields_valid()){trigger_fields_valid();
}});
$("#rpt_priority_select").unbind("change").change(function(){var val=$(this).val();
selectorSettings.rpt_priority_cd=val;
if(val>0){selectorDefaults.rpt_priority_cd=val;
save_values();
}if(all_fields_valid()){trigger_fields_valid();
}});
$("#species_select").unbind("change").change(function(){var val=$(this).val();
selectorSettings.species_cd=val;
if(val>0){selectorDefaults.species_cd=val;
save_values();
}if(all_fields_valid()){trigger_fields_valid();
}});
$("#species_div").hide();
if(all_fields_valid()){trigger_fields_valid();
}}function set_settings(sSettingsJSON){selectorDefaults=sSettingsJSON?$.extend(selectorDefaults,sSettingsJSON):selectorDefaults;
}return{GetSpecimenCd:function(){return selectorSettings.specimen_cd;
},GetSpecimenDisp:function(){return selectorSettings.specimen_disp;
},GetRptPriorityCd:function(){return selectorSettings.rpt_priority_cd;
},GetSpeciesCd:function(){return selectorSettings.species_cd;
},GetSpecimensByCatalog:function(catalogCd){get_specimen_list(catalogCd);
},MoveSpeciesSelector:function(containerId,bshow){$("#species_div").appendTo($("#"+containerId));
if(bshow){$("#species_div").show();
}else{$("#species_div").hide();
}},SetSpecimenCd:function(value){selectorSettings.specimen_cd=value;
},SetRptPriorityCd:function(value){selectorSettings.rpt_priority_cd=value;
},SetSpeciesCd:function(value){selectorSettings.species_cd=value;
},ShowSpecimen:function(bshow){m_bshow_specimen=bshow;
},ShowRptPriority:function(bshow){m_bshow_rpt_priority=bshow;
},ShowSpecies:function(bshow){m_bshow_species=bshow;
},StartUp:function(container){m_htmlContainer=container;
get_saved_values(set_settings);
}};
}();
var MP_ORDERSELECTOR=function(){var ESC_KEY=27;
function CloseDialog(e){e.preventDefault();
$("#mask").hide();
$("#order_dialog").remove();
}function ShowDialog(){var id=$("#order_dialog");
var maskHeight=$(document).height();
var maskWidth=$(window).width();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2);
id.show();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
}function BindEvents(){MP_LAB_UTIL.MakeTableSortable("#table-orders",true);
$("#table-orders").trigger("update");
$("#table-orders").trigger("sorton",[[[0,0]]]);
$(".orderwindow .close").click(function(e){CloseDialog(e);
});
var rows=$("#table-orders tr.data-row-info");
if(rows.length>0){rows.click(function(){var catalogCd=$(this).attr("id").replace("catalog-","");
var catalogDisp=$(this).find("td:first").text();
ProcessOrderSelection(catalogCd,catalogDisp);
$("#mask").hide();
$("#order_dialog").remove();
return false;
});
rows.hover(function(event){$(this).addClass("data-row-hover");
},function(event){$(this).removeClass("data-row-hover");
});
}}function ProcessOrderSelection(catalogCd,catalogDisp){$("body").trigger("MP_LAB_GUIDE.ORDER_SELECTED",[catalogCd,catalogDisp]);
}function LoadOrders(data){var total_orders=0;
total_orders=data.ORDERS.length;
if(total_orders<=0){$("body").trigger("MP_LAB_GUIDE.ORDER_SELECTED",[-1]);
}else{if(total_orders==1){$("body").trigger("MP_LAB_GUIDE.ORDER_SELECTED",[data.ORDERS[0].CATALOG_CD,data.ORDERS[0].MNEMONIC]);
}else{if(!document.getElementById("order_dialog")){el=document.createElement("div");
el.id="order_dialog";
el.className="orderwindow";
document.body.appendChild(el);
}var orderBox=$("#order_dialog");
var jsHTML=[];
var n_orders=data.ORDERS.length;
jsHTML.push("<div><h4>"+i18n.PROCEDURE+":</h4></div>");
jsHTML.push('<div class="data-table-container">');
jsHTML.push("<table id=table-orders class=data-table>");
jsHTML.push("<thead class=data-table-head>");
jsHTML.push("<tr>");
jsHTML.push("<th>"+i18n.PROCEDURE+"</th>");
jsHTML.push("<th>"+i18n.DESCRIPTION+"</th>");
jsHTML.push("<th>"+i18n.lab.lab_guide.SYNONYMS+"</th>");
jsHTML.push("</tr>");
jsHTML.push("</thead>");
jsHTML.push("<tbody>");
for(var i=0;
i<n_orders;
++i){var mnemonic=data.ORDERS[i].MNEMONIC;
var description=data.ORDERS[i].DESCRIPTION;
var catalog_id=data.ORDERS[i].CATALOG_CD;
var n_synonym=data.ORDERS[i].SYNONYMS.length;
jsHTML.push('<tr class=data-row-info id="catalog-',catalog_id,'">');
jsHTML.push("<td>",mnemonic," </td>");
jsHTML.push("<td>",description," </td>");
jsHTML.push("<td>");
for(var j=0;
j<n_synonym;
++j){if(j>0){jsHTML.push(", ");
}jsHTML.push(data.ORDERS[i].SYNONYMS[j].MNEMONIC);
}jsHTML.push("</td>");
jsHTML.push("</tr>");
}jsHTML.push("</tbody>");
jsHTML.push("</table>");
jsHTML.push("</div>");
jsHTML.push('<div class=close_label><a href="javascript:" class="close">'+i18n.lab.lab_guide.CLOSE+"</a></div>");
orderBox.html(jsHTML.join(""));
if(!document.getElementById("mask")){var maskdiv=document.createElement("div");
maskdiv.id="mask";
document.getElementsByTagName("body")[0].appendChild(maskdiv);
}BindEvents();
ShowDialog();
}}}return{GetOrders:function(search){var sendAr=[];
sendAr.push("MINE","'"+search+"'");
if(search.trim().length>0){MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETLABGUIDEORDERS.O1 - getting orders for search","PCS_GET_CLG_ORDERS",sendAr,true,function(data,failure){if(!failure){LoadOrders(data);
}});
}},ShowOrderSelector:function(e){ShowDialog(e);
}};
}();
var MP_LAB_GUIDE_ORG_LOCS=function(){var LOADING_TIMEOUT=30;
var OVERRIDE_LOCATION=false;
var OVERRIDING_LOCATION={NU_AMB_LOC_CD:0,NU_AMB_LOC_NAME:"Name of Nursing Unit",ORGANIZATION_ID:0,ORGANIZATION_NAME:"Name of Org"};
var m_processingLocCnt=0;
var m_processingLocCur=0;
var m_processingStringContainer;
var m_currentElement;
var m_oLocation={NAME:"",ID:0,TYPE:"",PARENT_ID:0,CHILDREN_LOADED:-1};
var m_oLocations={};
var m_noElementSelected={DEFAULT_ID:0,DEFAULT_NAME:"{"+i18n.lab.lab_guide.NONE_SELECTED+"}",ORG_ID:0,ORG_NAME:"{"+i18n.lab.lab_guide.NONE_SELECTED+"}",FAC_CD:0,FAC_NAME:"{"+i18n.lab.lab_guide.NONE_SELECTED+"}",LOC_CD:0,LOC_NAME:"{"+i18n.lab.lab_guide.NONE_SELECTED+"}"};
m_currentElement=m_noElementSelected;
function addLocation(name,id,type,parent_id,child_ind){m_oLocations[type+id]={NAME:name,ID:id,TYPE:type,PARENT_ID:parent_id,CHILDREN_LOADED:child_ind};
}function writeLocLine(name,id,classname){var arLine=[];
arLine.push('<li id="',classname+id,'" class="'+classname+'">','<a href="javascript:">',name,"</a>");
return arLine.join("");
}function buildOrgLocBox(data){var contentHTML=[],org,building;
var orgListLen=data.ORG_LIST.length,buildListLen=0;
contentHTML.push('<ul id="srTreeList">');
for(var i=0;
i<orgListLen;
i++){org=data.ORG_LIST[i];
org_name=data.ORG_LIST[i].NAME;
addLocation(org.NAME,org.ORG_ID,"ORGANIZATION",-1,1);
contentHTML.push(writeLocLine(org.NAME,org.ORG_ID,"ORGANIZATION"));
buildListLen=org.BUILDING_LIST.length;
if(buildListLen>0){contentHTML.push("<ul>");
}for(var j=0;
j<buildListLen;
j++){var building=data.ORG_LIST[i].BUILDING_LIST[j];
addLocation(building.BUILDING_DISP,building.BUILDING_CD,"BUILDING",org.ORG_ID,0);
contentHTML.push(writeLocLine(building.BUILDING_DISP,building.BUILDING_CD,"BUILDING"));
contentHTML.push("</li>");
}if(buildListLen>0){contentHTML.push("</ul>");
}contentHTML.push("</li>");
}contentHTML.push("</ul>");
$("#srbox").html(contentHTML.join(""));
}function writePreDataContent(){var preContentHTML=[];
preContentHTML.push('<div id="srdialog" class="srwindow"><a class="modal-close" title="'+i18n.lab.lab_guide.CLOSE+'"/><h4>'+i18n.lab.lab_guide.AVAILABLE_LOCATIONS+":</h4>","<div class=atreecontrol><ul>",'<li><a href="javascript:" id="tv-minus">'+i18n.discernabu.COLLAPSE_ALL+"</a></li>  ",'<li><a href="javascript:" id="tv-plus">'+i18n.discernabu.EXPAND_ALL+"</a></li>  ","<li><span class=srSearch><label>"+i18n.lab.lab_guide.SEARCH+':</label><input id="ORGFilter" type="text"/></span></li>',"</ul></div>");
preContentHTML.push('<div id="srbox"></div><span class=loc_cnt id=loc_cnt></span><span class=close_label><a href="javascript:" class="close">'+i18n.lab.lab_guide.CLOSE+'</a></span></div><div id="mask"></div>');
$("body").append(preContentHTML.join(""));
m_processingStringContainer=$("#loc_cnt");
}function bindEvents(){$("#tv-plus").click(function(){$.jstree._reference($("#srbox")).open_all();
});
$("#tv-minus").click(function(){$.jstree._reference($("#srbox")).close_all();
});
$("#srbox").jstree({core:{animation:0},ui:{select_limit:1,select_multiple_modifier:"alt",selected_parent_close:"select_parent"},themes:{theme:"orgtree",dots:true,icons:true},search:{case_insensitive:true},plugins:["themes","html_data","search","ui"]});
$(".srwindow .close").click(function(e){closeDialog(e);
});
$(".modal-close").click(function(e){closeDialog(e);
});
$("#ORGFilter").keyup(function(e){keys=[27,32,37,38,39,40];
if($.inArray(e.keyCode,keys)>=0){return false;
}if(e.keyCode==8){$("#srbox").find("a.jstree-search").removeClass("jstree-search");
$.jstree._reference($("#srbox")).close_all();
return true;
}if(e.keyCode==13){$.jstree._reference($("#srbox")).close_all();
$.jstree._reference($("#srbox")).search($(this).val(),true);
}});
}function closeDialog(e){e.preventDefault();
$("#mask").hide();
$(".srwindow").hide();
}function processResponse(data,failure,callback){var contentHTML=[];
if(!failure){buildOrgLocBox(data);
bindEvents();
MP_LAB_GUIDE_ORG_LOCS.SetCurrentOrg();
if(callback!==undefined){callback();
}}else{$("#srbox").html(i18n.ERROR_RETREIVING_DATA);
}}function setupClickEvent(callback){$("#srbox a").live("click",function(event){var curNodeId=$(this).parent().attr("id");
var location=m_oLocations[curNodeId],currentElement;
if(location===undefined){location.TYPE="NONE";
currentElement=m_noElementSelected;
}else{currentElement=getCurrentElementFromLocation(location);
}if(callback!==undefined){callback(currentElement);
}if(location.TYPE=="BUILDING"){if(location.CHILDREN_LOADED==0){MP_LAB_GUIDE_ORG_LOCS.GetChildrenLocations(location.ID);
}else{toggleTreeNode(curNodeId);
}}else{if(((location.TYPE=="AMBULATORY")||(location.TYPE=="NURSEUNIT"))){m_currentElement=currentElement;
$("body").trigger("MP_LAB_GUIDE.GLOBAL_ORG_LOCS_CHANGED");
}else{toggleTreeNode(curNodeId);
}}});
}function toggleTreeNode(node){if((ieVersion!=0)&&(ieVersion<7)){$.jstree._reference($("#srbox")).toggle_node("#"+node);
}else{$.jstree._reference($("#srbox")).toggle_node("#"+node);
}}function getCurrentElementFromLocation(location){var element=m_noElementSelected,building,org;
if(location.TYPE=="ORGANIZATION"){org=location;
element.ORG_ID=org.ID;
element.ORG_NAME=org.NAME;
}else{if(location.TYPE=="BUILDING"){building=location;
element.FAC_CD=building.ID;
element.FAC_NAME=building.NAME;
org=m_oLocations["ORGANIZATION"+building.PARENT_ID];
element.ORG_ID=org.ID;
element.ORG_NAME=org.NAME;
}else{if((location.TYPE=="AMBULATORY")||(location.TYPE=="NURSEUNIT")){element.DEFAULT_ID=location.ID;
element.DEFAULT_NAME=location.NAME;
element.LOC_CD=location.ID;
element.LOC_NAME=location.NAME;
building=m_oLocations["BUILDING"+location.PARENT_ID];
element.FAC_CD=building.ID;
element.FAC_NAME=building.NAME;
org=m_oLocations["ORGANIZATION"+building.PARENT_ID];
element.ORG_ID=org.ID;
element.ORG_NAME=org.NAME;
}}}return element;
}function showDialog(e,currentElement){e.preventDefault();
var id=$("#srdialog");
var maskHeight=$(document).height();
var maskWidth=$(window).width();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2);
$("#ORGFilter").val("");
if(currentElement.ORG_ID>0){$.jstree._reference($("#srbox")).close_all();
$.jstree._reference($("#srbox")).search(currentElement.DEFAULT_NAME);
}id.show();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
}function flatObjectClone(obj){var newObj=new Object();
for(i in obj){newObj[i]=obj[i];
}return newObj;
}function processArray(items,process,parentId,callback){var todo=items.concat();
setTimeout(function(){process(todo.shift(),parentId);
if(todo.length>0){setTimeout(arguments.callee,LOADING_TIMEOUT);
}else{m_processingLocCur=0;
m_processingStringContainer.text("");
callback(items,parentId);
}},25);
}function processChild(loc,buildingId){addLocation(loc.NU_DISP,loc.NU_CD,loc.NU_TYPE,buildingId,-1);
var newNode={attr:{id:loc.NU_TYPE+loc.NU_CD,"class":loc.NU_TYPE},data:loc.NU_DISP};
$("#srbox").jstree("create_node","#BUILDING"+buildingId,"first",newNode);
if(m_processingLocCur==1){$.jstree._reference($("#srbox")).open_node("#BUILDING"+buildingId);
}m_processingLocCur=m_processingLocCur+1;
if(m_processingLocCur%5==0){m_processingStringContainer.text(i18n.LOADING_DATA+" "+m_processingLocCur+" "+i18n.OF+" "+m_processingLocCnt);
}}function LoadChildrenLocations(data,buildingId){var len=data.NU_LIST.length;
if(len>0){m_processingLocCnt=len;
m_processingLocCur=1;
processArray(data.NU_LIST,processChild,buildingId,function(items,buildingId){return true;
});
}}function getOverridingLocation(){return{DEFAULT_ID:OVERRIDING_LOCATION.NU_AMB_LOC_CD,DEFAULT_NAME:OVERRIDING_LOCATION.NU_AMB_LOC_NAME,ORG_ID:OVERRIDING_LOCATION.ORGANIZATION_ID,ORG_NAME:OVERRIDING_LOCATION.ORGANIZATION_NAME,FAC_CD:0,FAC_NAME:"",LOC_CD:OVERRIDING_LOCATION.NU_AMB_LOC_CD,LOC_NAME:OVERRIDING_LOCATION.NU_AMB_LOC_NAME};
}return{LoadOrgLocs:function(callback){var paramsAr=[];
paramsAr.push("MINE","'LABORATORY'");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.LABORGLOC.O1 - load module","pcs_get_clg_org_locs",paramsAr,true,function(data,failure){processResponse(data,failure,callback);
});
writePreDataContent();
},SetCurrentOrg:function(org,tryingDefault){if(!MP_LAB_GUIDE_ORG_LOCS.GetUsingOverridingLocation()){var currentElement=null;
if(org){if(org.DEFAULT_ID>0){currentElement=org;
}}if(!currentElement){currentElement=m_noElementSelected;
if(tryingDefault){currentElement.TRIED_DEFAULT_ORG=true;
}}m_currentElement=flatObjectClone(currentElement);
currentElement=null;
$("body").trigger("MP_LAB_GUIDE.GLOBAL_ORG_LOCS_CHANGED");
}},SetDefaultOrg:function(org){m_currentElement=(org.DEFAULT_ID>0)?org:m_noElementSelected;
$("body").trigger("MP_LAB_GUIDE.GLOBAL_ORG_LOCS_CHANGED");
},ShowORGDialog:function(e,currentElement,callback){setupClickEvent(callback);
showDialog(e,currentElement);
},OrgsAvailable:function(){if($("#srbox a").length>0){return true;
}return false;
},GetCurrentOrg:function(){if(!OVERRIDE_LOCATION){return flatObjectClone(m_currentElement);
}else{return getOverridingLocation();
}},GetChildrenLocations:function(facilityCd){var facility_cd;
facility_cd=facilityCd?facilityCd:MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().FAC_CD;
m_oLocations["BUILDING"+facility_cd].CHILDREN_LOADED=1;
var paramsAr=[];
paramsAr.push("MINE",facility_cd+".00");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETLOCATIONS.O1 - get locations","pcs_get_clg_facility_nus",paramsAr,true,function(recordData){LoadChildrenLocations(recordData,facility_cd);
return false;
});
},SetOverrideLocation:function(org_id,org_name,nu_cd,nu_name){OVERRIDE_LOCATION=true;
OVERRIDING_LOCATION.ORGANIZATION_ID=org_id;
OVERRIDING_LOCATION.ORGANIZATION_NAME=decodeURIComponent(org_name);
OVERRIDING_LOCATION.NU_AMB_LOC_CD=nu_cd;
OVERRIDING_LOCATION.NU_AMB_LOC_NAME=decodeURIComponent(nu_name);
},GetUsingOverridingLocation:function(){return OVERRIDE_LOCATION;
}};
}();
function APClinLabPageStyle(){this.initByNamespace("apClinLabPage");
}APClinLabPageStyle.inherits(ComponentStyle);
function APClinLabPage(criterion){this.setCriterion(criterion);
this.setScope(0);
this.setStyles(new APClinLabPageStyle());
this.LOOKBACK_DAYS=0;
APClinLabPage.method("InsertData",function(){});
APClinLabPage.method("HandleSuccess",function(recordData){});
APClinLabPage.method("GetPageName",function(){return this.m_label;
});
}APClinLabPage.inherits(MPageComponent);
function CLGCollectionInfoComponentStyle(){this.initByNamespace("clg_coll_info");
}CLGCollectionInfoComponentStyle.inherits(ComponentStyle);
function CLGCollectionInfoComponent(criterion){this.setCriterion(criterion);
this.setStyles(new CLGCollectionInfoComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CLINLABGUIDE_COLLINFO.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CLINLABGUIDE_COLLINFO.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
CLGCollectionInfoComponent.method("InsertData",function(){var titleText=MP_Util.CreateTitleText(this,0);
MP_Util.Doc.FinalizeComponent("<div id='clg_coll_info_holder_"+this.getComponentId()+"'></div>",this,titleText);
});
CLGCollectionInfoComponent.method("HandleSuccess",function(recordData){});
CLGCollectionInfoComponent.method("LoadData",function(data){CERN_CLG_COLL_INFO_O1.RenderComponent(this,data);
});
CLGCollectionInfoComponent.method("LoadLabGuideData",function(data){CERN_CLG_COLL_INFO_O1.RenderCollectionReqs(this,data);
});
}CLGCollectionInfoComponent.inherits(MPageComponent);
var CERN_CLG_COLL_INFO_O1=function(){function BindEvents(component){var rows=$("#table-coll-reqs tr");
if(rows.length>0){rows.live("click",function(){toggleAltContainerRows($(this));
return false;
});
}}function toggleAltContainerRows(clickedRow){var jsHTML=[];
var sHTML="";
var clickedRowId=clickedRow.attr("id");
var searchRow="alt-"+clickedRowId;
var tableRows=document.getElementById("table-coll-reqs").rows;
var r=0,row,parentRow;
var classSuffix="";
if(clickedRowId%2>0){classSuffix="_odd";
}else{classSuffix="_even";
}var classAltExpanded="first_col_alt_expanded"+classSuffix;
var classAltCollapsed="first_col_alt_collapsed"+classSuffix;
while(currRow=tableRows.item(r++)){var currRowId=$(currRow).attr("id");
if(clickedRowId==currRowId){parentRow=currRow;
}else{if(searchRow==currRowId){if(currRow.style.display=="none"){parentRow.cells[0].className=classAltExpanded;
currRow.style.display="";
}else{parentRow.cells[0].className=classAltCollapsed;
currRow.style.display="none";
}}}}var updatedTable=$("#table-coll-reqs").html();
jsHTML.push(updatedTable);
sHTML=jsHTML.join("");
$("#table-coll-reqs").html(sHTML);
}return{RenderComponent:function(component,recordData){var bIsCareset=false;
var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var collinstr=[],orderprHTML=[],spechHTML=[],collreqHTML=[];
var arHTML=[];
arHTML.push("<div id=info-",component.getComponentId(),' class="info_block">');
if(recordData){var assays=recordData.ASSAYS;
var assays_counts=recordData.ASSAYS.length;
var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
if(recordData.CARESET_IND>0){bIsCareset=true;
}else{bIsCareset=false;
}for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"COLLECTREQMT":if(segments[i].SEGMENT_DATA_ID>0){MP_LAB_GUIDE.SetGetCollReqs(false);
bGetCollReqs=false;
collreqHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"COLLECTREQMT"));
}else{MP_LAB_GUIDE.SetGetCollReqs(true&&!bIsCareset);
if(MP_LAB_GUIDE.GetCollReqs()){collreqHTML.push(MP_LAB_GUIDE.GetSegmentStubString("","coll_reqs","coll_reqs_par","COLLECTREQMT"));
}}break;
case"SPECHANDLING":spechHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"SPECHANDLING"));
break;
case"COLLECTINSTR":collinstr.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"COLLECTINSTR"));
break;
case"ORDERPROMPTS":var orderprstr="";
if(segments[i].SEGMENT_DATA_ID>0){orderprHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"ORDERPROMPTS"));
}else{for(var j=0;
j<assays_counts;
j++){if(assays[j].PROMPT_IND==1){orderprstr+=assays[j].MNEMONIC;
if(j<assays_counts-1){orderprstr+="<br />";
}}}var segmentlbl=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_LABEL,"");
var jsAlHTMLTemp=[];
if(orderprstr.length>0){jsAlHTMLTemp.push('<div class="seg_sect ORDERPROMPTS"><h2 class="seg_header">',segmentlbl,'</h2><div class="seg_body">',orderprstr,"</div></div>");
orderprHTML.push(jsAlHTMLTemp.join(""));
}}break;
default:}}arHTML=arHTML.concat(collinstr,orderprHTML,spechHTML,collreqHTML);
}arHTML.push("</div>");
$("#clg_coll_info_holder_"+component.getComponentId()).html(arHTML.join(""));
}catch(err){console.log("ERROR IN COLL INFO"+err);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},RenderCollectionReqs:function(component,data){var infoDiv=$("#info-"+component.getComponentId());
var arHTML=[];
var listSize=data.COLL_REQS.length;
if(MP_LAB_GUIDE.GetCollReqs()){if(listSize>0){arHTML.push('<div id="coll_reqs">');
arHTML.push('<div class="data_table_container"><table id="table-coll-reqs" class="data_info"><thead><tr><th class="first_col">',i18n.AGE,"</th>");
arHTML.push("<th>",i18n.lab.lab_guide.MIN_VOLUME,"</th><th>",i18n.lab.lab_guide.CONTAINER,"</th><th>",i18n.lab.lab_guide.COLL_CLASS,"</th><th>",i18n.lab.lab_guide.TRANSFER_TEMP,"</th><th>",i18n.lab.lab_guide.SPEC_HANDLING,"</th></tr>");
arHTML.push("</thead><tbody><tr><td class=data_table_section_head colspan=6>",CERN_CLGSELECTORS_O1.GetSpecimenDisp(),"</td></tr>");
var rowClass="";
var altRowClass="";
var altColClass="";
var altParentColClass="";
var classSuffix="";
for(var j=0;
j<listSize;
j++){if(j%2>0){classSuffix="odd";
}else{classSuffix="even";
}rowClass="<tr class='"+classSuffix+"' id='"+j+"'>";
altRowClass="<tr class ='"+classSuffix+"' id='alt-"+j+"' style='display:none;'>";
altColClass="<td class='alt_col_"+classSuffix+"'>";
altParentColClass="<td class='first_col_alt_collapsed_"+classSuffix+"' style='padding-left:16px;'>";
arHTML.push(rowClass);
var altContListSize=data.COLL_REQS[j].ALT_CONTAINERS.length;
if(altContListSize>0){arHTML.push(altParentColClass,data.COLL_REQS[j].AGE,"</td><td>",data.COLL_REQS[j].MIN_VOLUME," <span class='units'>",data.COLL_REQS[j].VOL_UNITS,"</span></td><td>",data.COLL_REQS[j].CONTAINER,"</td><td>",data.COLL_REQS[j].COLL_CLASS_DISP,"</td><td>",data.COLL_REQS[j].TRANSFER_TEMP_DISP,"</td><td>",data.COLL_REQS[j].SPEC_HANDLING,"</td></tr>");
}else{arHTML.push('<td class="first_col" style="padding-left:16px;">',data.COLL_REQS[j].AGE,"</td><td>",data.COLL_REQS[j].MIN_VOLUME," <span class='units'>",data.COLL_REQS[j].VOL_UNITS,"</span></td><td>",data.COLL_REQS[j].CONTAINER,"</td><td>",data.COLL_REQS[j].COLL_CLASS_DISP,"</td><td>",data.COLL_REQS[j].TRANSFER_TEMP_DISP,"</td><td>",data.COLL_REQS[j].SPEC_HANDLING,"</td></tr>");
}for(var k=0;
k<altContListSize;
k++){arHTML.push(altRowClass);
arHTML.push(altColClass,"</td><td>",data.COLL_REQS[j].ALT_CONTAINERS[k].MIN_VOLUME," <span class='units'>",data.COLL_REQS[j].ALT_CONTAINERS[k].VOL_UNITS,"</span></td><td>",data.COLL_REQS[j].ALT_CONTAINERS[k].SPEC_CNTNR_DISP,"</td><td>",data.COLL_REQS[j].ALT_CONTAINERS[k].COLL_CLASS_DISP,"</span></td><td>",data.COLL_REQS[j].ALT_CONTAINERS[k].TRANSFER_TEMP_DISP,"</td><td>",data.COLL_REQS[j].ALT_CONTAINERS[k].SPEC_HNDL_DISP,"</td></tr>");
}}arHTML.push("</tbody></table></div></div>");
$("#coll_reqs").replaceWith(arHTML.join(""));
BindEvents(component);
$("#coll_reqs_par").show();
}else{$("#coll_reqs_par").hide();
}}}};
}();
function CLGOrdSchedComponentStyle(){this.initByNamespace("clg_ord_sched");
}CLGOrdSchedComponentStyle.inherits(ComponentStyle);
function CLGOrdSchedComponent(criterion){this.setCriterion(criterion);
this.setStyles(new CLGOrdSchedComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CLINLABGUIDE_ORDSCHED.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CLINLABGUIDE_ORDSCHED.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
CLGOrdSchedComponent.method("InsertData",function(){var titleText=MP_Util.CreateTitleText(this,0);
MP_Util.Doc.FinalizeComponent("<div id='clg_ord_sched_holder_"+this.getComponentId()+"'></div>",this,titleText);
});
CLGOrdSchedComponent.method("HandleSuccess",function(recordData){});
CLGOrdSchedComponent.method("LoadData",function(data){CERN_CLG_ORD_SCHED_O1.RenderComponent(this,data);
});
}CLGOrdSchedComponent.inherits(MPageComponent);
var CERN_CLG_ORD_SCHED_O1=function(){return{RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var labschHTML=[];
var arHTML=[];
arHTML.push("<div id=info-",component.getComponentId(),' class="info_block">');
if(recordData){var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"LABSCHEDULES":if(segments[i].SEGMENT_DATA_ID>0){var text=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_BODY,MP_LAB_GUIDE.GetOKTags());
labschHTML.push('<div class="seg_sect LABSCHEDULES"><div class="seg_body">',text,"</div></div>");
}break;
default:}}arHTML=arHTML.concat(labschHTML);
}arHTML.push("</div>");
$("#clg_ord_sched_holder_"+component.getComponentId()).html(arHTML.join(""));
}catch(err){console.log("ERROR IN ORDER SCHED"+err);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function CLGOrderInfoComponentStyle(){this.initByNamespace("clg_ord_info");
}CLGOrderInfoComponentStyle.inherits(ComponentStyle);
function CLGOrderInfoComponent(criterion){this.setCriterion(criterion);
this.setStyles(new CLGOrderInfoComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CLINLABGUIDE_ORDINFO.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CLINLABGUIDE_ORDINFO.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
CLGOrderInfoComponent.method("InsertData",function(){var titleText=MP_Util.CreateTitleText(this,0);
MP_Util.Doc.FinalizeComponent("<div id='clg_ord_info_holder_"+this.getComponentId()+"'></div>",this,titleText);
});
CLGOrderInfoComponent.method("HandleSuccess",function(recordData){});
CLGOrderInfoComponent.method("LoadData",function(data){CERN_CLG_ORD_INFO_O1.RenderComponent(this,data);
});
}CLGOrderInfoComponent.inherits(MPageComponent);
var CERN_CLG_ORD_INFO_O1=function(){function MakeLinkedSegment(segment,type,seg_class){var arHtml=[];
if(segment.SEGMENT_DATA_ID>0){var segmentlbl=MP_LAB_UTIL.Strip_Tags(segment.SEGMENT_LABEL,"");
var segmentct=MP_LAB_UTIL.Strip_Tags(segment.SEGMENT_BODY,MP_LAB_GUIDE.GetOKTags());
arHtml.push('<div class="seg_sect link_sect ',seg_class,'"><div class="seg_header"><a id="'+type+'_click" class="sect_hover_click" href="javascript:">',segmentlbl,'</a></div><div id="'+type+'_data" class="seg_body">',segmentct,"</div></div>");
}return arHtml.join("");
}return{RenderComponent:function(component,recordData){var bIsCareset=false;
var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var orderHTML=[],orderaltsHTML=[],proccompHTML=[],mthdlgyHTML=[],priceHTML=[],custHTML=[];
var arHTML=[];
arHTML.push("<div id=info-",component.getComponentId(),' class="info_block">');
if(recordData){var comps=recordData.COMPONENTS;
var comps_counts=recordData.COMPONENTS.length;
var assays=recordData.ASSAYS;
var assays_counts=recordData.ASSAYS.length;
var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"ORDERINFO":orderHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"ORDERINFO"));
break;
case"ORDERALERTS":orderaltsHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"ORDERALERTS"));
break;
case"PROCCOMPNTS":var compstr="";
var type="proc_comp",seg="PROCCOMPNTS";
if(segments[i].SEGMENT_DATA_ID>0){proccompHTML.push(MakeLinkedSegment(segments[i],type,seg));
}else{if(comps_counts>0){for(var j=0;
j<comps_counts;
j++){compstr+=comps[j].MNEMONIC;
if(j<comps_counts-1){compstr+="<br />";
}}if(MP_LAB_GUIDE.GetCatalogCd()>0){segments[i].SEGMENT_DATA_ID=42;
segments[i].SEGMENT_BODY=compstr;
proccompHTML.push(MakeLinkedSegment(segments[i],type,seg));
}}else{for(var j=0;
j<assays_counts;
j++){if(assays[j].PROMPT_IND==0){compstr+=assays[j].MNEMONIC;
if(j<assays_counts-1){compstr+="<br />";
}}}if(MP_LAB_GUIDE.GetCatalogCd()>0){segments[i].SEGMENT_DATA_ID=42;
segments[i].SEGMENT_BODY=compstr;
proccompHTML.push(MakeLinkedSegment(segments[i],type,seg));
}}}break;
case"METHODOLOGY":mthdlgyHTML.push(MakeLinkedSegment(segments[i],"method","METHODOLOGY"));
break;
case"PRICING":priceHTML.push(MakeLinkedSegment(segments[i],"pricing","PRICING"));
break;
case"CUSTOM":custHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"CUSTOM"));
break;
default:}}arHTML=arHTML.concat(orderHTML,orderaltsHTML,proccompHTML,mthdlgyHTML,priceHTML,custHTML);
}arHTML.push("</div>");
$("#clg_ord_info_holder_"+component.getComponentId()).html(arHTML.join(""));
$(".link_sect .seg_body").hide();
$(".sect_hover_click").click(function(e){MP_LAB_UTIL.ShowModalDialog($(this).parents(".seg_sect").find(".seg_body").html(),3,null,e);
});
}catch(err){console.log("ERROR IN ORDER INFO"+err);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function CLGPatInstrComponentStyle(){this.initByNamespace("clg_pat_instr");
}CLGPatInstrComponentStyle.inherits(ComponentStyle);
function CLGPatInstrComponent(criterion){this.setCriterion(criterion);
this.setStyles(new CLGPatInstrComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CLINLABGUIDE_PATINSTR.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CLINLABGUIDE_PATINSTR.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
CLGPatInstrComponent.method("InsertData",function(){var titleText=MP_Util.CreateTitleText(this,0);
MP_Util.Doc.FinalizeComponent("<div id='clg_pat_instr_holder_"+this.getComponentId()+"'></div>",this,titleText);
});
CLGPatInstrComponent.method("HandleSuccess",function(recordData){});
CLGPatInstrComponent.method("LoadData",function(data){CERN_CLG_PAT_INSTR_O1.RenderComponent(this,data);
});
}CLGPatInstrComponent.inherits(MPageComponent);
var CERN_CLG_PAT_INSTR_O1=function(){return{RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var patinstrHTML=[];
var arHTML=[];
arHTML.push("<div id=info-",component.getComponentId(),' class="info_block">');
if(recordData){var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
if(recordData.CARESET_IND>0){bIsCareset=true;
}else{bIsCareset=false;
}for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"PATIENTINSTR":if(segments[i].SEGMENT_DATA_ID>0){var text=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_BODY,MP_LAB_GUIDE.GetOKTags());
patinstrHTML.push('<div class="seg_sect PATIENTINSTR"><div class="seg_body">',text,"</div></div>");
}break;
default:}}arHTML=arHTML.concat(patinstrHTML);
}arHTML.push("</div>");
$("#clg_pat_instr_holder_"+component.getComponentId()).html(arHTML.join(""));
}catch(err){console.log("ERROR IN PAT INSTRUCTIONS"+err);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function CLGRefRangeComponentStyle(){this.initByNamespace("clg_ref_range");
}CLGRefRangeComponentStyle.inherits(ComponentStyle);
function CLGRefRangeComponent(criterion){this.setCriterion(criterion);
this.setStyles(new CLGRefRangeComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CLINLABGUIDE_REFRANGE.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CLINLABGUIDE_REFRANGE.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
CLGRefRangeComponent.method("InsertData",function(){var titleText=MP_Util.CreateTitleText(this,0);
MP_Util.Doc.FinalizeComponent("<div id='clg_ref_range_holder_"+this.getComponentId()+"'></div>",this,titleText);
});
CLGRefRangeComponent.method("HandleSuccess",function(recordData){});
CLGRefRangeComponent.method("LoadData",function(data){CERN_CLG_REF_RANGE_O1.RenderComponent(this,data);
});
CLGRefRangeComponent.method("LoadLabGuideData",function(data){CERN_CLG_REF_RANGE_O1.RenderRefRange(this,data);
CERN_CLG_REF_RANGE_O1.RenderInterpretiveData(this,data);
});
}CLGRefRangeComponent.inherits(MPageComponent);
var CERN_CLG_REF_RANGE_O1=function(){return{RenderComponent:function(component,recordData){var bIsCareset=false;
var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var interpHTML=[],refrangHTML=[];
var arHTML=[];
arHTML.push("<div id=info-",component.getComponentId(),' class="info_block">');
if(recordData){var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
if(recordData.CARESET_IND>0){bIsCareset=true;
}else{bIsCareset=false;
}for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"INTERPDATA":if(segments[i].SEGMENT_DATA_ID>0){MP_LAB_GUIDE.SetGetInterpData(false);
var segmentlbl=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_LABEL,"");
var segmentct=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_BODY,MP_LAB_GUIDE.GetOKTags());
interpHTML.push('<div class="seg_sect INTERPDATA"><div class="seg_header"><a id="interp_click" href="javascript:">',segmentlbl,'</a></div><div class="seg_body"><div id="interpre_data">',segmentct,"</div></div></div>");
}else{MP_LAB_GUIDE.SetGetInterpData(true&&!bIsCareset);
if(MP_LAB_GUIDE.GetInterpData()){var segmentlbl=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_LABEL,"");
interpHTML.push("<div id=","interp_data_par",' class="seg_sect INTERPDATA"><div class="seg_header"><a id="interp_click" href="javascript:">',segmentlbl,'</a></div><div class="seg_body"><div id=',"interpre_data","></div></div></div>");
}}break;
case"REFRANGES":if(segments[i].SEGMENT_DATA_ID>0){MP_LAB_GUIDE.SetGetRefRanges(false);
refrangHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"REFRANGES"));
}else{MP_LAB_GUIDE.SetGetRefRanges(true&&!bIsCareset);
if(MP_LAB_GUIDE.GetRefRanges()){refrangHTML.push(MP_LAB_GUIDE.GetSegmentStubString("","ref_range","ref_range_par","REFRANGES"));
}}break;
default:}}arHTML=arHTML.concat(refrangHTML,interpHTML);
}arHTML.push("</div>");
$("#clg_ref_range_holder_"+component.getComponentId()).html(arHTML.join(""));
$("#interpre_data").hide();
$("#interp_click").click(function(event){MP_LAB_UTIL.ShowModalDialog($("#interpre_data").html(),3,null,event);
});
if($("#interpre_data").length>0){if($("#interpre_data").html().length>0){$("#interp_data_par").show();
}else{$("#interp_data_par").hide();
}}}catch(err){console.log("ERROR IN REF RANGES"+err);
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},RenderRefRange:function(component,data){var infoDiv=$("#info-"+component.getComponentId());
var refHTML=[];
var refRange=data.REF_RANGES.length;
var age,unkStr;
if(MP_LAB_GUIDE.GetRefRanges()){if(refRange>0){refHTML.push('<div id="ref_range">');
refHTML.push('<div id="rr_spec_select"></div>');
refHTML.push('<div class="data_table_container"><table class="data_info"><thead><tr><th class="first_col">',i18n.lab.lab_guide.GENDER,"</th><th colspan=2>",i18n.AGE,"</th>");
refHTML.push("<th>",i18n.lab.lab_guide.REFERENCE,"</th><th>",i18n.lab.lab_guide.CRITICAL,"</th><th>",i18n.lab.lab_guide.UNITS,"</th></tr>");
refHTML.push("</thead><tbody>");
for(var i=0;
i<refRange;
i++){var rang=data.REF_RANGES[i].RANGES;
if(rang.length>0){refHTML.push("<tr><td class=data_table_section_head colspan=6>"+data.REF_RANGES[i].TASK_ASSAY_DISP+"</td></tr>");
for(var j=0;
j<rang.length;
j++){age=rang[j].AGE;
unkStr=rang[j].UNKNOWN_AGE_IND>0?i18n.lab.lab_guide.UNKNOWN:"";
if(j%2>0){refHTML.push("<tr class='odd'>");
}else{refHTML.push("<tr class='even'>");
}refHTML.push("<td><span class='first_col'>"+rang[j].GENDER+"</span></td>");
refHTML.push("<td><span>"+age+"</span></td>");
refHTML.push("<td><span>"+unkStr+"</span></td>");
refHTML.push("<td><span>"+rang[j].REF_RANGE+"</span></td>");
refHTML.push("<td><span>"+rang[j].CRITICAL_RANGE+"</span></td>");
refHTML.push("<td><span class='units'>"+rang[j].UNITS+"</span></td>");
refHTML.push("</tr>");
}}}refHTML.push("</tbody>");
refHTML.push("</table></div></div>");
$("#ref_range").replaceWith(refHTML.join(""));
CERN_CLGSELECTORS_O1.MoveSpeciesSelector("rr_spec_select",true);
}else{refHTML.push('<div id="ref_range">');
refHTML.push('<div id="rr_spec_select"></div>');
refHTML.push("</div>");
$("#ref_range").replaceWith(refHTML.join(""));
CERN_CLGSELECTORS_O1.MoveSpeciesSelector("rr_spec_select",true);
}$("#temp_species_select").remove();
}},RenderInterpretiveData:function(component,data){var infoDiv=$("#info-"+component.getComponentId());
var arHTML=[];
var listSize=data.REF_RANGES.length;
var interpCnt=0;
if(MP_LAB_GUIDE.GetInterpData()){arHTML.push('<div id="interpre_data">');
for(var j=0;
j<listSize;
j++){var intdata=data.REF_RANGES[j].INTERP_DATA;
var catalog=data.REF_RANGES[j].TASK_ASSAY_DISP;
if(intdata!=""){arHTML.push("<span class=interp_dta>",catalog,"</span><br /><span class=interp_interp>",intdata,"</span><br /><br />");
interpCnt++;
}}arHTML.push("</div>");
if(interpCnt>0){$("#interpre_data").replaceWith(arHTML.join(""));
$("#interp_data_par").show();
}else{$("#interp_data_par").hide();
}$("#interpre_data").hide();
}}};
}();
if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ieVersion=new Number(RegExp.$1);
}else{var ieVersion=0;
}function RenderPage(){var js_criterion=JSON.parse(m_criterionJSON);
var criterion=MP_Util.GetCriterion(js_criterion,CERN_static_content);
var lab_criterion;
if(window.m_lab_criterionJSON){lab_criterion=JSON.parse(m_lab_criterionJSON);
}var labGuideComps=[];
var inptComponentMapping=Array(new MP_Core.MapObject("mp_ap_order_info",CLGOrderInfoComponent),new MP_Core.MapObject("mp_ap_ref_ranges",CLGRefRangeComponent),new MP_Core.MapObject("mp_ap_order_sched",CLGOrdSchedComponent),new MP_Core.MapObject("mp_ap_collect_info",CLGCollectionInfoComponent),new MP_Core.MapObject("mp_ap_pt_instructions",CLGPatInstrComponent),new MP_Core.MapObject("mp_clin_lab_page",APClinLabPage));
var inptMPage=MP_Bedrock.CreateBedrockMPage("MP_CLIN_LAB_GUIDE",inptComponentMapping,criterion);
var tmpComp=inptMPage.getComponents();
var dummyComp,dCompIdx;
for(var i=0;
i<tmpComp.length;
i++){var comp=tmpComp[i];
if(comp instanceof APClinLabPage){dummyComp=comp;
dCompIdx=i;
}else{if(comp instanceof CLGRefRangeComponent){labGuideComps.push(comp);
}else{if(comp instanceof CLGCollectionInfoComponent){labGuideComps.push(comp);
}}}}tmpComp.splice(dCompIdx,1);
inptMPage.setComponents(tmpComp);
inptMPage.setName(dummyComp.GetPageName());
dummyComp=null;
MP_Util.Doc.InitLayout(inptMPage);
MP_Util.Doc.RenderLayout();
MP_Util.Doc.ExpandCollapseAll();
MP_LAB_GUIDE.AddPrintOption(CERN_static_content);
$(".col-outer1").before("<div id=clg_sidebar class=clg_sidebar></div>");
MP_LAB_GUIDE.LoadSideBarData();
MP_LAB_GUIDE.StartUp(criterion);
$("body").bind("MP_LAB_GUIDE.GET_ORG_FIELDS",function(e){MP_LAB_GUIDE.GetORGFields(FillComponentsFromOrgFields);
});
$("body").bind("MP_LAB_GUIDE.GLOBAL_ORG_LOCS_CHANGED",function(e){if(!MP_LAB_GUIDE_ORG_LOCS.GetUsingOverridingLocation()){MP_LAB_GUIDE.SetProcedureName("");
}MP_LAB_GUIDE.ProcessOrgChange();
});
$("body").bind("MP_LAB_GUIDE.ORDER_SELECTED",function(e,catalogCd,procedureName){if(catalogCd>0){MP_LAB_GUIDE.SetProcedureName(procedureName);
}else{if(catalogCd==-1){MP_LAB_GUIDE.SetProcedureName(i18n.NO_RESULTS_FOUND);
catalogCd=0;
}else{MP_LAB_GUIDE.SetProcedureName("");
}}MP_LAB_GUIDE.SetCatalogCd(catalogCd);
if(!MP_LAB_GUIDE.GetIsLaunchingWithContext()){MP_LAB_GUIDE.ProcessOrderChange();
}});
if(lab_criterion){MP_LAB_GUIDE.ProcessCriterionOverrideLogic(lab_criterion.LAB_CRITERION);
}function FillComponentsFromOrgFields(data,failure){if(!failure){var size=labGuideComps.length;
for(var x=0;
x<size;
x++){labGuideComps[x].LoadLabGuideData(data);
}}}}var MP_LAB_GUIDE=function(){var m_appNumber=1050009;
var m_appSection="CLG ORG SETTINGS";
var static_content="";
var m_catalogCd=0;
var m_procedureName="";
var m_bGetRefRanges=false;
var m_bGetCollReqs=false;
var m_bGetInterpData=false;
var m_bIsCareset=false;
var m_okTags="<br><p><ul><li><div><b><u><ol><lh><i>";
var consoleSettings;
var m_bIsLaunchingWithContext=false;
function EncodeLocationStrings(org){org.DEFAULT_NAME=encodeURIComponent(org.DEFAULT_NAME);
org.FAC_NAME=encodeURIComponent(org.FAC_NAME);
org.LOC_NAME=encodeURIComponent(org.LOC_NAME);
org.ORG_NAME=encodeURIComponent(org.ORG_NAME);
return org;
}function DecodeLocationStrings(org){org.DEFAULT_NAME=decodeURIComponent(org.DEFAULT_NAME);
org.FAC_NAME=decodeURIComponent(org.FAC_NAME);
org.LOC_NAME=decodeURIComponent(org.LOC_NAME);
org.ORG_NAME=decodeURIComponent(org.ORG_NAME);
return org;
}function Process_Org_Change(){if(!MP_LAB_GUIDE_ORG_LOCS.GetUsingOverridingLocation()){m_catalogCd=0;
if(MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().LOC_CD==0&&consoleSettings.DEFAULT_ID>0){if(!MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().TRIED_DEFAULT_ORG){MP_LAB_GUIDE_ORG_LOCS.SetCurrentOrg(consoleSettings,true);
}}}Get_Order_Org_Data();
Reset_Focus();
var org_name=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().ORG_NAME;
var loc_name=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().LOC_NAME;
$("#curLocText").replaceWith('<div id="curLocText">'+loc_name+"</div>");
$("#curOrgName").replaceWith('<div id="curOrgName">'+org_name+"</div>");
var curOrg=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg();
if(curOrg.LOC_CD>0){curOrg=EncodeLocationStrings(curOrg);
MP_LAB_UTIL.SetPagePrefs(m_appNumber,m_appSection,curOrg,function(recordData){return false;
});
}}function Reset_Focus(){if(MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().ORG_ID>0){$("#input-procedure").focus();
}else{$("#globalORGSelect a").focus();
}$("#input-procedure").val(MP_LAB_GUIDE.GetProcedureName());
}function Get_Order_Org_Data(){var organizationid=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().ORG_ID;
var catalogcd=m_catalogCd;
var sendAr=[];
if(organizationid>0){sendAr.push("^MINE^,"+organizationid+".00,"+catalogcd+".00");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.CLINLABGUIDE.O1 - load component","pcs_get_clg_fields",sendAr,true,Load_Order_Org_Data);
}else{Load_Order_Org_Data(null);
}}function Load_Order_Org_Data(data,failure){if(!failure){RefreshSideBar(data);
var n_comp=CERN_MPageComponents.length;
for(var x=0;
x<n_comp;
x++){CERN_MPageComponents[x].LoadData(data);
}}Reset_Focus();
var hidden=$(".seg_body div:hidden");
var hidden2=$(".seg_body span:hidden");
$(".seg_body *").removeAttr("style");
hidden.hide();
hidden2.hide();
if(m_catalogCd==0){CERN_CLGSELECTORS_O1.ShowRptPriority(false);
CERN_CLGSELECTORS_O1.ShowSpecimen(false);
CERN_CLGSELECTORS_O1.ShowSpecies(false);
$("#coll_reqs_par").hide();
$("#ref_range_par").hide();
$("#interp_data_par").hide();
}else{CERN_CLGSELECTORS_O1.ShowRptPriority(m_bGetCollReqs||m_bGetRefRanges);
CERN_CLGSELECTORS_O1.ShowSpecimen(m_bGetCollReqs||m_bGetRefRanges);
CERN_CLGSELECTORS_O1.ShowSpecies(m_bGetRefRanges);
}CERN_CLGSELECTORS_O1.GetSpecimensByCatalog(m_catalogCd);
}function LoadSideBar(){var synHTML=[],labInfoHTML=[],labCustHTML=[];
var arHTML=[],locHTML=[];
var synonymstr="";
arHTML.push("<div class=search_box>");
arHTML.push("<span class=fieldlabel>"+i18n.PROCEDURE+"</span>");
arHTML.push('<br /><input id="input-procedure" type="text"/>');
arHTML.push("<div id=synstring class=synstring>",synonymstr&&(m_catalogCd>0)?synonymstr:"","</div><br />");
arHTML.push('<div id="clg_selectors"></div>');
arHTML.push("</div>");
arHTML.push("<div id=info-sidebar>");
locHTML.push('<div id="curOrgName">'+MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().ORG_NAME+"</div>");
locHTML.push('<div id="curLocText">'+MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg().LOC_NAME+"</div>");
locHTML.push('<div id="globalORGSelect"><a href="javascript:">'+i18n.lab.lab_guide.CHANGE_LOCATION+"</a></div>");
locHTML.push('<div id="labInfo"></div>');
arHTML=arHTML.concat(locHTML);
arHTML.push("</div>");
$("#clg_sidebar").html(arHTML.join(""));
$("#input-procedure").keyup(function(e){if(e.keyCode==8){var len=$(this).val().length;
if($(this).val()==i18n.NO_RESULTS_FOUND.substring(0,len)){$(this).val("");
}}else{if(e.keyCode==13){MP_ORDERSELECTOR.GetOrders($(this).val());
}}});
$("#globalORGSelect").click(function(e){MP_LAB_GUIDE_ORG_LOCS.ShowORGDialog(e,MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg());
});
}function RefreshSideBar(recordData){var synHTML=[],labInfoHTML=[],labCustHTML=[];
var arHTML=[],locHTML=[];
var synonymstr="";
var proc_desc="";
if(recordData){var proc_desc=(m_catalogCd>0)?recordData.DESCRIPTION:"";
var syn=recordData.SYNONYMS;
var syn_counts=recordData.SYNONYMS.length;
var segments=recordData.SEGMENTS;
var segments_counts=recordData.SEGMENTS.length;
for(var i=0;
i<segments_counts;
i++){switch(segments[i].SEGMENT_TYPE.split(" ").join("")){case"SYNONYM":if(segments[i].SEGMENT_DATA_ID>0){synonymstr="<p>(";
synonymstr+=MP_LAB_UTIL.Strip_Tags(segments[i].SEGMENT_BODY,"");
synonymstr+=")</p>";
}else{if(syn_counts>0){synonymstr=" (";
for(var j=0;
j<syn_counts;
j++){synonymstr+=syn[j].MNEMONIC;
if(j<syn_counts-1){synonymstr+=", ";
}}synonymstr+=")";
}}break;
case"LABINFO":labInfoHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"LABINFO"));
break;
case"LABCUSTOM":labCustHTML.push(MP_LAB_GUIDE.GetSegmentString(segments[i],"LABCUSTOM"));
break;
default:}}$("#input-procedure").val(MP_LAB_GUIDE.GetProcedureName());
}arHTML=arHTML.concat(labInfoHTML,labCustHTML);
$("#labInfo").replaceWith("<div id='labInfo'>"+arHTML.join("")+"</div>");
$("#synstring").replaceWith("<div id=synstring class=synstring>"+proc_desc+" "+synonymstr+"</div>");
}function LoadPrintDialog(pgTitle){var staticPth=MP_LAB_GUIDE.static_content;
if(window.CCLLINK){$("#PatientPrintSS").removeAttr("disabled");
$("#PrintSS").attr("disabled","disabled");
window.print();
$("#PrintSS").removeAttr("disabled");
$("#PatientPrintSS").attr("disabled","disabled");
}else{if(staticPth!=null){window.open(staticPth+"/mp_patient_print.html","PatientPrint","menubar=1,resizable=1,width=400,height=400");
}}}return{StartUp:function(criterion){sImgPath=criterion.static_content+"/images/lab/";
sShimImgPath=criterion.static_content+"/images/lab/shim.png";
CERN_CLGSELECTORS_O1.StartUp("clg_selectors");
MP_LAB_GUIDE_ORG_LOCS.LoadOrgLocs();
MP_LAB_UTIL.GetPagePrefs(m_appNumber,m_appSection,function(sSettingsJSON){consoleSettings=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg();
consoleSettings=sSettingsJSON?$.extend(consoleSettings,sSettingsJSON):consoleSettings;
consoleSettings=DecodeLocationStrings(consoleSettings);
MP_LAB_GUIDE_ORG_LOCS.SetCurrentOrg(consoleSettings);
if(consoleSettings.LOC_CD>0){MP_LAB_GUIDE_ORG_LOCS.GetChildrenLocations();
}});
},GetORGFields:function(callback){var loc,catalog,priority,specimen,species;
var paramsAr=[];
var org=MP_LAB_GUIDE_ORG_LOCS.GetCurrentOrg();
loc=org.LOC_CD;
catalog=m_catalogCd;
priority=CERN_CLGSELECTORS_O1.GetRptPriorityCd();
specimen=CERN_CLGSELECTORS_O1.GetSpecimenCd();
species=CERN_CLGSELECTORS_O1.GetSpeciesCd();
$("body").append('<div id="temp_species_select"></div>');
CERN_CLGSELECTORS_O1.MoveSpeciesSelector("temp_species_select",false);
paramsAr.push("MINE",loc+".00",catalog+".00",priority+".00",specimen+".00",species+".00");
if(loc&&catalog&&specimen){MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETSSRVRESFIELDS.O1 - getting srv res fields","pcs_get_srv_res_fields",paramsAr,true,function(data,failure){callback(data,failure);
});
}},GetSegmentString:function(segment,seg_class){var jsAlHTMLTemp=[];
var alHTMLTemp="";
if(segment.SEGMENT_DATA_ID>0){var segmentlbl=MP_LAB_UTIL.Strip_Tags(segment.SEGMENT_LABEL,"");
var segmentct=MP_LAB_UTIL.Strip_Tags(segment.SEGMENT_BODY,MP_LAB_GUIDE.GetOKTags());
jsAlHTMLTemp.push('<div class="seg_sect ',seg_class,'"><h2 class="seg_header">',segmentlbl,'</h2><div class="seg_body">',segmentct,"</div></div>");
alHTMLTemp=jsAlHTMLTemp.join("");
}return alHTMLTemp;
},GetSegmentStubString:function(segment,contentId,parentId,seg_class){var jsAlHTMLTemp=[];
var alHTMLTemp="";
var segmentlbl=MP_LAB_UTIL.Strip_Tags(segment,"");
jsAlHTMLTemp.push("<div id=",parentId,' class="seg_sect ',seg_class,'"><h2 class="seg_header">',segmentlbl,'</h2><div class="seg_body"><div id=',contentId,"></div></div></div>");
alHTMLTemp=jsAlHTMLTemp.join("");
return alHTMLTemp;
},LoadSideBarData:function(){LoadSideBar();
},GetCatalogCd:function(){return m_catalogCd;
},ProcessOrgChange:function(){Process_Org_Change();
},ProcessOrderChange:function(){Get_Order_Org_Data();
},SetCatalogCd:function(value){m_catalogCd=value;
},SetProcedureName:function(name){m_procedureName=name;
},GetProcedureName:function(){return m_procedureName;
},SetGetCollReqs:function(value){m_bGetCollReqs=value;
},SetGetRefRanges:function(value){m_bGetRefRanges=value;
},SetGetInterpData:function(value){m_bGetInterpData=value;
},SetGetIsCareset:function(value){m_bIsCareset=value;
},GetCollReqs:function(){return m_bGetCollReqs;
},GetRefRanges:function(){return m_bGetRefRanges;
},GetInterpData:function(){return m_bGetInterpData;
},GetIsCareset:function(){return m_bIsCareset;
},GetOKTags:function(){return m_okTags;
},AddPrintOption:function(pstat_content){MP_LAB_GUIDE.static_content=pstat_content;
$("#expAll").before("<a id='pat_print' onclick='javascript:MP_LAB_GUIDE.ShowPrintDialog()'>"+i18n.lab.lab_guide.PATIENT_PRINT_CAP+" </a>");
},ShowPrintDialog:function(){LoadPrintDialog();
},ProcessCriterionOverrideLogic:function(lab_criterion){if(lab_criterion.CATALOG_CD&&lab_criterion.ORG_ID){if((lab_criterion.CATALOG_CD>0)&&(lab_criterion.ORG_ID>0)){m_bIsLaunchingWithContext=true;
}}if(lab_criterion.CATALOG_CD){if(lab_criterion.CATALOG_CD>0){MP_LAB_GUIDE.SetCatalogCd(lab_criterion.CATALOG_CD);
}}if(lab_criterion.ORG_ID){if(lab_criterion.ORG_ID>0){MP_LAB_GUIDE_ORG_LOCS.SetOverrideLocation(lab_criterion.ORG_ID,lab_criterion.ORG_NAME,lab_criterion.NURSE_UNIT_CD,lab_criterion.NURSE_UNIT_NAME);
$("body").trigger("MP_LAB_GUIDE.GLOBAL_ORG_LOCS_CHANGED");
}}if(lab_criterion.CATALOG_CD){if(lab_criterion.CATALOG_CD>0){$("body").trigger("MP_LAB_GUIDE.ORDER_SELECTED",[lab_criterion.CATALOG_CD,lab_criterion.CATALOG_NAME]);
}}},GetIsLaunchingWithContext:function(){var result=m_bIsLaunchingWithContext;
m_bIsLaunchingWithContext=false;
return result;
}};
}();
