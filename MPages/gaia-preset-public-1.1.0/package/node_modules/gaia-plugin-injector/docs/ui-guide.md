# Gaia Injector Plugin

**Note:** You do not need to configure this plugin if you use the Gaia Live Development plugin.

The Gaia Injector plugin allows Gaia to inject custom code into an HTTP
call. The plugin hijacks an HTML-returning call to Cerner Millennium and
injects your custom JavaScript and CSS into the HTML returned from
Cerner Millennium.

The Gaia Injector plugin works by wrapping an HTTP endpoint from Cerner
Millennium, called the target URL, with a new HTTP endpoint that the
system can call in place of the original endpoint. When URL injections
are not configured, the new HTTP endpoint behaves exactly like
the target URL. When URL injections are configured, the new HTTP
endpoint injects specified \<script\> and \<link\> tags into the HTML
returned from the target URL.

To access the Gaia Injector plugin in Gaia, click the `Injector` tab
on the plugin list on the left.

## Configure the Target URL

The target URL is the HTTP endpoint from Cerner Millennium that the Gaia
Injector plugin wraps. Before configuring the target URL, ensure that
the [Gaia Millennium Proxy](https://github.cerner.com/MPagesEcosystem/gaia-plugin-milproxy) plugin
is available and start the Millennium Proxy server.

When configuring the target URL, if all injections will share a common
prefix, you can enter that prefix in the Prefix box, and then omit the
prefix from the injections you specify. For example, if you have two
injections that share a common prefix, such as
`http://localhost:7070/js/foo.js` and
`http://localhost:7070/css/foo.css`, you can enter
`http://localhost:7070/` as the prefix and enter `js/foo.js` and
`css/foo.css` as the relative injection paths. If you want to
configure injections from multiple sources, do not enter a prefix in the
Prefix box.

Complete the following steps to configure the target URL:

1.  In the Target URL box in the Gaia Injector plugin, enter the
    Millennium proxy server URL.

2.  Optionally, in the Prefix box, enter the common prefix to simplify
    the injection URLs.

## Configure the Intercept URL

The intercept URL connects routes under the target URL to the specified
injection URLs. The intercept URL should be entered as a regular
expression. You can define multiple interception URLs if necessary; for
example, when you have more than one CCL driver script.

Complete the following steps to configure the intercept URL to intercept
the `mp_unified_driver` script:

1.  Click `Add URL` in Gaia Injector plugin.

2.  In the URL to Intercept box, enter the following text:
    `.*mp_unified_driver.*`

## Configure the Injection URLs

You can configure injection URLs to be placed above or below
the \<head\> section in the HTML returned from the intercepted
URL. Injection URLs are injected in the order that they are defined.

Complete the following steps to configure injection URLs from a single
source with a shared prefix:

1.  In the Prefix box, enter the shared prefix for the injection URLs.
    If you are using the [Gaia Webpack](https://github.cerner.com/MPagesEcosystem/gaia-plugin-webpack),
    this prefix may be `http://localhost:7070/`.

2.  Click `Add` (`+`) in the Top or Bottom section, depending on
    whether you want the injection URL to be placed above or below the
    \<head\> section in the returned HTML. A new injection URL text box
    is displayed in the appropriate section.

3.  In the new text, box, enter the relative path with respect to
    the `Prefix`. For example, enter
    `js/my-component.js` or `css/my-component.css`.

4.  Repeat Steps 2 and 3 to add any additional injection URLs.

Complete the following steps to configure injection URLs from multiple
sources without a shared prefix:

1.  Do not enter text in the Prefix box.

2.  Click `Add` (`+`) in the Top or Bottom section, depending on
    whether you want the injection URL to be placed above or below the
    \<head\> section in the returned HTML. A new injection URL text box
    is displayed in the appropriate section.

3.  In the new text box, enter the full path for the injection URL. For
    example, if you are using the [Gaia Content Server](https://github.cerner.com/MPagesEcosystem/gaia-plugin-contentserver),
    enter

    `http://localhost:7070/js/my-component.js`
    or
    `http://localhost:9001/api/routes/contentserver/content/my-component/js/my-component.js`.
