/**
 * Creates the parameter string given a criterion and a static content
 * @param {*} criterion the criterion json
 * @param {String} staticContent the static content location
 * @return {String} the param string
 */
const makeParams = (criterion, staticContent) =>
    "^MINE^"
    + `,${criterion.PERSON_ID}.00`
    + `,${criterion.ENCNTRS[0].ENCNTR_ID}.00`
    + `,${criterion.PRSNL_ID}.00`
    + `,${criterion.POSITION_CD}.00`
    + `,${criterion.PPR_CD}.00`
    + ",^powerchart.exe^"
    + `,^${staticContent}^`
    + `,^${criterion.CATEGORY_MEAN}^`
    + ",9";

/**
 * Creates a parameter string given a criterion json.
 * @param {String} sourceString the criterion json string
 * @returns {String} the param string
 */
const parse = ({ source, config}) =>
    makeParams(JSON.parse(source).CRITERION, "$STATIC_CONTENT$");

export default parse;
