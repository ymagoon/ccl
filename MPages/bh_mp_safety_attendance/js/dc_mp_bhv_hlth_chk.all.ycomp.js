/* jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement){cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close()}d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)})}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){ca(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border"){for(;g<h;g++){c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0}}return d+"px"}d=bz(a,b,b);if(d<0||d==null){d=a.style[b]||0}d=parseFloat(d)||0;if(c){for(;g<h;g++){d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0)}}return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object"){b.outerHTML=a.outerHTML}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)}}b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return }e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return }A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d)}return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h)}return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)}},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++){if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return !!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent){for(o in {submit:1,change:1,focusin:1}){n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p}}k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return }n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return }if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return }}}if(!c){delete j[k].data;if(!m(j[k])){return }}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++){g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]))}f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b){return f.queue(this[0],a)}return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return }if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++){e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return }h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return }c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return }c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return }r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++){r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r)}q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace)){c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return }o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))})}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))}return f.text(this)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}}catch(e){this.empty().append(a)}}else{f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a)}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k){continue}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k)}else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--){o=o.lastChild}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}}var r;if(!f.support.appendChecked){if(k[0]&&typeof (r=k.length)=="number"){for(i=0;i<r;i++){bn(k[i])}}else{bn(k)}}k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return !a.type||be.test(a.type)};for(j=0;h[j];j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j])}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return }h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(bz){return bz(a,c)}},swap:function(a,b,c){var d={};for(var e in b){d[e]=a.style[e],a.style[e]=b[e]}c.call(a);for(e in b){a.style[e]=d[e]}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0){return bC(a,b,d)}f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b)){return b}b=parseFloat(b);if(b>=0){return b+"px"}}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return }}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS){return bS.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=b$(bU,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){ca(g,a[g],c,e)}}return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch){ch[a](0,1)}}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(cu("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(cu("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a){return this.each(function(b){f.offset.setOffset(this,a,b)})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)}try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0}}var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a){return this.each(function(b){f.offset.setOffset(this,a,b)})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)}var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed"){break}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft}f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e){return null}g=cy(e);return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e){return a==null?null:this}if(f.isFunction(a)){return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))})}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c])}if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);function _g(A){return document.getElementById(A)}function _gbt(A,B){B=B||document;return B.getElementsByTagName(A)}var Util=function(){var A=[],B=document,C=window;return{EventCache:function(){var D=[];return{add:function(G,F,E){D.push(arguments)},remove:function(H,G,F){var I;for(var E=D.length-1;E>=0;E=E-1){if(H==D[E][0]&&G==D[E][1]&&F==D[E][2]){I=D[E];if(I[0].removeEventListener){I[0].removeEventListener(I[1],I[2],I[3])}else{if(I[0].detachEvent){if(I[1].substring(0,2)!="on"){I[1]="on"+I[1]}I[0].detachEvent(I[1],I[0][G+F])}}}}},flush:function(){var F;for(var E=D.length-1;E>=0;E=E-1){var G=D[E];if(G[0].removeEventListener){G[0].removeEventListener(G[1],G[2],G[3])}F=G[1];if(G[1].substring(0,2)!="on"){G[1]="on"+G[1]}if(G[0].detachEvent){G[0].detachEvent(G[1],G[2]);if(G[0][F+G[2]]){G[0].detachEvent(G[1],G[0][F+G[2]])}}}}}}(),ce:function(E){var D=A[E];if(!D){D=A[E]=B.createElement(E)}if(!D){return null}else{return D.cloneNode(false)}},cep:function(D,F){var E=this.ce(D);return this.mo(E,F)},mo:function(E,D,G){E=E||{};D=D||{};var F;for(F in D){if(F){E[F]=(E[F]===undefined)?D[F]:!G?D[F]:E[F]}}return E},de:function(D){if(D){this.gp(D).removeChild(D)}},cancelBubble:function(D){D=C.event||D;if(!D){return }if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}},preventDefault:function(D){D=C.event||D;if(!D){return }if(D.preventDefault){D.preventDefault()}else{D.returnValue=false}},goff:function(F){var D=0,E=0;if(F.offsetParent){while(F.offsetParent){D+=F.offsetLeft;E+=F.offsetTop;F=F.offsetParent}}else{if(F.x||F.y){D+=F.x||0;E+=F.y||0}}return[D,E]},gp:function(D){if(!D.parentNode){return D}D=D.parentNode;while(D.nodeType===3&&D.parentNode){D=D.parentNode}return D},gc:function(F,E){E=E||0;var D=-1;if(!F.childNodes[E]){return null}F=F.childNodes[0];while(F&&D<E){if(F.nodeType===1){D++;if(D===E){break}}F=this.gns(F)}return F},gcs:function(G){var F=[],H=G.childNodes;for(var E=0;E<H.length;E++){var D=H[E];if(D.nodeType===1){F.push(D)}}return F},gns:function(E){var D=E.nextSibling;while(D&&D.nodeType!==1){D=D.nextSibling}return D},gps:function(E){var D=E.previousSibling;while(D&&D.nodeType!==1){D=D.previousSibling}return D},ac:function(E,D){D.appendChild(E);return E},ia:function(G,D){var E=Util.gp(D),F=Util.gns(D);if(F){E.insertBefore(G,F)}else{Util.ac(G,E)}},addEvent:function(H,G,F){function E(K,J,L){if(!K.myEvents){K.myEvents={}}if(!K.myEvents[J]){K.myEvents[J]=[]}var I=K.myEvents[J];I[I.length]=L}function D(M,K){if(!M||!M.myEvents||!M.myEvents[K]){return }var J=M.myEvents[K];for(var L=0,I=J.length;L<I;L++){J[L]()}}if(H.addEventListener){H.addEventListener(G,F,false);Util.EventCache.add(H,G,F)}else{if(H.attachEvent){H["e"+G+F]=F;H[G+F]=function(){H["e"+G+F](window.event)};H.attachEvent("on"+G,H[G+F]);Util.EventCache.add(H,G,F)}else{E(H,G,F);H["on"+G]=function(){D(H,G)}}}},removeEvent:function(F,E,D){Util.EventCache.remove(F,E,D)},popup:function(F,K,J){if(!window.open){return false}var I={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};function G(M,L){if(!L){return""}return M+"="+L+","}function D(){J=J||{};var L,M={};for(L in I){if(L){M[L]=J[L]!==undefined?J[L]:I[L]}}return M}J=D();var H=G("dependent",J.dp)+G("directories",J.dr)+G("fullscreen",J.fs)+G("location",J.lb?1:0)+G("menubar",J.mb)+G("resizable",J.rz?1:0)+G("scrollbars",J.scb?1:0)+G("status",J.stb?1:0)+G("toolbar",J.tb?1:0)+G("top",J.tp)+G("left",J.lft)+G("width",J.w)+G("height",J.h)+G("screenX",J.sx)+G("screenY",J.sy);H=H.substring(0,H.length-1);var E=window.open(F,K,H);window.blur();if(E.focus){E.focus()}return true},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}}}();function insertAfter(B,A){Util.ia(B,A)}Util.addEvent(window,"unload",Util.EventCache.flush);Util.Detect=function(){return{gecko:function(){return navigator.product==="Gecko"},webkit:function(){return new RegExp(" AppleWebKit/").test(navigator.userAgent)},webkitmob:function(){if(this.webkit()&&new RegExp(" Mobile/").test(navigator.userAgent)){var A=new RegExp("(Mozilla/5.0 \\()([^;]+)").exec(navigator.userAgent);return(!A||A.length<3)}},ie6:function(){return typeof document.all!=="undefined"&&typeof window.XMLHttpRequest==="undefined"&&typeof document.body.style.maxWidth==="undefined"}}}();Util.i18n=function(){var A={};function B(E,D){var C=A[E]||{};A[E]=Util.mo(C,D,true)}return{set:function(D,C){if(!D){return null}B(D,C);return A[D]},setString:function(F,C,D){if(!F||!C){return null}D=D||"";var E={};E[C]=D;B(F,E);return A[F]},get:function(C){return A[C]||{}},getString:function(D,C){return this.get(D)[C]||""},getNamespaces:function(){var E=[],C=0,D;for(D in A){E[C++]=D}return E}}}();Util.Load=function(){var A=Util,I=false,F=[],G=document,J=window,K,L,B,C,D,E,H=A.ce("LINK");if(H){H.rel="script";H.href="javascript:void(0);";H.id="__onload";_gbt("HEAD")[0].appendChild(H);L=_g("__onload")}B=function(){if(K){clearInterval(K);K=null}for(var M=0;M<F.length;M++){F[M].call(this)}D();F=[];I=true};C=function(){if(/loaded|complete/.test(G.readyState)){B()}};D=function(){var M=A.removeEvent;clearInterval(K);M(J,"load",B);M(G,"DOMContentLoaded",B);if(H){M(H,"readystatechange",C)}};E=function(){var M=A.addEvent;M(J,"load",B);M(G,"DOMContentLoaded",B);if(H){M(H,"readystatechange",C)}if(G.readyState){K=setInterval(function(){C()},10)}};E();return{add:function(M){if(I){if(A.Detect.webkit()){setTimeout(M,1)}else{M.call()}return }F.push(M)}}}();Util.Pos=function(){return{gso:function(){var G=document,A=G.body,B=window,F=G.documentElement,E=F.scrollTop,C=A.scrollTop,D=F.scrollLeft,H=A.scrollLeft;if(typeof B.pageYOffset==="number"){return[B.pageYOffset,B.pageXOffset]}if(typeof E==="number"){if(C>E||H>D){return[C,H]}return[E,D]}return[C,H]},goo:function(A){if(A){return[A.offsetTop,A.offsetLeft,A.offsetHeight,A.offsetWidth]}return[0,0,0,0]},gop:function(C){var A=0,B=0;if(C.offsetParent){A=C.offsetLeft;B=C.offsetTop;C=C.offsetParent;while(C){A+=C.offsetLeft;B+=C.offsetTop;C=C.offsetParent}}return[B,A]},gvs:function(){var D=window,C=document,A=C.body,B=C.documentElement;if(typeof D.innerWidth!=="undefined"){return[D.innerHeight,D.innerWidth]}else{if(typeof B!=="undefined"&&typeof B.clientWidth!=="undefined"&&B.clientWidth!==0){return[B.clientHeight,B.clientWidth]}else{return[A.clientHeight,A.clientWidth]}}}}}();Util.Style=function(){return{ccss:function(D,E){if(typeof (D.className)==="undefined"||!D.className){return false}var B=D.className.split(" ");for(var C=0,A=B.length;C<A;C++){if(B[C]===E){return true}}return false},acss:function(A,B){if(this.ccss(A,B)){return A}A.className=(A.className?A.className+" ":"")+B;return A},rcss:function(E,G){if(!this.ccss(E,G)){return E}var B=E.className.split(" "),F="";for(var C=0,A=B.length;C<A;C++){var D=B[C];if(D!==G){F+=F.length>0?(" "+D):D}}E.className=F;return E},tcss:function(A,B){if(this.ccss(A,B)){this.rcss(A,B);return false}else{this.acss(A,B);return true}},co:function(A){A.style.MozOpacity="";A.style.opacity="";A.style.filter=""},g:function(H,F,D){F=F||document;D=D||"*";var E=[],G=_gbt(D,F),A=G.length;for(var C=0,B=0;C<A;C++){if(this.ccss(G[C],H)){E[B]=G[C];B++}}return E}}}();Util.Timeout=function(){var _d={duration:5,restart:true,confirm:false,namespace:"Timeout",key:"Warning",warning:"",url:null},_o=_d,_t;function fs(o){var p,n={};for(p in _o){if(p){n[p]=o[p]!==undefined?o[p]:_o[p]}}return n}function fe(e){var s=_gbt("SCRIPT",e);for(var i=0;i<s.length;++i){eval(s[i].innerHTML)}}function fr(t){if(t&&t.length>0){var d=Util.ce("DIV"),y=d.style;y.position="absolute";y.visibility="hidden";Util.ac(d,document.body);d.innerHTML=t;fe(d)}}function fst(){if(!_o.url){return }_t=setTimeout(fc,(_o.duration*60*1000))}function fc(){var s=_o.warning.length>0?_o.warning:Util.i18n.getString(_o.namespace,_o.key);if(_o.confirm&&confirm(s)){Ajax.load(_o.url,fr)}else{alert(s);Ajax.load(_o.url,fr)}if(_o.restart){fst()}}return{setup:function(u,o){if(!u){return }o.url=u;_o=fs(o)},reset:function(){_o=_d},start:function(){fst()},cancel:function(){clearTimeout(_t)}}}();Util.Convert=function(){var B;function A(){if(!B){var C=document.body;B=Util.ce("DIV");var D=B.style;D.position="absolute";D.left=D.top="-999px";D.height="100em";D.width="1px";D.innerHTML="&nbsp;";D.background="#FFF";C.insertBefore(B,Util.gc(C))}return B}return{px2em:function(C){return(C/A().offsetHeight)*100},em2px:function(C){return Math.round((C*A().offsetHeight)/100)}}}();var Ajax;function XmlHttpObject(){function C(){var D=null;if(window.XMLHttpRequest){D=new XMLHttpRequest()}else{if(window.ActiveXObject){D=new ActiveXObject("MSXML2.XMLHTTP.3.0")}}return D}var A=C();function B(D,K,J,H){try{var E=D.split("?"),I=E[1]||"";A.open(H?"POST":"GET",H?E[0]:D,true);A.onreadystatechange=K;A.setRequestHeader("XMLHttpRequest","true");if(H){A.setRequestHeader("Content-type","application/x-www-form-urlencoded");A.setRequestHeader("Content-length",I.length);A.setRequestHeader("Connection","close");A.send(I)}else{A.send(null)}}catch(G){if(J){try{J.call(this,G)}catch(F){throw F}}}}return{postContent:function(E,D,F){B(E,D,F,true)},loadContent:function(E,D,F){B(E,D,F,0)},status:function(){return A.status},statusText:function(){return A.statusText},readyState:function(){return A.readyState},responseText:function(){return A.responseText},ready:function(){return this.readyState()===4},loaded:function(){var D=this.status();return Ajax.local?D===200||D===0:D===200}}}Ajax=function(){function _bu(o,b,a,s){var u="";for(var i=0;i<o.length;++i){var e=o[i],t=e.type,v=null;if(t=="select-one"||t=="select-multiple"){for(var q=0;q<e.options.length;++q){var r=e.options[q];if(r.selected){v=r.value;break}}}else{if(t=="radio"||t=="checkbox"){if(!e.checked){continue}}else{if(t=="file"||t=="reset"){continue}else{if(t=="submit"&&s&&e!=s){continue}}}}if(e.name){u+=u!==""?"&":"";v=v===null?e.value:v;u+=e.name+"="+encodeURIComponent(v)}}return b?a+"?"+u:u}function _exs(e){var s=_gbt("SCRIPT",e);for(var i=0;i<s.length;++i){eval(s[i].innerHTML)}}function fl(u,f,e,ps){var x=new XmlHttpObject();var r=function(r){var n=new Ajax.Error(x,r);if(e){e.call(this,n)}else{throw n.error}};var c=function(){try{if(x.ready()){if(x.loaded()){if(f){f.call(this,x.responseText())}}else{r.call(this)}}}catch(e){r.call(this,e,x)}},v=ps?function(){x.postContent(u,c,r)}:function(){x.loadContent(u,c,r)};if(Ajax.local){setTimeout(v,1000)}else{v()}}function fp(u,o,f,e,p){if(!u&&!o){return null}p=p||{};var U=Util,S=U.Style,r=("clear" in p)?p.clear:false,s=("wait" in p)?p.wait:true,n=function(t){S.rcss(o,"wait");o.innerHTML=t;_exs(o);if(f){f.call(this,t)}};if(s){S.acss(o,"wait")}if(r){var c=U.gc(o);while(c){o.removeChild(c);c=U.gc(o)}}function ee(err){S.rcss(o,"wait");if(e){e.call(this,err)}}return fl(u,n,ee,p.post)}return{local:false,load:function(u,f,e){fl(u,f,e,0)},post:function(u,f,e){fl(u,f,e,true)},place:function(u,o,f,e,p){fp(u,o,f,e,p)},getFormParams:function(f,b,s){return _bu(f.elements,b,b?f.action:"",s)},getFSParams:function(f,s){var u=_bu(_gbt("input",f),false,"",s),r=_bu(_gbt("select",f),false,"");return u===""?r:u+(r!==""?"&":"")+r}}}();Ajax.Error=function(A,B){return{xmlHttp:A,error:B,message:function(){return"[JavaScript Error] "+(this.errorError()||"None")+", [XMLHttp Error] "+(this.xmlError()||"None")},errorError:function(){return B?B.message:null},xmlError:function(){try{if(!A){return"XMLHTTP object is null"}else{var C=A.status();return"Status: "+(C===undefined?"unknown":C)+", Ready State: "+(A.readyState()||"unknown")+", Response: "+(A.responseText()||"unknown")}}catch(D){return D.message}}}};function Animator(D){var J=[],K=0,L=0,B,E,C={inv:15,dur:450,trans:Animator.TX.linear,step:function(){},fin:function(){}};function H(N){var M,O={};for(M in C){if(M){O[M]=N[M]!==undefined?N[M]:C[M]}}return O}function A(){var M=C.trans(L);for(var N=0;N<J.length;N++){J[N].set(M);if(K!=L){J[N].step.call(this)}else{J[N].fin.call(this)}}}function G(){var O=new Date().getTime(),N=O-B,M=(N/C.dur)*(L<K?1:-1);B=O;if(Math.abs(M)>=Math.abs(L-K)){L=K}else{L+=M}try{A()}finally{C.step.call(this);if(K==L){window.clearInterval(E);E=null;C.fin.call(this)}}}function I(N,M){K=Math.max(0,Math.min(1,M));L=Math.max(0,Math.min(1,N));B=new Date().getTime();if(!E){E=window.setInterval(G,C.inv)}}function F(M){I(L,M)}D=D||{};C=H(D);return{toggle:function(){F(1-K)},add:function(M){J[J.length]=M;return this},clear:function(){J=[];B=null},play:function(){I(0,1)},reverse:function(){I(1,0)},setOptions:function(M){C=H(M)},getOptions:function(){return C}}}Animator.Queue=function(C){var B=false;function G(H){if(H===null){return[]}if(H.tagName||!H.length){return[H]}return H}function D(I,H){I.setOptions({fin:function(){I._of.call();H.play()}})}function A(I,H){I.setOptions({fin:function(){H.reverse();I._of.call()}})}function F(J){var I=J.getOptions(),H=I.fin;J.setOptions({fin:function(){B=false;H.call();for(var K=0;K<C.length;K++){C[K].setOptions({fin:C[K]._of})}}})}G(C);for(var E=0;E<C.length;E++){C[E]._of=C[E].getOptions().fin}return{play:function(){if(B){return }B=true;for(var H=0;H<C.length-1;H++){D(C[H],C[H+1])}F(C[C.length-1]);C[0].play()},reverse:function(){if(B){return }B=true;for(var H=C.length-1;H>0;H--){A(C[H],C[H-1])}F(C[0]);C[C.length-1].reverse()}}};Animator.TX=function(){function C(D){D=D||1;return function(E){return Math.pow(E,D*2)}}function A(D){D=D||1;return function(E){return 1-Math.pow(1-E,D*2)}}function B(D){return function(E){E=Animator.TX.easeInOut(E);return((1-Math.cos(E*Math.PI*D))*(1-E))+E}}return{linear:function(D){return D},easeIn:C(1.5),easeOut:A(1.5),strongEaseIn:C(2.5),strongEaseOut:A(2.5),easeInOut:function(D){return((-Math.cos(D*Math.PI)/2)+0.5)},elastic:B(1),veryElastic:B(3)}}();Animator.Animation=function(C,A,B){return{set:C||function(){},step:A||function(){},fin:B||function(){}}};Animator.Animations=function(){function A(B){if(B===null){return[]}if(B.tagName||!B.length){return[B]}return B}return{Numeric:function(J,C,G,L,K,D){var B,F;J=A(J);K=K||"px";D=D||{};if(typeof G==="function"){B=function(){return G()}}else{B=function(){return G}}if(typeof L==="function"){F=function(){return L()}}else{F=function(){return L}}var H=function(N){for(var O=0;O<J.length;O++){var M=B()+((F()-B())*N);if(D.enf0){M=M<0?0:M}J[O].style[C]=M+K}};var E=D.step||function(){};var I=function(){if(D.fin){D.fin.call(this)}};return new Animator.Animation(H,E,I)},Color:function(I,B,E,J){function D(L){return[parseInt(L.slice(1,3),16),parseInt(L.slice(3,5),16),parseInt(L.slice(5,7),16)]}function K(M){M=M>255?255:M;var L=M.toString(16);if(M<16){return"0"+L}return L}function F(L,M){return Math.round(E[L]+((J[L]-E[L])*M))}var G=function(M){var N="#"+K(F(0,M))+K(F(1,M))+K(F(2,M));for(var L=0;L<I.length;L++){I[L].style[B]=N}};var H=function(){for(var L=0;L<I.length;L++){I[L].style[B]=J}};I=A(I);for(var C=0;C<I.length;C++){I[C].style[B]=E}J=D(J);E=D(E);return new Animator.Animation(G,null,H)},Opacity:function(E,D,C){E=A(E);function B(H){for(var I=0;I<E.length;I++){var J=E[I].style,G=D+(C-D)*H;J.opacity=J.mozOpacity=G;J.zoom=1;J.filter=G===1?"":"alpha(opacity="+G*100+")"}}function F(){for(var G=0;G<E.length;G++){var H=E[G].style;if(H.opacity===1){H.filter=""}}}return new Animator.Animation(B,null,F)}}}();var handlebars=(function(){var F={trace:function C(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function B(G,J,K,N,M,I,L){var H=I.length-1;switch(M){case 1:return I[H-1];break;case 2:this.$=new N.ProgramNode(I[H-2],I[H]);break;case 3:this.$=new N.ProgramNode(I[H]);break;case 4:this.$=new N.ProgramNode([]);break;case 5:this.$=[I[H]];break;case 6:I[H-1].push(I[H]);this.$=I[H-1];break;case 7:this.$=new N.InverseNode(I[H-2],I[H-1],I[H]);break;case 8:this.$=new N.BlockNode(I[H-2],I[H-1],I[H]);break;case 9:this.$=I[H];break;case 10:this.$=I[H];break;case 11:this.$=new N.ContentNode(I[H]);break;case 12:this.$=new N.CommentNode(I[H]);break;case 13:this.$=new N.MustacheNode(I[H-1][0],I[H-1][1]);break;case 14:this.$=new N.MustacheNode(I[H-1][0],I[H-1][1]);break;case 15:this.$=I[H-1];break;case 16:this.$=new N.MustacheNode(I[H-1][0],I[H-1][1]);break;case 17:this.$=new N.MustacheNode(I[H-1][0],I[H-1][1],true);break;case 18:this.$=new N.PartialNode(I[H-1]);break;case 19:this.$=new N.PartialNode(I[H-2],I[H-1]);break;case 20:break;case 21:this.$=[[I[H-2]].concat(I[H-1]),I[H]];break;case 22:this.$=[[I[H-1]].concat(I[H]),null];break;case 23:this.$=[[I[H-1]],I[H]];break;case 24:this.$=[[I[H]],null];break;case 25:I[H-1].push(I[H]);this.$=I[H-1];break;case 26:this.$=[I[H]];break;case 27:this.$=I[H];break;case 28:this.$=new N.StringNode(I[H]);break;case 29:this.$=new N.IntegerNode(I[H]);break;case 30:this.$=new N.BooleanNode(I[H]);break;case 31:this.$=new N.HashNode(I[H]);break;case 32:I[H-1].push(I[H]);this.$=I[H-1];break;case 33:this.$=[I[H]];break;case 34:this.$=[I[H-2],I[H]];break;case 35:this.$=[I[H-2],new N.StringNode(I[H])];break;case 36:this.$=[I[H-2],new N.IntegerNode(I[H])];break;case 37:this.$=[I[H-2],new N.BooleanNode(I[H])];break;case 38:this.$=new N.IdNode(I[H]);break;case 39:I[H-2].push(I[H]);this.$=I[H-2];break;case 40:this.$=[I[H]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function D(H,G){throw new Error(H)},parse:function E(O){var V=this,L=[0],f=[null],Q=[],g=this.table,H="",P=0,d=0,J=0,N=2,S=1;this.lexer.setInput(O);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var I=this.lexer.yylloc;Q.push(I);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function U(a){L.length=L.length-2*a;f.length=f.length-a;Q.length=Q.length-a}function T(){var a;a=V.lexer.lex()||1;if(typeof a!=="number"){a=V.symbols_[a]||a}return a}var c,X,K,b,h,R,Z={},W,e,G,M;while(true){K=L[L.length-1];if(this.defaultActions[K]){b=this.defaultActions[K]}else{if(c==null){c=T()}b=g[K]&&g[K][c]}if(typeof b==="undefined"||!b.length||!b[0]){if(!J){M=[];for(W in g[K]){if(this.terminals_[W]&&W>2){M.push("'"+this.terminals_[W]+"'")}}var Y="";if(this.lexer.showPosition){Y="Parse error on line "+(P+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+M.join(", ")}else{Y="Parse error on line "+(P+1)+": Unexpected "+(c==1?"end of input":("'"+(this.terminals_[c]||c)+"'"))}this.parseError(Y,{text:this.lexer.match,token:this.terminals_[c]||c,line:this.lexer.yylineno,loc:I,expected:M})}if(J==3){if(c==S){throw new Error(Y||"Parsing halted.")}d=this.lexer.yyleng;H=this.lexer.yytext;P=this.lexer.yylineno;I=this.lexer.yylloc;c=T()}while(1){if((N.toString()) in g[K]){break}if(K==0){throw new Error(Y||"Parsing halted.")}U(1);K=L[L.length-1]}X=c;c=N;K=L[L.length-1];b=g[K]&&g[K][N];J=3}if(b[0] instanceof Array&&b.length>1){throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+c)}switch(b[0]){case 1:L.push(c);f.push(this.lexer.yytext);Q.push(this.lexer.yylloc);L.push(b[1]);c=null;if(!X){d=this.lexer.yyleng;H=this.lexer.yytext;P=this.lexer.yylineno;I=this.lexer.yylloc;if(J>0){J--}}else{c=X;X=null}break;case 2:e=this.productions_[b[1]][1];Z.$=f[f.length-e];Z._$={first_line:Q[Q.length-(e||1)].first_line,last_line:Q[Q.length-1].last_line,first_column:Q[Q.length-(e||1)].first_column,last_column:Q[Q.length-1].last_column};R=this.performAction.call(Z,H,d,P,this.yy,b[1],f,Q);if(typeof R!=="undefined"){return R}if(e){L=L.slice(0,-1*e*2);f=f.slice(0,-1*e);Q=Q.slice(0,-1*e)}L.push(this.productions_[b[1]][0]);f.push(Z.$);Q.push(Z._$);G=g[L[L.length-2]][L[L.length-1]];L.push(G);break;case 3:return true}}return true}};var A=(function(){var J=({EOF:1,parseError:function L(O,N){if(this.yy.parseError){this.yy.parseError(O,N)}else{throw new Error(O)}},setInput:function(N){this._input=N;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var O=this._input[0];this.yytext+=O;this.yyleng++;this.match+=O;this.matched+=O;var N=O.match(/\n/);if(N){this.yylineno++}this._input=this._input.slice(1);return O},unput:function(N){this._input=N+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;if(N.length<20){N+=this._input.substr(0,20-N.length)}return(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput();var O=new Array(N.length+1).join("-");return N+this.upcomingInput()+"\n"+O+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var R,P,O,N;if(!this._more){this.yytext="";this.match=""}var S=this._currentRules();for(var Q=0;Q<S.length;Q++){P=this._input.match(this.rules[S[Q]]);if(P){N=P[0].match(/\n.*/g);if(N){this.yylineno+=N.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:N?N[N.length-1].length-1:this.yylloc.last_column+P[0].length};this.yytext+=P[0];this.match+=P[0];this.matches=P;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(P[0].length);this.matched+=P[0];R=this.performAction.call(this,this.yy,this,S[Q],this.conditionStack[this.conditionStack.length-1]);if(R){return R}else{return }}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function G(){var N=this.next();if(typeof N!=="undefined"){return N}else{return this.lex()}},begin:function H(N){this.conditionStack.push(N)},popState:function M(){return this.conditionStack.pop()},_currentRules:function K(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});J.performAction=function I(R,O,Q,N){var P=N;switch(Q){case 0:this.begin("mu");if(O.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:O.yytext=O.yytext.substr(3,O.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 34;break;case 12:return 33;break;case 13:return 33;break;case 14:return 36;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:O.yytext=O.yytext.substr(1,O.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 30;break;case 20:return 30;break;case 21:return 29;break;case 22:return 33;break;case 23:return"INVALID";break;case 24:return 5;break}};J.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^./,/^$/];J.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],inclusive:false},INITIAL:{rules:[0,1,24],inclusive:true}};return J})();F.lexer=A;return F})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=handlebars;exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)};exports.main=function commonjsMain(A){if(!A[1]){throw new Error("Usage: "+A[0]+" FILE")}if(typeof process!=="undefined"){var C=require("fs").readFileSync(require("path").join(process.cwd(),A[1]),"utf8")}else{var B=require("file").path(require("file").cwd());var C=B.join(A[1]).read({charset:"utf-8"})}return exports.parser.parse(C)};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args)}}var Handlebars={};Handlebars.VERSION="1.0.beta.2";Handlebars.Parser=handlebars;Handlebars.parse=function(A){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(A)};Handlebars.print=function(A){return new Handlebars.PrintVisitor().accept(A)};Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(B,C,A){if(A){C.not=A}this.helpers[B]=C};Handlebars.registerPartial=function(A,B){this.partials[A]=B};Handlebars.registerHelper("helperMissing",function(A){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+A+"'")}});Handlebars.registerHelper("blockHelperMissing",function(E,G,A){A=A||function(){};var C="";var F=Object.prototype.toString.call(E);if(F==="[object Function]"){E=E()}if(E===true){return G(this)}else{if(E===false||E==null){return A(this)}else{if(F==="[object Array]"){if(E.length>0){for(var D=0,B=E.length;D<B;D++){C=C+G(E[D])}}else{C=A(this)}return C}else{return G(E)}}}},function(A,B){return B(A)});Handlebars.registerHelper("each",function(E,F,A){var C="";if(E&&E.length>0){for(var D=0,B=E.length;D<B;D++){C=C+F(E[D])}}else{C=A(this)}return C});Handlebars.registerHelper("if",function(B,C,A){if(!B||B==[]){return A(this)}else{return C(this)}});Handlebars.registerHelper("unless",function(B,C,A){return Handlebars.helpers["if"].call(this,B,A,C)});Handlebars.registerHelper("with",function(A,B){return B(A)});Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(B,A){}};Handlebars.log=function(B,A){Handlebars.logger.log(B,A)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(C,B){this.type="program";this.statements=C;if(B){this.inverse=new Handlebars.AST.ProgramNode(B)}};Handlebars.AST.MustacheNode=function(D,C,B){this.type="mustache";this.id=D[0];this.params=D.slice(1);this.hash=C;this.escaped=!B};Handlebars.AST.PartialNode=function(C,B){this.type="partial";this.id=C;this.context=B};var A=function(B,C){if(B.original!==C.original){throw new Handlebars.Exception(B.original+" doesn't match "+C.original)}};Handlebars.AST.BlockNode=function(C,B,D){A(C.id,D);this.type="block";this.mustache=C;this.program=B};Handlebars.AST.InverseNode=function(C,B,D){A(C.id,D);this.type="inverse";this.mustache=C;this.program=B};Handlebars.AST.ContentNode=function(B){this.type="content";this.string=B};Handlebars.AST.HashNode=function(B){this.type="hash";this.pairs=B};Handlebars.AST.IdNode=function(F){this.type="ID";this.original=F.join(".");var D=[],G=0;for(var E=0,B=F.length;E<B;E++){var C=F[E];if(C===".."){G++}else{if(C==="."||C==="this"){continue}else{D.push(C)}}}this.parts=D;this.string=D.join(".");this.depth=G;this.isSimple=(D.length===1)&&(G===0)};Handlebars.AST.StringNode=function(B){this.type="STRING";this.string=B};Handlebars.AST.IntegerNode=function(B){this.type="INTEGER";this.integer=B};Handlebars.AST.BooleanNode=function(B){this.type="BOOLEAN";this.bool=B};Handlebars.AST.CommentNode=function(B){this.type="comment";this.comment=B}})();Handlebars.Visitor=function(){};Handlebars.Visitor.prototype={accept:function(A){return this[A.type](A)}};Handlebars.Exception=function(A){this.message=A};Handlebars.SafeString=function(A){this.string=A};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var C={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var D=/&(?!\w+;)|[<>"'`]/g;var B=/[&<>"'`]/;var A=function(E){return C[E]||"&amp;"};Handlebars.Utils={escapeExpression:function(E){if(E instanceof Handlebars.SafeString){return E.toString()}else{if(E==null||E===false){return""}}if(!B.test(E)){return E}return E.replace(D,A)},isEmpty:function(E){if(typeof E==="undefined"){return true}else{if(E===null){return true}else{if(E===false){return true}else{if(Object.prototype.toString.call(E)==="[object Array]"&&E.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(E,D){E.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16};E.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1};E.DISASSEMBLE_MAP={};for(var G in E.OPCODE_MAP){var F=E.OPCODE_MAP[G];E.DISASSEMBLE_MAP[F]=G}E.multiParamSize=function(H){return E.MULTI_PARAM_OPCODES[E.DISASSEMBLE_MAP[H]]};E.prototype={compiler:E,disassemble:function(){var P=this.opcodes,N,J;var M=[],R,I,S;for(var O=0,K=P.length;O<K;O++){N=P[O];if(N==="DECLARE"){I=P[++O];S=P[++O];M.push("DECLARE "+I+" = "+S)}else{R=E.DISASSEMBLE_MAP[N];var Q=E.multiParamSize(N);var H=[];for(var L=0;L<Q;L++){J=P[++O];if(typeof J==="string"){J='"'+J.replace("\n","\\n")+'"'}H.push(J)}R=R+" "+H.join(" ");M.push(R)}}return M.join("\n")},guid:0,compile:function(H,I){this.children=[];this.depths={list:[]};this.options=I||{};return this.program(H)},accept:function(H){return this[H.type](H)},program:function(J){var I=J.statements,L;this.opcodes=[];for(var K=0,H=I.length;K<H;K++){L=I[K];this[L.type](L)}this.depths.list=this.depths.list.sort(function(N,M){return N-M});return this},compileProgram:function(J){var H=new this.compiler().compile(J,this.options);var K=this.guid++;this.usePartial=this.usePartial||H.usePartial;this.children[K]=H;for(var L=0,I=H.depths.list.length;L<I;L++){depth=H.depths.list[L];if(depth<2){continue}else{this.addDepth(depth-1)}}return K},block:function(N){var K=N.mustache;var M,O,I,J;var L=this.setupStackForMustache(K);var H=this.compileProgram(N.program);if(N.program.inverse){J=this.compileProgram(N.program.inverse);this.declare("inverse",J)}this.opcode("invokeProgram",H,L.length);this.declare("inverse",null);this.opcode("append")},inverse:function(I){this.ID(I.mustache.id);var H=this.compileProgram(I.program);this.opcode("invokeInverse",H);this.opcode("append")},hash:function(K){var J=K.pairs,M,L;this.opcode("push","{}");for(var I=0,H=J.length;I<H;I++){M=J[I];L=M[1];this.accept(L);this.opcode("assignToHash",M[0])}},partial:function(H){var I=H.id;this.usePartial=true;if(H.context){this.ID(H.context)}else{this.opcode("push","context")}this.opcode("invokePartial",I.original);this.opcode("append")},content:function(H){this.opcode("appendContent",H.string)},mustache:function(H){var I=this.setupStackForMustache(H);this.opcode("invokeMustache",I.length,H.id.original);if(H.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(J){this.addDepth(J.depth);this.opcode("getContext",J.depth);this.opcode("lookupWithHelpers",J.parts[0]||null);for(var I=1,H=J.parts.length;I<H;I++){this.opcode("lookup",J.parts[I])}},STRING:function(H){this.opcode("pushString",H.string)},INTEGER:function(H){this.opcode("push",H.integer)},BOOLEAN:function(H){this.opcode("push",H.bool)},comment:function(){},pushParams:function(J){var H=J.length,I;while(H--){I=J[H];if(this.options.stringParams){if(I.depth){this.addDepth(I.depth)}this.opcode("getContext",I.depth||0);this.opcode("pushStringParam",I.string)}else{this[I.type](I)}}},opcode:function(H,J,I){this.opcodes.push(E.OPCODE_MAP[H]);if(J!==undefined){this.opcodes.push(J)}if(I!==undefined){this.opcodes.push(I)}},declare:function(H,I){this.opcodes.push("DECLARE");this.opcodes.push(H);this.opcodes.push(I)},addDepth:function(H){if(H===0){return }if(!this.depths[H]){this.depths[H]=true;this.depths.list.push(H)}},setupStackForMustache:function(H){var I=H.params;this.pushParams(I);if(H.hash){this.hash(H.hash)}else{this.opcode("push","{}")}this.ID(H.id);return I}};D.prototype={nameLookup:function(J,H,I){if(D.RESERVED_WORDS[H]||H.indexOf("-")!==-1||!isNaN(H)){return J+"['"+H+"']"}else{if(/^[0-9]+$/.test(H)){return J+"["+H+"]"}else{return J+"."+H}}},appendToBuffer:function(H){return"buffer = buffer + "+H+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(I,K){this.environment=I;this.options=K||{};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileChildren(I,K);Handlebars.log(Handlebars.logger.DEBUG,I.disassemble()+"\n\n");var M=I.opcodes,L,J,N,H;this.i=0;for(B=M.length;this.i<B;this.i++){L=this.nextOpcode(0);if(L[0]==="DECLARE"){this.i=this.i+2;this[L[1]]=L[2]}else{this.i=this.i+L[1].length;this[L[0]].apply(this,L[1])}}return this.createFunction()},nextOpcode:function(O){var L=this.environment.opcodes,K=L[this.i+O],J,M;var N,H;if(K==="DECLARE"){J=L[this.i+1];M=L[this.i+2];return["DECLARE",J,M]}else{J=E.DISASSEMBLE_MAP[K];N=E.multiParamSize(K);H=[];for(var I=0;I<N;I++){H.push(L[this.i+I+1+O])}return[J,H]}},eat:function(H){this.i=this.i+H.length},preamble:function(){var H=[];H.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var I="helpers = helpers || Handlebars.helpers;";if(this.environment.usePartial){I=I+" partials = partials || Handlebars.partials;"}H.push(I);this.lastContext=0;this.source=H},createFunction:function(){var I={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(P,Q,O,R){var N=this.programs[P];if(R){return Handlebars.VM.program(this.children[P],Q,O,R)}else{if(N){return N}else{N=this.programs[P]=Handlebars.VM.program(this.children[P],Q,O);return N}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};var L=this.stackVars.concat(this.registers.list);if(L.length>0){this.source[0]=this.source[0]+", "+L.join(", ")}this.source[0]=this.source[0]+";";this.source.push("return buffer;");var M=["Handlebars","context","helpers","partials"];if(this.options.data){M.push("data")}for(var J=0,H=this.environment.depths.list.length;J<H;J++){M.push("depth"+this.environment.depths.list[J])}if(M.length===4&&!this.environment.usePartial){M.pop()}M.push(this.source.join("\n"));var K=Function.apply(this,M);K.displayName="Handlebars.js";Handlebars.log(Handlebars.logger.DEBUG,K.toString()+"\n\n");I.render=K;I.children=this.environment.children;return function(P,O,Q){try{O=O||{};var N=[Handlebars,P,O.helpers,O.partials,O.data];var S=Array.prototype.slice.call(arguments,2);N=N.concat(S);return I.render.apply(I,N)}catch(R){throw R}}},appendContent:function(H){this.source.push(this.appendToBuffer(this.quotedString(H)))},append:function(){var H=this.popStack();this.source.push("if("+H+" || "+H+" === 0) { "+this.appendToBuffer(H)+" }")},appendEscaped:function(){var I=this.nextOpcode(1),H="";if(I[0]==="appendContent"){H=" + "+this.quotedString(I[1][0]);this.eat(I)}this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+H))},getContext:function(H){if(this.lastContext!==H){this.lastContext=H;if(H===0){this.source.push("currentContext = context;")}else{this.source.push("currentContext = depth"+H+";")}}},lookupWithHelpers:function(J){if(J){var H=this.nextStack();var I="if('"+J+"' in helpers) { "+H+" = "+this.nameLookup("helpers",J,"helper")+"; } else { "+H+" = "+this.nameLookup("currentContext",J,"context")+"; }";this.source.push(I)}else{this.pushStack("currentContext")}},lookup:function(I){var H=this.topStack();this.source.push(H+" = "+this.nameLookup(H,I,"context")+";")},pushStringParam:function(H){this.pushStack("currentContext");this.pushString(H)},pushString:function(H){this.pushStack(this.quotedString(H))},push:function(H){this.pushStack(H)},invokeMustache:function(I,H){this.populateParams(I,this.quotedString(H),"{}",null,function(J,L,K){this.source.push("else if("+K+"=== undefined) { "+J+" = helpers.helperMissing.call("+L+"); }");this.source.push("else { "+J+" = "+K+"; }")})},invokeProgram:function(I,J){var H=this.programExpression(this.inverse);var K=this.programExpression(I);this.populateParams(J,null,K,H,function(L,N,M){this.source.push("else { "+L+" = helpers.blockHelperMissing.call("+N+"); }")})},populateParams:function(M,I,Q,N,S){var H=this.popStack(),R;var K=[],J,L;var P=this.popStack();this.register("tmp1",Q);this.source.push("tmp1.hash = "+P+";");if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var O=0;O<M;O++){J=this.popStack();K.push(J);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(N){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+N+";")}if(this.options.data){this.source.push("tmp1.data = data;")}K.push("tmp1");if(N){K.push(N)}this.populateCall(K,H,I||H,S)},populateCall:function(J,M,L,H){var I=["context"].concat(J).join(", ");var K=["context"].concat(L).concat(J).join(", ");nextStack=this.nextStack();this.source.push("if(typeof "+M+" === 'function') { "+nextStack+" = "+M+".call("+I+"); }");H.call(this,nextStack,K,M)},invokeInverse:function(J){var H=this.programExpression(J);var I=["context",this.topStack(),"this.noop",H];this.pushStack("helpers.blockHelperMissing.call("+I.join(", ")+")")},invokePartial:function(H){this.pushStack("this.invokePartial("+this.nameLookup("partials",H,"partial")+", '"+H+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(H){var I=this.popStack();var J=this.topStack();this.source.push(J+"['"+H+"'] = "+I+";")},compiler:D,compileChildren:function(H,J){var L=H.children,O,M;var N=[];for(var K=0,I=L.length;K<I;K++){O=L[K];M=new this.compiler();N[K]=M.compile(O,J)}H.rawChildren=L;H.children=N},programExpression:function(I){if(I==null){return"this.noop"}var K=[I,"helpers","partials"];var L=this.environment.rawChildren[I].depths.list;if(this.options.data){K.push("data")}for(var J=0,H=L.length;J<H;J++){depth=L[J];if(depth===1){K.push("context")}else{K.push("depth"+(depth-1))}}if(!this.environment.usePartial){if(K[3]){K[2]="null"}else{K.pop()}}if(L.length===0){return"this.program("+K.join(", ")+")"}else{K[0]="this.children["+I+"]";return"this.programWithDepth("+K.join(", ")+")"}},register:function(H,I){this.useRegister(H);this.source.push(H+" = "+I+";")},useRegister:function(H){if(!this.registers[H]){this.registers[H]=true;this.registers.list.push(H)}},pushStack:function(H){this.source.push(this.nextStack()+" = "+H+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(H){return'"'+H.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var A=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false").split(" ");compilerWords=D.RESERVED_WORDS={};for(var C=0,B=A.length;C<B;C++){compilerWords[A[C]]=true}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.VM={programWithDepth:function(C,E,B,F,D){var A=Array.prototype.slice.call(arguments,4);return function(H,G){G=G||{};G={helpers:G.helpers||E,partials:G.partials||B,data:G.data||F};return C.apply(this,[H,G].concat(A))}},program:function(B,C,A,D){return function(F,E){E=E||{};return B(F,{helpers:E.helpers||C,partials:E.partials||A,data:E.data||D})}},noop:function(){return""},compile:function(D,C){var B=Handlebars.parse(D);var A=new Handlebars.Compiler().compile(B,C);return new Handlebars.JavaScriptCompiler().compile(A,C)},invokePartial:function(A,B,D,E,C){if(A===undefined){throw new Handlebars.Exception("The partial "+B+" could not be found")}else{if(A instanceof Function){return A(D,{helpers:E,partials:C})}else{C[B]=Handlebars.VM.compile(A);return C[B](D,{helpers:E,partials:C})}}}};Handlebars.compile=Handlebars.VM.compile;
/*
 * jQuery UI 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(D,C){function B(F,E){var G=F.nodeName.toLowerCase();if("area"===G){E=F.parentNode;G=E.name;if(!F.href||!G||E.nodeName.toLowerCase()!=="map"){return false}F=D("img[usemap=#"+G+"]")[0];return !!F&&A(F)}return(/input|select|textarea|button|object/.test(G)?!F.disabled:"a"==G?F.href||E:E)&&A(F)}function A(E){return !D(E).parents().andSelf().filter(function(){return D.curCSS(this,"visibility")==="hidden"||D.expr.filters.hidden(this)}).length}D.ui=D.ui||{};if(!D.ui.version){D.extend(D.ui,{version:"1.8.14",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});D.fn.extend({_focus:D.fn.focus,focus:function(F,E){return typeof F==="number"?this.each(function(){var G=this;setTimeout(function(){D(G).focus();E&&E.call(G)},F)}):this._focus.apply(this,arguments)},scrollParent:function(){var E;E=D.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(D.curCSS(this,"position",1))&&/(auto|scroll)/.test(D.curCSS(this,"overflow",1)+D.curCSS(this,"overflow-y",1)+D.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(D.curCSS(this,"overflow",1)+D.curCSS(this,"overflow-y",1)+D.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!E.length?D(document):E},zIndex:function(F){if(F!==C){return this.css("zIndex",F)}if(this.length){F=D(this[0]);for(var E;F.length&&F[0]!==document;){E=F.css("position");if(E==="absolute"||E==="relative"||E==="fixed"){E=parseInt(F.css("zIndex"),10);if(!isNaN(E)&&E!==0){return E}}F=F.parent()}}return 0},disableSelection:function(){return this.bind((D.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(E){E.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});D.each(["Width","Height"],function(F,E){function J(M,L,K,N){D.each(I,function(){L-=parseFloat(D.curCSS(M,"padding"+this,true))||0;if(K){L-=parseFloat(D.curCSS(M,"border"+this+"Width",true))||0}if(N){L-=parseFloat(D.curCSS(M,"margin"+this,true))||0}});return L}var I=E==="Width"?["Left","Right"]:["Top","Bottom"],H=E.toLowerCase(),G={innerWidth:D.fn.innerWidth,innerHeight:D.fn.innerHeight,outerWidth:D.fn.outerWidth,outerHeight:D.fn.outerHeight};D.fn["inner"+E]=function(K){if(K===C){return G["inner"+E].call(this)}return this.each(function(){D(this).css(H,J(this,K)+"px")})};D.fn["outer"+E]=function(L,K){if(typeof L!=="number"){return G["outer"+E].call(this,L)}return this.each(function(){D(this).css(H,J(this,L,true,K)+"px")})}});D.extend(D.expr[":"],{data:function(F,E,G){return !!D.data(F,G[3])},focusable:function(E){return B(E,!isNaN(D.attr(E,"tabindex")))},tabbable:function(F){var E=D.attr(F,"tabindex"),G=isNaN(E);return(G||E>=0)&&B(F,!G)}});D(function(){var F=document.body,E=F.appendChild(E=document.createElement("div"));D.extend(E.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});D.support.minHeight=E.offsetHeight===100;D.support.selectstart="onselectstart" in E;F.removeChild(E).style.display="none"});D.extend(D.ui,{plugin:{add:function(F,E,H){F=D.ui[F].prototype;for(var G in H){F.plugins[G]=F.plugins[G]||[];F.plugins[G].push([E,H[G]])}},call:function(F,E,H){if((E=F.plugins[E])&&F.element[0].parentNode){for(var G=0;G<E.length;G++){F.options[E[G][0]]&&E[G][1].apply(F.element,H)}}}},contains:function(F,E){return document.compareDocumentPosition?F.compareDocumentPosition(E)&16:F!==E&&F.contains(E)},hasScroll:function(F,E){if(D(F).css("overflow")==="hidden"){return false}E=E&&E==="left"?"scrollLeft":"scrollTop";var G=false;if(F[E]>0){return true}F[E]=1;G=F[E]>0;F[E]=0;return G},isOverAxis:function(F,E,G){return F>E&&F<E+G},isOver:function(F,E,J,I,H,G){return D.ui.isOverAxis(F,J,H)&&D.ui.isOverAxis(E,I,G)}})}})(jQuery);
/*
 * jQuery UI Widget 1.8.14
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(A,D){if(A.cleanData){var C=A.cleanData;A.cleanData=function(E){for(var G=0,F;(F=E[G])!=null;G++){A(F).triggerHandler("remove")}C(E)}}else{var B=A.fn.remove;A.fn.remove=function(E,F){return this.each(function(){if(!F){if(!E||A.filter(E,[this]).length){A("*",this).add([this]).each(function(){A(this).triggerHandler("remove")})}}return B.call(A(this),E,F)})}}A.widget=function(E,I,H){var G=E.split(".")[0],F;E=E.split(".")[1];F=G+"-"+E;if(!H){H=I;I=A.Widget}A.expr[":"][F]=function(J){return !!A.data(J,E)};A[G]=A[G]||{};A[G][E]=function(J,K){arguments.length&&this._createWidget(J,K)};I=new I;I.options=A.extend(true,{},I.options);A[G][E].prototype=A.extend(true,I,{namespace:G,widgetName:E,widgetEventPrefix:A[G][E].prototype.widgetEventPrefix||E,widgetBaseClass:F},H);A.widget.bridge(E,A[G][E])};A.widget.bridge=function(E,F){A.fn[E]=function(J){var I=typeof J==="string",H=Array.prototype.slice.call(arguments,1),G=this;J=!I&&H.length?A.extend.apply(null,[true,J].concat(H)):J;if(I&&J.charAt(0)==="_"){return G}I?this.each(function(){var L=A.data(this,E),K=L&&A.isFunction(L[J])?L[J].apply(L,H):L;if(K!==L&&K!==D){G=K;return false}}):this.each(function(){var K=A.data(this,E);K?K.option(J||{})._init():A.data(this,E,new F(J,this))});return G}};A.Widget=function(E,F){arguments.length&&this._createWidget(E,F)};A.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(E,G){A.data(G,this.widgetName,this);this.element=A(G);this.options=A.extend(true,{},this.options,this._getCreateOptions(),E);var F=this;this.element.bind("remove."+this.widgetName,function(){F.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return A.metadata&&A.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(E,G){var F=E;if(arguments.length===0){return A.extend({},this.options)}if(typeof E==="string"){if(G===D){return this.options[E]}F={};F[E]=G}this._setOptions(F);return this},_setOptions:function(E){var F=this;A.each(E,function(H,G){F._setOption(H,G)});return this},_setOption:function(E,F){this.options[E]=F;if(E==="disabled"){this.widget()[F?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",F)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(E,I,H){var G=this.options[E];I=A.Event(I);I.type=(E===this.widgetEventPrefix?E:this.widgetEventPrefix+E).toLowerCase();H=H||{};if(I.originalEvent){E=A.event.props.length;for(var F;E;){F=A.event.props[--E];I[F]=I.originalEvent[F]}}this.element.trigger(I,H);return !(A.isFunction(G)&&G.call(this.element[0],I,H)===false||I.isDefaultPrevented())}}})(jQuery);(function(E){E.ui=E.ui||{};var D=/left|center|right/,C=/top|center|bottom/,B=E.fn.position,A=E.fn.offset;E.fn.position=function(F){if(!F||!F.of){return B.apply(this,arguments)}F=E.extend({},F);var G=E(F.of),M=G[0],K=(F.collision||"flip").split(" "),L=F.offset?F.offset.split(" "):[0,0],J,H,I;if(M.nodeType===9){J=G.width();H=G.height();I={top:0,left:0}}else{if(M.setTimeout){J=G.width();H=G.height();I={top:G.scrollTop(),left:G.scrollLeft()}}else{if(M.preventDefault){F.at="left top";J=H=0;I={top:F.of.pageY,left:F.of.pageX}}else{J=G.outerWidth();H=G.outerHeight();I=G.offset()}}}E.each(["my","at"],function(){var N=(F[this]||"").split(" ");if(N.length===1){N=D.test(N[0])?N.concat(["center"]):C.test(N[0])?["center"].concat(N):["center","center"]}N[0]=D.test(N[0])?N[0]:"center";N[1]=C.test(N[1])?N[1]:"center";F[this]=N});if(K.length===1){K[1]=K[0]}L[0]=parseInt(L[0],10)||0;if(L.length===1){L[1]=L[0]}L[1]=parseInt(L[1],10)||0;if(F.at[0]==="right"){I.left+=J}else{if(F.at[0]==="center"){I.left+=J/2}}if(F.at[1]==="bottom"){I.top+=H}else{if(F.at[1]==="center"){I.top+=H/2}}I.left+=L[0];I.top+=L[1];return this.each(function(){var T=E(this),R=T.outerWidth(),Q=T.outerHeight(),P=parseInt(E.curCSS(this,"marginLeft",true))||0,O=parseInt(E.curCSS(this,"marginTop",true))||0,V=R+P+(parseInt(E.curCSS(this,"marginRight",true))||0),U=Q+O+(parseInt(E.curCSS(this,"marginBottom",true))||0),S=E.extend({},I),N;if(F.my[0]==="right"){S.left-=R}else{if(F.my[0]==="center"){S.left-=R/2}}if(F.my[1]==="bottom"){S.top-=Q}else{if(F.my[1]==="center"){S.top-=Q/2}}S.left=Math.round(S.left);S.top=Math.round(S.top);N={left:S.left-P,top:S.top-O};E.each(["left","top"],function(X,W){E.ui.position[K[X]]&&E.ui.position[K[X]][W](S,{targetWidth:J,targetHeight:H,elemWidth:R,elemHeight:Q,collisionPosition:N,collisionWidth:V,collisionHeight:U,offset:L,my:F.my,at:F.at})});E.fn.bgiframe&&T.bgiframe();T.offset(E.extend(S,{using:F.using}))})};E.ui.position={fit:{left:function(F,G){var H=E(window);H=G.collisionPosition.left+G.collisionWidth-H.width()-H.scrollLeft();F.left=H>0?F.left-H:Math.max(F.left-G.collisionPosition.left,F.left)},top:function(F,G){var H=E(window);H=G.collisionPosition.top+G.collisionHeight-H.height()-H.scrollTop();F.top=H>0?F.top-H:Math.max(F.top-G.collisionPosition.top,F.top)}},flip:{left:function(F,G){if(G.at[0]!=="center"){var K=E(window);K=G.collisionPosition.left+G.collisionWidth-K.width()-K.scrollLeft();var I=G.my[0]==="left"?-G.elemWidth:G.my[0]==="right"?G.elemWidth:0,J=G.at[0]==="left"?G.targetWidth:-G.targetWidth,H=-2*G.offset[0];F.left+=G.collisionPosition.left<0?I+J+H:K>0?I+J+H:0}},top:function(F,G){if(G.at[1]!=="center"){var K=E(window);K=G.collisionPosition.top+G.collisionHeight-K.height()-K.scrollTop();var I=G.my[1]==="top"?-G.elemHeight:G.my[1]==="bottom"?G.elemHeight:0,J=G.at[1]==="top"?G.targetHeight:-G.targetHeight,H=-2*G.offset[1];F.top+=G.collisionPosition.top<0?I+J+H:K>0?I+J+H:0}}}};if(!E.offset.setOffset){E.offset.setOffset=function(F,G){if(/static/.test(E.curCSS(F,"position"))){F.style.position="relative"}var K=E(F),I=K.offset(),J=parseInt(E.curCSS(F,"top",true),10)||0,H=parseInt(E.curCSS(F,"left",true),10)||0;I={top:G.top-I.top+J,left:G.left-I.left+H};"using" in G?G.using.call(F,I):K.css(I)};E.fn.offset=function(F){var G=this[0];if(!G||!G.ownerDocument){return null}if(F){return this.each(function(){E.offset.setOffset(this,F)})}return A.call(this)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){if(B.cleanData){var D=B.cleanData;B.cleanData=function(E){for(var H=0,G;(G=E[H])!=null;H++){try{B(G).triggerHandler("remove")}catch(F){}}D(E)}}else{var C=B.fn.remove;B.fn.remove=function(E,F){return this.each(function(){return F||(!E||B.filter(E,[this]).length)&&B("*",this).add([this]).each(function(){try{B(this).triggerHandler("remove")}catch(G){}}),C.call(B(this),E,F)})}}B.widget=function(E,J,I){var H=E.split(".")[0],G;E=E.split(".")[1],G=H+"-"+E,I||(I=J,J=B.Widget),B.expr[":"][G]=function(K){return !!B.data(K,E)},B[H]=B[H]||{},B[H][E]=function(L,K){arguments.length&&this._createWidget(L,K)};var F=new J;F.options=B.extend(!0,{},F.options),B[H][E].prototype=B.extend(!0,F,{namespace:H,widgetName:E,widgetEventPrefix:B[H][E].prototype.widgetEventPrefix||E,widgetBaseClass:G},I),B.widget.bridge(E,B[H][E])},B.widget.bridge=function(F,E){B.fn[F]=function(J){var I=typeof J=="string",H=Array.prototype.slice.call(arguments,1),G=this;return J=!I&&H.length?B.extend.apply(null,[!0,J].concat(H)):J,I&&J.charAt(0)==="_"?G:(I?this.each(function(){var L=B.data(this,F),K=L&&B.isFunction(L[J])?L[J].apply(L,H):L;if(K!==L&&K!==A){return G=K,!1}}):this.each(function(){var K=B.data(this,F);K?K.option(J||{})._init():B.data(this,F,new E(J,this))}),G)}},B.Widget=function(F,E){arguments.length&&this._createWidget(F,E)},B.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(E,G){B.data(G,this.widgetName,this),this.element=B(G),this.options=B.extend(!0,{},this.options,this._getCreateOptions(),E);var F=this;this.element.bind("remove."+this.widgetName,function(){F.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return B.metadata&&B.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(G,F){var E=G;if(arguments.length===0){return B.extend({},this.options)}if(typeof G=="string"){if(F===A){return this.options[G]}E={},E[G]=F}return this._setOptions(E),this},_setOptions:function(E){var F=this;return B.each(E,function(H,G){F._setOption(H,G)}),this},_setOption:function(F,E){return this.options[F]=E,F==="disabled"&&this.widget()[E?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",E),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(E,J,I){var H,G,F=this.options[E];I=I||{},J=B.Event(J),J.type=(E===this.widgetEventPrefix?E:this.widgetEventPrefix+E).toLowerCase(),J.target=this.element[0],G=J.originalEvent;if(G){for(H in G){H in J||(J[H]=G[H])}}return this.element.trigger(J,I),!(B.isFunction(F)&&F.call(this.element[0],J,I)===!1||J.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){var C=!1;B(document).mouseup(function(D){C=!1}),B.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var D=this;this.element.bind("mousedown."+this.widgetName,function(E){return D._mouseDown(E)}).bind("click."+this.widgetName,function(E){if(!0===B.data(E.target,D.widgetName+".preventClickEvent")){return B.removeData(E.target,D.widgetName+".preventClickEvent"),E.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(D){if(C){return }this._mouseStarted&&this._mouseUp(D),this._mouseDownEvent=D;var G=this,F=D.which==1,E=typeof this.options.cancel=="string"&&D.target.nodeName?B(D.target).closest(this.options.cancel).length:!1;if(!F||E||!this._mouseCapture(D)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){G.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(D)&&this._mouseDelayMet(D)){this._mouseStarted=this._mouseStart(D)!==!1;if(!this._mouseStarted){return D.preventDefault(),!0}}return !0===B.data(D.target,this.widgetName+".preventClickEvent")&&B.removeData(D.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(H){return G._mouseMove(H)},this._mouseUpDelegate=function(H){return G._mouseUp(H)},B(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),D.preventDefault(),C=!0,!0},_mouseMove:function(D){return !B.browser.msie||document.documentMode>=9||!!D.button?this._mouseStarted?(this._mouseDrag(D),D.preventDefault()):(this._mouseDistanceMet(D)&&this._mouseDelayMet(D)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,D)!==!1,this._mouseStarted?this._mouseDrag(D):this._mouseUp(D)),!this._mouseStarted):this._mouseUp(D)},_mouseUp:function(D){return B(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,D.target==this._mouseDownEvent.target&&B.data(D.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(D)),!1},_mouseDistanceMet:function(D){return Math.max(Math.abs(this._mouseDownEvent.pageX-D.pageX),Math.abs(this._mouseDownEvent.pageY-D.pageY))>=this.options.distance},_mouseDelayMet:function(D){return this.mouseDelayMet},_mouseStart:function(D){},_mouseDrag:function(D){},_mouseStop:function(D){},_mouseCapture:function(D){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){B.widget("ui.draggable",B.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return }return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(C){var D=this.options;return this.helper||D.disabled||B(C.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(C),this.handle?(D.iframeFix&&B(D.iframeFix===!0?"iframe":D.iframeFix).each(function(){B('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(B(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(C){var D=this.options;return this.helper=this._createHelper(C),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),B.ui.ddmanager&&(B.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},B.extend(this.offset,{click:{left:C.pageX-this.offset.left,top:C.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(C),this.originalPageX=C.pageX,this.originalPageY=C.pageY,D.cursorAt&&this._adjustOffsetFromHelper(D.cursorAt),D.containment&&this._setContainment(),this._trigger("start",C)===!1?(this._clear(),!1):(this._cacheHelperProportions(),B.ui.ddmanager&&!D.dropBehaviour&&B.ui.ddmanager.prepareOffsets(this,C),this._mouseDrag(C,!0),B.ui.ddmanager&&B.ui.ddmanager.dragStart(this,C),!0)},_mouseDrag:function(C,E){this.position=this._generatePosition(C),this.positionAbs=this._convertPositionTo("absolute");if(!E){var D=this._uiHash();if(this._trigger("drag",C,D)===!1){return this._mouseUp({}),!1}this.position=D.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return B.ui.ddmanager&&B.ui.ddmanager.drag(this,C),!1},_mouseStop:function(C){var G=!1;B.ui.ddmanager&&!this.options.dropBehaviour&&(G=B.ui.ddmanager.drop(this,C)),this.dropped&&(G=this.dropped,this.dropped=!1);var F=this.element[0],E=!1;while(F&&(F=F.parentNode)){F==document&&(E=!0)}if(!E&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!G||this.options.revert=="valid"&&G||this.options.revert===!0||B.isFunction(this.options.revert)&&this.options.revert.call(this.element,G)){var D=this;B(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){D._trigger("stop",C)!==!1&&D._clear()})}else{this._trigger("stop",C)!==!1&&this._clear()}return !1},_mouseUp:function(C){return this.options.iframeFix===!0&&B("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),B.ui.ddmanager&&B.ui.ddmanager.dragStop(this,C),B.ui.mouse.prototype._mouseUp.call(this,C)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(C){var D=!this.options.handle||!B(this.options.handle,this.element).length?!0:!1;return B(this.options.handle,this.element).find("*").andSelf().each(function(){this==C.target&&(D=!0)}),D},_createHelper:function(C){var E=this.options,D=B.isFunction(E.helper)?B(E.helper.apply(this.element[0],[C])):E.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return D.parents("body").length||D.appendTo(E.appendTo=="parent"?this.element[0].parentNode:E.appendTo),D[0]!=this.element[0]&&!/(fixed|absolute)/.test(D.css("position"))&&D.css("position","absolute"),D},_adjustOffsetFromHelper:function(C){typeof C=="string"&&(C=C.split(" ")),B.isArray(C)&&(C={left:+C[0],top:+C[1]||0}),"left" in C&&(this.offset.click.left=C.left+this.margins.left),"right" in C&&(this.offset.click.left=this.helperProportions.width-C.right+this.margins.left),"top" in C&&(this.offset.click.top=C.top+this.margins.top),"bottom" in C&&(this.offset.click.top=this.helperProportions.height-C.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var C=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&B.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(C.left+=this.scrollParent.scrollLeft(),C.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&B.browser.msie){C={top:0,left:0}}return{top:C.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:C.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var C=this.element.position();return{top:C.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:C.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var C=this.options;C.containment=="parent"&&(C.containment=this.helper[0].parentNode);if(C.containment=="document"||C.containment=="window"){this.containment=[C.containment=="document"?0:B(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,C.containment=="document"?0:B(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(C.containment=="document"?0:B(window).scrollLeft())+B(C.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(C.containment=="document"?0:B(window).scrollTop())+(B(C.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(C.containment)&&C.containment.constructor!=Array){var G=B(C.containment),F=G[0];if(!F){return }var E=G.offset(),D=B(F).css("overflow")!="hidden";this.containment=[(parseInt(B(F).css("borderLeftWidth"),10)||0)+(parseInt(B(F).css("paddingLeft"),10)||0),(parseInt(B(F).css("borderTopWidth"),10)||0)+(parseInt(B(F).css("paddingTop"),10)||0),(D?Math.max(F.scrollWidth,F.offsetWidth):F.offsetWidth)-(parseInt(B(F).css("borderLeftWidth"),10)||0)-(parseInt(B(F).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(D?Math.max(F.scrollHeight,F.offsetHeight):F.offsetHeight)-(parseInt(B(F).css("borderTopWidth"),10)||0)-(parseInt(B(F).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=G}else{C.containment.constructor==Array&&(this.containment=C.containment)}},_convertPositionTo:function(C,H){H||(H=this.position);var G=C=="absolute"?1:-1,F=this.options,E=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!B.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,D=/(html|body)/i.test(E[0].tagName);return{top:H.top+this.offset.relative.top*G+this.offset.parent.top*G-(B.browser.safari&&B.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():D?0:E.scrollTop())*G),left:H.left+this.offset.relative.left*G+this.offset.parent.left*G-(B.browser.safari&&B.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():D?0:E.scrollLeft())*G)}},_generatePosition:function(L){var K=this.options,J=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!B.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,I=/(html|body)/i.test(J[0].tagName),H=L.pageX,G=L.pageY;if(this.originalPosition){var F;if(this.containment){if(this.relative_container){var E=this.relative_container.offset();F=[this.containment[0]+E.left,this.containment[1]+E.top,this.containment[2]+E.left,this.containment[3]+E.top]}else{F=this.containment}L.pageX-this.offset.click.left<F[0]&&(H=F[0]+this.offset.click.left),L.pageY-this.offset.click.top<F[1]&&(G=F[1]+this.offset.click.top),L.pageX-this.offset.click.left>F[2]&&(H=F[2]+this.offset.click.left),L.pageY-this.offset.click.top>F[3]&&(G=F[3]+this.offset.click.top)}if(K.grid){var D=K.grid[1]?this.originalPageY+Math.round((G-this.originalPageY)/K.grid[1])*K.grid[1]:this.originalPageY;G=F?D-this.offset.click.top<F[1]||D-this.offset.click.top>F[3]?D-this.offset.click.top<F[1]?D+K.grid[1]:D-K.grid[1]:D:D;var C=K.grid[0]?this.originalPageX+Math.round((H-this.originalPageX)/K.grid[0])*K.grid[0]:this.originalPageX;H=F?C-this.offset.click.left<F[0]||C-this.offset.click.left>F[2]?C-this.offset.click.left<F[0]?C+K.grid[0]:C-K.grid[0]:C:C}}return{top:G-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(B.browser.safari&&B.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():I?0:J.scrollTop()),left:H-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(B.browser.safari&&B.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():I?0:J.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(C,E,D){return D=D||this._uiHash(),B.ui.plugin.call(this,C,[E,D]),C=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),B.Widget.prototype._trigger.call(this,C,E,D)},plugins:{},_uiHash:function(C){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),B.extend(B.ui.draggable,{version:"1.8.21"}),B.ui.plugin.add("draggable","connectToSortable",{start:function(C,G){var F=B(this).data("draggable"),E=F.options,D=B.extend({},G,{item:F.element});F.sortables=[],B(E.connectToSortable).each(function(){var H=B.data(this,"sortable");H&&!H.options.disabled&&(F.sortables.push({instance:H,shouldRevert:H.options.revert}),H.refreshPositions(),H._trigger("activate",C,D))})},stop:function(C,F){var E=B(this).data("draggable"),D=B.extend({},F,{item:E.element});B.each(E.sortables,function(){this.instance.isOver?(this.instance.isOver=0,E.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(C),this.instance.options.helper=this.instance.options._helper,E.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",C,D))})},drag:function(C,G){var F=B(this).data("draggable"),E=this,D=function(P){var O=this.offset.click.top,N=this.offset.click.left,M=this.positionAbs.top,L=this.positionAbs.left,K=P.height,J=P.width,I=P.top,H=P.left;return B.ui.isOver(M+O,L+N,I,H,K,J)};B.each(F.sortables,function(H){this.instance.positionAbs=F.positionAbs,this.instance.helperProportions=F.helperProportions,this.instance.offset.click=F.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=B(E).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return G.helper[0]},C.target=this.instance.currentItem[0],this.instance._mouseCapture(C,!0),this.instance._mouseStart(C,!0,!0),this.instance.offset.click.top=F.offset.click.top,this.instance.offset.click.left=F.offset.click.left,this.instance.offset.parent.left-=F.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=F.offset.parent.top-this.instance.offset.parent.top,F._trigger("toSortable",C),F.dropped=this.instance.element,F.currentItem=F.element,this.instance.fromOutside=F),this.instance.currentItem&&this.instance._mouseDrag(C)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",C,this.instance._uiHash(this.instance)),this.instance._mouseStop(C,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),F._trigger("fromSortable",C),F.dropped=!1)})}}),B.ui.plugin.add("draggable","cursor",{start:function(C,F){var E=B("body"),D=B(this).data("draggable").options;E.css("cursor")&&(D._cursor=E.css("cursor")),E.css("cursor",D.cursor)},stop:function(C,E){var D=B(this).data("draggable").options;D._cursor&&B("body").css("cursor",D._cursor)}}),B.ui.plugin.add("draggable","opacity",{start:function(C,F){var E=B(F.helper),D=B(this).data("draggable").options;E.css("opacity")&&(D._opacity=E.css("opacity")),E.css("opacity",D.opacity)},stop:function(C,E){var D=B(this).data("draggable").options;D._opacity&&B(E.helper).css("opacity",D._opacity)}}),B.ui.plugin.add("draggable","scroll",{start:function(C,E){var D=B(this).data("draggable");D.scrollParent[0]!=document&&D.scrollParent[0].tagName!="HTML"&&(D.overflowOffset=D.scrollParent.offset())},drag:function(C,G){var F=B(this).data("draggable"),E=F.options,D=!1;if(F.scrollParent[0]!=document&&F.scrollParent[0].tagName!="HTML"){if(!E.axis||E.axis!="x"){F.overflowOffset.top+F.scrollParent[0].offsetHeight-C.pageY<E.scrollSensitivity?F.scrollParent[0].scrollTop=D=F.scrollParent[0].scrollTop+E.scrollSpeed:C.pageY-F.overflowOffset.top<E.scrollSensitivity&&(F.scrollParent[0].scrollTop=D=F.scrollParent[0].scrollTop-E.scrollSpeed)}if(!E.axis||E.axis!="y"){F.overflowOffset.left+F.scrollParent[0].offsetWidth-C.pageX<E.scrollSensitivity?F.scrollParent[0].scrollLeft=D=F.scrollParent[0].scrollLeft+E.scrollSpeed:C.pageX-F.overflowOffset.left<E.scrollSensitivity&&(F.scrollParent[0].scrollLeft=D=F.scrollParent[0].scrollLeft-E.scrollSpeed)}}else{if(!E.axis||E.axis!="x"){C.pageY-B(document).scrollTop()<E.scrollSensitivity?D=B(document).scrollTop(B(document).scrollTop()-E.scrollSpeed):B(window).height()-(C.pageY-B(document).scrollTop())<E.scrollSensitivity&&(D=B(document).scrollTop(B(document).scrollTop()+E.scrollSpeed))}if(!E.axis||E.axis!="y"){C.pageX-B(document).scrollLeft()<E.scrollSensitivity?D=B(document).scrollLeft(B(document).scrollLeft()-E.scrollSpeed):B(window).width()-(C.pageX-B(document).scrollLeft())<E.scrollSensitivity&&(D=B(document).scrollLeft(B(document).scrollLeft()+E.scrollSpeed))}}D!==!1&&B.ui.ddmanager&&!E.dropBehaviour&&B.ui.ddmanager.prepareOffsets(F,C)}}),B.ui.plugin.add("draggable","snap",{start:function(C,F){var E=B(this).data("draggable"),D=E.options;E.snapElements=[],B(D.snap.constructor!=String?D.snap.items||":data(draggable)":D.snap).each(function(){var G=B(this),H=G.offset();this!=E.element[0]&&E.snapElements.push({item:this,width:G.outerWidth(),height:G.outerHeight(),top:H.top,left:H.left})})},drag:function(U,T){var S=B(this).data("draggable"),R=S.options,Q=R.snapTolerance,P=T.offset.left,O=P+S.helperProportions.width,N=T.offset.top,M=N+S.helperProportions.height;for(var L=S.snapElements.length-1;L>=0;L--){var K=S.snapElements[L].left,J=K+S.snapElements[L].width,I=S.snapElements[L].top,H=I+S.snapElements[L].height;if(!(K-Q<P&&P<J+Q&&I-Q<N&&N<H+Q||K-Q<P&&P<J+Q&&I-Q<M&&M<H+Q||K-Q<O&&O<J+Q&&I-Q<N&&N<H+Q||K-Q<O&&O<J+Q&&I-Q<M&&M<H+Q)){S.snapElements[L].snapping&&S.options.snap.release&&S.options.snap.release.call(S.element,U,B.extend(S._uiHash(),{snapItem:S.snapElements[L].item})),S.snapElements[L].snapping=!1;continue}if(R.snapMode!="inner"){var G=Math.abs(I-M)<=Q,F=Math.abs(H-N)<=Q,E=Math.abs(K-O)<=Q,D=Math.abs(J-P)<=Q;G&&(T.position.top=S._convertPositionTo("relative",{top:I-S.helperProportions.height,left:0}).top-S.margins.top),F&&(T.position.top=S._convertPositionTo("relative",{top:H,left:0}).top-S.margins.top),E&&(T.position.left=S._convertPositionTo("relative",{top:0,left:K-S.helperProportions.width}).left-S.margins.left),D&&(T.position.left=S._convertPositionTo("relative",{top:0,left:J}).left-S.margins.left)}var C=G||F||E||D;if(R.snapMode!="outer"){var G=Math.abs(I-N)<=Q,F=Math.abs(H-M)<=Q,E=Math.abs(K-P)<=Q,D=Math.abs(J-O)<=Q;G&&(T.position.top=S._convertPositionTo("relative",{top:I,left:0}).top-S.margins.top),F&&(T.position.top=S._convertPositionTo("relative",{top:H-S.helperProportions.height,left:0}).top-S.margins.top),E&&(T.position.left=S._convertPositionTo("relative",{top:0,left:K}).left-S.margins.left),D&&(T.position.left=S._convertPositionTo("relative",{top:0,left:J-S.helperProportions.width}).left-S.margins.left)}!S.snapElements[L].snapping&&(G||F||E||D||C)&&S.options.snap.snap&&S.options.snap.snap.call(S.element,U,B.extend(S._uiHash(),{snapItem:S.snapElements[L].item})),S.snapElements[L].snapping=G||F||E||D||C}}}),B.ui.plugin.add("draggable","stack",{start:function(C,G){var F=B(this).data("draggable").options,E=B.makeArray(B(F.stack)).sort(function(H,I){return(parseInt(B(H).css("zIndex"),10)||0)-(parseInt(B(I).css("zIndex"),10)||0)});if(!E.length){return }var D=parseInt(E[0].style.zIndex)||0;B(E).each(function(H){this.style.zIndex=D+H}),this[0].style.zIndex=D+E.length}}),B.ui.plugin.add("draggable","zIndex",{start:function(C,F){var E=B(F.helper),D=B(this).data("draggable").options;E.css("zIndex")&&(D._zIndex=E.css("zIndex")),E.css("zIndex",D.zIndex)},stop:function(C,E){var D=B(this).data("draggable").options;D._zIndex&&B(E.helper).css("zIndex",D._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){B.widget("ui.resizable",B.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var E=this,K=this.options;this.element.addClass("ui-resizable"),B.extend(this,{_aspectRatio:!!K.aspectRatio,aspectRatio:K.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:K.helper||K.ghost||K.animate?K.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(B('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=K.handles||(B(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var J=this.handles.split(",");this.handles={};for(var I=0;I<J.length;I++){var H=B.trim(J[I]),G="ui-resizable-"+H,F=B('<div class="ui-resizable-handle '+G+'"></div>');F.css({zIndex:K.zIndex}),"se"==H&&F.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[H]=".ui-resizable-"+H,this.element.append(F)}}this._renderAxis=function(L){L=L||this.element;for(var P in this.handles){this.handles[P].constructor==String&&(this.handles[P]=B(this.handles[P],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var O=B(this.handles[P],this.element),N=0;N=/sw|ne|nw|se|n|s/.test(P)?O.outerHeight():O.outerWidth();var M=["padding",/ne|nw|n/.test(P)?"Top":/se|sw|s/.test(P)?"Bottom":/^e$/.test(P)?"Right":"Left"].join("");L.css(M,N),this._proportionallyResize()}if(!B(this.handles[P]).length){continue}}},this._renderAxis(this.element),this._handles=B(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!E.resizing){if(this.className){var L=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}E.axis=L&&L[1]?L[1]:"se"}}),K.autoHide&&(this._handles.hide(),B(this.element).addClass("ui-resizable-autohide").hover(function(){if(K.disabled){return }B(this).removeClass("ui-resizable-autohide"),E._handles.show()},function(){if(K.disabled){return }E.resizing||(B(this).addClass("ui-resizable-autohide"),E._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var E=function(G){B(G).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){E(this.element);var F=this.element;F.after(this.originalElement.css({position:F.css("position"),width:F.outerWidth(),height:F.outerHeight(),top:F.css("top"),left:F.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),E(this.originalElement),this},_mouseCapture:function(E){var G=!1;for(var F in this.handles){B(this.handles[F])[0]==E.target&&(G=!0)}return !this.options.disabled&&G},_mouseStart:function(E){var K=this.options,J=this.element.position(),I=this.element;this.resizing=!0,this.documentScroll={top:B(document).scrollTop(),left:B(document).scrollLeft()},(I.is(".ui-draggable")||/absolute/.test(I.css("position")))&&I.css({position:"absolute",top:J.top,left:J.left}),this._renderProxy();var H=D(this.helper.css("left")),G=D(this.helper.css("top"));K.containment&&(H+=B(K.containment).scrollLeft()||0,G+=B(K.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:H,top:G},this.size=this._helper?{width:I.outerWidth(),height:I.outerHeight()}:{width:I.width(),height:I.height()},this.originalSize=this._helper?{width:I.outerWidth(),height:I.outerHeight()}:{width:I.width(),height:I.height()},this.originalPosition={left:H,top:G},this.sizeDiff={width:I.outerWidth()-I.width(),height:I.outerHeight()-I.height()},this.originalMousePosition={left:E.pageX,top:E.pageY},this.aspectRatio=typeof K.aspectRatio=="number"?K.aspectRatio:this.originalSize.width/this.originalSize.height||1;var F=B(".ui-resizable-"+this.axis).css("cursor");return B("body").css("cursor",F=="auto"?this.axis+"-resize":F),I.addClass("ui-resizable-resizing"),this._propagate("start",E),!0},_mouseDrag:function(Q){var P=this.helper,O=this.options,N={},M=this,L=this.originalMousePosition,K=this.axis,J=Q.pageX-L.left||0,I=Q.pageY-L.top||0,H=this._change[K];if(!H){return !1}var G=H.apply(this,[Q,J,I]),F=B.browser.msie&&B.browser.version<7,E=this.sizeDiff;this._updateVirtualBoundaries(Q.shiftKey);if(this._aspectRatio||Q.shiftKey){G=this._updateRatio(G,Q)}return G=this._respectSize(G,Q),this._propagate("resize",Q),P.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(G),this._trigger("resize",Q,this.ui()),!1},_mouseStop:function(N){this.resizing=!1;var M=this.options,L=this;if(this._helper){var K=this._proportionallyResizeElements,J=K.length&&/textarea/i.test(K[0].nodeName),I=J&&B.ui.hasScroll(K[0],"left")?0:L.sizeDiff.height,H=J?0:L.sizeDiff.width,G={width:L.helper.width()-H,height:L.helper.height()-I},F=parseInt(L.element.css("left"),10)+(L.position.left-L.originalPosition.left)||null,E=parseInt(L.element.css("top"),10)+(L.position.top-L.originalPosition.top)||null;M.animate||this.element.css(B.extend(G,{top:E,left:F})),L.helper.height(L.size.height),L.helper.width(L.size.width),this._helper&&!M.animate&&this._proportionallyResize()}return B("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",N),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(F){var E=this.options,K,J,I,H,G;G={minWidth:C(E.minWidth)?E.minWidth:0,maxWidth:C(E.maxWidth)?E.maxWidth:Infinity,minHeight:C(E.minHeight)?E.minHeight:0,maxHeight:C(E.maxHeight)?E.maxHeight:Infinity};if(this._aspectRatio||F){K=G.minHeight*this.aspectRatio,I=G.minWidth/this.aspectRatio,J=G.maxHeight*this.aspectRatio,H=G.maxWidth/this.aspectRatio,K>G.minWidth&&(G.minWidth=K),I>G.minHeight&&(G.minHeight=I),J<G.maxWidth&&(G.maxWidth=J),H<G.maxHeight&&(G.maxHeight=H)}this._vBoundaries=G},_updateCache:function(F){var E=this.options;this.offset=this.helper.offset(),C(F.left)&&(this.position.left=F.left),C(F.top)&&(this.position.top=F.top),C(F.height)&&(this.size.height=F.height),C(F.width)&&(this.size.width=F.width)},_updateRatio:function(F,E){var J=this.options,I=this.position,H=this.size,G=this.axis;return C(F.height)?F.width=F.height*this.aspectRatio:C(F.width)&&(F.height=F.width/this.aspectRatio),G=="sw"&&(F.left=I.left+(H.width-F.width),F.top=null),G=="nw"&&(F.top=I.top+(H.height-F.height),F.left=I.left+(H.width-F.width)),F},_respectSize:function(S,R){var Q=this.helper,P=this._vBoundaries,O=this._aspectRatio||R.shiftKey,N=this.axis,M=C(S.width)&&P.maxWidth&&P.maxWidth<S.width,L=C(S.height)&&P.maxHeight&&P.maxHeight<S.height,K=C(S.width)&&P.minWidth&&P.minWidth>S.width,J=C(S.height)&&P.minHeight&&P.minHeight>S.height;K&&(S.width=P.minWidth),J&&(S.height=P.minHeight),M&&(S.width=P.maxWidth),L&&(S.height=P.maxHeight);var I=this.originalPosition.left+this.originalSize.width,H=this.position.top+this.size.height,G=/sw|nw|w/.test(N),F=/nw|ne|n/.test(N);K&&G&&(S.left=I-P.minWidth),M&&G&&(S.left=I-P.maxWidth),J&&F&&(S.top=H-P.minHeight),L&&F&&(S.top=H-P.maxHeight);var E=!S.width&&!S.height;return E&&!S.left&&S.top?S.top=null:E&&!S.top&&S.left&&(S.left=null),S},_proportionallyResize:function(){var E=this.options;if(!this._proportionallyResizeElements.length){return }var J=this.helper||this.element;for(var I=0;I<this._proportionallyResizeElements.length;I++){var H=this._proportionallyResizeElements[I];if(!this.borderDif){var G=[H.css("borderTopWidth"),H.css("borderRightWidth"),H.css("borderBottomWidth"),H.css("borderLeftWidth")],F=[H.css("paddingTop"),H.css("paddingRight"),H.css("paddingBottom"),H.css("paddingLeft")];this.borderDif=B.map(G,function(L,K){var N=parseInt(L,10)||0,M=parseInt(F[K],10)||0;return N+M})}if(!B.browser.msie||!B(J).is(":hidden")&&!B(J).parents(":hidden").length){H.css({height:J.height()-this.borderDif[0]-this.borderDif[2]||0,width:J.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var E=this.element,I=this.options;this.elementOffset=E.offset();if(this._helper){this.helper=this.helper||B('<div style="overflow:hidden;"></div>');var H=B.browser.msie&&B.browser.version<7,G=H?1:0,F=H?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+F,height:this.element.outerHeight()+F,position:"absolute",left:this.elementOffset.left-G+"px",top:this.elementOffset.top-G+"px",zIndex:++I.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(F,E,G){return{width:this.originalSize.width+E}},w:function(F,E,J){var I=this.options,H=this.originalSize,G=this.originalPosition;return{left:G.left+E,width:H.width-E}},n:function(F,E,J){var I=this.options,H=this.originalSize,G=this.originalPosition;return{top:G.top+J,height:H.height-J}},s:function(F,E,G){return{height:this.originalSize.height+G}},se:function(E,G,F){return B.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[E,G,F]))},sw:function(E,G,F){return B.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[E,G,F]))},ne:function(E,G,F){return B.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[E,G,F]))},nw:function(E,G,F){return B.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[E,G,F]))}},_propagate:function(E,F){B.ui.plugin.call(this,E,[F,this.ui()]),E!="resize"&&this._trigger(E,F,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),B.extend(B.ui.resizable,{version:"1.8.21"}),B.ui.plugin.add("resizable","alsoResize",{start:function(E,I){var H=B(this).data("resizable"),G=H.options,F=function(J){B(J).each(function(){var K=B(this);K.data("resizable-alsoresize",{width:parseInt(K.width(),10),height:parseInt(K.height(),10),left:parseInt(K.css("left"),10),top:parseInt(K.css("top"),10)})})};typeof G.alsoResize=="object"&&!G.alsoResize.parentNode?G.alsoResize.length?(G.alsoResize=G.alsoResize[0],F(G.alsoResize)):B.each(G.alsoResize,function(J){F(J)}):F(G.alsoResize)},resize:function(E,L){var K=B(this).data("resizable"),J=K.options,I=K.originalSize,H=K.originalPosition,G={height:K.size.height-I.height||0,width:K.size.width-I.width||0,top:K.position.top-H.top||0,left:K.position.left-H.left||0},F=function(M,N){B(M).each(function(){var O=B(this),R=B(this).data("resizable-alsoresize"),Q={},P=N&&N.length?N:O.parents(L.originalElement[0]).length?["width","height"]:["width","height","top","left"];B.each(P,function(T,S){var U=(R[S]||0)+(G[S]||0);U&&U>=0&&(Q[S]=U||null)}),O.css(Q)})};typeof J.alsoResize=="object"&&!J.alsoResize.nodeType?B.each(J.alsoResize,function(N,M){F(N,M)}):F(J.alsoResize)},stop:function(E,F){B(this).removeData("resizable-alsoresize")}}),B.ui.plugin.add("resizable","animate",{stop:function(O,N){var M=B(this).data("resizable"),L=M.options,K=M._proportionallyResizeElements,J=K.length&&/textarea/i.test(K[0].nodeName),I=J&&B.ui.hasScroll(K[0],"left")?0:M.sizeDiff.height,H=J?0:M.sizeDiff.width,G={width:M.size.width-H,height:M.size.height-I},F=parseInt(M.element.css("left"),10)+(M.position.left-M.originalPosition.left)||null,E=parseInt(M.element.css("top"),10)+(M.position.top-M.originalPosition.top)||null;M.element.animate(B.extend(G,E&&F?{top:E,left:F}:{}),{duration:L.animateDuration,easing:L.animateEasing,step:function(){var P={width:parseInt(M.element.css("width"),10),height:parseInt(M.element.css("height"),10),top:parseInt(M.element.css("top"),10),left:parseInt(M.element.css("left"),10)};K&&K.length&&B(K[0]).css({width:P.width,height:P.height}),M._updateCache(P),M._propagate("resize",O)}})}}),B.ui.plugin.add("resizable","containment",{start:function(R,Q){var P=B(this).data("resizable"),O=P.options,N=P.element,M=O.containment,L=M instanceof B?M.get(0):/parent/.test(M)?N.parent().get(0):M;if(!L){return }P.containerElement=B(L);if(/document/.test(M)||M==document){P.containerOffset={left:0,top:0},P.containerPosition={left:0,top:0},P.parentData={element:B(document),left:0,top:0,width:B(document).width(),height:B(document).height()||document.body.parentNode.scrollHeight}}else{var K=B(L),J=[];B(["Top","Right","Left","Bottom"]).each(function(T,S){J[T]=D(K.css("padding"+S))}),P.containerOffset=K.offset(),P.containerPosition=K.position(),P.containerSize={height:K.innerHeight()-J[3],width:K.innerWidth()-J[1]};var I=P.containerOffset,H=P.containerSize.height,G=P.containerSize.width,F=B.ui.hasScroll(L,"left")?L.scrollWidth:G,E=B.ui.hasScroll(L)?L.scrollHeight:H;P.parentData={element:L,left:I.left,top:I.top,width:F,height:E}}},resize:function(S,R){var Q=B(this).data("resizable"),P=Q.options,O=Q.containerSize,N=Q.containerOffset,M=Q.size,L=Q.position,K=Q._aspectRatio||S.shiftKey,J={top:0,left:0},I=Q.containerElement;I[0]!=document&&/static/.test(I.css("position"))&&(J=N),L.left<(Q._helper?N.left:0)&&(Q.size.width=Q.size.width+(Q._helper?Q.position.left-N.left:Q.position.left-J.left),K&&(Q.size.height=Q.size.width/Q.aspectRatio),Q.position.left=P.helper?N.left:0),L.top<(Q._helper?N.top:0)&&(Q.size.height=Q.size.height+(Q._helper?Q.position.top-N.top:Q.position.top),K&&(Q.size.width=Q.size.height*Q.aspectRatio),Q.position.top=Q._helper?N.top:0),Q.offset.left=Q.parentData.left+Q.position.left,Q.offset.top=Q.parentData.top+Q.position.top;var H=Math.abs((Q._helper?Q.offset.left-J.left:Q.offset.left-J.left)+Q.sizeDiff.width),G=Math.abs((Q._helper?Q.offset.top-J.top:Q.offset.top-N.top)+Q.sizeDiff.height),F=Q.containerElement.get(0)==Q.element.parent().get(0),E=/relative|absolute/.test(Q.containerElement.css("position"));F&&E&&(H-=Q.parentData.left),H+Q.size.width>=Q.parentData.width&&(Q.size.width=Q.parentData.width-H,K&&(Q.size.height=Q.size.width/Q.aspectRatio)),G+Q.size.height>=Q.parentData.height&&(Q.size.height=Q.parentData.height-G,K&&(Q.size.width=Q.size.height*Q.aspectRatio))},stop:function(P,O){var N=B(this).data("resizable"),M=N.options,L=N.position,K=N.containerOffset,J=N.containerPosition,I=N.containerElement,H=B(N.helper),G=H.offset(),F=H.outerWidth()-N.sizeDiff.width,E=H.outerHeight()-N.sizeDiff.height;N._helper&&!M.animate&&/relative/.test(I.css("position"))&&B(this).css({left:G.left-J.left-K.left,width:F,height:E}),N._helper&&!M.animate&&/static/.test(I.css("position"))&&B(this).css({left:G.left-J.left-K.left,width:F,height:E})}}),B.ui.plugin.add("resizable","ghost",{start:function(E,I){var H=B(this).data("resizable"),G=H.options,F=H.size;H.ghost=H.originalElement.clone(),H.ghost.css({opacity:0.25,display:"block",position:"relative",height:F.height,width:F.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof G.ghost=="string"?G.ghost:""),H.ghost.appendTo(H.helper)},resize:function(E,H){var G=B(this).data("resizable"),F=G.options;G.ghost&&G.ghost.css({position:"relative",height:G.size.height,width:G.size.width})},stop:function(E,H){var G=B(this).data("resizable"),F=G.options;G.ghost&&G.helper&&G.helper.get(0).removeChild(G.ghost.get(0))}}),B.ui.plugin.add("resizable","grid",{resize:function(O,N){var M=B(this).data("resizable"),L=M.options,K=M.size,J=M.originalSize,I=M.originalPosition,H=M.axis,G=L._aspectRatio||O.shiftKey;L.grid=typeof L.grid=="number"?[L.grid,L.grid]:L.grid;var F=Math.round((K.width-J.width)/(L.grid[0]||1))*(L.grid[0]||1),E=Math.round((K.height-J.height)/(L.grid[1]||1))*(L.grid[1]||1);/^(se|s|e)$/.test(H)?(M.size.width=J.width+F,M.size.height=J.height+E):/^(ne)$/.test(H)?(M.size.width=J.width+F,M.size.height=J.height+E,M.position.top=I.top-E):/^(sw)$/.test(H)?(M.size.width=J.width+F,M.size.height=J.height+E,M.position.left=I.left-F):(M.size.width=J.width+F,M.size.height=J.height+E,M.position.top=I.top-E,M.position.left=I.left-F)}});var D=function(E){return parseInt(E,10)||0},C=function(E){return !isNaN(parseInt(E,10))}})(jQuery);(function(E,B){var A={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},D={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},C=E.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};E.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(G){var F=E(this).css(G).offset().top;F<0&&E(this).css("top",G.top-F)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var G=this,F=G.options,L=F.title||"&#160;",K=E.ui.dialog.getTitleId(G.element),I=(G.uiDialog=E("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+F.dialogClass).css({zIndex:F.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(M){if(F.closeOnEscape&&M.keyCode&&M.keyCode===E.ui.keyCode.ESCAPE){G.close(M);M.preventDefault()}}).attr({role:"dialog","aria-labelledby":K}).mousedown(function(M){G.moveToTop(false,M)});G.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(I);var J=(G.uiDialogTitlebar=E("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(I),H=E('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){H.addClass("ui-state-hover")},function(){H.removeClass("ui-state-hover")}).focus(function(){H.addClass("ui-state-focus")}).blur(function(){H.removeClass("ui-state-focus")}).click(function(M){G.close(M);return false}).appendTo(J);(G.uiDialogTitlebarCloseText=E("<span></span>")).addClass("ui-icon ui-icon-closethick").text(F.closeText).appendTo(H);E("<span></span>").addClass("ui-dialog-title").attr("id",K).html(L).prependTo(J);if(E.isFunction(F.beforeclose)&&!E.isFunction(F.beforeClose)){F.beforeClose=F.beforeclose}J.find("*").add(J).disableSelection();F.draggable&&E.fn.draggable&&G._makeDraggable();F.resizable&&E.fn.resizable&&G._makeResizable();G._createButtons(F.buttons);G._isOpen=false;E.fn.bgiframe&&I.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var F=this;F.overlay&&F.overlay.destroy();F.uiDialog.hide();F.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");F.uiDialog.remove();F.originalTitle&&F.element.attr("title",F.originalTitle);return F},widget:function(){return this.uiDialog},close:function(G){var F=this,I,H;if(false!==F._trigger("beforeClose",G)){F.overlay&&F.overlay.destroy();F.uiDialog.unbind("keypress.ui-dialog");F._isOpen=false;if(F.options.hide){F.uiDialog.hide(F.options.hide,function(){F._trigger("close",G)})}else{F.uiDialog.hide();F._trigger("close",G)}E.ui.dialog.overlay.resize();if(F.options.modal){I=0;E(".ui-dialog").each(function(){if(this!==F.uiDialog[0]){H=E(this).css("z-index");isNaN(H)||(I=Math.max(I,H))}});E.ui.dialog.maxZ=I}return F}},isOpen:function(){return this._isOpen},moveToTop:function(G,F){var I=this,H=I.options;if(H.modal&&!G||!H.stack&&!H.modal){return I._trigger("focus",F)}if(H.zIndex>E.ui.dialog.maxZ){E.ui.dialog.maxZ=H.zIndex}if(I.overlay){E.ui.dialog.maxZ+=1;I.overlay.$el.css("z-index",E.ui.dialog.overlay.maxZ=E.ui.dialog.maxZ)}G={scrollTop:I.element.attr("scrollTop"),scrollLeft:I.element.attr("scrollLeft")};E.ui.dialog.maxZ+=1;I.uiDialog.css("z-index",E.ui.dialog.maxZ);I.element.attr(G);I._trigger("focus",F);return I},open:function(){if(!this._isOpen){var G=this,F=G.options,H=G.uiDialog;G.overlay=F.modal?new E.ui.dialog.overlay(G):null;G._size();G._position(F.position);H.show(F.show);G.moveToTop(true);F.modal&&H.bind("keypress.ui-dialog",function(K){if(K.keyCode===E.ui.keyCode.TAB){var I=E(":tabbable",this),J=I.filter(":first");I=I.filter(":last");if(K.target===I[0]&&!K.shiftKey){J.focus(1);return false}else{if(K.target===J[0]&&K.shiftKey){I.focus(1);return false}}}});E(G.element.find(":tabbable").get().concat(H.find(".ui-dialog-buttonpane :tabbable").get().concat(H.get()))).eq(0).focus();G._isOpen=true;G._trigger("open");return G}},_createButtons:function(G){var F=this,J=false,I=E("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),H=E("<div></div>").addClass("ui-dialog-buttonset").appendTo(I);F.uiDialog.find(".ui-dialog-buttonpane").remove();typeof G==="object"&&G!==null&&E.each(G,function(){return !(J=true)});if(J){E.each(G,function(M,L){L=E.isFunction(L)?{click:L,text:M}:L;var K=E('<button type="button"></button>').click(function(){L.click.apply(F.element[0],arguments)}).appendTo(H);E.each(L,function(O,N){if(O!=="click"){O in C?K[O](N):K.attr(O,N)}});E.fn.button&&K.button()});I.appendTo(F.uiDialog)}},_makeDraggable:function(){function G(K){return{position:K.position,offset:K.offset}}var F=this,J=F.options,I=E(document),H;F.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(L,K){H=J.height==="auto"?"auto":E(this).height();E(this).height(E(this).height()).addClass("ui-dialog-dragging");F._trigger("dragStart",L,G(K))},drag:function(L,K){F._trigger("drag",L,G(K))},stop:function(L,K){J.position=[K.position.left-I.scrollLeft(),K.position.top-I.scrollTop()];E(this).removeClass("ui-dialog-dragging").height(H);F._trigger("dragStop",L,G(K));E.ui.dialog.overlay.resize()}})},_makeResizable:function(G){function F(K){return{originalPosition:K.originalPosition,originalSize:K.originalSize,position:K.position,size:K.size}}G=G===B?this.options.resizable:G;var J=this,I=J.options,H=J.uiDialog.css("position");G=typeof G==="string"?G:"n,e,s,w,se,sw,ne,nw";J.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:J.element,maxWidth:I.maxWidth,maxHeight:I.maxHeight,minWidth:I.minWidth,minHeight:J._minHeight(),handles:G,start:function(L,K){E(this).addClass("ui-dialog-resizing");J._trigger("resizeStart",L,F(K))},resize:function(L,K){J._trigger("resize",L,F(K))},stop:function(L,K){E(this).removeClass("ui-dialog-resizing");I.height=E(this).height();I.width=E(this).width();J._trigger("resizeStop",L,F(K));E.ui.dialog.overlay.resize()}}).css("position",H).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var F=this.options;return F.height==="auto"?F.minHeight:Math.min(F.minHeight,F.height)},_position:function(G){var F=[],I=[0,0],H;if(G){if(typeof G==="string"||typeof G==="object"&&"0" in G){F=G.split?G.split(" "):[G[0],G[1]];if(F.length===1){F[1]=F[0]}E.each(["left","top"],function(J,K){if(+F[J]===F[J]){I[J]=F[J];F[J]=K}});G={my:F.join(" "),at:F.join(" "),offset:I.join(" ")}}G=E.extend({},E.ui.dialog.prototype.options.position,G)}else{G=E.ui.dialog.prototype.options.position}(H=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(E.extend({of:window},G));H||this.uiDialog.hide()},_setOptions:function(G){var F=this,I={},H=false;E.each(G,function(J,K){F._setOption(J,K);if(J in A){H=true}if(J in D){I[J]=K}});H&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",I)},_setOption:function(G,F){var J=this,I=J.uiDialog;switch(G){case"beforeclose":G="beforeClose";break;case"buttons":J._createButtons(F);break;case"closeText":J.uiDialogTitlebarCloseText.text(""+F);break;case"dialogClass":I.removeClass(J.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+F);break;case"disabled":F?I.addClass("ui-dialog-disabled"):I.removeClass("ui-dialog-disabled");break;case"draggable":var H=I.is(":data(draggable)");H&&!F&&I.draggable("destroy");!H&&F&&J._makeDraggable();break;case"position":J._position(F);break;case"resizable":(H=I.is(":data(resizable)"))&&!F&&I.resizable("destroy");H&&typeof F==="string"&&I.resizable("option","handles",F);!H&&F!==false&&J._makeResizable(F);break;case"title":E(".ui-dialog-title",J.uiDialogTitlebar).html(""+(F||"&#160;"));break}E.Widget.prototype._setOption.apply(J,arguments)},_size:function(){var G=this.options,F,I,H=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(G.minWidth>G.width){G.width=G.minWidth}F=this.uiDialog.css({height:"auto",width:G.width}).height();I=Math.max(0,G.minHeight-F);if(G.height==="auto"){if(E.support.minHeight){this.element.css({minHeight:I,height:"auto"})}else{this.uiDialog.show();G=this.element.css("height","auto").height();H||this.uiDialog.hide();this.element.height(Math.max(G,I))}}else{this.element.height(Math.max(G.height-F,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});E.extend(E.ui.dialog,{version:"1.8.14",uuid:0,maxZ:0,getTitleId:function(F){F=F.attr("id");if(!F){this.uuid+=1;F=this.uuid}return"ui-dialog-title-"+F},overlay:function(F){this.$el=E.ui.dialog.overlay.create(F)}});E.extend(E.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:E.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(F){return F+".dialog-overlay"}).join(" "),create:function(G){if(this.instances.length===0){setTimeout(function(){E.ui.dialog.overlay.instances.length&&E(document).bind(E.ui.dialog.overlay.events,function(H){if(E(H.target).zIndex()<E.ui.dialog.overlay.maxZ){return false}})},1);E(document).bind("keydown.dialog-overlay",function(H){if(G.options.closeOnEscape&&H.keyCode&&H.keyCode===E.ui.keyCode.ESCAPE){G.close(H);H.preventDefault()}});E(window).bind("resize.dialog-overlay",E.ui.dialog.overlay.resize)}var F=(this.oldInstances.pop()||E("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});E.fn.bgiframe&&F.bgiframe();this.instances.push(F);return F},destroy:function(G){var F=E.inArray(G,this.instances);F!=-1&&this.oldInstances.push(this.instances.splice(F,1)[0]);this.instances.length===0&&E([document,window]).unbind(".dialog-overlay");G.remove();var H=0;E.each(this.instances,function(){H=Math.max(H,this.css("z-index"))});this.maxZ=H},height:function(){var G,F;if(E.browser.msie&&E.browser.version<7){G=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);F=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return G<F?E(window).height()+"px":G+"px"}else{return E(document).height()+"px"}},width:function(){var G,F;if(E.browser.msie){G=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);F=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return G<F?E(window).width()+"px":G+"px"}else{return E(document).width()+"px"}},resize:function(){var F=E([]);E.each(E.ui.dialog.overlay.instances,function(){F=F.add(this)});F.css({width:0,height:0}).css({width:E.ui.dialog.overlay.width(),height:E.ui.dialog.overlay.height()})}});E.extend(E.ui.dialog.overlay.prototype,{destroy:function(){E.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(){function d(A,G,F){if(A===G){return A!==0||1/A==1/G}if(A==null){return A===G}var E=typeof A;if(E!=typeof G){return false}if(!A!=!G){return false}if(AF.isNaN(A)){return AF.isNaN(G)}var D=AF.isString(A),C=AF.isString(G);if(D||C){return D&&C&&String(A)==String(G)}D=AF.isNumber(A);C=AF.isNumber(G);if(D||C){return D&&C&&+A==+G}D=AF.isBoolean(A);C=AF.isBoolean(G);if(D||C){return D&&C&&+A==+G}D=AF.isDate(A);C=AF.isDate(G);if(D||C){return D&&C&&A.getTime()==G.getTime()}D=AF.isRegExp(A);C=AF.isRegExp(G);if(D||C){return D&&C&&A.source==G.source&&A.global==G.global&&A.multiline==G.multiline&&A.ignoreCase==G.ignoreCase}if(E!="object"){return false}if(A._chain){A=A._wrapped}if(G._chain){G=G._wrapped}if(AF.isFunction(A.isEqual)){return A.isEqual(G)}for(E=F.length;E--;){if(F[E]==A){return true}}F.push(A);E=0;D=true;if(A.length===+A.length||G.length===+G.length){if(E=A.length,D=E==G.length){for(;E--;){if(!(D=E in A==E in G&&d(A[E],G[E],F))){break}}}}else{for(var B in A){if(AB.call(A,B)&&(E++,!(D=AB.call(G,B)&&d(A[B],G[B],F)))){break}}if(D){for(B in G){if(AB.call(G,B)&&!E--){break}}D=!E}}F.pop();return D}var a=this,T=a._,h={},AC=Array.prototype,g=Object.prototype,AE=AC.slice,R=AC.unshift,U=g.toString,AB=g.hasOwnProperty,S=AC.forEach,Q=AC.map,O=AC.reduce,M=AC.reduceRight,K=AC.filter,f=AC.every,c=AC.some,e=AC.indexOf,Z=AC.lastIndexOf,g=Array.isArray,P=Object.keys,Y=Function.prototype.bind,AF=function(A){return new AA(A)};typeof module!=="undefined"&&module.exports?(module.exports=AF,AF._=AF):a._=AF;AF.VERSION="1.2.0";var AD=AF.each=AF.forEach=function(B,E,A){if(B!=null){if(S&&B.forEach===S){B.forEach(E,A)}else{if(B.length===+B.length){for(var D=0,C=B.length;D<C;D++){if(D in B&&E.call(A,B[D],D,B)===h){break}}}else{for(D in B){if(AB.call(B,D)&&E.call(A,B[D],D,B)===h){break}}}}}};AF.map=function(B,D,A){var C=[];if(B==null){return C}if(Q&&B.map===Q){return B.map(D,A)}AD(B,function(E,G,F){C[C.length]=D.call(A,E,G,F)});return C};AF.reduce=AF.foldl=AF.inject=function(A,E,D,C){var B=D!==void 0;A==null&&(A=[]);if(O&&A.reduce===O){return C&&(E=AF.bind(E,C)),B?A.reduce(E,D):A.reduce(E)}AD(A,function(G,F,H){B?D=E.call(C,D,G,F,H):(D=G,B=true)});if(!B){throw new TypeError("Reduce of empty array with no initial value")}return D};AF.reduceRight=AF.foldr=function(A,D,C,B){A==null&&(A=[]);if(M&&A.reduceRight===M){return B&&(D=AF.bind(D,B)),C!==void 0?A.reduceRight(D,C):A.reduceRight(D)}A=(AF.isArray(A)?A.slice():AF.toArray(A)).reverse();return AF.reduce(A,D,C,B)};AF.find=AF.detect=function(B,D,A){var C;X(B,function(E,G,F){if(D.call(A,E,G,F)){return C=E,true}});return C};AF.filter=AF.select=function(B,D,A){var C=[];if(B==null){return C}if(K&&B.filter===K){return B.filter(D,A)}AD(B,function(E,G,F){D.call(A,E,G,F)&&(C[C.length]=E)});return C};AF.reject=function(B,D,A){var C=[];if(B==null){return C}AD(B,function(E,G,F){D.call(A,E,G,F)||(C[C.length]=E)});return C};AF.every=AF.all=function(B,D,A){var C=true;if(B==null){return C}if(f&&B.every===f){return B.every(D,A)}AD(B,function(E,G,F){if(!(C=C&&D.call(A,E,G,F))){return h}});return C};var X=AF.some=AF.any=function(A,D,C){var D=D||AF.identity,B=false;if(A==null){return B}if(c&&A.some===c){return A.some(D,C)}AD(A,function(F,E,G){if(B|=D.call(C,F,E,G)){return h}});return !!B};AF.include=AF.contains=function(B,C){var A=false;if(B==null){return A}if(e&&B.indexOf===e){return B.indexOf(C)!=-1}X(B,function(D){if(A=D===C){return true}});return A};AF.invoke=function(A,C){var B=AE.call(arguments,2);return AF.map(A,function(D){return(C.call?C||D:D[C]).apply(D,B)})};AF.pluck=function(A,B){return AF.map(A,function(C){return C[B]})};AF.max=function(A,D,C){if(!D&&AF.isArray(A)){return Math.max.apply(Math,A)}if(!D&&AF.isEmpty(A)){return -Infinity}var B={computed:-Infinity};AD(A,function(F,E,G){E=D?D.call(C,F,E,G):F;E>=B.computed&&(B={value:F,computed:E})});return B.value};AF.min=function(A,D,C){if(!D&&AF.isArray(A)){return Math.min.apply(Math,A)}if(!D&&AF.isEmpty(A)){return Infinity}var B={computed:Infinity};AD(A,function(F,E,G){E=D?D.call(C,F,E,G):F;E<B.computed&&(B={value:F,computed:E})});return B.value};AF.shuffle=function(B){var C=[],A;AD(B,function(D,E){E==0?C[0]=D:(A=Math.floor(Math.random()*(E+1)),C[E]=C[A],C[A]=D)});return C};AF.sortBy=function(A,C,B){return AF.pluck(AF.map(A,function(E,D,F){return{value:E,criteria:C.call(B,E,D,F)}}).sort(function(E,D){var G=E.criteria,F=D.criteria;return G<F?-1:G>F?1:0}),"value")};AF.groupBy=function(B,A){var C={};AD(B,function(D,F){var E=A(D,F);(C[E]||(C[E]=[])).push(D)});return C};AF.sortedIndex=function(A,F,E){E||(E=AF.identity);for(var D=0,C=A.length;D<C;){var B=D+C>>1;E(A[B])<E(F)?D=B+1:C=B}return D};AF.toArray=function(A){return !A?[]:A.toArray?A.toArray():AF.isArray(A)?AE.call(A):AF.isArguments(A)?AE.call(A):AF.values(A)};AF.size=function(A){return AF.toArray(A).length};AF.first=AF.head=function(B,A,C){return A!=null&&!C?AE.call(B,0,A):B[0]};AF.initial=function(B,A,C){return AE.call(B,0,B.length-(A==null||C?1:A))};AF.last=function(B,A,C){return A!=null&&!C?AE.call(B,B.length-A):B[B.length-1]};AF.rest=AF.tail=function(B,A,C){return AE.call(B,A==null||C?1:A)};AF.compact=function(A){return AF.filter(A,function(B){return !!B})};AF.flatten=function(A){return AF.reduce(A,function(B,C){if(AF.isArray(C)){return B.concat(AF.flatten(C))}B[B.length]=C;return B},[])};AF.without=function(A){return AF.difference(A,AE.call(arguments,1))};AF.uniq=AF.unique=function(A,D,C){var C=C?AF.map(A,C):A,B=[];AF.reduce(C,function(G,F,E){if(0==E||(D===true?AF.last(G)!=F:!AF.include(G,F))){G[G.length]=F,B[B.length]=A[E]}return G},[]);return B};AF.union=function(){return AF.uniq(AF.flatten(arguments))};AF.intersection=AF.intersect=function(A){var B=AE.call(arguments,1);return AF.filter(AF.uniq(A),function(C){return AF.every(B,function(D){return AF.indexOf(D,C)>=0})})};AF.difference=function(A,B){return AF.filter(A,function(C){return !AF.include(B,C)})};AF.zip=function(){for(var A=AE.call(arguments),D=AF.max(AF.pluck(A,"length")),C=Array(D),B=0;B<D;B++){C[B]=AF.pluck(A,""+B)}return C};AF.indexOf=function(A,D,C){if(A==null){return -1}var B;if(C){return C=AF.sortedIndex(A,D),A[C]===D?C:-1}if(e&&A.indexOf===e){return A.indexOf(D)}for(C=0,B=A.length;C<B;C++){if(A[C]===D){return C}}return -1};AF.lastIndexOf=function(B,A){if(B==null){return -1}if(Z&&B.lastIndexOf===Z){return B.lastIndexOf(A)}for(var C=B.length;C--;){if(B[C]===A){return C}}return -1};AF.range=function(B,A,F){arguments.length<=1&&(A=B||0,B=0);for(var F=arguments[2]||1,E=Math.max(Math.ceil((A-B)/F),0),D=0,C=Array(E);D<E;){C[D++]=B,B+=F}return C};AF.bind=function(B,A){if(B.bind===Y&&Y){return Y.apply(B,AE.call(arguments,1))}var C=AE.call(arguments,2);return function(){return B.apply(A,C.concat(AE.call(arguments)))}};AF.bindAll=function(A){var B=AE.call(arguments,1);B.length==0&&(B=AF.functions(A));AD(B,function(C){A[C]=AF.bind(A[C],A)});return A};AF.memoize=function(A,C){var B={};C||(C=AF.identity);return function(){var D=C.apply(this,arguments);return AB.call(B,D)?B[D]:B[D]=A.apply(this,arguments)}};AF.delay=function(B,A){var C=AE.call(arguments,2);return setTimeout(function(){return B.apply(B,C)},A)};AF.defer=function(A){return AF.delay.apply(AF,[A,1].concat(AE.call(arguments,1)))};var W=function(B,A,D){var C;return function(){var G=this,F=arguments,E=function(){C=null;B.apply(G,F)};D&&clearTimeout(C);if(D||!C){C=setTimeout(E,A)}}};AF.throttle=function(B,A){return W(B,A,false)};AF.debounce=function(B,A){return W(B,A,true)};AF.once=function(B){var A=false,C;return function(){if(A){return C}A=true;return C=B.apply(this,arguments)}};AF.wrap=function(B,A){return function(){var C=[B].concat(AE.call(arguments));return A.apply(this,C)}};AF.compose=function(){var A=AE.call(arguments);return function(){for(var B=AE.call(arguments),C=A.length-1;C>=0;C--){B=[A[C].apply(this,B)]}return B[0]}};AF.after=function(B,A){return function(){if(--B<1){return A.apply(this,arguments)}}};AF.keys=P||function(B){if(B!==Object(B)){throw new TypeError("Invalid object")}var A=[],C;for(C in B){AB.call(B,C)&&(A[A.length]=C)}return A};AF.values=function(A){return AF.map(A,AF.identity)};AF.functions=AF.methods=function(A){var C=[],B;for(B in A){AF.isFunction(A[B])&&C.push(B)}return C.sort()};AF.extend=function(A){AD(AE.call(arguments,1),function(B){for(var C in B){B[C]!==void 0&&(A[C]=B[C])}});return A};AF.defaults=function(A){AD(AE.call(arguments,1),function(B){for(var C in B){A[C]==null&&(A[C]=B[C])}});return A};AF.clone=function(A){return AF.isArray(A)?A.slice():AF.extend({},A)};AF.tap=function(B,A){A(B);return B};AF.isEqual=function(B,A){return d(B,A,[])};AF.isEmpty=function(A){if(AF.isArray(A)||AF.isString(A)){return A.length===0}for(var B in A){if(AB.call(A,B)){return false}}return true};AF.isElement=function(A){return !!(A&&A.nodeType==1)};AF.isArray=g||function(A){return U.call(A)==="[object Array]"};AF.isObject=function(A){return A===Object(A)};AF.isArguments=function(A){return !(!A||!AB.call(A,"callee"))};AF.isFunction=function(A){return !(!A||!A.constructor||!A.call||!A.apply)};AF.isString=function(A){return !!(A===""||A&&A.charCodeAt&&A.substr)};AF.isNumber=function(A){return !!(A===0||A&&A.toExponential&&A.toFixed)};AF.isNaN=function(A){return A!==A};AF.isBoolean=function(A){return A===true||A===false||U.call(A)=="[object Boolean]"};AF.isDate=function(A){return !(!A||!A.getTimezoneOffset||!A.setUTCFullYear)};AF.isRegExp=function(A){return !(!A||!A.test||!A.exec||!(A.ignoreCase||A.ignoreCase===false))};AF.isNull=function(A){return A===null};AF.isUndefined=function(A){return A===void 0};AF.noConflict=function(){a._=T;return this};AF.identity=function(A){return A};AF.times=function(B,A,D){for(var C=0;C<B;C++){A.call(D,C)}};AF.escape=function(A){return(""+A).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};AF.mixin=function(A){AD(AF.functions(A),function(B){N(B,AF[B]=A[B])})};var L=0;AF.uniqueId=function(B){var A=L++;return B?B+A:A};AF.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};AF.template=function(A,C){var B=AF.templateSettings,B="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+A.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(B.escape,function(E,D){return"',_.escape("+D.replace(/\\'/g,"'")+"),'"}).replace(B.interpolate,function(E,D){return"',"+D.replace(/\\'/g,"'")+",'"}).replace(B.evaluate||null,function(E,D){return"');"+D.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",B=new Function("obj",B);return C?B(C):B};var AA=function(A){this._wrapped=A};AF.prototype=AA.prototype;var V=function(A,B){return B?AF(A).chain():A},N=function(A,B){AA.prototype[A]=function(){var C=AE.call(arguments);R.call(C,this._wrapped);return V(B.apply(AF,C),this._chain)}};AF.mixin(AF);AD("pop,push,reverse,shift,sort,splice,unshift".split(","),function(B){var A=AC[B];AA.prototype[B]=function(){A.apply(this._wrapped,arguments);return V(this._wrapped,this._chain)}});AD(["concat","join","slice"],function(B){var A=AC[B];AA.prototype[B]=function(){return V(A.apply(this._wrapped,arguments),this._chain)}});AA.prototype.chain=function(){this._chain=true;return this};AA.prototype.value=function(){return this._wrapped}})();var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(!Object.create){(function(){function A(){}Object.create=function(B){A.prototype=B;return new A()}}())}function isEmpty(C){var B,A;if(typeOf(C)==="object"){for(B in C){A=C[B];if(A!==undefined&&typeOf(A)!=="function"){return false}}}return true}function typeOf(B){var A=typeof B;if(A==="object"){if(B){if(typeof B.length==="number"&&!(B.propertyIsEnumerable("length"))&&typeof B.splice==="function"){A="array"}}else{A="null"}}return A}function copyArray(D){var C=[];for(var B=0,A=D.length;B<A;B++){if(typeOf(D[B])==="array"){C.push(copyArray(D[B]))}if(typeOf(D[B])==="object"){C.push(Object.create(D[B]))}else{C.push(D[B])}}return C}(function(){var P=this,H=P.Backbone,S;S=typeof exports!=="undefined"?exports:P.Backbone={};S.VERSION="0.5.3";var R=P._;if(!R&&typeof require!=="undefined"){R=require("underscore")._}var Q=P.jQuery||P.Zepto;S.noConflict=function(){P.Backbone=H;return this};S.emulateHTTP=!1;S.emulateJSON=!1;S.Events={bind:function(U,T,W){var V=this._callbacks||(this._callbacks={});(V[U]||(V[U]=[])).push([T,W]);return this},unbind:function(U,T){var X;if(U){if(X=this._callbacks){if(T){X=X[U];if(!X){return this}for(var W=0,V=X.length;W<V;W++){if(X[W]&&T===X[W][0]){X[W]=null;break}}}else{X[U]=[]}}}else{this._callbacks={}}return this},trigger:function(U){var T,i,Z,Y,X=2;if(!(i=this._callbacks)){return this}for(;X--;){if(T=X?U:"all",T=i[T]){for(var W=0,V=T.length;W<V;W++){(Z=T[W])?(Y=X?Array.prototype.slice.call(arguments,1):arguments,Z[0].apply(Z[1]||this,Y)):(T.splice(W,1),W--,V--)}}}return this}};S.Model=function(U,T){var V;U||(U={});if(V=this.defaults){R.isFunction(V)&&(V=V.call(this)),U=R.extend({},V,U)}this.attributes={};this._escapedAttributes={};this.cid=R.uniqueId("c");this.set(U,{silent:!0});this._changed=!1;this._previousAttributes=R.clone(this.attributes);if(T&&T.collection){this.collection=T.collection}this.initialize(U,T)};R.extend(S.Model.prototype,S.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return R.clone(this.attributes)},get:function(T){return this.attributes[T]},escape:function(U){var T;if(T=this._escapedAttributes[U]){return T}T=this.attributes[U];return this._escapedAttributes[U]=(T==null?"":""+T).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},has:function(T){return this.attributes[T]!=null},set:function(U,T){T||(T={});if(!U){return this}if(U.attributes){U=U.attributes}var Z=this.attributes,Y=this._escapedAttributes;if(!T.silent&&this.validate&&!this._performValidation(U,T)){return !1}if(this.idAttribute in U){this.id=U[this.idAttribute]}var X=this._changing;this._changing=!0;for(var W in U){var V=U[W];if(!R.isEqual(Z[W],V)){Z[W]=V,delete Y[W],this._changed=!0,T.silent||this.trigger("change:"+W,this,V,T)}}!X&&!T.silent&&this._changed&&this.change(T);this._changing=!1;return this},unset:function(U,T){if(!(U in this.attributes)){return this}T||(T={});var V={};V[U]=void 0;if(!T.silent&&this.validate&&!this._performValidation(V,T)){return !1}delete this.attributes[U];delete this._escapedAttributes[U];U==this.idAttribute&&delete this.id;this._changed=!0;T.silent||(this.trigger("change:"+U,this,void 0,T),this.change(T));return this},clear:function(U){U||(U={});var T,W=this.attributes,V={};for(T in W){V[T]=void 0}if(!U.silent&&this.validate&&!this._performValidation(V,U)){return !1}this.attributes={};this._escapedAttributes={};this._changed=!0;if(!U.silent){for(T in W){this.trigger("change:"+T,this,void 0,U)}this.change(U)}return this},fetch:function(U){U||(U={});var T=this,V=U.success;U.success=function(Y,X,W){if(!T.set(T.parse(Y,W),U)){return !1}V&&V(T,Y)};U.error=O(U.error,T,U);return(this.sync||S.sync).call(this,"read",this,U)},save:function(U,T){T||(T={});if(U&&!this.set(U,T)){return !1}var X=this,W=T.success;T.success=function(Y,b,Z){if(!X.set(X.parse(Y,Z),T)){return !1}W&&W(X,Y,Z)};T.error=O(T.error,X,T);var V=this.isNew()?"create":"update";return(this.sync||S.sync).call(this,V,this,T)},destroy:function(U){U||(U={});if(this.isNew()){return this.trigger("destroy",this,this.collection,U)}var T=this,V=U.success;U.success=function(W){T.trigger("destroy",T,T.collection,U);V&&V(T,W)};U.error=O(U.error,T,U);return(this.sync||S.sync).call(this,"delete",this,U)},url:function(){var T=M(this.collection)||this.urlRoot||L();if(this.isNew()){return T}return T+(T.charAt(T.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(T){return T},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(T){this.trigger("change",this,T);this._previousAttributes=R.clone(this.attributes);this._changed=!1},hasChanged:function(T){if(T){return this._previousAttributes[T]!=this.attributes[T]}return this._changed},changedAttributes:function(U){U||(U=this.attributes);var T=this._previousAttributes,W=!1,V;for(V in U){R.isEqual(T[V],U[V])||(W=W||{},W[V]=U[V])}return W},previous:function(T){if(!T||!this._previousAttributes){return null}return this._previousAttributes[T]},previousAttributes:function(){return R.clone(this._previousAttributes)},_performValidation:function(U,T){var V=this.validate(U);if(V){return T.error?T.error(this,V,T):this.trigger("error",this,V,T),!1}return !0}});S.Collection=function(U,T){T||(T={});if(T.comparator){this.comparator=T.comparator}R.bindAll(this,"_onModelEvent","_removeReference");this._reset();U&&this.reset(U,{silent:!0});this.initialize.apply(this,arguments)};R.extend(S.Collection.prototype,S.Events,{model:S.Model,initialize:function(){},toJSON:function(){return this.map(function(T){return T.toJSON()})},add:function(U,T){if(R.isArray(U)){for(var W=0,V=U.length;W<V;W++){this._add(U[W],T)}}else{this._add(U,T)}return this},remove:function(U,T){if(R.isArray(U)){for(var W=0,V=U.length;W<V;W++){this._remove(U[W],T)}}else{this._remove(U,T)}return this},get:function(T){if(T==null){return null}return this._byId[T.id!=null?T.id:T]},getByCid:function(T){return T&&this._byCid[T.cid||T]},at:function(T){return this.models[T]},sort:function(T){T||(T={});if(!this.comparator){throw Error("Cannot sort a set without a comparator")}this.models=this.sortBy(this.comparator);T.silent||this.trigger("reset",this,T);return this},pluck:function(T){return R.map(this.models,function(U){return U.get(T)})},reset:function(U,T){U||(U=[]);T||(T={});this.each(this._removeReference);this._reset();this.add(U,{silent:!0});T.silent||this.trigger("reset",this,T);return this},fetch:function(U){U||(U={});var T=this,V=U.success;U.success=function(Y,W,X){T[U.add?"add":"reset"](T.parse(Y,X),U);V&&V(T,Y)};U.error=O(U.error,T,U);return(this.sync||S.sync).call(this,"read",this,U)},create:function(U,T){var W=this;T||(T={});U=this._prepareModel(U,T);if(!U){return !1}var V=T.success;T.success=function(X,Z,Y){W.add(X,T);V&&V(X,Z,Y)};U.save(null,T);return U},parse:function(T){return T},chain:function(){return R(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(U,T){if(U instanceof S.Model){if(!U.collection){U.collection=this}}else{var V=U;U=new this.model(V,{collection:this});U.validate&&!U._performValidation(V,T)&&(U=!1)}return U},_add:function(U,T){T||(T={});U=this._prepareModel(U,T);if(!U){return !1}var V=this.getByCid(U);if(V){throw Error(["Can't add the same model to a set twice",V.id])}this._byId[U.id]=U;this._byCid[U.cid]=U;this.models.splice(T.at!=null?T.at:this.comparator?this.sortedIndex(U,this.comparator):this.length,0,U);U.bind("all",this._onModelEvent);this.length++;T.silent||U.trigger("add",U,this,T);return U},_remove:function(U,T){T||(T={});U=this.getByCid(U)||this.get(U);if(!U){return null}delete this._byId[U.id];delete this._byCid[U.cid];this.models.splice(this.indexOf(U),1);this.length--;T.silent||U.trigger("remove",U,this,T);this._removeReference(U);return U},_removeReference:function(T){this==T.collection&&delete T.collection;T.unbind("all",this._onModelEvent)},_onModelEvent:function(U,T,W,V){(U=="add"||U=="remove")&&W!=this||(U=="destroy"&&this._remove(T,V),T&&U==="change:"+T.idAttribute&&(delete this._byId[T.previous(T.idAttribute)],this._byId[T.id]=T),this.trigger.apply(this,arguments))}});R.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"],function(T){S.Collection.prototype[T]=function(){return R[T].apply(R,[this.models].concat(R.toArray(arguments)))}});S.Router=function(T){T||(T={});if(T.routes){this.routes=T.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var G=/:([\w\d]+)/g,F=/\*([\w\d]+)/g,E=/[-[\]{}()+?.,\\^$|#\s]/g;R.extend(S.Router.prototype,S.Events,{initialize:function(){},route:function(U,T,V){S.history||(S.history=new S.History);R.isRegExp(U)||(U=this._routeToRegExp(U));S.history.route(U,R.bind(function(W){W=this._extractParameters(U,W);V.apply(this,W);this.trigger.apply(this,["route:"+T].concat(W))},this))},navigate:function(U,T){S.history.navigate(U,T)},_bindRoutes:function(){if(this.routes){var U=[],T;for(T in this.routes){U.unshift([T,this.routes[T]])}T=0;for(var V=U.length;T<V;T++){this.route(U[T][0],U[T][1],this[U[T][1]])}}},_routeToRegExp:function(T){T=T.replace(E,"\\$&").replace(G,"([^/]*)").replace(F,"(.*?)");return RegExp("^"+T+"$")},_extractParameters:function(U,T){return U.exec(T).slice(1)}});S.History=function(){this.handlers=[];R.bindAll(this,"checkUrl")};var N=/^#*/,D=/msie [\w.]+/,K=!1;R.extend(S.History.prototype,{interval:50,getFragment:function(U,T){if(U==null){if(this._hasPushState||T){U=window.location.pathname;var V=window.location.search;V&&(U+=V);U.indexOf(this.options.root)==0&&(U=U.substr(this.options.root.length))}else{U=window.location.hash}}return decodeURIComponent(U.replace(N,""))},start:function(U){if(K){throw Error("Backbone.history has already been started")}this.options=R.extend({},{root:"/"},this.options,U);this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);U=this.getFragment();var T=document.documentMode;if(T=D.exec(navigator.userAgent.toLowerCase())&&(!T||T<=7)){this.iframe=Q('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(U)}this._hasPushState?Q(window).bind("popstate",this.checkUrl):"onhashchange" in window&&!T?Q(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);this.fragment=U;K=!0;U=window.location;T=U.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!T){return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0}else{if(this._wantsPushState&&this._hasPushState&&T&&U.hash){this.fragment=U.hash.replace(N,""),window.history.replaceState({},document.title,U.protocol+"//"+U.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},route:function(U,T){this.handlers.unshift({route:U,callback:T})},checkUrl:function(){var T=this.getFragment();T==this.fragment&&this.iframe&&(T=this.getFragment(this.iframe.location.hash));if(T==this.fragment||T==decodeURIComponent(this.fragment)){return !1}this.iframe&&this.navigate(T);this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(U){var T=this.fragment=this.getFragment(U);return R.any(this.handlers,function(V){if(V.route.test(T)){return V.callback(T),!0}})},navigate:function(U,T){var W=(U||"").replace(N,"");if(!(this.fragment==W||this.fragment==decodeURIComponent(W))){if(this._hasPushState){var V=window.location;W.indexOf(this.options.root)!=0&&(W=this.options.root+W);this.fragment=W;window.history.pushState({},document.title,V.protocol+"//"+V.host+W)}else{if(window.location.hash=this.fragment=W,this.iframe&&W!=this.getFragment(this.iframe.location.hash)){this.iframe.document.open().close(),this.iframe.location.hash=W}}T&&this.loadUrl(U)}}});S.View=function(T){this.cid=R.uniqueId("view");this._configure(T||{});this._ensureElement();this.delegateEvents();this.initialize.apply(this,arguments)};var C=/^(\S+)\s*(.*)$/,J=["model","collection","el","id","attributes","className","tagName"];R.extend(S.View.prototype,S.Events,{tagName:"div",$:function(T){return Q(T,this.el)},initialize:function(){},render:function(){return this},remove:function(){Q(this.el).remove();return this},make:function(U,T,V){U=document.createElement(U);T&&Q(U).attr(T);V&&Q(U).html(V);return U},delegateEvents:function(U){if(U||(U=this.events)){for(var T in R.isFunction(U)&&(U=U.call(this)),Q(this.el).unbind(".delegateEvents"+this.cid),U){var X=this[U[T]];if(!X){throw Error('Event "'+U[T]+'" does not exist')}var W=T.match(C),V=W[1];W=W[2];X=R.bind(X,this);V+=".delegateEvents"+this.cid;W===""?Q(this.el).bind(V,X):Q(this.el).delegate(W,V,X)}}},_configure:function(U){this.options&&(U=R.extend({},this.options,U));for(var T=0,W=J.length;T<W;T++){var V=J[T];U[V]&&(this[V]=U[V])}this.options=U},_ensureElement:function(){if(this.el){if(R.isString(this.el)){this.el=Q(this.el).get(0)}}else{var T=this.attributes||{};if(this.id){T.id=this.id}if(this.className){T["class"]=this.className}this.el=this.make(this.tagName,T)}}});S.Model.extend=S.Collection.extend=S.Router.extend=S.View.extend=function(U,T){var V=B(this,U,T);V.extend=this.extend;return V};var A={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};S.sync=function(U,T,W){var V=A[U];W=R.extend({type:V,dataType:"json"},W);if(!W.url){W.url=M(T)||L()}if(!W.data&&T&&(U=="create"||U=="update")){W.contentType="application/json",W.data=JSON.stringify(T.toJSON())}if(S.emulateJSON){W.contentType="application/x-www-form-urlencoded",W.data=W.data?{model:W.data}:{}}if(S.emulateHTTP&&(V==="PUT"||V==="DELETE")){if(S.emulateJSON){W.data._method=V}W.type="POST";W.beforeSend=function(X){X.setRequestHeader("X-HTTP-Method-Override",V)}}if(W.type!=="GET"&&!S.emulateJSON){W.processData=!1}return Q.ajax(W)};var I=function(){},B=function(U,T,W){var V;V=T&&T.hasOwnProperty("constructor")?T.constructor:function(){return U.apply(this,arguments)};R.extend(V,U);I.prototype=U.prototype;V.prototype=new I;T&&R.extend(V.prototype,T);W&&R.extend(V,W);V.prototype.constructor=V;V.__super__=U.prototype;return V},M=function(T){if(!T||!T.url){return null}return R.isFunction(T.url)?T.url():T.url},L=function(){throw Error('A "url" property or function must be specified')},O=function(U,T,V){return function(W){U?U(T,W,V):T.trigger("error",T,W,V)}}}).call(this);var DateFormatter=function(){var E=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var F=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function I(M){return(M<0||M>9?"":"0")+M}function J(O,N){var M=D(O,N);if(M==0){return false}return true}function B(Q,R,O,P){var N=D(Q,R);var M=D(O,P);if(N==0||M==0){return -1}else{if(N>M){return 1}}return 0}function L(r,o){o=o+"";var U="";var e=0;var q="";var Q="";var T=r.getYear()+"";var R=r.getMonth()+1;var p=r.getDate();var W=r.getDay();var V=r.getHours();var g=r.getMinutes();var Y=r.getSeconds();var a,b,O,Z,t,P,n,l,i,X,v,V,u,S,N,j;var f=new Object();if(T.length<4){T=""+(T-0+1900)}f.y=""+T;f.yyyy=T;f.yy=T.substring(2,4);f.M=R;f.MM=I(R);f.MMM=E[R-1];f.NNN=E[R+11];f.d=p;f.dd=I(p);f.E=F[W+7];f.EE=F[W];f.H=V;f.HH=I(V);if(V==0){f.h=12}else{if(V>12){f.h=V-12}else{f.h=V}}f.hh=I(f.h);if(V>11){f.K=V-12}else{f.K=V}f.k=V+1;f.KK=I(f.K);f.kk=I(f.k);if(V>11){f.a="PM"}else{f.a="AM"}f.m=g;f.mm=I(g);f.s=Y;f.ss=I(Y);while(e<o.length){q=o.charAt(e);Q="";while((o.charAt(e)==q)&&(e<o.length)){Q+=o.charAt(e++)}if(f[Q]!=null){U=U+f[Q]}else{U=U+Q}}return U}function K(O){var N="1234567890";for(var M=0;M<O.length;M++){if(N.indexOf(O.charAt(M))==-1){return false}}return true}function H(R,P,Q,O){for(var M=O;M>=Q;M--){var N=R.substring(P,P+M);if(N.length<Q){return null}if(K(N)){return N}}return null}function D(h,Z){h=h+"";Z=Z+"";var g=0;var V=0;var b="";var Q="";var f="";var S,R;var N=new Date();var T=N.getYear();var e=N.getMonth()+1;var d=1;var O=N.getHours();var a=N.getMinutes();var X=N.getSeconds();var U="";while(V<Z.length){b=Z.charAt(V);Q="";while((Z.charAt(V)==b)&&(V<Z.length)){Q+=Z.charAt(V++)}if(Q=="yyyy"||Q=="yy"||Q=="y"){if(Q=="yyyy"){S=4;R=4}if(Q=="yy"){S=2;R=2}if(Q=="y"){S=2;R=4}T=H(h,g,S,R);if(T==null){return 0}g+=T.length;if(T.length==2){if(T>70){T=1900+(T-0)}else{T=2000+(T-0)}}}else{if(Q=="MMM"||Q=="NNN"){e=0;for(var Y=0;Y<E.length;Y++){var P=E[Y];if(h.substring(g,g+P.length).toLowerCase()==P.toLowerCase()){if(Q=="MMM"||(Q=="NNN"&&Y>11)){e=Y+1;if(e>12){e-=12}g+=P.length;break}}}if((e<1)||(e>12)){return 0}}else{if(Q=="EE"||Q=="E"){for(var Y=0;Y<F.length;Y++){var W=F[Y];if(h.substring(g,g+W.length).toLowerCase()==W.toLowerCase()){g+=W.length;break}}}else{if(Q=="MM"||Q=="M"){e=H(h,g,Q.length,2);if(e==null||(e<1)||(e>12)){return 0}g+=e.length}else{if(Q=="dd"||Q=="d"){d=H(h,g,Q.length,2);if(d==null||(d<1)||(d>31)){return 0}g+=d.length}else{if(Q=="hh"||Q=="h"){O=H(h,g,Q.length,2);if(O==null||(O<1)||(O>12)){return 0}g+=O.length}else{if(Q=="HH"||Q=="H"){O=H(h,g,Q.length,2);if(O==null||(O<0)||(O>23)){return 0}g+=O.length}else{if(Q=="KK"||Q=="K"){O=H(h,g,Q.length,2);if(O==null||(O<0)||(O>11)){return 0}g+=O.length}else{if(Q=="kk"||Q=="k"){O=H(h,g,Q.length,2);if(O==null||(O<1)||(O>24)){return 0}g+=O.length;O--}else{if(Q=="mm"||Q=="m"){a=H(h,g,Q.length,2);if(a==null||(a<0)||(a>59)){return 0}g+=a.length}else{if(Q=="ss"||Q=="s"){X=H(h,g,Q.length,2);if(X==null||(X<0)||(X>59)){return 0}g+=X.length}else{if(Q=="a"){if(h.substring(g,g+2).toLowerCase()=="am"){U="AM"}else{if(h.substring(g,g+2).toLowerCase()=="pm"){U="PM"}else{return 0}}g+=2}else{if(h.substring(g,g+Q.length)!=Q){return 0}else{g+=Q.length}}}}}}}}}}}}}}if(g!=h.length){return 0}if(e==2){if(((T%4==0)&&(T%100!=0))||(T%400==0)){if(d>29){return 0}}else{if(d>28){return 0}}}if((e==4)||(e==6)||(e==9)||(e==11)){if(d>30){return 0}}if(O<12&&U=="PM"){O=O-0+12}else{if(O>11&&U=="AM"){O-=12}}var M=new Date(T,e-1,d,O,a,X);return M.getTime()}function A(S){var Q=(arguments.length==2)?arguments[1]:false;generalFormats=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d");monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");var N=new Array("generalFormats",Q?"dateFirst":"monthFirst",Q?"monthFirst":"dateFirst");var R=null;for(var P=0;P<N.length;P++){var M=window[N[P]];for(var O=0;O<M.length;O++){R=D(S,M[O]);if(R!=0){return new Date(R)}}}return null}function C(O){var R=O.getMonth()+1,N=O.getDate(),Q=O.getFullYear(),M=O.getHours().toString(),P=O.getMinutes().toString(),S=O.getSeconds().toString();if(R.length==1){R="0"+R}if(M.length==1){M="0"+M}if(P.length==1){P="0"+P}if(S.length==1){S="0"+S}return R+"-"+N+"-"+Q+" "+M+":"+P}function G(M){var N;switch(M){case"JAN":N="01";break;case"FEB":N="02";break;case"MAR":N="03";break;case"APR":N="04";break;case"MAY":N="05";break;case"JUN":N="06";break;case"JUL":N="07";break;case"AUG":N="08";break;case"SEP":N="09";break;case"OCT":N="10";break;case"NOV":N="11";break;case"DEC":N="12"}return N}return{isDate:J,compareDates:B,formatDate:L,getDateFromFormat:D,parseDate:A,formatEventDt:C,formatEventMonth:G}}();function getXMLCclRequest(){var A=null;if(location.protocol.substr(0,4)=="http"){try{A=new XMLHttpRequest()}catch(B){try{A=new ActiveXObject("Msxml2.XMLHTTP")}catch(B){A=new ActiveXObject("Microsoft.XMLHTTP")}}}else{A=new XMLCclRequest()}return A}var popupWindowHandle;function getPopupWindowHandle(){return popupWindowHandle}XMLCclRequest=function(A){this.onreadystatechange=function(){return null};this.options=A||{};this.readyState=0;this.responseText="";this.status=0;this.statusText="";this.sendFlag=false;this.errorFlag=false;this.responseBody=this.responseXML=this.async=true;this.requestBinding=null;this.requestText=null;this.onerror=this.abort=this.getAllResponseHeaders=this.getResponseHeader=function(){return null};this.open=function(D,B,C){if(D.toLowerCase()!="get"&&D.toLowerCase()!="post"){this.errorFlag=true;this.status=405;this.statusText="Method not Allowed";return false}this.method=D.toUpperCase();this.url=B;this.async=C!=null?(C?true:false):true;this.requestHeaders=null;this.responseText="";this.responseBody=this.responseXML=null;this.readyState=1;this.sendFlag=false;this.requestText="";this.onreadystatechange()};this.send=function(C){if(this.readyState!=1){this.errorFlag=true;this.status=409;this.statusText="Invalid State";return false}if(this.sendFlag){this.errorFlag=true;this.status=409;this.statusText="Invalid State";return false}this.sendFlag=true;this.requestLen=C.length;this.requestText=C;var D=this.url+"-"+(new Date()).getTime()+"-"+Math.floor(Math.random()*99999);XMLCCLREQUESTOBJECTPOINTER[D]=this;var B=document.body.appendChild(document.createElement("a"));B.className+="xmlcclrequest";B.href='javascript:XMLCCLREQUEST_Send("'+D+'")';B.click()};this.setRequestHeader=function(B,C){if(this.readyState!=1){this.errorFlag=true;this.status=409;this.statusText="Invalid State";return false}if(this.sendFlag){this.errorFlag=true;this.status=409;this.statusText="Invalid State";return false}if(!C){return false}if(!this.requestHeaders){this.requestHeaders=[]}this.requestHeaders[B]=C}};XMLCCLREQUESTOBJECTPOINTER=[];function evaluate(x){return eval(x)}function CCLLINK__(A,C,B){}function CCLLINK(B,E,D){var A=E.length;if(A>2000){E=E.substring(0,2000)}var C=document.body.appendChild(document.createElement("a"));C.href='javascript:CCLLINK__("'+B+'","'+E+'",'+D+","+A+")";C.click()}function CCLNEWWINDOW(A){var B=window.open(A,"","fullscreen=no,location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,titlebar=yes,toolbar=no");B.focus()}function CCLEVENT__(A,B){}function CCLEVENT(B,C){var A=document.body.appendChild(document.createElement("a"));A.href='javascript:CCLEVENT__("'+B+'")';A.click()}function CCLNEWSESSIONWINDOW__(C,E,B,D,A){}function CCLNEWSESSIONWINDOW(D,F,C,E,A){var B=document.body.appendChild(document.createElement("a"));B.href='javascript:CCLNEWSESSIONWINDOW__("'+D+'","'+F+'","'+C+'",'+E+","+A+")";B.click();if(A==0){popupWindowHandle=window.open(D,F,C,E);if(popupWindowHandle){popupWindowHandle.focus()}}}function APPLINK(C,A,B){if(C==0){window.open("file:///"+A+" "+B)}else{window.location="file:///"+A+" "+B}}function MPAGES_EVENT__(A,B){}function MPAGES_EVENT(B,C){var A=C.length;if(!document.getElementById("__ID_CCLPostParams_32504__")){linkObj=document.body.appendChild(document.createElement("a"));linkObj.id="__ID_CCLPostParams_32504__"}if(A>2000){document.getElementById("__ID_CCLPostParams_32504__").value='"'+C+'"';C=C.substring(0,2000)}window.location.href="javascript:MPAGES_EVENT__('"+B+"','"+C+"',"+A+")"}function ArgumentURL(){this.getArgument=A;this.setArgument=K;this.removeArgument=J;this.toString=B;this.arguments=new Array();var F=",";var G="=";var L=window.location.search.replace(/%20/g," ");var H=L.indexOf("?");var I;var C=new Array();var D;if(H!=-1){I=L.substring(H+1,L.length);C=I.split(F)}for(var E=0;E<C.length;E++){D=C[E].split(G);if(D[0]!=""){var M=D[0];this.arguments[D[0]]=new Object();this.arguments[D[0]].value=D[1];this.arguments[D[0]].name=D[0]}}function B(){var O="";var N=true;for(E in this.arguments){if(N){O+="?";N=false}O+=this.arguments[E].name;O+=G;O+=this.arguments[E].value;O+=F}return O.replace(/ /g,"%20")}function A(N){if(typeof (this.arguments[N].name)!="string"){return null}else{return this.arguments[N].value}}function K(N,O){this.arguments[N]=new Object();this.arguments[N].name=N;this.arguments[N].value=O}function J(N){this.arguments[N]=null}return this}var ExternalDebugger=(function(){var D=false,C,A=false,B=" ";return({initialize:function(E){C=D;D=E;ExternalDebugger.reset();if(C){D.innerHTML=C.innerHTML}},define:function(){A=true;B=" "},reset:function(){try{if(D){D.innerHTML=" "}}catch(E){if(C){C.innerHTML=" "}}},isDefined:function(){return A},isInitialized:function(){if(D){return true}return false},loadBufferOutput:function(){D.innerHTML+=B},clearBufferOutput:function(){B=" "},sendBufferOutput:function(E){B+=E},sendOutput:function(F){try{if(D){D.innerHTML+=F}}catch(E){if(C){C.innerHTML+=F}}}})}());var UtilJsonXmlDebugWindow;var UtilJsonXml=function(prefs){var cur_dt_tm=new Date(),_w=window,_d=document,that=this,xCclPanel,messages={json_parsing_failed:"JSON Parsing Failed"},truncate_zeros=true,whtSpEnds=new RegExp("^\\s*|\\s*$","g"),whtSpMult=new RegExp("\\s\\s+","g"),error_handler=function(msg,fnc){alert(msg+" - "+fnc)},RealTypeOf=function(v){try{if(typeof (v)==="object"){if(v===null){return"null"}if(v.constructor===([]).constructor){return"array"}if(v.constructor===(new Date()).constructor){return"date"}if(v.constructor===(new RegExp()).constructor){return"regex"}return"object"}if(v!=""&&!isNaN(Number(v))){return"number"}else{return typeof (v)}}catch(e){error_handler(e.message,"RealTypeOf()")}},format_json=function(jObj,sIndent){try{if(!sIndent){sIndent=""}var sIndentStyle="&nbsp;&nbsp;",iCount=0,sDataType=RealTypeOf(jObj),sHTML,j;if(sDataType==="array"){if(jObj.length===0){return"[]"}sHTML="["}else{if(sDataType==="object"&&sDataType!==null){sHTML="{"}else{return"{}"}}iCount=0;for(j in jObj){if(RealTypeOf(jObj[j])!=="function"){if(iCount>0){sHTML+=","}if(sDataType==="array"){sHTML+=("<br>"+sIndent+sIndentStyle)}else{sHTML+=("<br>"+sIndent+sIndentStyle+'"'+j+'": ')}switch(RealTypeOf(jObj[j])){case"array":case"object":sHTML+=format_json(jObj[j],(sIndent+sIndentStyle));break;case"boolean":case"number":sHTML+=jObj[j].toString();break;case"null":sHTML+="null";break;case"string":sHTML+=('"'+jObj[j]+'"');break;case"function":break;default:sHTML+=("TYPEOF: "+typeof (jObj[j]))}iCount=iCount+1}}if(sDataType==="array"){sHTML+=("<br>"+sIndent+"]")}else{sHTML+=("<br>"+sIndent+"}")}return sHTML}catch(e){error_handler(e.message,"format_json()")}},format_xml=function(Obj,sIndent){try{var str="",sIndentStyle="&nbsp;&nbsp;",i=0,j=0;if(!sIndent){sIndent=""}for(i=0;i<Obj.childNodes.length;i++){if(Obj.childNodes[i].tagName){str+=sIndent+"&#60"+Obj.childNodes[i].tagName;if(Obj.childNodes[i].attributes){for(j=0;j<Obj.childNodes[i].attributes.length;j++){str+="&nbsp;&nbsp;"+Obj.childNodes[i].attributes[j].name+"&nbsp;=&nbsp;'"+Obj.childNodes[i].attributes[j].value+"'"}}str+="&#62;<br>"}if(!Obj.childNodes[i].nodeValue&&RealTypeOf(Obj.childNodes[i].childNodes)==="object"){str+=sIndent+format_xml(Obj.childNodes[i],sIndent+sIndentStyle)}else{if(Obj.childNodes[i].nodeValue){str+=sIndent+Obj.childNodes[i].nodeValue+"<br>"}}if(Obj.childNodes[i].tagName){str+=sIndent+"&#60/"+Obj.childNodes[i].tagName+"&#62;<br>"}}return str}catch(e){error_handler(e.message,"format_xml()")}},normalizeString=function(s){s=s.replace(whtSpMult," ");s=s.replace(whtSpEnds,"");return(s)},createDocument=function(){try{if(typeof arguments.callee.activeXString!=="string"){var versions=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument"],i,len=versions.length;for(i=0;i<len;i+=1){try{this.xml_object=new ActiveXObject(versions[i]);arguments.callee.activeXString=versions[i];return this.xml_object}catch(ex){}}}return new ActiveXObject(arguments.callee.activeXString)}catch(e){error_handler(e.message,"createDocument()")}},ReadFromFile=function(sFile){try{var ForReading=1,TriStateFalse=0,fso=new ActiveXObject("Scripting.FileSystemObject"),fileText="",path_split=[],sfile_split=sFile.split("$");if(sfile_split.length==1){if(location.href){path_split=location.href.split("?")[0];path_split=path_split.split("%20").join(" ").split("file:///").join("").split("file:").join("").split("/");path_split=path_split.slice(0,path_split.length-2);path_split=path_split.join("\\");sFile=sFile.split("/").join("\\")}sFile=(path_split+sFile)}else{sFile=sfile_split[1]}inFile=fso.OpenTextFile(sFile,ForReading,true);fileText=inFile.ReadAll();inFile.close();return fileText}catch(err){error_handler(err.message,"ReadFromFile()");return""}},init=function(){if(prefs&&RealTypeOf(prefs)=="object"){if(prefs.debug_mode_ind){that.debug_mode_ind=prefs.debug_mode_ind}if(that.debug_mode_ind==1&&!ExternalDebugger.isInitialized()&&(!prefs.disable_firebug)){ExternalDebugger.define();appendDebugJavaScriptTag("..\\js\\firebug-lite.js");console.log("Debugging mode turned on");if(Firebug){Firebug.extend(function(FBL){with(FBL){var panelName="XmlCclRequest";Firebug.XmlCclRequest=extend(Firebug.Module,{getPanel:function(){return Firebug.chrome?Firebug.chrome.getPanel(panelName):null},clear:function(){ExternalDebugger.clearBufferOutput();ExternalDebugger.reset()}});Firebug.registerModule(Firebug.XmlCclRequest);function XmlCclRequestPanel(){}XmlCclRequestPanel.prototype=extend(Firebug.Panel,{name:panelName,title:"XmlCclRequest",options:{hasToolButtons:true},create:function(){Firebug.Panel.create.apply(this,arguments);this.clearButton=new Button({caption:"Clear",title:"Clear XmlCclRequest logs",owner:Firebug.XmlCclRequest,onClick:Firebug.XmlCclRequest.clear});ExternalDebugger.initialize(this.panelNode);ExternalDebugger.loadBufferOutput()},initialize:function(){Firebug.Panel.initialize.apply(this,arguments);this.clearButton.initialize()},shutdown:function(){this.clearButton.shutdown();Firebug.Panel.shutdown.apply(this,arguments)}});Firebug.registerPanel(XmlCclRequestPanel)}})}}}};appendDebugJavaScriptTag=function(filePath){headID=document.getElementsByTagName("head")[0];newScript=document.createElement("script");newScript.type="text/javascript";newScript.id="firebug_lite_debugger";newScript.src=filePath;headID.appendChild(newScript)};this.text_debug=" ";this.debug_mode_ind=0;this.text_format="html";this.target_url="";this.json_object={};this.xml_object={};this.browserName="msie";this.target_debug="_utiljsonxml_";this.wParams="fullscreen=no,location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,titlebar=yes,toolbar=no";this.trim_float_zeros=function(ind){truncate_zeros=ind};this.setDebugMode=function(dMode){that.debug_mode_ind=dMode;init()};this.launch_debug=function(){try{if(!UtilJsonXmlDebugWindow){UtilJsonXmlDebugWindow=_w.open(this.target_url,this.target_debug,this.wParams,0);UtilJsonXmlDebugWindow.document.write("<title>DC MPages Debugger</title><div>"+this.text_debug+"</div>")}else{UtilJsonXmlDebugWindow.document.write("<div>"+this.text_debug+"</div>")}this.text_debug=" "}catch(e){try{UtilJsonXmlDebugWindow=_w.open(this.target_url,this.target_debug,this.wParams,0);UtilJsonXmlDebugWindow.document.write("<title>DC MPages Debugger</title><div>"+this.text_debug+"</div>")}catch(e2){error_handler(e.message,"launch_debug()")}}};this.parse_json=(function(){var at,ch,parseError="",escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){parseError=m},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}if(truncate_zeros==true){number=+string}else{number=string}if(isNaN(number)){error("Bad number")}else{return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}else{if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else{if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}}else{string+=ch}}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")},value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};return function(source,reviver){var result;text=source;at=0;ch=" ";parseError=result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?(function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}({"":result},"")):(parseError===""?{PARSE_JSON_ERROR:parseError}:result)}}());this.parse_xml=function(data){try{var parser;if(window.DOMParser){parser=new DOMParser();this.xml_object=parser.parseFromString(data,"text/xml")}else{this.xml_object=createDocument();this.xml_object.async=false;this.xml_object.loadXML(normalizeString(data))}return(this.xml_object)}catch(e){error_handler(e.message,"parse_xml()")}};this.append_json=function(jObj){try{cur_dt_tm=new Date();var debug_msg_hdr="<br><b>*************** JSON Formatted ( "+cur_dt_tm.toUTCString()+" ) ***************</b><br>",debug_json_string=format_json(jObj,""),debug_string=debug_msg_hdr+debug_json_string;if(this.debug_mode_ind===1){if(ExternalDebugger.isDefined()){if(ExternalDebugger.isInitialized()){ExternalDebugger.sendOutput(debug_string)}else{ExternalDebugger.sendBufferOutput(debug_string)}}else{this.text_debug+=debug_string;this.launch_debug()}}return jObj}catch(e){error_handler(e.message,"append_json()")}};this.formatted_json=function(jObj){return format_json(jObj,"")};this.append_xml=function(xObj){try{cur_dt_tm=new Date();var debug_msg_hdr="<br><b>*************** XML Formatted ( "+cur_dt_tm.toUTCString()+" ) ***************</b><br>",debug_xml_string=format_xml(xObj),debug_string=debug_msg_hdr+debug_xml_string;if(this.debug_mode_ind===1){if(ExternalDebugger.isDefined()){if(ExternalDebugger.isInitialized()){ExternalDebugger.sendOutput(debug_string)}else{ExternalDebugger.sendBufferOutput(debug_string)}}else{this.text_debug+=debug_string;this.launch_debug()}}return xObj}catch(e){error_handler(e.message,"append_xml()")}};this.append_text=function(data){try{if(this.debug_mode_ind===1){if(ExternalDebugger.isDefined()){if(ExternalDebugger.isInitialized()){ExternalDebugger.sendOutput(data)}else{ExternalDebugger.sendBufferOutput(data)}}else{this.text_debug+=data;this.launch_debug()}}}catch(e){error_handler(e.message,"append_text()")}};this.load_json_obj=function(json_text,that){try{that===undefined?this:that;return(that.append_json(jQuery.parseJSON(json_text)))}catch(e){errmsg(e.message,"load_json_obj()")}};this.load_xml_obj=function(xml_text,that){try{that===undefined?this:that;return(that.append_xml(that.parse_xml(xml_text)))}catch(e){errmsg(e.message,"load_xml_obj()")}};this.load_txt=function(text,that){try{that===undefined?this:that;return(that.append_text(text))}catch(e){errmsg(e.message,"load_txt()")}};this.json_schema_validate=function(instance,schema){return this._validate_json_schema(instance,schema,false)};this.json_schema_property=function(value,schema,property){return this._validate_json_schema(value,schema,property||"property")};this._validate_json_schema=function(instance,schema,_changing){var errors=[];function checkProp(value,schema,path,i){var l;path+=path?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function addError(message){errors.push({property:path,message:message})}if((typeof schema!="object"||schema instanceof Array)&&(path||typeof schema!="function")){if(typeof schema=="function"){if(!(value instanceof schema)){addError("is not an instance of the class/constructor "+schema.name)}}else{if(schema){addError("Invalid schema/property definition "+schema)}}return null}if(_changing&&schema.readonly){addError("is a readonly field, it can not be changed")}if(schema["extends"]){checkProp(value,schema["extends"],path,i)}function checkType(type,value){if(type){if(typeof type=="string"&&type!="any"&&(type=="null"?value!==null:typeof value!=type)&&!(value instanceof Array&&type=="array")&&!(type=="integer"&&value%1===0)){return[{property:path,message:(typeof value)+" value found, but a "+type+" is required"}]}if(type instanceof Array){var unionErrors=[];for(var j=0;j<type.length;j++){if(!(unionErrors=checkType(type[j],value)).length){break}}if(unionErrors.length){return unionErrors}}else{if(typeof type=="object"){var priorErrors=errors;errors=[];checkProp(value,type,path);var theseErrors=errors;errors=priorErrors;return theseErrors}}}return[]}if(value===undefined){if(!schema.optional){addError("is missing and it is not optional")}}else{errors=errors.concat(checkType(schema.type,value));if(schema.disallow&&!checkType(schema.disallow,value).length){addError(" disallowed value was matched")}if(value!==null){if(value instanceof Array){if(schema.items){if(schema.items instanceof Array){for(i=0,l=value.length;i<l;i++){errors.concat(checkProp(value[i],schema.items[i],path,i))}}else{for(i=0,l=value.length;i<l;i++){errors.concat(checkProp(value[i],schema.items,path,i))}}}if(schema.minItems&&value.length<schema.minItems){addError("There must be a minimum of "+schema.minItems+" in the array")}if(schema.maxItems&&value.length>schema.maxItems){addError("There must be a maximum of "+schema.maxItems+" in the array")}}else{if(schema.properties){errors.concat(checkObj(value,schema.properties,path,schema.additionalProperties))}}if(schema.pattern&&typeof value=="string"&&!value.match(schema.pattern)){addError("does not match the regex pattern "+schema.pattern)}if(schema.maxLength&&typeof value=="string"&&value.length>schema.maxLength){addError("may only be "+schema.maxLength+" characters long")}if(schema.minLength&&typeof value=="string"&&value.length<schema.minLength){addError("must be at least "+schema.minLength+" characters long")}if(typeof schema.minimum!==undefined&&typeof value==typeof schema.minimum&&schema.minimum>value){addError("must have a minimum value of "+schema.minimum)}if(typeof schema.maximum!==undefined&&typeof value==typeof schema.maximum&&schema.maximum<value){addError("must have a maximum value of "+schema.maximum)}if(schema["enum"]){var enumer=schema["enum"];l=enumer.length;var found;for(var j=0;j<l;j++){if(enumer[j]===value){found=1;break}}if(!found){addError("does not have a value in the enumeration "+enumer.join(", "))}}if(typeof schema.maxDecimal=="number"&&(value.toString().match(new RegExp("\\.[0-9]{"+(schema.maxDecimal+1)+",}")))){addError("may only have "+schema.maxDecimal+" digits of decimal places")}}}return null}function checkObj(instance,objTypeDef,path,additionalProp){if(typeof objTypeDef=="object"){if(typeof instance!="object"||instance instanceof Array){errors.push({property:path,message:"an object is required"})}for(var i in objTypeDef){if(objTypeDef.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){var value=instance[i];var propDef=objTypeDef[i];checkProp(value,propDef,path,i)}}}for(i in instance){if(instance.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&objTypeDef&&!objTypeDef[i]&&additionalProp===false){errors.push({property:path,message:(typeof value)+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"})}var requires=objTypeDef&&objTypeDef[i]&&objTypeDef[i].requires;if(requires&&!(requires in instance)){errors.push({property:path,message:"the presence of the property "+i+" requires that "+requires+" also be present"})}value=instance[i];if(objTypeDef&&typeof objTypeDef=="object"&&!(i in objTypeDef)){checkProp(value,additionalProp,path,i)}if(!_changing&&value&&value.$schema){errors=errors.concat(checkProp(value,value.$schema,path,i))}}return errors}if(schema){checkProp(instance,schema,"",_changing||"")}if(!_changing&&instance&&instance.$schema){checkProp(instance,instance.$schema,"","")}return{valid:!errors.length,errors:errors}};this.stringify_json=function(jObj){try{var sIndent="",iCount=0,sIndentStyle="",sDataType=RealTypeOf(jObj),sHTML,j;if(sDataType==="array"){if(jObj.length===0){return"[]"}sHTML="["}else{if(sDataType==="object"&&sDataType!==null){sHTML="{"}else{return"{}"}}iCount=0;for(j in jObj){if(RealTypeOf(jObj[j])!=="function"){if(iCount>0){sHTML+=","}if(sDataType==="array"){sHTML+=(""+sIndent+sIndentStyle)}else{sHTML+=(""+sIndent+sIndentStyle+'"'+j+'":')}switch(RealTypeOf(jObj[j])){case"array":case"object":sHTML+=this.stringify_json(jObj[j]);break;case"boolean":case"number":sHTML+=jObj[j].toString();break;case"null":sHTML+="null";break;case"string":sHTML+=('"'+jObj[j]+'"');break;case"function":break;default:sHTML+=("TYPEOF: "+typeof (jObj[j]))}iCount=iCount+1}}if(sDataType==="array"){sHTML+=(""+sIndent+"]")}else{sHTML+=(""+sIndent+"}")}return sHTML}catch(e){error_handler(e.message,"stringify_json()")}};this.ajax_request=function(spec){try{var requestAsync,load_json_obj_fnc=this.load_json_obj,load_xml_obj_fnc=this.load_xml_obj,append_text_fnc=this.load_txt,json_response_obj,that=this,start_timer=new Date(),elapsed_time,ready_state_msg,status_msg,response_spec,parse_target,parse_target_type,debug_string,send_response_ind,parse_target_text,display_response_text;if(spec.loadingDialog){if(spec.loadingDialog.targetDOM&&spec.loadingDialog.content){spec.loadingDialog.targetDOM.innerHTML=spec.loadingDialog.content}}if(spec.request.target.toUpperCase().indexOf(".JSON")==-1&&spec.request.target.toUpperCase().indexOf(".XML")==-1&&spec.request.target.toUpperCase().indexOf(".TXT")==-1){if(spec.request.type==="XMLHTTPREQUEST"){if(window.XMLHttpRequest){requestAsync=new XMLHttpRequest()}else{if(window.ActiveXObject){requestAsync=new ActiveXObject("MSXML2.XMLHTTP.3.0")}}}else{requestAsync=getXMLCclRequest()}requestAsync.onreadystatechange=function(){if(requestAsync.readyState===4&&requestAsync.status===200){if(spec.loadingDialog){if(spec.loadingDialog.targetDOM){spec.loadingDialog.targetDOM.innerHTML=""}}if(requestAsync.responseText>" "){try{elapsed_time=new Date()-start_timer;debug_string=" <br><b>Type: </b>"+spec.request.type+"<br>";debug_string+=" <b>Target: </b>"+spec.request.target+"<br>";debug_string+=" <b>Parameters: </b>"+spec.request.parameters+"<br>";debug_string+=" <b>Elapsed Time: </b>"+elapsed_time+" milliseconds -> "+(elapsed_time/1000)+" seconds";append_text_fnc(debug_string,that);if(spec.response.type.toUpperCase()==="JSON"){json_response_obj=load_json_obj_fnc(requestAsync.responseText,that);if(!json_response_obj||(json_response_obj.PARSE_JSON_ERROR&&json_response_obj.PARSE_JSON_ERROR>" ")){send_response_ind=false;if(spec.loadingDialog&&spec.loadingDialog.targetDOM){spec.loadingDialog.targetDOM.innerHTML="ERROR: "+messages.json_parsing_failed;spec.loadingDialog.targetDOM.style.cursor="hand";spec.loadingDialog.targetDOM.title="Click for more details.";if(UtilPopup&&(RealTypeOf(UtilPopup)=="object"||RealTypeOf(UtilPopup)=="function")){display_response_text=requestAsync.responseText.split(">").join("&gt;").split("<").join("&lt;");UtilPopup.attachModalPopup({elementDOM:spec.loadingDialog.targetDOM,event:"click",width:"500px",defaultpos:["30%","20%"],exit:"x",header:"Invalid JSON from "+spec.request.target,content:"<div style='height:500px;width:499px;overflow:auto;'><b>Parameters</b>: "+spec.request.parameters+"<br/><br/><b>Response Text</b>: "+display_response_text+"</div>"})}else{spec.loadingDialog.targetDOM.onclick=function(event){alert(spec.request.target+"\n"+spec.request.parameters+"\n"+requestAsync.responseText)}}}else{alert(messages.json_parsing_failed+" \n\n"+spec.request.target+"\n"+spec.request.parameters)}}else{send_response_ind=true;if(spec.response.parameters!==undefined&&RealTypeOf(spec.response.parameters)!==null){response_spec={responseText:requestAsync.responseText,response:json_response_obj,parameters:spec.response.parameters,elapsed:elapsed_time}}else{response_spec={responseText:requestAsync.responseText,response:json_response_obj,elapsed:elapsed_time}}}}else{send_response_ind=true;if(spec.response.parameters!==undefined&&RealTypeOf(spec.response.parameters)!==null){response_spec={responseText:requestAsync.responseText,response:load_xml_obj_fnc(requestAsync.responseText,that),parameters:spec.response.parameters,elapsed:elapsed_time}}else{response_spec={responseText:requestAsync.responseText,response:load_xml_obj_fnc(requestAsync.responseText,that),elapsed:elapsed_time}}}if(send_response_ind){spec.response.target(response_spec)}}catch(e){error_handler(e.message,"ajax_request.requestAsync.responseText")}}}else{try{switch(requestAsync.readyState){case 0:ready_state_msg="0 - Uninitalized";break;case 1:ready_state_msg="1 - Loading";break;case 2:ready_state_msg="2 - Loaded";break;case 3:ready_state_msg="3 - Interactive";break;case 4:ready_state_msg="4 - Completed";break}switch(requestAsync.status){case 200:status_msg="200 - Success";break;case 405:status_msg="405 - Method Not Allowed";break;case 409:status_msg="409 - Invalid State";break;case 492:status_msg="492 - Non-Fatal Error";break;case 493:status_msg="493 - Memory Error";break;case 500:status_msg="500 - Internal Server Exception";break}if(requestAsync.readyState==4&&requestAsync.readyState&&requestAsync.status){ready_state_msg="ajax_request failed on: \n\n Request Target: "+spec.request.target+"\n Request Parameters: "+spec.request.parameters+"\n\n with requestAsync.readyState -> "+ready_state_msg;status_msg=" requestAsync.status -> "+status_msg;elapsed_time=new Date()-start_timer;debug_string=" <br><b>Type: </b>"+spec.request.type+"<br>";debug_string+=" <b>Target: </b>"+spec.request.target+"<br>";debug_string+=" <b>Parameters: </b>"+spec.request.parameters+"<br>";debug_string+=" <b>Elapsed Time: </b>"+elapsed_time+" milliseconds -> "+(elapsed_time/1000)+" seconds";debug_string+=" <b>requestAsync.readyState </b>"+ready_state_msg;debug_string+=" <b>requestAsync.status </b>"+status_msg;append_text_fnc(debug_string,that);error_handler(ready_state_msg,status_msg)}}catch(e3){}}};if(spec.request.type==="XMLHTTPREQUEST"){requestAsync.open("GET",spec.request.target);if(!spec.request.parameters||spec.request.parameters===null||spec.request.parameters===""){requestAsync.setRequestHeader("Access-Control-Allow-Origin","*");requestAsync.send(null)}else{requestAsync.setRequestHeader("Content-type","application/x-www-form-urlencoded");requestAsync.setRequestHeader("Content-length",spec.request.parameters.length);requestAsync.setRequestHeader("Connection","close");requestAsync.send(spec.request.parameters)}}else{if(location.protocol.substr(0,4)==="http"){var url=location.protocol+"//"+location.host+"/discern/mpages/reports/"+spec.request.target+"?parameters="+spec.request.parameters;requestAsync.open("GET",url);requestAsync.send(null)}else{requestAsync.open("GET",spec.request.target);requestAsync.send(spec.request.parameters)}}}else{parse_target=spec.request.target.split(".");parse_target_type=parse_target[parse_target.length-1].toUpperCase();parse_target_text=ReadFromFile(spec.request.target);if(spec.loadingDialog){if(spec.loadingDialog.targetDOM){spec.loadingDialog.targetDOM.innerHTML=""}}elapsed_time=new Date()-start_timer;debug_string=" <br><b>Type: </b>"+spec.request.type+"<br>";debug_string+=" <b>Target: </b>"+spec.request.target+"<br>";debug_string+=" <b>Parameters: </b>"+spec.request.parameters+"<br>";debug_string+=" <b>Elapsed Time: </b>"+elapsed_time+" milliseconds -> "+(elapsed_time/1000)+" seconds";append_text_fnc(debug_string,that);switch(parse_target_type){case"JSON":if(spec.response.parameters!==undefined&&RealTypeOf(spec.response.parameters)!==null){response_spec={response:load_json_obj_fnc(parse_target_text,that),parameters:spec.response.parameters,elapsed:elapsed_time}}else{response_spec={response:load_json_obj_fnc(parse_target_text,that),elapsed:elapsed_time}}break;case"XML":if(spec.response.parameters!==undefined&&RealTypeOf(spec.response.parameters)!==null){response_spec={response:load_xml_obj_fnc(parse_target_text,that),parameters:spec.response.parameters,elapsed:elapsed_time}}else{response_spec={response:load_xml_obj_fnc(parse_target_text,that),elapsed:elapsed_time}}break;default:if(spec.response.parameters!==undefined&&RealTypeOf(spec.response.parameters)!==null){response_spec={response:parse_target_text,parameters:spec.response.parameters,elapsed:elapsed_time}}else{response_spec={response:parse_target_text,elapsed:elapsed_time}}break}spec.response.target(response_spec)}}catch(e){error_handler(e.message,"ajax_request()")}};init()};var AjaxHandler=new UtilJsonXml();var WindowStorage={cache:null,get:function(key){if(window.name.length>0){this.cache=eval("("+window.name+")")}else{this.cache={}}return unescape(this.cache[key])},encodeString:function(A){return encodeURIComponent(A).replace(/'/g,"'")},set:function(B,D){this.get();if(typeof B!="undefined"&&typeof D!="undefined"){this.cache[B]=D}var A="{";var E=0;for(var C in this.cache){if(E>0){A+=", "}if(C===B){A+="'"+this.encodeString(C)+"':'"+this.encodeString(this.cache[C])+"'"}else{A+="'"+C+"':'"+this.cache[C]+"'"}E++}A+="}";window.name=A},del:function(A){this.get();delete this.cache[A]},clear:function(){window.name=""}};var TemplateLoader=(function(){var C=[],E=0,B;function A(J,I,K){E++;C[C.length]=({path:J,callback:K,parent:I})}function H(K,J,L){var I;$.ajax({url:K,dataType:"text",async:false,success:function(M){$(M).appendTo(J);E--;if(L){L(M)}if(E<=0&&B!=null){E=0;B()}},error:function(M){throw"Template path of "+K+" not found.";E--},isLocal:true})}function G(K){B=K;for(var J=0,I=C.length;J<I;J++){H(C[J].path,C[J].parent,C[J].callback)}C=[]}function F(L,M,K){var J,I=false;H(L,K,function(){J=Handlebars.compile($("#"+M).html());I=true});return J}function D(L,M){var J,K,I=false;$.ajax({url:L,dataType:"text",async:false,success:function(N){K=Handlebars.compile(N);I=true;if(M){M(K)}},error:function(N){throw"Template path of "+L+" not found.";return Handlebars.compile("")},isLocal:true});return K}return{stage:A,load:H,loadAll:G,compile:F,compileFromFile:D}})();
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){function D(E,J){var I=E.nodeName.toLowerCase();if("area"===I){var H=E.parentNode,G=H.name,F;return !E.href||!G||H.nodeName.toLowerCase()!=="map"?!1:(F=B("img[usemap=#"+G+"]")[0],!!F&&C(F))}return(/input|select|textarea|button|object/.test(I)?!E.disabled:"a"==I?E.href||J:J)&&C(E)}function C(E){return !B(E).parents().andSelf().filter(function(){return B.curCSS(this,"visibility")==="hidden"||B.expr.filters.hidden(this)}).length}B.ui=B.ui||{};if(B.ui.version){return }B.extend(B.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),B.fn.extend({propAttr:B.fn.prop||B.fn.attr,_focus:B.fn.focus,focus:function(E,F){return typeof E=="number"?this.each(function(){var G=this;setTimeout(function(){B(G).focus(),F&&F.call(G)},E)}):this._focus.apply(this,arguments)},scrollParent:function(){var E;return B.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?E=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(B.curCSS(this,"position",1))&&/(auto|scroll)/.test(B.curCSS(this,"overflow",1)+B.curCSS(this,"overflow-y",1)+B.curCSS(this,"overflow-x",1))}).eq(0):E=this.parents().filter(function(){return/(auto|scroll)/.test(B.curCSS(this,"overflow",1)+B.curCSS(this,"overflow-y",1)+B.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!E.length?B(document):E},zIndex:function(H){if(H!==A){return this.css("zIndex",H)}if(this.length){var G=B(this[0]),F,E;while(G.length&&G[0]!==document){F=G.css("position");if(F==="absolute"||F==="relative"||F==="fixed"){E=parseInt(G.css("zIndex"),10);if(!isNaN(E)&&E!==0){return E}}G=G.parent()}}return 0},disableSelection:function(){return this.bind((B.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(E){E.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),B.each(["Width","Height"],function(J,I){function E(K,N,M,L){return B.each(H,function(){N-=parseFloat(B.curCSS(K,"padding"+this,!0))||0,M&&(N-=parseFloat(B.curCSS(K,"border"+this+"Width",!0))||0),L&&(N-=parseFloat(B.curCSS(K,"margin"+this,!0))||0)}),N}var H=I==="Width"?["Left","Right"]:["Top","Bottom"],G=I.toLowerCase(),F={innerWidth:B.fn.innerWidth,innerHeight:B.fn.innerHeight,outerWidth:B.fn.outerWidth,outerHeight:B.fn.outerHeight};B.fn["inner"+I]=function(K){return K===A?F["inner"+I].call(this):this.each(function(){B(this).css(G,E(this,K)+"px")})},B.fn["outer"+I]=function(K,L){return typeof K!="number"?F["outer"+I].call(this,K):this.each(function(){B(this).css(G,E(this,K,!0,L)+"px")})}}),B.extend(B.expr[":"],{data:function(E,G,F){return !!B.data(E,F[3])},focusable:function(E){return D(E,!isNaN(B.attr(E,"tabindex")))},tabbable:function(E){var G=B.attr(E,"tabindex"),F=isNaN(G);return(F||G>=0)&&D(E,!F)}}),B(function(){var E=document.body,F=E.appendChild(F=document.createElement("div"));F.offsetHeight,B.extend(F.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),B.support.minHeight=F.offsetHeight===100,B.support.selectstart="onselectstart" in F,E.removeChild(F).style.display="none"}),B.extend(B.ui,{plugin:{add:function(E,I,H){var G=B.ui[E].prototype;for(var F in H){G.plugins[F]=G.plugins[F]||[],G.plugins[F].push([I,H[F]])}},call:function(F,E,I){var H=F.plugins[E];if(!H||!F.element[0].parentNode){return }for(var G=0;G<H.length;G++){F.options[H[G][0]]&&H[G][1].apply(F.element,I)}}},contains:function(F,E){return document.compareDocumentPosition?F.compareDocumentPosition(E)&16:F!==E&&F.contains(E)},hasScroll:function(E,H){if(B(E).css("overflow")==="hidden"){return !1}var G=H&&H==="left"?"scrollLeft":"scrollTop",F=!1;return E[G]>0?!0:(E[G]=1,F=E[G]>0,E[G]=0,F)},isOverAxis:function(F,E,G){return F>E&&F<E+G},isOver:function(E,J,I,H,G,F){return B.ui.isOverAxis(E,I,G)&&B.ui.isOverAxis(J,H,F)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){if(B.cleanData){var D=B.cleanData;B.cleanData=function(E){for(var H=0,G;(G=E[H])!=null;H++){try{B(G).triggerHandler("remove")}catch(F){}}D(E)}}else{var C=B.fn.remove;B.fn.remove=function(E,F){return this.each(function(){return F||(!E||B.filter(E,[this]).length)&&B("*",this).add([this]).each(function(){try{B(this).triggerHandler("remove")}catch(G){}}),C.call(B(this),E,F)})}}B.widget=function(E,J,I){var H=E.split(".")[0],G;E=E.split(".")[1],G=H+"-"+E,I||(I=J,J=B.Widget),B.expr[":"][G]=function(K){return !!B.data(K,E)},B[H]=B[H]||{},B[H][E]=function(L,K){arguments.length&&this._createWidget(L,K)};var F=new J;F.options=B.extend(!0,{},F.options),B[H][E].prototype=B.extend(!0,F,{namespace:H,widgetName:E,widgetEventPrefix:B[H][E].prototype.widgetEventPrefix||E,widgetBaseClass:G},I),B.widget.bridge(E,B[H][E])},B.widget.bridge=function(F,E){B.fn[F]=function(J){var I=typeof J=="string",H=Array.prototype.slice.call(arguments,1),G=this;return J=!I&&H.length?B.extend.apply(null,[!0,J].concat(H)):J,I&&J.charAt(0)==="_"?G:(I?this.each(function(){var L=B.data(this,F),K=L&&B.isFunction(L[J])?L[J].apply(L,H):L;if(K!==L&&K!==A){return G=K,!1}}):this.each(function(){var K=B.data(this,F);K?K.option(J||{})._init():B.data(this,F,new E(J,this))}),G)}},B.Widget=function(F,E){arguments.length&&this._createWidget(F,E)},B.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(E,G){B.data(G,this.widgetName,this),this.element=B(G),this.options=B.extend(!0,{},this.options,this._getCreateOptions(),E);var F=this;this.element.bind("remove."+this.widgetName,function(){F.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return B.metadata&&B.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(G,F){var E=G;if(arguments.length===0){return B.extend({},this.options)}if(typeof G=="string"){if(F===A){return this.options[G]}E={},E[G]=F}return this._setOptions(E),this},_setOptions:function(E){var F=this;return B.each(E,function(H,G){F._setOption(H,G)}),this},_setOption:function(F,E){return this.options[F]=E,F==="disabled"&&this.widget()[E?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",E),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(E,J,I){var H,G,F=this.options[E];I=I||{},J=B.Event(J),J.type=(E===this.widgetEventPrefix?E:this.widgetEventPrefix+E).toLowerCase(),J.target=this.element[0],G=J.originalEvent;if(G){for(H in G){H in J||(J[H]=G[H])}}return this.element.trigger(J,I),!(B.isFunction(F)&&F.call(this.element[0],J,I)===!1||J.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){function D(){return ++F}function C(){return ++E}var F=0,E=0;B.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(H,G){if(H=="selected"){if(this.options.collapsible&&G==this.options.selected){return }this.select(G)}else{this.options[H]=G,this._tabify()}},_tabId:function(G){return G.title&&G.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+D()},_sanitizeSelector:function(G){return G.replace(/:/g,"\\:")},_cookie:function(){var G=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+C());return B.cookie.apply(null,[G].concat(B.makeArray(arguments)))},_ui:function(H,G){return{tab:H,panel:G,index:this.anchors.index(H)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var G=B(this);G.html(G.data("label.tabs")).removeData("label.tabs")})},_tabify:function(S){function I(T,U){T.css("display",""),!B.support.opacity&&U.opacity&&T[0].style.removeAttribute("filter")}var R=this,Q=this.options,P=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=B(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return B("a",this)[0]}),this.panels=B([]),this.anchors.each(function(T,Z){var Y=B(Z).attr("href"),X=Y.split("#")[0],W;X&&(X===location.toString().split("#")[0]||(W=B("base")[0])&&X===W.href)&&(Y=Z.hash,Z.href=Y);if(P.test(Y)){R.panels=R.panels.add(R.element.find(R._sanitizeSelector(Y)))}else{if(Y&&Y!=="#"){B.data(Z,"href.tabs",Y),B.data(Z,"load.tabs",Y.replace(/#.*$/,""));var V=R._tabId(Z);Z.href="#"+V;var U=R.element.find("#"+V);U.length||(U=B(Q.panelTemplate).attr("id",V).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(R.panels[T-1]||R.list),U.data("destroy.tabs",!0)),R.panels=R.panels.add(U)}else{Q.disabled.push(T)}}}),S?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),Q.selected===A?(location.hash&&this.anchors.each(function(U,T){if(T.hash==location.hash){return Q.selected=U,!1}}),typeof Q.selected!="number"&&Q.cookie&&(Q.selected=parseInt(R._cookie(),10)),typeof Q.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(Q.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),Q.selected=Q.selected||(this.lis.length?0:-1)):Q.selected===null&&(Q.selected=-1),Q.selected=Q.selected>=0&&this.anchors[Q.selected]||Q.selected<0?Q.selected:0,Q.disabled=B.unique(Q.disabled.concat(B.map(this.lis.filter(".ui-state-disabled"),function(U,T){return R.lis.index(U)}))).sort(),B.inArray(Q.selected,Q.disabled)!=-1&&Q.disabled.splice(B.inArray(Q.selected,Q.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),Q.selected>=0&&this.anchors.length&&(R.element.find(R._sanitizeSelector(R.anchors[Q.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(Q.selected).addClass("ui-tabs-selected ui-state-active"),R.element.queue("tabs",function(){R._trigger("show",null,R._ui(R.anchors[Q.selected],R.element.find(R._sanitizeSelector(R.anchors[Q.selected].hash))[0]))}),this.load(Q.selected)),B(window).bind("unload",function(){R.lis.add(R.anchors).unbind(".tabs"),R.lis=R.anchors=R.panels=null})):Q.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[Q.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),Q.cookie&&this._cookie(Q.selected,Q.cookie);for(var O=0,N;N=this.lis[O];O++){B(N)[B.inArray(O,Q.disabled)!=-1&&!B(N).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}Q.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(Q.event!=="mouseover"){var M=function(U,T){T.is(":not(.ui-state-disabled)")&&T.addClass("ui-state-"+U)},L=function(U,T){T.removeClass("ui-state-"+U)};this.lis.bind("mouseover.tabs",function(){M("hover",B(this))}),this.lis.bind("mouseout.tabs",function(){L("hover",B(this))}),this.anchors.bind("focus.tabs",function(){M("focus",B(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){L("focus",B(this).closest("li"))})}var K,J;Q.fx&&(B.isArray(Q.fx)?(K=Q.fx[0],J=Q.fx[1]):K=J=Q.fx);var H=J?function(T,U){B(T).closest("li").addClass("ui-tabs-selected ui-state-active"),U.hide().removeClass("ui-tabs-hide").animate(J,J.duration||"normal",function(){I(U,J),R._trigger("show",null,R._ui(T,U[0]))})}:function(T,U){B(T).closest("li").addClass("ui-tabs-selected ui-state-active"),U.removeClass("ui-tabs-hide"),R._trigger("show",null,R._ui(T,U[0]))},G=K?function(U,T){T.animate(K,K.duration||"normal",function(){R.lis.removeClass("ui-tabs-selected ui-state-active"),T.addClass("ui-tabs-hide"),I(T,K),R.element.dequeue("tabs")})}:function(U,T,V){R.lis.removeClass("ui-tabs-selected ui-state-active"),T.addClass("ui-tabs-hide"),R.element.dequeue("tabs")};this.anchors.bind(Q.event+".tabs",function(){var T=this,W=B(T).closest("li"),V=R.panels.filter(":not(.ui-tabs-hide)"),U=R.element.find(R._sanitizeSelector(T.hash));if(W.hasClass("ui-tabs-selected")&&!Q.collapsible||W.hasClass("ui-state-disabled")||W.hasClass("ui-state-processing")||R.panels.filter(":animated").length||R._trigger("select",null,R._ui(this,U[0]))===!1){return this.blur(),!1}Q.selected=R.anchors.index(this),R.abort();if(Q.collapsible){if(W.hasClass("ui-tabs-selected")){return Q.selected=-1,Q.cookie&&R._cookie(Q.selected,Q.cookie),R.element.queue("tabs",function(){G(T,V)}).dequeue("tabs"),this.blur(),!1}if(!V.length){return Q.cookie&&R._cookie(Q.selected,Q.cookie),R.element.queue("tabs",function(){H(T,U)}),R.load(R.anchors.index(this)),this.blur(),!1}}Q.cookie&&R._cookie(Q.selected,Q.cookie);if(U.length){V.length&&R.element.queue("tabs",function(){G(T,V)}),R.element.queue("tabs",function(){H(T,U)}),R.load(R.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}B.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(G){return typeof G=="string"&&(G=this.anchors.index(this.anchors.filter("[href$='"+G+"']"))),G},destroy:function(){var G=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var H=B.data(this,"href.tabs");H&&(this.href=H);var I=B(this).unbind(".tabs");B.each(["href","load","cache"],function(K,J){I.removeData(J+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){B.data(this,"destroy.tabs")?B(this).remove():B(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),G.cookie&&this._cookie(null,G.cookie),this},add:function(N,M,L){L===A&&(L=this.anchors.length);var K=this,J=this.options,I=B(J.tabTemplate.replace(/#\{href\}/g,N).replace(/#\{label\}/g,M)),H=N.indexOf("#")?this._tabId(B("a",I)[0]):N.replace("#","");I.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var G=K.element.find("#"+H);return G.length||(G=B(J.panelTemplate).attr("id",H).data("destroy.tabs",!0)),G.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),L>=this.lis.length?(I.appendTo(this.list),G.appendTo(this.list[0].parentNode)):(I.insertBefore(this.lis[L]),G.insertBefore(this.panels[L])),J.disabled=B.map(J.disabled,function(P,O){return P>=L?++P:P}),this._tabify(),this.anchors.length==1&&(J.selected=0,I.addClass("ui-tabs-selected ui-state-active"),G.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){K._trigger("show",null,K._ui(K.anchors[0],K.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[L],this.panels[L])),this},remove:function(G){G=this._getIndex(G);var J=this.options,I=this.lis.eq(G).remove(),H=this.panels.eq(G).remove();return I.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(G+(G+1<this.anchors.length?1:-1)),J.disabled=B.map(B.grep(J.disabled,function(K,L){return K!=G}),function(K,L){return K>=G?--K:K}),this._tabify(),this._trigger("remove",null,this._ui(I.find("a")[0],H[0])),this},enable:function(G){G=this._getIndex(G);var H=this.options;if(B.inArray(G,H.disabled)==-1){return }return this.lis.eq(G).removeClass("ui-state-disabled"),H.disabled=B.grep(H.disabled,function(I,J){return I!=G}),this._trigger("enable",null,this._ui(this.anchors[G],this.panels[G])),this},disable:function(H){H=this._getIndex(H);var G=this,I=this.options;return H!=I.selected&&(this.lis.eq(H).addClass("ui-state-disabled"),I.disabled.push(H),I.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[H],this.panels[H]))),this},select:function(G){G=this._getIndex(G);if(G==-1){if(this.options.collapsible&&this.options.selected!=-1){G=this.options.selected}else{return this}}return this.anchors.eq(G).trigger(this.options.event+".tabs"),this},load:function(G){G=this._getIndex(G);var L=this,K=this.options,J=this.anchors.eq(G)[0],I=B.data(J,"load.tabs");this.abort();if(!I||this.element.queue("tabs").length!==0&&B.data(J,"cache.tabs")){this.element.dequeue("tabs");return }this.lis.eq(G).addClass("ui-state-processing");if(K.spinner){var H=B("span",J);H.data("label.tabs",H.html()).html(K.spinner)}return this.xhr=B.ajax(B.extend({},K.ajaxOptions,{url:I,success:function(O,N){L.element.find(L._sanitizeSelector(J.hash)).html(O),L._cleanup(),K.cache&&B.data(J,"cache.tabs",!0),L._trigger("load",null,L._ui(L.anchors[G],L.panels[G]));try{K.ajaxOptions.success(O,N)}catch(M){}},error:function(M,O,N){L._cleanup(),L._trigger("load",null,L._ui(L.anchors[G],L.panels[G]));try{K.ajaxOptions.error(M,O,G,J)}catch(N){}}})),L.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(H,G){return this.anchors.eq(H).removeData("cache.tabs").data("load.tabs",G),this},length:function(){return this.anchors.length}}),B.extend(B.ui.tabs,{version:"1.8.21"}),B.extend(B.ui.tabs.prototype,{rotation:null,rotate:function(H,G){var L=this,K=this.options,J=L._rotate||(L._rotate=function(M){clearTimeout(L.rotation),L.rotation=setTimeout(function(){var N=K.selected;L.select(++N<L.anchors.length?N:0)},H),M&&M.stopPropagation()}),I=L._unrotate||(L._unrotate=G?function(M){J()}:function(M){M.clientX&&L.rotate(null)});return H?(this.element.bind("tabsshow",J),this.anchors.bind(K.event+".tabs",I),J()):(clearTimeout(L.rotation),this.element.unbind("tabsshow",J),this.anchors.unbind(K.event+".tabs",I),delete this._rotate,delete this._unrotate),this}})})(jQuery);var Criterion={position_cd:0,personnel_id:0,image_size:3,debug_mode_ind:0,unloadParams:function(){try{var A=window.location.search.replace(/%20/g," ").split("?").join("").split(",");if(A[1]){this.position_cd=A[1];this.personnel_id=parseInt(A[1])}if(A[2]){this.image_size=parseInt(A[2])}if(A[3]){this.debug_mode_ind=parseInt(A[3])}}catch(B){errmsg(B.message,"unloadParams()")}}};var PatientImageRetriever=(function(){var F={};function C(){if(_.isEmpty(F)){F=new UtilJsonXml({debug_mode_ind:0,disable_firebug:true})}}function B(H,G){var I="MINE,"+H.get("person_id")+","+G+",1";C();F.ajax_request({request:{type:"XMLCCLREQUEST",target:"dc_mp_get_person_thumbnail",parameters:I},response:{type:"JSON",target:A,parameters:[H]}})}function E(G){F=G}function A(G){var H=G.response.PREPLY,K=G.parameters[0];if(D(H)){K.set({image_data:"data:image/jpeg;base64,"+H.IMAGEDATA})}else{var J="";var I=Criterion.image_size?Criterion.image_size:3;switch(I){case 1:J="../img/defaultphoto16.png";break;case 2:J="../img/defaultphoto32.png";break;case 3:J="../img/defaultphoto64.png";break;case 4:J="../img/defaultphoto128.png";break;case 5:J="../img/defaultphoto200.png";break}K.set({image_data:J})}}function D(G){return G.STATUS_DATA.STATUS.toUpperCase()==="S"?true:false}return{setPatientImageThumbnailValue:B,setJsonHandler:E}})();var PostToChartModel=Backbone.Model.extend({activitiesCharted:{draftActivities:false,inErrorActivities:false},initialize:function(){_.bindAll(this);if(!this.get("json_handler")){var A=new UtilJsonXml({debug_mode_ind:0,disable_firebug:true});this.set({json_handler:A})}this.json_handler=this.get("json_handler")},chartAllActivities:function(D){_g("json-loader-message").innerHTML="Charting...";var C=this.getDraftActivities(D);var B=this.getMPREQfromDraftActivityArray(C);this.postDraftActivities(B);var E=this.getInErrorActivities(D);var A=this.getMPREQfromInErrorActivityArray(E);this.postInErrorActivities(A)},getDraftActivities:function(A){return _.select(A,function(B){return B.get("STATUS").toUpperCase()==="DRAFT"})},getInErrorActivities:function(A){return _.select(A,function(B){return B.get("STATUS").toUpperCase()==="INERROR"})},postDraftActivities:function(A){var C="DC_MP_POST_BHV_HLTH",D="^MINE^,^{'MPREQ':"+A+"}^";var B=_g("json-loader-message");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:C,parameters:D},response:{type:"JSON",target:this.receiveReply,parameters:["t",1]}})},postInErrorActivities:function(A){var C="DC_MP_IE_BHV_HLTH",D="^MINE^,^{'MPREQ':"+A+"}^";var B=_g("json-loader-message");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:C,parameters:D},response:{type:"JSON",target:this.receiveReply,parameters:["t",1]}})},getMPREQfromDraftActivityArray:function(D){var C={LIST:[]};for(var B=0,A=D.length;B<A;B++){_.each(D[B].get("LIST"),function(E){C.LIST[C.LIST.length]={INPUTPERSONID:D[B].patient.get("person_id").toFixed(1),INPUTPROVIDERID:Criterion.personnel_id.toFixed(1),INPUTENCOUNTERID:D[B].patient.get("encntr_id").toFixed(1),INPUTEVENTCD:E.EVENT_CD.toFixed(1),ENDDTTM:D[B].get("EVENT_DT").toString(),INPUTNOMENCLATUREID:E.NOMID,INPUTFREETEXT:E.FREETEXT,INPUTPPR:E.INPUTPRT.toFixed(1)}})}return JSON.stringify(C)},getMPREQfromInErrorActivityArray:function(D){var C={LIST:[]};for(var B=0,A=D.length;B<A;B++){_.each(D[B].get("LIST"),function(E){C.LIST[C.LIST.length]={INPUTPERSONID:D[B].patient.get("person_id").toFixed(1),INPUTPROVIDERID:Criterion.personnel_id.toFixed(1),INPUTENCOUNTERID:D[B].patient.get("encntr_id").toFixed(1),INPUTEVENTCD:E.EVENT_CD.toFixed(1),INPUTEVENTID:E.EVENTID.toFixed(1),INPUTPPR:E.INPUTPRT.toFixed(1)}})}return AjaxHandler.stringify_json(C)},receiveReply:function(A){if(A.response.IEREPLY){this.activitiesCharted.inErrorActivities=true;var B=A.response.IEREPLY.STATUS_DATA}else{if(A.response.POSTREPLY){this.activitiesCharted.draftActivities=true;var B=A.response.POSTREPLY.STATUS_DATA}}if(this.areAllActivitiesCharted()){this.resetActivitiesChartedIndicators();this.trigger("posted")}},areAllActivitiesCharted:function(){return _.all(this.activitiesCharted,function(B,A){return B})},resetActivitiesChartedIndicators:function(){this.activitiesCharted.draftActivities=false;this.activitiesCharted.inErrorActivities=false}});var BhInfoModel=Backbone.Model.extend({defaults:{BHINFO:{}},initialize:function(){_.bindAll(this)},retrieve:function(A){var B={PRSNLID:A.PRSNLID,PTLISTID:A.LISTID,PTLISTTYPE:A.LISTTYPECD,PTLISTLOCCD:A.DEFAULTLOCCD,fuQual:A.NULIST};var E=JSON.stringify(B);var D="^MINE^,^{'MPREQ':"+E+"}^";var C=_g("json-loader-message");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:"dc_mp_behavioral_hlth",parameters:D},loadingDialog:{content:"Loading...<img src='../img/ajax-loader.gif'/>",targetDOM:C},response:{type:"JSON",target:this.receiveCCLresponse,parameters:[this]}})},receiveCCLresponse:function(A){this.set({BHINFO:A.response.BHREPLY},{silent:true});this.trigger("change")},getActivitiesForLocation:function(E){var A=(this.get("BHINFO")).LOCNOMEN,C=[],F=[];if(_.isEmpty(this.get("BHINFO"))){return[]}for(var D=0,B=A.length;D<B;D++){if(E==A[D].LOCCD){C=A[D].RESULTS}else{if(A[D].NAME==="DEFAULT"){F=A[D].RESULTS}}}return C.length?C:F}});var PtInfoModel=Backbone.Model.extend({defaults:{PTINFO:{}},initialize:function(){_.bindAll(this)},retrieve:function(A){var B={PRSNLID:A.PRSNLID,PTLISTID:A.LISTID,PTLISTTYPE:A.LISTTYPECD,PTLISTLOCCD:A.DEFAULTLOCCD,fuQual:A.NULIST};var E=JSON.stringify(B);var D="^MINE^,^{'MPREQ':"+E+"}^";var C=_g("json-loader-message");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:"dc_mp_get_ptpop",parameters:D},loadingDialog:{content:"Loading...<img src='../img/ajax-loader.gif'/>",targetDOM:C},response:{type:"JSON",target:this.receiveCCLresponse,parameters:[this]}})},receiveCCLresponse:function(A){this.set({PTINFO:A.response.PTREPLY},{silent:true});this.trigger("change")}});var PatientModel=Backbone.Model.extend({defaults:{location_activities:[],person_id:0,encntr_id:0,encntr_type_cd:0,name:"",fin:0,mrn:0,age:0,birth_dt:0,birth_dt_js:0,gender:"",org_id:0,facility:"",facility_cd:0,nurse_unit:"",nurse_unit_cd:0,room:"",bed:"",length_of_stay:"",admit_dt:"",admit_dt_js:"",observation_level:"",fall_risk:"",suicide_risk:"",suicide_risk_seq:0,suicide_risk_disp:"",image_data:"",showimage_ind:0,offunitevent:{cecd:0,nomList:[]}},initialize:function(){_.bindAll(this);this.activities=new ActivityCollection;this.bind("change:bhinfo",this.getPatientImage);this.userPrefModel=new UserPrefModel},setPtInfo:function(A){this.set({person_id:A.PT_ID,encntr_id:A.ENCNTR_ID,encntr_type_cd:A.ENCNTR_TYPECD,name:A.NAME,fin:A.FIN,mrn:A.MRN,age:A.AGE,birth_dt:A.BIRTH_DT,birth_dt_js:A.BIRTHDTJS,gender:A.GENDER,org_id:A.ORG_ID,facility:A.FACILITY,facility_cd:A.FACILITYCD,nurse_unit:A.NURSE_UNIT,nurse_unit_cd:A.NURSE_UNITCD,room:A.ROOM,bed:A.BED,length_of_stay:A.LOS,admit_dt:A.ADMIT_DT,admit_dt_js:A.ADMITDTJS})},setBhInfo:function(A){this.set({name:A.NAME,person_id:A.PID,encntr_id:A.EID,birth_dt:A.BIRTHDT,encntr_type_cd:A.EIDTYPE,admit_dt:A.ADMITDT,nurse_unit:A.NURSEUNITDISP,nurse_unit_cd:A.NURSEUNIT,observation_level:A.OBSERVLVL,fall_risk:A.FALLRISK,suicide_risk:A.SRISK,suicide_risk_seq:A.SRISKSEQ,suicide_risk_disp:A.SRISKDISP});this.userPrefModel.set({offunitstatus:{isoffunit:(A.OFFUNITSTATUS.OFFUNITIND===1)?true:false,offunitstartdt:A.OFFUNITSTATUS.OFFUNITSTARTDT,cecd:A.OFFUNITSTATUS.CECD,nomid:A.OFFUNITSTATUS.NOMID,nomdisp:A.OFFUNITSTATUS.NOMDISP}},{silent:true});this.trigger("change:bhinfo");this.createActivityModelsFromEvents(A.EVENTS)},createActivityModelsFromEvents:function(A){var B=this;var C=[];_.each(A,function(D){C.push(D.EVENT_DT)});C=_.uniq(C);_.each(C,function(F){var G=_.filter(A,function(H){return H.EVENT_DT===F});var E={CNT:0,EVENT_DT:G[0].EVENT_DT,EVENTDTDISP:G[0].EVENTDTDISP,LIST:[]};_.each(G,function(H){E.CNT++;E.LIST.push({TYPE:H.TYPE,EVENTID:H.EVENTID,NAME:H.NAME,CLINEVENTID:H.CLINEVENTID,EVENT_CD:H.EVENT_CD,EVENT_DISP:H.EVENT_DISP,EVENT_RESULT:H.EVENT_RESULT,FREETEXT:H.FREETEXT,NOMID:H.NOMEN,INPUTPRT:0})});if(!B.isEventInActivityCollection(E)){var D=new ActivityModel(E);D.patient=B;B.activities.add(D)}})},isEventInActivityCollection:function(C){var D=this.activities.models;for(var B=0,A=D.length;B<A;B++){if(D[B].get("EVENT_DT")===C.EVENT_DT){return true}}return false},getPatientImage:function(){var A=Criterion.image_size?Criterion.image_size:3;if(this.get("showimage_ind")==1){PatientImageRetriever.setPatientImageThumbnailValue(this,A)}},destroyPatient:function(){for(var A=this.activities.length-1;A>=0;A--){this.activities.models[A].destroyActivity()}if(this.view){this.view=null}this.destroy();this.unbind()}});var PatientListsModel=Backbone.Model.extend({defaults:{selectedList:{},addedPatients:[],fallLabel:"",suicideLabel:"",tabNavInd:0},PTLISTS:{},initialize:function(){_.bindAll(this);if(!this.get("json_handler")){var A=new UtilJsonXml({debug_mode_ind:0,disable_firebug:true});this.set({json_handler:A})}this.json_handler=this.get("json_handler")},retrieve:function(){this.trigger("loading");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:"dc_mp_bhv_hlth_get_ptlist",parameters:"^MINE^"},loadingDialog:{content:"Loading...<img src='../img/ajax-loader.gif'/>",targetDOM:_g("patient-lists-loader-message")},response:{type:"JSON",target:this.receiveCCLresponse,parameters:["t",1,this]}})},receiveCCLresponse:function(A){this.PTLISTS=A.response.LISTREPLY,that=this;var E="In order to display list of qualifying patients, select a Patient List from the selections above.";var B="In order to display list of qualifying patients, select a Facility and Nurse unit from the selections above and click the Submit button.";var C="In order to display list of qualifying patients, select either a Patient List or a Facility and Nurse unit from the selections above and click the Submit button.";if(this.PTLISTS.STATUS_DATA.STATUS==="S"){if(this.PTLISTS.BWPTPOP==="1"){this.sortList();this.trigger("change:ptlists");if(WindowStorage.get("StoredIndex")!="undefined"){this.setSelectedList(WindowStorage.get("StoredIndex"));this.clearWindowStorage();this.trigger("select:ptlist")}else{if(WindowStorage.get("StoredFnu")!="undefined"){var D=jQuery.parseJSON(WindowStorage.get("StoredFnu"));_.each(D,function(F){var H=[];_.each(F.LOCQUAL,function(I){H.push(I.NULOCATIONCD)});that.setSelectedNu(F,H,true);$("#falist").val(F.ORGID);var G=[];_.each(F.LOCQUAL,function(I){G.push(I.LOCATIONDISP)});that.changeNurseUnitText(G)});this.clearWindowStorage();this.trigger("select:fulist")}else{if(this.PTLISTS.BWDEFPOP==="1"){this.setInitialSelectedList();this.trigger("change:selected")}else{$("#ptpopMessage").text(E)}}}$("#fu-label").remove();$("#falist").remove();$("#nuLink").remove()}else{if(this.PTLISTS.BWPTPOP==="2"){if(this.PTLISTS.BWWTS==="0"){this.PTLISTS.PTLIST=_.filter(this.PTLISTS.PTLIST,function(F){return F.LISTID!==0})}this.sortList();this.trigger("change:ptlists");if(WindowStorage.get("StoredIndex")!="undefined"){this.setSelectedList(WindowStorage.get("StoredIndex"));this.clearWindowStorage();this.trigger("select:ptlist")}else{if(WindowStorage.get("StoredFnu")!="undefined"){var D=jQuery.parseJSON(WindowStorage.get("StoredFnu"));_.each(D,function(F){var H=[];_.each(F.LOCQUAL,function(I){H.push(I.NULOCATIONCD)});that.setSelectedNu(F,H,true);$("#falist").val(F.ORGID);var G=[];_.each(F.LOCQUAL,function(I){G.push(I.LOCATIONDISP)});that.changeNurseUnitText(G)});this.clearWindowStorage();this.trigger("select:fulist")}else{if(this.PTLISTS.BWDEFPOP==="2"){this.setInitialSelectedFu(_.filter(this.PTLISTS.PTLIST,function(F){return F.LISTID===0}),true,2)}else{$("#ptpopMessage").text(B)}}}$("#pt-label").remove();$("#ptlist").remove();$("#ptpopSubmit").remove()}else{this.sortList();this.trigger("change:ptlists");if(WindowStorage.get("StoredIndex")!="undefined"){this.setSelectedList(WindowStorage.get("StoredIndex"));this.clearWindowStorage();this.trigger("select:ptlist")}else{if(WindowStorage.get("StoredFnu")!="undefined"){var D=jQuery.parseJSON(WindowStorage.get("StoredFnu"));_.each(D,function(F){var H=[];_.each(F.LOCQUAL,function(I){H.push(I.NULOCATIONCD)});that.setSelectedNu(F,H,true);$("#falist").val(F.ORGID);var G=[];_.each(F.LOCQUAL,function(I){G.push(I.LOCATIONDISP)});that.changeNurseUnitText(G)});this.clearWindowStorage();this.trigger("select:fulist")}else{if(this.PTLISTS.BWDEFPOP==="1"){this.setInitialSelectedList();this.trigger("change:selected");this.setInitialSelectedFu(_.filter(this.PTLISTS.PTLIST,function(F){return F.LISTID===0}),false,3)}else{if(this.PTLISTS.BWDEFPOP==="2"){this.setInitialSelectedFu(_.filter(this.PTLISTS.PTLIST,function(F){return F.LISTID===0}),true,3)}else{$("#ptpopMessage").text(C)}}}}}}this.setPageTitle();this.setRiskLabel();this.setTabNavInd()}else{throw Error("patientListsModel.retrieve() failure")}},sortList:function(){this.PTLISTS.PTLIST=_.sortBy(this.PTLISTS.PTLIST,function(A){return A.LISTSEQ})},setInitialSelectedList:function(){var A=_.min(this.PTLISTS.PTLIST,function(B){return B.LISTSEQ});A.NULIST=[];this.set({selectedList:A})},setInitialSelectedFu:function(F,B,D){var C=this;var A="In order to display list of qualifying patients, select a Facility and Nurse unit from the selections above and click the Submit button.";var E="In order to display list of qualifying patients, select either a Patient List or a Facility and Nurse unit from the selections above and click the Submit button.";if(F.length>0){_.each(this.PTLISTS.FUQUAL,function(G){_.each(G.LOCQUAL,function(H){if(H.NULOCATIONCD===F[0].DEFAULTLOCCD){$("#falist").val(G.ORGID);$("#nuLink").text(H.LOCATIONDISP);$("#nuLink").attr("title",H.LOCATIONDISP);C.setSelectedNu(G,[H.NULOCATIONCD],B)}})})}else{if(D===2){$("#ptpopMessage").text(A)}else{if(D===3){$("#ptpopMessage").text(E)}}}},length:function(){return this.PTLISTS.PTLIST?this.PTLISTS.PTLIST.length:0},getLists:function(){return(this.PTLISTS&&this.PTLISTS.PTLIST)?this.PTLISTS.PTLIST:[]},getFacilities:function(){return(this.PTLISTS&&this.PTLISTS.FUQUAL)?this.PTLISTS.FUQUAL:[]},getSingleList:function(A){return _.detect(this.PTLISTS.PTLIST,function(B){return B.LISTID===A})},getSelectedFacility:function(A){return _.find(this.PTLISTS.FUQUAL,function(B){return B.ORGID==A})},setSelectedList:function(A){var B=_.detect(this.PTLISTS.PTLIST,function(C){return C.LISTID==A});B.NULIST=[];this.set({selectedList:B});this.set({addedPatients:[]},{silent:true});this.trigger("change:selected")},setSelectedNu:function(C,B,A){if(B.length>0){var F=[];_.each(C.LOCQUAL,function(G){if(_.indexOf(B,G.NULOCATIONCD)!=-1){delete G.OPEN;delete G.CLOSE;F.push(G)}});var E=_.clone(C);E.LOCQUAL=F;var D={PRSNLID:Criterion.personnel_id,LISTID:-1,LISTTYPECD:0,DEFAULTLOCCD:0,NULIST:[E]};if(A){this.set({selectedList:D})}}},changeNurseUnitText:function(A){if(A.length>0){var B="";$.each(A,function(C,D){B=B+D+"; "});B=B.slice(0,B.length-2);$("#nuLink").attr("title",B);if(B.length>50){B=B.slice(0,50);B+="..."}$("#nuLink").text(B)}},setPageTitle:function(){if(this.PTLISTS.PAGE_TITLE===""){$(".mpage-title").get(0).innerHTML="Safety and Attendance MPage"}else{$(".mpage-title").get(0).innerHTML=this.PTLISTS.PAGE_TITLE}},setTabNavInd:function(){this.set({tabNavInd:this.PTLISTS.TABNAV_IND},{silent:true})},setRiskLabel:function(){var B=this.PTLISTS.FALL_LABEL;var A=this.PTLISTS.SUICIDE_LABEL;if(B===""){this.set({fallLabel:"Fall"},{silent:true})}else{this.set({fallLabel:B},{silent:true})}if(A===""){this.set({suicideLabel:"Suicide"},{silent:true})}else{this.set({suicideLabel:A},{silent:true})}},clearWindowStorage:function(){WindowStorage.del("StoredFnu");WindowStorage.del("StoredIndex")},destroyPatientListsModel:function(){if(this.view){this.view=null}this.destroy()}});var timeIntervalGenerator=function(B,D,H){var M=D||new Date(),E=B,I=H;if(arguments.length!==3){throw new Error("timeIntervalGenerator(): must have three parameter")}if(typeof arguments[0]!=="number"||typeof arguments[1]!=="object"){throw new TypeError("timeIntervalGenerator(): Incorrect parameter types : "+arguments[0]+" "+arguments[1])}function A(){var U=[],O=C(D),P,Q,V,S,N,V=K(),N=F(V);while(V.valueOf()>O.valueOf()){Q=L(V);Q.setMinutes(Q.getMinutes()+1);S=F(Q);var R=DateFormatter.formatDate(Q,"MM/dd/yy"),T=DateFormatter.formatDate(V,"MM/dd/yy"),Y=R===T?R:T+"-"+R,X=(Q).toString().split(" "),W=X[4];U[U.length]={endDate:V,startDate:Q,endMilitary:N,startMilitary:S,date:Y,military:N+"-"+S+" "+W};V=new Date(Q);V.setMinutes(V.getMinutes()-1);N=F(V)}return U}function J(N){return A()[N]}function L(N){var O=new Date(N.valueOf());O=new Date(O.setMinutes(O.getMinutes()-B).valueOf());return O}function F(O){var N=O.getHours().toString();var P=O.getMinutes().toString();N=N.length==2?N:"0"+N;P=P.length==2?P:"0"+P;return N+":"+P}function K(){var N=1000*60*B;var O=new Date(D.valueOf());O.setMinutes(60);O.setSeconds(0,0);while(O.getTime()-D.getTime()>=N){O=L(O)}return O}function C(N){var O=1000*60*60*I;N=new Date(N.valueOf()-O);N.setSeconds(0,0);return N}function G(O){if(O<C(M)){return -1}var Q=A();for(var P=0,N=Q.length;P<N;P++){if(O<Q[P].endDate&&O>=Q[P].startDate){return P}}return -1}return{getIntervals:A,getInterval:J,subtractInterval:L,getMilitaryTimeString:F,getStartingDate:K,getTwelveHoursAgo:C,getIntervalForDate:G}};var ActivityModel=Backbone.Model.extend({patient:{},defaults:{CNT:0,EVENT_DT:"",EVENTDTDISP:"",STATUS:"NONE",STARTDT:"",ENDDT:"",LIST:[{TYPE:"",EVENTID:0,NAME:"",CLINEVENTID:0,EVENT_CD:0,EVENT_DISP:"",EVENT_RESULT:"",FREETEXT:"",NOMID:[{NOMID:""}],INPUTPRT:0}]},initialize:function(){_.bindAll(this);this.setInitialActivityStatus()},setInitialActivityStatus:function(){if(!this.get("CNT")){this.set({STATUS:"NONE"});return }this.set({STATUS:this.get("LIST")[0].EVENTID>0?"SAVED":"DRAFT"})},getEventDt:function(){var A=jQuery.trim(this.get("EVENT_DT"));if(this.get("STATUS")==="DRAFT"){return new Date(DateFormatter.getDateFromFormat(A,"dd-NNN-yyyy HH:mm:ss:00"))}else{return new Date(DateFormatter.getDateFromFormat(A,"M-d-y H:m"))}},inError:function(){this.set({STATUS:this.get("STATUS").toUpperCase()==="DRAFT"?"NONE":"INERROR"})},destroyActivity:function(){if(this.view){this.view=null}this.destroy();this.unbind()}});var UserPrefModel=Backbone.Model.extend({defaults:{offunitstatus:{isoffunit:false,offunitstartdt:"",cecd:0,nomid:0,nomdisp:""}},initialize:function(){_.bindAll(this);if(!this.get("json_handler")){var A=new UtilJsonXml({debug_mode_ind:0,disable_firebug:true});this.set({json_handler:A})}this.json_handler=this.get("json_handler")},savePref:function(A,C,B,F,D,J){var H={PERSON_ID:A,OFFUNIT_IND:C,OFFUNIT_STARTDT:B,CECD:F,NOMID:D,NOMDISP:J};var G=JSON.stringify(H);var E="^MINE^,^{'MPREQ':"+G+"}^";var I="DC_MP_BHV_HLTH_SETUP_SAVE_PREF";this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:I,parameters:E},response:{type:"JSON",target:this.receiveSaveresponse,parameters:[this]}})},receiveSaveresponse:function(A){var B=A.response.MPREP;if(B.STATUS_DATA.STATUS==="S"){this.set({offunitstatus:{isoffunit:true,offunitstartdt:B.OFFUNIT_STARTDT,cecd:B.CECD,nomid:B.NOMID,nomdisp:B.NOMDISP}})}},removePref:function(E){var A={PERSON_ID:E,OFFUNIT_IND:0,OFFUNIT_STARTDT:"",CECD:0,NOMID:0,NOMDISP:""};var D=JSON.stringify(A);var C="^MINE^,^{'MPREQ':"+D+"}^";var B="DC_MP_BHV_HLTH_SETUP_SAVE_PREF";this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:B,parameters:C},response:{type:"JSON",target:this.receiveRemoveresponse,parameters:[this]}})},receiveRemoveresponse:function(A){var B=A.response.MPREP;if(B.STATUS_DATA.STATUS==="S"){this.set({offunitstatus:{isoffunit:false,offunitstartdt:"",cecd:0,nomid:0,nomdisp:""}})}}});var MultiSelectModel=Backbone.Model.extend({defaults:{selectedPatient:[]},initialize:function(){_.bindAll(this)},clean:function(){this.set({selectedPatient:[]})}});var NewPatientModel=Backbone.Model.extend({defaults:{pt_cnt:0,page_cnt:0,patients:[{pageNum:0,ptQualInd:0,pt_id:0,encntr_id:0,encntr_typeCd:0,name:"",fin:"",mrn:"",age:"",birth_dt:"",birthDtJs:"",gender:"",org_id:0,facility:"",facilityCd:0,nurse_unit:"",nurse_unitCd:0,room:"",bed:"",los:0,admit_dt:"",admitDtJs:""}]},flag:0,initialize:function(){_.bindAll(this);if(!this.get("json_handler")){var A=new UtilJsonXml({debug_mode_ind:0,disable_firebug:true});this.set({json_handler:A})}this.json_handler=this.get("json_handler")},retrieve:function(A){this.trigger("started-loading");var B={PRSNLID:A.PRSNLID,PTLISTID:A.LISTID,PTLISTTYPE:A.LISTTYPECD,PTLISTLOCCD:A.DEFAULTLOCCD,fuQual:A.NULIST};var E=JSON.stringify(B);var D="^MINE^,^{'MPREQ':"+E+"}^";var C=_g("json-loader-message-ptlist");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:"dc_mp_get_ptpop",parameters:D},loadingDialog:{content:"<img src='../img/ajax-loader.gif'/>",targetDOM:C},response:{type:"JSON",target:this.receiveCCLresponse,parameters:[this]}})},receiveCCLresponse:function(A){this.trigger("finished-loading");if(A.response.PTREPLY.STATUS_DATA.STATUS==="S"){var B=A.response.PTREPLY;this.set({page_cnt:B.PAGE_CNT,pt_cnt:B.PT_CNT,patients:B.PATIENTS})}else{alert("Error when retriving patient list data")}},getBhInfo:function(C){this.flag=C;var A={pt_cnt:this.get("pt_cnt"),page_cnt:this.get("page_cnt"),patients:this.get("patients")};var E=JSON.stringify(A);var D="^MINE^,^{'MPREQ':"+E+"}^";var B=_g("json-loader-message");this.json_handler.ajax_request({request:{type:"XMLCCLREQUEST",target:"DC_MP_BHV_HLTH_GET_BHINFO",parameters:D},loadingDialog:{content:"Loading...<img src='../img/ajax-loader.gif'/>",targetDOM:B},response:{type:"JSON",target:this.receiveBhInfo,parameters:[this]}})},receiveBhInfo:function(A){if(A.response.BHREPLY.STATUS_DATA.STATUS==="S"){var G=A.response.BHREPLY;var F=this;_.each(this.get("patients"),function(I){var K=F.patients.detect(function(L){return L.get("encntr_id")===I.ENCNTR_ID});if(K){alert("Patient is already in the patient list: \n"+K.get("name"));var H=_.detect(G.LIST,function(L){return L.EID===K.get("encntr_id")});G.LIST=_.without(G.LIST,H);G.LISTCNT=G.LISTCNT-1}else{var J=new PatientModel();J.setPtInfo(I);J.set({isAdded:true},{silent:true});F.patients.add(J,{silent:true})}});_.each(G.LIST,function(K){var I=F.patients.detect(function(L){return L.get("encntr_id")===K.EID});I.set({showimage_ind:G.SHOWIMAGE_IND});I.setBhInfo(K);I.set({location_activities:F.patients.BhInfoModel.getActivitiesForLocation(I.get("nurse_unit_cd"))});I.set({offunitevent:G.OFFUNITEVENT});F.patients.trigger("add");var J=new PatientView({model:I,collection:F.patients});var H=F.patients.patientListsModel;H.get("addedPatients").push(I);$(".patient-dashboard tbody").append(I.view.el)});if(this.flag){try{var D=WindowStorage.get("AddedPatients");if(D!=="undefined"){D=jQuery.parseJSON(D);var B=F.patients.patientListsModel;var C=_.detect(D,function(H){return _.isEqual(H.selectedList,B.get("selectedList"))});if(C){D=_.without(D,C);D.push(B);WindowStorage.set("AddedPatients",JSON.stringify(D))}else{D.push(B);WindowStorage.set("AddedPatients",JSON.stringify(D))}}else{WindowStorage.set("AddedPatients",JSON.stringify([F.patients.patientListsModel]))}}catch(E){alert(E.message)}}}else{alert("Error when retriving behavioral health data")}}});var PatientCollection=Backbone.Collection.extend({model:PatientModel,timeIntervals:[],selectedInterval:15,selectedRange:4,initialize:function(){_.bindAll(this);if(this.BhInfoModel){this.BhInfoModel.destroy()}if(this.PtInfoModel){this.PtInfoModel.destroy()}if(this.MultiSelectModel){this.MultiSelectModel.destroy()}this.BhInfoModel=new BhInfoModel;this.PtInfoModel=new PtInfoModel;this.MultiSelectModel=new MultiSelectModel;this.BhInfoModel.bind("change",this.fillPatientsBhInfo);this.PtInfoModel.bind("change",this.fillPatientsPtInfo);this.bind("change:json_handler",function(){this.BhInfoModel.json_handler=this.json_handler;this.PtInfoModel.json_handler=this.json_handler;this.unbind("change:json_handler")})},retrieve:function(A){this.trigger("started-loading");this.destroyCollection();this.BhInfoModel.clear({silent:true});this.PtInfoModel.clear({silent:true});this.MultiSelectModel.set({selectedPatient:[]},{silent:true});this.BhInfoModel.retrieve(A);this.PtInfoModel.retrieve(A)},fillPatientsBhInfo:function(){var G=this.BhInfoModel.get("BHINFO"),E;var B=G.LIST;var F=G.OFFUNITEVENT;for(var D=0,A=G.LIST.length;D<A;D++){E=this.detect(function(H){return H.get("encntr_id")===G.LIST[D].EID});if(_.isEmpty(E)){E=this.addNewPatientFromBhInfo(B[D]);E.set({offunitevent:F})}else{E.set({showimage_ind:G.SHOWIMAGE_IND});E.setBhInfo(B[D]);E.set({location_activities:this.BhInfoModel.getActivitiesForLocation(E.get("nurse_unit_cd"))});E.set({offunitevent:F});this.trigger("add")}}this.trigger("change:timeIntervalOptions");var C=this.getIntervalForLocation();if(C){this.createTimeIntervals(C.LOCTM)}if(!_.isEmpty(this.PtInfoModel.get("PTINFO"))){this.trigger("finished-loading")}},addNewPatientFromBhInfo:function(B){var C=this.BhInfoModel.get("BHINFO"),A;A=new PatientModel;A.set({showimage_ind:C.SHOWIMAGE_IND});A.setBhInfo(B);A.set({location_activities:this.BhInfoModel.getActivitiesForLocation(A.get("nurse_unit_cd"))});this.add(A,{silent:true});return A},fillPatientsPtInfo:function(){var A=this.PtInfoModel.get("PTINFO");var E=A.PATIENTS;for(var D=0,B=E.length;D<B;D++){var C=this.detect(function(F){return F.get("encntr_id")===E[D].ENCNTR_ID});if(_.isEmpty(C)){C=this.addNewPatientFromPtInfo(E[D])}else{C.setPtInfo(E[D]);this.trigger("add")}}if(!_.isEmpty(this.BhInfoModel.get("BHINFO"))){this.trigger("finished-loading")}},addNewPatientFromPtInfo:function(A){var B=new PatientModel;B.setPtInfo(A);this.add(B,{silent:true});return B},getTimeIntervalOptions:function(){var E=[],F=this.BhInfoModel.get("BHINFO");if(_.isEmpty(F)){return[]}var B=F.LOCTIME;if(!_.isEmpty(B)){for(var D=0,A=B.length;D<A;D++){var C=_.any(E,function(G){return G.LOCTM===B[D].LOCTM});if(!C){E[E.length]=B[D]}}return E.sort(function(H,G){return H.LOCTM-G.LOCTM})}else{return this.getDefaultTimeIntervalOptions()}},getTimeRangeOptions:function(){var B=_.range(4,13);var A=[];_.each(B,function(C){A.push({HOUR:C})});return A},getDefaultTimeIntervalOptions:function(){var B=[];var D=[15,30,60,120];for(var C=0,A=D.length;C<A;C++){B[B.length]={LOCCD:0,LOCDISP:"DEFAULT",LOCDESC:"DEFAULT",LOCTM:D[C]}}return B},getIntervalForLocation:function(){var A=this.first(),C=this.BhInfoModel.get("BHINFO");if(!_.isEmpty(A)){var D=A.get("nurse_unit_cd");var B=_.detect(C.LOCTIME,function(E){return D==E.LOCCD});return !_.isEmpty(B)?B:_.first(this.getTimeIntervalOptions())}else{return null}},createTimeIntervals:function(A){this.timeIntervalGenerator=timeIntervalGenerator(A,new Date(),this.selectedRange);this.timeIntervals=this.timeIntervalGenerator.getIntervals();this.selectedInterval=A;this.trigger("change:timeIntervals")},setTimeRange:function(A){this.selectedRange=A;this.trigger("change:timeIntervals")},sortPatientsByLocation:function(){if(this.updateIcon(".location-sort")===0){this.models=this.sortBy(function(A){return A.get("nurse_unit")+A.get("room")+A.get("bed")})}else{this.models=this.sortBy(function(A){return -A.get("nurse_unit")+A.get("room")+A.get("bed")}).reverse()}this.trigger("sort");this.resetIcon(".patient-sort");this.resetIcon(".suicide-sort");this.resetIcon(".fall-sort")},sortPatientsByName:function(){if(this.updateIcon(".patient-sort")===0){this.models=this.sortBy(function(A){return A.get("name")})}else{this.models=this.sortBy(function(A){return -A.get("name")}).reverse()}this.trigger("sort");this.resetIcon(".suicide-sort");this.resetIcon(".fall-sort");this.resetIcon(".location-sort")},sortPatientsByFallRisk:function(){if(this.updateIcon(".fall-sort")===0){this.models=this.sortBy(function(A){return A.get("fall_risk").length?0:1})}else{this.models=this.sortBy(function(A){return A.get("fall_risk").length?0:1}).reverse()}this.trigger("sort");this.resetIcon(".patient-sort");this.resetIcon(".suicide-sort");this.resetIcon(".location-sort")},sortPatientsBySuicideRisk:function(){var A=this.max(function(C){return C.get("suicide_risk_seq")}).get("suicide_risk_seq")+1;var B;if(this.updateIcon(".suicide-sort")===0){this.models=this.sortBy(function(C){B=C.get("suicide_risk_seq");if(B===0){return A}else{return C.get("suicide_risk_seq")}})}else{this.models=this.sortBy(function(C){B=C.get("suicide_risk_seq");if(B===0){return A}else{return C.get("suicide_risk_seq")}}).reverse()}this.trigger("sort");this.resetIcon(".patient-sort");this.resetIcon(".fall-sort");this.resetIcon(".location-sort")},updateIcon:function(B){var A=$(B).attr("src");if(A.match(/bg.gif$/)){$(B).attr("src",A.replace(/bg.gif$/,"asc.gif"));return 0}else{if(A.match(/asc.gif$/)){$(B).attr("src",A.replace(/asc.gif$/,"desc.gif"));return 1}else{$(B).attr("src",A.replace(/desc.gif$/,"asc.gif"));return 0}}},resetIcon:function(B){var A=$(B).attr("src");if(A.match(/asc.gif$/)){$(B).attr("src",A.replace(/asc.gif$/,"bg.gif"))}else{if(A.match(/desc.gif$/)){$(B).attr("src",A.replace(/desc.gif$/,"bg.gif"))}}},getUnsavedActivities:function(){var D=[];var A=this.models;for(var C=0,B=A.length;C<B;C++){D=D.concat(A[C].activities.getUnsavedActivities())}return D},getInErrorActivities:function(){var D=[];var A=this.models;for(var C=0,B=A.length;C<B;C++){D=D.concat(A[C].activities.getInErrorActivities())}return D},destroyCollection:function(){this.destroyPatients();this.reset()},destroyPatients:function(){var B;for(var A=this.length-1;A>=0;A--){B=this.models[A];B.destroyPatient()}}});var ActivityCollection=Backbone.Collection.extend({model:ActivityModel,initialize:function(){_.bindAll(this)},newestInRange:function(C,A){var B=this.select(function(E){var D=E.getEventDt();D.setSeconds(0,0);return(D>=C)&&(D<=A)});return _.max(B,function(E){var D=E.getEventDt();D.setSeconds(0);return D.valueOf()})},getUnsavedActivities:function(){return this.select(function(A){return A.get("STATUS").toUpperCase()=="DRAFT"})},getInErrorActivities:function(){return this.select(function(A){return A.get("STATUS").toUpperCase()=="INERROR"})}});var PatientListsView=Backbone.View.extend({template:TemplateLoader.compileFromFile("templates/_PatientListsSelect.handlebar.html"),events:{"click #ptpopSubmit":"setSelectedList","click #nuLink":"setSelectedFacility","change #ptlist":"ptlistChange","change #falist":"fulistChange","click #ptpopReset":"resetPatientList"},initialize:function(){_.bindAll(this);this.model.bind("change:ptlists",this.render);this.model.bind("change:selected",this.displaySelected);this.model.bind("select:fulist",this.fulistChange);this.model.bind("select:ptlist",this.ptlistChange);this.model.bind("destroy",this.remove);this.render()},render:function(){var B=this,A={PTLIST:this.model.getLists(),FUQUAL:this.model.getFacilities()};$(this.el).html(this.template(A));return this},setSelectedList:function(){this.select=$(".patient-lists-select",this.el)[0];var A=this.select.options[this.select.selectedIndex].value;if(!A||A===""){alert("Please select a valid patient list.")}else{this.option=parseInt(A);this.model.setSelectedList(this.option)}},setSelectedFacility:function(){var B=this.model.getSelectedFacility($("#falist option:selected").attr("value"));if(B===undefined){alert("Please select a valid facility.")}else{var A=NurseUnitDialogViewSingleton.createNurseUnitDialogView(B,this);A.open(false)}},displaySelected:function(){var C=this.model.get("selectedList").LISTID,A=$(".patient-lists-select",this.el)[0];for(var D=0,B=A.options.length;D<B;D++){if(A.options[D].value==C){A.selectedIndex=D}}$("#ptpopMessage").remove()},resetNurseUnitText:function(){$("#nuLink").text("Nurse Units");$("#nuLink").attr("title","Click to Open Nurse Units.")},ptlistChange:function(){this.$("#falist").attr("disabled",true);this.$("#nuLink").attr("disabled",true);this.$("#ptpopSubmit").attr("disabled",false);this.$("#falist").attr("selectedIndex",-1);this.resetNurseUnitText()},fulistChange:function(){this.$("#ptlist").attr("disabled",true);this.$("#ptlist").attr("selectedIndex",-1)},resetPatientList:function(){location.reload()},disable:function(){$(this.el).attr("disabled",true)},enable:function(){$(this.el).attr("disabled",false)}});var TimeIntervalSelectView=Backbone.View.extend({template:TemplateLoader.compileFromFile("templates/_TimeIntervalSelect.handlebar.html"),events:{"change .time-interval-select":"setTimeInterval"},initialize:function(){_.bindAll(this);this.model.bind("change:timeIntervalOptions",this.render);this.model.bind("change:timeIntervals",this.displaySelected);this.model.bind("started-loading",this.disable);this.model.bind("finished-loading",this.enable);this.render();this.disable()},render:function(){var A={INTERVALS:this.model.getTimeIntervalOptions()};$(this.el).html(this.template(A));for(var B=0;B<this.model.getTimeIntervalOptions().length;B++){var C=$(".time-interval-select option")[B];if(C.value>60){C.text=(C.value/60).toString()+" hours"}else{if(C.value==60){C.text=(C.value/60).toString()+" hour"}else{C.text=C.value.toString()+" min"}}}return this},setTimeInterval:function(){if(_.isEmpty(this.model)){return false}this.select=this.$(".time-interval-select",this.el)[0];this.option=parseInt(this.select.options[this.select.selectedIndex].value);this.model.createTimeIntervals(this.option)},displaySelected:function(){var D=this.model.selectedInterval;var A=this.$(".time-interval-select",this.el)[0];for(var C=0,B=A.options.length;C<B;C++){if(A.options[C].value==D){A.selectedIndex=C}}},disable:function(){this.$("select").attr("disabled",true);this.$("button").attr("disabled",true)},enable:function(){this.$("select").attr("disabled",false);this.$("button").attr("disabled",false)},remove:function(){$(this.el).empty().remove();this.model.bind("started-loading",this.disable);this.model.bind("finished-loading",this.enable)}});var DashboardHeaderView=Backbone.View.extend({tagName:"thead",className:"patient-dashboard-header",template:TemplateLoader.compileFromFile("templates/_DashboardHeader.handlebar.html"),events:{"click .location-sort":"sortByLocation","click .patient-sort":"sortByPatient","click .suicide-sort":"sortBySuicide","click .fall-sort":"sortByFall","click .select-header":"selectAll"},initialize:function(){_.bindAll(this,"render");this.model.bind("change:timeIntervals",this.render);this.render()},render:function(){var B=$(".patient-sort").attr("src");var A=this.model.timeIntervals;var C={intervals:this.model.timeIntervals,suicide_label:this.model.patientListsModel.get("suicideLabel"),fall_label:this.model.patientListsModel.get("fallLabel")};$(this.el).html(this.template(C));$(".patient-sort").attr("src",B);return this},sortByLocation:function(){this.model.sortPatientsByLocation()},sortByPatient:function(){this.model.sortPatientsByName()},sortBySuicide:function(){this.model.sortPatientsBySuicideRisk()},sortByFall:function(){this.model.sortPatientsByFallRisk()},selectAll:function(){var B=this.model.MultiSelectModel;if(B.get("selectedPatient").length){B.clean()}else{var A=[];_.each(this.model.models,function(C){A.push(C)});B.set({selectedPatient:A})}}});var DashboardView=Backbone.View.extend({tagName:"table",className:"patient-dashboard",tbody:$("<tbody></tbody"),template:TemplateLoader.compileFromFile("templates/_NewPatient.handlebar.html"),patientViews:[],events:{"click .new-patient":"addNewPatient"},initialize:function(){_.bindAll(this);this.collection=this.options.collection;this.collection.bind("finished-loading",this.render);this.collection.bind("sort",this._render);this.thead=new DashboardHeaderView({model:this.collection})},render:function(){this._render();this.attachAddedPatientViews();return this},_render:function(){var D=$(this.el),A=this.collection.models;D.find("thead").detach();D.find("tbody").detach();D.find("tfoot").detach();D.append(this.thead.el);for(var C=0,B=A.length;C<B;C++){if(A[C].view){$(A[C].view.el).detach()}}D.append(this.tbody);this.attachPatientViews();D.cellspacing=0;D.append(this.template({}));return this},attachPatientViews:function(){var C=this.tbody,E=this.collection,D=1,A=this.collection.models;for(var D=0,B=A.length;D<B;D++){if(!A[D].view){var F=new PatientView({model:A[D],collection:E})}C.append(A[D].view.el)}},attachAddedPatientViews:function(){var B=WindowStorage.get("AddedPatients");if(B!=="undefined"){try{B=jQuery.parseJSON(B);var D=this;var A=_.detect(B,function(G){return _.isEqual(G.selectedList,D.collection.patientListsModel.get("selectedList"))});if(A){var F={pt_cnt:A.addedPatients.length,page_cnt:0,patients:[]};_.each(A.addedPatients,function(G){var H={PAGENUM:1,PTQUALIND:0,PT_ID:G.person_id,ENCNTR_ID:G.encntr_id,ENCNTR_TYPECD:G.encntr_type_cd,NAME:G.name,FIN:G.fin,MRN:G.mrn,AGE:G.age,BIRTH_DT:G.birth_dt,BIRTHDTJS:G.birth_dt_js,GENDER:G.gender,ORG_ID:G.org_id,FACILITY:G.facility,FACILITYCD:G.facility_cd,NURSE_UNIT:G.nurse_unit,NURSE_UNITCD:G.nurse_unit_cd,ROOM:G.room,BED:G.bed,LOS:G.length_of_stay,ADMIT_DT:G.admit_dt,ADMITDTJS:G.admit_dt_js};F.patients.push(H)});var E=new NewPatientModel(F);E.patients=this.collection;E.getBhInfo(0)}}catch(C){alert(C.message)}}},addNewPatient:function(){var A=NewPatientDialogViewSingleton.createNewPatientDialogView(this.collection);A.open()}});var PatientView=Backbone.View.extend({tagName:"tr",className:"patient-row",timeIntervals:[],activityViews:[],locationAndImgTemplate:TemplateLoader.compileFromFile("templates/_LocationAndImage.handlebar.html"),selectView:null,imageView:null,selectTemplate:TemplateLoader.compileFromFile("templates/_MultiSelect.handlebar.html"),basicInfoTemplate:TemplateLoader.compileFromFile("templates/_PatientInfo.handlebar.html"),basicInfoView:null,riskTemplate:TemplateLoader.compileFromFile("templates/_PatientRisk.handlebar.html"),riskView:null,events:{"click .activity-view-new":"newActivityView","change .offUCheck":"unCheckOffU","click .multi-select":"selectActivity","click .addedRemove":"removeAddedPatient"},initialize:function(){_.bindAll(this);this.collection.bind("change:timeIntervals",this.render);this.model.bind("change:image_data",this.renderImageView);this.model.userPrefModel.bind("change:offunitstatus",this.reRender);this.collection.MultiSelectModel.bind("change",this.reRenderSelect);this.registerHandlebarPartials();this.selectView=this.createSelectView();this.imageView=this.createImageView();this.basicInfoView=this.createBasicInfoView();this.riskView=this.createRiskView();this.model.view=this;this.model.bind("destroy",this.removeView,this);this.render()},render:function(){var A=$(this.el);this.$("td").detach();A.append(this.selectView);A.append(this.imageView);A.append(this.basicInfoView);A.append(this.riskView);if(!_.isEmpty(this.collection.timeIntervals)){this.createActivityViews();this.attachActivityViews()}if(this.model.userPrefModel.get("offunitstatus").isoffunit){A.find("[class^=activity-view]").attr("disabled",true);A.find("[class^=multi-select]").attr("disabled",true)}else{A.find("[class^=activity-view]").attr("disabled",false);A.find("[class^=multi-select]").attr("disabled",false)}return this},reRender:function(){var A=$(this.el);this.imageView=this.createImageView();this.$(".patient-image").replaceWith(this.imageView);if(this.model.userPrefModel.get("offunitstatus").isoffunit){A.find("[class^=activity-view]").attr("disabled",true);A.find("[class^=multi-select]").attr("disabled",true)}else{A.find("[class^=activity-view]").attr("disabled",false);A.find("[class^=multi-select]").attr("disabled",false)}},reRenderSelect:function(){var A=$(this.el);this.selectView=this.createSelectView();this.$(".multi-select").replaceWith(this.selectView)},registerHandlebarPartials:function(){var A=this;Handlebars.registerPartial("fallRisk",A.fallRiskTemplate());Handlebars.registerPartial("suicideRisk",A.suicideRiskTemplate());Handlebars.registerPartial("suicideImg",A.suicideImgTemplate());Handlebars.registerPartial("noRisk",A.noRiskTemplate())},createSelectView:function(){var B=$("<td class='multi-select'></td>");var C=this;var A=_.some(this.collection.MultiSelectModel.get("selectedPatient"),function(D){return D.get("person_id")===C.model.get("person_id")});$(B).html(this.selectTemplate({selected:A}));return B},createImageView:function(){var E=$("<td class='patient-image'></td>"),F=this,C=this.model,D=this.model.userPrefModel,B=D.get("offunitstatus").offunitstartdt,A;A={src:F.getImageViewSrc(),nurse_unit:C.get("nurse_unit"),room:C.get("room"),bed:C.get("bed"),isoffunit:D.get("offunitstatus").isoffunit,offunitdisp:D.get("offunitstatus").nomdisp,offunitstartdt:B.substring(0,B.length-3),isAdded:C.get("isAdded")===undefined?false:true};if(C.get("room")!=""){A.room="/ "+A.room}if(C.get("bed")!=""){A.bed="/ "+A.bed}$(E).html(this.locationAndImgTemplate(A));return E},renderImageView:function(){var F=this,C=this.model,E=$("<td class='patient-image'></td>"),D=this.model.userPrefModel,B=D.get("offunitstatus").offunitstartdt,A;A={src:F.getImageViewSrc(),nurse_unit:C.get("nurse_unit"),room:C.get("room"),bed:C.get("bed"),isoffunit:D.get("offunitstatus").isoffunit,offunitdisp:D.get("offunitstatus").nomdisp,offunitstartdt:B.substring(0,B.length-3),isAdded:C.get("isAdded")===undefined?false:true};$(E).html(this.locationAndImgTemplate(A));$(this.imageView).replaceWith(E);this.imageView=E;return E},getImageViewSrc:function(){return this.model.get("image_data")},createBasicInfoView:function(){var E=this.collection.BhInfoModel.get("BHINFO");var D=$("<td class='patient-basic-info'></td>");var A=this.model;var C={tabName:E.PCTABNM.length?" /FIRSTTAB=^"+E.PCTABNM+"^":"",gender:A.get("gender").toUpperCase()=="MALE"?"M":"F",age:A.get("age").toLowerCase(),birth_dt_js:A.get("birth_dt_js").substring(0,6)+A.get("birth_dt_js").substring(8,10),observation_level:A.get("observation_level").length?A.get("observation_level"):"--"};var B=A.toJSON();jQuery.extend(B,C);$(D).html(this.basicInfoTemplate(B));return D},createRiskView:function(){var A=$("<td class='patient-risk'></td>");$(A).html(this.riskTemplate(this.model.toJSON()));return A},fallRiskTemplate:function(){if(this.model.get("fall_risk").length){return"<p class='fallRisk'><span class='field'>Fall Risk</span></p>"}else{return""}},suicideRiskTemplate:function(){if(this.model.get("suicide_risk").length){return"<p class='suicideRisk'>{{>suicideImg}}<span class='field'>Suicide Risk: </span><span class='risk-value'>{{suicide_risk}}</span></p>"}else{return""}},suicideImgTemplate:function(){var A=this.model.get("suicide_risk_disp");if(A==="2"){return"<img class='high-risk-icon' src='../img/6258_16.gif'/>"}else{if(A==="1"){return"<img class='medium-risk-icon' src='../img/6259_16.png'/>"}else{return""}}},noRiskTemplate:function(){if(!this.model.get("fall_risk").length&&!this.model.get("suicide_risk").length){return"<p class='field'>--</p>"}else{return""}},createActivityViews:function(){var F={},G,C;this.activityViews=[];this.timeIntervals=this.collection.timeIntervals;var B=this.timeIntervals;for(var D=0,A=B.length;D<A;D++){G=B[D].startDate;C=B[D].endDate;F=this.model.activities.newestInRange(G,C);if(D===0&&_.isEmpty(F)){this.activityViews.push(null)}else{if(_.isEmpty(F)){this.activityViews.push(null)}else{if(F.view){this.activityViews[this.activityViews.length]=F.view}else{var E=new ActivityView({model:F,modifiable:false,patient:this.model});this.activityViews.push(E)}}}}for(var D=0,A=this.activityViews.length;D<A;D++){if(this.activityViews[D]!=null&&D+1<A){this.activityViews[D].previousActivityView=this.activityViews[D+1]}}},activityViewExistsForModel:function(A){return _.any(this.activityViews,function(B){return B.model.cid==A.cid})},attachActivityViews:function(){for(var C=0,A=this.activityViews.length;C<A;C++){if(this.activityViews[C]==null){var B="<td class='activity-view-new'><div class='activity-view-wrap-new'  id=\""+C+'">Click to Add...</div></td>';$(B).appendTo(this.el)}else{$(this.activityViews[C].el).appendTo(this.el)}}},newActivityView:function(E){var D;if(E.target.nodeName=="TD"){D=parseInt(E.target.firstChild.id)}else{D=parseInt(E.target.id)}var C=this.model,B=new ActivityModel,F;B.patient=C;var A=this.collection.timeIntervals;B.set({STARTDT:A[D].startDate,ENDDT:A[D].endDate});C.activities.add(B);F=new ActivityView({modifiable:true,model:B,patient:C});this.activityViews[D]=F;this.el.replaceChild(F.el,this.el.cells[D+4]);if(this.activityViews[D+1]!=null&&D+1<this.activityViews.length){this.activityViews[D].previousActivityView=this.activityViews[D+1]}this.activityViews[D].launchDialog()},unCheckOffU:function(B){var A=DateTimeDialogViewSingleton.createDateTimeDialogView(this.model);A.open(B.target)},selectActivity:function(C){var A=$(C.target);var B=this;if(A.is("td")){A=A.find("div")}if(A.hasClass("selected")){var D=_.filter(this.collection.MultiSelectModel.get("selectedPatient"),function(E){return E.get("person_id")!==B.model.get("person_id")});this.collection.MultiSelectModel.set({selectedPatient:D})}else{var D=this.collection.MultiSelectModel.get("selectedPatient");D.push(this.model);this.collection.MultiSelectModel.trigger("change")}},removeAddedPatient:function(){var B=confirm("Do you want to remove "+this.model.get("name")+" from the list?");if(B===true){var A=this;this.collection.patientListsModel.set({addedPatients:_.without(A.collection.patientListsModel.get("addedPatients"),A.model)});this.removeView();this.collection.remove(this.model,{silent:true});this.updateWindowStorage();return true}else{return false}},updateWindowStorage:function(){try{var E=this;var C=WindowStorage.get("AddedPatients");if(C!=="undefined"){C=jQuery.parseJSON(C);var A=this.collection.patientListsModel;var B=_.detect(C,function(F){return _.isEqual(F.selectedList,A.get("selectedList"))});if(B){C=_.without(C,B);C.push(A);WindowStorage.set("AddedPatients",JSON.stringify(C))}}}catch(D){alert(D.message)}},removeView:function(){this.collection.unbind("change:timeIntervals",this.render);this.model.unbind("change:image_data",this.renderImageView);this.model.userPrefModel.unbind("change:offunitstatus",this.reRender);this.collection.MultiSelectModel.unbind("change",this.reRenderSelect);this.model.unbind("destroy",this.removeView,this);this.selectView=null;this.imageView=null;this.basicInfoView=null;this.riskView=null;this.activityViews=[];$(this.el).empty().remove()}});var ActivityView=Backbone.View.extend({tagName:"td",className:"activity-view active-activity-view",template:TemplateLoader.compileFromFile("templates/_Activity.handlebar.html"),events:{click:"launchDialog"},previousActivityView:null,initialize:function(){_.bindAll(this);this.model.bind("change",this.render);this.model.view=this;this.modifiable=this.options.modifiable?this.options.modifiable:false;if(this.options.patient){this.patient=this.options.patient}else{throw Error("Patient Model missing from ActivityView")}this.model.bind("destroy",this.removeView);this.render()},render:function(){var D=this,C=$(this.el),A={activity:function(){var F=D.model.get("CNT");if(F){var E="";_.each(D.model.get("LIST"),function(G){E+=G.EVENT_RESULT+";"});E=E.slice(0,E.length-1);return E}else{if(!!D.modifiable){return"Click to Add..."}else{return"--"}}}};C.html(this.template(A));C.removeClass();C.addClass(this.className);C.addClass(D.model.get("STATUS").toLowerCase()+"-status");var B=!!this.modifiable?"modifiable":"not-modifiable";C.addClass(B);return this},launchDialog:function(){var B={};var A=this.patient.collection.MultiSelectModel.get("selectedPatient");if(A.length){B=ActivityDialogViewSingleton.createActivityDialogView(this.model,this.patient,this,true)}else{B=ActivityDialogViewSingleton.createActivityDialogView(this.model,this.patient,this,false)}B.open()},removeView:function(){$(this.el).empty().remove();this.model.unbind("change",this.render);this.model.unbind("destroy",this.removeView);this.previousActivityView=null}});var ActivityDialogView=Backbone.View.extend({modifiableTemplate:TemplateLoader.compileFromFile("templates/_ModifiableActivityDialog.handlebar.html"),nonModifiableTemplate:TemplateLoader.compileFromFile("templates/_NonModifiableActivityDialog.handlebar.html"),activityView:{},isMultiSelect:false,isTabNav:false,className:"activity-dialog-view",events:{"keyup .activity-freetext-input":"freetextActivityKeyPress","click .last-activity-choice":"changeToLastActivity","click .unchart-activity":"unchartActivity","keyup .event_min":"eventMinuteValidation","change .selection":"responseSelected","click .unchart-event":"unchartEvent","change .offUCheck":"toggleSubmit"},DOC_HEIGHT:document.body.offsetHeight,initialize:function(){_.bindAll(this);if(this.options.patient){this.patient=this.options.patient}if(this.options.activityView){this.activityView=this.options.activityView}this.render()},render:function(){var B=this,A=$(this.el);this.resetIsMultiSelect();!!this.activityView.modifiable?this.renderModifiable():this.renderNonModifiable();A.dialog({modal:true,autoOpen:false,minWidth:800,title:"",buttons:[{text:"OK",className:"submitButton",disabled:true,click:function(){B.submitActivity()}},{text:"Cancel",className:"cancelButton",click:function(){$(this).dialog("close")}}],open:function(D,E){var G=$(B.activityView.el).offset();var F="";$(this).dialog("option","position",[G.left,G.top]);if(B.isMultiSelect){_.each(B.patient.collection.MultiSelectModel.get("selectedPatient"),function(H){F+=H.get("name")+"; "});F=F.slice(0,F.length-2)}else{var C=B.patient.get("gender").toUpperCase()=="MALE"?"M":"F";F=B.patient.get("name")+" "+B.patient.get("age")+", "+C}$(this).dialog("option","title",F)}});this.initSelection();return this},renderModifiable:function(){var E=this,C=$(this.el);var B=this.patient.get("location_activities");_.each(B,function(F,G){F.INDEX=G});var D={location_activities:B,modifyMessage:function(){var F=E.model.get("STATUS").toUpperCase();return F=="SAVED"||F=="DRAFT"?"Change to...":"Add..."},unchart:function(){return E.model.get("CNT")?"Unchart All":""},lastActivity:function(){return(E.activityView.previousActivityView!=null&&E.activityView.previousActivityView.model.get("CNT"))?"Use Previous Activity":""},activityDate:E.model.get("EVENTDTDISP"),offUnit:E.patient.get("offunitevent").CECD!==0&&E.model.get("STATUS")==="NONE",isNotMultiSelect:!E.isMultiSelect,nomlist:E.patient.get("offunitevent").NOMLIST};C.html(this.modifiableTemplate(D));this.$(".activity-freetext-button").attr("disabled",true);this.$(".tabs").tabs();var A=Math.max.apply(null,this.$(".selection").map(function(){return this.options.length}).get());this.$(".selection").attr("size",function(){if(A>10){if(A<E.DOC_HEIGHT/27.2){return A}else{return E.DOC_HEIGHT/27.2}}});this.setDateTimePicker()},renderNonModifiable:function(){var D=this,A=$(this.el),E=(new Date()).toString().split(" "),C=E[4];var B={location_activities:D.model.get("CNT")?D.patient.get("location_activities"):[],unchart:function(){return D.model.get("CNT")?"Unchart All":""},activityDate:D.model.get("EVENTDTDISP")+" "+C};$(this.el).html(this.nonModifiableTemplate(B));this.$('.tabs"').tabs()},initSelection:function(){var A=this;if(this.model.get("STATUS")==="SAVED"){_.each(this.model.get("LIST"),function(E){if(E.NOMID.length){var F="#"+E.EVENT_CD;var D=$(A.el);if(E.NOMID.length>1||E.NOMID[0].NOMID!==0){var B=F+" .selection";var G=[];_.each(E.NOMID,function(H){G.push(H.NOMID)});D.find(B).val(G);if(D.find(B).attr("disabled")){D.find(B).find("option:selected").css("background-color","#99cbff")}}else{var B=F+" .activity-freetext-input";var C=F+" .selection";D.find(B).val(E.FREETEXT);D.find(C).attr("disabled",true)}D.find(F).find(".unchart-event").attr("disabled",false)}})}else{if(this.model.get("STATUS")==="DRAFT"){_.each(this.model.get("LIST"),function(E){var F="#"+E.EVENT_CD;var D=$(A.el);if(E.NOMID.length>0){var B=F+" .selection";var G=[];$.each(E.NOMID,function(H,I){G[H]=parseInt(I.NOMID,10)});D.find(B).val(G);if(D.find(B).attr("disabled")){D.find(B).find("option:selected").css("background-color","#99cbff")}}else{var B=F+" .activity-freetext-input";var C=F+" .selection";D.find(B).val(E.FREETEXT);D.find(C).attr("disabled",true)}D.find(F).find(".unchart-event").attr("disabled",false)})}}},setDateTimePicker:function(){var N=this.$(".event_dt").get(0),A=this.$(".event_tm").get(0),a=this.$(".event_min").get(0),L=new Date(),R=this.model.get("STARTDT"),G=this.model.get("ENDDT"),X=DateFormatter.formatDate(L,"MM-dd-yyyy"),K=DateFormatter.formatDate(L,"HH"),B=DateFormatter.formatDate(L,"mm"),V=(L>R)&&(L<G),E=DateFormatter.formatDate(R,"MM-dd-yyyy"),e=DateFormatter.formatDate(R,"HH"),b=DateFormatter.formatDate(R,"mm"),D=DateFormatter.formatDate(G,"MM-dd-yyyy"),U=DateFormatter.formatDate(G,"HH"),Q=DateFormatter.formatDate(G,"mm"),C=this.model.get("CNT")?true:false;if(C){var T=this.model.get("EVENTDTDISP");var Z=T.split(" ");var c=Z[0].split("-");var I=Z[1].split(":");var d=DateFormatter.formatEventMonth(c[1]);prev_dt=d+"-"+c[0]+"-"+c[2]+" "+I[0]+":"+I[1];var H=d+"-"+c[0]+"-"+c[2];var F=I[0];var S=I[1]}N.options[0]=new Option(E,E);if(E!=D){N.options[1]=new Option(D,D);if(C){H==E?N.selectedIndex=0:N.selectedIndex=1}else{N.selectedIndex=1}}else{N.disabled=true}if(e!=U){var M=-1,P=0,O=0;if(e>U){for(var Y=0,f=e;f<24;Y++,f++){if(C){O=f.toString()==F?Y:O}else{if(f.toString()==K){M=Y}}A.options[Y]=new Option(f,f)}for(f=0;f<=U;f++,Y++){f="0"+f;if(C){O=f.toString()==F?Y:O}else{if(f.toString()==K){M=Y}}A.options[Y]=new Option(f,f);P=Y}}else{for(var Y=0,f=e;f<=U;Y++,f++){if(f<10&&Y>0){f="0"+f}if(C){O=f.toString()==F?Y:O}else{if(f.toString()==K){M=Y}}A.options[Y]=new Option(f,f);P=Y}}if(C){A.selectedIndex=O}else{M!=-1?A.selectedIndex=M:A.selectedIndex=P}}else{A.options[0]=new Option(U,U);A.disabled=true}if(C){a.value=S}else{V?a.value=B:a.value=Q}var J=(L).toString().split(" ");var W=J[4];$(".timezone").text(W)},open:function(){$(this.el).dialog("open")},submitActivity:function(){if($(this.el).find(".offUCheck").is(":checked")){if(this.eventDtValidation()){$(this.el).dialog("close");var G=$(this.el).find(".off-selection").find("option:selected");var D=1;var B=this.getActivityTime();var E=parseFloat(G.val());var K=G.text();if(this.isMultiSelect){_.each(this.patient.collection.MultiSelectModel.get("selectedPatient"),function(N){var P=N.get("person_id");var M=N.get("offunitevent").CECD;var L=L;var O=O;N.userPrefModel.savePref(P,D,B,M,L,O)});this.patient.collection.MultiSelectModel.clean()}else{var A=this.patient.get("person_id");var F=this.patient.get("offunitevent").CECD;var E=E;var K=K;this.patient.userPrefModel.savePref(A,D,B,F,E,K)}}}else{var I={CNT:0,EVENT_DT:"",EVENTDTDISP:"",STATUS:"DRAFT",LIST:[]};var J=$(this.el),H=this,C="";_.each(J.find(".activity-freetext-input"),function(L){C+=$(L).val()});if(this.eventDtValidation()&&this.verifySNCharacters(C)){I.EVENT_DT=this.getActivityTime();I.EVENTDTDISP=this.getActivityTime1();_.each(J.find(".tabDiv"),function(L){_.each($(L).find(".selection:enabled"),function(M){var N=[];var O=[];_.each($(M).find("option:selected"),function(Q){N.push({NOMID:parseFloat($(Q).val())+".0"});O.push(jQuery.trim($(Q).text()))});var P=H.setNomenActivity(M,N,O.join());if(P){I.LIST.push(P);I.CNT++}});_.each($(L).find(".activity-freetext-input"),function(M){if($(M).val()!==""){var N=H.setFreetextActivity(M);if(N){I.LIST.push(N);I.CNT++}}})});if(this.isMultiSelect){this.setMultiSelectActivityModel(I);this.patient.collection.MultiSelectModel.clean()}else{this.setActivityModel(I)}}$(this.el).dialog("close")}},getActivityTime:function(){var A=(DateFormatter.formatDate(new Date(this.$(".event_dt").get(0).value+" "+this.$(".event_tm").get(0).value+":"+ +this.$(".event_min").get(0).value),"dd-NNN-yyyy HH:mm:ss")+":00").toUpperCase();return A},getActivityTime1:function(){var A=(DateFormatter.formatDate(new Date(this.$(".event_dt").get(0).value+" "+this.$(".event_tm").get(0).value+":"+ +this.$(".event_min").get(0).value),"MM-dd-yyyy HH:mm"));return A},getActivityTime2:function(){var A=new Date(this.$(".event_dt").get(0).value+" "+this.$(".event_tm").get(0).value+":"+ +this.$(".event_min").get(0).value);return A},setNomenActivity:function(C,A,D){var B=parseInt($(C).closest(".tabDiv").attr("id"),10);if(D.length){return{EVENTID:0,NAME:D,CLINEVENTID:0,EVENT_CD:B,EVENT_DISP:D,EVENT_RESULT:D,FREETEXT:"",NOMID:A,INPUTPRT:0}}return false},setFreetextActivity:function(B){var C=jQuery.trim($(B).val());var A=parseInt($(B).closest(".tabDiv").attr("id"),10);if(C.length){return{EVENTID:0,NAME:C,CLINEVENTID:0,EVENT_CD:A,EVENT_DISP:C,EVENT_RESULT:C,FREETEXT:C,NOMID:[],INPUTPRT:0}}return false},setActivityModel:function(A){var B={CNT:A.CNT,EVENT_DT:A.EVENT_DT,EVENTDTDISP:A.EVENTDTDISP,STATUS:A.STATUS,LIST:A.LIST};this.model.set(B)},setMultiSelectActivityModel:function(A){var D=this;var B=this.patient.collection.timeIntervals;var E=this.getActivityTime2();var C=_.select(B,function(F){return(F.startDate<=E&&F.endDate>=E)});_.each(C,function(F){_.each(D.patient.collection.MultiSelectModel.get("selectedPatient"),function(H){var G=D.newActivityView(_.indexOf(B,F),H);G.model.set(A)})})},newActivityView:function(D,C){var B=new ActivityModel,E;B.patient=C;var A=this.patient.collection.timeIntervals;B.set({STARTDT:A[D].startDate,ENDDT:A[D].endDate});C.activities.add(B);E=new ActivityView({modifiable:true,model:B,patient:C});C.view.activityViews[D]=E;C.view.el.replaceChild(E.el,C.view.el.cells[D+4]);if(C.view.activityViews[D+1]!=null&&D+1<C.view.activityViews.length){C.view.activityViews[D].previousActivityView=C.view.activityViews[D+1]}return C.view.activityViews[D]},freetextActivityKeyPress:function(A){this.enableSubmit(A);this.enableUnchartEvent(A);this.toggleSelection(A);if(A.keyCode===13){this.nextTab()}},responseSelected:function(A){this.enableSubmit(A);this.nextTab()},nextTab:function(){if(this.isTabNav){var A=parseInt(this.$(".tabs").find(".ui-tabs-selected a:first-child").attr("rel"),10);if(A===this.patient.get("location_activities").length-1){this.submitActivity()}else{this.$(".tabs").tabs("select",A+1);this.$(".tabs").find(".ui-tabs-selected a:first-child").focus()}}},enableSubmit:function(A){this.enableUnchartEvent(A);$(":button:contains('OK')").attr("disabled",false)},toggleSubmit:function(A){if($(A.target).is(":checked")){$(":button:contains('OK')").attr("disabled",false);$(this.el).find(".tabs ").attr("disabled",true);$(this.el).find(".off-selection").show()}else{$(":button:contains('OK')").attr("disabled",true);$(this.el).find(".tabs ").attr("disabled",false);$(this.el).find(".off-selection").hide()}},enableUnchartEvent:function(A){if(A.target.className==="selection"){$(A.target).closest(".tabDiv").find("h4").attr("disabled",false)}else{if(A.target.className==="activity-freetext-input"){$(A.target).closest(".tabDiv").find("h4").attr("disabled",false)}}},toggleSelection:function(C){var B=$(this.el),D=$(C.target).val(),A=$(C.target).closest(".tabDiv").find(".selection");if(D.length){A.attr("disabled",true)}else{A.attr("disabled",false)}},changeToLastActivity:function(C){var B=$(this.el);if(this.activityView.previousActivityView==null){B.dialog("close");return this}if(this.eventDtValidation()){var A=this.activityView.previousActivityView.model;var D={CNT:A.get("CNT"),EVENT_DT:this.getActivityTime(),EVENTDTDISP:this.getActivityTime1(),STATUS:"DRAFT",LIST:[]};_.each(A.get("LIST"),function(G){var E=_.clone(G.NOMID);if(A.get("STATUS")==="SAVED"||A.get("STATUS")==="INERROR"){var F=[];_.each(E,function(H){F.push({NOMID:parseFloat(H.NOMID)+".0"})});if(F.length){if(F[0]==="0.0"){E=[]}else{E=F}}else{E=[]}}else{E=G.NOMID}D.LIST.push({EVENTID:0,NAME:G.NAME,CLINEVENTID:0,EVENT_CD:G.EVENT_CD,EVENT_DISP:G.EVENT_DISP,EVENT_RESULT:G.EVENT_RESULT,FREETEXT:G.FREETEXT,NOMID:E,INPUTPRT:0})});this.model.set(D);B.dialog("close")}},unchartActivity:function(C){var B=this.model;var A=B.get("STATUS").toUpperCase();if(A==="SAVED"||A==="INERROR"){B.inError()}else{_.each(B.get("LIST"),function(D){D.EVENT_RESULT=""});B.set({CNT:0,STATUS:"NONE"})}$(this.el).dialog("close")},unchartEvent:function(A){var B=$(A.target).closest(".tabDiv");B.find(".activity-freetext-input").val("");B.find(".selection").prop("selectedIndex",-1);B.find(".selection").attr("disabled",false);B.find(".unchart-event").attr("disabled",true);this.enableSubmit(A)},eventMinuteValidation:function(B){var A=$(".event_min").get(0).value;A=A.replace(/[^0-9]/g,"");if(A>59){A=59}$(".event_min").get(0).value=A},eventDtValidation:function(){var J=this.model.get("STARTDT"),D=this.model.get("ENDDT");var I=this.$(".event_dt").get(0).value+" "+this.$(".event_tm").get(0).value+":"+ +this.$(".event_min").get(0).value,K=DateFormatter.formatDate(J,"MM-dd-yyyy HH:mm"),F=DateFormatter.formatDate(D,"MM-dd-yyyy HH:mm");if(new Date(I)<new Date(K)){var J=this.model.get("STARTDT");var A=confirm("The entered time is outside the chosen time frame.  Do you want to use "+K+" as the Activity Date/Time instead?");if(A==true){var H=DateFormatter.formatDate(J,"MM-dd-yyyy"),E=DateFormatter.formatDate(J,"HH"),C=DateFormatter.formatDate(J,"mm");this.$(".event_dt").get(0).value=H;this.$(".event_tm").get(0).value=E;this.$(".event_min").get(0).value=C;return true}else{return false}}else{if(new Date(I)>new Date(F)){var D=this.model.get("ENDDT");var A=confirm("The entered time is outside the chosen time frame.  Do you want to use "+F+" as the Activity Date/Time instead?");if(A==true){var B=DateFormatter.formatDate(D,"MM-dd-yyyy"),L=DateFormatter.formatDate(D,"HH"),G=DateFormatter.formatDate(D,"mm");this.$(".event_dt").get(0).value=B;this.$(".event_tm").get(0).value=L;this.$(".event_min").get(0).value=G;return true}else{return false}}}return true},verifySNCharacters:function(G){var C=true;var E="@#$%^&*()+=[]\\';,{}|\"<>~_\n";var B="";var D="";try{for(var F=0;F<G.length;F++){B="";D="";if(E.indexOf(G.charAt(F))!=-1){B=G.charAt(F);D+=B;alert("Free text input can not include special character "+D);return false}}}catch(A){alert(A.message,"verifySNCharacters","",G);C=false}return C},resetIsMultiSelect:function(){if(this.model.get("STATUS")!=="NONE"){this.isMultiSelect=false}},removeDialog:function(){$(this.el).empty().remove();this.patient=null;this.activityView=null;this.model=null}});var ActivityDialogViewSingleton=(function(){var A=new ActivityDialogView({model:new ActivityModel});return{createActivityDialogView:function(B,D,E,C){if(_.isEmpty(A)){A=new ActivityDialogView({model:B,patient:D,activityView:E,isMultiSelect:C})}else{A.model=B;A.patient=D;A.activityView=E;A.isMultiSelect=C;A.isTabNav=D.collection.patientListsModel.get("tabNavInd")===1?true:false;A.render()}return A}}})();var PostToChartView=Backbone.View.extend({el:$("#chart-activities"),events:{"click	.save-to-chart":"saveToChart"},initialize:function(){_.bindAll(this,"saveToChart","disable","enable");this.patientCollection=this.options.patientCollection;this.patientCollection.bind("started-loading",this.disable);this.patientCollection.bind("finished-loading",this.enable)},saveToChart:function(){this.disable();var B=this.patientCollection.getUnsavedActivities();var A=this.patientCollection.getInErrorActivities();var C=B.concat(A);this.model.chartAllActivities(C)},disable:function(){this.$("select").attr("disabled",true);this.$("button").attr("disabled",true)},enable:function(){this.$("select").attr("disabled",false);this.$("button").attr("disabled",false)}});var NurseUnitDialogViewSingleton=(function(){return{createNurseUnitDialogView:function(C,A){var B=new NurseUnitDialogView({model:C,listView:A});return B}}})();var NurseUnitDialogView=Backbone.View.extend({nuTemplate:TemplateLoader.compileFromFile("templates/_NurseUnitDialog.handlebar.html"),className:"nurseunit-dialog-view",events:{},isNewPatient:false,initialize:function(){this.render()},render:function(){var C=this,A=$(this.el);this.setLineIndex();var B={LOCQUAL:this.model.LOCQUAL};$(this.el).html(this.nuTemplate(B));A.dialog({modal:true,autoOpen:false,minWidth:600,buttons:{Submit:function(){C.submitDialog()},Cancel:function(){$(this).dialog("close")}},open:function(D,E){$(this).dialog("option","position",[])}});return this},open:function(A,B){this.isNewPatient=A;if(B){this.newPatientDialogView=B}$(this.el).dialog("open")},setLineIndex:function(){var A=this.model.LOCQUAL.length;$.each(this.model.LOCQUAL,function(B,C){if(B%3===0){C.OPEN=true;C.CLOSE=false}else{if(B%3===2||B===A-1){C.OPEN=false;C.CLOSE=true}else{C.OPEN=false;C.CLOSE=false}}})},submitDialog:function(){var B=[];var A=[];$.each($("input:checked",this.el),function(C,D){A.push(parseInt($(D).attr("value"),10));B.push($(D).siblings("label").text())});if(this.isNewPatient){$(this.el).dialog("close");if(B.length&&A.length){this.newPatientDialogView.setSelectedNu(this.model,A);this.newPatientDialogView.changeNurseUnitText(B)}}else{this.options.listView.model.changeNurseUnitText(B);$(this.el).dialog("close");this.options.listView.model.setSelectedNu(this.model,A,true)}},removeDialog:function(){$(this.el).empty().remove();this.model=null}});var DateTimeDialogView=Backbone.View.extend({dtTemplate:TemplateLoader.compileFromFile("templates/_DateTimeDialog.handlebar.html"),isMultiSelect:false,className:"datetime-dialog-view",events:{"keyup .off_tm":"checkHour","keyup .off_min":"checkMin"},initialize:function(){this.render()},render:function(){var D=this,A=$(this.el);var E=(new Date()).toString().split(" ");var C=E[4];var B={timezone:C};$(this.el).html(this.dtTemplate(B));A.dialog({modal:true,autoOpen:false,minWidth:400,title:"Select End Date Time For Off Unit Period",buttons:{Submit:function(){if(D.dtValidation()){$(this).dialog("close");var F=D.$(".off_dt").val()+" "+D.$(".off_tm").val()+":"+ +D.$(".off_min").val();var G=new Date(F);D.submitDialog(G)}},Cancel:function(){$(D.checkbox).attr("checked","checked");$(this).dialog("close")}},open:function(G,H){$(this).dialog("option","position",[]);var F=D.model.get("gender").toUpperCase()=="MALE"?"M":"F";var I=D.model.get("name")+" "+D.model.get("age")+", "+F;$(this).dialog("option","title",I)}});return this},open:function(A){this.checkbox=A;$(this.el).dialog("open");this.setDateTimePicker()},submitDialog:function(H){var F=this;var C=this.model.collection.selectedInterval;var B=Math.ceil(Math.abs(this.startdt-H)/(60*60*1000));var G=this.model.collection.timeIntervals;var E=timeIntervalGenerator(C,G?G[0].endDate:new Date(),B);var A=E.getIntervals();var D=_.select(A,function(I){return(I.startDate<=H&&I.startDate>=F.startdt)||(I.endDate<=H&&I.endDate>=F.startdt)});_.each(D,function(J){var L=F.model.userPrefModel.get("offunitstatus").nomdisp;var O="";if(J.startDate<=H&&H<=J.endDate){O=H}else{if(J.startDate<=F.startdt&&F.startdt<=J.endDate){O=F.startdt}else{O=J.endDate}}var N={CNT:1,EVENT_DT:F.getEventDt(O),EVENTDTDISP:F.getEventDtDisp(O),STATUS:"DRAFT",LIST:[{EVENTID:0,NAME:L,CLINEVENTID:0,EVENT_CD:F.model.userPrefModel.get("offunitstatus").cecd,EVENT_DISP:L,EVENT_RESULT:L,FREETEXT:"",NOMID:[{NOMID:F.model.userPrefModel.get("offunitstatus").nomid.toString()}],INPUTPRT:0}]};var M=_.indexOf(A,J);if(M<G.length){var I=F.newActivityView(M);I.model.set(N)}else{var K=new ActivityModel(N);K.patient=F.model;F.model.activities.add(K)}});this.model.userPrefModel.removePref(this.model.get("person_id"))},newActivityView:function(D){var C=this.model,B=new ActivityModel,E;B.patient=C;var A=this.model.collection.timeIntervals;B.set({STARTDT:A[D].startDate,ENDDT:A[D].endDate});C.activities.add(B);E=new ActivityView({modifiable:true,model:B,patient:C});this.model.view.activityViews[D]=E;this.model.view.el.replaceChild(E.el,this.model.view.el.cells[D+4]);if(this.model.view.activityViews[D+1]!=null&&D+1<this.model.view.activityViews.length){this.model.view.activityViews[D].previousActivityView=this.model.view.activityViews[D+1]}return this.model.view.activityViews[D]},setDateTimePicker:function(){var C=this.getStartDt(this.model.userPrefModel.get("offunitstatus").offunitstartdt);var A=this.model.view.timeIntervals;var B=(A)?A[0].endDate:new Date();this.startdt=C;this.enddt=B;if(C.getFullYear()===B.getFullYear()&&C.getMonth()===B.getMonth()&&C.getDate()===B.getDate()){var D=DateFormatter.formatDate(C,"MM-dd-yyyy");this.$(".off_dt").append("<option value='"+D+"'>"+D+"</option>");this.$(".off_dt").attr("disabled",true)}else{var F=this.getDates(C,B);var E="";_.each(F,function(G){var H=DateFormatter.formatDate(G,"MM-dd-yyyy");E+="<option value='"+H+"'>"+H+"</option>"});this.$(".off_dt").append(E);this.$(".off_dt option:last").attr("selected","selected")}this.$(".off_tm").val(B.getHours());this.$(".off_min").val(B.getMinutes())},getStartDt:function(J){var H=J.split(" ");var C=H[0].split("-");var B=H[1].split(":");var I=C[2];var G=DateFormatter.formatEventMonth(C[1]);G=parseInt(G,10)-1;var K=C[0];var E=B[0];var D=B[1];var A=B[2];var F=B[3];return new Date(I,G,K,E,D,A,F)},getDates:function(B,A){var D=[];var C=B;var E=A;if(E.getHours()<C.getHours()){E=E.addDays(1)}while(C<=E){D.push(new Date(C));C=C.addDays(1)}return D},checkHour:function(B){var A=this.$(".off_tm").val();A=A.replace(/[^0-9]/g,"");if(A>23){A=23}this.$(".off_tm").val(A)},checkMin:function(B){var A=this.$(".off_min").val();A=A.replace(/[^0-9]/g,"");if(A>59){A=59}this.$(".off_min").val(A)},dtValidation:function(B){var C=this.$(".off_dt").val()+" "+this.$(".off_tm").val()+":"+ +this.$(".off_min").val();var J=new Date(C);if(J<this.startdt){var K=this.startdt;var A=confirm("The entered time is outside the chosen time frame.  Do you want to use "+K+" as the Activity Date/Time instead?");if(A===true){var I=DateFormatter.formatDate(K,"MM-dd-yyyy"),G=DateFormatter.formatDate(K,"HH"),F=DateFormatter.formatDate(K,"mm");this.$(".off_dt").val(I);this.$(".off_tm").val(G);this.$(".off_min").val(F);return true}else{return false}}else{if(J>this.enddt){var E=this.enddt;var A=confirm("The entered time is outside the chosen time frame.  Do you want to use "+E+" as the Activity Date/Time instead?");if(A===true){var D=DateFormatter.formatDate(E,"MM-dd-yyyy"),L=DateFormatter.formatDate(E,"HH"),H=DateFormatter.formatDate(E,"mm");this.$(".off_dt").val(D);this.$(".off_tm").val(L);this.$(".off_min").val(H);return true}else{return false}}}return true},getEventDt:function(A){var B=(DateFormatter.formatDate(A,"dd-NNN-yyyy HH:mm:ss")+":00").toUpperCase();return B},getEventDtDisp:function(B){var A=(DateFormatter.formatDate(B,"MM-dd-yyyy HH:mm"));return A},removeDialog:function(){$(this.el).empty().remove();this.model=null}});Date.prototype.addDays=function(B){var A=new Date(this.valueOf());A.setDate(A.getDate()+B);return A};var DateTimeDialogViewSingleton=(function(){return{createDateTimeDialogView:function(A){var B=new DateTimeDialogView({model:A});return B}}})();var NewPatientDialogView=Backbone.View.extend({npTemplate:TemplateLoader.compileFromFile("templates/_NewPatientDialog.handlebar.html"),className:"newptient-dialog-view",patients:{},patientlists:{},events:{"change .patient-lists-select":"ptlistChange","change .fu-lists-select":"fulistChange","click #nuLink":"setSelectedFacility"},initialize:function(){_.bindAll(this)},render:function(){var C=this;this.model.bind("change",this.fillPatientList);this.model.bind("started-loading",function(){$(C.el).attr("disabled","disabled")});this.model.bind("finished-loading",function(){$(C.el).removeAttr("disabled")});var A=$(this.el);var B={PTLIST:this.patientlists.getLists(),FUQUAL:this.patientlists.getFacilities()};$(this.el).html(this.npTemplate(B));A.dialog({modal:true,autoOpen:false,minWidth:900,minHeight:400,title:"Add New Patient",buttons:{Submit:function(){C.close();C.submitPatients()},Cancel:function(){C.close()}},open:function(D,E){$(this).dialog("option","position",[])}});return this},open:function(){$(this.el).dialog("open")},close:function(){$(this.el).dialog("close")},submitPatients:function(){var C=new NewPatientModel;C.patients=this.patients;var E=this.$(".selection option:selected");var D=E.length;var A=[];var B=this;_.each(E,function(G){var F=_.find(B.model.get("patients"),function(H){return H.PT_ID===parseInt(G.value,10)});A.push(F)});C.set({pt_cnt:D,patients:A});C.getBhInfo(1)},ptlistChange:function(D){this.resetFu();this.resetPtSelect();$target=$(D.target);if($target.find("option:selected").val()!=="0"){var A=parseInt($target.find("option:selected").val(),10);var B=_.find(this.patientlists.PTLISTS.PTLIST,function(E){return E.LISTID===A});B.NULIST=[];try{this.close();this.model.retrieve(B);this.open()}catch(C){}}},fulistChange:function(A){this.resetPtlist();this.resetNurseUnitText();this.resetPtSelect();$target=$(A.target)},setSelectedFacility:function(C){this.resetPtlist();this.resetPtSelect();var B=this.patientlists.getSelectedFacility($(".fu-lists-select option:selected").attr("value"));if(B===undefined){alert("Please select a valid facility.")}else{var A=NurseUnitDialogViewSingleton.createNurseUnitDialogView(B,this);A.open(true,this)}},resetFu:function(){this.$(".fu-lists-select").find("option:first").attr("selected","selected");this.$("#nuLink").text("Nurse Units");this.$("#nuLink").attr("title","Click to Open Nurse Units.")},resetPtlist:function(){this.$(".patient-lists-select").find("option:first").attr("selected","selected")},resetPtSelect:function(){this.$(".selection").html("")},resetNurseUnitText:function(){this.$("#nuLink").text("Nurse Units");this.$("#nuLink").attr("title","Click to Open Nurse Units.")},fillPatientList:function(){var I=this.model.get("patients");var A="&#160;";var J="";var E=0,C=0,H=0,G=0,F=0,D=0,B=0;_.each(I,function(N){if(N.NAME.length>E){E=N.NAME.length}if(N.AGE.length>C){C=N.AGE.length}if(N.GENDER.length>H){H=N.GENDER.length}if(N.BIRTHDTJS.length>G){G=N.BIRTHDTJS.length}if(N.FIN.length>D){D=N.FIN.length}if(N.MRN.length>F){F=N.MRN.length}var O=N.NURSE_UNIT;var M=N.ROOM;var L=N.BED;if(M!==""){M="/"+M}if(L!==""){L="/"+L}var K=O+M+L;if(K.length>B){B=K.length}});_.each(I,function(N){J+="<option value='"+N.PT_ID+"'>";J+=N.NAME+A.repeat(E-N.NAME.length+5);J+=N.GENDER+A.repeat(H-N.GENDER.length+5);J+="DOB:"+N.BIRTHDTJS+A.repeat(G-N.BIRTHDTJS.length+5);J+="FIN:"+N.FIN+A.repeat(D-N.FIN.length+5);J+="MRN:"+N.MRN+A.repeat(F-N.MRN.length+5);var O=N.NURSE_UNIT;var M=N.ROOM;var L=N.BED;if(M!==""){M="/"+M}if(L!==""){L="/"+L}var K=O+M+L;J+="Location:"+K+A.repeat(B-K.length+5);J+="</option>"});this.$(".selection").append(J)},setSelectedNu:function(D,C,B){if(C.length>0){var F=[];_.each(D.LOCQUAL,function(G){if(_.indexOf(C,G.NULOCATIONCD)!=-1){delete G.OPEN;delete G.CLOSE;F.push(G)}});var E=_.clone(D);E.LOCQUAL=F;var A={PRSNLID:Criterion.personnel_id,LISTID:-1,LISTTYPECD:0,DEFAULTLOCCD:0,NULIST:[E]};this.close();this.model.retrieve(A);this.open()}},changeNurseUnitText:function(A){if(A.length>0){var B="";$.each(A,function(C,D){B=B+D+"; "});B=B.slice(0,B.length-2);this.$("#nuLink").attr("title",B);if(B.length>20){B=B.slice(0,20);B+="..."}this.$("#nuLink").text(B)}},removeDialog:function(){$(this.el).empty().remove();this.patients=null;this.patientlists=null}});String.prototype.repeat=function(A){return new Array(A+1).join(this)};var NewPatientDialogViewSingleton=(function(){var A=new NewPatientDialogView({model:new NewPatientModel});return{createNewPatientDialogView:function(B){if(_.isEmpty(A)){A=new NewPatientDialogView({model:new NewPatientModel,patients:B,patientlists:B.patientListsModel})}else{A.model=new NewPatientModel;A.patients=B;A.patientlists=B.patientListsModel;A.render()}return A}}})();var TimeRangeSelectView=Backbone.View.extend({template:TemplateLoader.compileFromFile("templates/_TimeRangeSelect.handlebar.html"),events:{"change .time-range-select":"setTimeRange"},initialize:function(){_.bindAll(this);this.model.bind("started-loading",this.disable);this.model.bind("finished-loading",this.enable);this.render();this.disable()},render:function(){var A={RANGES:this.model.getTimeRangeOptions()};$(this.el).html(this.template(A));return this},setTimeRange:function(){if(_.isEmpty(this.model)){return false}this.select=this.$(".time-range-select",this.el)[0];this.option=parseInt(this.select.options[this.select.selectedIndex].value,10);this.model.setTimeRange(this.option);this.model.createTimeIntervals(this.model.selectedInterval)},disable:function(){this.$("select").attr("disabled",true);this.$("button").attr("disabled",true)},enable:function(){this.$("select").attr("disabled",false);this.$("button").attr("disabled",false)},remove:function(){$(this.el).empty().remove();this.model.bind("started-loading",this.disable);this.model.bind("finished-loading",this.enable)}});function init(){Criterion.unloadParams();var A=new UtilJsonXml({debug_mode_ind:Criterion.debug_mode_ind,disable_firebug:true});PatientImageRetriever.setJsonHandler(A);var E=new PatientListsModel({json_handler:A});var F=new PatientListsView({model:E});$(F.el).appendTo($("#patient-lists"));E.retrieve();var C=new PatientCollection();C.patientListsModel=E;C.json_handler=A;C.trigger("change:json_handler");C.bind("started-loading",function(){F.disable()});C.bind("finished-loading",function(){F.enable()});E.bind("change:selectedList",function(){C.retrieve(E.get("selectedList"));$("#ptpopMessage").remove()});var H=new TimeIntervalSelectView({model:C});$(H.el).appendTo($("#time-intervals"));var D=new TimeRangeSelectView({model:C});$(D.el).appendTo($("#time-ranges"));dashboardView=new DashboardView({collection:C});$(dashboardView.el).appendTo($("#patient-dashboard-wrap"));var G=new PostToChartModel({json_handler:A,collection:C});G.bind("posted",function(){if(E.get("selectedList").LISTID===-1){WindowStorage.set("StoredFnu",JSON.stringify(E.get("selectedList").NULIST))}else{WindowStorage.set("StoredIndex",E.get("selectedList").LISTID)}window.location.reload()});var B=new PostToChartView({model:G,patientCollection:C});B.disable();$(window).unload(function(){C.destroyCollection();E.destroyPatientListsModel();G.destroy()})}$(document).ready(function(){init()});