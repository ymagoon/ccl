<!DOCTYPE html>

<html>
<head>
  <title>printdialogdir.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="Gruntfile.html">
                Gruntfile.js
              </a>
            
              
              <a class="source" href="server.html">
                server.js
              </a>
            
              
              <a class="source" href="accordionctrl.html">
                accordionctrl.js
              </a>
            
              
              <a class="source" href="appctrl.html">
                appctrl.js
              </a>
            
              
              <a class="source" href="calendarctrl.html">
                calendarctrl.js
              </a>
            
              
              <a class="source" href="calendarnotesctrl.html">
                calendarnotesctrl.js
              </a>
            
              
              <a class="source" href="listctrl.html">
                listctrl.js
              </a>
            
              
              <a class="source" href="accordionapptdir.html">
                accordionapptdir.js
              </a>
            
              
              <a class="source" href="accordiondir.html">
                accordiondir.js
              </a>
            
              
              <a class="source" href="accordionmeddir.html">
                accordionmeddir.js
              </a>
            
              
              <a class="source" href="accordionorderdir.html">
                accordionorderdir.js
              </a>
            
              
              <a class="source" href="accordionphasedir.html">
                accordionphasedir.js
              </a>
            
              
              <a class="source" href="accordionplandir.html">
                accordionplandir.js
              </a>
            
              
              <a class="source" href="accordionregimendir.html">
                accordionregimendir.js
              </a>
            
              
              <a class="source" href="adddialogdir.html">
                adddialogdir.js
              </a>
            
              
              <a class="source" href="calendarcontrolsdir.html">
                calendarcontrolsdir.js
              </a>
            
              
              <a class="source" href="calendardatedir.html">
                calendardatedir.js
              </a>
            
              
              <a class="source" href="calendardaydir.html">
                calendardaydir.js
              </a>
            
              
              <a class="source" href="calendardir.html">
                calendardir.js
              </a>
            
              
              <a class="source" href="calendarlistdir.html">
                calendarlistdir.js
              </a>
            
              
              <a class="source" href="hoverhighlightdir.html">
                hoverhighlightdir.js
              </a>
            
              
              <a class="source" href="jquerydatepicker.html">
                jquerydatepicker.js
              </a>
            
              
              <a class="source" href="listdatedir.html">
                listdatedir.js
              </a>
            
              
              <a class="source" href="modalcalendardir.html">
                modalcalendardir.js
              </a>
            
              
              <a class="source" href="noteinputdir.html">
                noteinputdir.js
              </a>
            
              
              <a class="source" href="printcalendardatedir.html">
                printcalendardatedir.js
              </a>
            
              
              <a class="source" href="printcalendardaydir.html">
                printcalendardaydir.js
              </a>
            
              
              <a class="source" href="printcalendarviewdir.html">
                printcalendarviewdir.js
              </a>
            
              
              <a class="source" href="printdialogdir.html">
                printdialogdir.js
              </a>
            
              
              <a class="source" href="printlistviewdir.html">
                printlistviewdir.js
              </a>
            
              
              <a class="source" href="printtemplate.html">
                printtemplate.js
              </a>
            
              
              <a class="source" href="qtipdir.html">
                qtipdir.js
              </a>
            
              
              <a class="source" href="schedulableicondir.html">
                schedulableicondir.js
              </a>
            
              
              <a class="source" href="statusdialogdir.html">
                statusdialogdir.js
              </a>
            
              
              <a class="source" href="windowresizedir.html">
                windowresizedir.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="blackbird.html">
                blackbird.js
              </a>
            
              
              <a class="source" href="dc_mp_js_util_mpage.html">
                dc_mp_js_util_mpage.js
              </a>
            
              
              <a class="source" href="oncmp_core.html">
                oncmp_core.js
              </a>
            
              
              <a class="source" href="printerConfig_template.html">
                printerConfig_template.js
              </a>
            
              
              <a class="source" href="xml2json.html">
                xml2json.js
              </a>
            
              
              <a class="source" href="animationsmod.html">
                animationsmod.js
              </a>
            
              
              <a class="source" href="appmod.html">
                appmod.js
              </a>
            
              
              <a class="source" href="controllersmod.html">
                controllersmod.js
              </a>
            
              
              <a class="source" href="directivesmod.html">
                directivesmod.js
              </a>
            
              
              <a class="source" href="daodevsvc.html">
                daodevsvc.js
              </a>
            
              
              <a class="source" href="daoprodsvc.html">
                daoprodsvc.js
              </a>
            
              
              <a class="source" href="notesmedssvc.html">
                notesmedssvc.js
              </a>
            
              
              <a class="source" href="notesmedssvcdev.html">
                notesmedssvcdev.js
              </a>
            
              
              <a class="source" href="pubsubsvc.html">
                pubsubsvc.js
              </a>
            
              
              <a class="source" href="services.html">
                services.js
              </a>
            
              
              <a class="source" href="signdevsvc.html">
                signdevsvc.js
              </a>
            
              
              <a class="source" href="signprodsvc.html">
                signprodsvc.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>printdialogdir.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>This module is useful to construct the Print Dialog with filters and preview information.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>angular.module(<span class="hljs-string">'calview.directives'</span>).directive(<span class="hljs-string">'printDialog'</span>, [
  <span class="hljs-string">'dao'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dao, $timeout)</span> {</span>
    <span class="hljs-keyword">return</span> {
      templateUrl: <span class="hljs-string">"printdialogdir.html"</span>,
      replace: <span class="hljs-literal">true</span>,
      restrict: <span class="hljs-string">'E'</span>,
      link: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(scope, iElement, iAttrs, controller)</span> {</span>
        <span class="hljs-keyword">var</span> init, watchers;
        scope.firstTimeLoading = <span class="hljs-literal">true</span>;
        init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> timerMPage;		  
		  <span class="hljs-keyword">try</span>{
		      timerMPage = MP_Util.CreateTimer(<span class="hljs-string">"USR:MPG TC Print Preview"</span>);
			  <span class="hljs-keyword">if</span>(timerMPage){
				  timerMPage.Start();
			     }
			     
		   }
		   <span class="hljs-keyword">catch</span>(err)
		   {
		   	<span class="hljs-keyword">if</span>(timerMPage){
				  timerMPage.Stop();
			  }
			  log.info(<span class="hljs-string">'err.description'</span>);
		   }
		   
      	  scope.patientName = vars.patientName;
       	  scope.PrintMode = <span class="hljs-literal">true</span>;
      	  scope.patientDOB =  moment(vars.patientDOB).format(<span class="hljs-string">'L'</span>);
      	  scope.DOB = i18n.DOB;
          scope.dialogTitle = i18n.oncology.calview.PRINT_PREVIEW_TITLE;
          scope.dateRange = i18n.oncology.calview.DATE_RANGE;
          scope.fromDate = i18n.oncology.calview.FROM;
          scope.toDate = i18n.oncology.calview.TO;
          scope.template = i18n.oncology.calview.PATIENT_CARE_TEMPLATE;
          scope.calEvents = i18n.oncology.calview.CALENDAR_EVENTS;
          scope.blankCalendar = i18n.oncology.calview.BLANK_CALENDAR;
          scope.patSched = i18n.oncology.calview.PATIENT_SCHEDULE;
          scope.schedEvents = i18n.oncology.calview.SCHED_EVENTS;
          scope.estEvents = i18n.oncology.calview.EST_EVENTS;
          scope.appointments = i18n.oncology.calview.APPOINTMENTS;
          scope.chemo = i18n.oncology.calview.CHEMO;
          scope.labs = i18n.oncology.calview.LABS;
          scope.prescriptions = i18n.oncology.calview.PRESCRIPTIONS;
          scope.imaging = i18n.oncology.calview.IMAGING;
          scope.notesForPat = i18n.oncology.calview.NOTES_FOR_PAT;
          scope.calNotes = i18n.oncology.calview.CALENDAR_NOTES;
          scope.addNote = i18n.ADD;
          scope.page = i18n.oncology.calview.PAGE;
	      scope.ofLabel = i18n.oncology.calview.OF;
          scope.printLabel = i18n.oncology.calview.PRINT;
          scope.sign = i18n.SIGN;
          scope.signCheckLabel = i18n.oncology.calview.SIGN_CHECKBOX_LABEL;
          scope.cancelLabel = i18n.oncology.calview.CANCEL;
          scope.patientSchedule = i18n.oncology.calview.PATIENT_TREATMENT_SCHEDULE;
		  scope.pageCount = <span class="hljs-number">2</span>;
          scope.currentDateTime= moment().format(<span class="hljs-string">"h:mmA L"</span>);
          scope.startDate = <span class="hljs-string">'MM/DD/YYYY'</span>;
          scope.endDate = <span class="hljs-string">'MM/DD/YYYY'</span>;
          scope.closestSunday = <span class="hljs-number">0</span>;
          scope.startDateInUnix = <span class="hljs-number">0</span>;
          scope.endDateInUnix = <span class="hljs-number">0</span>;
          scope.colHeight = <span class="hljs-number">0</span>;
          scope.checkboxes = iElement.find(<span class="hljs-string">'input[type=checkbox]'</span>);
          scope.printNotes = [];
          scope.printXmlObject = <span class="hljs-string">""</span>; 
          scope.printXmls = [];
          scope.selectedFacility  = vars.facilityName;
          scope.firstTimeLoading = <span class="hljs-literal">false</span>;
          scope.addNotetext = <span class="hljs-string">""</span>;
          scope.saveDocumentFlag = <span class="hljs-literal">true</span>;
          scope.showPrintDialog = <span class="hljs-literal">true</span>;
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          
          scope.Scan();
          scope.addOriginalstate(); <span class="hljs-comment">// adding main page filter states</span>
         		 
		  <span class="hljs-keyword">if</span>(timerMPage){
			 timerMPage.Stop();
			}
			
		   <span class="hljs-keyword">return</span> scope.pageCount = <span class="hljs-number">1</span>;
          
        };
              
         scope.addNotes = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

              <span class="hljs-keyword">if</span>(scope.printNotes.length &lt; <span class="hljs-number">5</span> &amp;&amp; scope.addNotetext !=<span class="hljs-string">''</span>)
              {
	              scope.printNotes.push(scope.addNotetext);
	              scope.addNotetext = <span class="hljs-string">""</span>;
	              $timeout((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
	                scope.$apply();
	              }), <span class="hljs-number">1</span>);
              }
            };
            scope.closeDialog = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            	scope.showPrintDialog = <span class="hljs-literal">false</span>;
            	vars.showNothing = <span class="hljs-number">0</span>; 
            	validatePrefChanges();   
            };</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Binary search through the dates array to find the Date_ object that corresponds to the date selected in jquery datepicker.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        scope.findSelectionInDates = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(selectedDate)</span> {</span>
          <span class="hljs-keyword">var</span> currentIndex, currentUnixStamp, maxIndex, minIndex, selectedDateUnix, selectedIndex;
          selectedDateUnix = moment(selectedDate).valueOf();
          minIndex = <span class="hljs-number">0</span>;
          maxIndex = scope.$$childHead.dates.length - <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> (minIndex &lt;= maxIndex) {
            currentIndex = (minIndex + maxIndex) / <span class="hljs-number">2</span> | <span class="hljs-number">0</span>;
            currentUnixStamp = scope.$$childHead.dates[currentIndex].unixStamp;
            <span class="hljs-keyword">if</span> (currentUnixStamp &lt; selectedDateUnix) {
              minIndex = currentIndex + <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentUnixStamp &gt; selectedDateUnix) {
              maxIndex = currentIndex - <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> {
              selectedIndex = currentIndex;
              <span class="hljs-keyword">while</span> (moment(scope.$$childHead.dates[scope.startDateInUnix].unixStamp).day() !== <span class="hljs-number">0</span>) {
                currentIndex--;
              }
              scope.closestSunday = currentIndex;
              <span class="hljs-keyword">return</span> selectedIndex;
            }
          }
        };
         scope.printSliceChanged = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
         	$timeout((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>       
           scope.$broadcast(<span class="hljs-string">'printSliceChanged'</span>, scope.$$childHead.slice);
          }), <span class="hljs-number">10</span>);

        };
        scope.clearSchedulables = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> i;
          i = <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> (i &lt; scope.checkboxes.length) {
            scope.checkboxes[i].disabled = <span class="hljs-literal">true</span>;
            scope.checkboxes[i].checked = <span class="hljs-literal">false</span>;
            i++;
          }
          
          scope.$$childHead.showAppts = <span class="hljs-literal">false</span>;
          scope.$$childHead.showChemo = <span class="hljs-literal">false</span>;
          scope.$$childHead.showMeds = <span class="hljs-literal">false</span>;
          scope.$$childHead.showNotes = <span class="hljs-literal">false</span>;
          scope.$$childHead.showSched = <span class="hljs-literal">false</span>;
          scope.$$childHead.showEst = <span class="hljs-literal">false</span>;
          vars.showNothing = <span class="hljs-number">1</span>;
          vars.prefSeq = <span class="hljs-number">0</span>;
          scope.blankCalendarRadio = <span class="hljs-literal">true</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">false</span>;
          scope.printSliceChanged();
        };
        scope.addAllSchedulables = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        	
          <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;
          <span class="hljs-keyword">while</span> (i &lt; scope.checkboxes.length) {
            scope.checkboxes[i].disabled = <span class="hljs-literal">false</span>;
            scope.checkboxes[i].checked = <span class="hljs-literal">true</span>;
            i++;
          }
         
          scope.$$childHead.showAppts = <span class="hljs-literal">true</span>;
          scope.$$childHead.showChemo = <span class="hljs-literal">true</span>;
          scope.$$childHead.showMeds = <span class="hljs-literal">true</span>;
          scope.$$childHead.showNotes = <span class="hljs-literal">true</span>;
          scope.$$childHead.showSched = <span class="hljs-literal">true</span>;
          scope.$$childHead.showEst = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">1</span>; 
          vars.prefSeq = <span class="hljs-number">0</span>;
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;   
          scope.printSliceChanged();
        };
        
         scope.addOriginalstate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
           <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;
          scope.blankCalendarRadio = <span class="hljs-literal">true</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">false</span>;
          vars.showNothing = <span class="hljs-number">2</span>;
          vars.prefSeq = <span class="hljs-number">0</span>;		  
          <span class="hljs-keyword">while</span> (i &lt; scope.checkboxes.length) {
            scope.checkboxes[i].disabled = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (i === <span class="hljs-number">1</span> ){
            	 scope.checkboxes[i].checked = scope.$$childHead.showSched; 
            	
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i ===<span class="hljs-number">2</span>){
            	 scope.checkboxes[i].checked = scope.$$childHead.showEst;
            	   	
            } 
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i ===<span class="hljs-number">3</span>){
            	 scope.checkboxes[i].checked = scope.$$childHead.showAppts ;
            	  
            } 
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i ===<span class="hljs-number">4</span>){
            	 scope.checkboxes[i].checked = scope.$$childHead.showChemo;
            	  
            } 
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i ===<span class="hljs-number">5</span>){
            	 scope.checkboxes[i].checked =    scope.$$childHead.showMeds;         	  
            } 
            <span class="hljs-keyword">else</span>{
            	 scope.checkboxes[i].checked = scope.$$childHead.showNotes;            	  
            } 
           
           <span class="hljs-keyword">if</span>(scope.checkboxes[i].checked)  
           {
            	 scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
                 scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;   
           }
           i++;
          }
          
         scope.printSliceChanged();
         
        };
        
        scope.toggleShowSched = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showSched = !scope.$$childHead.showSched;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;   
         
        };
        scope.toggleShowEst = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showEst = !scope.$$childHead.showEst;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;     
        };
        scope.toggleShowAppts = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showAppts = !scope.$$childHead.showAppts;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;     
        };
        scope.toggleShowChemo = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showChemo = !scope.$$childHead.showChemo;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;     
        };
        scope.toggleShowMeds = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showMeds = !scope.$$childHead.showMeds;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;     
        };
        scope.toggleShowNotes = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          scope.$$childHead.showNotes = !scope.$$childHead.showNotes;
          scope.printSliceChanged();
          scope.blankCalendarRadio = <span class="hljs-literal">false</span>;
          scope.patSchedCalendarRadio = <span class="hljs-literal">true</span>;
          vars.showNothing = <span class="hljs-number">2</span>;     
        };
        scope.deletePrintNote = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
          scope.printNotes.splice(index, <span class="hljs-number">1</span>);
        };
        scope.nextPage = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">if</span> (scope.pageCount !== <span class="hljs-number">2</span>) {
            $(<span class="hljs-string">'#listViewDiv'</span>).removeClass(<span class="hljs-string">'print-list-hide'</span>);
              scope.pageCount = scope.pageCount + <span class="hljs-number">1</span>;    
               
           }
        };
        scope.prevPage = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">if</span> (scope.pageCount !== <span class="hljs-number">1</span>) {
            $(<span class="hljs-string">'#listViewDiv'</span>).addClass(<span class="hljs-string">'print-list-hide'</span>);
            scope.pageCount = scope.pageCount - <span class="hljs-number">1</span>;
           
          }
        };

    	combo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
		{</span>
			
		  <span class="hljs-keyword">var</span> mySelect = document.getElementById(<span class="hljs-string">'mySelect'</span>);
		  	
		  <span class="hljs-keyword">if</span>(mySelect.selectedIndex != -<span class="hljs-number">1</span>)	
		     scope.selectedFacility = mySelect.options[mySelect.selectedIndex].value; 
		  		  		
		  scope.$broadcast(<span class="hljs-string">'printxmlChanged'</span>, scope.selectedFacility, scope.printXmlObject);
		  scope.$apply();
		};
  
		
		scope.Scan = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
		{</span>
			<span class="hljs-keyword">try</span>{				
				  	 <span class="hljs-keyword">var</span> m_xmlDoc = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Msxml2.DOMDocument.6.0"</span>);
					 m_xmlDoc.async = <span class="hljs-string">"false"</span>;
				    
				     <span class="hljs-keyword">var</span> m_xmlFile = <span class="hljs-string">"TCPrintTemplate.xml"</span> ;
				     <span class="hljs-keyword">var</span> xmlLoc = <span class="hljs-string">"file://"</span> + vars.XMLLocation+ m_xmlFile;
				     log.info(<span class="hljs-string">'Location name:'</span> + xmlLoc); 
				     success = m_xmlDoc.load(xmlLoc);
				   
				     
				     <span class="hljs-keyword">if</span>(success)
				     {
				       <span class="hljs-keyword">var</span> xmlObj=m_xmlDoc.documentElement;
				       <span class="hljs-keyword">if</span> (xmlObj) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>convert the data to JSON and provide
it to the success function below</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				           log.info(xmlObj.xml);
				            <span class="hljs-keyword">var</span> x2js = <span class="hljs-keyword">new</span> X2JS();
				            <span class="hljs-keyword">var</span> json = x2js.xml_str2json(xmlObj.xml);
				            scope.printXmlObject = json;
				            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i= <span class="hljs-number">0</span> ; i &lt; json.TreatmentCalendar.PrintTemplate.length; i++)
				            {
				            	<span class="hljs-keyword">var</span> LocName= json.TreatmentCalendar.PrintTemplate[i]._id;
				            	scope.printXmls.push(LocName);
				            }
				            
				            
				            <span class="hljs-keyword">if</span>(json.TreatmentCalendar.Printout != <span class="hljs-literal">undefined</span>)
				            {
				             scope.PrintMode = json.TreatmentCalendar.Printout;
				            }
 						 }
				       }
				        <span class="hljs-keyword">else</span> {
							log.error(<span class="hljs-string">"XML could not be found"</span>);
							<span class="hljs-keyword">var</span> Xmlerror = i18n.oncology.calview.PRINT_TEMPLATE_ERROR;
							alert(Xmlerror);
							
						}
					}

			<span class="hljs-keyword">catch</span>(err) {
			    
			    log.info(<span class="hljs-string">'inside catch block'</span> + err.message);
			    		
			    	<span class="hljs-keyword">var</span> Xmlerror = i18n.oncology.calview.PRINT_TEMPLATE_ERROR;
							alert(Xmlerror);
			    			<span class="hljs-keyword">if</span> (window.XMLHttpRequest)
							  {<span class="hljs-comment">// code for IE7+, Firefox, Chrome, Opera, Safari</span>
							  xmlhttp=<span class="hljs-keyword">new</span> XMLHttpRequest();
							  }
							<span class="hljs-keyword">else</span>
							  {<span class="hljs-comment">// code for IE6, IE5</span>
							  xmlhttp=<span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Microsoft.XMLHTTP"</span>);
							  }
							xmlhttp.open(<span class="hljs-string">"GET"</span>,<span class="hljs-string">"..\\xml\\TCPrintTemplate.xml"</span>,<span class="hljs-literal">false</span>);
							xmlhttp.send();
							xmlDoc=xmlhttp.responseText; 
							
							
							<span class="hljs-keyword">var</span> x2js = <span class="hljs-keyword">new</span> X2JS();
				            <span class="hljs-keyword">var</span> json = x2js.xml_str2json(xmlDoc);
				            scope.printXmlObject = json;
				            <span class="hljs-keyword">if</span>(json != <span class="hljs-literal">null</span>)
				            {
				               <span class="hljs-keyword">if</span>( json.TreatmentCalendar.PrintTemplate.length != <span class="hljs-literal">undefined</span>)
				               {
						            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i= <span class="hljs-number">0</span> ; i &lt; json.TreatmentCalendar.PrintTemplate.length; i++)
						            {
						            	<span class="hljs-keyword">var</span> LocName= json.TreatmentCalendar.PrintTemplate[i]._id;
						            	scope.printXmls.push(LocName);					            		
						            }
					            }
					            <span class="hljs-keyword">else</span>
					            {
					            	<span class="hljs-keyword">var</span> LocName= json.TreatmentCalendar.PrintTemplate._id;
						            scope.printXmls.push(LocName);	
					            }
					            <span class="hljs-keyword">if</span>(json.TreatmentCalendar.Printout != <span class="hljs-literal">undefined</span>)
					            {
					             scope.PrintMode = json.TreatmentCalendar.Printout;
					            }
				            }
			   
			   }
				

		
		$timeout((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			   	<span class="hljs-keyword">var</span> mySelect = document.getElementById(<span class="hljs-string">'mySelect'</span>);
			 	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i, j = <span class="hljs-number">0</span>; i = mySelect.options[j]; j++) {
				 <span class="hljs-keyword">if</span>(i.value == scope.selectedFacility) {
				     mySelect.selectedIndex = j;
			         <span class="hljs-keyword">break</span>;
			      }
			     }
	             combo();
	              }), <span class="hljs-number">1</span>);
		};
		
		
		scope.validatePrefChanges = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    	        <span class="hljs-keyword">var</span> userPrefs = <span class="hljs-string">''</span>;			
			    <span class="hljs-keyword">if</span>(vars.showAccord == <span class="hljs-literal">true</span>)
			       userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			       userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showList == <span class="hljs-literal">true</span>)
			      userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			      userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showSched == <span class="hljs-literal">true</span>)
			      userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			      userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showEst == <span class="hljs-literal">true</span>)
			      userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			      userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showAppts == <span class="hljs-literal">true</span>)
			     userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			     userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showChemo == <span class="hljs-literal">true</span>)
			     userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			     userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showMeds == <span class="hljs-literal">true</span>)
			      userPrefs  = userPrefs +<span class="hljs-string">'1,'</span>;
			    <span class="hljs-keyword">else</span>
			      userPrefs  = userPrefs +<span class="hljs-string">'0,'</span>;
			    
			    <span class="hljs-keyword">if</span>(vars.showNotes == <span class="hljs-literal">true</span>)
			      userPrefs  = userPrefs +<span class="hljs-string">'1'</span>;
			    <span class="hljs-keyword">else</span>
			      userPrefs  = userPrefs +<span class="hljs-string">'0'</span>; 
			      
			      <span class="hljs-keyword">if</span>(vars.prefContext === <span class="hljs-string">''</span> )
			         vars.prefContext = userPrefs;
			         
			      <span class="hljs-keyword">if</span>(vars.prefContext !== userPrefs)
			       {
			       	vars.prefContext = userPrefs;
			       	dao.call(scope.savePreferences());
			       } 

    };
	scope.savePreferences = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>	
			
            <span class="hljs-keyword">return</span> {
              error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, status, headers, config)</span> {</span>
                log.error(<span class="hljs-string">"status: "</span> + status + <span class="hljs-string">"\n"</span>);
                log.error(<span class="hljs-string">"data: "</span> + data + <span class="hljs-string">"\n\n"</span>);
                 <span class="hljs-keyword">var</span> docError = i18n.oncology.calview.SAVE_PREF_ERROR;
                 alert(docError);
                 log.error(<span class="hljs-string">'Failed to save Preferences for user.'</span>);
              },
              params: <span class="hljs-string">"'MINE',"</span> + vars.prefContext + <span class="hljs-string">','</span> + vars.prefSeq,
              success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, status, headers, config)</span> {</span>
                log.debug(<span class="hljs-string">"status: "</span> + status + <span class="hljs-string">"\n"</span>);
                log.debug(<span class="hljs-string">"data: "</span> + (<span class="hljs-built_in">JSON</span>.stringify(data[<span class="hljs-number">0</span>])) + <span class="hljs-string">"\n\n"</span>);
              },
              url: <span class="hljs-string">'onc_tc_save_preferences'</span>
            };
          };
       
        
        scope.startPrint = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(flag)</span> {</span>        	
        	
          <span class="hljs-keyword">var</span> divToPrint, fauxWindow, htmlDocument, htmlDocument2, middleOfString, patientNoteListHolder, savePrintDocument, saveTextAsFile, saveTextAsFile2;
          savePrintDocument = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(htmlBlock)</span> {</span>
            <span class="hljs-keyword">return</span> {
              error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, status, headers, config)</span> {</span>
                log.error(<span class="hljs-string">"status: "</span> + status + <span class="hljs-string">"\n"</span>);
                log.error(<span class="hljs-string">"data: "</span> + data + <span class="hljs-string">"\n\n"</span>);
                 <span class="hljs-keyword">var</span> docError = i18n.oncology.calview.SAVE_DOC_ERROR;
                 alert(docError);
                 log.error(<span class="hljs-string">'Document failed to save.'</span>);
              },
              params: <span class="hljs-string">"'MINE',"</span> + vars.encntr_id + <span class="hljs-string">".0,"</span> + vars.person_id + <span class="hljs-string">".0,"</span> + vars.prsnl_id + <span class="hljs-string">".0"</span>,
              blob: htmlBlock,
              success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data, status, headers, config)</span> {</span>
                log.debug(<span class="hljs-string">"status: "</span> + status + <span class="hljs-string">"\n"</span>);
                log.debug(<span class="hljs-string">"data: "</span> + (<span class="hljs-built_in">JSON</span>.stringify(data[<span class="hljs-number">0</span>])) + <span class="hljs-string">"\n\n"</span>);
              },
              url: <span class="hljs-string">'onc_tc_save_document'</span>
            };
          };
          
          <span class="hljs-keyword">var</span> timerMPage ;
          
		  <span class="hljs-keyword">try</span>{
			  timerMPage = MP_Util.CreateTimer(<span class="hljs-string">"USR:MPG TC Print Save Document"</span>);
			  <span class="hljs-keyword">if</span>(timerMPage){
				  timerMPage.Start();				 
			  }
		   }
		   <span class="hljs-keyword">catch</span>(err)
		   {
			  log.info(<span class="hljs-string">'err.description'</span>);
			  <span class="hljs-keyword">if</span>(timerMPage)
			     timerMPage.Stop();
		   }
		      scope.currentDateTime= moment().format(<span class="hljs-string">"h:mmA L"</span>);
	          divToPrint = $(<span class="hljs-string">'#printableContainer'</span>);
	          divToPrint.children(<span class="hljs-string">':last'</span>).removeClass(<span class="hljs-string">'print-list-hide'</span>);
	          patientNoteListHolder = divToPrint.find(<span class="hljs-string">'#patientNoteList'</span>);
	          <span class="hljs-keyword">if</span> (divToPrint.find(<span class="hljs-string">'#patientNoteList'</span>).children().length === <span class="hljs-number">0</span>) {
	            $(<span class="hljs-string">'#patientNoteList'</span>).remove();
	          }
	            
	          <span class="hljs-keyword">if</span>(scope.PrintMode === <span class="hljs-literal">true</span>)
	          {
	          	  <span class="hljs-keyword">if</span>(flag)
	          	  {
		            htmlDocument = divToPrint.html();
		            divToPrint.children(<span class="hljs-string">':last'</span>).addClass(<span class="hljs-string">'print-list-hide'</span>);
		            scope.pageCount = <span class="hljs-number">1</span>;
		            htmlDocument = htmlDocument .replace(<span class="hljs-regexp">/(\r\n|\n|\r)/gm</span>, <span class="hljs-string">" "</span>);
	          	  }	          	  
	          	  <span class="hljs-keyword">else</span>
	          	  {
	                fauxWindow = window.open(<span class="hljs-string">""</span>, <span class="hljs-string">"fauxWindow"</span>, <span class="hljs-string">"toolbar=0,scrollbars=0,resizable=yes"</span>);
		            fauxWindow.document.write(divToPrint.html());
		            divToPrint.children(<span class="hljs-string">':last'</span>).addClass(<span class="hljs-string">'print-list-hide'</span>);
		            scope.pageCount = <span class="hljs-number">1</span>;
		            htmlDocument = fauxWindow.document.documentElement.innerHTML.replace(<span class="hljs-regexp">/(\r\n|\n|\r)/gm</span>, <span class="hljs-string">" "</span>);
		          }
		            htmlDocument = <span class="hljs-string">'&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;&lt;html&gt;'</span> + htmlDocument + <span class="hljs-string">'&lt;/html&gt;'</span>;
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"&lt;head&gt;"</span>, <span class="hljs-string">"&lt;head&gt;&lt;title&gt;Treatment Calendar Print Preview&lt;/title&gt;"</span>);
				    htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-show=\"pageCount == 1\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"&lt;img data-ng-src=\"\"&gt;"</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"SUN\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"MON\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"TUE\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"WED\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"THU\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"FRI\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-dotw=\"SAT\""</span>, <span class="hljs-string">" "</span>);
					
					htmlDocument = htmlDocument.replace(<span class="hljs-string">"id=\"1stlist\""</span>, <span class="hljs-string">" "</span>);
					htmlDocument = htmlDocument.replace(<span class="hljs-string">"id=\"2ndlist\""</span>, <span class="hljs-string">" "</span>);
					htmlDocument = htmlDocument.replace(<span class="hljs-string">"id=\"3rdlist\""</span>, <span class="hljs-string">" "</span>);
				
				
	            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i= <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++){
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-repeat=\"date in slice.slice(0, firstSlice)\" data-ng-class=\"{ 'gray-left': isSunday(), 'stripe': isStriped(), 'past': isPast()}\""</span>, <span class="hljs-string">" "</span>);             
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-repeat=\"date in slice.slice(7, secondSlice)\" data-ng-class=\"{ 'gray-left': isSunday(), 'stripe': isStriped(), 'past': isPast()}\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-repeat=\"date in slice.slice(14, thirdSlice)\" data-ng-class=\"{ 'gray-left': isSunday(), 'stripe': isStriped(), 'past': isPast()}\""</span>, <span class="hljs-string">" "</span>);
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-repeat=\"date in slice.slice(21, fourthSlice)\" data-ng-class=\"{ 'gray-left': isSunday(), 'stripe': isStriped(), 'past': isPast()}\""</span>, <span class="hljs-string">" "</span>);
			        htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-repeat=\"date in slice.slice(28, fifthSlice)\" data-ng-class=\"{ 'gray-left': isSunday(), 'stripe': isStriped(), 'past': isPast()}\""</span>, <span class="hljs-string">" "</span>);
		            htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-row=\"0\""</span>, <span class="hljs-string">" "</span>); 
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-row=\"1\""</span>, <span class="hljs-string">" "</span>); 
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-row=\"2\""</span>, <span class="hljs-string">" "</span>); 
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-row=\"3\""</span>, <span class="hljs-string">" "</span>); 
	                htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-row=\"4\""</span>, <span class="hljs-string">" "</span>); 
		           }
	   
	             <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i= <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">35</span>; i++){
	               htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-array=\"slice\""</span>, <span class="hljs-string">" "</span>); 
	               htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-show=\"!mouseOver\""</span>, <span class="hljs-string">" "</span>); 
	               htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-class=\"{'month': month() != ''}\""</span>, <span class="hljs-string">" "</span>); 
	               }
	             
	              	                      
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"0\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"1\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"2\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"3\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"4\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"5\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"6\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"7\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"8\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"9\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"10\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"11\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"12\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"13\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"14\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"15\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"16\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"17\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"18\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"19\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"20\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"21\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"22\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"23\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"24\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"25\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"26\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"27\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"28\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"29\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"30\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"31\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"32\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"33\""</span>, <span class="hljs-string">" "</span>); 
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-index=\"34\""</span>, <span class="hljs-string">" "</span>); 
	              
	              htmlDocument = htmlDocument.replace(<span class="hljs-string">"data-ng-hide=\"pageCount == 1\""</span>, <span class="hljs-string">" "</span>); 
		         
		           	 <span class="hljs-keyword">if</span>(scope.saveDocumentFlag || flag)
		           	 {
		           	    dao.call(savePrintDocument(htmlDocument));
		           	 }
		           	 
		           	 <span class="hljs-keyword">if</span>(!flag)
		           	 {
				         fauxWindow.print();
				         fauxWindow.focus();
				         fauxWindow.document.close();
					     fauxWindow.close();
				     }
			     
	          }
	          <span class="hljs-keyword">else</span>
	          {	          	
	          	divToPrint.children(<span class="hljs-string">':last'</span>).addClass(<span class="hljs-string">'print-list-hide'</span>);
	            scope.pageCount = <span class="hljs-number">1</span>;
	            htmlDocument = divToPrint.html().replace(<span class="hljs-regexp">/(\r\n|\n|\r)/gm</span>, <span class="hljs-string">" "</span>);
	            htmlDocument = <span class="hljs-string">'&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;&lt;html&gt;'</span> + htmlDocument + <span class="hljs-string">'&lt;/html&gt;'</span>;
	             <span class="hljs-keyword">if</span>(scope.saveDocumentFlag || flag)
		         {
		           	    dao.call(savePrintDocument(htmlDocument));
		         }
   
		        <span class="hljs-keyword">var</span> templatePrinters= <span class="hljs-keyword">new</span> templatePrinter();
				templatePrinters.margins.top=<span class="hljs-number">0.5</span>;
				templatePrinters.margins.bottom=<span class="hljs-number">0.5</span>;
				templatePrinters.margins.left=<span class="hljs-number">0.5</span>;
				templatePrinters.margins.right=<span class="hljs-number">0.5</span>;
				templatePrinters.orientation=<span class="hljs-string">"landscape"</span>;
				templatePrinters.htmlContent= divToPrint.html();
				templatePrinters.printer=<span class="hljs-string">"Send"</span>;
			    <span class="hljs-keyword">var</span> PrintTemplateLocation = <span class="hljs-string">"file://"</span> + vars.staticContentLocation + <span class="hljs-string">"\\html\\"</span> + <span class="hljs-string">"printerTemplateTemplate.html"</span>;
				templatePrinters.printUsingTemplate(PrintTemplateLocation);	
		       }
		
           <span class="hljs-keyword">if</span>(timerMPage)
			     timerMPage.Stop();
             
            scope.closeDialog();      
        };
        watchers = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
        scope.$on(<span class="hljs-string">'suspendWatchers'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          watchers = scope.$$watchers;
          scope.$$watchers = [];
        });
        scope.$on(<span class="hljs-string">"resumeWatchers"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">if</span> (watchers) {
            scope.$$watchers = watchers;
          }
          watchers = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
        });
        scope.$on(<span class="hljs-string">'showPrintModal'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ev)</span> {</span>
          scope.currentDateTime= moment().format(<span class="hljs-string">"h:mmA L"</span>);
          <span class="hljs-keyword">if</span> (scope.firstTimeLoading === <span class="hljs-literal">true</span>) {
            init();
          } <span class="hljs-keyword">else</span> {
            scope.showPrintDialog = <span class="hljs-literal">true</span>;
            scope.addOriginalstate();
          }
        });
      }
    };
  }
]);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
