<!DOCTYPE html>

<html>
<head>
  <title>oncmp_core.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="Gruntfile.html">
                Gruntfile.js
              </a>
            
              
              <a class="source" href="server.html">
                server.js
              </a>
            
              
              <a class="source" href="accordionctrl.html">
                accordionctrl.js
              </a>
            
              
              <a class="source" href="appctrl.html">
                appctrl.js
              </a>
            
              
              <a class="source" href="calendarctrl.html">
                calendarctrl.js
              </a>
            
              
              <a class="source" href="calendarnotesctrl.html">
                calendarnotesctrl.js
              </a>
            
              
              <a class="source" href="listctrl.html">
                listctrl.js
              </a>
            
              
              <a class="source" href="accordionapptdir.html">
                accordionapptdir.js
              </a>
            
              
              <a class="source" href="accordiondir.html">
                accordiondir.js
              </a>
            
              
              <a class="source" href="accordionmeddir.html">
                accordionmeddir.js
              </a>
            
              
              <a class="source" href="accordionorderdir.html">
                accordionorderdir.js
              </a>
            
              
              <a class="source" href="accordionphasedir.html">
                accordionphasedir.js
              </a>
            
              
              <a class="source" href="accordionplandir.html">
                accordionplandir.js
              </a>
            
              
              <a class="source" href="accordionregimendir.html">
                accordionregimendir.js
              </a>
            
              
              <a class="source" href="adddialogdir.html">
                adddialogdir.js
              </a>
            
              
              <a class="source" href="calendarcontrolsdir.html">
                calendarcontrolsdir.js
              </a>
            
              
              <a class="source" href="calendardatedir.html">
                calendardatedir.js
              </a>
            
              
              <a class="source" href="calendardaydir.html">
                calendardaydir.js
              </a>
            
              
              <a class="source" href="calendardir.html">
                calendardir.js
              </a>
            
              
              <a class="source" href="calendarlistdir.html">
                calendarlistdir.js
              </a>
            
              
              <a class="source" href="hoverhighlightdir.html">
                hoverhighlightdir.js
              </a>
            
              
              <a class="source" href="jquerydatepicker.html">
                jquerydatepicker.js
              </a>
            
              
              <a class="source" href="listdatedir.html">
                listdatedir.js
              </a>
            
              
              <a class="source" href="modalcalendardir.html">
                modalcalendardir.js
              </a>
            
              
              <a class="source" href="noteinputdir.html">
                noteinputdir.js
              </a>
            
              
              <a class="source" href="printcalendardatedir.html">
                printcalendardatedir.js
              </a>
            
              
              <a class="source" href="printcalendardaydir.html">
                printcalendardaydir.js
              </a>
            
              
              <a class="source" href="printcalendarviewdir.html">
                printcalendarviewdir.js
              </a>
            
              
              <a class="source" href="printdialogdir.html">
                printdialogdir.js
              </a>
            
              
              <a class="source" href="printlistviewdir.html">
                printlistviewdir.js
              </a>
            
              
              <a class="source" href="printtemplate.html">
                printtemplate.js
              </a>
            
              
              <a class="source" href="qtipdir.html">
                qtipdir.js
              </a>
            
              
              <a class="source" href="schedulableicondir.html">
                schedulableicondir.js
              </a>
            
              
              <a class="source" href="statusdialogdir.html">
                statusdialogdir.js
              </a>
            
              
              <a class="source" href="windowresizedir.html">
                windowresizedir.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="blackbird.html">
                blackbird.js
              </a>
            
              
              <a class="source" href="dc_mp_js_util_mpage.html">
                dc_mp_js_util_mpage.js
              </a>
            
              
              <a class="source" href="oncmp_core.html">
                oncmp_core.js
              </a>
            
              
              <a class="source" href="printerConfig_template.html">
                printerConfig_template.js
              </a>
            
              
              <a class="source" href="xml2json.html">
                xml2json.js
              </a>
            
              
              <a class="source" href="animationsmod.html">
                animationsmod.js
              </a>
            
              
              <a class="source" href="appmod.html">
                appmod.js
              </a>
            
              
              <a class="source" href="controllersmod.html">
                controllersmod.js
              </a>
            
              
              <a class="source" href="directivesmod.html">
                directivesmod.js
              </a>
            
              
              <a class="source" href="daodevsvc.html">
                daodevsvc.js
              </a>
            
              
              <a class="source" href="daoprodsvc.html">
                daoprodsvc.js
              </a>
            
              
              <a class="source" href="notesmedssvc.html">
                notesmedssvc.js
              </a>
            
              
              <a class="source" href="notesmedssvcdev.html">
                notesmedssvcdev.js
              </a>
            
              
              <a class="source" href="pubsubsvc.html">
                pubsubsvc.js
              </a>
            
              
              <a class="source" href="services.html">
                services.js
              </a>
            
              
              <a class="source" href="signdevsvc.html">
                signdevsvc.js
              </a>
            
              
              <a class="source" href="signprodsvc.html">
                signprodsvc.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>oncmp_core.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
* Project: fnmp_core
* Version 1.0.0
* Derived from mp_core: http://scm.discern-abu.cerner.corp/svn/core-components/trunk/javascript/core/mp_core.js
*/</span>
<span class="hljs-comment">/*
The scope of an MPage object and Components are during rendering of the page.  However,
once the page has been rendered these items are lost.  Because there is a need to refresh 
components, the components on a 'page' must be globally stored to allow for refreshing of data.
*/</span>
<span class="hljs-keyword">var</span> CERN_MPageComponents = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> CERN_TabManagers = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> CERN_WizardComponents = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> STR_PAD_LEFT = <span class="hljs-number">1</span>;
<span class="hljs-keyword">var</span> STR_PAD_RIGHT = <span class="hljs-number">2</span>;
<span class="hljs-keyword">var</span> STR_PAD_BOTH = <span class="hljs-number">3</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AvoidSubmit</span><span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-built_in">Array</span>.prototype.addAll = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(v)</span>
{</span>
    <span class="hljs-keyword">if</span> (v &amp;&amp; v.length &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = v.length; x &lt; xl; x++)
        {
            <span class="hljs-keyword">this</span>.push(v[x])
        }
    }
};

<span class="hljs-comment">/**
* Utility methods
* @namespace MP_Core
* @static
* @global
*/</span>
<span class="hljs-keyword">var</span> MP_Core = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">return</span> {
        Criterion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(person_id, encntr_id, provider_id, executable, static_content, position_cd, ppr_cd, debug_ind, help_file_local_ind, category_mean, backend_loc)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_patInfo = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_prsnlInfo = <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">this</span>.person_id = person_id;
            <span class="hljs-keyword">this</span>.encntr_id = encntr_id;
            <span class="hljs-keyword">this</span>.provider_id = provider_id;
            <span class="hljs-keyword">this</span>.executable = executable;
            <span class="hljs-keyword">this</span>.static_content = static_content;
            <span class="hljs-keyword">this</span>.position_cd = position_cd;
            <span class="hljs-keyword">this</span>.ppr_cd = ppr_cd;
            <span class="hljs-keyword">this</span>.debug_ind = debug_ind;
            <span class="hljs-keyword">this</span>.help_file_local_ind = help_file_local_ind;
            <span class="hljs-keyword">this</span>.category_mean = category_mean;
            <span class="hljs-keyword">this</span>.backend_loc = backend_loc;

            <span class="hljs-keyword">this</span>.setPatientInfo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_patInfo = value;
            }
            <span class="hljs-keyword">this</span>.getPatientInfo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_patInfo;
            }

            <span class="hljs-keyword">this</span>.getPersonnelInfo = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (!m_prsnlInfo)
                    m_prsnlInfo = <span class="hljs-keyword">new</span> MP_Core.PersonnelInformation(<span class="hljs-keyword">this</span>.provider_id, <span class="hljs-keyword">this</span>.person_id);
                <span class="hljs-keyword">return</span> m_prsnlInfo;
            }
        },
        PatientInformation: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> m_dob = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_sex = <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">this</span>.setSex = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_sex = value;
            }
            <span class="hljs-keyword">this</span>.getSex = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_sex;
            }
            <span class="hljs-keyword">this</span>.setDOB = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_dob = value;
            }
            <span class="hljs-keyword">this</span>.getDOB = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_dob;
            }
        },

        ScriptRequest: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, loadTimerName)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_comp = component;
            <span class="hljs-keyword">var</span> m_load = loadTimerName;
            <span class="hljs-keyword">var</span> m_name = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> m_programName = <span class="hljs-string">""</span>
            <span class="hljs-keyword">var</span> m_params = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_async = <span class="hljs-literal">true</span>;

            <span class="hljs-keyword">this</span>.getComponent = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_comp;
            }
            <span class="hljs-keyword">this</span>.getLoadTimer = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_load;
            }

            <span class="hljs-keyword">this</span>.setName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_name = value;
            }
            <span class="hljs-keyword">this</span>.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_name;
            }
            <span class="hljs-keyword">this</span>.setProgramName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_programName = value;
            }
            <span class="hljs-keyword">this</span>.getProgramName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_programName;
            }
            <span class="hljs-keyword">this</span>.setParameters = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_params = value;
            }
            <span class="hljs-keyword">this</span>.getParameters = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_params;
            }
            <span class="hljs-keyword">this</span>.setAsync = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_async = value;
            }
            <span class="hljs-keyword">this</span>.isAsync = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_async;
            }
        },
        ScriptReply: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_name = <span class="hljs-string">""</span>; <span class="hljs-comment">//used to syne a request to a reply</span>
            <span class="hljs-keyword">var</span> m_status = <span class="hljs-string">"F"</span>; <span class="hljs-comment">//by default every script reply is 'f'ailed unless otherwise noted</span>
            <span class="hljs-keyword">var</span> m_err = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> m_resp = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_comp = component;

            <span class="hljs-keyword">this</span>.setName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_name = value;
            }
            <span class="hljs-keyword">this</span>.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_name;
            }
            <span class="hljs-keyword">this</span>.setStatus = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_status = value;
            }
            <span class="hljs-keyword">this</span>.getStatus = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_status;
            }
            <span class="hljs-keyword">this</span>.setError = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_err = value;
            }
            <span class="hljs-keyword">this</span>.getError = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_err;
            }
            <span class="hljs-keyword">this</span>.setResponse = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_resp = value;
            }
            <span class="hljs-keyword">this</span>.getResponse = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_resp;
            }
            <span class="hljs-keyword">this</span>.getComponent = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_comp;
            }
        },
        PersonnelInformation: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(prsnlId, patientId)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_prsnlId = prsnlId;
            <span class="hljs-keyword">var</span> m_viewableEncntrs = <span class="hljs-literal">null</span>; <span class="hljs-comment">//if remain null, error in retrieval of viewable encntr</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>load valid encounter list from patcon wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> patConObj = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span>
            {
                patConObj = window.external.DiscernObjectFactory(<span class="hljs-string">"PVCONTXTMPAGE"</span>);
                <span class="hljs-keyword">if</span> (patConObj)
                    m_viewableEncntrs = patConObj.GetValidEncounters(patientId);
            }
            <span class="hljs-keyword">catch</span> (e)
            {
            }
            <span class="hljs-keyword">finally</span>
            {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>release used memory</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                patConObj = <span class="hljs-literal">null</span>;
            }

            <span class="hljs-keyword">this</span>.getPersonnelId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_prsnlId;
            }
            <span class="hljs-comment">/**
            * Returns the associated encounter that the provide has the ability to see
            */</span>
            <span class="hljs-keyword">this</span>.getViewableEncounters = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_viewableEncntrs;
            }
        },
        XMLCclRequestWrapper: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, program, paramAr, async)</span>
        {</span>
            <span class="hljs-keyword">var</span> timerLoadComponent = MP_Util.CreateTimer(component.getComponentLoadTimerName(), component.getCriterion().category_mean);
            <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> XMLCclRequest();
            info.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>)
                {
                    <span class="hljs-keyword">try</span>
                    {
                        <span class="hljs-keyword">var</span> jsonEval = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                        <span class="hljs-keyword">var</span> recordData = jsonEval.RECORD_DATA;
                        <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"Z"</span>)
                        {
                            <span class="hljs-keyword">var</span> countText = (component.isLineNumberIncluded() ? <span class="hljs-string">"(0)"</span> : <span class="hljs-string">""</span>)
                            MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()), component, countText);
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"S"</span>)
                        {
                            <span class="hljs-keyword">var</span> timerRenderComponent = MP_Util.CreateTimer(component.getComponentRenderTimerName(), component.getCriterion().category_mean);
                            <span class="hljs-keyword">try</span>
                            {
                                <span class="hljs-keyword">var</span> rootComponentNode = component.getRootComponentNode();
                                <span class="hljs-keyword">var</span> secTitle = Util.Style.g(<span class="hljs-string">"sec-total"</span>, rootComponentNode, <span class="hljs-string">"span"</span>);
                                secTitle[<span class="hljs-number">0</span>].innerHTML = i18n.RENDERING_DATA + <span class="hljs-string">"..."</span>;
                                component.HandleSuccess(recordData);
                            }
                            <span class="hljs-keyword">catch</span> (err)
                            {
                                <span class="hljs-keyword">if</span> (timerRenderComponent)
                                {
                                    timerRenderComponent.Abort();
                                    timerRenderComponent = <span class="hljs-literal">null</span>;
                                }
                                <span class="hljs-keyword">throw</span> (err);
                            }
                            <span class="hljs-keyword">finally</span>
                            {
                                <span class="hljs-keyword">if</span> (timerRenderComponent)
                                    timerRenderComponent.Stop();
                            }
                        }
                        <span class="hljs-keyword">else</span>
                        {
                            <span class="hljs-keyword">var</span> errMsg = [];
                            errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.DISCERN_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.STATUS, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.status, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.REQUEST, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.requestText, <span class="hljs-string">"&lt;/li&gt;"</span>);
                            <span class="hljs-keyword">var</span> statusData = recordData.STATUS_DATA;
                            <span class="hljs-keyword">if</span> (statusData.SUBEVENTSTATUS.length &amp;&amp; statusData.SUBEVENTSTATUS.length &gt; <span class="hljs-number">0</span>)
                            {
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = statusData.SUBEVENTSTATUS.length; x &lt; xl; x++)
                                {
                                    <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS[x];
                                    errMsg.push(<span class="hljs-string">"&lt;li&gt;"</span>, i18n.ERROR_OPERATION, <span class="hljs-string">": "</span>, ss.OPERATIONNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_OPERATION_STATUS, <span class="hljs-string">": "</span>, ss.OPERATIONSTATUS, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT, <span class="hljs-string">": "</span>, ss.TARGETOBJECTNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT_VALUE, <span class="hljs-string">": "</span>, ss.TARGETOBJECTVALUE, <span class="hljs-string">"&lt;/li&gt;"</span>);
                                }
                            }
                            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (statusData.SUBEVENTSTATUS.length == <span class="hljs-literal">undefined</span>)
                            {
                                <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS;
                                errMsg.push(<span class="hljs-string">"&lt;li&gt;"</span>, i18n.ERROR_OPERATION, <span class="hljs-string">": "</span>, ss.OPERATIONNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_OPERATION_STATUS, <span class="hljs-string">": "</span>, ss.OPERATIONSTATUS, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT, <span class="hljs-string">": "</span>, ss.TARGETOBJECTNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT_VALUE, <span class="hljs-string">": "</span>, ss.TARGETOBJECTVALUE, <span class="hljs-string">"&lt;/li&gt;"</span>);
                            }
                            errMsg.push(<span class="hljs-string">"&lt;/ul&gt;"</span>)
                            <span class="hljs-keyword">var</span> countText = (component.isLineNumberIncluded() ? <span class="hljs-string">"(0)"</span> : <span class="hljs-string">""</span>)
                            MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(), errMsg.join(<span class="hljs-string">""</span>)), component, countText);
                        }
                    }
                    <span class="hljs-keyword">catch</span> (err)
                    {
                        <span class="hljs-keyword">var</span> errMsg = [];
                        errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.JS_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.MESSAGE, <span class="hljs-string">": "</span>, err.message, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.NAME, <span class="hljs-string">": "</span>, err.name, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.NUMBER, <span class="hljs-string">": "</span>, (err.number &amp; <span class="hljs-number">0xFFFF</span>), <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.DESCRIPTION, <span class="hljs-string">": "</span>, err.description, <span class="hljs-string">"&lt;/li&gt;&lt;/ul&gt;"</span>);
                        MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(), errMsg.join(<span class="hljs-string">""</span>)), component, countText);

                        <span class="hljs-keyword">if</span> (timerLoadComponent)
                        {
                            timerLoadComponent.Abort();
                            timerLoadComponent = <span class="hljs-literal">null</span>;
                        }
                    }
                    <span class="hljs-keyword">finally</span>
                    {
                        <span class="hljs-keyword">if</span> (timerLoadComponent)
                            timerLoadComponent.Stop();
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status != <span class="hljs-number">200</span>)
                {
                    <span class="hljs-keyword">var</span> errMsg = [];
                    errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.DISCERN_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.STATUS, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.status, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.REQUEST, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.requestText, <span class="hljs-string">"&lt;/li&gt;&lt;/ul&gt;"</span>);
                    MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(), errMsg.join(<span class="hljs-string">""</span>)), component, <span class="hljs-string">""</span>);
                    <span class="hljs-keyword">if</span> (timerLoadComponent)
                        timerLoadComponent.Abort();
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>)
                {
                    MP_Util.ReleaseRequestReference(<span class="hljs-keyword">this</span>);
                }
            }
            info.open(<span class="hljs-string">'GET'</span>, program, async);
            info.send(paramAr.join(<span class="hljs-string">","</span>));
        },
        <span class="hljs-comment">/*
        * As a means in which to provide the consumer to handle the response of the script request, this method
        * provide an encapsulated means in which to call the XMLCCLRequest and return a ReplyObject with data
        * about the response that can be utilized for evaluation.
        */</span>
        XMLCCLRequestCallBack: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, request, funcCallback)</span>
        {</span>
            <span class="hljs-keyword">var</span> timerLoad = MP_Util.CreateTimer(request.getLoadTimer());
            <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> XMLCclRequest();
            <span class="hljs-keyword">var</span> reply = <span class="hljs-keyword">new</span> MP_Core.ScriptReply(component);
            reply.setName(request.getName());
            info.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>)
                {
                    <span class="hljs-keyword">try</span>
                    {
                        <span class="hljs-keyword">var</span> jsonEval = <span class="hljs-built_in">JSON</span>.parse(info.responseText);
                        <span class="hljs-keyword">var</span> recordData = jsonEval.RECORD_DATA;
                        <span class="hljs-keyword">var</span> status = recordData.STATUS_DATA.STATUS;
                        reply.setStatus(status);
                        <span class="hljs-keyword">if</span> (status == <span class="hljs-string">"Z"</span>)
                        {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Pass response anyways</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            reply.setResponse(recordData);
                            funcCallback(reply);
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status == <span class="hljs-string">"S"</span>)
                        {
                            reply.setResponse(recordData);
                            funcCallback(reply);
                        }
                        <span class="hljs-keyword">else</span>
                        {
                            <span class="hljs-keyword">var</span> errMsg = [];
                            errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.DISCERN_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.STATUS, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.status, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.REQUEST, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.requestText, <span class="hljs-string">"&lt;/li&gt;"</span>);
                            <span class="hljs-keyword">var</span> statusData = recordData.STATUS_DATA;
                            <span class="hljs-keyword">if</span> (statusData.SUBEVENTSTATUS.length &amp;&amp; statusData.SUBEVENTSTATUS.length &gt; <span class="hljs-number">0</span>)
                            {
                                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = statusData.SUBEVENTSTATUS.length; x &lt; xl; x++)
                                {
                                    <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS[x];
                                    errMsg.push(<span class="hljs-string">"&lt;li&gt;"</span>, i18n.ERROR_OPERATION, <span class="hljs-string">": "</span>, ss.OPERATIONNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_OPERATION_STATUS, <span class="hljs-string">": "</span>, ss.OPERATIONSTATUS, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT, <span class="hljs-string">": "</span>, ss.TARGETOBJECTNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT_VALUE, <span class="hljs-string">": "</span>, ss.TARGETOBJECTVALUE, <span class="hljs-string">"&lt;/li&gt;"</span>);
                                }
                            }
                            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (statusData.SUBEVENTSTATUS.length == <span class="hljs-literal">undefined</span>)
                            {
                                <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS;
                                errMsg.push(<span class="hljs-string">"&lt;li&gt;"</span>, i18n.ERROR_OPERATION, <span class="hljs-string">": "</span>, ss.OPERATIONNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_OPERATION_STATUS, <span class="hljs-string">": "</span>, ss.OPERATIONSTATUS, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT, <span class="hljs-string">": "</span>, ss.TARGETOBJECTNAME, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.ERROR_TARGET_OBJECT_VALUE, <span class="hljs-string">": "</span>, ss.TARGETOBJECTVALUE, <span class="hljs-string">"&lt;/li&gt;"</span>);
                            }
                            errMsg.push(<span class="hljs-string">"&lt;/ul&gt;"</span>)
                            reply.setError(errMsg.join(<span class="hljs-string">""</span>));
                            funcCallback(reply);
                        }
                    }
                    <span class="hljs-keyword">catch</span> (err)
                    {
                        <span class="hljs-keyword">var</span> errMsg = [];
                        errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.DISCERN_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.STATUS, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.status, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.REQUEST, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.requestText, <span class="hljs-string">"&lt;/li&gt;&lt;/ul&gt;"</span>);
                        reply.setError(errMsg.join(<span class="hljs-string">""</span>));
                        <span class="hljs-keyword">if</span> (timerLoad)
                        {
                            timerLoad.Abort();
                            timerLoad = <span class="hljs-literal">null</span>;
                        }
                    }
                    <span class="hljs-keyword">finally</span>
                    {
                        <span class="hljs-keyword">if</span> (timerLoad)
                        {
                            timerLoad.Stop();
                        }
                    }
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (info.readyState == <span class="hljs-number">4</span> &amp;&amp; info.status != <span class="hljs-number">200</span>)
                {
                    <span class="hljs-keyword">var</span> errMsg = [];
                    errMsg.push(<span class="hljs-string">"&lt;b&gt;"</span>, i18n.DISCERN_ERROR, <span class="hljs-string">"&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;"</span>, i18n.STATUS, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.status, <span class="hljs-string">"&lt;/li&gt;&lt;li&gt;"</span>, i18n.REQUEST, <span class="hljs-string">": "</span>, <span class="hljs-keyword">this</span>.requestText, <span class="hljs-string">"&lt;/li&gt;&lt;/ul&gt;"</span>);
                    reply.setError(errMsg.join(<span class="hljs-string">""</span>));
                    <span class="hljs-keyword">if</span> (timerLoad)
                        timerLoad.Abort();
                    funcCallback(reply);
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>)
                {
                    MP_Util.ReleaseRequestReference(<span class="hljs-keyword">this</span>);
                }
            }
            info.open(<span class="hljs-string">'GET'</span>, request.getProgramName(), request.isAsync());
            info.send(request.getParameters().join(<span class="hljs-string">","</span>));
        },
        XMLCCLRequestThread: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, component, request)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_name = name;
            <span class="hljs-keyword">var</span> m_comp = component;

            <span class="hljs-keyword">var</span> m_request = request;
            m_request.setName(name);

            <span class="hljs-keyword">this</span>.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_name;
            }
            <span class="hljs-keyword">this</span>.getComponent = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_comp;
            }
            <span class="hljs-keyword">this</span>.getRequest = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_request
            };
        },
        XMLCCLRequestThreadManager: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(callbackFunction, component, handleFinalize)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_threads = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_replyAr = <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">var</span> m_isData = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> m_isError = <span class="hljs-literal">false</span>;

            <span class="hljs-keyword">this</span>.addThread = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(thread)</span>
            {</span>
                <span class="hljs-keyword">if</span> (m_threads == <span class="hljs-literal">null</span>)
                    m_threads = [];

                m_threads.push(thread);
            }

            <span class="hljs-keyword">this</span>.begin = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (m_threads &amp;&amp; m_threads.length &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">for</span> (x = m_threads.length; x--; )
                    {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>start each xmlcclrequest</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        <span class="hljs-keyword">var</span> thread = m_threads[x];
                        MP_Core.XMLCCLRequestCallBack(thread.getComponent(), thread.getRequest(), <span class="hljs-keyword">this</span>.completeThread)
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-keyword">if</span> (handleFinalize)
                    {
                        <span class="hljs-keyword">var</span> countText = (component.isLineNumberIncluded() ? <span class="hljs-string">"(0)"</span> : <span class="hljs-string">""</span>)
                        MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()), component, countText);
                    }
                    <span class="hljs-keyword">else</span>
                    {
                        callbackFunction(<span class="hljs-literal">null</span>, component);
                    }
                }
            }

            <span class="hljs-keyword">this</span>.completeThread = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(reply)</span>
            {</span>
                <span class="hljs-keyword">if</span> (m_replyAr == <span class="hljs-literal">null</span>)
                    m_replyAr = [];

                <span class="hljs-keyword">if</span> (reply.getStatus() == <span class="hljs-string">"S"</span>)
                    m_isData = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (reply.getStatus() == <span class="hljs-string">"F"</span>)
                {
                    m_isError = <span class="hljs-literal">true</span>;
                }

                m_replyAr.push(reply);
                <span class="hljs-keyword">if</span> (m_replyAr.length == m_threads.length)
                {
                    <span class="hljs-keyword">if</span> (handleFinalize)
                    {
                        <span class="hljs-keyword">if</span> (m_isError)
                        {
                            alert(m_isError)</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>handle error response</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-keyword">var</span> errMsg = [];
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = m_replyAr.length; x--; )
                            {
                                <span class="hljs-keyword">var</span> rep = m_replyAr[x];
                                <span class="hljs-keyword">if</span> (rep.getStatus() == <span class="hljs-string">"F"</span>)
                                {
                                    errMsg.push(rep.getError());
                                }
                            }
                            MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(), errMsg.join(<span class="hljs-string">"&lt;br&gt;"</span>)), component, <span class="hljs-string">""</span>);
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!m_isData)
                        {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>handle no data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            <span class="hljs-keyword">var</span> countText = (component.isLineNumberIncluded() ? <span class="hljs-string">"(0)"</span> : <span class="hljs-string">""</span>)
                            MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()), component, countText);
                        }
                        <span class="hljs-keyword">else</span>
                        {
                            callbackFunction(m_replyAr, component);
                        }
                    }
                    <span class="hljs-keyword">else</span>
                    {
                        callbackFunction(m_replyAr, component);
                    }
                }
            }
        },
        MapObject: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, value)</span>
        {</span>
            <span class="hljs-keyword">this</span>.name = name;
            <span class="hljs-keyword">this</span>.value = value
        },
        <span class="hljs-comment">/**
        * An object to store the attributes of a single tab.
        * @param {Object} key The id associated to the tab.
        * @param {Object} name The name to be displayed on the tab.
        * @param {Object} components The components to be associated to the tab.
        */</span>
        TabItem: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(key, name, components, prefIdentifier)</span>
        {</span>
            <span class="hljs-keyword">this</span>.key = key;
            <span class="hljs-keyword">this</span>.name = name;
            <span class="hljs-keyword">this</span>.components = components;
            <span class="hljs-keyword">this</span>.prefIdentifier = prefIdentifier
        },
        TabManager: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(tabItem)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_isLoaded = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> m_tabItem = tabItem;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>By default a tab and all its components are not fully expanded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> m_isExpandAll = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> m_isSelected = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">this</span>.toggleExpandAll = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                m_isExpandAll = (!m_isExpandAll)

            }
            <span class="hljs-keyword">this</span>.loadTab = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (!m_isLoaded)
                {
                    m_isLoaded = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">var</span> components = m_tabItem.components;
                    <span class="hljs-keyword">if</span> (components)
                    {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xl = components.length; xl--; )
                        {
                            <span class="hljs-keyword">var</span> component = components[xl];
                            <span class="hljs-keyword">if</span> (component.isDisplayable())
                                component.InsertData();
                        }
                    }
                }
            }
            <span class="hljs-keyword">this</span>.getTabItem = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_tabItem;
            }
            <span class="hljs-keyword">this</span>.getSelectedTab = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_isSelected;
            }
            <span class="hljs-keyword">this</span>.setSelectedTab = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_isSelected = value;
            }
        },
        ReferenceRangeResult: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> m_valNLow = -<span class="hljs-number">1</span>, m_valNHigh = -<span class="hljs-number">1</span>, m_valCLow = -<span class="hljs-number">1</span>, m_valCHigh = -<span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>units of measure</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> m_uomNLow = <span class="hljs-literal">null</span>, m_uomNHigh = <span class="hljs-literal">null</span>, m_uomCLow = <span class="hljs-literal">null</span>, m_uomCHigh = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">this</span>.init = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(refRange, codeArray)</span>
            {</span>
                m_valCLow = refRange.CRITICAL_LOW.NUMBER;
                <span class="hljs-keyword">if</span> (refRange.CRITICAL_LOW.UNIT_CD != <span class="hljs-string">""</span>)
                {
                    m_uomCLow = MP_Util.GetValueFromArray(refRange.CRITICAL_LOW.UNIT_CD, codeArray);
                }
                m_valCHigh = refRange.CRITICAL_HIGH.NUMBER;
                <span class="hljs-keyword">if</span> (refRange.CRITICAL_HIGH.UNIT_CD != <span class="hljs-string">""</span>)
                {
                    m_uomCHigh = MP_Util.GetValueFromArray(refRange.CRITICAL_HIGH.UNIT_CD, codeArray);
                }
                m_valNLow = refRange.NORMAL_LOW.NUMBER;
                <span class="hljs-keyword">if</span> (refRange.NORMAL_LOW.UNIT_CD != <span class="hljs-string">""</span>)
                {
                    m_uomNLow = MP_Util.GetValueFromArray(refRange.NORMAL_LOW.UNIT_CD, codeArray);
                }
                m_valNHigh = refRange.NORMAL_HIGH.NUMBER;
                <span class="hljs-keyword">if</span> (refRange.NORMAL_HIGH.UNIT_CD != <span class="hljs-string">""</span>)
                {
                    m_uomNHigh = MP_Util.GetValueFromArray(refRange.NORMAL_HIGH.UNIT_CD, codeArray);
                }
            }

            <span class="hljs-keyword">this</span>.getNormalLow = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_valNLow
            };
            <span class="hljs-keyword">this</span>.getNormalHigh = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_valNHigh
            };
            <span class="hljs-keyword">this</span>.getNormalLowUOM = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_uomNLow
            };
            <span class="hljs-keyword">this</span>.getNormalHighUOM = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_uomNHigh
            };
            <span class="hljs-keyword">this</span>.getCriticalLow = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_valCLow
            };
            <span class="hljs-keyword">this</span>.getCriticalHigh = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_valCHigh
            };
            <span class="hljs-keyword">this</span>.getCriticalLowUOM = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_uomCLow
            };
            <span class="hljs-keyword">this</span>.getCriticalHighUOM = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_uomCHigh
            };

            <span class="hljs-keyword">this</span>.toNormalInlineString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">var</span> low = (m_uomNLow != <span class="hljs-literal">null</span>) ? m_uomNLow.display : <span class="hljs-string">""</span>;
                <span class="hljs-keyword">var</span> high = (m_uomNHigh != <span class="hljs-literal">null</span>) ? m_uomNHigh.display : <span class="hljs-string">""</span>;
                <span class="hljs-keyword">if</span> (m_valNLow != <span class="hljs-number">0</span> || m_valNHigh != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">return</span> (m_valNLow + <span class="hljs-string">"&amp;nbsp;"</span> + low + <span class="hljs-string">" - "</span> + m_valNHigh + <span class="hljs-string">"&amp;nbsp;"</span> + high)
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
            };
            <span class="hljs-keyword">this</span>.toCriticalInlineString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">var</span> low = (m_uomCLow != <span class="hljs-literal">null</span>) ? m_uomCLow.display : <span class="hljs-string">""</span>;
                <span class="hljs-keyword">var</span> high = (m_uomCHigh != <span class="hljs-literal">null</span>) ? m_uomCHigh.display : <span class="hljs-string">""</span>;
                <span class="hljs-keyword">if</span> (m_valCLow != <span class="hljs-number">0</span> || m_valCHigh != <span class="hljs-number">0</span>)
                    <span class="hljs-keyword">return</span> (m_valCLow + <span class="hljs-string">"&amp;nbsp;"</span> + low + <span class="hljs-string">" - "</span> + m_valCHigh + <span class="hljs-string">"&amp;nbsp;"</span> + high)
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
            };
        },

        QuantityValue: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> m_val, m_precision;
            <span class="hljs-keyword">var</span> m_uom = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_refRange = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">this</span>.init = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(result, codeArray)</span>
            {</span>

                <span class="hljs-keyword">var</span> quantityValue = result.QUANTITY_VALUE;
                <span class="hljs-keyword">var</span> referenceRange = result.REFERENCE_RANGE;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> l = <span class="hljs-number">0</span>, ll = quantityValue.length; l &lt; ll; l++)
                {
                    <span class="hljs-keyword">var</span> numRes = quantityValue[l].NUMBER;
                    m_precision = quantityValue[l].PRECISION;
                    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(numRes))
                    {
                        m_val = MP_Util.Measurement.SetPrecision(numRes, m_precision);
                    }
                    <span class="hljs-keyword">if</span> (quantityValue[l].MODIFIER_CD != <span class="hljs-string">""</span>)
                    {
                        <span class="hljs-keyword">var</span> modCode = MP_Util.GetValueFromArray(quantityValue[l].MODIFIER_CD, codeArray);
                        <span class="hljs-keyword">if</span> (modCode != <span class="hljs-literal">null</span>)
                            m_val = modCode.display + m_val;
                    }
                    <span class="hljs-keyword">if</span> (quantityValue[l].UNIT_CD != <span class="hljs-string">""</span>)
                    {
                        m_uom = MP_Util.GetValueFromArray(quantityValue[l].UNIT_CD, codeArray);
                    }
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> m = <span class="hljs-number">0</span>, ml = referenceRange.length; m &lt; ml; m++)
                    {
                        m_refRange = <span class="hljs-keyword">new</span> MP_Core.ReferenceRangeResult();
                        m_refRange.init(referenceRange[m], codeArray);
                    }
                }
            }
            <span class="hljs-keyword">this</span>.getValue = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_val
            };
            <span class="hljs-keyword">this</span>.getUOM = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_uom
            };
            <span class="hljs-keyword">this</span>.getRefRange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_refRange
            };
            <span class="hljs-keyword">this</span>.getPrecision = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_precision
            };
            <span class="hljs-keyword">this</span>.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (m_uom != <span class="hljs-literal">null</span>)
                    <span class="hljs-keyword">return</span> (m_val + <span class="hljs-string">" "</span> + m_uom.display);
                <span class="hljs-keyword">else</span>
                    <span class="hljs-keyword">return</span> m_val;
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>measurement.init(meas.EVENT_ID, meas.PERSON_ID, meas.ENCNTR_ID, eventCode, dateTime, MP_Util.Measurement.GetObject(meas.MEASUREMENTS[k], codeArray));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        Measurement: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> m_eventId = <span class="hljs-number">0.0</span>;
            <span class="hljs-keyword">var</span> m_personId = <span class="hljs-number">0.0</span>;
            <span class="hljs-keyword">var</span> m_encntrId = <span class="hljs-number">0.0</span>;
            <span class="hljs-keyword">var</span> m_eventCode = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_dateTime = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_updateDateTime = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_result = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> m_normalcy = <span class="hljs-literal">null</span>

            <span class="hljs-keyword">this</span>.init = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(eventId, personId, encntrId, eventCode, dateTime, resultObj, updateDateTime)</span>
            {</span>
                m_eventId = eventId;
                m_personId = personId;
                m_encntrId = encntrId;
                m_eventCode = eventCode;
                m_dateTime = dateTime;
                m_result = resultObj;
                m_updateDateTime = updateDateTime;
            }
            <span class="hljs-keyword">this</span>.getEventId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_eventId
            };
            <span class="hljs-keyword">this</span>.getPersonId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_personId
            };
            <span class="hljs-keyword">this</span>.getEncntrId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_encntrId
            };
            <span class="hljs-keyword">this</span>.getEventCode = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_eventCode
            };
            <span class="hljs-keyword">this</span>.getDateTime = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_dateTime
            };
            <span class="hljs-keyword">this</span>.getUpdateDateTime = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_updateDateTime
            };
            <span class="hljs-keyword">this</span>.getResult = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_result
            };
            <span class="hljs-keyword">this</span>.setNormalcy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_normalcy = value
            };
            <span class="hljs-keyword">this</span>.getNormalcy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_normalcy
            };
        },
        MenuItem: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> m_name = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> m_desc = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> m_id = <span class="hljs-number">0.0</span>;

            <span class="hljs-keyword">this</span>.setDescription = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_desc = value;
            }
            <span class="hljs-keyword">this</span>.getDescription = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_desc;
            }
            <span class="hljs-keyword">this</span>.setName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_name = value;
            }
            <span class="hljs-keyword">this</span>.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_name;
            }
            <span class="hljs-keyword">this</span>.setId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span>
            {</span>
                m_id = value;
            }
            <span class="hljs-keyword">this</span>.getId = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">return</span> m_id;
            }
        },
        CriterionFilters: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(criterion)</span>
        {</span>
            <span class="hljs-keyword">var</span> m_criterion = criterion;
            <span class="hljs-keyword">var</span> m_evalAr = [];

            <span class="hljs-keyword">this</span>.addFilter = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(type, value)</span>
            {</span>
                m_evalAr.push(<span class="hljs-keyword">new</span> MP_Core.MapObject(type, value))
            }
            <span class="hljs-keyword">this</span>.checkFilters = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">var</span> pass = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">var</span> patInfo = m_criterion.getPatientInfo();
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = m_evalAr.length; x--; )
                {
                    <span class="hljs-keyword">var</span> filter = m_evalAr[x];
                    <span class="hljs-keyword">switch</span> (filter.name)
                    {
                        <span class="hljs-keyword">case</span> MP_Core.CriterionFilters.SEX_MEANING:
                            <span class="hljs-keyword">var</span> sex = patInfo.getSex();
                            <span class="hljs-keyword">if</span> (sex != <span class="hljs-literal">null</span>)
                            {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>alert(sex check: filter.value [ + filter.value + ] patInfo.sex [ + sex.meaning + ])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                <span class="hljs-keyword">if</span> (filter.value == sex.meaning)
                                    <span class="hljs-keyword">continue</span>;
                            }
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> MP_Core.CriterionFilters.DOB_OLDER_THAN:
                            <span class="hljs-keyword">var</span> dob = patInfo.getDOB();
                            <span class="hljs-keyword">if</span> (dob != <span class="hljs-literal">null</span>)
                            {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>alert(dob check: filter.value [ + filter.value + ] patInfo.dob [ + dob + ])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                <span class="hljs-keyword">if</span> (dob &lt;= filter.value)
                                    <span class="hljs-keyword">continue</span>;
                            }
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">case</span> MP_Core.CriterionFilters.DOB_YOUNGER_THAN:
                            <span class="hljs-keyword">var</span> dob = patInfo.getDOB();
                            <span class="hljs-keyword">if</span> (dob != <span class="hljs-literal">null</span>)
                            {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>alert(dob check: filter.value [ + filter.value + ] patInfo.dob [ + dob + ])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                <span class="hljs-keyword">if</span> (dob &gt;= filter.value)
                                    <span class="hljs-keyword">continue</span>;
                            }
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">break</span>;
                        <span class="hljs-keyword">default</span>:
                            alert(<span class="hljs-string">"Unhandled criterion filter"</span>)
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    };
} ();</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Constants for CriterionFilter items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>MP_Core.CriterionFilters.SEX_MEANING = <span class="hljs-number">1</span>;
MP_Core.CriterionFilters.DOB_OLDER_THAN = <span class="hljs-number">2</span>;
MP_Core.CriterionFilters.DOB_YOUNGER_THAN = <span class="hljs-number">3</span>;


MP_Core.AppUserPreferenceManager = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">var</span> m_criterion = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">var</span> m_prefIdent = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">var</span> m_jsonObject = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">/**
        * Allows for the initialization of the manager to store what criterion and preference identifier to
        * utilize for retrieval of preferences
        * @param {Object} criterion
        * @param {Object} preferenceIdentifier
        */</span>
        Initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(criterion, preferenceIdentifier)</span>
        {</span>
            m_criterion = criterion;
            m_prefIdent = preferenceIdentifier;
            m_jsonObject = <span class="hljs-literal">null</span>;
        },
        LoadPreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">if</span> (m_criterion == <span class="hljs-literal">null</span>)
            {
                alert(<span class="hljs-string">"Validation Failed: the AppUserPreferenceManager must be initialized prior to usage."</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }

            <span class="hljs-keyword">if</span> (m_jsonObject != <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> XMLCclRequest();
                info.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
                {</span>
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>)
                    {
                        <span class="hljs-keyword">var</span> jsonEval = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                        <span class="hljs-keyword">var</span> recordData = jsonEval.RECORD_DATA;
                        <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"S"</span>)
                        {
                            m_jsonObject = <span class="hljs-built_in">JSON</span>.parse(recordData.PREF_STRING);
                        }
                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"Z"</span>)
                        {
                            <span class="hljs-keyword">return</span>;
                        }
                        <span class="hljs-keyword">else</span>
                        {
                            <span class="hljs-keyword">var</span> errAr = [];
                            <span class="hljs-keyword">var</span> statusData = recordData.STATUS_DATA;
                            errAr.push(<span class="hljs-string">"STATUS: "</span> + statusData.STATUS)
                            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = statusData.SUBEVENTSTATUS.length; x &lt; xl; x++)
                            {
                                <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS[x];
                                errAr.push(ss.OPERATIONNAME, ss.OPERATIONSTATUS, ss.TARGETOBJECTNAME, ss.TARGETOBJECTVALUE);
                            }
                            window.status = <span class="hljs-string">"Error retrieving user preferences "</span> + errAr.join(<span class="hljs-string">","</span>);
                            <span class="hljs-keyword">return</span>;
                        }
                    }
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>)
                    {
                        MP_Util.ReleaseRequestReference(<span class="hljs-keyword">this</span>);
                    }

                }
                info.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">"MP_GET_USER_PREFS"</span>, <span class="hljs-literal">false</span>);
                <span class="hljs-keyword">var</span> ar = [<span class="hljs-string">"^mine^"</span>, m_criterion.provider_id + <span class="hljs-string">".0"</span>, <span class="hljs-string">"^"</span> + m_prefIdent + <span class="hljs-string">"^"</span>];
                info.send(ar.join(<span class="hljs-string">","</span>));
                <span class="hljs-keyword">return</span>;
            }
        },
        <span class="hljs-comment">/**
        * GetPreferences will return the users preferences for the application currently logged into.
        */</span>
        GetPreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">if</span> (m_criterion == <span class="hljs-literal">null</span>)
            {
                alert(<span class="hljs-string">"Validation Failed: the AppUserPreferenceManager must be initialized prior to usage."</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">if</span> (m_jsonObject == <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">this</span>.LoadPreferences();

            <span class="hljs-keyword">return</span> m_jsonObject;
        },
        SavePreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> body = document.body;
            <span class="hljs-keyword">var</span> groups = Util.Style.g(<span class="hljs-string">"col-group"</span>, body, <span class="hljs-string">"div"</span>)
            <span class="hljs-keyword">var</span> grpId = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> colId = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> rowId = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> compId = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">var</span> jsonObject = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
            <span class="hljs-keyword">var</span> userPrefs = jsonObject.user_prefs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
            <span class="hljs-keyword">var</span> pagePrefs = userPrefs.page_prefs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
            <span class="hljs-keyword">var</span> components = pagePrefs.components = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>alert(groups.length:  + groups.length)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = groups.length; x &lt; xl; x++)
            {
                grpId = x + <span class="hljs-number">1</span>; <span class="hljs-comment">//TODO: be aware that when the organizer level component can be moved, this x+1 will need to be modified</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>get liquid layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">var</span> liqLay = Util.Style.g(<span class="hljs-string">"col-outer1"</span>, groups[x], <span class="hljs-string">"div"</span>);
                <span class="hljs-keyword">if</span> (liqLay.length &gt; <span class="hljs-number">0</span>)
                {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>get each child column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">var</span> cols = Util.gcs(liqLay[<span class="hljs-number">0</span>])</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <pre><code>            alert(<span class="hljs-string">"cols.length: "</span> + cols.length)
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>, yl = cols.length; y &lt; yl; y++)
                    {
                        colId = y + <span class="hljs-number">1</span>;
                        <span class="hljs-keyword">var</span> rows = Util.gcs(cols[y]);</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>alert(rows.length:  + rows.length)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> z = <span class="hljs-number">0</span>, zl = rows.length; z &lt; zl; z++)
                        {
                            <span class="hljs-keyword">var</span> component = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>()
                            rowId = z + <span class="hljs-number">1</span>;
                            compId = jQuery(rows[z]).attr(<span class="hljs-string">'id'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>alert(component id = +compId);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                            component.id = compId;
                            component.group_seq = grpId;
                            component.col_seq = colId;
                            component.row_seq = rowId;
                            <span class="hljs-keyword">if</span> (jQuery(rows[z]).hasClass(<span class="hljs-string">'closed'</span>))
                                component.expanded = <span class="hljs-literal">false</span>;
                            <span class="hljs-keyword">else</span>
                                component.expanded = <span class="hljs-literal">true</span>;
                            components.push(component);
                        }
                    }
                }
            }
            WritePreferences(jsonObject);
            m_jsonObject = jsonObject;
            history.back();
        },
        ClearPreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            WritePreferences(<span class="hljs-literal">null</span>);
            history.back();
        },
        <span class="hljs-comment">/**
        * Returns the json object associated to the primary div id of the component.  It is assumed LoadPreferences has been called prior to execution
        * @param {Object} id
        */</span>
        GetComponentById: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(id)</span>
        {</span>
            <span class="hljs-keyword">if</span> (m_jsonObject != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">var</span> components = m_jsonObject.user_prefs.page_prefs.components;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = components.length; x--; )
                {
                    <span class="hljs-keyword">var</span> component = components[x];
                    <span class="hljs-keyword">if</span> (component.id == id)
                        <span class="hljs-keyword">return</span> component;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">WritePreferences</span><span class="hljs-params">(jsonObject, successMessage)</span>
    {</span>
        <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> XMLCclRequest();
        info.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>)
            {
                <span class="hljs-keyword">var</span> jsonEval = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                <span class="hljs-keyword">var</span> recordData = jsonEval.RECORD_DATA;
                <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"Z"</span>)
                {
                    m_jsonObject = <span class="hljs-literal">null</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (recordData.STATUS_DATA.STATUS == <span class="hljs-string">"S"</span>)
                {
                    m_jsonObject = jsonObject;
                    <span class="hljs-keyword">if</span> (successMessage != <span class="hljs-literal">null</span> &amp;&amp; successMessage.length &gt; <span class="hljs-number">0</span>)
                        alert(successMessage);
                }
                <span class="hljs-keyword">else</span>
                {
                    <span class="hljs-keyword">var</span> errAr = [];
                    <span class="hljs-keyword">var</span> statusData = recordData.STATUS_DATA;
                    errAr.push(<span class="hljs-string">"STATUS: "</span> + statusData.STATUS)
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = statusData.SUBEVENTSTATUS.length; x &lt; xl; x++)
                    {
                        <span class="hljs-keyword">var</span> ss = statusData.SUBEVENTSTATUS[x];
                        errAr.push(ss.OPERATIONNAME, ss.OPERATIONSTATUS, ss.TARGETOBJECTNAME, ss.TARGETOBJECTVALUE);
                    }
                    window.status = <span class="hljs-string">"Error saving user preferences: "</span> + errAr.join(<span class="hljs-string">","</span>)
                }
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>)
            {
                MP_Util.ReleaseRequestReference(<span class="hljs-keyword">this</span>);
            }
        }
        info.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">"MP_MAINTAIN_USER_PREFS"</span>, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">var</span> sJson = (jsonObject != <span class="hljs-literal">null</span>) ? <span class="hljs-built_in">JSON</span>.stringify(jsonObject) : <span class="hljs-string">""</span>;
        <span class="hljs-keyword">var</span> ar = [<span class="hljs-string">"^mine^"</span>, m_criterion.provider_id + <span class="hljs-string">".0"</span>, <span class="hljs-string">"^"</span> + m_prefIdent + <span class="hljs-string">"^"</span>, <span class="hljs-string">"^"</span> + sJson + <span class="hljs-string">"^"</span>];
        info.send(ar.join(<span class="hljs-string">","</span>));
    }
} ();

<span class="hljs-keyword">var</span> MP_Util = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">return</span> {
        GetCriterion: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(js_criterion, static_content)</span>
        {</span>
            <span class="hljs-keyword">var</span> jsCrit = js_criterion.CRITERION;
            <span class="hljs-keyword">var</span> criterion = <span class="hljs-keyword">new</span> MP_Core.Criterion(jsCrit.PERSON_ID,
				(jsCrit.ENCNTRS.length &gt; <span class="hljs-number">0</span>) ? jsCrit.ENCNTRS[<span class="hljs-number">0</span>].ENCNTR_ID : <span class="hljs-number">0</span>,
				jsCrit.PRSNL_ID,
				jsCrit.EXECUTABLE,
				static_content,
				jsCrit.POSITION_CD,
				jsCrit.PPR_CD,
				(jsCrit.DEBUG_IND == <span class="hljs-number">1</span>) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>,
				jsCrit.HELP_FILE_LOCAL_IND,
				jsCrit.CATEGORY_MEAN,
				jsCrit.BACKEND_LOCATION
				);
            <span class="hljs-keyword">var</span> codeArray = MP_Util.LoadCodeListJSON(jsCrit.CODES);
            <span class="hljs-keyword">var</span> jsPatInfo = jsCrit.PATIENT_INFO;
            <span class="hljs-keyword">var</span> patInfo = <span class="hljs-keyword">new</span> MP_Core.PatientInformation();
            patInfo.setSex(MP_Util.GetValueFromArray(jsPatInfo.SEX_CD, codeArray));
            <span class="hljs-keyword">if</span> (jsPatInfo.DOB != <span class="hljs-string">""</span>)
            {
                <span class="hljs-keyword">var</span> dt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                dt.setISO8601(jsPatInfo.DOB)
                patInfo.setDOB(dt);
            }
            criterion.setPatientInfo(patInfo);
            <span class="hljs-keyword">return</span> criterion;
        },
        CalcLookbackDate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(lookbackDays)</span>
        {</span>
            <span class="hljs-keyword">var</span> retDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
            <span class="hljs-keyword">var</span> hrs = retDate.getHours();
            hrs -= (lookbackDays * <span class="hljs-number">24</span>);
            retDate.setHours(hrs);
            <span class="hljs-keyword">return</span> retDate;
        },
        CalcWithinTime: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dateTime)</span>
        {</span>
            <span class="hljs-keyword">var</span> timeDiff = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> returnVal = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> today = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
            <span class="hljs-keyword">var</span> one_minute = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span>;
            <span class="hljs-keyword">var</span> one_hour = one_minute * <span class="hljs-number">60</span>;
            <span class="hljs-keyword">var</span> one_day = one_hour * <span class="hljs-number">24</span>;
            <span class="hljs-keyword">var</span> one_week = one_day * <span class="hljs-number">7</span>;
            <span class="hljs-keyword">var</span> one_month = one_day * (<span class="hljs-number">365</span> / <span class="hljs-number">12</span>);
            <span class="hljs-keyword">var</span> one_year = one_month * <span class="hljs-number">12</span>;

            timeDiff = (today.getTime() - dateTime.getTime()); <span class="hljs-comment">//time diff in milliseconds</span>
            <span class="hljs-keyword">var</span> valMinutes = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_minute);
            <span class="hljs-keyword">var</span> valHours = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_hour);
            <span class="hljs-keyword">var</span> valDays = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_day);
            <span class="hljs-keyword">var</span> valWeeks = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_week);
            <span class="hljs-keyword">var</span> valMonths = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_month);
            <span class="hljs-keyword">var</span> valYears = <span class="hljs-built_in">Math</span>.ceil(timeDiff / one_year);

            <span class="hljs-keyword">if</span> (valHours &lt;= <span class="hljs-number">2</span>)		<span class="hljs-comment">//Less than 2 hours, display number of minutes. Use abbreviation of "mins". </span>
                returnVal = (i18n.WITHIN_MINS.replace(<span class="hljs-string">"{0}"</span>, valMinutes));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valDays &lt;= <span class="hljs-number">2</span>) 	<span class="hljs-comment">//Less than 2 days, display number of hours. Use abbreviation of "hrs". </span>
                returnVal = (i18n.WITHIN_HOURS.replace(<span class="hljs-string">"{0}"</span>, valHours));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valWeeks &lt;= <span class="hljs-number">2</span>)	<span class="hljs-comment">//Less than 2 weeks, display number of days. Use "days".</span>
                returnVal = (i18n.WITHIN_DAYS.replace(<span class="hljs-string">"{0}"</span>, valDays));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valMonths &lt;= <span class="hljs-number">2</span>)	<span class="hljs-comment">//Less than 2 months, display number of weeks. Use abbreviation of "wks".</span>
                returnVal = (i18n.WITHIN_WEEKS.replace(<span class="hljs-string">"{0}"</span>, valWeeks));
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (valYears &lt;= <span class="hljs-number">2</span>)	<span class="hljs-comment">//Less than 2 years, display number of months. Use abbreviation of "mos".</span>
                returnVal = (i18n.WITHIN_MONTHS.replace(<span class="hljs-string">"{0}"</span>, valMonths));
            <span class="hljs-keyword">else</span> 					<span class="hljs-comment">//Over 2 years, display number of years.  Use abbreviation of "yrs".</span>
                returnVal = (i18n.WITHIN_YEARS.replace(<span class="hljs-string">"{0}"</span>, valYears));

            <span class="hljs-keyword">return</span> (returnVal);
        },
        DisplayDateByOption: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, date)</span>
        {</span>
            <span class="hljs-keyword">var</span> dtFormatted = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">switch</span> (component.getDateFormat())
            {
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    dtFormatted = date.format(<span class="hljs-string">"shortDate3"</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    dtFormatted = date.format(<span class="hljs-string">"longDateTime2"</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    dtFormatted = MP_Util.CalcWithinTime(date);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                    dtFormatted = <span class="hljs-string">"&amp;nbsp"</span>; <span class="hljs-comment">//Display No Date.  Additional logic will need to be applied to hide column.</span>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    dtFormatted = date.format(<span class="hljs-string">"longDateTime2"</span>);
            }
            <span class="hljs-keyword">return</span> (dtFormatted)
        },
        DisplaySelectedTab: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(showDiv, anchorId)</span>
        {</span>
            <span class="hljs-keyword">if</span> (window.name == <span class="hljs-string">"a-tab0"</span>)				<span class="hljs-comment">//first tab is default</span>
                window.name = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">else</span>
                window.name = showDiv + <span class="hljs-string">','</span> + anchorId;
            <span class="hljs-keyword">var</span> body = document.body;
            <span class="hljs-keyword">var</span> divs = Util.Style.g(<span class="hljs-string">"div-tab-item"</span>, body);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = divs.length; i--; )
            {
                <span class="hljs-keyword">if</span> (divs[i].id == showDiv)
                {
                    divs[i].style.display = <span class="hljs-string">'block'</span>;
                }
                <span class="hljs-keyword">else</span>
                {
                    divs[i].style.display = <span class="hljs-string">'none'</span>;
                }
            }

            <span class="hljs-keyword">var</span> anchors = Util.Style.g(<span class="hljs-string">"anchor-tab-item"</span>, body);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = anchors.length; i--; )
            {
                <span class="hljs-keyword">if</span> (anchors[i].id == anchorId)
                {
                    anchors[i].className = <span class="hljs-string">"anchor-tab-item active"</span>;
                }
                <span class="hljs-keyword">else</span>
                {
                    anchors[i].className = <span class="hljs-string">"anchor-tab-item inactive"</span>;
                }
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>remove initial Customize anchor href</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> custNode = _g(<span class="hljs-string">"custView"</span>);
            <span class="hljs-keyword">if</span> (custNode != <span class="hljs-literal">null</span>)
            {
                custNode.href = <span class="hljs-string">""</span>;
                custNode.innerHTML = <span class="hljs-string">""</span>;
            }

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> yl = CERN_TabManagers.length; yl--; )
            {
                <span class="hljs-keyword">var</span> tabManager = CERN_TabManagers[yl];
                <span class="hljs-keyword">var</span> tabItem = tabManager.getTabItem();
                <span class="hljs-keyword">if</span> (tabItem.key == showDiv)
                {
                    tabManager.loadTab();
                    tabManager.setSelectedTab(<span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">var</span> components = tabItem.components;
                    <span class="hljs-keyword">if</span> (components != <span class="hljs-literal">null</span> &amp;&amp; components.length &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> xl = components.length; xl--; )
                        {
                            <span class="hljs-keyword">var</span> component = components[xl];
                            MP_Util.Doc.AddCustomizeLink(component.getCriterion());
                            <span class="hljs-keyword">break</span>;
                        }
                    }
                }
                <span class="hljs-keyword">else</span>
                    tabManager.setSelectedTab(<span class="hljs-literal">false</span>);
            }
        },
        OpenTab: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(compId)</span>
        {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = CERN_MPageComponents.length; x &lt; xl; x++)
            {
                <span class="hljs-keyword">var</span> comp = CERN_MPageComponents[x];
                <span class="hljs-keyword">var</span> styles = comp.getStyles();
                <span class="hljs-keyword">if</span> (styles.getId() == compId)
                {
                    comp.openTab();
                }
            }
        },
        LaunchMenuSelection: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(compId, menuItemId)</span>
        {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>get the exact component from global array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = CERN_MPageComponents.length; x &lt; xl; x++)
            {
                <span class="hljs-keyword">var</span> comp = CERN_MPageComponents[x];
                <span class="hljs-keyword">var</span> crit = comp.getCriterion();
                <span class="hljs-keyword">var</span> styles = comp.getStyles();
                <span class="hljs-keyword">if</span> (styles.getId() == compId)
                {
                    comp.openDropDown(menuItemId)
                    <span class="hljs-keyword">break</span>; <span class="hljs-comment">//found</span>
                }
            }

        },
        LaunchMenu: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(menuId, componentId)</span>
        {</span>
            <span class="hljs-keyword">var</span> menu = _g(menuId);
            MP_Util.closeMenuInit(menu, componentId);
            <span class="hljs-keyword">if</span> (menu != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">if</span> (Util.Style.ccss(menu, <span class="hljs-string">"menu-hide"</span>))
                {
                    _g(componentId).style.zIndex = <span class="hljs-number">2</span>;
                    Util.Style.rcss(menu, <span class="hljs-string">"menu-hide"</span>);
                }
                <span class="hljs-keyword">else</span>
                {
                    _g(componentId).style.zIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">//'doc'</span>
                    Util.Style.acss(menu, <span class="hljs-string">"menu-hide"</span>);
                }
            }
        },
        closeMenuInit: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(inMenu, compId)</span>
        {</span>
            <span class="hljs-keyword">var</span> menuId;
            <span class="hljs-keyword">var</span> docMenuId = compId + <span class="hljs-string">"Menu"</span>;
            <span class="hljs-keyword">if</span> (inMenu.id == docMenuId)
            {<span class="hljs-comment">//m2 'docMenu'</span>
                menuId = compId;
            }
            <span class="hljs-keyword">if</span> (!e)
                <span class="hljs-keyword">var</span> e = window.event;
            <span class="hljs-keyword">if</span> (window.attachEvent)
            {
                Util.addEvent(inMenu, <span class="hljs-string">"mouseleave"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
                {</span>
                    Util.Style.acss(inMenu, <span class="hljs-string">"menu-hide"</span>);
                    _g(menuId).style.zIndex = <span class="hljs-number">1</span>;
                });
            }
            <span class="hljs-keyword">else</span>
            {
                Util.addEvent(inMenu, <span class="hljs-string">"mouseout"</span>, menuLeave);
            }

           <span class="hljs-comment">/* menuLeave: function (e)
            {
                if (!e)
                    var e = window.event;
                var relTarg = e.relatedTarget || e.toElement;
                if (e.relatedTarget.id == inMenu.id)
                {
                    Util.Style.acss(inMenu, "menu-hide");
                    _g(menuId).style.zIndex = 1;
                }
                e.stopPropagation();
                Util.cancelBubble(e);
            }*/</span>
        },
        <span class="hljs-comment">/**
        * Provies the ability to construct the text that is to be placed after the label of the Component.
        * Each component defines whether or not the number of items within the component should be displayed
        * in the title of the component.  This is a requirements decision and will have to be answered upon creation
        * of the component.  In addition, the lookback units and scope have been moved to the
        * subtitle text line and are no longer necessary in the title text.
        * 
        * The requirement is for each component to define whether or not the contract exists to display a number of items
        * within the component header.  The reason for this contract is when 'no results found' is displayed, the count of zero
        * must be displayed to indicate to the user if there are items within the component.  As for components who do not display
        * a count, the user will still have to manually open the component to determine whether or not data exists.
        * 
        * TODO: The future thought is that in the case of 'no results found' or 'error retrieving data', an additional indicator
        * will be added to the component in some manner to indicate the status.  This is important with components such as Laboratory
        * and Vitals for examples where the count of items is not displayed within the title text.
        * 
        * @param {MPageComponent} component The component in which to add the title text within.
        * @param {Integer} nbr The count of the list items displayed within the component
        * @param {String} optionalText Optional text to allow each consumer to place text within the header of the
        *                 component.
        */</span>
        CreateTitleText: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, nbr, optionalText)</span>
        {</span>
            <span class="hljs-keyword">var</span> ar = [];
            <span class="hljs-keyword">if</span> (component.isLineNumberIncluded())
            {
                ar.push(<span class="hljs-string">"("</span>, nbr, <span class="hljs-string">")"</span>);
            }
            <span class="hljs-keyword">if</span> (optionalText &amp;&amp; optionalText != <span class="hljs-string">""</span>)
            {
                ar.push(<span class="hljs-string">" "</span>, optionalText)
            }
            <span class="hljs-keyword">return</span> ar.join(<span class="hljs-string">""</span>);
        },
        GetContentClass: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, nbr)</span>
        {</span>
            <span class="hljs-keyword">if</span> (component.isScrollingEnabled())
            {
                <span class="hljs-keyword">var</span> scrollNbr = component.getScrollNumber();
                <span class="hljs-keyword">if</span> (nbr &gt;= scrollNbr &amp;&amp; scrollNbr &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"content-body scrollable"</span>;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"content-body"</span>;
        },
        <span class="hljs-comment">/**
        * CreateTimer will create a SLA timer and start the timer prior to returning.
        * @param {String} timerName The timer name to start
        * @param {String} subTimerName The subtimer name to start
        * @param {String} metaData1
        * @param {String} metaData2
        * @param {String} metaData3
        */</span>
        CreateTimer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(timerName, subTimerName, metaData1, metaData2, metaData3)</span>
        {</span>
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> slaTimer = window.external.DiscernObjectFactory(<span class="hljs-string">"SLATIMER"</span>);
            }
            <span class="hljs-keyword">catch</span> (err)
            {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }

            <span class="hljs-keyword">if</span> (slaTimer)
            {
                slaTimer.TimerName = timerName;
                <span class="hljs-keyword">if</span> (subTimerName)
                    slaTimer.SubtimerName = subTimerName;
                <span class="hljs-keyword">if</span> (metaData1)
                    slaTimer.Metadata1 = <span class="hljs-built_in">String</span>(metaData1);
                <span class="hljs-keyword">if</span> (metaData2)
                    slaTimer.Metadata2 = <span class="hljs-built_in">String</span>(metaData2);
                <span class="hljs-keyword">if</span> (metaData3)
                    slaTimer.Metadata3 = <span class="hljs-built_in">String</span>(metaData3);

                slaTimer.Start();
                <span class="hljs-keyword">return</span> slaTimer;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        },
        GetCodeSet: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(codeSet, async)</span>
        {</span>
            <span class="hljs-keyword">var</span> codes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
            <span class="hljs-keyword">var</span> info = <span class="hljs-keyword">new</span> XMLCclRequest();
            info.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
            {</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>)
                {
                    <span class="hljs-keyword">var</span> jsonEval = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.responseText);
                    <span class="hljs-keyword">if</span> (jsonEval.RECORD_DATA.STATUS_DATA.STATUS == <span class="hljs-string">"S"</span>)
                    {
                        codes = MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
                    }
                    <span class="hljs-keyword">return</span> codes;
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span>)
                {
                    MP_Util.ReleaseRequestReference(<span class="hljs-keyword">this</span>);
                }

            }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p> Call the ccl progam and send the parameter string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            info.open(<span class="hljs-string">'GET'</span>, <span class="hljs-string">"MP_GET_CODESET"</span>, async);
            <span class="hljs-keyword">var</span> sendVal = <span class="hljs-string">"^MINE^, "</span> + codeSet + <span class="hljs-string">".0"</span>;
            info.send(sendVal);
            <span class="hljs-keyword">return</span> codes;
        },
        GetCodeByMeaning: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mapCodes, meaning)</span>
        {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = mapCodes.length; x--; )
            {
                <span class="hljs-keyword">var</span> code = mapCodes[x].value;
                <span class="hljs-keyword">if</span> (code.meaning == meaning)
                    <span class="hljs-keyword">return</span> code;
            }
        },
        GetItemFromMapArray: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mapItems, item)</span>
        {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = mapItems.length; x--; )
            {
                <span class="hljs-keyword">if</span> (mapItems[x].name == item)
                    <span class="hljs-keyword">return</span> mapItems[x].value;
            }
        },
        <span class="hljs-comment">/**
        * Add an item to the array of items associated to the map key
        * @param {Object} mapItems The map array to search within
        * @param {Object} key The primary key that will be searching for within the map array
        * @param (Object} value The object that is to be added to the map array
        */</span>
        AddItemToMapArray: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mapItems, key, value)</span>
        {</span>
            <span class="hljs-keyword">var</span> ar = MP_Util.GetItemFromMapArray(mapItems, key);
            <span class="hljs-keyword">if</span> (ar == <span class="hljs-literal">null</span>)
            {
                ar = []
                mapItems.push(<span class="hljs-keyword">new</span> MP_Core.MapObject(key, ar));
            }
            ar.push(value);
        },
        LookBackTime: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component)</span>
        {</span>
            <span class="hljs-keyword">var</span> remainder = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> lookbackDays = component.getLookbackDays();
            <span class="hljs-keyword">if</span> (lookbackDays == <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">return</span> (i18n.SELECTED_VISIT);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lookbackDays == <span class="hljs-number">1</span>)
                <span class="hljs-keyword">return</span> (i18n.LAST_N_HOURS.replace(<span class="hljs-string">"{0}"</span>, lookbackDays * <span class="hljs-number">24</span>));
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> (i18n.LAST_N_DAYS.replace(<span class="hljs-string">"{0}"</span>, lookbackDays));
        },
        CreateClinNoteLink: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(patient_id, encntr_id, event_id, display, docTypeFlag)</span>
        {</span>
            <span class="hljs-keyword">var</span> docType = (docTypeFlag &amp;&amp; docTypeFlag &gt; <span class="hljs-number">0</span>) ? docTypeFlag : <span class="hljs-number">1</span>;
            <span class="hljs-keyword">var</span> doclink = <span class="hljs-string">""</span>
            <span class="hljs-keyword">if</span> (event_id &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">var</span> ar = [];
                ar.push(patient_id, encntr_id, event_id, docType);
                doclink = <span class="hljs-string">"&lt;a href=javascript:MP_Util.LaunchClinNoteViewer("</span> + ar.join(<span class="hljs-string">","</span>) + <span class="hljs-string">");&gt;"</span> + display + <span class="hljs-string">"&lt;/a&gt;"</span>
            }
            <span class="hljs-keyword">else</span>
            {
                doclink = display
            }
            <span class="hljs-keyword">return</span> (doclink);
        },
        <span class="hljs-comment">/**
        * Retrieves a document for viewing via the MPages RTF viewer
        * @param {Object} eventId The parent or child event id for retrieval
        * @param {Object} docTypeFlag 
        * 0: Parent Event Id retrieval of child event blobs
        * 1: Event Id blob retrieval
        * 2: Long text retrieval
        * 3: Micro Detail retrieval
        * 4: Anatomic Pathology retrieval
        */</span>
        LaunchRTFViewer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(eventId, docTypeFlag)</span>
        {</span>
            <span class="hljs-keyword">var</span> ar = [];
            ar.push(<span class="hljs-string">"^mine^"</span>, eventId + <span class="hljs-string">".0"</span>, docTypeFlag);
            CCLLINK(<span class="hljs-string">"mp_clin_smry_clinicaldocs"</span>, ar.join(<span class="hljs-string">","</span>), <span class="hljs-number">1</span>);
        },
        LaunchClinNoteViewer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(patient_id, encntr_id, event_id, docTypeFlag)</span>
        {</span>
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> sParms = patient_id + <span class="hljs-string">"|"</span> + encntr_id + <span class="hljs-string">"|"</span> + <span class="hljs-string">"["</span> + event_id + <span class="hljs-string">"]|Documents|15|CLINNOTES|3|CLINNOTES|1"</span>;
                <span class="hljs-keyword">var</span> tempDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                MPAGES_EVENT(<span class="hljs-string">'CLINICALNOTE'</span>, sParms);
                <span class="hljs-keyword">var</span> tempDate2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                <span class="hljs-keyword">if</span> (tempDate2 - tempDate &lt;= <span class="hljs-number">1000</span>)
                {
                    MP_Util.LaunchRTFViewer(event_id, docTypeFlag);
                }
            }
            <span class="hljs-keyword">catch</span> (err)
            {
                MP_Util.LaunchRTFViewer(event_id, docTypeFlag);
            }

        },
        HandleNoDataResponse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(nameSpace)</span>
        {</span>
            <span class="hljs-keyword">return</span> (<span class="hljs-string">"&lt;h3 class='"</span> + nameSpace + <span class="hljs-string">"-info-hd'&gt;&lt;span class='res-normal'&gt;"</span> + i18n.NO_RESULTS_FOUND + <span class="hljs-string">"&lt;/span&gt;&lt;/h3&gt;&lt;span class='res-none'&gt;"</span> + i18n.NO_RESULTS_FOUND + <span class="hljs-string">"&lt;/span&gt;"</span>);
        },
        HandleErrorResponse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(nameSpace, errorMessage)</span>
        {</span>
            <span class="hljs-keyword">var</span> ar = [];
            ar.push(<span class="hljs-string">"&lt;h3 class='"</span> + nameSpace + <span class="hljs-string">"-info-hd'&gt;&lt;span class='res-normal'&gt;"</span> + i18n.ERROR_RETREIVING_DATA + <span class="hljs-string">"&lt;/span&gt;&lt;/h3&gt;"</span>);
            ar.push(<span class="hljs-string">"&lt;dl class='"</span> + nameSpace + <span class="hljs-string">"-info'&gt;&lt;dt&gt;&lt;span&gt;"</span> + i18n.ERROR_RETREIVING_DATA + <span class="hljs-string">"&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;span&gt;"</span> + i18n.ERROR_RETREIVING_DATA + <span class="hljs-string">"&lt;/span&gt;&lt;/dd&gt;&lt;/dl&gt;"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>add error in hover if exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (errorMessage != <span class="hljs-literal">null</span> &amp;&amp; errorMessage.length &gt; <span class="hljs-number">0</span>)
            {
                ar.push(<span class="hljs-string">"&lt;h4 class='"</span>, nameSpace, <span class="hljs-string">"-det-hd'&gt;&lt;span&gt;DETAILS&lt;/span&gt;&lt;/h4&gt;&lt;div class='hvr'&gt;&lt;dl class='"</span>, nameSpace, <span class="hljs-string">"-det'&gt;&lt;dd&gt;&lt;span&gt;"</span>, errorMessage, <span class="hljs-string">"&lt;/span&gt;&lt;/dd&gt;&lt;/dl&gt;&lt;/div&gt;"</span>);
            }
            <span class="hljs-keyword">return</span> ar.join(<span class="hljs-string">""</span>);
        },
        GetValueFromArray: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, array)</span>
        {</span>
            <span class="hljs-keyword">if</span> (array != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xi = array.length; x &lt; xi; x++)
                {
                    <span class="hljs-keyword">if</span> (array[x].name == name)
                    {
                        <span class="hljs-keyword">return</span> (array[x].value);
                    }
                }
            }
            <span class="hljs-keyword">return</span> (<span class="hljs-literal">null</span>);
        },
        LoadCodeListJSON: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(parentElement)</span>
        {</span>
            <span class="hljs-keyword">var</span> codeArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
            <span class="hljs-keyword">if</span> (parentElement != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>; x &lt; parentElement.length; x++)
                {
                    <span class="hljs-keyword">var</span> codeObject = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
                    codeElement = parentElement[x];
                    codeObject.codeValue = codeElement.CODE;
                    codeObject.display = codeElement.DISPLAY;
                    codeObject.description = codeElement.DESCRIPTION;
                    codeObject.codeSet = codeElement.CODE_SET;
                    codeObject.sequence = codeElement.SEQUENCE;
                    codeObject.meaning = codeElement.MEANING;
                    <span class="hljs-keyword">var</span> mapObj = <span class="hljs-keyword">new</span> MP_Core.MapObject(codeObject.codeValue, codeObject);
                    codeArray.push(mapObj);
                }
            }
            <span class="hljs-keyword">return</span> (codeArray);
        },
        LoadPersonelListJSON: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(parentElement)</span>
        {</span>
            <span class="hljs-keyword">var</span> personnelArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>();
            <span class="hljs-keyword">if</span> (parentElement != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>; x &lt; parentElement.length; x++)
                {
                    <span class="hljs-keyword">var</span> perObject = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();
                    codeElement = parentElement[x];
                    perObject.id = codeElement.ID;
                    perObject.fullName = codeElement.PROVIDER_NAME.NAME_FULL;
                    perObject.firstName = codeElement.PROVIDER_NAME.NAME_FIRST;
                    perObject.middleName = codeElement.PROVIDER_NAME.NAME_MIDDLE;
                    perObject.lastName = codeElement.PROVIDER_NAME.NAME_LAST;
                    perObject.userName = codeElement.PROVIDER_NAME.USERNAME;
                    perObject.initials = codeElement.PROVIDER_NAME.INITIALS;
                    perObject.title = codeElement.PROVIDER_NAME.TITLE;
                    <span class="hljs-keyword">var</span> mapObj = <span class="hljs-keyword">new</span> MP_Core.MapObject(perObject.id, perObject);
                    personnelArray[x] = mapObj;
                }
            }
            <span class="hljs-keyword">return</span> (personnelArray);
        },
        WriteToFile: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(sText)</span>
        {</span>
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> ForAppending = <span class="hljs-number">8</span>;
                <span class="hljs-keyword">var</span> TriStateFalse = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">var</span> fso = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Scripting.FileSystemObject"</span>);
                <span class="hljs-keyword">var</span> newFile = fso.OpenTextFile(<span class="hljs-string">"c:\\temp\\test.txt"</span>, ForAppending, <span class="hljs-literal">true</span>, TriStateFalse);
                newFile.write(sText);
                newFile.close();
            }
            <span class="hljs-keyword">catch</span> (err)
            {
                <span class="hljs-keyword">var</span> strErr = <span class="hljs-string">'Error:'</span>;
                strErr += <span class="hljs-string">'\nNumber:'</span> + err.number;
                strErr += <span class="hljs-string">'\nDescription:'</span> + err.description;
                document.write(strErr);
            }
        },
        CalculateAge: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(bdate)</span>
        {</span>
            <span class="hljs-keyword">var</span> age;
            <span class="hljs-keyword">var</span> bdate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(bdate); <span class="hljs-comment">//typecasting string to date obj</span>
            <span class="hljs-keyword">var</span> byear = bdate.getFullYear();
            <span class="hljs-keyword">var</span> bmonth = bdate.getMonth();
            <span class="hljs-keyword">var</span> bday = bdate.getDate();
            <span class="hljs-keyword">var</span> bhours = bdate.getHours();
            today = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
            year = today.getFullYear();
            month = today.getMonth();
            day = today.getDate();
            hours = today.getHours();

            <span class="hljs-keyword">if</span> (year == byear &amp;&amp; (day == bday))
            {
                age = hours - bhours;
                age += <span class="hljs-string">" Hours"</span>;
                <span class="hljs-keyword">return</span> age;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (year == byear &amp;&amp; (month == bmonth))
            {
                age = day - bday;
                age += <span class="hljs-string">" Days"</span>;
                <span class="hljs-keyword">return</span> age;
            }
            <span class="hljs-keyword">if</span> (year == byear)
            {
                age = month - bmonth;
                age += <span class="hljs-string">" Months"</span>;
                <span class="hljs-keyword">return</span> age;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">if</span> (month &lt; bmonth)
                {
                    age = year - byear - <span class="hljs-number">1</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (month &gt; bmonth)
                {
                    age = year - byear;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (month == bmonth)
                {
                    <span class="hljs-keyword">if</span> (day &lt; bday)
                    {
                        age = year - byear - <span class="hljs-number">1</span>;
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (day &gt; bday)
                    {
                        age = year - byear;
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (day == bday)
                    {
                        age = year - byear;
                    }
                }
            }
            age += <span class="hljs-string">" Years"</span>
            <span class="hljs-keyword">return</span> age;
        },

        <span class="hljs-comment">/**
        *  Javascript string pad
        *  http://www.webtoolkit.info/
        **/</span>
        pad: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(str, len, pad, dir)</span>
        {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (len) == <span class="hljs-string">"undefined"</span>)
            {
                <span class="hljs-keyword">var</span> len = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (pad) == <span class="hljs-string">"undefined"</span>)
            {
                <span class="hljs-keyword">var</span> pad = <span class="hljs-string">' '</span>;
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (dir) == <span class="hljs-string">"undefined"</span>)
            {
                <span class="hljs-keyword">var</span> dir = STR_PAD_RIGHT;
            }

            <span class="hljs-keyword">if</span> (len + <span class="hljs-number">1</span> &gt;= str.length)
            {

                <span class="hljs-keyword">switch</span> (dir)
                {

                    <span class="hljs-keyword">case</span> STR_PAD_LEFT:
                        str = <span class="hljs-built_in">Array</span>(len + <span class="hljs-number">1</span> - str.length).join(pad) + str;
                        <span class="hljs-keyword">break</span>;

                    <span class="hljs-keyword">case</span> STR_PAD_BOTH:
                        <span class="hljs-keyword">var</span> right = <span class="hljs-built_in">Math</span>.ceil((padlen = len - str.length) / <span class="hljs-number">2</span>);
                        <span class="hljs-keyword">var</span> left = padlen - right;
                        str = <span class="hljs-built_in">Array</span>(left + <span class="hljs-number">1</span>).join(pad) + str + <span class="hljs-built_in">Array</span>(right + <span class="hljs-number">1</span>).join(pad);
                        <span class="hljs-keyword">break</span>;

                    <span class="hljs-keyword">default</span>:
                        str = str + <span class="hljs-built_in">Array</span>(len + <span class="hljs-number">1</span> - str.length).join(pad);
                        <span class="hljs-keyword">break</span>;

                } <span class="hljs-comment">// switch</span>
            }
            <span class="hljs-keyword">return</span> str;
        },

        <span class="hljs-comment">/**
        * Launches graph in a modal window viewable in the Powerchart framework
        * @param {float}  patientId
        * @param {float}  encntrId
        * @param {float}  eventCode     : Used to plot simple results for a given patient/encounter I.e. weight,height,BMI,BUN,WBC.
        * @param {string} staticContent : location of the static content directory that contains the core JS / CSS files needed for the graph
        * @param {float}  groupId       : If item is a grouped item pass the BR_DATAMART_FILTER_ID to pull all associated results I.e. BP,Temp,or HR.
        * @param {float}  providerId    : Personel ID of the user
        * @param {float}  positionCd    : Position of the user
        * @param {float}  pprCD         : Person Personell Relationship code value
        * @param {integer}lookBackUnits 
        * @param {integer}lookBackType  : 1 = Hours, 2 = Days, 3 = Weeks, 4 = Months , 5 = Years

        */</span>
        GraphResults: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(personId, encntrId, eventCd, staticContent, groupId, providerId, positionCd, pprCD, lookBackUnits, lookBackType)</span>
        {</span>
            <span class="hljs-keyword">var</span> wParams = <span class="hljs-string">"left=0,top=0,width=1200,height=700,toolbar=no"</span>;
            <span class="hljs-keyword">var</span> sParams = <span class="hljs-string">"^MINE^,"</span> + personId + <span class="hljs-string">","</span> + encntrId + <span class="hljs-string">","</span> + eventCd + <span class="hljs-string">",^"</span> + <span class="hljs-built_in">unescape</span>(staticContent) + <span class="hljs-string">"^,"</span> + groupId + <span class="hljs-string">","</span> + providerId + <span class="hljs-string">","</span> + positionCd + <span class="hljs-string">","</span> + pprCD + <span class="hljs-string">","</span> + lookBackUnits + <span class="hljs-string">","</span> + lookBackType;
            <span class="hljs-keyword">var</span> graphCall = <span class="hljs-string">"javascript:CCLLINK('mp_graph_results', '"</span> + sParams + <span class="hljs-string">"',1)"</span>;
            javascript: CCLNEWSESSIONWINDOW(graphCall, <span class="hljs-string">"_self"</span>, wParams, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
            Util.preventDefault();
        },
        ReleaseRequestReference: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(reqObj)</span>
        {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>clean up requests</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (XMLCCLREQUESTOBJECTPOINTER)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id <span class="hljs-keyword">in</span> XMLCCLREQUESTOBJECTPOINTER)
                {
                    <span class="hljs-keyword">if</span> (XMLCCLREQUESTOBJECTPOINTER[id] == reqObj)
                    {
                        <span class="hljs-keyword">delete</span> (XMLCCLREQUESTOBJECTPOINTER[id])
                    }
                }
            }
        },
        CreateAutoSuggestBoxHtml: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component)</span>
        {</span>
            <span class="hljs-keyword">var</span> searchBoxHTML = [];
            <span class="hljs-keyword">var</span> compNs = component.getStyles().getNameSpace();
            <span class="hljs-keyword">var</span> compId = component.getComponentId();
            searchBoxHTML.push(<span class="hljs-string">"&lt;div&gt;&lt;form name='contentForm' OnSubmit='return AvoidSubmit();'&gt;&lt;input type='text' id='"</span>, compNs, <span class="hljs-string">"contentCtrl"</span>, compId, <span class="hljs-string">"'"</span>
					, <span class="hljs-string">" class='search-box'&gt;&lt;/form&gt;&lt;/div&gt;"</span>);
            <span class="hljs-keyword">return</span> searchBoxHTML.join(<span class="hljs-string">""</span>);
        },
        AddAutoSuggestControl: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component, queryHandler, selectionHandler, selectDisplayHandler)</span>
        {</span>
            <span class="hljs-keyword">new</span> AutoSuggestControl(component, queryHandler, selectionHandler, selectDisplayHandler);
        },
        RetrieveAutoSuggestSearchBox: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(component)</span>
        {</span>
            <span class="hljs-keyword">var</span> componentNamespace = component.getStyles().getNameSpace();
            <span class="hljs-keyword">var</span> componentId = component.getComponentId();
            <span class="hljs-keyword">return</span> _g(componentNamespace + <span class="hljs-string">"contentCtrl"</span> + componentId);
        },
        CreateParamArray: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ar, type)</span>
        {</span>
            <span class="hljs-keyword">var</span> returnVal = (type === <span class="hljs-number">1</span>) ? <span class="hljs-string">"0.0"</span> : <span class="hljs-string">"0"</span>;
            <span class="hljs-keyword">if</span> (ar &amp;&amp; ar.length &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">if</span> (ar.length &gt; <span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (type === <span class="hljs-number">1</span>)
                    {
                        returnVal = <span class="hljs-string">"value("</span> + ar.join(<span class="hljs-string">".0,"</span>) + <span class="hljs-string">".0)"</span>
                    }
                    <span class="hljs-keyword">else</span>
                    {
                        returnVal = <span class="hljs-string">"value("</span> + ar.join(<span class="hljs-string">","</span>) + <span class="hljs-string">")"</span>
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    returnVal = (type === <span class="hljs-number">1</span>) ? ar[<span class="hljs-number">0</span>] + <span class="hljs-string">".0"</span> : ar[<span class="hljs-number">0</span>];
                }
            }
            <span class="hljs-keyword">return</span> returnVal;
        },
        GetSavedXMLData: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(array1)</span>
        {</span>
            <span class="hljs-keyword">var</span> comp = m_savedXML.getElementsByTagName(<span class="hljs-string">"Visit"</span>);
            <span class="hljs-keyword">var</span> savedValue = []; savedData = []; count = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (comp.length &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">for</span> (c = <span class="hljs-number">0</span>; c &lt; comp.length; c++)
                {
                    <span class="hljs-keyword">var</span> calcItems = comp[c].getElementsByTagName(<span class="hljs-string">"CalculatorItems"</span>);
                    <span class="hljs-keyword">if</span> (calcItems.length &gt; <span class="hljs-number">0</span>)
                    {
                        savedValue = calcItems[<span class="hljs-number">0</span>].firstChild ? calcItems[<span class="hljs-number">0</span>].childNodes[<span class="hljs-number">0</span>].nodeValue : <span class="hljs-string">""</span>;
                    }
                }                
                <span class="hljs-keyword">if</span> (savedValue.length &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">var</span> array2 = savedValue.split(<span class="hljs-string">","</span>);
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; array2.length; i++)
                    {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; array1.length; j++)
                        {
                            <span class="hljs-keyword">if</span> (array2[i] == array1[j])
                            {
                                savedData[count] = array2[i];
                                count++;
                            }
                        }
                    }
                }
            }
            <span class="hljs-keyword">return</span> savedData;
        }
    }
} ();

MP_Util.Doc = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">var</span> isExpandedAll = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">/**
        * Initialized the page based on a configuration of multiple MPage objects
        * @param {Array} arMapObjects Array of the MPages to initialize the tab layout.
        * @param {String} title The title to be associated to the page.
        */</span>
        InitMPageTabLayout: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(arMapObjects, title)</span>
        {</span>
            <span class="hljs-keyword">var</span> arItems = [];
            <span class="hljs-keyword">var</span> sc = <span class="hljs-string">""</span>, helpFile = <span class="hljs-string">""</span>, helpURL = <span class="hljs-string">""</span>, debugInd = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> bDisplayBanner = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> criterion = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">var</span> custInd = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">var</span> anchorArray = <span class="hljs-literal">null</span>;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = arMapObjects.length; x &lt; xl; x++)
            {
                <span class="hljs-keyword">var</span> key = arMapObjects[x].name;
                <span class="hljs-keyword">var</span> page = arMapObjects[x].value;
                criterion = page.getCriterion();</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>arItems.push(new MP_Core.TabItem(key, page.getName(), page.getComponents(), criterion.category_mean))</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                sc = criterion.static_content;
                debugInd = criterion.debug_ind;
                helpFile = page.getHelpFileName();
                helpURL = page.getHelpFileURL();
                custInd = page.getCustomizeEnabled();
                anchorArray = page.getTitleAnchors();
                <span class="hljs-keyword">if</span> (page.isBannerEnabled())
                    bDisplayBanner = page.isBannerEnabled();
            }
            MP_Util.Doc.InitTabLayout(arItems, title, sc, helpFile, helpURL, bDisplayBanner, <span class="hljs-number">0</span>, criterion, custInd, anchorArray);
        },
        <span class="hljs-comment">/**
        * Initialized the page based on a configuration of multiple TabItem objects
        * @param {Array} arTabItems Array of the tab Objects to initialize the tab layout.
        * @param {String} title The title to be associated to the page.
        * @param {String} sc The static content file location.
        * @param {String} helpFile The string name of the help file to associate to the page.
        * @param {String} HelpURL The String name of the help file URL to associate to the page.
        * @param {Boolean} debugInd A boolean indicator denoting if the MPage should be run in debug mode
        */</span>
        InitTabLayout: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(arTabItems, title, sc, helpFile, helpURL, includeBanner, debugInd, criterion, custInd, anchorArray)</span>
        {</span>
            <span class="hljs-keyword">var</span> body = document.body;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>create page title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            MP_Util.Doc.AddPageTitle(title, body, debugInd, custInd, anchorArray);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>create help file link</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (helpFile != <span class="hljs-literal">null</span> &amp;&amp; helpFile.length &gt; <span class="hljs-number">0</span>)
                MP_Util.Doc.AddHelpLink(sc, helpFile);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (helpURL != <span class="hljs-literal">null</span> &amp;&amp; helpURL.length &gt; <span class="hljs-number">0</span>)
                MP_Util.Doc.AddHelpURL(sc, helpURL);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>check if banner should be created</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (includeBanner)
            {
                body.innerHTML += <span class="hljs-string">"&lt;div id=banner&gt;&lt;/div&gt;"</span>;
            }
            body.innerHTML += <span class="hljs-string">"&lt;div id='disclaimer'&gt;&lt;span&gt;"</span> + i18n.DISCLAIMER + <span class="hljs-string">"&lt;/span&gt;&lt;/div&gt;"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>create unordered list for page level tabs
 a) need the id of the tabs to identify, b) the name of the tab, c) the components to add</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            AddPageTabs(arTabItems, body);</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>create component placeholders for each tab</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            CERN_TabManagers = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = arTabItems.length; x &lt; xl; x++)
            {
                <span class="hljs-keyword">var</span> tabItem = arTabItems[x];
                <span class="hljs-keyword">var</span> tabManager = <span class="hljs-keyword">new</span> MP_Core.TabManager(tabItem);
                <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>)
                {</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>the first tab will be selected upon initial loading of page.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    tabManager.setSelectedTab(<span class="hljs-literal">true</span>);
                }
                CERN_TabManagers.push(tabManager);
                CreateLiquidLayout(tabItem.components, _g(arTabItems[x].key));
            }
            MP_Util.Doc.AddCustomizeLink(criterion);
            SetupExpandCollapse();
        },
        InitLayout: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mPage)</span>
        {</span>
            <span class="hljs-keyword">var</span> body = document.body;
            <span class="hljs-keyword">var</span> criterion = mPage.getCriterion();</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>create page title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            MP_Util.Doc.AddPageTitle(mPage.getName(), body, criterion.debug_ind, mPage.getCustomizeEnabled(), mPage.getTitleAnchors());</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>create help file link</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> sc = criterion.static_content;
            <span class="hljs-keyword">var</span> helpFile = mPage.getHelpFileName();
            <span class="hljs-keyword">var</span> helpURL = mPage.getHelpFileURL();
            <span class="hljs-keyword">if</span> (helpFile != <span class="hljs-literal">null</span> &amp;&amp; helpFile.length &gt; <span class="hljs-number">0</span>)
                MP_Util.Doc.AddHelpLink(sc, helpFile);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (helpURL != <span class="hljs-literal">null</span> &amp;&amp; helpURL.length &gt; <span class="hljs-number">0</span>)
                MP_Util.Doc.AddHelpURL(sc, helpURL);</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>check if banner should be created</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (mPage.isBannerEnabled())
            {
                body.innerHTML += <span class="hljs-string">"&lt;div id=banner&gt;&lt;/div&gt;"</span>;
            }
            body.innerHTML += <span class="hljs-string">"&lt;div id='disclaimer'&gt;&lt;span&gt;"</span> + i18n.DISCLAIMER + <span class="hljs-string">"&lt;/span&gt;&lt;/div&gt;"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>CreateLiquidLayout(mPage.getComponents(), body)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            MP_Util.Doc.AddCustomizeLink(criterion);
            SetupExpandCollapse();
        },
        InitLayoutComponentWizard: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mPage)</span>
        {</span>
            <span class="hljs-keyword">var</span> tHTML = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> criterion = mPage.getCriterion();
            CERN_WizardComponents = [];
            CERN_WizardComponents.push(mPage.getComponents());
            tHTML = CreateLiquidLayoutComponent(mPage.getComponents(), tHTML);
            MP_Util.Doc.AddCustomizeLink(criterion);
            <span class="hljs-keyword">return</span> (tHTML);
        },
        SetupExpandCollapseWizard: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mPage)</span>
        {</span>
            SetupExpandCollapse();
        },
        CustomizeLayout: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(title, components)</span>
        {</span>
            <span class="hljs-keyword">var</span> body = document.body;
            MP_Util.Doc.AddPageTitle(title, body, <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);
            MP_Util.Doc.AddClearPreferences(body)
            MP_Util.Doc.AddSavePreferences(body)

            body.innerHTML += <span class="hljs-string">"&lt;div id='disclaimer'&gt;&lt;span&gt;"</span> + i18n.USER_CUST_DISCLAIMER + <span class="hljs-string">"&lt;/span&gt;&lt;/div&gt;"</span>;

            <span class="hljs-keyword">var</span> compAr = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = components.length; x--; )
            {
                <span class="hljs-keyword">var</span> component = components[x];
                <span class="hljs-keyword">if</span> (component.getColumn() != <span class="hljs-number">99</span>)
                    compAr.push(component);
            }

            CreateCustomizeLiquidLayout(compAr, body)
            SetupExpandCollapse();
        },
        GetComments: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(par, personnelArray)</span>
        {</span>
            <span class="hljs-keyword">var</span> com = <span class="hljs-string">""</span>, recDate = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">var</span> dateTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, m = par.COMMENTS.length; j &lt; m; j++)
            {
                <span class="hljs-keyword">if</span> (personnelArray.length != <span class="hljs-literal">null</span>)
                {
                    <span class="hljs-keyword">if</span> (par.COMMENTS[j].RECORDED_BY)
                        perCodeObj = MP_Util.GetValueFromArray(par.COMMENTS[j].RECORDED_BY, personnelArray);

                    <span class="hljs-keyword">if</span> (par.COMMENTS[j].RECORDED_DT_TM != <span class="hljs-string">""</span>)
                    {
                        recDate = par.COMMENTS[j].RECORDED_DT_TM;
                        dateTime.setISO8601(recDate);
                        recDate = dateTime.format(<span class="hljs-string">"longDateTime3"</span>);
                    }
                    <span class="hljs-keyword">if</span> (j &gt; <span class="hljs-number">0</span>)
                    {
                        com += <span class="hljs-string">"&lt;br /&gt;"</span>;
                    }
                    com += recDate + <span class="hljs-string">" -  "</span> + perCodeObj.fullName + <span class="hljs-string">"&lt;br /&gt;"</span> + par.COMMENTS[j].COMMENT_TEXT;
                }
            }
            <span class="hljs-keyword">return</span> com;
        },
        FinalizeComponent: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(contentHTML, component, countText)</span>
        {</span>
            <span class="hljs-keyword">var</span> styles = component.getStyles();</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>replace counte text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> rootComponentNode = component.getRootComponentNode();
            <span class="hljs-keyword">var</span> totalCount = Util.Style.g(<span class="hljs-string">"sec-total"</span>, rootComponentNode, <span class="hljs-string">"span"</span>);
            totalCount[<span class="hljs-number">0</span>].innerHTML = countText;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>replace content with HTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> node = component.getSectionContentNode();
            node.innerHTML = contentHTML;</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>init hovers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            MP_Util.Doc.InitHovers(styles.getInfo(), node);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>init subsection toggles</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!component.isRefTxtExpanded())
            {
                <span class="hljs-keyword">var</span> style = component.getStyles().getNameSpace();
                <span class="hljs-keyword">var</span> oClass = <span class="hljs-string">"fc-sub-sec "</span> + style;
                <span class="hljs-keyword">var</span> nClass = <span class="hljs-string">"fc-sub-sec "</span> + style + <span class="hljs-string">" closed"</span>;
                $(<span class="hljs-string">"#fc-sub-sec-"</span> + style).removeClass(oClass).addClass(nClass);
            }
            MP_Util.Doc.InitSubToggles(node, <span class="hljs-string">"fc-sub-sec-hd-tgl"</span>);
            MP_Util.Doc.InitSubToggles(node, <span class="hljs-string">"sub-sec-hd-tgl"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>init scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            MP_Util.Doc.InitScrolling(Util.Style.g(<span class="hljs-string">"scrollable"</span>, node, <span class="hljs-string">"div"</span>), component.getScrollNumber(), <span class="hljs-string">"1.6"</span>)
        },
        <span class="hljs-comment">/**
        * Formats the content to the appropriate height and enables scrolling
        * @param {node} content : The content to be formatted
        * @param {int} num : The approximate number of items to display face up
        * @param {float} ht : The total line height of an item
        */</span>
        InitScrolling: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(content, num, ht)</span>
        {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; content.length; k++)
            {
                MP_Util.Doc.InitSectionScrolling(content[k], num, ht);
            }
        },
        <span class="hljs-comment">/**
        * Formats the section to the appropriate height and enables scrolling
        * @param {node} sec : The section to be formatted
        * @param {int} num : The approximate number of items to display face up
        * @param {float} ht : The total line height of an item
        */</span>
        InitSectionScrolling: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(sec, num, ht)</span>
        {</span>
            <span class="hljs-keyword">var</span> th = num * ht
            <span class="hljs-keyword">var</span> totalHeight = th + <span class="hljs-string">"em"</span>;
            sec.style.height = totalHeight;
            sec.style.overflowY = <span class="hljs-string">'scroll'</span>;
            sec.style.overflowX = <span class="hljs-string">'hidden'</span>;
        },
        InitHovers: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(trg, par)</span>
        {</span>
            gen = Util.Style.g(trg, par, <span class="hljs-string">"DL"</span>)

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = gen.length; i &lt; l; i++)
            {
                <span class="hljs-keyword">var</span> m = gen[i];
                <span class="hljs-keyword">if</span> (m)
                {
                    <span class="hljs-keyword">var</span> nm = Util.gns(Util.gns(m));
                    <span class="hljs-keyword">if</span> (nm)
                    {
                        <span class="hljs-keyword">if</span> (Util.Style.ccss(nm, <span class="hljs-string">"hvr"</span>))
                        {
                            hs(m, nm);
                        }
                    }
                }
            }
        },
        InitSubToggles: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(par, tog)</span>
        {</span>
            <span class="hljs-keyword">var</span> toggleArray = Util.Style.g(tog, par, <span class="hljs-string">"span"</span>);
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; toggleArray.length; k++)
            {
                Util.addEvent(toggleArray[k], <span class="hljs-string">"click"</span>, MP_Util.Doc.ExpandCollapse);
                <span class="hljs-keyword">var</span> checkClosed = Util.gp(Util.gp(toggleArray[k]));
                <span class="hljs-keyword">if</span> (Util.Style.ccss(checkClosed, <span class="hljs-string">"closed"</span>))
                {
                    toggleArray[k].innerHTML = <span class="hljs-string">"+"</span>;
                    toggleArray[k].title = i18n.SHOW_SECTION;
                }
            }
        },
        ExpandCollapseAll: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> allSections = Util.Style.g(<span class="hljs-string">"section"</span>);
            <span class="hljs-keyword">var</span> expNode = _g(<span class="hljs-string">"expAll"</span>)
            <span class="hljs-keyword">if</span> (isExpandedAll)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, asLen = allSections.length; i &lt; asLen; i++)
                {
                    <span class="hljs-keyword">var</span> secHandle = Util.gc(Util.gc(allSections[i]));
                    <span class="hljs-keyword">if</span> (secHandle.innerHTML == <span class="hljs-string">"-"</span> || secHandle.innerHTML == <span class="hljs-string">"+"</span>)
                    {
                        Util.Style.acss(allSections[i], <span class="hljs-string">"closed"</span>);
                        secHandle.innerHTML = <span class="hljs-string">"+"</span>;
                        secHandle.title = i18n.SHOW_SECTION;
                    }
                    <span class="hljs-keyword">else</span>
                    {
                        <span class="hljs-keyword">var</span> allSubSections = Util.Style.g(<span class="hljs-string">"sub-sec"</span>, allSections[i], <span class="hljs-string">"div"</span>);
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, aSubLen = allSubSections.length; j &lt; aSubLen; j++)
                        {
                            <span class="hljs-keyword">var</span> subSecTgl = Util.gc(Util.gc(allSubSections[j]));
                            Util.Style.acss(allSubSections[j], <span class="hljs-string">"closed"</span>);
                            subSecTgl.innerHTML = <span class="hljs-string">"+"</span>;
                            subSecTgl.title = i18n.SHOW_SECTION;
                        }
                    }
                    expNode.innerHTML = i18n.EXPAND_ALL;
                }
                isExpandedAll = <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, asLen = allSections.length; i &lt; asLen; i++)
                {
                    <span class="hljs-keyword">var</span> secHandle = Util.gc(Util.gc(allSections[i]));
                    <span class="hljs-keyword">if</span> (secHandle.innerHTML == <span class="hljs-string">"-"</span> || secHandle.innerHTML == <span class="hljs-string">"+"</span>)
                    {
                        Util.Style.rcss(allSections[i], <span class="hljs-string">"closed"</span>);
                        secHandle.innerHTML = <span class="hljs-string">"-"</span>;
                        secHandle.title = i18n.HIDE_SECTION;
                    }
                    <span class="hljs-keyword">else</span>
                    {
                        <span class="hljs-keyword">var</span> allSubSections = Util.Style.g(<span class="hljs-string">"sub-sec"</span>, allSections[i], <span class="hljs-string">"div"</span>);
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, aSubLen = allSubSections.length; j &lt; aSubLen; j++)
                        {
                            <span class="hljs-keyword">var</span> subSecTgl = Util.gc(Util.gc(allSubSections[j]));
                            Util.Style.rcss(allSubSections[j], <span class="hljs-string">"closed"</span>);
                            subSecTgl.innerHTML = <span class="hljs-string">"-"</span>;
                            subSecTgl.title = i18n.HIDE_SECTION;
                        }
                    }
                    expNode.innerHTML = i18n.COLLAPSE_ALL;
                }
                isExpandedAll = <span class="hljs-literal">true</span>;
            }

        },

        ExpandSubSectionCollapseAll: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> allSections = Util.Style.g(<span class="hljs-string">"section"</span>);
            <span class="hljs-keyword">var</span> expNode = _g(<span class="hljs-string">"expandSub"</span>)
            <span class="hljs-keyword">if</span> (expNode.innerHTML == i18n.COLLAPSE_SUB_SEC)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, asLen = allSections.length; i &lt; asLen; i++)
                {

                    <span class="hljs-keyword">var</span> allSubSections = Util.Style.g(<span class="hljs-string">"fc-sub-sec"</span>, allSections[i], <span class="hljs-string">"div"</span>);
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, aSubLen = allSubSections.length; j &lt; aSubLen; j++)
                    {


                        <span class="hljs-keyword">var</span> subSecTgl = Util.gc(Util.gc(allSubSections[j]));
                        Util.Style.acss(allSubSections[j], <span class="hljs-string">"closed"</span>);
                        subSecTgl.innerHTML = <span class="hljs-string">"+"</span>;
                        subSecTgl.title = i18n.SHOW_SECTION;
                    }

                    expNode.innerHTML = i18n.EXPAND_SUB_SEC;
                }
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, asLen = allSections.length; i &lt; asLen; i++)
                {
                    <span class="hljs-keyword">var</span> secHandle = Util.gc(Util.gc(allSections[i]));

                    <span class="hljs-keyword">var</span> allSubSections = Util.Style.g(<span class="hljs-string">"fc-sub-sec"</span>, allSections[i], <span class="hljs-string">"div"</span>);
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>, aSubLen = allSubSections.length; j &lt; aSubLen; j++)
                    {
                        <span class="hljs-keyword">var</span> subSecTgl = Util.gc(Util.gc(allSubSections[j]));
                        Util.Style.rcss(allSubSections[j], <span class="hljs-string">"closed"</span>);
                        subSecTgl.innerHTML = <span class="hljs-string">"-"</span>;
                        subSecTgl.title = i18n.HIDE_SECTION;
                    }

                    expNode.innerHTML = i18n.COLLAPSE_SUB_SEC;
                }
            }

        },
        <span class="hljs-comment">/**
        * Adds the title to the page.
        * @param {String} title The title of the page to display
        * @param {Object} bodyTag The body tag associated to the HTML document
        * @param {Boolean} debugInd Indicator denoting if the mpage should run in debug mode.
        * @param {Boolean} custInd Indicator denoting if the 'customize' option should be made available to the user for the given layout
        */</span>
        AddPageTitle: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(title, bodyTag, debugInd, custInd, anchorArray)</span>
        {</span>
            <span class="hljs-keyword">var</span> ar = [];
            <span class="hljs-keyword">if</span> (bodyTag == <span class="hljs-literal">null</span>)
                bodyTag = document.body;
            ar.push(<span class="hljs-string">"&lt;div class='pg-hd'&gt;"</span>);
            ar.push(<span class="hljs-string">"&lt;h1&gt;&lt;span class=pg-title&gt;"</span>, title, <span class="hljs-string">"&lt;/span&gt;&lt;/h1&gt;&lt;span id=pageCtrl class=page-ctrl&gt;"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>add optional anchors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (anchorArray != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = anchorArray.length; x &lt; xl; x++)
                {
                    ar.push(anchorArray[x]);
                }
            }
            ar.push(<span class="hljs-string">"&lt;a id=expAll onclick='javascript:MP_Util.Doc.ExpandCollapseAll()'&gt;"</span>,
				i18n.EXPAND_ALL, <span class="hljs-string">"&lt;/a&gt;"</span>)
            <span class="hljs-keyword">if</span> (custInd)
                ar.push(<span class="hljs-string">"&lt;a id=custView&gt;&lt;/a&gt;"</span>);
            ar.push(<span class="hljs-string">"&lt;a id=helpMenu&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;"</span>);
            bodyTag.innerHTML += ar.join(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">return</span>;
        },
        AddHelpLink: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(staticContent, helpFile)</span>
        {</span>
            <span class="hljs-keyword">if</span> (helpFile != <span class="hljs-literal">null</span> &amp;&amp; helpFile != <span class="hljs-string">""</span>)
            {
                <span class="hljs-keyword">var</span> helpNode = _g(<span class="hljs-string">"helpMenu"</span>);
                helpNode.href = staticContent + <span class="hljs-string">"\\html\\"</span> + helpFile;
                helpNode.innerHTML = i18n.HELP;
                <span class="hljs-keyword">var</span> imageNode = Util.cep(<span class="hljs-string">"IMG"</span>, { <span class="hljs-string">"src"</span>: staticContent + <span class="hljs-string">"\\images\\3865_16.gif"</span> });
                Util.ia(imageNode, helpNode);
            }
        },
        AddHelpURL: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(staticContent, url)</span>
        {</span>
            <span class="hljs-keyword">if</span> (url != <span class="hljs-literal">null</span> &amp;&amp; url != <span class="hljs-string">""</span>)
            {
                <span class="hljs-keyword">var</span> helpNode = _g(<span class="hljs-string">"helpMenu"</span>);
                helpNode.href = url;
                helpNode.innerHTML = i18n.HELP;
                <span class="hljs-keyword">var</span> imageNode = Util.cep(<span class="hljs-string">"IMG"</span>, { <span class="hljs-string">"src"</span>: staticContent + <span class="hljs-string">"\\images\\3865_16.gif"</span> });
                Util.ia(imageNode, helpNode);
            }
        },
        AddClearPreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(body)</span>
        {</span>
            <span class="hljs-keyword">var</span> pageCtrl = _g(<span class="hljs-string">"pageCtrl"</span>);
            <span class="hljs-keyword">var</span> clearPrefNode = Util.cep(<span class="hljs-string">"A"</span>, { <span class="hljs-string">"id"</span>: <span class="hljs-string">"clearPrefs"</span>, <span class="hljs-string">"onclick"</span>: <span class="hljs-string">"javascript:MP_Core.AppUserPreferenceManager.ClearPreferences();"</span> });
            clearPrefNode.innerHTML = i18n.CLEAR_PREFERENCES;
            Util.ac(clearPrefNode, pageCtrl)
        },
        AddSavePreferences: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(body)</span>
        {</span>
            <span class="hljs-keyword">var</span> pageCtrl = _g(<span class="hljs-string">"pageCtrl"</span>);
            <span class="hljs-keyword">var</span> savePrefNode = Util.cep(<span class="hljs-string">"A"</span>, { <span class="hljs-string">"id"</span>: <span class="hljs-string">"savePrefs"</span>, <span class="hljs-string">"onclick"</span>: <span class="hljs-string">"javascript:MP_Core.AppUserPreferenceManager.SavePreferences();"</span> });
            savePrefNode.innerHTML = i18n.SAVE_PREFERENCES;
            Util.ac(savePrefNode, pageCtrl)
        },
        AddCustomizeLink: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(criterion)</span>
        {</span>
            <span class="hljs-keyword">var</span> custNode = _g(<span class="hljs-string">"custView"</span>);
            <span class="hljs-keyword">if</span> (custNode != <span class="hljs-literal">null</span>)
            {
                custNode.innerHTML = i18n.CUSTOMIZE;
                <span class="hljs-keyword">var</span> compReportIds = GetPageReportIds();
                custNode.href = criterion.static_content + <span class="hljs-string">"\\js\\cust\\mp_user_cust.html?personnelId="</span> + criterion.provider_id + <span class="hljs-string">"&amp;positionCd="</span> + criterion.position_cd + <span class="hljs-string">"&amp;categoryMean="</span> + GetPreferenceIdentifier();
                custNode.href += (compReportIds.length &gt; <span class="hljs-number">0</span>) ? <span class="hljs-string">"&amp;reportIds="</span> + compReportIds.join(<span class="hljs-string">","</span>) : <span class="hljs-string">""</span>;

            }
        },
        <span class="hljs-comment">/**
        * Allows the consumer of the architecture to render the components that exist either on the tab layout
        * or the single driving MPage.  For tab based pages, the first tab is loaded by default.
        */</span>
        RenderLayout: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Return to tab being viewed upon refresh - CERTRN</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (CERN_TabManagers != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">var</span> tabManager = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">if</span> (window.name.length &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">var</span> paramList = window.name.split(<span class="hljs-string">","</span>);
                    MP_Util.DisplaySelectedTab(paramList[<span class="hljs-number">0</span>], paramList[<span class="hljs-number">1</span>]);
                }
                <span class="hljs-keyword">else</span>
                {
                    tabManager = CERN_TabManagers[<span class="hljs-number">0</span>];
                    tabManager.setSelectedTab(<span class="hljs-literal">true</span>);
                    tabManager.loadTab();
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CERN_MPageComponents != <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_MPageComponents.length; x--; )
                {
                    <span class="hljs-keyword">var</span> comp = CERN_MPageComponents[x];
                    <span class="hljs-keyword">if</span> (comp.isDisplayable())
                        comp.InsertData();
                }
            }
        },
        ExpandCollapse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> gpp = Util.gp(Util.gp(<span class="hljs-keyword">this</span>));
            <span class="hljs-keyword">if</span> (Util.Style.ccss(gpp, <span class="hljs-string">"closed"</span>))
            {
                Util.Style.rcss(gpp, <span class="hljs-string">"closed"</span>);
                <span class="hljs-keyword">this</span>.innerHTML = <span class="hljs-string">"-"</span>;
                <span class="hljs-keyword">this</span>.title = i18n.HIDE_SECTION;
            }
            <span class="hljs-keyword">else</span>
            {
                Util.Style.acss(gpp, <span class="hljs-string">"closed"</span>);
                <span class="hljs-keyword">this</span>.innerHTML = <span class="hljs-string">"+"</span>;
                <span class="hljs-keyword">this</span>.title = i18n.SHOW_SECTION;
            }
        },
        DitherComponents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> components = m_Mpage.getComponents();
            <span class="hljs-keyword">var</span> comLen = components.length;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>, yl = comLen; y &lt; yl; y++)
            {
                <span class="hljs-keyword">if</span> (!(components[y] <span class="hljs-keyword">instanceof</span> VisitTypesComponent))
                {
                    <span class="hljs-keyword">var</span> compId = components[y].getStyles().getId();
                    <span class="hljs-keyword">if</span> (_g(compId))
                    {
                        _g(compId).style.display = <span class="hljs-string">"none"</span>;
                        $(<span class="hljs-string">'#wz-hdr'</span>).hide();
                        m_dispEMCompInd = <span class="hljs-literal">false</span>;
                    }
                }
            }
        },
        EnableComponents: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
        {</span>
            <span class="hljs-keyword">var</span> components = m_Mpage.getComponents();
            <span class="hljs-keyword">var</span> comLen = components.length;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>, yl = comLen; y &lt; yl; y++)
            {
                <span class="hljs-keyword">if</span> (!(components[y] <span class="hljs-keyword">instanceof</span> VisitTypesComponent))
                {
                    <span class="hljs-keyword">var</span> compId = components[y].getStyles().getId();
                    <span class="hljs-keyword">if</span> (_g(compId))
                    {
                        _g(compId).style.display = <span class="hljs-string">"block"</span>;
                        $(<span class="hljs-string">'#wz-hdr'</span>).show();
                        m_dispEMCompInd = <span class="hljs-literal">true</span>;
                    }
                }
            }
        }
    };
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetPreferenceIdentifier</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">var</span> prefIdentifier = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (CERN_TabManagers != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_TabManagers.length; x--; )
            {
                <span class="hljs-keyword">var</span> tabManager = CERN_TabManagers[x];
                <span class="hljs-keyword">if</span> (tabManager.getSelectedTab())
                {
                    <span class="hljs-keyword">var</span> tabItem = tabManager.getTabItem();
                    <span class="hljs-keyword">return</span> tabItem.prefIdentifier;
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CERN_MPageComponents != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_MPageComponents.length; x--; )
            {
                <span class="hljs-keyword">var</span> criterion = CERN_MPageComponents[x].getCriterion();
                <span class="hljs-keyword">return</span> criterion.category_mean;
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CERN_WizardComponents != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_WizardComponents.length; x--; )
            {
                <span class="hljs-keyword">var</span> criterion = CERN_WizardComponents[x].getCriterion();
                <span class="hljs-keyword">return</span> criterion.category_mean;
            }
        }
        <span class="hljs-keyword">return</span> prefIdentifier;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetPageReportIds</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">if</span> (CERN_TabManagers != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_TabManagers.length; x--; )
            {
                <span class="hljs-keyword">var</span> tabManager = CERN_TabManagers[x];
                <span class="hljs-keyword">if</span> (tabManager.getSelectedTab())
                {
                    <span class="hljs-keyword">var</span> tabItem = tabManager.getTabItem();
                    <span class="hljs-keyword">var</span> components = tabItem.components;
                    <span class="hljs-keyword">if</span> (components != <span class="hljs-literal">null</span> &amp;&amp; components.length &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = components.length; y--; )
                        {
                            ar.push(components[y].getReportId())
                        }
                    }
                    <span class="hljs-keyword">break</span>;
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CERN_MPageComponents != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = CERN_MPageComponents.length; x--; )
            {
                ar.push(CERN_MPageComponents[x].getReportId());
            }
        }
        <span class="hljs-keyword">return</span> ar;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetComponentArray</span><span class="hljs-params">(components)</span>
    {</span>
        <span class="hljs-keyword">var</span> grpAr = [];
        <span class="hljs-keyword">var</span> colAr = [];
        <span class="hljs-keyword">var</span> rowAr = [];
        <span class="hljs-keyword">var</span> curCol = -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">var</span> curGrp = -<span class="hljs-number">1</span>;

        <span class="hljs-keyword">var</span> sHTML = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>first layout the group/columns/rows of components</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (components != <span class="hljs-literal">null</span>)
        {
            components.sort(SortMPageComponents);

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = components.length; x &lt; xl; x++)
            {
                <span class="hljs-keyword">var</span> component = components[x];
                <span class="hljs-keyword">if</span> (CERN_MPageComponents == <span class="hljs-literal">null</span>)
                    CERN_MPageComponents = [];
                CERN_MPageComponents.push(component);

                <span class="hljs-keyword">if</span> (component.isDisplayable())
                { <span class="hljs-comment">//based on filter logic, only display if criteria is met</span>
                    <span class="hljs-keyword">var</span> compGrp = component.getPageGroupSequence();
                    <span class="hljs-keyword">var</span> compCol = component.getColumn();

                    <span class="hljs-keyword">if</span> (compGrp != curGrp)
                    {
                        curCol = -<span class="hljs-number">1</span>;
                        colAr = [];
                        grpAr.push(colAr);
                        curGrp = compGrp;
                    }

                    <span class="hljs-keyword">if</span> (compCol != curCol)
                    {
                        rowAr = [];
                        colAr.push(rowAr);
                        curCol = compCol;
                    }
                    rowAr.push(component);
                }
            }
        }
        <span class="hljs-keyword">return</span> grpAr;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateCustomizeLiquidLayout</span><span class="hljs-params">(components, parentNode)</span>
    {</span>
        <span class="hljs-keyword">var</span> sHTML = [];
        <span class="hljs-keyword">var</span> grpAr = GetComponentArray(components);
        sHTML.push(<span class="hljs-string">"&lt;div class=pref-columns&gt;"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = grpAr.length; x &lt; xl; x++)
        {
            colAr = grpAr[x];
            sHTML.push(<span class="hljs-string">"&lt;div&gt;"</span>);
            <span class="hljs-keyword">var</span> colLen = colAr.length;
            sHTML.push(<span class="hljs-string">"&lt;div class='col-group three-col'&gt;"</span>); <span class="hljs-comment">//always allow for a 3 column custimization</span>
            sHTML.push(<span class="hljs-string">"&lt;div class='col-outer2'&gt;&lt;div class='col-outer1'&gt;"</span>);

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; colLen; y++)
            {
                <span class="hljs-keyword">var</span> comps = colAr[y];
                <span class="hljs-keyword">var</span> colClassName = <span class="hljs-string">"col"</span> + (y + <span class="hljs-number">1</span>) + <span class="hljs-string">" cust-col"</span>;
                sHTML.push(<span class="hljs-string">"&lt;div class='"</span>, colClassName, <span class="hljs-string">"'&gt;"</span>)
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> z = <span class="hljs-number">0</span>, zl = comps.length; z &lt; zl; z++)
                {
                    sHTML.push(CreateCompDiv(comps[z]));
                }
                sHTML.push(<span class="hljs-string">"&lt;/div&gt;"</span>);
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = colLen + <span class="hljs-number">1</span>; y &lt;= <span class="hljs-number">3</span>; y++)
            {
                <span class="hljs-keyword">var</span> colClassName = <span class="hljs-string">"col"</span> + (y) + <span class="hljs-string">" cust-col"</span>;
                sHTML.push(<span class="hljs-string">"&lt;div class='"</span>, colClassName, <span class="hljs-string">"'&gt;&lt;/div&gt;"</span>)
            }
            sHTML.push(<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span>);
        }
        sHTML.push(<span class="hljs-string">"&lt;/div&gt;"</span>);
        parentNode.innerHTML += sHTML.join(<span class="hljs-string">""</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateLiquidLayout</span><span class="hljs-params">(components, parentNode)</span>
    {</span>
        <span class="hljs-keyword">var</span> grpAr = GetComponentArray(components);
        <span class="hljs-keyword">var</span> sHTML = [];

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = grpAr.length; x &lt; xl; x++)
        {
            colAr = grpAr[x];
            sHTML.push(<span class="hljs-string">"&lt;div&gt;"</span>);
            <span class="hljs-keyword">var</span> colLen = colAr.length;
            <span class="hljs-keyword">if</span> (colLen == <span class="hljs-number">1</span>)
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group one-col'&gt;"</span>);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colLen == <span class="hljs-number">2</span>)
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group two-col'&gt;"</span>);
            <span class="hljs-keyword">else</span>
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group three-col'&gt;"</span>);

            sHTML.push(<span class="hljs-string">"&lt;div class='col-outer2'&gt;&lt;div class='col-outer1'&gt;"</span>);

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; colLen; y++)
            {
                <span class="hljs-keyword">var</span> colClassName = <span class="hljs-string">"col"</span> + (y + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">var</span> comps = colAr[y];
                sHTML.push(<span class="hljs-string">"&lt;div class='"</span>, colClassName, <span class="hljs-string">"'&gt;"</span>)
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> z = <span class="hljs-number">0</span>, zl = comps.length; z &lt; zl; z++)
                {
                    sHTML.push(CreateCompDiv(comps[z]));
                }
                sHTML.push(<span class="hljs-string">"&lt;/div&gt;"</span>);
            }
            sHTML.push(<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span>);
        }
        parentNode.innerHTML += sHTML.join(<span class="hljs-string">""</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateLiquidLayoutComponent</span><span class="hljs-params">(components, parentNode)</span>
    {</span>
        <span class="hljs-keyword">var</span> grpAr = GetComponentArray(components);
        <span class="hljs-keyword">var</span> sHTML = [];

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = grpAr.length; x &lt; xl; x++)
        {
            colAr = grpAr[x];
            sHTML.push(<span class="hljs-string">"&lt;div&gt;"</span>);
            <span class="hljs-keyword">var</span> colLen = colAr.length;
            <span class="hljs-keyword">if</span> (colLen == <span class="hljs-number">1</span>)
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group one-col'&gt;"</span>);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colLen == <span class="hljs-number">2</span>)
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group two-col'&gt;"</span>);
            <span class="hljs-keyword">else</span>
                sHTML.push(<span class="hljs-string">"&lt;div class='col-group three-col'&gt;"</span>);

            sHTML.push(<span class="hljs-string">"&lt;div class='col-outer2'&gt;&lt;div class='col-outer1'&gt;"</span>);

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; colLen; y++)
            {
                <span class="hljs-keyword">var</span> colClassName = <span class="hljs-string">"col"</span> + (y + <span class="hljs-number">1</span>);
                <span class="hljs-keyword">var</span> comps = colAr[y];
                sHTML.push(<span class="hljs-string">"&lt;div class='"</span>, colClassName, <span class="hljs-string">"'&gt;"</span>)
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> z = <span class="hljs-number">0</span>, zl = comps.length; z &lt; zl; z++)
                {
                    sHTML.push(CreateCompDiv(comps[z]));
                }
                sHTML.push(<span class="hljs-string">"&lt;/div&gt;"</span>);
            }
            sHTML.push(<span class="hljs-string">"&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span>);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>parentNode.innerHTML += sHTML.join();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> (sHTML.join(<span class="hljs-string">""</span>));
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SetupExpandCollapse</span><span class="hljs-params">()</span>
    {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>set up expand collapse for all components</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> toggleArray = Util.Style.g(<span class="hljs-string">"sec-hd-tgl"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; toggleArray.length; k++)
        {
            Util.addEvent(toggleArray[k], <span class="hljs-string">"click"</span>, MP_Util.Doc.ExpandCollapse);
            <span class="hljs-keyword">var</span> checkClosed = Util.gp(Util.gp(toggleArray[k]));
            <span class="hljs-keyword">if</span> (Util.Style.ccss(checkClosed, <span class="hljs-string">"closed"</span>))
            {
                toggleArray[k].innerHTML = <span class="hljs-string">"+"</span>;
                toggleArray[k].title = i18n.SHOW_SECTION;
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateCompDiv</span><span class="hljs-params">(component)</span>
    {</span>
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">var</span> style = component.getStyles();
        <span class="hljs-keyword">var</span> ns = style.getNameSpace();
        <span class="hljs-keyword">var</span> compId = style.getId();
        <span class="hljs-keyword">var</span> secClass = style.getClassName();
        <span class="hljs-keyword">var</span> tabLink = component.getLink();
        <span class="hljs-keyword">var</span> loc = component.getCriterion().static_content;
        <span class="hljs-keyword">var</span> tglCode = (!component.isAlwaysExpanded()) ? [<span class="hljs-string">"&lt;span class='"</span>, style.getHeaderToggle(), <span class="hljs-string">"' title='"</span>, i18n.HIDE_SECTION, <span class="hljs-string">"'&gt;-&lt;/span&gt;"</span>].join(<span class="hljs-string">""</span>) : <span class="hljs-string">""</span>;

        <span class="hljs-keyword">if</span> (!component.isExpanded() &amp;&amp; !component.isAlwaysExpanded())
            secClass += <span class="hljs-string">" closed"</span>;

        <span class="hljs-keyword">if</span> (component.isDisplayable())
        {
            <span class="hljs-keyword">if</span> (m_dispEMCompInd || component.getDisplay())
            {
                secClass += <span class="hljs-string">" comp-display"</span>;
            }
            <span class="hljs-keyword">else</span>
            {
                secClass += <span class="hljs-string">" comp-hide"</span>;
            }
        }

        <span class="hljs-keyword">var</span> sAnchor = (tabLink != <span class="hljs-string">""</span> &amp;&amp; component.getCustomizeView() == <span class="hljs-literal">false</span>) ? CreateComponentAnchor(component) : component.getLabel();
        ar.push(<span class="hljs-string">"&lt;div id='"</span>, style.getId(), <span class="hljs-string">"' class='"</span>, secClass, <span class="hljs-string">"'&gt;"</span>, <span class="hljs-string">"&lt;h2 class='"</span>, style.getHeaderClass(), <span class="hljs-string">"'&gt;"</span>,
			tglCode, <span class="hljs-string">"&lt;span class='"</span>, style.getTitle(), <span class="hljs-string">"'&gt;&lt;span&gt;"</span>,
			sAnchor, <span class="hljs-string">"&lt;/span&gt;"</span>);
        <span class="hljs-keyword">if</span> (component.getCustomizeView() == <span class="hljs-literal">false</span>)
        {
            ar.push(<span class="hljs-string">"&lt;span class='"</span>, style.getTotal(), <span class="hljs-string">"'&gt;"</span>, i18n.LOADING_DATA + <span class="hljs-string">"..."</span>, <span class="hljs-string">"&lt;/span&gt;"</span>);
            <span class="hljs-keyword">if</span> (component.isPlusAddEnabled())
            {
                ar.push(<span class="hljs-string">"&lt;a id='"</span>, ns, <span class="hljs-string">"Add' class=addPlus href=javascript:MP_Util.OpenTab('"</span>, compId, <span class="hljs-string">"');&gt;&lt;img src='"</span>, loc, <span class="hljs-string">"\\images\\3941.gif'&gt;"</span>, i18n.ADD, <span class="hljs-string">"&lt;/a&gt;"</span>)
                <span class="hljs-keyword">var</span> menuItems = component.getMenuItems();
                <span class="hljs-keyword">if</span> (menuItems != <span class="hljs-literal">null</span> || menuItems &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-keyword">var</span> menuId = compId + <span class="hljs-string">"Menu"</span>;
                    ar.push(<span class="hljs-string">"&lt;a id='"</span>, ns, <span class="hljs-string">"Drop' class='drop-Down'&gt;&lt;img src='"</span>, loc, <span class="hljs-string">"\\images\\3943_16.gif' onclick='javascript:MP_Util.LaunchMenu(\""</span>, menuId, <span class="hljs-string">"\", \""</span>, compId, <span class="hljs-string">"\");'&gt;&lt;/a&gt;"</span>)
                    ar.push(<span class="hljs-string">"&lt;div class='form-menu menu-hide' id='"</span>, menuId, <span class="hljs-string">"'&gt;&lt;span&gt;"</span>)
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = menuItems.length; x &lt; xl; x++)
                    {
                        <span class="hljs-keyword">var</span> item = menuItems[x];
                        ar.push(<span class="hljs-string">"&lt;div&gt;"</span>)
                        ar.push(<span class="hljs-string">"&lt;a id='lnkID"</span>, x, <span class="hljs-string">"' href='#' onclick='javascript:MP_Util.LaunchMenuSelection(\""</span>, compId, <span class="hljs-string">'\",'</span>, item.getId(), <span class="hljs-string">");'&gt;"</span>, item.getDescription(), <span class="hljs-string">"&lt;/a&gt;"</span>)
                        ar.push(<span class="hljs-string">"&lt;/div&gt;"</span>)
                    }

                    ar.push(<span class="hljs-string">"&lt;/span&gt;&lt;/div&gt;"</span>)
                }


            }
        }
        ar.push(<span class="hljs-string">"&lt;/span&gt;&lt;/h2&gt;"</span>)
        <span class="hljs-keyword">if</span> (component.getCustomizeView() == <span class="hljs-literal">false</span>)
        {
            <span class="hljs-keyword">if</span> (component.getScope() &gt; <span class="hljs-number">0</span>)
                ar.push(<span class="hljs-string">"&lt;div class=sub-title-disp&gt;"</span>, CreateSubTitleText(component), <span class="hljs-string">"&lt;/div&gt;"</span>);
        }
        ar.push(<span class="hljs-string">"&lt;div id='"</span>, style.getContentId(), <span class="hljs-string">"' class='"</span>, style.getContentClass(), <span class="hljs-string">"'&gt;&lt;/div&gt;&lt;/div&gt;"</span>)
        <span class="hljs-keyword">var</span> arHtml = ar.join(<span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> arHtml;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateSubTitleText</span><span class="hljs-params">(component)</span>
    {</span>
        <span class="hljs-keyword">var</span> subTitleText = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">var</span> scope = component.getScope();
        <span class="hljs-keyword">var</span> lookbackDays = component.getLookbackDays();
        <span class="hljs-keyword">var</span> lookbackUnits = (lookbackDays &gt; <span class="hljs-number">0</span>) ? lookbackDays : component.getLookbackUnits();
        <span class="hljs-keyword">var</span> lookbackFlag = (lookbackDays &gt; <span class="hljs-number">0</span>) ? <span class="hljs-number">2</span> : component.getLookbackUnitTypeFlag();

        <span class="hljs-keyword">if</span> (scope &gt; <span class="hljs-number">0</span>)
        {
            <span class="hljs-keyword">if</span> (lookbackFlag &gt; <span class="hljs-number">0</span> &amp;&amp; lookbackUnits &gt; <span class="hljs-number">0</span>)
            {
                <span class="hljs-keyword">var</span> replaceText = <span class="hljs-string">""</span>;
                <span class="hljs-keyword">switch</span> (lookbackFlag)
                {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: replaceText = i18n.LAST_N_HOURS.replace(<span class="hljs-string">"{0}"</span>, lookbackUnits); <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: replaceText = i18n.LAST_N_DAYS.replace(<span class="hljs-string">"{0}"</span>, lookbackUnits); <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: replaceText = i18n.LAST_N_WEEKS.replace(<span class="hljs-string">"{0}"</span>, lookbackUnits); <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: replaceText = i18n.LAST_N_MONTHS.replace(<span class="hljs-string">"{0}"</span>, lookbackUnits); <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>: replaceText = i18n.LAST_N_YEARS.replace(<span class="hljs-string">"{0}"</span>, lookbackUnits); <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-keyword">switch</span> (scope)
                {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: subTitleText = i18n.ALL_N_VISITS.replace(<span class="hljs-string">"{0}"</span>, replaceText); <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: subTitleText = i18n.SELECTED_N_VISIT.replace(<span class="hljs-string">"{0}"</span>, replaceText); <span class="hljs-keyword">break</span>;
                }

            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">switch</span> (scope)
                {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: subTitleText = i18n.All_VISITS; <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: subTitleText = i18n.SELECTED_VISIT; <span class="hljs-keyword">break</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> subTitleText;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateComponentAnchor</span><span class="hljs-params">(component)</span>
    {</span>
        <span class="hljs-keyword">var</span> style = component.getStyles();
        <span class="hljs-keyword">var</span> criterion = component.getCriterion();
        <span class="hljs-keyword">var</span> sParms = <span class="hljs-string">'javascript:APPLINK(0,"'</span> + criterion.executable + <span class="hljs-string">'","/PERSONID='</span> + criterion.person_id + <span class="hljs-string">' /ENCNTRID='</span> + criterion.encntr_id + <span class="hljs-string">' /FIRSTTAB=^'</span> + component.getLink() + <span class="hljs-string">'^")'</span>;
        <span class="hljs-keyword">var</span> sAnchor = <span class="hljs-string">"&lt;a id="</span> + style.getLink() + <span class="hljs-string">" title='"</span> + i18n.GO_TO_TAB.replace(<span class="hljs-string">"{0}"</span>, component.getLink()) + <span class="hljs-string">"' href='"</span> + sParms + <span class="hljs-string">"'&gt;"</span> + component.getLabel() + <span class="hljs-string">"&lt;/a&gt;"</span>;
        <span class="hljs-keyword">return</span> sAnchor;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AddPageTabs</span><span class="hljs-params">(items, bodyTag)</span>
    {</span>
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">var</span> divAr = [];
        <span class="hljs-keyword">if</span> (bodyTag == <span class="hljs-literal">null</span>)
            bodyTag = document.body;</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>first create unordered list for page level tabs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        ar.push(<span class="hljs-string">"&lt;ul class=tabmenu&gt;"</span>)
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = items.length; x &lt; xl; x++)
        {
            <span class="hljs-keyword">var</span> item = items[x];
            <span class="hljs-keyword">var</span> activeInd = (x == <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
            ar.push(CreateTabLi(item, activeInd, x))
            divAr.push(<span class="hljs-string">"&lt;div id='"</span>, item.key, <span class="hljs-string">"' class='div-tab-item'&gt;&lt;/div&gt;"</span>);
        }
        ar.push(<span class="hljs-string">"&lt;/ul&gt;"</span>)
        bodyTag.innerHTML += (ar.join(<span class="hljs-string">""</span>) + divAr.join(<span class="hljs-string">""</span>));
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CreateTabLi</span><span class="hljs-params">(item, activeInd, sequence)</span>
    {</span>
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">var</span> tabName = <span class="hljs-string">""</span>;
        tabName = item.name;
        ar.push(<span class="hljs-string">"&lt;li&gt;"</span>)
        <span class="hljs-keyword">var</span> seqClass = <span class="hljs-string">"a-tab"</span> + sequence;
        <span class="hljs-keyword">if</span> (activeInd)
            ar.push(<span class="hljs-string">"&lt;a id='"</span>, seqClass, <span class="hljs-string">"' class='anchor-tab-item active' href='javascript:MP_Util.DisplaySelectedTab(\""</span>, item.key, <span class="hljs-string">"\",\""</span>, seqClass, <span class="hljs-string">"\");'&gt;"</span>, tabName, <span class="hljs-string">"&lt;/a&gt;"</span>);
        <span class="hljs-keyword">else</span>
            ar.push(<span class="hljs-string">"&lt;a id='"</span>, seqClass, <span class="hljs-string">"' class='anchor-tab-item inactive' href='javascript:MP_Util.DisplaySelectedTab(\""</span>, item.key, <span class="hljs-string">"\",\""</span>, seqClass, <span class="hljs-string">"\");'&gt;"</span>, tabName, <span class="hljs-string">"&lt;/a&gt;"</span>);
        ar.push(<span class="hljs-string">"&lt;/li&gt;"</span>)
        <span class="hljs-keyword">return</span> (ar.join(<span class="hljs-string">""</span>));
    }
} ();


MP_Util.Measurement = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">return</span> {
        GetString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(result, codeArray, dateMask)</span>
        {</span>
            <span class="hljs-keyword">var</span> obj = MP_Util.Measurement.GetObject(result, codeArray);
            <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> MP_Core.QuantityValue)
                <span class="hljs-keyword">return</span> obj.toString();
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>)
                <span class="hljs-keyword">return</span> obj.format(dateMask);
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">return</span> obj;
        },
        GetObject: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(result, codeArray)</span>
        {</span>
            <span class="hljs-keyword">switch</span> (result.CLASSIFICATION.toUpperCase())
            {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"QUANTITY_VALUE"</span>:
                    <span class="hljs-keyword">return</span> GetQuantityValue(result, codeArray);
                <span class="hljs-keyword">case</span> <span class="hljs-string">"STRING_VALUE"</span>:
                    <span class="hljs-keyword">return</span> (GetStringValue(result));
                <span class="hljs-keyword">case</span> <span class="hljs-string">"DATE_VALUE"</span>: <span class="hljs-comment">//we are curently not returning any date_value results. a common method shall be implemented if/when necessary</span>
                    <span class="hljs-keyword">return</span> (GetDateValue(result));
                <span class="hljs-keyword">case</span> <span class="hljs-string">"CODE_VALUE"</span>:
                    <span class="hljs-keyword">return</span> (GetCodedResult(result));
                <span class="hljs-keyword">case</span> <span class="hljs-string">"ENCAPSULATED_VALUE"</span>:
                    <span class="hljs-keyword">return</span> (GetEncapsulatedValue(result));
            }
        },
        SetPrecision: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(num, dec)</span>
        {</span>
            <span class="hljs-keyword">return</span> num.toFixed(dec);
        }
    };
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetEncapsulatedValue</span><span class="hljs-params">(result)</span>
    {</span>
        <span class="hljs-keyword">var</span> encap = result.ENCAPSULATED_VALUE;
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>, nl = encap.length; n &lt; nl; n++)
        {
            <span class="hljs-keyword">var</span> txt = encap[n].TEXT_PLAIN;
            <span class="hljs-keyword">if</span> (txt != <span class="hljs-literal">null</span> &amp;&amp; txt.length &gt; <span class="hljs-number">0</span>)
                ar.push(txt);
        }
        <span class="hljs-keyword">return</span> ar.join(<span class="hljs-string">""</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetQuantityValue</span><span class="hljs-params">(result, codeArray)</span>
    {</span>
        <span class="hljs-keyword">var</span> qv = <span class="hljs-keyword">new</span> MP_Core.QuantityValue();
        qv.init(result, codeArray);
        <span class="hljs-keyword">return</span> qv;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetDateValue</span><span class="hljs-params">(result)</span>
    {</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>, xl = result.DATE_VALUE.length; x &lt; xl; x++)
        {
            <span class="hljs-keyword">var</span> date = result.DATE_VALUE[x];
            <span class="hljs-keyword">if</span> (date.DATE != <span class="hljs-string">""</span>)
            {
                <span class="hljs-keyword">var</span> dateTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
                dateTime.setISO8601(date.DATE);
                <span class="hljs-keyword">return</span> dateTime;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetCodedResult</span><span class="hljs-params">(result)</span>
    {</span>
        <span class="hljs-keyword">var</span> cdValue = result.CODE_VALUE;
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>, nl = cdValue.length; n &lt; nl; n++)
        {
            <span class="hljs-keyword">var</span> values = cdValue[n].VALUES;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> p = <span class="hljs-number">0</span>, pl = values.length; p &lt; pl; p++)
            {
                ar.push(values[p].SOURCE_STRING)
            }
            <span class="hljs-keyword">var</span> sOther = cdValue[n].OTHER_RESPONSE;
            <span class="hljs-keyword">if</span> (sOther != <span class="hljs-string">""</span>)
                ar.push(sOther)
        }
        <span class="hljs-keyword">return</span> ar.join(<span class="hljs-string">", "</span>);
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetStringValue</span><span class="hljs-params">(result)</span>
    {</span>
        <span class="hljs-keyword">var</span> strValue = result.STRING_VALUE;
        <span class="hljs-keyword">var</span> ar = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>, nl = strValue.length; n &lt; nl; n++)
        {
            ar.push(strValue[n].VALUE);
        }
        <span class="hljs-keyword">return</span> ar.join(<span class="hljs-string">", "</span>);
    }
} ();
<span class="hljs-comment">/**
* Returns an array of elements with the designated classname.
* @param {Object} cl The CSS classname.
* @param {Object} e The parent element to search within, defaults to document.
* @return {Array} Returns an array of elements with the designated classname.
* @deprecated
*/</span>
document.getElementsByClassName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(cl, e)</span>
{</span>
    <span class="hljs-keyword">var</span> retnode = [];
    <span class="hljs-keyword">var</span> clssnm = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'\\b'</span> + cl + <span class="hljs-string">'\\b'</span>);
    <span class="hljs-keyword">var</span> elem = <span class="hljs-keyword">this</span>.getElementsByTagName(<span class="hljs-string">'*'</span>, e);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> u = <span class="hljs-number">0</span>; u &lt; elem.length; u++)
    {
        <span class="hljs-keyword">var</span> classes = elem[u].className;
        <span class="hljs-keyword">if</span> (clssnm.test(classes)) retnode.push(elem[u]);
    }
    <span class="hljs-keyword">return</span> retnode;
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
