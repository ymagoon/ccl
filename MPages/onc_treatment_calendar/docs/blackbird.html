<!DOCTYPE html>

<html>
<head>
  <title>blackbird.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="Gruntfile.html">
                Gruntfile.js
              </a>
            
              
              <a class="source" href="server.html">
                server.js
              </a>
            
              
              <a class="source" href="accordionctrl.html">
                accordionctrl.js
              </a>
            
              
              <a class="source" href="appctrl.html">
                appctrl.js
              </a>
            
              
              <a class="source" href="calendarctrl.html">
                calendarctrl.js
              </a>
            
              
              <a class="source" href="calendarnotesctrl.html">
                calendarnotesctrl.js
              </a>
            
              
              <a class="source" href="listctrl.html">
                listctrl.js
              </a>
            
              
              <a class="source" href="accordionapptdir.html">
                accordionapptdir.js
              </a>
            
              
              <a class="source" href="accordiondir.html">
                accordiondir.js
              </a>
            
              
              <a class="source" href="accordionmeddir.html">
                accordionmeddir.js
              </a>
            
              
              <a class="source" href="accordionorderdir.html">
                accordionorderdir.js
              </a>
            
              
              <a class="source" href="accordionphasedir.html">
                accordionphasedir.js
              </a>
            
              
              <a class="source" href="accordionplandir.html">
                accordionplandir.js
              </a>
            
              
              <a class="source" href="accordionregimendir.html">
                accordionregimendir.js
              </a>
            
              
              <a class="source" href="adddialogdir.html">
                adddialogdir.js
              </a>
            
              
              <a class="source" href="calendarcontrolsdir.html">
                calendarcontrolsdir.js
              </a>
            
              
              <a class="source" href="calendardatedir.html">
                calendardatedir.js
              </a>
            
              
              <a class="source" href="calendardaydir.html">
                calendardaydir.js
              </a>
            
              
              <a class="source" href="calendardir.html">
                calendardir.js
              </a>
            
              
              <a class="source" href="calendarlistdir.html">
                calendarlistdir.js
              </a>
            
              
              <a class="source" href="hoverhighlightdir.html">
                hoverhighlightdir.js
              </a>
            
              
              <a class="source" href="jquerydatepicker.html">
                jquerydatepicker.js
              </a>
            
              
              <a class="source" href="listdatedir.html">
                listdatedir.js
              </a>
            
              
              <a class="source" href="modalcalendardir.html">
                modalcalendardir.js
              </a>
            
              
              <a class="source" href="noteinputdir.html">
                noteinputdir.js
              </a>
            
              
              <a class="source" href="printcalendardatedir.html">
                printcalendardatedir.js
              </a>
            
              
              <a class="source" href="printcalendardaydir.html">
                printcalendardaydir.js
              </a>
            
              
              <a class="source" href="printcalendarviewdir.html">
                printcalendarviewdir.js
              </a>
            
              
              <a class="source" href="printdialogdir.html">
                printdialogdir.js
              </a>
            
              
              <a class="source" href="printlistviewdir.html">
                printlistviewdir.js
              </a>
            
              
              <a class="source" href="printtemplate.html">
                printtemplate.js
              </a>
            
              
              <a class="source" href="qtipdir.html">
                qtipdir.js
              </a>
            
              
              <a class="source" href="schedulableicondir.html">
                schedulableicondir.js
              </a>
            
              
              <a class="source" href="statusdialogdir.html">
                statusdialogdir.js
              </a>
            
              
              <a class="source" href="windowresizedir.html">
                windowresizedir.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="blackbird.html">
                blackbird.js
              </a>
            
              
              <a class="source" href="dc_mp_js_util_mpage.html">
                dc_mp_js_util_mpage.js
              </a>
            
              
              <a class="source" href="oncmp_core.html">
                oncmp_core.js
              </a>
            
              
              <a class="source" href="printerConfig_template.html">
                printerConfig_template.js
              </a>
            
              
              <a class="source" href="xml2json.html">
                xml2json.js
              </a>
            
              
              <a class="source" href="animationsmod.html">
                animationsmod.js
              </a>
            
              
              <a class="source" href="appmod.html">
                appmod.js
              </a>
            
              
              <a class="source" href="controllersmod.html">
                controllersmod.js
              </a>
            
              
              <a class="source" href="directivesmod.html">
                directivesmod.js
              </a>
            
              
              <a class="source" href="daodevsvc.html">
                daodevsvc.js
              </a>
            
              
              <a class="source" href="daoprodsvc.html">
                daoprodsvc.js
              </a>
            
              
              <a class="source" href="notesmedssvc.html">
                notesmedssvc.js
              </a>
            
              
              <a class="source" href="notesmedssvcdev.html">
                notesmedssvcdev.js
              </a>
            
              
              <a class="source" href="pubsubsvc.html">
                pubsubsvc.js
              </a>
            
              
              <a class="source" href="services.html">
                services.js
              </a>
            
              
              <a class="source" href="signdevsvc.html">
                signdevsvc.js
              </a>
            
              
              <a class="source" href="signprodsvc.html">
                signprodsvc.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>blackbird.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
	Blackbird - Open Source JavaScript Logging Utility
	Author: G Scott Olson
	Web: http://blackbirdjs.googlecode.com/
	     http://www.gscottolson.com/blackbirdjs/
	Version: 1.0

	The MIT License - Copyright (c) 2008 Blackbird Project
*/</span>
( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
	<span class="hljs-keyword">var</span> NAMESPACE = <span class="hljs-string">'log'</span>;
	<span class="hljs-keyword">var</span> IE6_POSITION_FIXED = <span class="hljs-literal">true</span>; <span class="hljs-comment">// enable IE6 {position:fixed}</span>

	<span class="hljs-keyword">var</span> bbird;
	<span class="hljs-keyword">var</span> outputList;
	<span class="hljs-keyword">var</span> cache = [];

	<span class="hljs-keyword">var</span> state = getState();
	<span class="hljs-keyword">var</span> classes = {};
	<span class="hljs-keyword">var</span> profiler = {};
	<span class="hljs-keyword">var</span> IDs = {
		blackbird: <span class="hljs-string">'blackbird'</span>,
		checkbox: <span class="hljs-string">'bbVis'</span>,
		filters: <span class="hljs-string">'bbFilters'</span>,
		controls: <span class="hljs-string">'bbControls'</span>,
		size: <span class="hljs-string">'bbSize'</span>
	}
	<span class="hljs-keyword">var</span> messageTypes = { <span class="hljs-comment">//order of these properties imply render order of filter controls</span>
		debug: <span class="hljs-literal">true</span>,
		info: <span class="hljs-literal">true</span>,
		warn: <span class="hljs-literal">true</span>,
		error: <span class="hljs-literal">true</span>,
		profile: <span class="hljs-literal">true</span>
	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateMarkup</span><span class="hljs-params">()</span> {</span> <span class="hljs-comment">//build markup</span>
		<span class="hljs-keyword">var</span> spans = [];
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> type <span class="hljs-keyword">in</span> messageTypes ) {
			spans.push( [ <span class="hljs-string">'&lt;span class="'</span>, type, <span class="hljs-string">'" type="'</span>, type, <span class="hljs-string">'"&gt;&lt;/span&gt;'</span>].join( <span class="hljs-string">''</span> ) );
		}

		<span class="hljs-keyword">var</span> newNode = document.createElement( <span class="hljs-string">'DIV'</span> );
		newNode.id = IDs.blackbird;
		newNode.style.display = <span class="hljs-string">'none'</span>;
		newNode.innerHTML = [
			<span class="hljs-string">'&lt;div class="header"&gt;'</span>,
				<span class="hljs-string">'&lt;div class="left"&gt;'</span>,
					<span class="hljs-string">'&lt;div id="'</span>, IDs.filters, <span class="hljs-string">'" class="filters" title="click to filter by message type"&gt;'</span>, spans.join( <span class="hljs-string">''</span> ), <span class="hljs-string">'&lt;/div&gt;'</span>,
				<span class="hljs-string">'&lt;/div&gt;'</span>,
				<span class="hljs-string">'&lt;div class="right"&gt;'</span>,
					<span class="hljs-string">'&lt;div id="'</span>, IDs.controls, <span class="hljs-string">'" class="controls"&gt;'</span>,
						<span class="hljs-string">'&lt;span id="'</span>, IDs.size ,<span class="hljs-string">'" title="contract" op="resize"&gt;&lt;/span&gt;'</span>,
						<span class="hljs-string">'&lt;span class="clear" title="clear" op="clear"&gt;&lt;/span&gt;'</span>,
						<span class="hljs-string">'&lt;span class="close" title="close" op="close"&gt;&lt;/span&gt;'</span>,
					<span class="hljs-string">'&lt;/div&gt;'</span>,
				<span class="hljs-string">'&lt;/div&gt;'</span>,
			<span class="hljs-string">'&lt;/div&gt;'</span>,
			<span class="hljs-string">'&lt;div class="main"&gt;'</span>,
				<span class="hljs-string">'&lt;div class="left"&gt;&lt;/div&gt;&lt;div class="mainBody"&gt;'</span>,
					<span class="hljs-string">'&lt;ol&gt;'</span>, cache.join( <span class="hljs-string">''</span> ), <span class="hljs-string">'&lt;/ol&gt;'</span>,
				<span class="hljs-string">'&lt;/div&gt;&lt;div class="right"&gt;&lt;/div&gt;'</span>,
			<span class="hljs-string">'&lt;/div&gt;'</span>,
			<span class="hljs-string">'&lt;div class="footer"&gt;'</span>,
				<span class="hljs-string">'&lt;div class="left"&gt;&lt;label for="'</span>, IDs.checkbox, <span class="hljs-string">'"&gt;&lt;input type="checkbox" id="'</span>, IDs.checkbox, <span class="hljs-string">'" /&gt;Visible on page load&lt;/label&gt;&lt;/div&gt;'</span>,
				<span class="hljs-string">'&lt;div class="right"&gt;&lt;/div&gt;'</span>,
			<span class="hljs-string">'&lt;/div&gt;'</span>
		].join( <span class="hljs-string">''</span> );
		<span class="hljs-keyword">return</span> newNode;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">backgroundImage</span><span class="hljs-params">()</span> {</span> <span class="hljs-comment">//(IE6 only) change &lt;BODY&gt; tag's background to resolve {position:fixed} support</span>
		<span class="hljs-keyword">var</span> bodyTag = document.getElementsByTagName( <span class="hljs-string">'BODY'</span> )[ <span class="hljs-number">0</span> ];

		<span class="hljs-keyword">if</span> ( bodyTag.currentStyle &amp;&amp; IE6_POSITION_FIXED ) {
			<span class="hljs-keyword">if</span> (bodyTag.currentStyle.backgroundImage == <span class="hljs-string">'none'</span> ) {
				bodyTag.style.backgroundImage = <span class="hljs-string">'url(about:blank)'</span>;
			}
			<span class="hljs-keyword">if</span> (bodyTag.currentStyle.backgroundAttachment == <span class="hljs-string">'scroll'</span> ) {
				bodyTag.style.backgroundAttachment = <span class="hljs-string">'fixed'</span>;
			}
		}
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMessage</span><span class="hljs-params">( type, content )</span> {</span> <span class="hljs-comment">//adds a message to the output list</span>
		content = ( content.constructor == <span class="hljs-built_in">Array</span> ) ? content.join( <span class="hljs-string">''</span> ) : content;
		<span class="hljs-keyword">if</span> ( outputList ) {
			<span class="hljs-keyword">var</span> newMsg = document.createElement( <span class="hljs-string">'LI'</span> );
			newMsg.className = type;
			newMsg.innerHTML = [ <span class="hljs-string">'&lt;span class="icon"&gt;&lt;/span&gt;'</span>, content ].join( <span class="hljs-string">''</span> );
			outputList.appendChild( newMsg );
			scrollToBottom();
		} <span class="hljs-keyword">else</span> {
			cache.push( [ <span class="hljs-string">'&lt;li class="'</span>, type, <span class="hljs-string">'"&gt;&lt;span class="icon"&gt;&lt;/span&gt;'</span>, content, <span class="hljs-string">'&lt;/li&gt;'</span> ].join( <span class="hljs-string">''</span> ) );
		}
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span> {</span> <span class="hljs-comment">//clear list output</span>
		outputList.innerHTML = <span class="hljs-string">''</span>;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickControl</span><span class="hljs-params">( evt )</span> {</span>
		<span class="hljs-keyword">if</span> ( !evt ) evt = window.event;
		<span class="hljs-keyword">var</span> el = ( evt.target ) ? evt.target : evt.srcElement;

		<span class="hljs-keyword">if</span> ( el.tagName == <span class="hljs-string">'SPAN'</span> ) {
			<span class="hljs-keyword">switch</span> ( el.getAttributeNode( <span class="hljs-string">'op'</span> ).nodeValue ) {
				<span class="hljs-keyword">case</span> <span class="hljs-string">'resize'</span>: resize(); <span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-string">'clear'</span>:  clear();  <span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-string">'close'</span>:  hide();   <span class="hljs-keyword">break</span>;
			}
		}
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickFilter</span><span class="hljs-params">( evt )</span> {</span> <span class="hljs-comment">//show/hide a specific message type</span>
		<span class="hljs-keyword">if</span> ( !evt ) evt = window.event;
		<span class="hljs-keyword">var</span> span = ( evt.target ) ? evt.target : evt.srcElement;

		<span class="hljs-keyword">if</span> ( span &amp;&amp; span.tagName == <span class="hljs-string">'SPAN'</span> ) {

			<span class="hljs-keyword">var</span> type = span.getAttributeNode( <span class="hljs-string">'type'</span> ).nodeValue;

			<span class="hljs-keyword">if</span> ( evt.altKey ) {
				<span class="hljs-keyword">var</span> filters = document.getElementById( IDs.filters ).getElementsByTagName( <span class="hljs-string">'SPAN'</span> );

				<span class="hljs-keyword">var</span> active = <span class="hljs-number">0</span>;
				<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> entry <span class="hljs-keyword">in</span> messageTypes ) {
					<span class="hljs-keyword">if</span> ( messageTypes[ entry ] ) active++;
				}
				<span class="hljs-keyword">var</span> oneActiveFilter = ( active == <span class="hljs-number">1</span> &amp;&amp; messageTypes[ type ] );

				<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; filters[ i ]; i++ ) {
					<span class="hljs-keyword">var</span> spanType = filters[ i ].getAttributeNode( <span class="hljs-string">'type'</span> ).nodeValue;

					filters[ i ].className = ( oneActiveFilter || ( spanType == type ) ) ? spanType : spanType + <span class="hljs-string">'Disabled'</span>;
					messageTypes[ spanType ] = oneActiveFilter || ( spanType == type );
				}
			}
			<span class="hljs-keyword">else</span> {
				messageTypes[ type ] = ! messageTypes[ type ];
				span.className = ( messageTypes[ type ] ) ? type : type + <span class="hljs-string">'Disabled'</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>build outputList’s class from messageTypes object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> disabledTypes = [];
			<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> type <span class="hljs-keyword">in</span> messageTypes ) {
				<span class="hljs-keyword">if</span> ( ! messageTypes[ type ] ) disabledTypes.push( type );
			}
			disabledTypes.push( <span class="hljs-string">''</span> );
			outputList.className = disabledTypes.join( <span class="hljs-string">'Hidden '</span> );

			scrollToBottom();
		}
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickVis</span><span class="hljs-params">( evt )</span> {</span>
		<span class="hljs-keyword">if</span> ( !evt ) evt = window.event;
		<span class="hljs-keyword">var</span> el = ( evt.target ) ? evt.target : evt.srcElement;

		state.load = el.checked;
		setState();
	}


	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scrollToBottom</span><span class="hljs-params">()</span> {</span> <span class="hljs-comment">//scroll list output to the bottom</span>
		outputList.scrollTop = outputList.scrollHeight;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isVisible</span><span class="hljs-params">()</span> {</span> <span class="hljs-comment">//determine the visibility</span>
		<span class="hljs-keyword">return</span> ( bbird.style.display == <span class="hljs-string">'block'</span> );
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hide</span><span class="hljs-params">()</span> {</span>
	  bbird.style.display = <span class="hljs-string">'none'</span>;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> body = document.getElementsByTagName( <span class="hljs-string">'BODY'</span> )[ <span class="hljs-number">0</span> ];
		body.removeChild( bbird );
		body.appendChild( bbird );
		bbird.style.display = <span class="hljs-string">'block'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>added by Eonasdan/Jonathan Peterson to make dialog box draggable if jquery-ui is detected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (window.jQuery &amp;&amp; jQuery.ui &amp;&amp; jQuery.ui.version) {
		        jQuery(<span class="hljs-string">"#blackbird"</span>).draggable({ cancel: <span class="hljs-string">"div.main"</span> });
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>sets the position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reposition</span><span class="hljs-params">( position )</span> {</span>
		<span class="hljs-keyword">if</span> ( position === <span class="hljs-literal">undefined</span> || position == <span class="hljs-literal">null</span> ) {
			position = ( state &amp;&amp; state.pos === <span class="hljs-literal">null</span> ) ? <span class="hljs-number">1</span> : ( state.pos + <span class="hljs-number">1</span> ) % <span class="hljs-number">4</span>; <span class="hljs-comment">//set to initial position ('topRight') or move to next position</span>
		}

		<span class="hljs-keyword">switch</span> ( position ) {
			<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: classes[ <span class="hljs-number">0</span> ] = <span class="hljs-string">'bbTopLeft'</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: classes[ <span class="hljs-number">0</span> ] = <span class="hljs-string">'bbTopRight'</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: classes[ <span class="hljs-number">0</span> ] = <span class="hljs-string">'bbBottomLeft'</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: classes[ <span class="hljs-number">0</span> ] = <span class="hljs-string">'bbBottomRight'</span>; <span class="hljs-keyword">break</span>;
		}
		state.pos = position;
		setState();
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resize</span><span class="hljs-params">( size )</span> {</span>
		<span class="hljs-keyword">if</span> ( size === <span class="hljs-literal">undefined</span> || size === <span class="hljs-literal">null</span> ) {
			size = ( state &amp;&amp; state.size == <span class="hljs-literal">null</span> ) ? <span class="hljs-number">0</span> : ( state.size + <span class="hljs-number">1</span> ) % <span class="hljs-number">2</span>;
	  	}

		classes[ <span class="hljs-number">1</span> ] = ( size === <span class="hljs-number">0</span> ) ? <span class="hljs-string">'bbSmall'</span> : <span class="hljs-string">'bbLarge'</span>

		<span class="hljs-keyword">var</span> span = document.getElementById( IDs.size );
		span.title = ( size === <span class="hljs-number">1</span> ) ? <span class="hljs-string">'small'</span> : <span class="hljs-string">'large'</span>;
		span.className = span.title;

		state.size = size;
		setState();
		scrollToBottom();
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setState</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> props = [];
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> entry <span class="hljs-keyword">in</span> state ) {
			<span class="hljs-keyword">var</span> value = ( state[ entry ] &amp;&amp; state[ entry ].constructor === <span class="hljs-built_in">String</span> ) ? <span class="hljs-string">'"'</span> + state[ entry ] + <span class="hljs-string">'"'</span> : state[ entry ];
			props.push( entry + <span class="hljs-string">':'</span> + value );
		}
		props = props.join( <span class="hljs-string">','</span> );

		<span class="hljs-keyword">var</span> expiration = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
		expiration.setDate( expiration.getDate() + <span class="hljs-number">14</span> );
		document.cookie = [ <span class="hljs-string">'blackbird={'</span>, props, <span class="hljs-string">'}; expires='</span>, expiration.toUTCString() ,<span class="hljs-string">';'</span> ].join( <span class="hljs-string">''</span> );

		<span class="hljs-keyword">var</span> newClass = [];
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> word <span class="hljs-keyword">in</span> classes ) {
			newClass.push( classes[ word ] );
		}
		bbird.className = newClass.join( <span class="hljs-string">' '</span> );
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getState</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> re = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>( <span class="hljs-regexp">/blackbird=({[^;]+})(;|\b|$)/</span> );
		<span class="hljs-keyword">var</span> match = re.exec( document.cookie );
		<span class="hljs-keyword">return</span> ( match &amp;&amp; match[ <span class="hljs-number">1</span> ] ) ? <span class="hljs-built_in">eval</span>( <span class="hljs-string">'('</span> + match[ <span class="hljs-number">1</span> ] + <span class="hljs-string">')'</span> ) : { pos:<span class="hljs-literal">null</span>, size:<span class="hljs-literal">null</span>, load:<span class="hljs-literal">null</span> };
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>event handler for ‘keyufor (p’ event for window</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readKey</span><span class="hljs-params">( evt )</span> {</span>
		<span class="hljs-keyword">if</span> ( !evt ) evt = window.event;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>var code = 113; //F2 key</p>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>if ( evt &amp;&amp; evt.keyCode == code ) {</p>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>var visible = isVisible();</p>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>if ( visible &amp;&amp; evt.shiftKey &amp;&amp; evt.altKey ) clear();
else if     (visible &amp;&amp; evt.shiftKey ) reposition();
else if ( !evt.shiftKey &amp;&amp; !evt.altKey ) {
 ( visible ) ? hide() : show();
}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        <span class="hljs-keyword">if</span> (evt.shiftKey &amp;&amp; evt.ctrlKey) {
                            <span class="hljs-keyword">if</span> (evt.keyCode === <span class="hljs-number">38</span>) {
                                show();
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (evt.keyCode === <span class="hljs-number">40</span>) {
                                hide();
                            }
                        }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	}</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>event management ( thanks John Resig )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addEvent</span><span class="hljs-params">( obj, type, fn )</span> {</span>
		<span class="hljs-keyword">var</span> obj = ( obj.constructor === <span class="hljs-built_in">String</span> ) ? document.getElementById( obj ) : obj;
		<span class="hljs-keyword">if</span> ( obj.attachEvent ) {
			obj[ <span class="hljs-string">'e'</span> + type + fn ] = fn;
			obj[ type + fn ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span> obj[ <span class="hljs-string">'e'</span> + type + fn ]( window.event ) };
			obj.attachEvent( <span class="hljs-string">'on'</span> + type, obj[ type + fn ] );
		} <span class="hljs-keyword">else</span> obj.addEventListener( type, fn, <span class="hljs-literal">false</span> );
	}
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeEvent</span><span class="hljs-params">( obj, type, fn )</span> {</span>
		<span class="hljs-keyword">var</span> obj = ( obj.constructor === <span class="hljs-built_in">String</span> ) ? document.getElementById( obj ) : obj;
		<span class="hljs-keyword">if</span> ( obj.detachEvent ) {
			obj.detachEvent( <span class="hljs-string">'on'</span> + type, obj[ type + fn ] );
			obj[ type + fn ] = <span class="hljs-literal">null</span>;
	  } <span class="hljs-keyword">else</span> obj.removeEventListener( type, fn, <span class="hljs-literal">false</span> );
	}

	window[ NAMESPACE ] = {
		toggle:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> ( isVisible() ) ? hide() : show(); },
		resize:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> resize(); },
		clear:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> clear(); },
		move:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> reposition(); },
		debug:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( msg )</span> {</span> addMessage( <span class="hljs-string">'debug'</span>, msg ); },
		warn:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( msg )</span> {</span> addMessage( <span class="hljs-string">'warn'</span>, msg ); },
		info:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( msg )</span> {</span> addMessage( <span class="hljs-string">'info'</span>, msg ); },
		error:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( msg )</span> {</span> addMessage( <span class="hljs-string">'error'</span>, msg ); },
		profile:
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( label )</span> {</span>
				<span class="hljs-keyword">var</span> currentTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(); <span class="hljs-comment">//record the current time when profile() is executed</span>

				<span class="hljs-keyword">if</span> ( label == <span class="hljs-literal">undefined</span> || label == <span class="hljs-string">''</span> ) {
					addMessage( <span class="hljs-string">'error'</span>, <span class="hljs-string">'&lt;b&gt;ERROR:&lt;/b&gt; Please specify a label for your profile statement'</span> );
				}
				<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( profiler[ label ] ) {
					addMessage( <span class="hljs-string">'profile'</span>, [ label, <span class="hljs-string">': '</span>, currentTime - profiler[ label ],	<span class="hljs-string">'ms'</span> ].join( <span class="hljs-string">''</span> ) );
					<span class="hljs-keyword">delete</span> profiler[ label ];
				}
				<span class="hljs-keyword">else</span> {
					profiler[ label ] = currentTime;
					addMessage( <span class="hljs-string">'profile'</span>, label );
				}
				<span class="hljs-keyword">return</span> currentTime;
			}
	}
        <span class="hljs-keyword">if</span>(document.body)
          init();
        <span class="hljs-keyword">else</span>
	  addEvent( window, <span class="hljs-string">'load'</span>, init );
		<span class="hljs-comment">/* initialize Blackbird when the page loads */</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> body = document.getElementsByTagName( <span class="hljs-string">'BODY'</span> )[ <span class="hljs-number">0</span> ];
			bbird = body.appendChild( generateMarkup() );
			outputList = bbird.getElementsByTagName( <span class="hljs-string">'OL'</span> )[ <span class="hljs-number">0</span> ];

			backgroundImage();</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>add events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			addEvent( IDs.checkbox, <span class="hljs-string">'click'</span>, clickVis );
			addEvent( IDs.filters, <span class="hljs-string">'click'</span>, clickFilter );
			addEvent( IDs.controls, <span class="hljs-string">'click'</span>, clickControl );
			addEvent( document, <span class="hljs-string">'keyup'</span>, readKey);

			resize( state.size );
			reposition( state.pos );
			<span class="hljs-keyword">if</span> ( state.load ) {
				show();
				document.getElementById( IDs.checkbox ).checked = <span class="hljs-literal">true</span>;
			}

			scrollToBottom();

			window[ NAMESPACE ].init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				show();
				window[ NAMESPACE ].error( [ <span class="hljs-string">'&lt;b&gt;'</span>, NAMESPACE, <span class="hljs-string">'&lt;/b&gt; can only be initialized once'</span> ] );
			}

			addEvent( window, <span class="hljs-string">'unload'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				removeEvent( IDs.checkbox, <span class="hljs-string">'click'</span>, clickVis );
				removeEvent( IDs.filters, <span class="hljs-string">'click'</span>, clickFilter );
				removeEvent( IDs.controls, <span class="hljs-string">'click'</span>, clickControl );
				removeEvent( document, <span class="hljs-string">'keyup'</span>, readKey );
			});
		}
})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
