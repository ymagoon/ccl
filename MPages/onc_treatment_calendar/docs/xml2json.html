<!DOCTYPE html>

<html>
<head>
  <title>xml2json.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="Gruntfile.html">
                Gruntfile.js
              </a>
            
              
              <a class="source" href="server.html">
                server.js
              </a>
            
              
              <a class="source" href="accordionctrl.html">
                accordionctrl.js
              </a>
            
              
              <a class="source" href="appctrl.html">
                appctrl.js
              </a>
            
              
              <a class="source" href="calendarctrl.html">
                calendarctrl.js
              </a>
            
              
              <a class="source" href="calendarnotesctrl.html">
                calendarnotesctrl.js
              </a>
            
              
              <a class="source" href="listctrl.html">
                listctrl.js
              </a>
            
              
              <a class="source" href="accordionapptdir.html">
                accordionapptdir.js
              </a>
            
              
              <a class="source" href="accordiondir.html">
                accordiondir.js
              </a>
            
              
              <a class="source" href="accordionmeddir.html">
                accordionmeddir.js
              </a>
            
              
              <a class="source" href="accordionorderdir.html">
                accordionorderdir.js
              </a>
            
              
              <a class="source" href="accordionphasedir.html">
                accordionphasedir.js
              </a>
            
              
              <a class="source" href="accordionplandir.html">
                accordionplandir.js
              </a>
            
              
              <a class="source" href="accordionregimendir.html">
                accordionregimendir.js
              </a>
            
              
              <a class="source" href="adddialogdir.html">
                adddialogdir.js
              </a>
            
              
              <a class="source" href="calendarcontrolsdir.html">
                calendarcontrolsdir.js
              </a>
            
              
              <a class="source" href="calendardatedir.html">
                calendardatedir.js
              </a>
            
              
              <a class="source" href="calendardaydir.html">
                calendardaydir.js
              </a>
            
              
              <a class="source" href="calendardir.html">
                calendardir.js
              </a>
            
              
              <a class="source" href="calendarlistdir.html">
                calendarlistdir.js
              </a>
            
              
              <a class="source" href="hoverhighlightdir.html">
                hoverhighlightdir.js
              </a>
            
              
              <a class="source" href="jquerydatepicker.html">
                jquerydatepicker.js
              </a>
            
              
              <a class="source" href="listdatedir.html">
                listdatedir.js
              </a>
            
              
              <a class="source" href="modalcalendardir.html">
                modalcalendardir.js
              </a>
            
              
              <a class="source" href="noteinputdir.html">
                noteinputdir.js
              </a>
            
              
              <a class="source" href="printcalendardatedir.html">
                printcalendardatedir.js
              </a>
            
              
              <a class="source" href="printcalendardaydir.html">
                printcalendardaydir.js
              </a>
            
              
              <a class="source" href="printcalendarviewdir.html">
                printcalendarviewdir.js
              </a>
            
              
              <a class="source" href="printdialogdir.html">
                printdialogdir.js
              </a>
            
              
              <a class="source" href="printlistviewdir.html">
                printlistviewdir.js
              </a>
            
              
              <a class="source" href="printtemplate.html">
                printtemplate.js
              </a>
            
              
              <a class="source" href="qtipdir.html">
                qtipdir.js
              </a>
            
              
              <a class="source" href="schedulableicondir.html">
                schedulableicondir.js
              </a>
            
              
              <a class="source" href="statusdialogdir.html">
                statusdialogdir.js
              </a>
            
              
              <a class="source" href="windowresizedir.html">
                windowresizedir.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="cal-view_i18n.html">
                cal-view_i18n.js
              </a>
            
              
              <a class="source" href="blackbird.html">
                blackbird.js
              </a>
            
              
              <a class="source" href="dc_mp_js_util_mpage.html">
                dc_mp_js_util_mpage.js
              </a>
            
              
              <a class="source" href="oncmp_core.html">
                oncmp_core.js
              </a>
            
              
              <a class="source" href="printerConfig_template.html">
                printerConfig_template.js
              </a>
            
              
              <a class="source" href="xml2json.html">
                xml2json.js
              </a>
            
              
              <a class="source" href="animationsmod.html">
                animationsmod.js
              </a>
            
              
              <a class="source" href="appmod.html">
                appmod.js
              </a>
            
              
              <a class="source" href="controllersmod.html">
                controllersmod.js
              </a>
            
              
              <a class="source" href="directivesmod.html">
                directivesmod.js
              </a>
            
              
              <a class="source" href="daodevsvc.html">
                daodevsvc.js
              </a>
            
              
              <a class="source" href="daoprodsvc.html">
                daoprodsvc.js
              </a>
            
              
              <a class="source" href="notesmedssvc.html">
                notesmedssvc.js
              </a>
            
              
              <a class="source" href="notesmedssvcdev.html">
                notesmedssvcdev.js
              </a>
            
              
              <a class="source" href="pubsubsvc.html">
                pubsubsvc.js
              </a>
            
              
              <a class="source" href="services.html">
                services.js
              </a>
            
              
              <a class="source" href="signdevsvc.html">
                signdevsvc.js
              </a>
            
              
              <a class="source" href="signprodsvc.html">
                signprodsvc.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>xml2json.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
 Copyright 2011-2013 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">X2JS</span><span class="hljs-params">(config)</span> {</span><span class="hljs-pi">
	'use strict'</span>;
		
	<span class="hljs-keyword">var</span> VERSION = <span class="hljs-string">"1.1.5"</span>;
	
	config = config || {};
	initConfigDefaults();
	initRequiredPolyfills();
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initConfigDefaults</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span>(config.escapeMode === <span class="hljs-literal">undefined</span>) {
			config.escapeMode = <span class="hljs-literal">true</span>;
		}
		config.attributePrefix = config.attributePrefix || <span class="hljs-string">"_"</span>;
		config.arrayAccessForm = config.arrayAccessForm || <span class="hljs-string">"none"</span>;
		config.emptyNodeForm = config.emptyNodeForm || <span class="hljs-string">"text"</span>;
		<span class="hljs-keyword">if</span>(config.enableToStringFunc === <span class="hljs-literal">undefined</span>) {
			config.enableToStringFunc = <span class="hljs-literal">true</span>; 
		}
		config.arrayAccessFormPaths = config.arrayAccessFormPaths || []; 
		<span class="hljs-keyword">if</span>(config.skipEmptyTextNodesForObj === <span class="hljs-literal">undefined</span>) {
			config.skipEmptyTextNodesForObj = <span class="hljs-literal">true</span>;
		}
		<span class="hljs-keyword">if</span>(config.stripWhitespaces === <span class="hljs-literal">undefined</span>) {
			config.stripWhitespaces = <span class="hljs-literal">true</span>;
		}
		config.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];
	}

	<span class="hljs-keyword">var</span> DOMNodeTypes = {
		ELEMENT_NODE 	   : <span class="hljs-number">1</span>,
		TEXT_NODE    	   : <span class="hljs-number">3</span>,
		CDATA_SECTION_NODE : <span class="hljs-number">4</span>,
		COMMENT_NODE	   : <span class="hljs-number">8</span>,
		DOCUMENT_NODE 	   : <span class="hljs-number">9</span>
	};
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initRequiredPolyfills</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pad</span><span class="hljs-params">(number)</span> {</span>
	      <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">String</span>(number);
	      <span class="hljs-keyword">if</span> ( r.length === <span class="hljs-number">1</span> ) {
	        r = <span class="hljs-string">'0'</span> + r;
	      }
	      <span class="hljs-keyword">return</span> r;
	    }</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Hello IE8-</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">String</span>.prototype.trim !== <span class="hljs-string">'function'</span>) {			
			<span class="hljs-built_in">String</span>.prototype.trim = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.replace(<span class="hljs-regexp">/^\s+|^\n+|(\s|\n)+$/g</span>, <span class="hljs-string">''</span>);
			}
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Date</span>.prototype.toISOString !== <span class="hljs-string">'function'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Implementation from <a href="http://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript">http://stackoverflow.com/questions/2573521/how-do-i-output-an-iso-8601-formatted-string-in-javascript</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-built_in">Date</span>.prototype.toISOString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getUTCFullYear()
		        + <span class="hljs-string">'-'</span> + pad( <span class="hljs-keyword">this</span>.getUTCMonth() + <span class="hljs-number">1</span> )
		        + <span class="hljs-string">'-'</span> + pad( <span class="hljs-keyword">this</span>.getUTCDate() )
		        + <span class="hljs-string">'T'</span> + pad( <span class="hljs-keyword">this</span>.getUTCHours() )
		        + <span class="hljs-string">':'</span> + pad( <span class="hljs-keyword">this</span>.getUTCMinutes() )
		        + <span class="hljs-string">':'</span> + pad( <span class="hljs-keyword">this</span>.getUTCSeconds() )
		        + <span class="hljs-string">'.'</span> + <span class="hljs-built_in">String</span>( (<span class="hljs-keyword">this</span>.getUTCMilliseconds()/<span class="hljs-number">1000</span>).toFixed(<span class="hljs-number">3</span>) ).slice( <span class="hljs-number">2</span>, <span class="hljs-number">5</span> )
		        + <span class="hljs-string">'Z'</span>;
		    };
		}
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNodeLocalName</span><span class="hljs-params">( node )</span> {</span>
		<span class="hljs-keyword">var</span> nodeLocalName = node.localName;			
		<span class="hljs-keyword">if</span>(nodeLocalName == <span class="hljs-literal">null</span>) <span class="hljs-comment">// Yeah, this is IE!! </span>
			nodeLocalName = node.baseName;
		<span class="hljs-keyword">if</span>(nodeLocalName == <span class="hljs-literal">null</span> || nodeLocalName==<span class="hljs-string">""</span>) <span class="hljs-comment">// =="" is IE too</span>
			nodeLocalName = node.nodeName;
		<span class="hljs-keyword">return</span> nodeLocalName;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNodePrefix</span><span class="hljs-params">(node)</span> {</span>
		<span class="hljs-keyword">return</span> node.prefix;
	}
		
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escapeXmlChars</span><span class="hljs-params">(str)</span> {</span>
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(str) == <span class="hljs-string">"string"</span>)
			<span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/&amp;/g</span>, <span class="hljs-string">'&amp;amp;'</span>).replace(<span class="hljs-regexp">/&lt;/g</span>, <span class="hljs-string">'&amp;lt;'</span>).replace(<span class="hljs-regexp">/&gt;/g</span>, <span class="hljs-string">'&amp;gt;'</span>).replace(<span class="hljs-regexp">/"/g</span>, <span class="hljs-string">'&amp;quot;'</span>).replace(<span class="hljs-regexp">/'/g</span>, <span class="hljs-string">'&amp;#x27;'</span>).replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'&amp;#x2F;'</span>);
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> str;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeXmlChars</span><span class="hljs-params">(str)</span> {</span>
		<span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/&amp;amp;/g</span>, <span class="hljs-string">'&amp;'</span>).replace(<span class="hljs-regexp">/&amp;lt;/g</span>, <span class="hljs-string">'&lt;'</span>).replace(<span class="hljs-regexp">/&amp;gt;/g</span>, <span class="hljs-string">'&gt;'</span>).replace(<span class="hljs-regexp">/&amp;quot;/g</span>, <span class="hljs-string">'"'</span>).replace(<span class="hljs-regexp">/&amp;#x27;/g</span>, <span class="hljs-string">"'"</span>).replace(<span class="hljs-regexp">/&amp;#x2F;/g</span>, <span class="hljs-string">'\/'</span>);
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toArrayAccessForm</span><span class="hljs-params">(obj, childName, path)</span> {</span>
		<span class="hljs-keyword">switch</span>(config.arrayAccessForm) {
		<span class="hljs-keyword">case</span> <span class="hljs-string">"property"</span>:
			<span class="hljs-keyword">if</span>(!(obj[childName] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>))
				obj[childName+<span class="hljs-string">"_asArray"</span>] = [obj[childName]];
			<span class="hljs-keyword">else</span>
				obj[childName+<span class="hljs-string">"_asArray"</span>] = obj[childName];
			<span class="hljs-keyword">break</span>;		
		<span class="hljs-comment">/*case "none":
			break;*/</span>
		}
		
		<span class="hljs-keyword">if</span>(!(obj[childName] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) &amp;&amp; config.arrayAccessFormPaths.length &gt; <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">var</span> idx = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">for</span>(; idx &lt; config.arrayAccessFormPaths.length; idx++) {
				<span class="hljs-keyword">var</span> arrayPath = config.arrayAccessFormPaths[idx];
				<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> arrayPath === <span class="hljs-string">"string"</span> ) {
					<span class="hljs-keyword">if</span>(arrayPath == path)
						<span class="hljs-keyword">break</span>;
				}
				<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">if</span>( arrayPath <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) {
					<span class="hljs-keyword">if</span>(arrayPath.test(path))
						<span class="hljs-keyword">break</span>;
				}				
				<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> arrayPath === <span class="hljs-string">"function"</span>) {
					<span class="hljs-keyword">if</span>(arrayPath(obj, childName, path))
						<span class="hljs-keyword">break</span>;
				}
			}
			<span class="hljs-keyword">if</span>(idx!=config.arrayAccessFormPaths.length) {
				obj[childName] = [obj[childName]];
			}
		}
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromXmlDateTime</span><span class="hljs-params">(prop)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Implementation based up on <a href="http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object">http://stackoverflow.com/questions/8178598/xml-datetime-to-javascript-date-object</a>
Improved to support full spec and optional parts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> bits = prop.split(<span class="hljs-regexp">/[-T:+Z]/g</span>);
		
		<span class="hljs-keyword">var</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(bits[<span class="hljs-number">0</span>], bits[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span>, bits[<span class="hljs-number">2</span>]);			
		<span class="hljs-keyword">var</span> secondBits = bits[<span class="hljs-number">5</span>].split(<span class="hljs-string">"\."</span>);
		d.setHours(bits[<span class="hljs-number">3</span>], bits[<span class="hljs-number">4</span>], secondBits[<span class="hljs-number">0</span>]);
		<span class="hljs-keyword">if</span>(secondBits.length&gt;<span class="hljs-number">1</span>)
			d.setMilliseconds(secondBits[<span class="hljs-number">1</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Get supplied time zone offset in minutes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(bits[<span class="hljs-number">6</span>] &amp;&amp; bits[<span class="hljs-number">7</span>]) {
			<span class="hljs-keyword">var</span> offsetMinutes = bits[<span class="hljs-number">6</span>] * <span class="hljs-number">60</span> + <span class="hljs-built_in">Number</span>(bits[<span class="hljs-number">7</span>]);
			<span class="hljs-keyword">var</span> sign = <span class="hljs-regexp">/\d\d-\d\d:\d\d$/</span>.test(prop)? <span class="hljs-string">'-'</span> : <span class="hljs-string">'+'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Apply the sign</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			offsetMinutes = <span class="hljs-number">0</span> + (sign == <span class="hljs-string">'-'</span>? -<span class="hljs-number">1</span> * offsetMinutes : offsetMinutes);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Apply offset and local timezone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			d.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset())
		}
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">if</span>(prop.indexOf(<span class="hljs-string">"Z"</span>, prop.length - <span class="hljs-number">1</span>) !== -<span class="hljs-number">1</span>) {
				d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));					
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>d is now a local time equivalent to the supplied time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">return</span> d;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFromXmlDateTimePaths</span><span class="hljs-params">(value, childName, fullPath)</span> {</span>
		<span class="hljs-keyword">if</span>(config.datetimeAccessFormPaths.length &gt; <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">var</span> path = fullPath.split(<span class="hljs-string">"\.#"</span>)[<span class="hljs-number">0</span>];
			<span class="hljs-keyword">var</span> idx = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">for</span>(; idx &lt; config.datetimeAccessFormPaths.length; idx++) {
				<span class="hljs-keyword">var</span> dtPath = config.datetimeAccessFormPaths[idx];
				<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> dtPath === <span class="hljs-string">"string"</span> ) {
					<span class="hljs-keyword">if</span>(dtPath == path)
						<span class="hljs-keyword">break</span>;
				}
				<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">if</span>( dtPath <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) {
					<span class="hljs-keyword">if</span>(dtPath.test(path))
						<span class="hljs-keyword">break</span>;
				}				
				<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> dtPath === <span class="hljs-string">"function"</span>) {
					<span class="hljs-keyword">if</span>(dtPath(obj, childName, path))
						<span class="hljs-keyword">break</span>;
				}
			}
			<span class="hljs-keyword">if</span>(idx!=config.datetimeAccessFormPaths.length) {
				<span class="hljs-keyword">return</span> fromXmlDateTime(value);
			}
			<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">return</span> value;
		}
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> value;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseDOMChildren</span><span class="hljs-params">( node, path )</span> {</span>
		<span class="hljs-keyword">if</span>(node.nodeType == DOMNodeTypes.DOCUMENT_NODE) {
			<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>;
			<span class="hljs-keyword">var</span> nodeChildren = node.childNodes;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Alternative for firstElementChild which is not supported in some environments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> cidx=<span class="hljs-number">0</span>; cidx &lt;nodeChildren.length; cidx++) {
				<span class="hljs-keyword">var</span> child = nodeChildren.item(cidx);
				<span class="hljs-keyword">if</span>(child.nodeType == DOMNodeTypes.ELEMENT_NODE) {
					<span class="hljs-keyword">var</span> childName = getNodeLocalName(child);
					result[childName] = parseDOMChildren(child, childName);
				}
			}
			<span class="hljs-keyword">return</span> result;
		}
		<span class="hljs-keyword">else</span>
		<span class="hljs-keyword">if</span>(node.nodeType == DOMNodeTypes.ELEMENT_NODE) {
			<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>;
			result.__cnt=<span class="hljs-number">0</span>;
			
			<span class="hljs-keyword">var</span> nodeChildren = node.childNodes;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Children nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> cidx=<span class="hljs-number">0</span>; cidx &lt;nodeChildren.length; cidx++) {
				<span class="hljs-keyword">var</span> child = nodeChildren.item(cidx); <span class="hljs-comment">// nodeChildren[cidx];</span>
				<span class="hljs-keyword">var</span> childName = getNodeLocalName(child);
				
				<span class="hljs-keyword">if</span>(child.nodeType!= DOMNodeTypes.COMMENT_NODE) {
					result.__cnt++;
					<span class="hljs-keyword">if</span>(result[childName] == <span class="hljs-literal">null</span>) {
						result[childName] = parseDOMChildren(child, path+<span class="hljs-string">"."</span>+childName);
						toArrayAccessForm(result, childName, path+<span class="hljs-string">"."</span>+childName);					
					}
					<span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">if</span>(result[childName] != <span class="hljs-literal">null</span>) {
							<span class="hljs-keyword">if</span>( !(result[childName] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>)) {
								result[childName] = [result[childName]];
								toArrayAccessForm(result, childName, path+<span class="hljs-string">"."</span>+childName);
							}
						}
						(result[childName])[result[childName].length] = parseDOMChildren(child, path+<span class="hljs-string">"."</span>+childName);
					}
				}								
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> aidx=<span class="hljs-number">0</span>; aidx &lt;node.attributes.length; aidx++) {
				<span class="hljs-keyword">var</span> attr = node.attributes.item(aidx); <span class="hljs-comment">// [aidx];</span>
				result.__cnt++;
				result[config.attributePrefix+attr.name]=attr.value;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Node namespace prefix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> nodePrefix = getNodePrefix(node);
			<span class="hljs-keyword">if</span>(nodePrefix!=<span class="hljs-literal">null</span> &amp;&amp; nodePrefix!=<span class="hljs-string">""</span>) {
				result.__cnt++;
				result.__prefix=nodePrefix;
			}
			
			<span class="hljs-keyword">if</span>(result[<span class="hljs-string">"#text"</span>]!=<span class="hljs-literal">null</span>) {				
				result.__text = result[<span class="hljs-string">"#text"</span>];
				<span class="hljs-keyword">if</span>(result.__text <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {
					result.__text = result.__text.join(<span class="hljs-string">"\n"</span>);
				}
				<span class="hljs-keyword">if</span>(config.escapeMode)
					result.__text = unescapeXmlChars(result.__text);
				<span class="hljs-keyword">if</span>(config.stripWhitespaces)
					result.__text = result.__text.trim();
				<span class="hljs-keyword">delete</span> result[<span class="hljs-string">"#text"</span>];
				<span class="hljs-keyword">if</span>(config.arrayAccessForm==<span class="hljs-string">"property"</span>)
					<span class="hljs-keyword">delete</span> result[<span class="hljs-string">"#text_asArray"</span>];
				result.__text = checkFromXmlDateTimePaths(result.__text, childName, path+<span class="hljs-string">"."</span>+childName);
			}
			<span class="hljs-keyword">if</span>(result[<span class="hljs-string">"#cdata-section"</span>]!=<span class="hljs-literal">null</span>) {
				result.__cdata = result[<span class="hljs-string">"#cdata-section"</span>];
				<span class="hljs-keyword">delete</span> result[<span class="hljs-string">"#cdata-section"</span>];
				<span class="hljs-keyword">if</span>(config.arrayAccessForm==<span class="hljs-string">"property"</span>)
					<span class="hljs-keyword">delete</span> result[<span class="hljs-string">"#cdata-section_asArray"</span>];
			}
			
			<span class="hljs-keyword">if</span>( result.__cnt == <span class="hljs-number">1</span> &amp;&amp; result.__text!=<span class="hljs-literal">null</span>  ) {
				result = result.__text;
			}
			<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">if</span>( result.__cnt == <span class="hljs-number">0</span> &amp;&amp; config.emptyNodeForm==<span class="hljs-string">"text"</span> ) {
				result = <span class="hljs-string">''</span>;
			}
			<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">if</span> ( result.__cnt &gt; <span class="hljs-number">1</span> &amp;&amp; result.__text!=<span class="hljs-literal">null</span> &amp;&amp; config.skipEmptyTextNodesForObj) {
				<span class="hljs-keyword">if</span>( (config.stripWhitespaces &amp;&amp; result.__text==<span class="hljs-string">""</span>) || (result.__text.trim()==<span class="hljs-string">""</span>)) {
					<span class="hljs-keyword">delete</span> result.__text;
				}
			}
			<span class="hljs-keyword">delete</span> result.__cnt;			
			
			<span class="hljs-keyword">if</span>( config.enableToStringFunc &amp;&amp; (result.__text!=<span class="hljs-literal">null</span> || result.__cdata!=<span class="hljs-literal">null</span> )) {
				result.toString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.__text!=<span class="hljs-literal">null</span>? <span class="hljs-keyword">this</span>.__text:<span class="hljs-string">''</span>)+( <span class="hljs-keyword">this</span>.__cdata!=<span class="hljs-literal">null</span> ? <span class="hljs-keyword">this</span>.__cdata:<span class="hljs-string">''</span>);
				};
			}
			
			<span class="hljs-keyword">return</span> result;
		}
		<span class="hljs-keyword">else</span>
		<span class="hljs-keyword">if</span>(node.nodeType == DOMNodeTypes.TEXT_NODE || node.nodeType == DOMNodeTypes.CDATA_SECTION_NODE) {
			<span class="hljs-keyword">return</span> node.nodeValue;
		}	
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startTag</span><span class="hljs-params">(jsonObj, element, attrList, closed)</span> {</span>
		<span class="hljs-keyword">var</span> resultStr = <span class="hljs-string">"&lt;"</span>+ ( (jsonObj!=<span class="hljs-literal">null</span> &amp;&amp; jsonObj.__prefix!=<span class="hljs-literal">null</span>)? (jsonObj.__prefix+<span class="hljs-string">":"</span>):<span class="hljs-string">""</span>) + element;
		<span class="hljs-keyword">if</span>(attrList!=<span class="hljs-literal">null</span>) {
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> aidx = <span class="hljs-number">0</span>; aidx &lt; attrList.length; aidx++) {
				<span class="hljs-keyword">var</span> attrName = attrList[aidx];
				<span class="hljs-keyword">var</span> attrVal = jsonObj[attrName];
				<span class="hljs-keyword">if</span>(config.escapeMode)
					attrVal=escapeXmlChars(attrVal);
				resultStr+=<span class="hljs-string">" "</span>+attrName.substr(config.attributePrefix.length)+<span class="hljs-string">"='"</span>+attrVal+<span class="hljs-string">"'"</span>;
			}
		}
		<span class="hljs-keyword">if</span>(!closed)
			resultStr+=<span class="hljs-string">"&gt;"</span>;
		<span class="hljs-keyword">else</span>
			resultStr+=<span class="hljs-string">"/&gt;"</span>;
		<span class="hljs-keyword">return</span> resultStr;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endTag</span><span class="hljs-params">(jsonObj,elementName)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;/"</span>+ (jsonObj.__prefix!=<span class="hljs-literal">null</span>? (jsonObj.__prefix+<span class="hljs-string">":"</span>):<span class="hljs-string">""</span>)+elementName+<span class="hljs-string">"&gt;"</span>;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">endsWith</span><span class="hljs-params">(str, suffix)</span> {</span>
	    <span class="hljs-keyword">return</span> str.indexOf(suffix, str.length - suffix.length) !== -<span class="hljs-number">1</span>;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonXmlSpecialElem</span> <span class="hljs-params">( jsonObj, jsonObjField )</span> {</span>
		<span class="hljs-keyword">if</span>((config.arrayAccessForm==<span class="hljs-string">"property"</span> &amp;&amp; endsWith(jsonObjField.toString(),(<span class="hljs-string">"_asArray"</span>))) 
				|| jsonObjField.toString().indexOf(config.attributePrefix)==<span class="hljs-number">0</span> 
				|| jsonObjField.toString().indexOf(<span class="hljs-string">"__"</span>)==<span class="hljs-number">0</span>
				|| (jsonObj[jsonObjField] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span>) )
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonXmlElemCount</span> <span class="hljs-params">( jsonObj )</span> {</span>
		<span class="hljs-keyword">var</span> elementsCnt = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">if</span>(jsonObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span> ) {
			<span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> it <span class="hljs-keyword">in</span> jsonObj  ) {
				<span class="hljs-keyword">if</span>(jsonXmlSpecialElem ( jsonObj, it) )
					<span class="hljs-keyword">continue</span>;			
				elementsCnt++;
			}
		}
		<span class="hljs-keyword">return</span> elementsCnt;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSONAttributes</span> <span class="hljs-params">( jsonObj )</span> {</span>
		<span class="hljs-keyword">var</span> attrList = [];
		<span class="hljs-keyword">if</span>(jsonObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span> ) {
			<span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> ait <span class="hljs-keyword">in</span> jsonObj  ) {
				<span class="hljs-keyword">if</span>(ait.toString().indexOf(<span class="hljs-string">"__"</span>)== -<span class="hljs-number">1</span> &amp;&amp; ait.toString().indexOf(config.attributePrefix)==<span class="hljs-number">0</span>) {
					attrList.push(ait);
				}
			}
		}
		<span class="hljs-keyword">return</span> attrList;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSONTextAttrs</span> <span class="hljs-params">( jsonTxtObj )</span> {</span>
		<span class="hljs-keyword">var</span> result =<span class="hljs-string">""</span>;
		
		<span class="hljs-keyword">if</span>(jsonTxtObj.__cdata!=<span class="hljs-literal">null</span>) {										
			result+=<span class="hljs-string">"&lt;![CDATA["</span>+jsonTxtObj.__cdata+<span class="hljs-string">"]]&gt;"</span>;					
		}
		
		<span class="hljs-keyword">if</span>(jsonTxtObj.__text!=<span class="hljs-literal">null</span>) {			
			<span class="hljs-keyword">if</span>(config.escapeMode)
				result+=escapeXmlChars(jsonTxtObj.__text);
			<span class="hljs-keyword">else</span>
				result+=jsonTxtObj.__text;
		}
		<span class="hljs-keyword">return</span> result;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSONTextObject</span> <span class="hljs-params">( jsonTxtObj )</span> {</span>
		<span class="hljs-keyword">var</span> result =<span class="hljs-string">""</span>;

		<span class="hljs-keyword">if</span>( jsonTxtObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span> ) {
			result+=parseJSONTextAttrs ( jsonTxtObj );
		}
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">if</span>(jsonTxtObj!=<span class="hljs-literal">null</span>) {
				<span class="hljs-keyword">if</span>(config.escapeMode)
					result+=escapeXmlChars(jsonTxtObj);
				<span class="hljs-keyword">else</span>
					result+=jsonTxtObj;
			}
		
		<span class="hljs-keyword">return</span> result;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSONArray</span> <span class="hljs-params">( jsonArrRoot, jsonArrObj, attrList )</span> {</span>
		<span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>; 
		<span class="hljs-keyword">if</span>(jsonArrRoot.length == <span class="hljs-number">0</span>) {
			result+=startTag(jsonArrRoot, jsonArrObj, attrList, <span class="hljs-literal">true</span>);
		}
		<span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> arIdx = <span class="hljs-number">0</span>; arIdx &lt; jsonArrRoot.length; arIdx++) {
				result+=startTag(jsonArrRoot[arIdx], jsonArrObj, parseJSONAttributes(jsonArrRoot[arIdx]), <span class="hljs-literal">false</span>);
				result+=parseJSONObject(jsonArrRoot[arIdx]);
				result+=endTag(jsonArrRoot[arIdx],jsonArrObj);						
			}
		}
		<span class="hljs-keyword">return</span> result;
	}
	
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseJSONObject</span> <span class="hljs-params">( jsonObj )</span> {</span>
		<span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>;	

		<span class="hljs-keyword">var</span> elementsCnt = jsonXmlElemCount ( jsonObj );
		
		<span class="hljs-keyword">if</span>(elementsCnt &gt; <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> it <span class="hljs-keyword">in</span> jsonObj ) {
				
				<span class="hljs-keyword">if</span>(jsonXmlSpecialElem ( jsonObj, it) )
					<span class="hljs-keyword">continue</span>;			
				
				<span class="hljs-keyword">var</span> subObj = jsonObj[it];						
				
				<span class="hljs-keyword">var</span> attrList = parseJSONAttributes( subObj )
				
				<span class="hljs-keyword">if</span>(subObj == <span class="hljs-literal">null</span> || subObj == <span class="hljs-literal">undefined</span>) {
					result+=startTag(subObj, it, attrList, <span class="hljs-literal">true</span>);
				}
				<span class="hljs-keyword">else</span>
				<span class="hljs-keyword">if</span>(subObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span>) {
					
					<span class="hljs-keyword">if</span>(subObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) {					
						result+=parseJSONArray( subObj, it, attrList );					
					}
					<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(subObj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) {
						result+=startTag(subObj, it, attrList, <span class="hljs-literal">false</span>);
						result+=subObj.toISOString();
						result+=endTag(subObj,it);
					}
					<span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">var</span> subObjElementsCnt = jsonXmlElemCount ( subObj );
						<span class="hljs-keyword">if</span>(subObjElementsCnt &gt; <span class="hljs-number">0</span> || subObj.__text!=<span class="hljs-literal">null</span> || subObj.__cdata!=<span class="hljs-literal">null</span>) {
							result+=startTag(subObj, it, attrList, <span class="hljs-literal">false</span>);
							result+=parseJSONObject(subObj);
							result+=endTag(subObj,it);
						}
						<span class="hljs-keyword">else</span> {
							result+=startTag(subObj, it, attrList, <span class="hljs-literal">true</span>);
						}
					}
				}
				<span class="hljs-keyword">else</span> {
					result+=startTag(subObj, it, attrList, <span class="hljs-literal">false</span>);
					result+=parseJSONTextObject(subObj);
					result+=endTag(subObj,it);
				}
			}
		}
		result+=parseJSONTextObject(jsonObj);
		
		<span class="hljs-keyword">return</span> result;
	}
	
	<span class="hljs-keyword">this</span>.parseXmlString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(xmlDocStr)</span> {</span>
		<span class="hljs-keyword">var</span> isIEParser = window.ActiveXObject || <span class="hljs-string">"ActiveXObject"</span> <span class="hljs-keyword">in</span> window;
		<span class="hljs-keyword">if</span> (xmlDocStr === <span class="hljs-literal">undefined</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
		}
		<span class="hljs-keyword">var</span> xmlDoc;
		<span class="hljs-keyword">if</span> (window.DOMParser) {
			<span class="hljs-keyword">var</span> parser=<span class="hljs-keyword">new</span> window.DOMParser();			
			<span class="hljs-keyword">var</span> parsererrorNS = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>IE9+ now is here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(!isIEParser) {
				<span class="hljs-keyword">try</span> {
					parsererrorNS = parser.parseFromString(<span class="hljs-string">"INVALID"</span>, <span class="hljs-string">"text/xml"</span>).childNodes[<span class="hljs-number">0</span>].namespaceURI;
				}
				<span class="hljs-keyword">catch</span>(err) {					
					parsererrorNS = <span class="hljs-literal">null</span>;
				}
			}
			<span class="hljs-keyword">try</span> {
				xmlDoc = parser.parseFromString( xmlDocStr, <span class="hljs-string">"text/xml"</span> );
				<span class="hljs-keyword">if</span>( parsererrorNS!= <span class="hljs-literal">null</span> &amp;&amp; xmlDoc.getElementsByTagNameNS(parsererrorNS, <span class="hljs-string">"parsererror"</span>).length &gt; <span class="hljs-number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>throw new Error(‘Error parsing XML: ‘+xmlDocStr);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					xmlDoc = <span class="hljs-literal">null</span>;
				}
			}
			<span class="hljs-keyword">catch</span>(err) {
				xmlDoc = <span class="hljs-literal">null</span>;
			}
		}
		<span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>IE :(</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(xmlDocStr.indexOf(<span class="hljs-string">"&lt;?"</span>)==<span class="hljs-number">0</span>) {
				xmlDocStr = xmlDocStr.substr( xmlDocStr.indexOf(<span class="hljs-string">"?&gt;"</span>) + <span class="hljs-number">2</span> );
			}
			xmlDoc=<span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">"Microsoft.XMLDOM"</span>);
			xmlDoc.async=<span class="hljs-string">"false"</span>;
			xmlDoc.loadXML(xmlDocStr);
		}
		<span class="hljs-keyword">return</span> xmlDoc;
	};
	
	<span class="hljs-keyword">this</span>.asArray = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(prop)</span> {</span>
		<span class="hljs-keyword">if</span>(prop <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>)
			<span class="hljs-keyword">return</span> prop;
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> [prop];
	};
	
	<span class="hljs-keyword">this</span>.toXmlDateTime = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(dt)</span> {</span>
		<span class="hljs-keyword">if</span>(dt <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>)
			<span class="hljs-keyword">return</span> dt.toISOString();
		<span class="hljs-keyword">else</span>
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(dt) === <span class="hljs-string">'number'</span> )
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(dt).toISOString();
		<span class="hljs-keyword">else</span>	
			<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
	};
	
	<span class="hljs-keyword">this</span>.asDateTime = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(prop)</span> {</span>
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(prop) == <span class="hljs-string">"string"</span>) {
			<span class="hljs-keyword">return</span> fromXmlDateTime(prop);
		}
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> prop;
	};

	<span class="hljs-keyword">this</span>.xml2json = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(xmlDoc)</span> {</span>
		<span class="hljs-keyword">return</span> parseDOMChildren ( xmlDoc );
	};
	
	<span class="hljs-keyword">this</span>.xml_str2json = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(xmlDocStr)</span> {</span>
		<span class="hljs-keyword">var</span> xmlDoc = <span class="hljs-keyword">this</span>.parseXmlString(xmlDocStr);
		<span class="hljs-keyword">if</span>(xmlDoc!=<span class="hljs-literal">null</span>)
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.xml2json(xmlDoc);
		<span class="hljs-keyword">else</span>
			<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
	};

	<span class="hljs-keyword">this</span>.json2xml_str = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(jsonObj)</span> {</span>
		<span class="hljs-keyword">return</span> parseJSONObject ( jsonObj );
	};

	<span class="hljs-keyword">this</span>.json2xml = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(jsonObj)</span> {</span>
		<span class="hljs-keyword">var</span> xmlDocStr = <span class="hljs-keyword">this</span>.json2xml_str (jsonObj);
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parseXmlString(xmlDocStr);
	};
	
	<span class="hljs-keyword">this</span>.getVersion = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> VERSION;
	};
	
}


<span class="hljs-comment">/*
* Date Format 1.2.3
* (c) 2007-2009 Steven Levithan &lt;stevenlevithan.com&gt;
* MIT license
*
* Includes enhancements by Scott Trenda &lt;scott.trenda.net&gt;
* and Kris Kowal &lt;cixar.com/~kris.kowal/&gt;
*
* Accepts a date, a mask, or a date and a mask.
* Returns a formatted version of the given date.
* The date defaults to the current date/time.
* The mask defaults to dateFormat.masks.default.
*/</span>

<span class="hljs-keyword">var</span> dateFormat = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">var</span> token = <span class="hljs-regexp">/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g</span>,
		timezone = <span class="hljs-regexp">/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g</span>,
		timezoneClip = <span class="hljs-regexp">/[^-+\dA-Z]/g</span>,
		pad = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(val, len)</span>
		{</span>
		    val = <span class="hljs-built_in">String</span>(val);
		    len = len || <span class="hljs-number">2</span>;
		    <span class="hljs-keyword">while</span> (val.length &lt; len) val = <span class="hljs-string">"0"</span> + val;
		    <span class="hljs-keyword">return</span> val;
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Regexes and supporting functions are cached through closure</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(date, mask, utc)</span>
    {</span>
        <span class="hljs-keyword">var</span> dF = dateFormat;</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>You can’t provide utc if you skip other args (use the “UTC:” mask prefix)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">Object</span>.prototype.toString.call(date) == <span class="hljs-string">"[object String]"</span> &amp;&amp; !<span class="hljs-regexp">/\d/</span>.test(date))
        {
            mask = date;
            date = <span class="hljs-literal">undefined</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Passing date through Date applies Date.parse, if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        date = date ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(date)) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">SyntaxError</span>(<span class="hljs-string">"invalid date"</span>);

        mask = <span class="hljs-built_in">String</span>(dF.masks[mask] || mask || dF.masks[<span class="hljs-string">"default"</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Allow setting the utc argument via the mask</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (mask.slice(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>) == <span class="hljs-string">"UTC:"</span>)
        {
            mask = mask.slice(<span class="hljs-number">4</span>);
            utc = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">var</span> _ = utc ? <span class="hljs-string">"getUTC"</span> : <span class="hljs-string">"get"</span>,
			d = date[_ + <span class="hljs-string">"Date"</span>](),
			D = date[_ + <span class="hljs-string">"Day"</span>](),
			m = date[_ + <span class="hljs-string">"Month"</span>](),
			y = date[_ + <span class="hljs-string">"FullYear"</span>](),
			H = date[_ + <span class="hljs-string">"Hours"</span>](),
			M = date[_ + <span class="hljs-string">"Minutes"</span>](),
			s = date[_ + <span class="hljs-string">"Seconds"</span>](),
			L = date[_ + <span class="hljs-string">"Milliseconds"</span>](),
			o = utc ? <span class="hljs-number">0</span> : date.getTimezoneOffset(),
			flags = {
			    d: d,
			    dd: pad(d),
			    ddd: dF.i18n.dayNames[D],
			    dddd: dF.i18n.dayNames[D + <span class="hljs-number">7</span>],
			    m: m + <span class="hljs-number">1</span>,
			    mm: pad(m + <span class="hljs-number">1</span>),
			    mmm: dF.i18n.monthNames[m],
			    mmmm: dF.i18n.monthNames[m + <span class="hljs-number">12</span>],
			    yy: <span class="hljs-built_in">String</span>(y).slice(<span class="hljs-number">2</span>),
			    yyyy: y,
			    h: H % <span class="hljs-number">12</span> || <span class="hljs-number">12</span>,
			    hh: pad(H % <span class="hljs-number">12</span> || <span class="hljs-number">12</span>),
			    H: H,
			    HH: pad(H),
			    M: M,
			    MM: pad(M),
			    s: s,
			    ss: pad(s),
			    l: pad(L, <span class="hljs-number">3</span>),
			    L: pad(L &gt; <span class="hljs-number">99</span> ? <span class="hljs-built_in">Math</span>.round(L / <span class="hljs-number">10</span>) : L),
			    t: H &lt; <span class="hljs-number">12</span> ? <span class="hljs-string">"a"</span> : <span class="hljs-string">"p"</span>,
			    tt: H &lt; <span class="hljs-number">12</span> ? <span class="hljs-string">"am"</span> : <span class="hljs-string">"pm"</span>,
			    T: H &lt; <span class="hljs-number">12</span> ? <span class="hljs-string">"A"</span> : <span class="hljs-string">"P"</span>,
			    TT: H &lt; <span class="hljs-number">12</span> ? <span class="hljs-string">"AM"</span> : <span class="hljs-string">"PM"</span>,
			    Z: utc ? <span class="hljs-string">"UTC"</span> : (<span class="hljs-built_in">String</span>(date).match(timezone) || [<span class="hljs-string">""</span>]).pop().replace(timezoneClip, <span class="hljs-string">""</span>),
			    o: (o &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"-"</span> : <span class="hljs-string">"+"</span>) + pad(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.abs(o) / <span class="hljs-number">60</span>) * <span class="hljs-number">100</span> + <span class="hljs-built_in">Math</span>.abs(o) % <span class="hljs-number">60</span>, <span class="hljs-number">4</span>),
			    S: [<span class="hljs-string">"th"</span>, <span class="hljs-string">"st"</span>, <span class="hljs-string">"nd"</span>, <span class="hljs-string">"rd"</span>][d % <span class="hljs-number">10</span> &gt; <span class="hljs-number">3</span> ? <span class="hljs-number">0</span> : (d % <span class="hljs-number">100</span> - d % <span class="hljs-number">10</span> != <span class="hljs-number">10</span>) * d % <span class="hljs-number">10</span>]
			};

        <span class="hljs-keyword">return</span> mask.replace(token, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($0)</span>
        {</span>
            <span class="hljs-keyword">return</span> $<span class="hljs-number">0</span> <span class="hljs-keyword">in</span> flags ? flags[$<span class="hljs-number">0</span>] : $<span class="hljs-number">0.</span>slice(<span class="hljs-number">1</span>, $<span class="hljs-number">0.</span>length - <span class="hljs-number">1</span>);
        });
    };
} ();</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Some common format strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>dateFormat.masks = {
    <span class="hljs-string">"default"</span>: <span class="hljs-string">"ddd mmm dd yyyy HH:MM:ss"</span>,
    shortDate: <span class="hljs-string">"m/d/yy"</span>,
    shortDate2: <span class="hljs-string">"mm/dd/yyyy"</span>,
    shortDate3: <span class="hljs-string">"mm/dd/yy"</span>,
    shortDate4: <span class="hljs-string">"mm/yyyy"</span>,
    shortDate5: <span class="hljs-string">"yyyy"</span>,
    mediumDate: <span class="hljs-string">"mmm d, yyyy"</span>,
    longDate: <span class="hljs-string">"mmmm d, yyyy"</span>,
    fullDate: <span class="hljs-string">"dddd, mmmm d, yyyy"</span>,
    shortTime: <span class="hljs-string">"h:MM TT"</span>,
    mediumTime: <span class="hljs-string">"h:MM:ss TT"</span>,
    longTime: <span class="hljs-string">"h:MM:ss TT Z"</span>,
    militaryTime: <span class="hljs-string">"HH:MM"</span>,
    isoDate: <span class="hljs-string">"yyyy-mm-dd"</span>,
    isoTime: <span class="hljs-string">"HH:MM:ss"</span>,
    isoDateTime: <span class="hljs-string">"yyyy-mm-dd'T'HH:MM:ss"</span>,
    isoUtcDateTime: <span class="hljs-string">"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"</span>,
    longDateTime: <span class="hljs-string">"mm/dd/yyyy h:MM:ss TT Z"</span>,
    longDateTime2: <span class="hljs-string">"mm/dd/yy HH:MM"</span>,
    longDateTime3: <span class="hljs-string">"mm/dd/yyyy HH:MM"</span>,
    shortDateTime: <span class="hljs-string">"mm/dd h:MM TT"</span>
};</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Internationalization strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>dateFormat.i18n = {
    dayNames: [
		<span class="hljs-string">"Sun"</span>, <span class="hljs-string">"Mon"</span>, <span class="hljs-string">"Tue"</span>, <span class="hljs-string">"Wed"</span>, <span class="hljs-string">"Thu"</span>, <span class="hljs-string">"Fri"</span>, <span class="hljs-string">"Sat"</span>,
		<span class="hljs-string">"Sunday"</span>, <span class="hljs-string">"Monday"</span>, <span class="hljs-string">"Tuesday"</span>, <span class="hljs-string">"Wednesday"</span>, <span class="hljs-string">"Thursday"</span>, <span class="hljs-string">"Friday"</span>, <span class="hljs-string">"Saturday"</span>
	],
    monthNames: [
		<span class="hljs-string">"Jan"</span>, <span class="hljs-string">"Feb"</span>, <span class="hljs-string">"Mar"</span>, <span class="hljs-string">"Apr"</span>, <span class="hljs-string">"May"</span>, <span class="hljs-string">"Jun"</span>, <span class="hljs-string">"Jul"</span>, <span class="hljs-string">"Aug"</span>, <span class="hljs-string">"Sep"</span>, <span class="hljs-string">"Oct"</span>, <span class="hljs-string">"Nov"</span>, <span class="hljs-string">"Dec"</span>,
		<span class="hljs-string">"January"</span>, <span class="hljs-string">"February"</span>, <span class="hljs-string">"March"</span>, <span class="hljs-string">"April"</span>, <span class="hljs-string">"May"</span>, <span class="hljs-string">"June"</span>, <span class="hljs-string">"July"</span>, <span class="hljs-string">"August"</span>, <span class="hljs-string">"September"</span>, <span class="hljs-string">"October"</span>, <span class="hljs-string">"November"</span>, <span class="hljs-string">"December"</span>
	]
};</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>For convenience…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">Date</span>.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(mask, utc)</span>
{</span>
    <span class="hljs-keyword">return</span> dateFormat(<span class="hljs-keyword">this</span>, mask, utc);
};</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>For i18n formatting…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">Date</span>.prototype.setISO8601 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(string)</span>
{</span>
    <span class="hljs-keyword">var</span> regexp = <span class="hljs-string">"([0-9]{4})(-([0-9]{2})(-([0-9]{2})"</span> +
        <span class="hljs-string">"(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?"</span> +
        <span class="hljs-string">"(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?"</span>;
    <span class="hljs-keyword">var</span> d = string.match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regexp));

    <span class="hljs-keyword">var</span> offset = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(d[<span class="hljs-number">1</span>], <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);

    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">3</span>]) { date.setMonth(d[<span class="hljs-number">3</span>] - <span class="hljs-number">1</span>); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">5</span>]) { date.setDate(d[<span class="hljs-number">5</span>]); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">7</span>]) { date.setHours(d[<span class="hljs-number">7</span>]); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">8</span>]) { date.setMinutes(d[<span class="hljs-number">8</span>]); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">10</span>]) { date.setSeconds(d[<span class="hljs-number">10</span>]); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">12</span>]) { date.setMilliseconds(<span class="hljs-built_in">Number</span>(<span class="hljs-string">"0."</span> + d[<span class="hljs-number">12</span>]) * <span class="hljs-number">1000</span>); }
    <span class="hljs-keyword">if</span> (d[<span class="hljs-number">14</span>])
    {
        offset = (<span class="hljs-built_in">Number</span>(d[<span class="hljs-number">16</span>]) * <span class="hljs-number">60</span>) + <span class="hljs-built_in">Number</span>(d[<span class="hljs-number">17</span>]);
        offset *= ((d[<span class="hljs-number">15</span>] == <span class="hljs-string">'-'</span>) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>);
    }

    offset -= date.getTimezoneOffset();
    time = (<span class="hljs-built_in">Number</span>(date) + (offset * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>));
    <span class="hljs-keyword">this</span>.setTime(<span class="hljs-built_in">Number</span>(time));
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate_time</span><span class="hljs-params">(Obj)</span>
{</span>
    <span class="hljs-keyword">var</span> b = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">var</span> e = window.event;
    <span class="hljs-keyword">var</span> str1, str2, key_code = get_keycode(e), d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">var</span> oElement = window.event.srcElement;
    <span class="hljs-keyword">switch</span> (key_code)
    {
        <span class="hljs-keyword">case</span> <span class="hljs-number">78</span>: <span class="hljs-comment">// n -&gt; current time</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getHours()).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">":"</span> + <span class="hljs-built_in">String</span>(d.getMinutes()).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>);
            <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">if</span> (!window.event.shiftKey &amp;&amp; !window.event.ctrlKey &amp;&amp; !window.event.altKey)
    {
        <span class="hljs-keyword">if</span> ((key_code &gt; <span class="hljs-number">47</span> &amp;&amp; key_code &lt; <span class="hljs-number">58</span>) || (key_code &gt; <span class="hljs-number">95</span> &amp;&amp; key_code &lt; <span class="hljs-number">106</span>))
        {
            <span class="hljs-keyword">if</span> (key_code &gt; <span class="hljs-number">95</span>)
            {
                key_code -= (<span class="hljs-number">95</span> - <span class="hljs-number">47</span>);
            }
            <span class="hljs-keyword">var</span> idx = Obj.value.search(<span class="hljs-regexp">/([*:]*)$/</span>);

            <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">0</span> &amp;&amp;
				(<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> ||
				 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span> ||
				 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'2'</span>))
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isValidTime(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">1</span> &amp;&amp; ((Obj.value.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) == <span class="hljs-string">"1"</span>) || (Obj.value.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) == <span class="hljs-string">"0"</span>) ||
			                       (Obj.value.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) == <span class="hljs-string">"2"</span> &amp;&amp; (<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> ||
			                       										<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span> ||
																		<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'2'</span> ||
																		<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'3'</span>))))
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isValidTime(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">2</span> &amp;&amp;
					(<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'2'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'3'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'4'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'5'</span>))
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isValidTime(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx != <span class="hljs-number">0</span> &amp;&amp; idx != <span class="hljs-number">1</span> &amp;&amp; idx != <span class="hljs-number">2</span>)
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isValidTime(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }

        }
        <span class="hljs-keyword">if</span> (key_code == <span class="hljs-number">8</span>)
        {
            <span class="hljs-keyword">if</span> (!Obj.value.match(<span class="hljs-regexp">/^[*0-9]{2}:[*0-9]{2}$/</span>))
            {
                Obj.value = <span class="hljs-string">"**:**"</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Obj.value.match(<span class="hljs-regexp">/^[*0-9]{2}:[*0-9]{2}$/</span>) &amp;&amp; isTextSelected(Obj))
            {
                Obj.value = <span class="hljs-string">"**:**"</span>;
            }
            <span class="hljs-keyword">var</span> range = document.selection.createRange();
            range.moveStart(<span class="hljs-string">'character'</span>, -Obj.value.length);
            <span class="hljs-keyword">var</span> idx = range.text.length;
            <span class="hljs-keyword">if</span> (Obj.value.charAt(idx - <span class="hljs-number">1</span>) != <span class="hljs-string">":"</span>)
                Obj.value = Obj.value.replaceAt(idx - <span class="hljs-number">1</span>, <span class="hljs-string">"*"</span>);
            $(Obj).setCursorPosition(idx - <span class="hljs-number">1</span>);
            window.event.returnValue = <span class="hljs-number">0</span>;
        }

        <span class="hljs-keyword">if</span> (key_code == <span class="hljs-number">46</span>)
        {
            Obj.value = <span class="hljs-string">"**:**"</span>;
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Obj.value = format_time(Obj.value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (key_code != <span class="hljs-number">9</span> &amp;&amp; key_code != <span class="hljs-number">37</span> &amp;&amp; key_code != <span class="hljs-number">39</span>)
    {
        event.returnValue = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">format_time</span><span class="hljs-params">(val)</span>
{</span>
    <span class="hljs-keyword">var</span> len = val.length;
    <span class="hljs-keyword">var</span> ret = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">switch</span> (len)
    {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            ret = val + <span class="hljs-string">"*:**"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            ret = val + <span class="hljs-string">":**"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
            ret = val + <span class="hljs-string">"**"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
            ret = val;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            ret = <span class="hljs-string">"**:**"</span>;
    }
    <span class="hljs-keyword">return</span> (ret);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_keycode</span><span class="hljs-params">(e)</span>
{</span>
    <span class="hljs-keyword">var</span> characterCode;
    <span class="hljs-keyword">if</span> (e &amp;&amp; e.which)
    { <span class="hljs-comment">// NN4 specific code</span>
        e = e;
        characterCode = e.which;
    }
    <span class="hljs-keyword">else</span>
    {
        characterCode = e.keyCode; <span class="hljs-comment">// IE specific code</span>
    }
    <span class="hljs-keyword">return</span> characterCode;
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysInMonth</span><span class="hljs-params">(iMonth, iYear)</span>
{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">32</span> - <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(iYear, iMonth, <span class="hljs-number">32</span>).getDate();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate_date</span><span class="hljs-params">(Obj)</span>
{</span>
    <span class="hljs-keyword">var</span> e = window.event;
    <span class="hljs-keyword">var</span> key_code = get_keycode(e), d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    <span class="hljs-keyword">switch</span> (key_code)
    {
        <span class="hljs-keyword">case</span> <span class="hljs-number">84</span>: <span class="hljs-comment">//t -&gt; today</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getMonth() + <span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(d.getDate()).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">89</span>: <span class="hljs-comment">//y -&gt; beginning of year</span>
            Obj.value = <span class="hljs-built_in">String</span>(<span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(<span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">82</span>: <span class="hljs-comment">//r -&gt; end of year</span>
            Obj.value = <span class="hljs-built_in">String</span>(<span class="hljs-number">12</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(<span class="hljs-number">31</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">77</span>: <span class="hljs-comment">//m -&gt; beginning of month</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getMonth() + <span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(<span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">72</span>: <span class="hljs-comment">//h -&gt; end of month</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getMonth() + <span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(daysInMonth(d.getMonth(), d.getFullYear())).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">87</span>: <span class="hljs-comment">//w -&gt; beginning of week</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getMonth() + <span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(d.getDate() - d.getDay()).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">75</span>: <span class="hljs-comment">//k -&gt; end of week</span>
            Obj.value = <span class="hljs-built_in">String</span>(d.getMonth() + <span class="hljs-number">1</span>).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + <span class="hljs-built_in">String</span>(d.getDate() + (<span class="hljs-number">6</span> - d.getDay())).padL(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>) + <span class="hljs-string">"/"</span> + d.getFullYear();
            <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-keyword">if</span> (!window.event.shiftKey &amp;&amp; !window.event.ctrlKey &amp;&amp; !window.event.altKey)
    {

        <span class="hljs-keyword">if</span> ((key_code &gt; <span class="hljs-number">47</span> &amp;&amp; key_code &lt; <span class="hljs-number">58</span>) || (key_code &gt; <span class="hljs-number">95</span> &amp;&amp; key_code &lt; <span class="hljs-number">106</span>))
        {
            <span class="hljs-keyword">if</span> (key_code &gt; <span class="hljs-number">95</span>)
            {
                key_code -= (<span class="hljs-number">95</span> - <span class="hljs-number">47</span>);
            }

            <span class="hljs-keyword">var</span> idx = Obj.value.search(<span class="hljs-regexp">/[*]/</span>); <span class="hljs-comment">//(/([*\/]*)[*]([*\/]*)$/);</span>

            <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">0</span> &amp;&amp; (<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> || <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span>))
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));

                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isDate(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">3</span> &amp;&amp;
					(<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'2'</span> ||
					 <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'3'</span>))
            {

                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);

                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isDate(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx == <span class="hljs-number">4</span>)
            {
                <span class="hljs-keyword">if</span> (Obj.value.substring(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) == <span class="hljs-string">'3'</span>)
                {
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'0'</span> || <span class="hljs-built_in">String</span>.fromCharCode(key_code) == <span class="hljs-string">'1'</span>)
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (idx != <span class="hljs-number">0</span> &amp;&amp; idx != <span class="hljs-number">3</span>)
            {
                <span class="hljs-keyword">var</span> test = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                idx = test.search(<span class="hljs-regexp">/[*]/</span>);
                <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>)
                {
                    <span class="hljs-keyword">if</span> (isDate(test))
                    {
                        Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                    }
                }
                <span class="hljs-keyword">else</span>
                {
                    Obj.value = Obj.value.replace(<span class="hljs-regexp">/[*]/</span>, <span class="hljs-built_in">String</span>.fromCharCode(key_code));
                }
            }
        }

        <span class="hljs-keyword">if</span> (key_code == <span class="hljs-number">8</span>)
        {
            <span class="hljs-keyword">if</span> (!Obj.value.match(<span class="hljs-regexp">/^[*0-9]{2}\/[*0-9]{2}\/[*0-9]{4}$/</span>))
            {
                Obj.value = <span class="hljs-string">"**/**/****"</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Obj.value.match(<span class="hljs-regexp">/^[*0-9]{2}\/[*0-9]{2}\/[*0-9]{4}$/</span>) &amp;&amp; isTextSelected(Obj))
            {
                Obj.value = <span class="hljs-string">"**/**/****"</span>;
            }
            <span class="hljs-keyword">var</span> range = document.selection.createRange();
            range.moveStart(<span class="hljs-string">'character'</span>, -Obj.value.length);
            <span class="hljs-keyword">var</span> idx = range.text.length;
            <span class="hljs-keyword">if</span> (Obj.value.charAt(idx - <span class="hljs-number">1</span>) != <span class="hljs-string">"/"</span>)
                Obj.value = Obj.value.replaceAt(idx - <span class="hljs-number">1</span>, <span class="hljs-string">"*"</span>);
            $(Obj).setCursorPosition(idx - <span class="hljs-number">1</span>);
            window.event.returnValue = <span class="hljs-number">0</span>;
        }

        <span class="hljs-keyword">if</span> (key_code == <span class="hljs-number">46</span>)
        {
            Obj.value = <span class="hljs-string">"**/**/****"</span>;
        }
    }

    <span class="hljs-keyword">if</span> (key_code != <span class="hljs-number">9</span> &amp;&amp; key_code != <span class="hljs-number">37</span> &amp;&amp; key_code != <span class="hljs-number">39</span>)
    {
        event.returnValue = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-built_in">String</span>.prototype.replaceAt = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index, char)</span>
{</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.substr(<span class="hljs-number">0</span>, index) + char + <span class="hljs-keyword">this</span>.substr(index + char.length);
}



<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isTextSelected</span><span class="hljs-params">(input)</span>
{</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input.selectionStart == <span class="hljs-string">"number"</span>)
    {
        <span class="hljs-keyword">return</span> input.selectionStart == <span class="hljs-number">0</span> &amp;&amp; input.selectionEnd == input.value.length;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> document.selection != <span class="hljs-string">"undefined"</span>)
    {
        input.focus();
        <span class="hljs-keyword">return</span> document.selection.createRange().text == input.value;
    }
}

<span class="hljs-built_in">String</span>.prototype.padL = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(nLength, sChar)</span>
{</span>
    <span class="hljs-keyword">var</span> sreturn = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">while</span> (sreturn.length &lt; nLength)
    {
        sreturn = <span class="hljs-built_in">String</span>(sChar) + sreturn;
    }
    <span class="hljs-keyword">return</span> sreturn;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NumOnly</span><span class="hljs-params">()</span>
{</span>
    <span class="hljs-keyword">if</span> (window.event.srcElement.readOnly)
    {
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> oElement = window.event.srcElement;
    <span class="hljs-keyword">var</span> key_code = window.event.keyCode;
    <span class="hljs-keyword">if</span> ((key_code &gt; <span class="hljs-number">58</span> || key_code &lt; <span class="hljs-number">47</span>) &amp;&amp; key_code != <span class="hljs-number">8</span> &amp;&amp; key_code != <span class="hljs-number">46</span> &amp;&amp; key_code != <span class="hljs-number">37</span> &amp;&amp; key_code != <span class="hljs-number">39</span> &amp;&amp; key_code != <span class="hljs-number">9</span>)
    {
        window.event.returnValue = <span class="hljs-number">0</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span><span class="hljs-params">(txtDate)</span>
{</span>
    <span class="hljs-keyword">var</span> objDate,  <span class="hljs-comment">// date object initialized from the txtDate string</span>
        mSeconds, <span class="hljs-comment">// txtDate in milliseconds</span>
        day,      <span class="hljs-comment">// day</span>
        month,    <span class="hljs-comment">// month</span>
        year;     <span class="hljs-comment">// year</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>extract month, day and year from the txtDate (expected format is mm/dd/yyyy)
subtraction will cast variables to integer implicitly (needed
for !== comparing)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    month = txtDate.substring(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>; <span class="hljs-comment">// because months in JS start from 0</span>
    day = txtDate.substring(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) - <span class="hljs-number">0</span>;
    year = txtDate.substring(<span class="hljs-number">6</span>, <span class="hljs-number">10</span>) - <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>convert txtDate to milliseconds</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mSeconds = (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, day)).getTime();</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>initialize Date() object from calculated milliseconds</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    objDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
    objDate.setTime(mSeconds);</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>compare input date and parts from Date() object
if difference exists then date isn’t valid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (objDate.getFullYear() !== year ||
        objDate.getMonth() !== month ||
        objDate.getDate() !== day)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>otherwise return true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidTime</span><span class="hljs-params">(inputTime)</span>
{</span>
    <span class="hljs-keyword">var</span> splittime = inputTime.split(<span class="hljs-string">":"</span>);
    <span class="hljs-keyword">if</span> (splittime[<span class="hljs-number">0</span>] &gt; <span class="hljs-number">23</span> || splittime[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">59</span>)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($)</span>
{</span>
    $.fn.setCursorPosition = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(pos)</span>
    {</span>
        <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).get(<span class="hljs-number">0</span>).setSelectionRange)
        {
            $(<span class="hljs-keyword">this</span>).get(<span class="hljs-number">0</span>).setSelectionRange(pos, pos);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).get(<span class="hljs-number">0</span>).createTextRange)
        {
            <span class="hljs-keyword">var</span> range = $(<span class="hljs-keyword">this</span>).get(<span class="hljs-number">0</span>).createTextRange();
            range.collapse(<span class="hljs-literal">true</span>);
            range.moveEnd(<span class="hljs-string">'character'</span>, pos);
            range.moveStart(<span class="hljs-string">'character'</span>, pos);
            range.select();
        }
    }
} (jQuery);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
