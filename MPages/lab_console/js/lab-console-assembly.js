/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left");
}catch(a){setTimeout(ma,1);
return;
}c.ready();
}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");
b.parentNode&&b.parentNode.removeChild(b);
}function X(a,b,d,f,e,j){var i=a.length;
if(typeof b==="object"){for(var o in b){X(a,o,b[o],f,e,d);
}return a;
}if(d!==w){f=!j&&f&&c.isFunction(d);
for(o=0;
o<i;
o++){e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);
}return a;
}return i?e(a[0],b):w;
}function J(){return(new Date).getTime();
}function Y(){return false;
}function Z(){return true;
}function na(a,b,d){d[0].type=a;
return c.event.handle.apply(b,d);
}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;
i=c.data(this,"events");
if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;
var u=i.live.slice(0);
for(k=0;
k<u.length;
k++){i=u[k];
i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1);
}j=c(a.target).closest(f,a.currentTarget);
n=0;
for(r=j.length;
n<r;
n++){for(k=0;
k<u.length;
k++){i=u[k];
if(j[n].selector===i.selector){o=j[n].elem;
f=null;
if(i.preType==="mouseenter"||i.preType==="mouseleave"){f=c(a.relatedTarget).closest(i.selector)[0];
}if(!f||f!==o){d.push({elem:o,handleObj:i});
}}}}n=0;
for(r=d.length;
n<r;
n++){j=d[n];
a.currentTarget=j.elem;
a.data=j.handleObj.data;
a.handleObj=j.handleObj;
if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;
break;
}}return b;
}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,"&");
}function qa(a){return !a||!a.parentNode||a.parentNode.nodeType===11;
}function ra(a,b){var d=0;
b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);
if(f=f&&f.events){delete e.handle;
e.events={};
for(var j in f){for(var i in f[j]){c.event.add(this,j,f[j][i],f[j][i].data);
}}}}});
}function sa(a,b,d){var f,e,j;
b=b&&b[0]?b[0].ownerDocument||b[0]:s;
if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=true;
if(j=c.fragments[a[0]]){if(j!==1){f=j;
}}}if(!f){f=b.createDocumentFragment();
c.clean(a,b,f,d);
}if(e){c.fragments[a[0]]=j?f:1;
}return{fragment:f,cacheable:e};
}function K(a,b){var d={};
c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a;
});
return d;
}function wa(a){return"scrollTo" in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false;
}var c=function(a,b){return new c.fn.init(a,b);
},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;
c.fn=c.prototype={init:function(a,b){var d,f;
if(!a){return this;
}if(a.nodeType){this.context=this[0]=a;
this.length=1;
return this;
}if(a==="body"&&!b){this.context=s;
this[0]=s.body;
this.selector="body";
this.length=1;
return this;
}if(typeof a==="string"){if((d=Ta.exec(a))&&(d[1]||!b)){if(d[1]){f=b?b.ownerDocument||b:s;
if(a=Xa.exec(a)){if(c.isPlainObject(b)){a=[s.createElement(a[1])];
c.fn.attr.call(a,b,true);
}else{a=[f.createElement(a[1])];
}}else{a=sa([d[1]],[f]);
a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes;
}return c.merge(this,a);
}else{if(b=s.getElementById(d[2])){if(b.id!==d[2]){return T.find(a);
}this.length=1;
this[0]=b;
}this.context=s;
this.selector=a;
return this;
}}else{if(!b&&/^\w+$/.test(a)){this.selector=a;
this.context=s;
a=s.getElementsByTagName(a);
return c.merge(this,a);
}else{return !b||b.jquery?(b||T).find(a):c(b).find(a);
}}}else{if(c.isFunction(a)){return T.ready(a);
}}if(a.selector!==w){this.selector=a.selector;
this.context=a.context;
}return c.makeArray(a,this);
},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length;
},toArray:function(){return R.call(this,0);
},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a];
},pushStack:function(a,b,d){var f=c();
c.isArray(a)?ba.apply(f,a):c.merge(f,a);
f.prevObject=this;
f.context=this.context;
if(b==="find"){f.selector=this.selector+(this.selector?" ":"")+d;
}else{if(b){f.selector=this.selector+"."+b+"("+d+")";
}}return f;
},each:function(a,b){return c.each(this,a,b);
},ready:function(a){c.bindReady();
if(c.isReady){a.call(s,c);
}else{Q&&Q.push(a);
}return this;
},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1);
},first:function(){return this.eq(0);
},last:function(){return this.eq(-1);
},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","));
},map:function(a){return this.pushStack(c.map(this,function(b,d){return a.call(b,d,b);
}));
},end:function(){return this.prevObject||c(null);
},push:ba,sort:[].sort,splice:[].splice};
c.fn.init.prototype=c.fn;
c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;
if(typeof a==="boolean"){f=a;
a=arguments[1]||{};
b=2;
}if(typeof a!=="object"&&!c.isFunction(a)){a={};
}if(d===b){a=this;
--b;
}for(;
b<d;
b++){if((e=arguments[b])!=null){for(j in e){i=a[j];
o=e[j];
if(a!==o){if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||c.isArray(i))?i:c.isArray(o)?[]:{};
a[j]=c.extend(f,i,o);
}else{if(o!==w){a[j]=o;
}}}}}}return a;
};
c.extend({noConflict:function(a){A.$=Sa;
if(a){A.jQuery=Ra;
}return c;
},isReady:false,ready:function(){if(!c.isReady){if(!s.body){return setTimeout(c.ready,13);
}c.isReady=true;
if(Q){for(var a,b=0;
a=Q[b++];
){a.call(s,c);
}Q=null;
}c.fn.triggerHandler&&c(s).triggerHandler("ready");
}},bindReady:function(){if(!xa){xa=true;
if(s.readyState==="complete"){return c.ready();
}if(s.addEventListener){s.addEventListener("DOMContentLoaded",L,false);
A.addEventListener("load",c.ready,false);
}else{if(s.attachEvent){s.attachEvent("onreadystatechange",L);
A.attachEvent("onload",c.ready);
var a=false;
try{a=A.frameElement==null;
}catch(b){}s.documentElement.doScroll&&a&&ma();
}}}},isFunction:function(a){return $.call(a)==="[object Function]";
},isArray:function(a){return $.call(a)==="[object Array]";
},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval){return false;
}if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,"isPrototypeOf")){return false;
}var b;
for(b in a){}return b===w||aa.call(a,b);
},isEmptyObject:function(a){for(var b in a){return false;
}return true;
},error:function(a){throw a;
},parseJSON:function(a){if(typeof a!=="string"||!a){return null;
}a=c.trim(a);
if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+a))();
}else{c.error("Invalid JSON: "+a);
}},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");
d.type="text/javascript";
if(c.support.scriptEval){d.appendChild(s.createTextNode(a));
}else{d.text=a;
}b.insertBefore(d,b.firstChild);
b.removeChild(d);
}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase();
},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);
if(d){if(i){for(f in a){if(b.apply(a[f],d)===false){break;
}}}else{for(;
e<j;
){if(b.apply(a[e++],d)===false){break;
}}}}else{if(i){for(f in a){if(b.call(a[f],f,a[f])===false){break;
}}}else{for(d=a[0];
e<j&&b.call(d,e,d)!==false;
d=a[++e]){}}}return a;
},trim:function(a){return(a||"").replace(Wa,"");
},makeArray:function(a,b){b=b||[];
if(a!=null){a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);
}return b;
},inArray:function(a,b){if(b.indexOf){return b.indexOf(a);
}for(var d=0,f=b.length;
d<f;
d++){if(b[d]===a){return d;
}}return -1;
},merge:function(a,b){var d=a.length,f=0;
if(typeof b.length==="number"){for(var e=b.length;
f<e;
f++){a[d++]=b[f];
}}else{for(;
b[f]!==w;
){a[d++]=b[f++];
}}a.length=d;
return a;
},grep:function(a,b,d){for(var f=[],e=0,j=a.length;
e<j;
e++){!d!==!b(a[e],e)&&f.push(a[e]);
}return f;
},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;
j<i;
j++){e=b(a[j],j,d);
if(e!=null){f[f.length]=e;
}}return f.concat.apply([],f);
},guid:1,proxy:function(a,b,d){if(arguments.length===2){if(typeof b==="string"){d=a;
a=d[b];
b=w;
}else{if(b&&!c.isFunction(b)){d=b;
b=w;
}}}if(!b&&a){b=function(){return a.apply(d||this,arguments);
};
}if(a){b.guid=a.guid=a.guid||b.guid||c.guid++;
}return b;
},uaMatch:function(a){a=a.toLowerCase();
a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];
return{browser:a[1]||"",version:a[2]||"0"};
},browser:{}});
P=c.uaMatch(P);
if(P.browser){c.browser[P.browser]=true;
c.browser.version=P.version;
}if(c.browser.webkit){c.browser.safari=true;
}if(ya){c.inArray=function(a,b){return ya.call(b,a);
};
}T=c(s);
if(s.addEventListener){L=function(){s.removeEventListener("DOMContentLoaded",L,false);
c.ready();
};
}else{if(s.attachEvent){L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);
c.ready();
}};
}}(function(){c.support={};
var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();
d.style.display="none";
d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];
if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};
b.type="text/javascript";
try{b.appendChild(s.createTextNode("window."+f+"=1;"));
}catch(i){}a.insertBefore(b,a.firstChild);
if(A[f]){c.support.scriptEval=true;
delete A[f];
}try{delete b.test;
}catch(o){c.support.deleteExpando=false;
}a.removeChild(b);
if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=false;
d.detachEvent("onclick",k);
});
d.cloneNode(true).fireEvent("onclick");
}d=s.createElement("div");
d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";
a=s.createDocumentFragment();
a.appendChild(d.firstChild);
c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;
c(function(){var k=s.createElement("div");
k.style.width=k.style.paddingLeft="1px";
s.body.appendChild(k);
c.boxModel=c.support.boxModel=k.offsetWidth===2;
s.body.removeChild(k).style.display="none";
});
a=function(k){var n=s.createElement("div");
k="on"+k;
var r=k in n;
if(!r){n.setAttribute(k,"return;");
r=typeof n[k]==="function";
}return r;
};
c.support.submitBubbles=a("submit");
c.support.changeBubbles=a("change");
a=b=d=e=j=null;
}})();
c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};
var G="jQuery"+J(),Ya=0,za={};
c.extend({cache:{},expando:G,noData:{embed:true,object:true,applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var f=a[G],e=c.cache;
if(!f&&typeof b==="string"&&d===w){return null;
}f||(f=++Ya);
if(typeof b==="object"){a[G]=f;
e[f]=c.extend(true,{},b);
}else{if(!e[f]){a[G]=f;
e[f]={};
}}a=e[f];
if(d!==w){a[b]=d;
}return typeof b==="string"?a[b]:a;
}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;
var d=a[G],f=c.cache,e=f[d];
if(b){if(e){delete e[b];
c.isEmptyObject(e)&&c.removeData(a);
}}else{if(c.support.deleteExpando){delete a[c.expando];
}else{a.removeAttribute&&a.removeAttribute(c.expando);
}delete f[d];
}}}});
c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length){return c.data(this[0]);
}else{if(typeof a==="object"){return this.each(function(){c.data(this,a);
});
}}var d=a.split(".");
d[1]=d[1]?"."+d[1]:"";
if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);
if(f===w&&this.length){f=c.data(this[0],a);
}return f===w&&d[1]?this.data(d[0]):f;
}else{return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,a,b);
});
}},removeData:function(a){return this.each(function(){c.removeData(this,a);
});
}});
c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";
var f=c.data(a,b);
if(!d){return f||[];
}if(!f||c.isArray(d)){f=c.data(a,b,c.makeArray(d));
}else{f.push(d);
}return f;
}},dequeue:function(a,b){b=b||"fx";
var d=c.queue(a,b),f=d.shift();
if(f==="inprogress"){f=d.shift();
}if(f){b==="fx"&&d.unshift("inprogress");
f.call(a,function(){c.dequeue(a,b);
});
}}});
c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;
a="fx";
}if(b===w){return c.queue(this[0],a);
}return this.each(function(){var d=c.queue(this,a,b);
a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a);
});
},dequeue:function(a){return this.each(function(){c.dequeue(this,a);
});
},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;
b=b||"fx";
return this.queue(b,function(){var d=this;
setTimeout(function(){c.dequeue(d,b);
},a);
});
},clearQueue:function(a){return this.queue(a||"fx",[]);
}});
var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,cb=/^(a|area)$/i,Ba=/radio|checkbox/;
c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr);
},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");
this.nodeType===1&&this.removeAttribute(a);
});
},addClass:function(a){if(c.isFunction(a)){return this.each(function(n){var r=c(this);
r.addClass(a.call(this,n,r.attr("class")));
});
}if(a&&typeof a==="string"){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1){if(e.className){for(var j=" "+e.className+" ",i=e.className,o=0,k=b.length;
o<k;
o++){if(j.indexOf(" "+b[o]+" ")<0){i+=" "+b[o];
}}e.className=c.trim(i);
}else{e.className=a;
}}}}return this;
},removeClass:function(a){if(c.isFunction(a)){return this.each(function(k){var n=c(this);
n.removeClass(a.call(this,k,n.attr("class")));
});
}if(a&&typeof a==="string"||a===w){for(var b=(a||"").split(ca),d=0,f=this.length;
d<f;
d++){var e=this[d];
if(e.nodeType===1&&e.className){if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;
i<o;
i++){j=j.replace(" "+b[i]+" "," ");
}e.className=c.trim(j);
}else{e.className="";
}}}}return this;
},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";
if(c.isFunction(a)){return this.each(function(e){var j=c(this);
j.toggleClass(a.call(this,e,j.attr("class"),b),b);
});
}return this.each(function(){if(d==="string"){for(var e,j=0,i=c(this),o=b,k=a.split(ca);
e=k[j++];
){o=f?o:!i.hasClass(e);
i[o?"addClass":"removeClass"](e);
}}else{if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);
this.className=this.className||a===false?"":c.data(this,"__className__")||"";
}}});
},hasClass:function(a){a=" "+a+" ";
for(var b=0,d=this.length;
b<d;
b++){if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1){return true;
}}return false;
},val:function(a){if(a===w){var b=this[0];
if(b){if(c.nodeName(b,"option")){return(b.attributes.value||{}).specified?b.value:b.text;
}if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;
b=b.type==="select-one";
if(d<0){return null;
}var j=b?d:0;
for(d=b?d+1:e.length;
j<d;
j++){var i=e[j];
if(i.selected){a=c(i).val();
if(b){return a;
}f.push(a);
}}return f;
}if(Ba.test(b.type)&&!c.support.checkOn){return b.getAttribute("value")===null?"on":b.value;
}return(b.value||"").replace(Za,"");
}return w;
}var o=c.isFunction(a);
return this.each(function(k){var n=c(this),r=a;
if(this.nodeType===1){if(o){r=a.call(this,k,n.val());
}if(typeof r==="number"){r+="";
}if(c.isArray(r)&&Ba.test(this.type)){this.checked=c.inArray(n.val(),r)>=0;
}else{if(c.nodeName(this,"select")){var u=c.makeArray(r);
c("option",this).each(function(){this.selected=c.inArray(c(this).val(),u)>=0;
});
if(!u.length){this.selectedIndex=-1;
}}else{this.value=r;
}}}});
}});
c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if(f&&b in c.attrFn){return c(a)[b](d);
}f=a.nodeType!==1||!c.isXMLDoc(a);
var e=d!==w;
b=f&&c.props[b]||b;
if(a.nodeType===1){var j=$a.test(b);
if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d;
}if(c.nodeName(a,"form")&&a.getAttributeNode(b)){return a.getAttributeNode(b).nodeValue;
}if(b==="tabIndex"){return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;
}return a[b];
}if(!c.support.style&&f&&b==="style"){if(e){a.style.cssText=""+d;
}return a.style.cssText;
}e&&a.setAttribute(b,""+d);
a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);
return a===null?w:a;
}return c.style(a,b,d);
}});
var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,function(b){return"\\"+b;
});
};
c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement){a=A;
}var e,j;
if(d.handler){e=d;
d=e.handler;
}if(!d.guid){d.guid=c.guid++;
}if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;
if(!o){j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w;
};
}o.elem=a;
b=b.split(" ");
for(var k,n=0,r;
k=b[n++];
){j=e?c.extend({},e):{handler:d,data:f};
if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();
j.namespace=r.slice(0).sort().join(".");
}else{r=[];
j.namespace="";
}j.type=k;
j.guid=d.guid;
var u=i[k],z=c.event.special[k]||{};
if(!u){u=i[k]=[];
if(!z.setup||z.setup.call(a,f,r,o)===false){if(a.addEventListener){a.addEventListener(k,o,false);
}else{a.attachEvent&&a.attachEvent("on"+k,o);
}}}if(z.add){z.add.call(a,j);
if(!j.handler.guid){j.handler.guid=d.guid;
}}u.push(j);
c.event.global[k]=true;
}a=null;
}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),C=z&&z.events;
if(z&&C){if(b&&b.type){d=b.handler;
b=b.type;
}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";
for(e in C){c.event.remove(a,e+b);
}}else{for(b=b.split(" ");
e=b[j++];
){n=e;
i=e.indexOf(".")<0;
o=[];
if(!i){o=e.split(".");
e=o.shift();
k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)");
}if(r=C[e]){if(d){n=c.event.special[e]||{};
for(B=f||0;
B<r.length;
B++){u=r[B];
if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);
n.remove&&n.remove.call(a,u);
}if(f!=null){break;
}}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false){Ca(a,e,z.handle);
}delete C[e];
}}else{for(var B=0;
B<r.length;
B++){u=r[B];
if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);
r.splice(B--,1);
}}}}}if(c.isEmptyObject(C)){if(b=z.handle){b.elem=null;
}delete z.events;
delete z.handle;
c.isEmptyObject(z)&&c.removeData(a);
}}}}},trigger:function(a,b,d,f){var e=a.type||a;
if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);
if(e.indexOf("!")>=0){a.type=e=e.slice(0,-1);
a.exclusive=true;
}if(!d){a.stopPropagation();
c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem);
});
}if(!d||d.nodeType===3||d.nodeType===8){return w;
}a.result=w;
a.target=d;
b=c.makeArray(b);
b.unshift(a);
}a.currentTarget=d;
(f=c.data(d,"handle"))&&f.apply(d,b);
f=d.parentNode||d.ownerDocument;
try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()])){if(d["on"+e]&&d["on"+e].apply(d,b)===false){a.result=false;
}}}catch(j){}if(!a.isPropagationStopped()&&f){c.event.trigger(a,b,f,true);
}else{if(!a.isDefaultPrevented()){f=a.target;
var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};
if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e]){f["on"+e]=null;
}c.event.triggered=true;
f[e]();
}}catch(n){}if(i){f["on"+e]=i;
}c.event.triggered=false;
}}}},handle:function(a){var b,d,f,e;
a=arguments[0]=c.event.fix(a||A.event);
a.currentTarget=this;
b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");
a.type=d.shift();
f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");
}e=c.data(this,"events");
d=e[a.type];
if(e&&d){d=d.slice(0);
e=0;
for(var j=d.length;
e<j;
e++){var i=d[e];
if(b||f.test(i.namespace)){a.handler=i.handler;
a.data=i.data;
a.handleObj=i;
i=i.handler.apply(this,arguments);
if(i!==w){a.result=i;
if(i===false){a.preventDefault();
a.stopPropagation();
}}if(a.isImmediatePropagationStopped()){break;
}}}}return a.result;
},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[G]){return a;
}var b=a;
a=c.Event(b);
for(var d=this.props.length,f;
d;
){f=this.props[--d];
a[f]=b[f];
}if(!a.target){a.target=a.srcElement||s;
}if(a.target.nodeType===3){a.target=a.target.parentNode;
}if(!a.relatedTarget&&a.fromElement){a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;
}if(a.pageX==null&&a.clientX!=null){b=s.documentElement;
d=s.body;
a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);
a.pageY=a.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0);
}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode)){a.which=a.charCode||a.keyCode;
}if(!a.metaKey&&a.ctrlKey){a.metaKey=a.ctrlKey;
}if(!a.which&&a.button!==w){a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;
}return a;
},guid:100000000,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}));
},remove:function(a){var b=true,d=a.origType.replace(O,"");
c.each(c.data(this,"events").live||[],function(){if(d===this.origType.replace(O,"")){return b=false;
}});
b&&c.event.remove(this,a.origType,oa);
}},beforeunload:{setup:function(a,b,d){if(this.setInterval){this.onbeforeunload=d;
}return false;
},teardown:function(a,b){if(this.onbeforeunload===b){this.onbeforeunload=null;
}}}}};
var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false);
}:function(a,b,d){a.detachEvent("on"+b,d);
};
c.Event=function(a){if(!this.preventDefault){return new c.Event(a);
}if(a&&a.type){this.originalEvent=a;
this.type=a.type;
}else{this.type=a;
}this.timeStamp=J();
this[G]=true;
};
c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;
var a=this.originalEvent;
if(a){a.preventDefault&&a.preventDefault();
a.returnValue=false;
}},stopPropagation:function(){this.isPropagationStopped=Z;
var a=this.originalEvent;
if(a){a.stopPropagation&&a.stopPropagation();
a.cancelBubble=true;
}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;
this.stopPropagation();
},isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y};
var Da=function(a){var b=a.relatedTarget;
try{for(;
b&&b!==this;
){b=b.parentNode;
}if(b!==this){a.type=a.data;
c.event.handle.apply(this,arguments);
}}catch(d){}},Ea=function(a){a.type=a.data;
c.event.handle.apply(this,arguments);
};
c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a);
},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da);
}};
});
if(!c.support.submitBubbles){c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="submit"||d==="image")&&c(b).closest("form").length){return na("submit",this,arguments);
}});
c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;
if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13){return na("submit",this,arguments);
}});
}else{return false;
}},teardown:function(){c.event.remove(this,".specialSubmit");
}};
}if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;
if(b==="radio"||b==="checkbox"){d=a.checked;
}else{if(b==="select-multiple"){d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected;
}).join("-"):"";
}else{if(a.nodeName.toLowerCase()==="select"){d=a.selectedIndex;
}}}return d;
},fa=function(a,b){var d=a.target,f,e;
if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");
e=Fa(d);
if(a.type!=="focusout"||d.type!=="radio"){c.data(d,"_change_data",e);
}if(!(f===w||e===f)){if(f!=null||e){a.type="change";
return c.event.trigger(a,b,d);
}}}};
c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;
if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select"){return fa.call(this,a);
}},keydown:function(a){var b=a.target,d=b.type;
if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple"){return fa.call(this,a);
}},beforeactivate:function(a){a=a.target;
c.data(a,"_change_data",Fa(a));
}},setup:function(){if(this.type==="file"){return false;
}for(var a in ea){c.event.add(this,a+".specialChange",ea[a]);
}return da.test(this.nodeName);
},teardown:function(){c.event.remove(this,".specialChange");
return da.test(this.nodeName);
}};
ea=c.event.special.change.filters;
}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);
f.type=b;
return c.event.handle.call(this,f);
}c.event.special[b]={setup:function(){this.addEventListener(a,d,true);
},teardown:function(){this.removeEventListener(a,d,true);
}};
});
c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d){this[b](j,f,d[j],e);
}return this;
}if(c.isFunction(f)){e=f;
f=w;
}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);
return e.apply(this,arguments);
}):e;
if(d==="unload"&&b!=="one"){this.one(d,f,e);
}else{j=0;
for(var o=this.length;
j<o;
j++){c.event.add(this[j],d,i,f);
}}return this;
};
});
c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault){for(var d in a){this.unbind(d,a[d]);
}}else{d=0;
for(var f=this.length;
d<f;
d++){c.event.remove(this[d],a,b);
}}return this;
},delegate:function(a,b,d,f){return this.live(b,d,f,a);
},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a);
},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this);
});
},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);
a.preventDefault();
a.stopPropagation();
c.event.trigger(a,b,this[0]);
return a.result;
}},toggle:function(a){for(var b=arguments,d=1;
d<b.length;
){c.proxy(a,b[d++]);
}return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;
c.data(this,"lastToggle"+a.guid,e+1);
f.preventDefault();
return b[e].apply(this,arguments)||false;
}));
},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);
}});
var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,u=j?this:c(this.context);
if(c.isFunction(f)){e=f;
f=w;
}for(d=(d||"").split(" ");
(i=d[o++])!=null;
){j=O.exec(i);
k="";
if(j){k=j[0];
i=i.replace(O,"");
}if(i==="hover"){d.push("mouseenter"+k,"mouseleave"+k);
}else{n=i;
if(i==="focus"||i==="blur"){d.push(Ga[i]+k);
i+=k;
}else{i=(Ga[i]||i)+k;
}b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n});
}):u.unbind(pa(i,r),e);
}}return this;
};
});
c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b);
};
if(c.attrFn){c.attrFn[b]=true;
}});
A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache){if(c.cache[a].handle){try{c.event.remove(c.cache[a].handle.elem);
}catch(b){}}}});
(function(){function a(g){for(var h="",l,m=0;
g[m];
m++){l=g[m];
if(l.nodeType===3||l.nodeType===4){h+=l.nodeValue;
}else{if(l.nodeType!==8){h+=a(l.childNodes);
}}}return h;
}function b(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1&&!p){t.sizcache=l;
t.sizset=q;
}if(t.nodeName.toLowerCase()===h){y=t;
break;
}t=t[g];
}m[q]=y;
}}}function d(g,h,l,m,q,p){q=0;
for(var v=m.length;
q<v;
q++){var t=m[q];
if(t){t=t[g];
for(var y=false;
t;
){if(t.sizcache===l){y=m[t.sizset];
break;
}if(t.nodeType===1){if(!p){t.sizcache=l;
t.sizset=q;
}if(typeof h!=="string"){if(t===h){y=true;
break;
}}else{if(k.filter(h,[t]).length>0){y=t;
break;
}}}t=t[g];
}m[q]=y;
}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,j=Object.prototype.toString,i=false,o=true;
[0,0].sort(function(){o=false;
return 0;
});
var k=function(g,h,l,m){l=l||[];
var q=h=h||s;
if(h.nodeType!==1&&h.nodeType!==9){return[];
}if(!g||typeof g!=="string"){return l;
}for(var p=[],v,t,y,S,H=true,M=x(h),I=g;
(f.exec(""),v=f.exec(I))!==null;
){I=v[3];
p.push(v[1]);
if(v[2]){S=v[3];
break;
}}if(p.length>1&&r.exec(g)){if(p.length===2&&n.relative[p[0]]){t=ga(p[0]+p[1],h);
}else{for(t=n.relative[p[0]]?[h]:k(p.shift(),h);
p.length;
){g=p.shift();
if(n.relative[g]){g+=p.shift();
}t=ga(g,t);
}}}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);
h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0];
}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);
t=v.expr?k.filter(v.expr,v.set):v.set;
if(p.length>0){y=z(t);
}else{H=false;
}for(;
p.length;
){var D=p.pop();
v=D;
if(n.relative[D]){v=p.pop();
}else{D="";
}if(v==null){v=h;
}n.relative[D](y,v,M);
}}else{y=[];
}}y||(y=t);
y||k.error(D||g);
if(j.call(y)==="[object Array]"){if(H){if(h&&h.nodeType===1){for(g=0;
y[g]!=null;
g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g]))){l.push(t[g]);
}}}else{for(g=0;
y[g]!=null;
g++){y[g]&&y[g].nodeType===1&&l.push(t[g]);
}}}else{l.push.apply(l,y);
}}else{z(y,l);
}if(S){k(S,q,l,m);
k.uniqueSort(l);
}return l;
};
k.uniqueSort=function(g){if(B){i=o;
g.sort(B);
if(i){for(var h=1;
h<g.length;
h++){g[h]===g[h-1]&&g.splice(h--,1);
}}}return g;
};
k.matches=function(g,h){return k(g,null,null,h);
};
k.find=function(g,h,l){var m,q;
if(!g){return[];
}for(var p=0,v=n.order.length;
p<v;
p++){var t=n.order[p];
if(q=n.leftMatch[t].exec(g)){var y=q[1];
q.splice(1,1);
if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");
m=n.find[t](q,h,l);
if(m!=null){g=g.replace(n.match[t],"");
break;
}}}}m||(m=h.getElementsByTagName("*"));
return{set:m,expr:g};
};
k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);
g&&h.length;
){for(var H in n.filter){if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;
D=t[1];
y=false;
t.splice(1,1);
if(D.substr(D.length-1)!=="\\"){if(v===p){p=[];
}if(n.preFilter[H]){if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true){continue;
}}else{y=I=true;
}}if(t){for(var U=0;
(D=v[U])!=null;
U++){if(D){I=M(D,t,U,v);
var Ha=m^!!I;
if(l&&I!=null){if(Ha){y=true;
}else{v[U]=false;
}}else{if(Ha){p.push(D);
y=true;
}}}}}if(I!==w){l||(v=p);
g=g.replace(n.match[H],"");
if(!y){return[];
}break;
}}}}if(g===q){if(y==null){k.error(g);
}else{break;
}}q=g;
}return v;
};
k.error=function(g){throw"Syntax error, unrecognized expression: "+g;
};
var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href");
}},relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);
l=l&&!m;
if(m){h=h.toLowerCase();
}m=0;
for(var q=g.length,p;
m<q;
m++){if(p=g[m]){for(;
(p=p.previousSibling)&&p.nodeType!==1;
){}g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h;
}}l&&k.filter(h,g,true);
},">":function(g,h){var l=typeof h==="string";
if(l&&!/\W/.test(h)){h=h.toLowerCase();
for(var m=0,q=g.length;
m<q;
m++){var p=g[m];
if(p){l=p.parentNode;
g[m]=l.nodeName.toLowerCase()===h?l:false;
}}}else{m=0;
for(q=g.length;
m<q;
m++){if(p=g[m]){g[m]=l?p.parentNode:p.parentNode===h;
}}l&&k.filter(h,g,true);
}},"":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("parentNode",h,m,g,p,l);
},"~":function(g,h,l){var m=e++,q=d;
if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();
q=b;
}q("previousSibling",h,m,g,p,l);
}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l){return(g=h.getElementById(g[1]))?[g]:[];
}},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);
for(var m=0,q=h.length;
m<q;
m++){h[m].getAttribute("name")===g[1]&&l.push(h[m]);
}return l.length===0?null:l;
}},TAG:function(g,h){return h.getElementsByTagName(g[1]);
}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";
if(p){return g;
}p=0;
for(var v;
(v=h[p])!=null;
p++){if(v){if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0)){l||m.push(v);
}else{if(l){h[p]=false;
}}}}return false;
},ID:function(g){return g[1].replace(/\\/g,"");
},TAG:function(g){return g[1].toLowerCase();
},CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);
g[2]=h[1]+(h[2]||1)-0;
g[3]=h[3]-0;
}g[0]=e++;
return g;
},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");
if(!p&&n.attrMap[h]){g[1]=n.attrMap[h];
}if(g[2]==="~="){g[4]=" "+g[4]+" ";
}return g;
},PSEUDO:function(g,h,l,m,q){if(g[1]==="not"){if((f.exec(g[3])||"").length>1||/^\w/.test(g[3])){g[3]=k(g[3],null,null,h);
}else{g=k.filter(g[3],h,l,true^q);
l||m.push.apply(m,g);
return false;
}}else{if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0])){return true;
}}return g;
},POS:function(g){g.unshift(true);
return g;
}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden";
},disabled:function(g){return g.disabled===true;
},checked:function(g){return g.checked===true;
},selected:function(g){return g.selected===true;
},parent:function(g){return !!g.firstChild;
},empty:function(g){return !g.firstChild;
},has:function(g,h,l){return !!k(l[3],g).length;
},header:function(g){return/h\d/i.test(g.nodeName);
},text:function(g){return"text"===g.type;
},radio:function(g){return"radio"===g.type;
},checkbox:function(g){return"checkbox"===g.type;
},file:function(g){return"file"===g.type;
},password:function(g){return"password"===g.type;
},submit:function(g){return"submit"===g.type;
},image:function(g){return"image"===g.type;
},reset:function(g){return"reset"===g.type;
},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button";
},input:function(g){return/input|select|textarea|button/i.test(g.nodeName);
}},setFilters:{first:function(g,h){return h===0;
},last:function(g,h,l,m){return h===m.length-1;
},even:function(g,h){return h%2===0;
},odd:function(g,h){return h%2===1;
},lt:function(g,h,l){return h<l[3]-0;
},gt:function(g,h,l){return h>l[3]-0;
},nth:function(g,h,l){return l[3]-0===h;
},eq:function(g,h,l){return l[3]-0===h;
}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];
if(p){return p(g,l,h,m);
}else{if(q==="contains"){return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;
}else{if(q==="not"){h=h[3];
l=0;
for(m=h.length;
l<m;
l++){if(h[l]===g){return false;
}}return true;
}else{k.error("Syntax error, unrecognized expression: "+q);
}}}},CHILD:function(g,h){var l=h[1],m=g;
switch(l){case"only":case"first":for(;
m=m.previousSibling;
){if(m.nodeType===1){return false;
}}if(l==="first"){return true;
}m=g;
case"last":for(;
m=m.nextSibling;
){if(m.nodeType===1){return false;
}}return true;
case"nth":l=h[2];
var q=h[3];
if(l===1&&q===0){return true;
}h=h[0];
var p=g.parentNode;
if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;
for(m=p.firstChild;
m;
m=m.nextSibling){if(m.nodeType===1){m.nodeIndex=++v;
}}p.sizcache=h;
}g=g.nodeIndex-q;
return l===0?g===0:g%l===0&&g/l>=0;
}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h;
},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h;
},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1;
},ATTR:function(g,h){var l=h[1];
g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);
l=g+"";
var m=h[2];
h=h[4];
return g==null?m==="!=":m==="="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false;
},POS:function(g,h,l,m){var q=n.setFilters[h[2]];
if(q){return q(g,l,h,m);
}}}},r=n.match.POS;
for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);
n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,h){return"\\"+(h-0+1);
}));
}var z=function(g,h){g=Array.prototype.slice.call(g,0);
if(h){h.push.apply(h,g);
return h;
}return g;
};
try{Array.prototype.slice.call(s.documentElement.childNodes,0);
}catch(C){z=function(g,h){h=h||[];
if(j.call(g)==="[object Array]"){Array.prototype.push.apply(h,g);
}else{if(typeof g.length==="number"){for(var l=0,m=g.length;
l<m;
l++){h.push(g[l]);
}}else{for(l=0;
g[l];
l++){h.push(g[l]);
}}}return h;
};
}var B;
if(s.documentElement.compareDocumentPosition){B=function(g,h){if(!g.compareDocumentPosition||!h.compareDocumentPosition){if(g==h){i=true;
}return g.compareDocumentPosition?-1:1;
}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;
if(g===0){i=true;
}return g;
};
}else{if("sourceIndex" in s.documentElement){B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h){i=true;
}return g.sourceIndex?-1:1;
}g=g.sourceIndex-h.sourceIndex;
if(g===0){i=true;
}return g;
};
}else{if(s.createRange){B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h){i=true;
}return g.ownerDocument?-1:1;
}var l=g.ownerDocument.createRange(),m=h.ownerDocument.createRange();
l.setStart(g,0);
l.setEnd(g,0);
m.setStart(h,0);
m.setEnd(h,0);
g=l.compareBoundaryPoints(Range.START_TO_END,m);
if(g===0){i=true;
}return g;
};
}}}(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();
g.innerHTML="<a name='"+h+"'/>";
var l=s.documentElement;
l.insertBefore(g,l.firstChild);
if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p){return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[];
}};
n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");
return m.nodeType===1&&p&&p.nodeValue===q;
};
}l.removeChild(g);
l=g=null;
})();
(function(){var g=s.createElement("div");
g.appendChild(s.createComment(""));
if(g.getElementsByTagName("*").length>0){n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);
if(h[1]==="*"){h=[];
for(var m=0;
l[m];
m++){l[m].nodeType===1&&h.push(l[m]);
}l=h;
}return l;
};
}g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#"){n.attrHandle.href=function(h){return h.getAttribute("href",2);
};
}g=null;
})();
s.querySelectorAll&&function(){var g=k,h=s.createElement("div");
h.innerHTML="<p class='TEST'></p>";
if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;
if(!v&&q.nodeType===9&&!x(q)){try{return z(q.querySelectorAll(m),p);
}catch(t){}}return g(m,q,p,v);
};
for(var l in g){k[l]=g[l];
}h=null;
}}();
(function(){var g=s.createElement("div");
g.innerHTML="<div class='test e'></div><div class='test'></div>";
if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";
if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");
n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m){return l.getElementsByClassName(h[1]);
}};
g=null;
}}})();
var E=s.compareDocumentPosition?function(g,h){return !!(g.compareDocumentPosition(h)&16);
}:function(g,h){return g!==h&&(g.contains?g.contains(h):true);
},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false;
},ga=function(g,h){var l=[],m="",q;
for(h=h.nodeType?[h]:h;
q=n.match.PSEUDO.exec(g);
){m+=q[0];
g=g.replace(n.match.PSEUDO,"");
}g=n.relative[g]?g+"*":g;
q=0;
for(var p=h.length;
q<p;
q++){k(g,h[q],l);
}return k.filter(m,l);
};
c.find=k;
c.expr=k.selectors;
c.expr[":"]=c.expr.filters;
c.unique=k.uniqueSort;
c.text=a;
c.isXMLDoc=x;
c.contains=E;
})();
var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,gb=/,/;
R=Array.prototype.slice;
var Ia=function(a,b,d){if(c.isFunction(b)){return c.grep(a,function(e,j){return !!b.call(e,j,e)===d;
});
}else{if(b.nodeType){return c.grep(a,function(e){return e===b===d;
});
}else{if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1;
});
if(Ua.test(b)){return c.filter(b,f,!d);
}else{b=c.filter(b,f);
}}}}return c.grep(a,function(e){return c.inArray(e,b)>=0===d;
});
};
c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;
f<e;
f++){d=b.length;
c.find(a,this[f],b);
if(f>0){for(var j=d;
j<b.length;
j++){for(var i=0;
i<d;
i++){if(b[i]===b[j]){b.splice(j--,1);
break;
}}}}}return b;
},has:function(a){var b=c(a);
return this.filter(function(){for(var d=0,f=b.length;
d<f;
d++){if(c.contains(this,b[d])){return true;
}}});
},not:function(a){return this.pushStack(Ia(this,a,false),"not",a);
},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a);
},is:function(a){return !!a&&c.filter(a,this).length>0;
},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j={},i;
if(f&&a.length){e=0;
for(var o=a.length;
e<o;
e++){i=a[e];
j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i);
}for(;
f&&f.ownerDocument&&f!==b;
){for(i in j){e=j[i];
if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});
delete j[i];
}}f=f.parentNode;
}}return d;
}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;
return this.map(function(n,r){for(;
r&&r.ownerDocument&&r!==b;
){if(k?k.index(r)>-1:c(r).is(a)){return r;
}r=r.parentNode;
}return null;
});
},index:function(a){if(!a||typeof a==="string"){return c.inArray(this[0],a?c(a):this.parent().children());
}return c.inArray(a.jquery?a[0]:a,this);
},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);
b=c.merge(this.get(),a);
return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b));
},andSelf:function(){return this.add(this.prevObject);
}});
c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null;
},parents:function(a){return c.dir(a,"parentNode");
},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d);
},next:function(a){return c.nth(a,2,"nextSibling");
},prev:function(a){return c.nth(a,2,"previousSibling");
},nextAll:function(a){return c.dir(a,"nextSibling");
},prevAll:function(a){return c.dir(a,"previousSibling");
},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d);
},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d);
},siblings:function(a){return c.sibling(a.parentNode.firstChild,a);
},children:function(a){return c.sibling(a.firstChild);
},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes);
}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);
eb.test(a)||(f=d);
if(f&&typeof f==="string"){e=c.filter(f,e);
}e=this.length>1?c.unique(e):e;
if((this.length>1||gb.test(f))&&fb.test(a)){e=e.reverse();
}return this.pushStack(e,a,R.call(arguments).join(","));
};
});
c.extend({filter:function(a,b,d){if(d){a=":not("+a+")";
}return c.find.matches(a,b);
},dir:function(a,b,d){var f=[];
for(a=a[b];
a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));
){a.nodeType===1&&f.push(a);
a=a[b];
}return f;
},nth:function(a,b,d){b=b||1;
for(var f=0;
a;
a=a[d]){if(a.nodeType===1&&++f===b){break;
}}return a;
},sibling:function(a,b){for(var d=[];
a;
a=a.nextSibling){a.nodeType===1&&a!==b&&d.push(a);
}return d;
}});
var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?a:b+"></"+d+">";
},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
F.optgroup=F.option;
F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;
F.th=F.td;
if(!c.support.htmlSerialize){F._default=[1,"div<div>","</div>"];
}c.fn.extend({text:function(a){if(c.isFunction(a)){return this.each(function(b){var d=c(this);
d.text(a.call(this,b,d.text()));
});
}if(typeof a!=="object"&&a!==w){return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));
}return c.text(this);
},wrapAll:function(a){if(c.isFunction(a)){return this.each(function(d){c(this).wrapAll(a.call(this,d));
});
}if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);
this[0].parentNode&&b.insertBefore(this[0]);
b.map(function(){for(var d=this;
d.firstChild&&d.firstChild.nodeType===1;
){d=d.firstChild;
}return d;
}).append(this);
}return this;
},wrapInner:function(a){if(c.isFunction(a)){return this.each(function(b){c(this).wrapInner(a.call(this,b));
});
}return this.each(function(){var b=c(this),d=b.contents();
d.length?d.wrapAll(a):b.append(a);
});
},wrap:function(a){return this.each(function(){c(this).wrapAll(a);
});
},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes);
}).end();
},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a);
});
},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild);
});
},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this);
});
}else{if(arguments.length){var a=c(arguments[0]);
a.push.apply(a,this.toArray());
return this.pushStack(a,"before",arguments);
}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling);
});
}else{if(arguments.length){var a=this.pushStack(this,"after",arguments);
a.push.apply(a,c(arguments[0]).toArray());
return a;
}}},remove:function(a,b){for(var d=0,f;
(f=this[d])!=null;
d++){if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));
c.cleanData([f]);
}f.parentNode&&f.parentNode.removeChild(f);
}}return this;
},empty:function(){for(var a=0,b;
(b=this[a])!=null;
a++){for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));
b.firstChild;
){b.removeChild(b.firstChild);
}}return this;
},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;
if(!d){d=f.createElement("div");
d.appendChild(this.cloneNode(true));
d=d.innerHTML;
}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0];
}else{return this.cloneNode(true);
}});
if(a===true){ra(this,b);
ra(this.find("*"),b.find("*"));
}return b;
},html:function(a){if(a===w){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,""):null;
}else{if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);
try{for(var b=0,d=this.length;
b<d;
b++){if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));
this[b].innerHTML=a;
}}}catch(f){this.empty().append(a);
}}else{c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();
j.empty().append(function(){return a.call(this,e,i);
});
}):this.empty().append(a);
}}return this;
},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(c.isFunction(a)){return this.each(function(b){var d=c(this),f=d.html();
d.replaceWith(a.call(this,b,f));
});
}if(typeof a!=="string"){a=c(a).detach();
}return this.each(function(){var b=this.nextSibling,d=this.parentNode;
c(this).remove();
b?c(b).before(a):c(d).append(a);
});
}else{return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a);
}},detach:function(a){return this.remove(a,true);
},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||u.appendChild(u.ownerDocument.createElement("tbody")):u;
}var e,j,i=a[0],o=[],k;
if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i)){return this.each(function(){c(this).domManip(a,b,d,true);
});
}if(c.isFunction(i)){return this.each(function(u){var z=c(this);
a[0]=i.call(this,u,b?z.html():w);
z.domManip(a,b,d);
});
}if(this[0]){e=i&&i.parentNode;
e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);
k=e.fragment;
if(j=k.childNodes.length===1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");
for(var n=0,r=this.length;
n<r;
n++){d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k);
}}o.length&&c.each(o,Qa);
}return this;
}});
c.fragments={};
c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];
d=c(d);
var e=this.length===1&&this[0].parentNode;
if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this;
}else{e=0;
for(var j=d.length;
e<j;
e++){var i=(e>0?this.clone(true):this).get();
c.fn[b].apply(c(d[e]),i);
f=f.concat(i);
}return this.pushStack(f,a,d.selector);
}};
});
c.extend({clean:function(a,b,d,f){b=b||s;
if(typeof b.createElement==="undefined"){b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;
}for(var e=[],j=0,i;
(i=a[j])!=null;
j++){if(typeof i==="number"){i+="";
}if(i){if(typeof i==="string"&&!jb.test(i)){i=b.createTextNode(i);
}else{if(typeof i==="string"){i=i.replace(Ka,Ma);
var o=(La.exec(i)||["",""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");
for(r.innerHTML=k[1]+i+k[2];
n--;
){r=r.lastChild;
}if(!c.support.tbody){n=ib.test(i);
o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];
for(k=o.length-1;
k>=0;
--k){c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k]);
}}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);
i=r.childNodes;
}}if(i.nodeType){e.push(i);
}else{e=c.merge(e,i);
}}}if(d){for(j=0;
e[j];
j++){if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript")){f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);
}else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));
d.appendChild(e[j]);
}}}return e;
},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;
(o=a[i])!=null;
i++){if(d=o[c.expando]){b=f[d];
if(b.events){for(var k in b.events){e[k]?c.event.remove(o,k):Ca(o,k,b.handle);
}}if(j){delete o[c.expando];
}else{o.removeAttribute&&o.removeAttribute(c.expando);
}delete f[d];
}}}});
var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=function(a,b){return b.toUpperCase();
};
c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w){return c.curCSS(d,f);
}if(typeof e==="number"&&!kb.test(f)){e+="px";
}c.style(d,f,e);
});
};
c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8){return w;
}if((b==="width"||b==="height")&&parseFloat(d)<0){d=w;
}var f=a.style||a,e=d!==w;
if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;
b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";
a=f.filter||c.curCSS(a,"filter")||"";
f.filter=Na.test(a)?a.replace(Na,b):b;
}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":"";
}if(ha.test(b)){b=Pa;
}b=b.replace(ia,ja);
if(e){f[b]=d;
}return f[b];
},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;
function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;
f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);
if(f==="margin"){e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;
}else{e-=parseFloat(c.curCSS(a,"border"+this+"Width",true))||0;
}});
}a.offsetWidth!==0?i():c.swap(a,ob,i);
return Math.max(0,Math.round(e));
}return c.curCSS(a,b,d);
},curCSS:function(a,b,d){var f,e=a.style;
if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";
return f===""?"1":f;
}if(ha.test(b)){b=Pa;
}if(!d&&e&&e[b]){f=e[b];
}else{if(rb){if(ha.test(b)){b="float";
}b=b.replace(lb,"-$1").toLowerCase();
e=a.ownerDocument.defaultView;
if(!e){return null;
}if(a=e.getComputedStyle(a,null)){f=a.getPropertyValue(b);
}if(b==="opacity"&&f===""){f="1";
}}else{if(a.currentStyle){d=b.replace(ia,ja);
f=a.currentStyle[b]||a.currentStyle[d];
if(!mb.test(f)&&nb.test(f)){b=e.left;
var j=a.runtimeStyle.left;
a.runtimeStyle.left=a.currentStyle.left;
e.left=d==="fontSize"?"1em":f||0;
f=e.pixelLeft+"px";
e.left=b;
a.runtimeStyle.left=j;
}}}}return f;
},swap:function(a,b,d){var f={};
for(var e in b){f[e]=a.style[e];
a.style[e]=b[e];
}d.call(a);
for(e in b){a.style[e]=f[e];
}}});
if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";
return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none";
};
c.expr.filters.visible=function(a){return !c.expr.filters.hidden(a);
};
}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;
c.fn.extend({load:function(a,b,d){if(typeof a!=="string"){return zb.call(this,a);
}else{if(!this.length){return this;
}}var f=a.indexOf(" ");
if(f>=0){var e=a.slice(f,a.length);
a=a.slice(0,f);
}f="GET";
if(b){if(c.isFunction(b)){d=b;
b=null;
}else{if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);
f="POST";
}}}var j=this;
c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified"){j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);
}d&&j.each(d,[i.responseText,o,i]);
}});
return this;
},serialize:function(){return c.param(this.serializeArray());
},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this;
}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type));
}).map(function(a,b){a=c(this).val();
return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d};
}):{name:b.name,value:a};
}).get();
}});
c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d);
};
});
c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b=null;
}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f});
},getScript:function(a,b){return c.get(a,null,b,"script");
},getJSON:function(a,b,d){return c.get(a,b,d,"json");
},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;
d=b;
b={};
}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f});
},ajaxSetup:function(a){c.extend(c.ajaxSettings,a);
},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest;
}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP");
}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&e.success.call(k,o,i,x);
e.global&&f("ajaxSuccess",[x,e]);
}function d(){e.complete&&e.complete.call(k,x,i);
e.global&&f("ajaxComplete",[x,e]);
e.global&&!--c.active&&c.event.trigger("ajaxStop");
}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p);
}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();
if(e.data&&e.processData&&typeof e.data!=="string"){e.data=c.param(e.data,e.traditional);
}if(e.dataType==="jsonp"){if(n==="GET"){N.test(e.url)||(e.url+=(ka.test(e.url)?"&":"?")+(e.jsonp||"callback")+"=?");
}else{if(!e.data||!N.test(e.data)){e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";
}}e.dataType="json";
}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;
if(e.data){e.data=(e.data+"").replace(N,"="+j+"$1");
}e.url=e.url.replace(N,"="+j+"$1");
e.dataType="script";
A[j]=A[j]||function(q){o=q;
b();
d();
A[j]=w;
try{delete A[j];
}catch(p){}z&&z.removeChild(C);
};
}if(e.dataType==="script"&&e.cache===null){e.cache=false;
}if(e.cache===false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");
e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"");
}if(e.data&&n==="GET"){e.url+=(ka.test(e.url)?"&":"?")+e.data;
}e.global&&!c.active++&&c.event.trigger("ajaxStart");
r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);
if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");
C.src=e.url;
if(e.scriptCharset){C.charset=e.scriptCharset;
}if(!j){var B=false;
C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;
b();
d();
C.onload=C.onreadystatechange=null;
z&&C.parentNode&&z.removeChild(C);
}};
}z.insertBefore(C,z.firstChild);
return w;
}var E=false,x=e.xhr();
if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);
try{if(e.data||a&&a.contentType){x.setRequestHeader("Content-Type",e.contentType);
}if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",c.lastModified[e.url]);
c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url]);
}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");
x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default);
}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");
x.abort();
return false;
}e.global&&f("ajaxSend",[x,e]);
var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||d();
E=true;
if(x){x.onreadystatechange=c.noop;
}}else{if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;
x.onreadystatechange=c.noop;
i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";
var p;
if(i==="success"){try{o=c.httpData(x,e.dataType,e);
}catch(v){i="parsererror";
p=v;
}}if(i==="success"||i==="notmodified"){j||b();
}else{c.handleError(e,x,i,p);
}d();
q==="timeout"&&x.abort();
if(e.async){x=null;
}}}};
try{var h=x.abort;
x.abort=function(){x&&h.call(x);
g("abort");
};
}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout");
},e.timeout);
try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null);
}catch(m){c.handleError(e,x,null,m);
d();
}e.async||g();
return x;
}},handleError:function(a,b,d,f){if(a.error){a.error.call(a.context||a,b,d,f);
}if(a.global){(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f]);
}},active:0,httpSuccess:function(a){try{return !a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===1223||a.status===0;
}catch(b){}return false;
},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");
if(d){c.lastModified[b]=d;
}if(f){c.etag[b]=f;
}return a.status===304||a.status===0;
},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;
a=e?a.responseXML:a.responseText;
e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");
if(d&&d.dataFilter){a=d.dataFilter(a,b);
}if(typeof a==="string"){if(b==="json"||!b&&f.indexOf("json")>=0){a=c.parseJSON(a);
}else{if(b==="script"||!b&&f.indexOf("javascript")>=0){c.globalEval(a);
}}}return a;
},param:function(a,b){function d(i,o){if(c.isArray(o)){c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n);
});
}else{!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n);
}):f(i,o);
}}function f(i,o){o=c.isFunction(o)?o():o;
e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o);
}var e=[];
if(b===w){b=c.ajaxSettings.traditional;
}if(c.isArray(a)||a.jquery){c.each(a,function(){f(this.name,this.value);
});
}else{for(var j in a){d(j,a[j]);
}}return e.join("&").replace(yb,"+");
}});
var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];
c.fn.extend({show:function(a,b){if(a||a===0){return this.animate(K("show",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";
if(c.css(this[a],"display")==="none"){d=this[a].nodeName;
var f;
if(la[d]){f=la[d];
}else{var e=c("<"+d+" />").appendTo("body");
f=e.css("display");
if(f==="none"){f="block";
}e.remove();
la[d]=f;
}c.data(this[a],"olddisplay",f);
}}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display=c.data(this[a],"olddisplay")||"";
}return this;
}},hide:function(a,b){if(a||a===0){return this.animate(K("hide",3),a,b);
}else{a=0;
for(b=this.length;
a<b;
a++){var d=c.data(this[a],"olddisplay");
!d&&d!=="none"&&c.data(this[a],"olddisplay",c.css(this[a],"display"));
}a=0;
for(b=this.length;
a<b;
a++){this[a].style.display="none";
}return this;
}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";
if(c.isFunction(a)&&c.isFunction(b)){this._toggle.apply(this,arguments);
}else{a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");
c(this)[f?"show":"hide"]();
}):this.animate(K("toggle",3),a,b);
}return this;
},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d);
},animate:function(a,b,d,f){var e=c.speed(b,d,f);
if(c.isEmptyObject(a)){return this.each(e.complete);
}return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;
for(i in a){var n=i.replace(ia,ja);
if(i!==n){a[n]=a[i];
delete a[i];
i=n;
}if(a[i]==="hide"&&o||a[i]==="show"&&!o){return j.complete.call(this);
}if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");
j.overflow=this.style.overflow;
}if(c.isArray(a[i])){(j.specialEasing=j.specialEasing||{})[i]=a[i][1];
a[i]=a[i][0];
}}if(j.overflow!=null){this.style.overflow="hidden";
}j.curAnim=c.extend({},a);
c.each(a,function(r,u){var z=new c.fx(k,j,r);
if(Ab.test(u)){z[u==="toggle"?o?"show":"hide":u](a);
}else{var C=Bb.exec(u),B=z.cur(true)||0;
if(C){u=parseFloat(C[2]);
var E=C[3]||"px";
if(E!=="px"){k.style[r]=(u||1)+E;
B=(u||1)/z.cur(true)*B;
k.style[r]=B+E;
}if(C[1]){u=(C[1]==="-="?-1:1)*u+B;
}z.custom(B,u,E);
}else{z.custom(B,u,"");
}}});
return true;
});
},stop:function(a,b){var d=c.timers;
a&&this.queue([]);
this.each(function(){for(var f=d.length-1;
f>=0;
f--){if(d[f].elem===this){b&&d[f](true);
d.splice(f,1);
}}});
b||this.dequeue();
return this;
}});
c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f);
};
});
c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};
f.duration=c.fx.off?0:typeof f.duration==="number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;
f.old=f.complete;
f.complete=function(){f.queue!==false&&c(this).dequeue();
c.isFunction(f.old)&&f.old.call(this);
};
return f;
},easing:{linear:function(a,b,d,f){return d+f*a;
},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d;
}},timers:[],fx:function(a,b,d){this.options=b;
this.elem=a;
this.prop=d;
if(!b.orig){b.orig={};
}}});
c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);
(c.fx.step[this.prop]||c.fx.step._default)(this);
if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block";
}},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];
}return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0;
},custom:function(a,b,d){function f(j){return e.step(j);
}this.startTime=J();
this.start=a;
this.end=b;
this.unit=d||this.unit||"px";
this.now=this.start;
this.pos=this.state=0;
var e=this;
f.elem=this.elem;
if(f()&&c.timers.push(f)&&!W){W=setInterval(c.fx.tick,13);
}},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.show=true;
this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());
c(this.elem).show();
},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);
this.options.hide=true;
this.custom(this.cur(),0);
},step:function(a){var b=J(),d=true;
if(a||b>=this.options.duration+this.startTime){this.now=this.end;
this.pos=this.state=1;
this.update();
this.options.curAnim[this.prop]=true;
for(var f in this.options.curAnim){if(this.options.curAnim[f]!==true){d=false;
}}if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
a=c.data(this.elem,"olddisplay");
this.elem.style.display=a?a:this.options.display;
if(c.css(this.elem,"display")==="none"){this.elem.style.display="block";
}}this.options.hide&&c(this.elem).hide();
if(this.options.hide||this.options.show){for(var e in this.options.curAnim){c.style(this.elem,e,this.options.orig[e]);
}}this.options.complete.call(this.elem);
}return false;
}else{e=b-this.startTime;
this.state=e/this.options.duration;
a=this.options.easing||(c.easing.swing?"swing":"linear");
this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);
this.now=this.start+(this.end-this.start)*this.pos;
this.update();
}return true;
}};
c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;
b<a.length;
b++){a[b]()||a.splice(b--,1);
}a.length||c.fx.stop();
},stop:function(){clearInterval(W);
W=null;
},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now);
},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null){a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;
}else{a.elem[a.prop]=a.now;
}}}});
if(c.expr&&c.expr.filters){c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem;
}).length;
};
}c.fn.offset="getBoundingClientRect" in s.documentElement?function(a){var b=this[0];
if(a){return this.each(function(e){c.offset.setOffset(this,a,e);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}var d=b.getBoundingClientRect(),f=b.ownerDocument;
b=f.body;
f=f.documentElement;
return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)};
}:function(a){var b=this[0];
if(a){return this.each(function(r){c.offset.setOffset(this,a,r);
});
}if(!b||!b.ownerDocument){return null;
}if(b===b.ownerDocument.body){return c.offset.bodyOffset(b);
}c.offset.initialize();
var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;
f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;
for(var k=b.offsetTop,n=b.offsetLeft;
(b=b.parentNode)&&b!==o&&b!==i;
){if(c.offset.supportsFixedPosition&&f.position==="fixed"){break;
}j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;
n-=b.scrollLeft;
if(b===d){k+=b.offsetTop;
n+=b.offsetLeft;
if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=d;
d=b.offsetParent;
}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;
n+=parseFloat(j.borderLeftWidth)||0;
}f=j;
}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;
n+=o.offsetLeft;
}if(c.offset.supportsFixedPosition&&f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);
n+=Math.max(i.scrollLeft,o.scrollLeft);
}return{top:k,left:n};
};
c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;
c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});
b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);
d=b.firstChild;
f=d.firstChild;
e=d.nextSibling.firstChild.firstChild;
this.doesNotAddBorder=f.offsetTop!==5;
this.doesAddBorderForTableAndCells=e.offsetTop===5;
f.style.position="fixed";
f.style.top="20px";
this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;
f.style.position=f.style.top="";
d.style.overflow="hidden";
d.style.position="relative";
this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;
this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;
a.removeChild(b);
c.offset.initialize=c.noop;
},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;
c.offset.initialize();
if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;
d+=parseFloat(c.curCSS(a,"marginLeft",true))||0;
}return{top:b,left:d};
},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position"))){a.style.position="relative";
}var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;
if(c.isFunction(b)){b=b.call(a,d,e);
}d={top:b.top-e.top+j,left:b.left-e.left+i};
"using" in b?b.using.call(a,d):f.css(d);
}};
c.fn.extend({position:function(){if(!this[0]){return null;
}var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();
d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;
d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;
f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;
f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;
return{top:d.top-f.top,left:d.left-f.left};
},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;
a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";
){a=a.offsetParent;
}return a;
});
}});
c.each(["Left","Top"],function(a,b){var d="scroll"+b;
c.fn[d]=function(f){var e=this[0],j;
if(!e){return null;
}if(f!==w){return this.each(function(){if(j=wa(this)){j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());
}else{this[d]=f;
}});
}else{return(j=wa(e))?"pageXOffset" in j?j[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d];
}};
});
c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null;
};
c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null;
};
c.fn[d]=function(f){var e=this[0];
if(!e){return f==null?null:this;
}if(c.isFunction(f)){return this.each(function(j){var i=c(this);
i[d](f.call(this,j,i[d]()));
});
}return"scrollTo" in e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px");
};
});
A.jQuery=A.$=c;
})(window);
function hmo(evt,n){evt=evt||window.event;
var s=n.style,p=getPosition(evt),top=p.y+30,left=p.x+20;
n._ps=n.previousSibling;
n.hmo=true;
function hover(){if(n.hmo==true){document.body.appendChild(n);
s.display="block";
s.left=left+"px";
s.top=top+"px";
n.show=true;
}}n.timer=setTimeout(hover,500);
}function hmm(evt,n){if(!n.show){return;
}var s=n.style,p=getPosition(evt),vp=gvs(),so=gso(),left=p.x+20,top=p.y+20;
if(left+n.offsetWidth>vp[1]+so[1]){left=left-40-n.offsetWidth;
if(left<0){left=0;
}}if(top+n.offsetHeight>vp[0]+so[0]){if(top-40-n.offsetHeight<so[0]){if(left>0){top=10+so[0];
}}else{top=top-40-n.offsetHeight;
}}evt=evt||window.event;
s.top=top+"px";
s.left=left+"px";
}function hmt(evt,n){n.hmo=false;
if(!n._ps){n._ps=n.previousSibling;
}clearTimeout(n.timer);
evt=evt||window.event;
n.style.display="";
Util.ia(n,n._ps);
n.show=false;
}function hs(e,n){var priorBgColor=e.style.backgroundColor;
var priorBorderColor=e.style.borderColor;
if(n&&n.tagName=="DIV"){e.onmouseenter=function(evt){e.onmouseover=null;
e.onmouseout=null;
hmo(evt,n);
};
e.onmouseover=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmo(evt,n);
};
e.onmousemove=function(evt){e.style.backgroundColor="#FFFFCC";
e.style.borderColor="#CCCCCC";
hmm(evt,n);
};
e.onmouseout=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
hmt(evt,n);
};
e.onmouseleave=function(evt){e.style.backgroundColor=priorBgColor;
e.style.borderColor=priorBorderColor;
e.onmouseover=null;
e.onmouseout=null;
hmt(evt,n);
};
Util.Style.acss(n,"hover");
}}function _g(i){return document.getElementById(i);
}function _gbt(t,e){e=e||document;
return e.getElementsByTagName(t);
}var Util=function(){var _e=[],_d=document,_w=window;
return{EventCache:function(){var l=[];
return{add:function(o,e,f){l.push(arguments);
},remove:function(o,e,f){var n;
for(var i=l.length-1;
i>=0;
i=i-1){if(o==l[i][0]&&e==l[i][1]&&f==l[i][2]){n=l[i];
if(n[0].removeEventListener){n[0].removeEventListener(n[1],n[2],n[3]);
}else{if(n[0].detachEvent){if(n[1].substring(0,2)!="on"){n[1]="on"+n[1];
}n[0].detachEvent(n[1],n[0][e+f]);
}}}}},flush:function(){var e;
for(var i=l.length-1;
i>=0;
i=i-1){var o=l[i];
if(o[0].removeEventListener){o[0].removeEventListener(o[1],o[2],o[3]);
}e=o[1];
if(o[1].substring(0,2)!="on"){o[1]="on"+o[1];
}if(o[0].detachEvent){o[0].detachEvent(o[1],o[2]);
if(o[0][e+o[2]]){o[0].detachEvent(o[1],o[0][e+o[2]]);
}}}}};
}(),ce:function(t){var a=_e[t];
if(!a){a=_e[t]=_d.createElement(t);
}if(!a){return null;
}else{return a.cloneNode(false);
}},cep:function(t,p){var e=this.ce(t);
return this.mo(e,p);
},mo:function(o1,o2,d){o1=o1||{};
o2=o2||{};
var p;
for(p in o2){if(p){o1[p]=(o1[p]===undefined)?o2[p]:!d?o2[p]:o1[p];
}}return o1;
},de:function(e){if(e){this.gp(e).removeChild(e);
}},cancelBubble:function(e){e=_w.event||e;
if(!e){return;
}if(e.stopPropagation){e.stopPropagation();
}else{e.cancelBubble=true;
}},preventDefault:function(e){e=_w.event||e;
if(!e){return;
}if(e.preventDefault){e.preventDefault();
}else{e.returnValue=false;
}},goff:function(e){var l=0,t=0;
if(e.offsetParent){while(e.offsetParent){l+=e.offsetLeft;
t+=e.offsetTop;
e=e.offsetParent;
}}else{if(e.x||e.y){l+=e.x||0;
t+=e.y||0;
}}return[l,t];
},gp:function(e){if(!e.parentNode){return e;
}e=e.parentNode;
while(e.nodeType===3&&e.parentNode){e=e.parentNode;
}return e;
},gc:function(e,i){i=i||0;
var j=-1;
if(!e.childNodes[i]){return null;
}e=e.childNodes[0];
while(e&&j<i){if(e.nodeType===1){j++;
if(j===i){break;
}}e=this.gns(e);
}return e;
},gcs:function(e){var r=[],es=e.childNodes;
for(var i=0;
i<es.length;
i++){var x=es[i];
if(x.nodeType===1){r.push(x);
}}return r;
},gns:function(e){if(!e){return null;
}var a=e.nextSibling;
while(a&&a.nodeType!==1){a=a.nextSibling;
}return a;
},gps:function(e){var a=e.previousSibling;
while(a&&a.nodeType!==1){a=a.previousSibling;
}return a;
},ac:function(e,p){p.appendChild(e);
return e;
},ia:function(nn,rn){var p=Util.gp(rn),n=Util.gns(rn);
if(n){p.insertBefore(nn,n);
}else{Util.ac(nn,p);
}},addEvent:function(o,e,f){function ae(obj,evt,fnc){if(!obj.myEvents){obj.myEvents={};
}if(!obj.myEvents[evt]){obj.myEvents[evt]=[];
}var evts=obj.myEvents[evt];
evts[evts.length]=fnc;
}function fe(obj,evt){if(!obj||!obj.myEvents||!obj.myEvents[evt]){return;
}var evts=obj.myEvents[evt];
for(var i=0,len=evts.length;
i<len;
i++){evts[i]();
}}if(o.addEventListener){o.addEventListener(e,f,false);
Util.EventCache.add(o,e,f);
}else{if(o.attachEvent){o["e"+e+f]=f;
o[e+f]=function(){o["e"+e+f](window.event);
};
o.attachEvent("on"+e,o[e+f]);
Util.EventCache.add(o,e,f);
}else{ae(o,e,f);
o["on"+e]=function(){fe(o,e);
};
}}},removeEvent:function(o,e,f){Util.EventCache.remove(o,e,f);
},popup:function(u,n,o){if(!window.open){return false;
}var d={w:screen.width,h:screen.height,rz:true,mb:true,scb:true,stb:true,tb:true,lb:true,tp:null,lft:null,sx:null,sy:null,dp:"no",dr:"no",fs:"no"};
function f(n,v){if(!v){return"";
}return n+"="+v+",";
}function fs(){o=o||{};
var p,n={};
for(p in d){if(p){n[p]=o[p]!==undefined?o[p]:d[p];
}}return n;
}o=fs();
var p=f("dependent",o.dp)+f("directories",o.dr)+f("fullscreen",o.fs)+f("location",o.lb?1:0)+f("menubar",o.mb)+f("resizable",o.rz?1:0)+f("scrollbars",o.scb?1:0)+f("status",o.stb?1:0)+f("toolbar",o.tb?1:0)+f("top",o.tp)+f("left",o.lft)+f("width",o.w)+f("height",o.h)+f("screenX",o.sx)+f("screenY",o.sy);
p=p.substring(0,p.length-1);
var nw=window.open(u,n,p);
window.blur();
if(nw.focus){nw.focus();
}return true;
},Convert:{},Cookie:{},Detect:{},i18n:{},Load:{},Pos:{},Style:{},Timeout:{}};
}();
function insertAfter(nn,rn){Util.ia(nn,rn);
}Util.addEvent(window,"unload",Util.EventCache.flush);
Util.Style=function(){return{ccss:function(e,c){if(typeof(e.className)==="undefined"||!e.className){return false;
}var a=e.className.split(" ");
for(var i=0,b=a.length;
i<b;
i++){if(a[i]===c){return true;
}}return false;
},acss:function(e,c){if(this.ccss(e,c)){return e;
}e.className=(e.className?e.className+" ":"")+c;
return e;
},rcss:function(e,c){if(!this.ccss(e,c)){return e;
}var a=e.className.split(" "),d="";
for(var i=0,b=a.length;
i<b;
i++){var f=a[i];
if(f!==c){d+=d.length>0?(" "+f):f;
}}e.className=d;
return e;
},tcss:function(e,c){if(this.ccss(e,c)){this.rcss(e,c);
return false;
}else{this.acss(e,c);
return true;
}},co:function(e){e.style.MozOpacity="";
e.style.opacity="";
e.style.filter="";
},g:function(c,e,t){e=e||document;
t=t||"*";
var ns=[],es=_gbt(t,e),l=es.length;
for(var i=0,j=0;
i<l;
i++){if(this.ccss(es[i],c)){ns[j]=es[i];
j++;
}}return ns;
}};
}();
function getPosition(e){e=e||window.event;
var cursor={x:0,y:0};
if(e.pageX||e.pageY){cursor.x=e.pageX;
cursor.y=e.pageY;
}else{var de=document.documentElement;
var b=document.body;
cursor.x=e.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
cursor.y=e.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}return cursor;
}function gvs(){var n=window,d=document,b=d.body,e=d.documentElement;
if(typeof n.innerWidth!=="undefined"){return[n.innerHeight,n.innerWidth];
}else{if(typeof e!=="undefined"&&typeof e.clientWidth!=="undefined"&&e.clientWidth!==0){return[e.clientHeight,e.clientWidth];
}else{return[b.clientHeight,b.clientWidth];
}}}function gso(){var d=document,b=d.body,w=window,e=d.documentElement,et=e.scrollTop,bt=b.scrollTop,el=e.scrollLeft,bl=b.scrollLeft;
if(typeof w.pageYOffset==="number"){return[w.pageYOffset,w.pageXOffset];
}if(typeof et==="number"){if(bt>et||bl>el){return[bt,bl];
}return[et,el];
}return[bt,bl];
}if(!this.JSON){this.JSON={};
}(function(){function f(n){return n<10?"0"+n:n;
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();
};
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
})+'"':'"'+string+'"';
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);
}if(typeof rep==="function"){value=rep.call(holder,key,value);
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null";
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null";
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v;
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){k=rep[i];
if(typeof k==="string"){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v);
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v;
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" ";
}}else{if(typeof space==="string"){indent=space;
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");
}return str("",{"":value});
};
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v;
}else{delete value[k];
}}}}return reviver.call(holder,key,value);
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);
});
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j;
}throw new SyntaxError("JSON.parse");
};
}}());
mp_formatter={};
mp_formatter.Locale=function(properties){this._className="mp_formatter.Locale";
this._parseList=function(names,expectedItems){var array=[];
if(names===null){throw"Names not defined";
}else{if(typeof names=="object"){array=names;
}else{if(typeof names=="string"){array=names.split(";",expectedItems);
for(var i=0;
i<array.length;
i++){if(array[i][0]=='"'&&array[i][array[i].length-1]=='"'){array[i]=array[i].slice(1,-1);
}else{throw"Missing double quotes";
}}}else{throw"Names must be an array or a string";
}}}if(array.length!=expectedItems){throw"Expected "+expectedItems+" items, got "+array.length;
}return array;
};
this._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return formatString;
}else{throw"Empty or no string";
}};
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing locale properties";
}if(typeof properties.decimal_point!="string"){throw"Error: Invalid/missing decimal_point property";
}this.decimal_point=properties.decimal_point;
if(typeof properties.thousands_sep!="string"){throw"Error: Invalid/missing thousands_sep property";
}this.thousands_sep=properties.thousands_sep;
if(typeof properties.grouping!="string"){throw"Error: Invalid/missing grouping property";
}this.grouping=properties.grouping;
if(properties===null||typeof properties!="object"){throw"Error: Invalid/missing time locale properties";
}try{this.time24hr=this._validateFormatString(properties.time24hr);
}catch(error){throw"Error: Invalid time24hr property: "+error;
}try{this.time24hrnosec=this._validateFormatString(properties.time24hrnosec);
}catch(error){throw"Error: Invalid time24hrnosec property: "+error;
}try{this.shortdate2yr=this._validateFormatString(properties.shortdate2yr);
}catch(error){throw"Error: Invalid shortdate2yr property: "+error;
}try{this.fulldate4yr=this._validateFormatString(properties.fulldate4yr);
}catch(error){throw"Error: Invalid fulldate4yr property: "+error;
}try{this.fulldate2yr=this._validateFormatString(properties.fulldate2yr);
}catch(error){throw"Error: Invalid fulldate2yr property: "+error;
}try{this.fullmonth4yrnodate=this._validateFormatString(properties.fullmonth4yrnodate);
}catch(error){throw"Error: Invalid fullmonth4yrnodate property: "+error;
}try{this.full4yr=this._validateFormatString(properties.full4yr);
}catch(error){throw"Error: Invalid full4yr property: "+error;
}try{this.fulldatetime2yr=this._validateFormatString(properties.fulldatetime2yr);
}catch(error){throw"Error: Invalid fulldatetime2yr property: "+error;
}try{this.fulldatetime4yr=this._validateFormatString(properties.fulldatetime4yr);
}catch(error){throw"Error: Invalid fulldatetime4yr property: "+error;
}try{this.fulldatetimenoyr=this._validateFormatString(properties.fulldatetimenoyr);
}catch(error){throw"Error: Invalid fulldatetimenoyr property: "+error;
}};
mp_formatter._getPrecision=function(optionsString){if(typeof optionsString!="string"){return -1;
}var m=optionsString.match(/\.(\d)/);
if(m){return parseInt(m[1],10);
}else{return -1;
}};
mp_formatter._isNumber=function(arg){if(typeof arg=="number"){return true;
}if(typeof arg!="string"){return false;
}var s=arg+"";
return(/^-?(\d+|\d*\.\d+)$/).test(s);
};
mp_formatter._isDate=function(arg){if(arg.getDate){return true;
}return false;
};
mp_formatter._trim=function(str){var whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";
for(var i=0;
i<str.length;
i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);
break;
}}for(i=str.length-1;
i>=0;
i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);
break;
}}return whitespace.indexOf(str.charAt(0))===-1?str:"";
};
mp_formatter._splitNumber=function(amount){if(typeof amount=="number"){amount=amount+"";
}var obj={};
if(amount.charAt(0)=="-"){amount=amount.substring(1);
}var amountParts=amount.split(".");
if(!amountParts[1]){amountParts[1]="";
}obj.integer=amountParts[0];
obj.fraction=amountParts[1];
return obj;
};
mp_formatter._formatIntegerPart=function(intPart,grouping,thousandsSep){if(thousandsSep===""||grouping=="-1"){return intPart;
}var groupSizes=grouping.split(";");
var out="";
var pos=intPart.length;
var size;
while(pos>0){if(groupSizes.length>0){size=parseInt(groupSizes.shift(),10);
}if(isNaN(size)){throw"Error: Invalid grouping";
}if(size==-1){out=intPart.substring(0,pos)+out;
break;
}pos-=size;
if(pos<1){out=intPart.substring(0,pos+size)+out;
break;
}out=thousandsSep+intPart.substring(pos,pos+size)+out;
}return out;
};
mp_formatter._formatFractionPart=function(fracPart,precision){for(var i=0;
fracPart.length<precision;
i++){fracPart=fracPart+"0";
}return fracPart;
};
mp_formatter._hasOption=function(option,optionsString){if(typeof option!="string"||typeof optionsString!="string"){return false;
}if(optionsString.indexOf(option)!=-1){return true;
}else{return false;
}};
mp_formatter._validateFormatString=function(formatString){if(typeof formatString=="string"&&formatString.length>0){return true;
}else{return false;
}};
mp_formatter.NumericFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.format=function(number,options){if(typeof number=="string"){number=mp_formatter._trim(number);
}if(!mp_formatter._isNumber(number)){throw"Error: The input is not a number";
}var floatAmount=parseFloat(number,10);
var reqPrecision=mp_formatter._getPrecision(options);
if(reqPrecision!=-1){floatAmount=Math.round(floatAmount*Math.pow(10,reqPrecision))/Math.pow(10,reqPrecision);
}var parsedAmount=mp_formatter._splitNumber(String(floatAmount));
var formattedIntegerPart;
if(floatAmount===0){formattedIntegerPart="0";
}else{formattedIntegerPart=mp_formatter._hasOption("^",options)?parsedAmount.integer:mp_formatter._formatIntegerPart(parsedAmount.integer,this.lc.grouping,this.lc.thousands_sep);
}var formattedFractionPart=reqPrecision!=-1?mp_formatter._formatFractionPart(parsedAmount.fraction,reqPrecision):parsedAmount.fraction;
var formattedAmount=formattedFractionPart.length?formattedIntegerPart+this.lc.decimal_point+formattedFractionPart:formattedIntegerPart;
if(mp_formatter._hasOption("~",options)||floatAmount===0){return formattedAmount;
}else{if(mp_formatter._hasOption("+",options)||floatAmount<0){if(floatAmount>0){return"+"+formattedAmount;
}else{if(floatAmount<0){return"-"+formattedAmount;
}else{return formattedAmount;
}}}else{return formattedAmount;
}}};
};
mp_formatter.DateTimeFormatter=function(locale){if(typeof locale!="object"||locale._className!="mp_formatter.Locale"){throw"Constructor error: You must provide a valid mp_formatter.Locale instance";
}this.lc=locale;
this.formatISO8601=function(dateStr,option){if(!mp_formatter._validateFormatString(dateStr)){throw"Error: The input is either empty or no string";
}var date=new Date();
date.setISO8601(dateStr);
return this.format(date,option);
};
this.format=function(dateTime,option){if(!mp_formatter._isDate(dateTime)){throw"Error: The input is not a date object";
}switch(option){case mp_formatter.DateTimeFormatter.TIME_24HOUR:return dateTime.format(this.lc.time24hr);
case mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS:return dateTime.format(this.lc.time24hrnosec);
case mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR:return dateTime.format(this.lc.shortdate2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR:return dateTime.format(this.lc.fulldate4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR:return dateTime.format(this.lc.fulldate2yr);
case mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE:return dateTime.format(this.lc.fullmonth4yrnodate);
case mp_formatter.DateTimeFormatter.FULL_4YEAR:return dateTime.format(this.lc.full4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR:return dateTime.format(this.lc.fulldatetime2yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR:return dateTime.format(this.lc.fulldatetime4yr);
case mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR:return dateTime.format(this.lc.fulldatetimenoyr);
default:alert("Unhandled date time formatting option");
}};
};
mp_formatter.DateTimeFormatter.TIME_24HOUR=1;
mp_formatter.DateTimeFormatter.TIME_24HOUR_NO_SECONDS=2;
mp_formatter.DateTimeFormatter.SHORT_DATE_2YEAR=3;
mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR=4;
mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR=5;
mp_formatter.DateTimeFormatter.FULL_MONTH_4YEAR_NO_DATE=6;
mp_formatter.DateTimeFormatter.FULL_4YEAR=7;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR=8;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR=9;
mp_formatter.DateTimeFormatter.FULL_DATE_TIME_NO_YEAR=10;
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");
};
Date.prototype.addDays=function(n){this.setDate(this.getDate()+n);
return this;
};
Date.prototype.addHours=function(n){this.setHours(this.getHours()+n);
return this;
};
jQuery.extend(jQuery.expr[":"],{Contains:function(a,i,m){return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
}});
var gColTableFilters={};
$.fn.tableFilter=function(tableSelector){var filterSelector=$(this).attr("id");
if(filterSelector===undefined){return false;
}if(gColTableFilters[filterSelector]===undefined){gColTableFilters[filterSelector]=new Array(tableSelector);
}else{if(MP_LAB_UTIL.ItemInArray(gColTableFilters[filterSelector],tableSelector)){$(this).unbind().keyup(updateTable);
return false;
}else{gColTableFilters[filterSelector].push(tableSelector);
}}updateTable=function(e){keys=[27,32,37,38,39,40];
if($.inArray(e.keyCode,keys)>=0){return false;
}if($(this).val().trim()!==""){if(e.keyCode!=13){return false;
}}filterId=$(this).attr("id");
if(filterId=="ALLfilter"){for(filter in gColTableFilters){if(filter!="ALLfilter"){$("#"+filter).val("");
}}}var tableList=gColTableFilters[filterId];
for(x in tableList){if(tableList.hasOwnProperty(x)){table=$(tableList[x]);
table.find("tr:gt(0)").hide();
table.find(".filterSpacer").remove();
if(ieVersion>0&&$(this).val().trim()!==""){table.find("tbody").prepend('<tr class="filterSpacer"><td>&nbsp</td></tr>');
}table.find('td:Contains("'+$(this).val()+'")').parents("tr").show();
}}if($("table tr.rowSelectedMajor:hidden").length>0){$("body").trigger("FILTER_CMPLT_NO_ROW_SELECTED",[filterId,$(this).val()]);
}else{}};
$(this).unbind().keyup(updateTable);
};
var MP_LAB_UTIL=function(){var m_df=null;
return{HideTooltip:function(){$("div.hvr").remove();
},ShowTooltip:function(evt,tipText){var p=getPosition(evt),top=p.y+30,left=p.x+20;
$("div.hvr").remove();
$('<div class="hvr">'+tipText+"</div>").appendTo("body");
$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
MP_LAB_UTIL.PositionTooltip(event);
},PositionTooltip:function(event){var p=getPosition(event),vp=gvs(),so=gso(),left=p.x-5,top=p.y+20;
var tooltip=$("div.hvr");
if(left+tooltip.width()>vp[1]+so[1]){left=left-40-tooltip.width();
}if(top+tooltip.height()>vp[0]+so[0]){top=top-40-tooltip.height();
}$("div.hvr").css({display:"block",left:left+"px",top:top+"px"});
},GetDateString:function(date,format){var emptyDateRegEx=/([0]{4})(-([0]{2})(-([0]{2})(T([0]{2}):([0]{2})(:([0]{2})(\.([0]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/;
var newDate=new Date();
var bUseFormatter=true;
if(date===undefined){return"";
}if(m_df===null){m_df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
}if(date instanceof Date){newDate=date;
}else{if(date.match(new RegExp(emptyDateRegEx))||date.length==0){return"";
}newDate.setISO8601(date);
}if(format===undefined){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDate2"){format=mp_formatter.DateTimeFormatter.FULL_DATE_4YEAR;
}else{if(format==="shortTime"){format=mp_formatter.DateTimeFormatter.TIME_24HOUR;
}else{if(format==="convertibleDtTm"){format="dd-mmm-yyyy HH:MM:ss";
bUseFormatter=false;
}else{if(format==="mediumDate"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}else{if(format==="shortDateTimeDashed"){format=mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR;
}}}}}}if(bUseFormatter){return m_df.format(newDate,format);
}else{return newDate.format(format);
}},ShowModalDialog:function(text,type,callback){var el;
if(!document.getElementById("confirmDialog")){var centerEl=document.createElement("div");
centerEl.id="centerpoint";
el=document.createElement("div");
el.id="confirmDialog";
centerEl.appendChild(el);
document.body.appendChild(centerEl);
}var id=$("#confirmDialog");
switch(type){case 1:id.html("<span class=question>"+text+'</span><br /><hr /><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 2:id.html("<span class=question>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CANCEL+'" id=btnCancel><input type="button" value="'+i18n.lab.NO+'" id=btnNo><input type="button" value="'+i18n.lab.YES+'" id=btnYes></span>');
break;
case 3:id.html("<span class=plainText>"+text+'<br /><hr /><input type="button" value="'+i18n.lab.CLOSE+'" id=btnModalClose></span>');
break;
default:return false;
}if($("#confirmDialog span").hasClass("question")){id.height(75);
id.width(200);
}else{id.width(400);
}var maskHeight=$(document).height();
var maskWidth=$(window).width();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
if(ieVersion==0||ieVersion>=7){var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2).show();
}else{var winH=$(window).height();
var winW=$(window).width();
var p=getPosition(event),top=p.y+30,left=p.x+20;
id.css("top",top+"px").css("left",left+"px").show();
}$("#confirmDialog").unbind().bind("click",function(e){var result=0;
if($(e.target).is("#btnYes")){result=1;
}else{if($(e.target).is("#btnNo")){result=2;
}else{if($(e.target).is("#btnCancel")){result=3;
}else{if($(e.target).is("#btnModalClose")){result=4;
}}}}if(result>0){$("#mask").hide();
$("#confirmDialog").hide();
if((callback!==undefined)&&$.isFunction(callback)){callback(result);
}return true;
}});
},GetPagePrefs:function(nAppNbr,sPrefSection,callback,async){var isAsync=typeof(async)=="boolean"?async:true;
var paramsAr=[];
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.GETPAGEPREFS.O1 - retrieving page prefs","PCS_GET_MPAGE_PREF",paramsAr,isAsync,function(recordData,failure){if(!failure){if(recordData.SSETTINGS==""){callback();
}else{var sReplaced=recordData.SETTINGSJSON.replace(/\u0001/g,'"');
try{var paramName="settingsJSON=";
if(sReplaced.indexOf(paramName)==0&&sReplaced.length>=paramName.length){sReplaced=sReplaced.substr(paramName.length,sReplaced.length-paramName.length);
}sReplaced=sReplaced.replace(/\__EQLS__/g,"=");
var sSettingsJSON=JSON.parse(sReplaced);
callback(sSettingsJSON);
}catch(err){callback();
}}}});
},SetPagePrefs:function(nAppNbr,sPrefSection,oParams,callback){var paramsAr=[];
var replaceQuotes=JSON.stringify(oParams).replace(/"/g,"\u0001");
replaceQuotes=replaceQuotes.replace(/\=/g,"__EQLS__");
replaceQuotes="settingsJSON="+replaceQuotes+"\r\n";
paramsAr.push("MINE",nAppNbr+".00","'"+sPrefSection+"'","^"+replaceQuotes+"^");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.SETPAGEPREFS.O1 - saving page prefs","PCS_UPD_MPAGE_PREF",paramsAr,true,callback);
},ItemInArray:function(array,item){var j=0;
while(j<array.length){if(array[j]==item){return true;
}else{j++;
}}return false;
},MakeTableSortable:function(tablename,zebra){if(zebra){$(tablename).tablesorter({widgets:["zebra"],widgetZebra:{css:["data-evenrow","data-oddrow"]}});
}else{$(tablename).tablesorter();
}$(tablename).bind("sortEnd",function(){$(tablename+" .firstChild").removeClass("firstChild");
var val=$(tablename+" tbody tr:first-child td");
val.addClass("firstChild");
});
},Strip_Tags:function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");
var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("<"+$1.toLowerCase()+">")>-1?$0:"";
});
}};
}();
var MP_LAB_RESULT=function(){function getRefRange(item,result,textOnly){var stSpan=" ";
var endSpan=" ";
var strFlags="";
var sRefRange="";
if(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
stSpan='<span class="result-critical" title="Reference Range" id="'+sRefRange+'">';
endSpan="</span>";
}else{if(item.NORMAL_RANGE_FLAG!==undefined){switch(item.NORMAL_RANGE_FLAG){case 1:sRefRange=item.NORMAL_LOW;
break;
case 2:sRefRange=item.NORMAL_HIGH;
break;
case 3:sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
break;
default:sRefRange=item.NORMAL_ALPHA.trim();
}}else{if(item.NORMAL_ALPHA!==undefined){if(item.NORMAL_HIGH>0||item.NORMAL_LOW>0||item.NORMAL_ALPHA.length>0){if(item.NORMAL_HIGH>0){sRefRange=item.NORMAL_LOW+" - "+item.NORMAL_HIGH;
}else{sRefRange=item.NORMAL_ALPHA.trim();
}}}}stSpan='<span class="result-norm" title="Reference Range" id=">= '+sRefRange+'">';
endSpan="</span>";
}if(textOnly){return sRefRange;
}else{return stSpan+result+endSpan;
}}function getResultProcessFlags(sText,item){if((item.DILUTION_FACTOR!==undefined)&&(item.DILUTION_FACTOR>0)){sText+="x"+item.DILUTION_FACTOR+" ";
}switch(item.NORMAL_MEAN.trim()){case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_HIGH:case MP_LAB_RESULT.PROCESS_MEAN.NORMAL_LOW:case MP_LAB_RESULT.PROCESS_MEAN.ALP_ABNORMAL:sText+=item.NORMAL_DISP.trim();
break;
}if(item.CRITICAL_MEAN!==undefined){if((item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.CRITICAL)||(item.CRITICAL_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_CRITICAL)){sText+=item.CRITICAL_DISP.trim();
}}if(item.REVIEW_MEAN!==undefined){if((item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.REVIEW)||(item.REVIEW_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_REVIEW)){sText+=item.REVIEW_DISP.trim();
}}if(item.LINEAR_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.LINEAR){sText+=item.LINEAR_DISP.trim();
}if(item.FEASIBLE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.FEASIBLE){sText+=item.FEASIBLE_DISP.trim();
}if(item.DELTA_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.DELTA_FAIL){sText+=item.DELTA_DISP.trim();
}if(item.INTERP_DATA_ID>0){sText+="(i)";
}if(item.QC_OVERRIDE_MEAN!==undefined){if(item.QC_OVERRIDE_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.QCOVERRIDE){sText+=item.QC_OVERRIDE_DISP.trim();
}}if(item.NOTIFY_MEAN!==undefined){if(item.NOTIFY_MEAN.trim()==MP_LAB_RESULT.PROCESS_MEAN.ALP_NOTIFY){sText+=item.NOTIFY_DISP.trim();
}}if((item.NOMENCLATURE_ID>0)&&(item.LONG_TEXT_ID>0)){sText+="(t)";
}return sText;
}return{STATUS_MEAN:{PERFORMED:"PERFORMED",INREVIEW:"INREVIEW",VERIFIED:"VERIFIED",AUTOVERIFIED:"AUTOVERIFIED"},TYPE:{TEXT:"1",ALPHA:"2",NUMERIC:"3",INTERP:"4",MULTI_ALPHA:"5",DATE:"6",FREETEXT:"7",CALC:"8",CODESET:"9",TIME:"10",DATE_TIME:"11",COUNT:"13",YES_NO:"18",ALPHA_FREETEXT:"21"},PROCESS_MEAN:{ALP_ABNORMAL:"ALP_ABNORMAL",NORMAL_HIGH:"NORMAL_HIGH",NORMAL_LOW:"NORMAL_LOW",ALP_CRITICAL:"ALP_CRITICAL",CRITICAL:"CRITICAL",REVIEW:"REVIEW",ALP_REVIEW:"ALP_REVIEW",DELTA_FAIL:"DELTA_FAIL",FEASIBLE:"FEASIBLE",LINEAR:"LINEAR",ALP_NOTIFY:"ALP_NOTIFY",NOTIFY:"NOTIFY",QCOVERRIDE:"QC_OVERRIDE"},GetLabResult:function(item){var result="",sText="";
switch(item.RESULT_TYPE_MEAN.trim()){case MP_LAB_RESULT.TYPE.TEXT:case MP_LAB_RESULT.TYPE.FREETEXT:sText="";
if(item.ASCII_TEXT.trim().length>30){result=item.ASCII_TEXT.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}if(item.RESULT_TYPE_MEAN.trim()==MP_LAB_RESULT.TYPE.FREETEXT){result+=" "+getResultProcessFlags(sText,item);
}break;
case MP_LAB_RESULT.TYPE.ALPHA:sText="";
result=item.RESULT_VALUE_ALPHA;
result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.INTERP:sText="";
if(!item.ASCII_TEXT_LONG){item.ASCII_TEXT_LONG="";
}if(item.RESULT_VALUE_ALPHA.trim().length>0){result=item.RESULT_VALUE_ALPHA.trim();
result+=" "+getResultProcessFlags(sText,item);
if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){result+='<input class="btnMoreText" type="button" value="..."/>';
}}else{if((item.ASCII_TEXT.trim().length>0)||(item.ASCII_TEXT_LONG.trim().length>0)){if(item.ASCII_TEXT_LONG.trim().length>0){result=item.ASCII_TEXT_LONG.substring(0,30)+'<input class="btnMoreText" type="button" value="..."/>';
}else{result=item.ASCII_TEXT;
}}else{if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
}}break;
case MP_LAB_RESULT.TYPE.CALC:case MP_LAB_RESULT.TYPE.NUMERIC:if((item.FORMATTED_RESULT!==undefined)&&(item.FORMATTED_RESULT.trim().length>0)){result=item.FORMATTED_RESULT;
}else{if(item.ASCII_TEXT.trim().length>0){result=item.ASCII_TEXT;
}else{result=item.RESULT_VALUE_NUMERIC;
}}result+=" "+getResultProcessFlags(sText,item);
break;
case MP_LAB_RESULT.TYPE.DATE:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortDate2");
break;
case MP_LAB_RESULT.TYPE.DATE_TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM);
break;
case MP_LAB_RESULT.TYPE.TIME:result=MP_LAB_UTIL.GetDateString(item.RESULT_VALUE_DT_TM,"shortTime");
break;
case MP_LAB_RESULT.TYPE.CODESET:result=item.RESULT_CODE_SET_DISP;
break;
default:result=item.ASCII_TEXT.trim();
}return getRefRange(item,result);
},GetRefRangeText:function(item){return getRefRange(item,"",true);
}};
}();
if(window.APPLINK){var runApp=function(params){APPLINK(0,"labapplauncher.exe",params);
};
}else{var runApp=function(params){mywindow=window.open("cernerlablaunch://"+params,"mylauncherwindow","scrollbars=yes,copyhistory=no,resizable=yes");
mywindow.close();
};
}var MP_LAB_CONSOLE=function(){var sImgPath="./images/lab/";
var sShimImgPath="./images/lab/shim.png";
var m_majorComponents=[];
var m_tatComponents=[];
var m_orderListComponents=[];
var m_nOrderDetailsTabNum=-1;
var m_sOrderDetailsTabName="";
var consoleSettings={debugMode:true,defaultSR:1,allAboutLink:"http://wiki.ucern.com/pages/viewpage.action?pageId=12141152"};
var m_Person={FULL_NAME:"",PERSON_ID:0};
var m_Accession={accession:"",activityType:"",accession_fmtd:""};
var m_Order={};
var m_Result={ASSAY_CD:0,TASK_ASSAY_DISP:"",COLLECTED_DT_TM:"",ACCESSION_FMTD:"",ORDER_MNEMONIC:"",ORDER_ID:0,ORDER_COMMENT_IND:0,ASSAY_MNEMONIC:"",RESULT_ID:0,RESULT_COMMENT_IND:0};
function BuildPageHeader(){var sTitleBarHtml=[];
sTitleBarHtml.push('<span id="navtoolbar"><ul>');
sTitleBarHtml.push('<li id="navSummaryMenu" class="summaryMenu"><a  href="javascript:" tabindex="50" id="summaryMenu"><span>'+i18n.lab.labconsole_o1.APPS+"</span></a>",'<ul id="appMenu" class="subnav">','<li id="launchARE" title="'+i18n.lab.labconsole_o1.ARE+'"><a href="javascript:">'+i18n.lab.labconsole_o1.ARE+"</a></li>",'<li id="launchLBLREPRINT" title="'+i18n.lab.labconsole_o1.LABEL_REPRINT+'"> <a href="javascript:">'+i18n.lab.labconsole_o1.LABEL_REPRINT+"</a></li>",'<li id="launchCLINVAL" title="'+i18n.lab.labconsole_o1.CLIN_VAL+'"><a href="javascript:">'+i18n.lab.labconsole_o1.CLIN_VAL+"</a></li>",'<li> <hr width="5%"/></li>','<li id="launchAllAbout" title="'+i18n.lab.labconsole_o1.ALL_ABOUT_CONSOLE+'"><a href="'+consoleSettings.allAboutLink+'" target="_blank">'+i18n.lab.labconsole_o1.ALL_ABOUT_CONSOLE+"</a></li>","</ul>","</li>");
sTitleBarHtml.push('<li id="curSRText" class="launchSRSelect">'+i18n.lab.labconsole_o1.LOADING_SR+'...<a href="javascript:">    </a></li>');
sTitleBarHtml.push('<li><span id="topFilter"><label title="'+i18n.lab.labconsole_o1.FILTER_DESC_TOP+'">'+i18n.lab.labconsole_o1.FILTER+':</label><input type="text" size=25 id="ALLfilter"/></span> </li>');
sTitleBarHtml.push("</ul></span>");
$(".pg-hd h1").eq(0).after(sTitleBarHtml.join(""));
$("li.summaryMenu").hover(function(){$("ul",this).css("display","block");
},function(){$("ul",this).css("display","none");
});
$("#launchARE").click(function(){var accession="";
switch(MP_LAB_CONSOLE.GetActiveAccession().ACTIVITY_TYPE_MEAN.trim()){case"GLB":case"HLA":accession=MP_LAB_CONSOLE.GetActiveAccession().ACCESSION;
break;
default:accession="";
}if(accession.trim().length>0){accession=MP_LAB_CONSOLE.GetActiveAccession().ACCESSION_FMTD;
MP_LAB_UTIL.ShowModalDialog(i18n.lab.labconsole_o1.GO_TO+" "+i18n.lab.labconsole_o1.ARE+" "+i18n.lab.labconsole_o1.WITH_ACCN+" "+accession+"?",2,function(val){switch(val){case 1:runApp("ARE "+accession);
break;
case 2:runApp("ARE");
break;
default:return false;
}});
}else{runApp("ARE");
}});
$("#launchLBLREPRINT").click(function(){var accession=MP_LAB_CONSOLE.GetActiveAccession().ACCESSION;
if(accession.trim().length>0){MP_LAB_UTIL.ShowModalDialog(i18n.lab.labconsole_o1.GO_TO+" "+i18n.lab.labconsole_o1.LABEL_REPRINT+" "+i18n.lab.labconsole_o1.WITH_ACCN+" "+MP_LAB_CONSOLE.GetActiveAccession().ACCESSION_FMTD+"?",2,function(val){switch(val){case 1:runApp("LBLREPRINT "+MP_LAB_CONSOLE.GetActiveAccession().ACCESSION);
break;
case 2:runApp("LBLREPRINT");
break;
default:return false;
}});
}else{runApp("LBLREPRINT");
}});
$("#launchCLINVAL").click(function(){runApp("REVIEWQ");
});
$("body").bind("LABCONSOLE.CLEAR_GLOBAL_FILTER",function(e){var filt=$("#ALLfilter");
filt.val("");
filt.keyup();
});
}function FindMajorComponents(){var n_comp=CERN_MPageComponents.length;
for(var x=0;
x<n_comp;
x++){var comp=CERN_MPageComponents[x];
var compId=comp.getComponentId();
if(comp instanceof TATMonitorComponent){m_tatComponents.push(compId);
m_majorComponents.push(compId);
}else{if(comp instanceof OrderListComponent){m_orderListComponents.push(compId);
m_majorComponents.push(compId);
}else{if(comp instanceof InstrumentActivityComponent||comp instanceof PendingOrdersComponent){m_majorComponents.push(compId);
}}}}}function i18nSRMeaning(srMean){srMean=srMean.trim();
if(srMean==="INSTITUTION"){return i18n.lab.INSTITUTION;
}else{if(srMean==="DEPARTMENT"){return i18n.lab.DEPARTMENT;
}else{if(srMean==="SECTION"){return i18n.lab.SECTION;
}else{if(srMean==="SUBSECTION"){return i18n.lab.SUBSECTION;
}else{if(srMean==="BENCH"){return i18n.lab.BENCH;
}else{if(srMean==="INSTRUMENT"){return i18n.lab.INSTRUMENT;
}else{return"";
}}}}}}}function ProcessSRChange(){if(MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD==0&&consoleSettings.defaultSR>0){if(!MP_LAB_SR.GetServiceResource().TRIED_DEFAULT_SR){MP_LAB_SR.SetServiceResource(consoleSettings.defaultSR,true);
}}$("#curSRText").replaceWith('<li id="curSRText" class="launchSRSelect padleft">'+i18n.lab.SERVICE_RESOURCE+': <a id="globalSRSelect" href="javascript:">'+MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_DISP+" "+i18nSRMeaning(MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_MEAN)+"</a></li>");
$("#globalSRSelect").click(function(e){MP_LAB_SR.ShowSRDialog(e,MP_LAB_SR.GetServiceResource());
return false;
});
consoleSettings.defaultSR=MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD;
if(consoleSettings.defaultSR>0){MP_LAB_UTIL.SetPagePrefs(1050009,"Lab Console General",consoleSettings,function(recordData){return false;
});
}m_Accession={accession:"",activityType:"",accession_fmtd:""};
m_CurPerson={FULL_NAME:"",PERSON_ID:0};
m_Order={ACCESSION:"",ORDER_ID:0,ORDER_MNEMONIC:"",ORDER_COMMENT_IND:0};
m_Result={ASSAY_CD:0,TASK_ASSAY_DISP:"",COLLECTED_DT_TM:"",ACCESSION_FMTD:"",ORDER_MNEMONIC:"",ORDER_ID:0,ORDER_COMMENT_IND:0,ASSAY_MNEMONIC:"",RESULT_ID:0,RESULT_COMMENT_IND:0};
$("body").trigger("LABCONSOLE.CLEAR_SR_RELATED");
return false;
}return{HideSRColumn:function(hide){var serviceResource=MP_LAB_SR.GetServiceResource();
var hide=false;
if((serviceResource.SERVICE_RESOURCE_MEAN.trim()=="BENCH")||(serviceResource.SERVICE_RESOURCE_MEAN.trim()=="INSTRUMENT")){hide=true;
}serviceResource=null;
return hide;
},ShowOrderDetailsView:function(order_id){if(m_nOrderDetailsTabNum>=0){MP_Util.DisplaySelectedTab(m_sOrderDetailsTabName,"a-tab"+m_nOrderDetailsTabNum);
$("body").trigger("LABCONSOLE.POL_ROW_SELECT",[{ORDER_ID:order_id}]);
}},LoadOrderDetails:function(order,isOrderList){if(order!=null){MP_LAB_CONSOLE.SetActiveOrder(order);
$("body").trigger("LABCONSOLE.LOAD_ORDER_DETAILS",[isOrderList]);
}return true;
},SetSelectedRow:function(row,compId,is_a_sync){var needsColorRefresh;
var tatrow;
var isTAT=false;
if(MP_LAB_UTIL.ItemInArray(m_majorComponents,compId)){if(!is_a_sync){var j=0;
var foundRowInTAT=false;
while(j<m_tatComponents.length){tatrow=$("#tatmonitorContent"+m_tatComponents[j]+" tbody").find("tr.rowSelectedMajor");
if(tatrow.length>0){$("body").trigger("LABCONSOLE.TAT_COLOR_REFRESH",[m_tatComponents[j],tatrow.removeClass("rowSelectedMajor"),true]);
foundRowInTAT=true;
}j++;
}if(!foundRowInTAT){var j=0;
var colLen=m_majorComponents.length;
while(j<colLen){$("#table-"+m_majorComponents[j++]+" tbody").find("tr").removeClass("rowSelectedMajor");
}}}if(row!=null){$(row).addClass("rowSelectedMajor");
}if(MP_LAB_UTIL.ItemInArray(m_tatComponents,compId)){isTAT=true;
needsColorRefresh=$("#tatmonitorContent"+compId+" tbody").find("tr").hasClass("rowSelectedMajor");
if(needsColorRefresh){$("body").trigger("LABCONSOLE.TAT_COLOR_REFRESH",[compId,$(row),false]);
}}if(!is_a_sync){var row_id="";
var compItrId="";
if(MP_LAB_UTIL.ItemInArray(m_orderListComponents,compId)){rowId=$(row).attr("id");
j=0;
colLen=m_orderListComponents.length;
while(j<colLen){compItrId=m_orderListComponents[j++];
if(compId!=compItrId){MP_LAB_CONSOLE.SetSelectedRow($("#"+rowId,"#table-"+compItrId),compItrId,true);
}}}else{if(isTAT){rowId=$(row).attr("id");
j=0;
colLen=m_tatComponents.length;
while(j<colLen){compItrId=m_tatComponents[j++];
if(compId!=compItrId){MP_LAB_CONSOLE.SetSelectedRow($("#"+rowId,"#table-"+compItrId),compItrId,true);
}}}}}}else{$(row).parents("tbody").find("tr").removeClass("rowSelected");
$(row).addClass("rowSelected");
}},StartUp:function(criterion){sImgPath=criterion.static_content+"/images/lab/";
sShimImgPath=criterion.static_content+"/images/lab/shim.png";
MP_LAB_UTIL.GetPagePrefs(1050009,"Lab Console General",function(sSettingsJSON){consoleSettings=sSettingsJSON?$.extend(consoleSettings,sSettingsJSON):consoleSettings;
MP_LAB_SR.LoadServiceResources();
BuildPageHeader();
FindMajorComponents();
});
$("body").bind("LABCONSOLE.GLOBAL_SR_CHANGED",function(){ProcessSRChange();
});
},SetActivePerson:function(data){m_Person=data;
},GetActivePerson:function(){return m_Person;
},SetActiveOrder:function(data){m_Order=data;
},GetActiveOrder:function(){return m_Order;
},SetActiveResult:function(data){m_Result=data;
},GetActiveResult:function(){return m_Result;
},SetActiveAccession:function(data){m_Accession=data;
},GetActiveAccession:function(){return m_Accession;
},SetHelpLink:function(){consoleSettings.allAboutLink=url;
},SetDebugMode:function(debug){consoleSettings.debugMode=debug;
},GetImgPath:function(){return sImgPath;
},GetShimImgPath:function(){return sShimImgPath;
},SetOrderDetailsTab:function(sTabName,nTabNum){m_sOrderDetailsTabName=sTabName;
m_nOrderDetailsTabNum=nTabNum-1;
},GetOrderDetailsTab:function(){return{TAB_NUMBER:m_nOrderDetailsTabNum+1,TAB_NAME:m_sOrderDetailsTabName};
},ClearComponent:function(component,hasControl){var compId=component.getComponentId();
var sec=$("#"+component.getStyles().getNameSpace()+compId);
sec.find("tbody").empty();
sec.find(".sec-total").text("");
if(hasControl){sec.find(".control-status").text(i18n.NO_DATA);
sec.find(".btnNext").attr("disabled","disabled");
sec.find(".btnRefrest").attr("disabled","disabled");
}},GetCalendarFmt:function(){var i18nFMT=dateFormat.masks.shortDate2.replace(/\//g,"").replace(/\-/g,"").replace(/\./g,"").toUpperCase();
switch(i18nFMT){case"MMDDYYYY":case"MMMDDYYYY":case"DDMMYYYY":case"DDMMMYYYY":case"YYYYMMDD":case"YYYYMMMDD":case"YYMMDD":case"YYMMMDD":return(i18nFMT);
}return"MMDDYYYY";
}};
}();
Function.prototype.method=function(name,func){this.prototype[name]=func;
return this;
};
Function.method("inherits",function(Parent){var d={},p=(this.prototype=new Parent());
this.method("uber",function uber(name){if(!(name in d)){d[name]=0;
}var f,r,t=d[name],v=Parent.prototype;
if(t){while(t){v=v.constructor.prototype;
t-=1;
}f=v[name];
}else{f=p[name];
if(f==this[name]){f=v[name];
}}d[name]+=1;
r=f.apply(this,Array.prototype.slice.apply(arguments,[1]));
d[name]-=1;
return r;
});
return this;
});
function MPageComponent(){this.m_componentId=0;
this.m_reportId=0;
this.m_label="";
this.m_column=0;
this.m_sequence=0;
this.m_link="";
this.m_totalResults=false;
this.m_xOFy=false;
this.m_isExpanded=false;
this.m_isAlwaysExpanded=false;
this.m_scrollNumber=0;
this.m_isScrollEnabled=false;
this.m_styles=null;
this.m_groups=null;
this.m_pageGroupSeq=0;
this.m_lookbackDays=0;
this.m_newLink=false;
this.criterion=null;
this.m_isPlusAdd=false;
this.m_scope=0;
this.m_rootComponentNode=null;
this.m_sectionContentNode=null;
this.m_compLoadTimerName="";
this.m_compRenderTimerName="";
this.m_includeLineNumber=false;
this.m_lookbackUnitTypeFlag=0;
this.m_lookbackUnits=0;
this.m_dateFormat=2;
this.m_isCustomizeView=false;
this.m_menuItems=null;
this.m_displayFilters=null;
this.m_AutoSuggestScript="";
this.m_AutoSuggestAddTimerName="";
MPageComponent.method("isDisplayable",function(){if(this.m_displayFilters!==null&&this.m_displayFilters.length>0){for(var x=this.m_displayFilters.length;
x--;
){var displayFilter=this.m_displayFilters[x];
if(displayFilter.checkFilters()===false){CERN_EventListener.removeAllListeners(this,this);
return false;
}}}return true;
});
MPageComponent.method("getDisplayFilters",function(){return this.m_displayFilters;
});
MPageComponent.method("setDisplayFilters",function(value){this.m_displayFilters=value;
});
MPageComponent.method("addDisplayFilter",function(value){if(this.m_displayFilters===null){this.m_displayFilters=[];
}this.m_displayFilters.push(value);
});
MPageComponent.method("getMenuItems",function(){return this.m_menuItems;
});
MPageComponent.method("setMenuItems",function(value){this.m_menuItems=value;
});
MPageComponent.method("addMenuItem",function(value){if(this.m_menuItems===null){this.m_menuItems=[];
}this.m_menuItems.push(value);
});
MPageComponent.method("getCustomizeView",function(){return this.m_isCustomizeView;
});
MPageComponent.method("setCustomizeView",function(value){this.m_isCustomizeView=value;
});
MPageComponent.method("InsertData",function(){alert("ERROR: InsertData has not been implemented within the component");
});
MPageComponent.method("HandleSuccess",function(){alert("ERROR: HandleSuccess has not been implemented within the component");
});
MPageComponent.method("openTab",function(){alert("ERROR: openTab has not been implemented within the component");
});
MPageComponent.method("getComponentLoadTimerName",function(){return(this.m_compLoadTimerName);
});
MPageComponent.method("setComponentLoadTimerName",function(value){this.m_compLoadTimerName=value;
});
MPageComponent.method("getComponentRenderTimerName",function(){return(this.m_compRenderTimerName);
});
MPageComponent.method("setComponentRenderTimerName",function(value){this.m_compRenderTimerName=value;
});
MPageComponent.method("getRootComponentNode",function(){if(this.m_rootComponentNode===null){var style=this.getStyles();
this.m_rootComponentNode=_g(style.getId());
}return(this.m_rootComponentNode);
});
MPageComponent.method("setRootComponentNode",function(value){this.m_rootComponentNode=value;
});
MPageComponent.method("getSectionContentNode",function(){if(this.m_sectionContentNode===null){var style=this.getStyles();
this.m_sectionContentNode=_g(style.getContentId());
}return(this.m_sectionContentNode);
});
MPageComponent.method("setSectionContentNode",function(value){this.m_sectionContentNode=value;
});
MPageComponent.method("getMPageName",function(){return(this.m_MPageName);
});
MPageComponent.method("setMPageName",function(value){this.m_MPageName=value;
});
MPageComponent.method("getScope",function(){return(this.m_scope);
});
MPageComponent.method("setScope",function(value){this.m_scope=value;
});
MPageComponent.method("isPlusAddEnabled",function(){return(this.m_isPlusAdd);
});
MPageComponent.method("setPlusAddEnabled",function(value){this.m_isPlusAdd=value;
});
MPageComponent.method("getCriterion",function(){return(this.criterion);
});
MPageComponent.method("setCriterion",function(value){this.criterion=value;
});
MPageComponent.method("isNewLink",function(){return(this.m_newLink);
});
MPageComponent.method("setNewLink",function(value){this.m_newLink=value;
});
MPageComponent.method("getPageGroupSequence",function(){return(this.m_pageGroupSeq);
});
MPageComponent.method("setPageGroupSequence",function(value){this.m_pageGroupSeq=value;
});
MPageComponent.method("getLookbackDays",function(){return(this.m_lookbackDays);
});
MPageComponent.method("setLookbackDays",function(value){this.m_lookbackDays=value;
});
MPageComponent.method("getComponentId",function(){return(this.m_componentId);
});
MPageComponent.method("setComponentId",function(value){this.m_componentId=value;
var styles=this.getStyles();
if(styles!==null){styles.setComponentId(value);
}});
MPageComponent.method("getReportId",function(){return(this.m_reportId);
});
MPageComponent.method("setReportId",function(value){this.m_reportId=value;
});
MPageComponent.method("getLabel",function(){return(this.m_label);
});
MPageComponent.method("setLabel",function(value){this.m_label=value;
});
MPageComponent.method("getColumn",function(){return(this.m_column);
});
MPageComponent.method("setColumn",function(value){this.m_column=value;
});
MPageComponent.method("getSequence",function(){return(this.m_sequence);
});
MPageComponent.method("setSequence",function(value){this.m_sequence=value;
});
MPageComponent.method("getLink",function(){return(this.m_link);
});
MPageComponent.method("setLink",function(value){this.m_link=value;
});
MPageComponent.method("isResultsDisplayEnabled",function(){return(this.m_totalResults);
});
MPageComponent.method("setResultsDisplayEnabled",function(value){this.m_totalResults=value;
});
MPageComponent.method("isXofYEnabled",function(){return(this.m_xOFy);
});
MPageComponent.method("setXofYEnabled",function(value){this.m_xOFy=value;
});
MPageComponent.method("isExpanded",function(){return(this.m_isExpanded);
});
MPageComponent.method("setExpanded",function(value){this.m_isExpanded=value;
});
MPageComponent.method("isAlwaysExpanded",function(){return(this.m_isAlwaysExpanded);
});
MPageComponent.method("setAlwaysExpanded",function(value){this.m_isAlwaysExpanded=value;
});
MPageComponent.method("getScrollNumber",function(){return(this.m_scrollNumber);
});
MPageComponent.method("setScrollNumber",function(value){this.m_scrollNumber=value;
});
MPageComponent.method("isScrollingEnabled",function(){return(this.m_isScrollEnabled);
});
MPageComponent.method("setScrollingEnabled",function(value){this.m_isScrollEnabled=value;
});
MPageComponent.method("getStyles",function(){return(this.m_styles);
});
MPageComponent.method("setStyles",function(value){this.m_styles=value;
});
MPageComponent.method("getFilters",function(){return(this.m_filters);
});
MPageComponent.method("getGroups",function(){if(this.m_groups===null){this.m_groups=[];
}return(this.m_groups);
});
MPageComponent.method("setGroups",function(value){this.m_groups=value;
});
MPageComponent.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
MPageComponent.method("getLookbackUnitTypeFlag",function(){return(this.m_lookbackUnitTypeFlag);
});
MPageComponent.method("setLookbackUnitTypeFlag",function(value){this.m_lookbackUnitTypeFlag=value;
});
MPageComponent.method("getLookbackUnits",function(){return(this.m_lookbackUnits);
});
MPageComponent.method("setLookbackUnits",function(value){this.m_lookbackUnits=value;
});
MPageComponent.method("isLineNumberIncluded",function(){return this.m_includeLineNumber;
});
MPageComponent.method("setIncludeLineNumber",function(value){this.m_includeLineNumber=value;
});
MPageComponent.method("getDateFormat",function(){return(this.m_dateFormat);
});
MPageComponent.method("setDateFormat",function(value){this.m_dateFormat=value;
});
MPageComponent.method("setAutoSuggestAddScript",function(value){this.m_AutoSuggestScript=value;
});
MPageComponent.method("getAutoSuggestAddScript",function(){return(this.m_AutoSuggestScript);
});
MPageComponent.method("setAutoSuggestAddTimerName",function(value){this.m_AutoSuggestAddTimerName=value;
});
MPageComponent.method("getAutoSuggestAddTimerName",function(){return(this.m_AutoSuggestAddTimerName);
});
}function MPageGrouper(){this.m_groups=null;
MPageGrouper.method("setGroups",function(value){this.m_groups=value;
});
MPageGrouper.method("getGroups",function(){return this.m_groups;
});
MPageGrouper.method("addGroup",function(value){if(this.m_groups===null){this.m_groups=[];
}this.m_groups.push(value);
});
}MPageGrouper.inherits(MPageGroup);
function MPageGroup(){this.m_groupName="";
this.m_groupSeq=0;
this.m_groupId=0;
MPageGroup.method("setGroupId",function(value){this.m_groupId=value;
});
MPageGroup.method("getGroupId",function(){return this.m_groupId;
});
MPageGroup.method("setGroupName",function(value){this.m_groupName=value;
});
MPageGroup.method("getGroupName",function(){return this.m_groupName;
});
MPageGroup.method("setSequence",function(value){this.m_groupSeq=value;
});
MPageGroup.method("getSequence",function(){return this.m_groupSeq;
});
}function MPageEventSetGroup(){this.m_eventSets=null;
this.m_isSequenced=false;
MPageEventSetGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventSetGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventSetGroup.method("getEventSets",function(){return this.m_eventSets;
});
MPageEventSetGroup.method("setEventSets",function(value){this.m_eventSets=value;
});
MPageEventSetGroup.method("addEventSet",function(value){if(this.m_eventSets===null){this.m_eventSets=[];
}this.m_eventSets.push(value);
});
}MPageEventSetGroup.inherits(MPageGroup);
function MPageEventCodeGroup(){this.m_eventCodes=null;
this.m_isSequenced=false;
MPageEventCodeGroup.method("isSequenced",function(){return this.m_isSequenced;
});
MPageEventCodeGroup.method("setSequenced",function(value){this.m_isSequenced=value;
});
MPageEventCodeGroup.method("getEventCodes",function(){return this.m_eventCodes;
});
MPageEventCodeGroup.method("setEventCodes",function(value){this.m_eventCodes=value;
});
MPageEventCodeGroup.method("addEventCode",function(value){if(this.m_eventCodes===null){this.m_eventCodes=[];
}this.m_eventCodes.push(value);
});
}MPageEventCodeGroup.inherits(MPageGroup);
function MPageCodeValueGroup(){this.m_codes=null;
MPageCodeValueGroup.method("getCodes",function(){return this.m_codes;
});
MPageCodeValueGroup.method("setCodes",function(value){this.m_codes=value;
});
MPageCodeValueGroup.method("addCode",function(value){if(this.m_codes===null){this.m_codes=[];
}this.m_codes.push(value);
});
}MPageCodeValueGroup.inherits(MPageGroup);
function MPageSequenceGroup(){this.m_items=null;
this.m_mapItems=null;
this.m_isMultiType=false;
MPageSequenceGroup.method("getItems",function(){return this.m_items;
});
MPageSequenceGroup.method("setItems",function(value){this.m_items=value;
});
MPageSequenceGroup.method("addItem",function(value){if(this.m_items===null){this.m_items=[];
}this.m_items.push(value);
});
MPageSequenceGroup.method("setMultiValue",function(value){this.m_isMultiType=value;
});
MPageSequenceGroup.method("isMultiValue",function(){return(this.m_isMultiType);
});
MPageSequenceGroup.method("getMapItems",function(){return this.m_mapItems;
});
MPageSequenceGroup.method("setMapItems",function(value){this.m_mapItems=value;
});
}MPageSequenceGroup.inherits(MPageGroup);
function MPageGroupValue(){this.m_id=0;
this.m_name="";
MPageGroupValue.method("getId",function(){return this.m_id;
});
MPageGroupValue.method("setId",function(value){this.m_id=value;
});
MPageGroupValue.method("getName",function(){return this.m_name;
});
MPageGroupValue.method("setName",function(value){this.m_name=value;
});
}function ComponentStyle(){this.m_nameSpace="";
this.m_id="";
this.m_className="section";
this.m_contentId="";
this.m_contentClass="sec-content";
this.m_headerClass="sec-hd";
this.m_headToggle="sec-hd-tgl";
this.m_secTitle="sec-title";
this.m_aLink="";
this.m_secTotal="sec-total";
this.m_info="";
this.m_componentId=0;
ComponentStyle.method("initByNamespace",function(value){this.m_nameSpace=value;
this.m_id=value;
this.m_className+=(" "+value+"-sec");
this.m_contentId=value+"Content";
this.m_aLink=value+"Link";
this.m_info=value+"-info";
});
ComponentStyle.method("getNameSpace",function(){return this.m_nameSpace;
});
ComponentStyle.method("getId",function(){return this.m_id+this.m_componentId;
});
ComponentStyle.method("getClassName",function(){return this.m_className;
});
ComponentStyle.method("getContentId",function(){return this.m_contentId+this.m_componentId;
});
ComponentStyle.method("getContentClass",function(){return this.m_contentClass;
});
ComponentStyle.method("getHeaderClass",function(){return this.m_headerClass;
});
ComponentStyle.method("getHeaderToggle",function(){return this.m_headToggle;
});
ComponentStyle.method("getTitle",function(){return this.m_secTitle;
});
ComponentStyle.method("getLink",function(){return this.m_aLink;
});
ComponentStyle.method("getTotal",function(){return this.m_secTotal;
});
ComponentStyle.method("getInfo",function(){return this.m_info;
});
ComponentStyle.method("setComponentId",function(value){this.m_componentId=value;
});
ComponentStyle.method("setNameSpace",function(value){this.m_nameSpace=value;
});
ComponentStyle.method("setId",function(value){this.m_id=value;
});
ComponentStyle.method("setClassName",function(value){this.m_className=value;
});
ComponentStyle.method("setContextId",function(value){this.m_contentId=value;
});
ComponentStyle.method("setContextClass",function(value){this.m_contentClass=value;
});
ComponentStyle.method("setHeaderClass",function(value){this.m_headerClass=value;
});
ComponentStyle.method("setHeaderToggle",function(value){this.m_headToggle=value;
});
ComponentStyle.method("setTitle",function(value){this.m_secTitle=value;
});
ComponentStyle.method("setLink",function(value){this.m_aLink=value;
});
ComponentStyle.method("setTotal",function(value){this.m_secTotal=value;
});
ComponentStyle.method("setInfo",function(value){this.m_info=value;
});
}function MPage(){this.pageId=0;
this.name=null;
this.components=null;
this.banner=true;
this.helpFileName="";
this.helpFileURL="";
this.criterion=null;
this.componentIds=null;
this.isCustomizeView=false;
this.m_isCustomizeEnabled=true;
this.m_titleAnchors=null;
MPage.method("getTitleAnchors",function(){return this.m_titleAnchors;
});
MPage.method("setTitleAnchors",function(value){this.m_titleAnchors=value;
});
MPage.method("addTitleAnchor",function(value){if(this.m_titleAnchors===null){this.m_titleAnchors=[];
}this.m_titleAnchors.push(value);
});
MPage.method("getCustomizeEnabled",function(){return this.m_isCustomizeEnabled;
});
MPage.method("setCustomizeEnabled",function(value){this.m_isCustomizeEnabled=value;
});
MPage.method("getCustomizeView",function(){return this.isCustomizeView;
});
MPage.method("setCustomizeView",function(value){this.isCustomizeView=value;
});
MPage.method("getComponentIds",function(){return(this.componentIds);
});
MPage.method("setComponentIds",function(value){this.componentIds=value;
});
MPage.method("addComponentId",function(value){if(this.componentIds===null){this.componentIds=[];
}this.componentIds.push(value);
});
MPage.method("getCriterion",function(){return(this.criterion);
});
MPage.method("setCriterion",function(value){this.criterion=value;
});
MPage.method("getHelpFileName",function(){return this.helpFileName;
});
MPage.method("setHelpFileName",function(value){this.helpFileName=value;
});
MPage.method("getHelpFileURL",function(){return this.helpFileURL;
});
MPage.method("setHelpFileURL",function(value){this.helpFileURL=value;
});
MPage.method("isBannerEnabled",function(){return this.banner;
});
MPage.method("setBannerEnabled",function(value){this.banner=value;
});
MPage.method("getPageId",function(){return this.pageId;
});
MPage.method("setPageId",function(value){this.pageId=value;
});
MPage.method("getName",function(){return this.name;
});
MPage.method("setName",function(value){this.name=value;
});
MPage.method("getComponents",function(){return this.components;
});
MPage.method("setComponents",function(value){this.components=value;
});
MPage.method("addComponent",function(value){if(this.components===null){this.components=[];
}this.components.push(value);
});
}function SortMPageComponentRows(c1,c2){if(c1.getSequence()<c2.getSequence()){return -1;
}if(c1.getSequence()>c2.getSequence()){return 1;
}return 0;
}function SortMPageComponentCols(c1,c2){if(c1.getColumn()<c2.getColumn()){return -1;
}if(c1.getColumn()>c2.getColumn()){return 1;
}return SortMPageComponentRows(c1,c2);
}function SortMPageComponents(c1,c2){if(c1.getPageGroupSequence()<c2.getPageGroupSequence()){return -1;
}if(c1.getPageGroupSequence()>c2.getPageGroupSequence()){return 1;
}return SortMPageComponentCols(c1,c2);
}var CERN_EventListener=null;
var CERN_MPageComponents=null;
var CERN_TabManagers=null;
var STR_PAD_LEFT=1;
var STR_PAD_RIGHT=2;
var STR_PAD_BOTH=3;
var MPAGE_LOCALE=null;
var MPSERVICE_CONNECT_PATH="../../discern/mpages/reports/";
if(!XMLCclRequest){var XMLCclRequest=function(){var xmlHttp;
try{xmlHttp=new XMLHttpRequest();
}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHttp");
}catch(e){}}if(!xmlHttp){alert("Error creating the XMLHttpRequest object.");
}else{return xmlHttp;
}};
var PlaceRequest=function(request,method,program,async,params){request.open(method,MPSERVICE_CONNECT_PATH+program+"?parameters="+params+"&timestamp="+new Date().getTime(),async);
request.send(null);
return true;
};
}else{var PlaceRequest=function(request,method,program,async,params){request.open(method,program,async);
request.send(params);
return true;
};
}Array.prototype.addAll=function(v){if(v&&v.length>0){for(var x=0,xl=v.length;
x<xl;
x++){this.push(v[x]);
}}};
var MP_Core=function(){var m_numFormatter=null;
return{Criterion:function(person_id,encntr_id,provider_id,executable,static_content,position_cd,ppr_cd,debug_ind,help_file_local_ind,category_mean,backend_loc,locale_id){var m_patInfo=null;
var m_prsnlInfo=null;
this.person_id=person_id;
this.encntr_id=encntr_id;
this.provider_id=provider_id;
this.executable=executable;
this.static_content=static_content;
this.position_cd=position_cd;
this.ppr_cd=ppr_cd;
this.debug_ind=debug_ind;
this.help_file_local_ind=help_file_local_ind;
this.category_mean=category_mean;
this.backend_loc=backend_loc;
this.locale_id=(this.debug_ind)?"en_us":locale_id;
this.setPatientInfo=function(value){m_patInfo=value;
};
this.getPatientInfo=function(){return m_patInfo;
};
this.getPersonnelInfo=function(){if(!m_prsnlInfo){m_prsnlInfo=new MP_Core.PersonnelInformation(this.provider_id,this.person_id);
}return m_prsnlInfo;
};
},PatientInformation:function(){var m_dob=null;
var m_sex=null;
this.setSex=function(value){m_sex=value;
};
this.getSex=function(){return m_sex;
};
this.setDOB=function(value){m_dob=value;
};
this.getDOB=function(){return m_dob;
};
},ScriptRequest:function(component,loadTimerName){var m_comp=component;
var m_load=loadTimerName;
var m_name="";
var m_programName="";
var m_params=null;
var m_async=true;
this.getComponent=function(){return m_comp;
};
this.getLoadTimer=function(){return m_load;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setProgramName=function(value){m_programName=value;
};
this.getProgramName=function(){return m_programName;
};
this.setParameters=function(value){m_params=value;
};
this.getParameters=function(){return m_params;
};
this.setAsync=function(value){m_async=value;
};
this.isAsync=function(){return m_async;
};
},ScriptReply:function(component){var m_name="";
var m_status="F";
var m_err="";
var m_resp=null;
var m_comp=component;
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setStatus=function(value){m_status=value;
};
this.getStatus=function(){return m_status;
};
this.setError=function(value){m_err=value;
};
this.getError=function(){return m_err;
};
this.setResponse=function(value){m_resp=value;
};
this.getResponse=function(){return m_resp;
};
this.getComponent=function(){return m_comp;
};
},PersonnelInformation:function(prsnlId,patientId){var m_prsnlId=prsnlId;
var m_viewableEncntrs=null;
var patConObj=null;
try{patConObj=window.external.DiscernObjectFactory("PVCONTXTMPAGE");
if(patConObj){m_viewableEncntrs=patConObj.GetValidEncounters(patientId);
}}catch(e){}finally{patConObj=null;
}this.getPersonnelId=function(){return m_prsnlId;
};
this.getViewableEncounters=function(){return m_viewableEncntrs;
};
},XMLCclRequestWrapper:function(component,program,paramAr,async){var timerLoadComponent=MP_Util.CreateTimer(component.getComponentLoadTimerName(),component.getCriterion().category_mean);
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{if(recordData.STATUS_DATA.STATUS=="S"){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName(),component.getCriterion().category_mean);
try{var rootComponentNode=component.getRootComponentNode();
var secTitle=Util.Style.g("sec-total",rootComponentNode,"span");
secTitle[0].innerHTML=i18nCore.RENDERING_DATA+"...";
component.HandleSuccess(recordData);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}else{var errMsg=[];
var ss=null;
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length===undefined){ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.JS_ERROR,"</b><br /><ul><li>",i18nCore.MESSAGE,": ",err.message,"</li><li>",i18nCore.NAME,": ",err.name,"</li><li>",i18nCore.NUMBER,": ",(err.number&65535),"</li><li>",i18nCore.DESCRIPTION,": ",err.description,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,countText);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(this.readyState==4&&this.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("")),component,"");
if(timerLoadComponent){timerLoadComponent.Abort();
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCclRequestWrapper_notComponent:function(loadTimerName,program,paramAr,async,HandleResponse){var timerLoadComponent=MP_Util.CreateTimer(loadTimerName);
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(info.readyState==4&&info.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){HandleResponse(recordData);
}else{if(recordData.STATUS_DATA.STATUS=="S"){HandleResponse(recordData);
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}}HandleResponse(recordData);
}}}catch(err){log.error(err);
if(timerLoadComponent){timerLoadComponent.Abort();
timerLoadComponent=null;
}}finally{if(timerLoadComponent){timerLoadComponent.Stop();
}}}else{if(info.readyState==4&&info.status!=200){HandleResponse(recordData,true);
if(timerLoadComponent){timerLoadComponent.Abort();
}}}};
PlaceRequest(info,"GET",program,async,paramAr.join(","));
},XMLCCLRequestCallBack:function(component,request,funcCallback){var timerLoad=MP_Util.CreateTimer(request.getLoadTimer());
var i18nCore=i18n.discernabu;
var info=new XMLCclRequest();
var reply=new MP_Core.ScriptReply(component);
reply.setName(request.getName());
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){try{var jsonEval=JSON.parse(info.responseText);
var recordData=jsonEval.RECORD_DATA;
var status=recordData.STATUS_DATA.STATUS;
reply.setStatus(status);
if(status=="Z"){reply.setResponse(recordData);
funcCallback(reply);
}else{if(status=="S"){reply.setResponse(recordData);
funcCallback(reply);
}else{var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li>");
var statusData=recordData.STATUS_DATA;
if(statusData.SUBEVENTSTATUS.length&&statusData.SUBEVENTSTATUS.length>0){for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}else{if(statusData.SUBEVENTSTATUS.length==undefined){var ss=statusData.SUBEVENTSTATUS;
errMsg.push("<li>",i18nCore.ERROR_OPERATION,": ",ss.OPERATIONNAME,"</li><li>",i18nCore.ERROR_OPERATION_STATUS,": ",ss.OPERATIONSTATUS,"</li><li>",i18nCore.ERROR_TARGET_OBJECT,": ",ss.TARGETOBJECTNAME,"</li><li>",i18nCore.ERROR_TARGET_OBJECT_VALUE,": ",ss.TARGETOBJECTVALUE,"</li>");
}}errMsg.push("</ul>");
reply.setError(errMsg.join(""));
funcCallback(reply);
}}}catch(err){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
timerLoad=null;
}}finally{if(timerLoad){timerLoad.Stop();
}}}else{if(info.readyState==4&&info.status!=200){var errMsg=[];
errMsg.push("<b>",i18nCore.DISCERN_ERROR,"</b><br /><ul><li>",i18nCore.STATUS,": ",this.status,"</li><li>",i18nCore.REQUEST,": ",this.requestText,"</li></ul>");
reply.setError(errMsg.join(""));
if(timerLoad){timerLoad.Abort();
}funcCallback(reply);
}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
info.open("GET",request.getProgramName(),request.isAsync());
info.send(request.getParameters().join(","));
},XMLCCLRequestThread:function(name,component,request){var m_name=name;
var m_comp=component;
var m_request=request;
m_request.setName(name);
this.getName=function(){return m_name;
};
this.getComponent=function(){return m_comp;
};
this.getRequest=function(){return m_request;
};
},XMLCCLRequestThreadManager:function(callbackFunction,component,handleFinalize){var m_threads=null;
var m_replyAr=null;
var m_isData=false;
var m_isError=false;
this.addThread=function(thread){if(m_threads==null){m_threads=[];
}m_threads.push(thread);
};
this.begin=function(){if(m_threads&&m_threads.length>0){for(x=m_threads.length;
x--;
){var thread=m_threads[x];
MP_Core.XMLCCLRequestCallBack(thread.getComponent(),thread.getRequest(),this.completeThread);
}}else{if(handleFinalize){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(null,component);
}}};
this.completeThread=function(reply){if(m_replyAr==null){m_replyAr=[];
}if(reply.getStatus()=="S"){m_isData=true;
}else{if(reply.getStatus()=="F"){m_isError=true;
}}m_replyAr.push(reply);
if(m_replyAr.length==m_threads.length){if(handleFinalize){if(m_isError){var errMsg=[];
for(var x=m_replyAr.length;
x--;
){var rep=m_replyAr[x];
if(rep.getStatus()=="F"){errMsg.push(rep.getError());
}}MP_Util.Doc.FinalizeComponent(MP_Util.HandleErrorResponse(component.getStyles().getNameSpace(),errMsg.join("<br />")),component,"");
}else{if(!m_isData){var countText=(component.isLineNumberIncluded()?"(0)":"");
MP_Util.Doc.FinalizeComponent(MP_Util.HandleNoDataResponse(component.getStyles().getNameSpace()),component,countText);
}else{callbackFunction(m_replyAr,component);
}}}else{callbackFunction(m_replyAr,component);
}}};
},MapObject:function(name,value){this.name=name;
this.value=value;
},TabItem:function(key,name,components,prefIdentifier){this.key=key;
this.name=name;
this.components=components;
this.prefIdentifier=prefIdentifier;
},TabManager:function(tabItem){var m_isLoaded=false;
var m_tabItem=tabItem;
var m_isExpandAll=false;
var m_isSelected=false;
this.toggleExpandAll=function(){m_isExpandAll=(!m_isExpandAll);
};
this.loadTab=function(){if(!m_isLoaded){m_isLoaded=true;
var components=m_tabItem.components;
if(components){for(var xl=components.length;
xl--;
){var component=components[xl];
if(component.isDisplayable()){component.InsertData();
}}}}};
this.getTabItem=function(){return m_tabItem;
};
this.getSelectedTab=function(){return m_isSelected;
};
this.setSelectedTab=function(value){m_isSelected=value;
};
},ReferenceRangeResult:function(){var m_valNLow=-1,m_valNHigh=-1,m_valCLow=-1,m_valCHigh=-1;
var m_uomNLow=null,m_uomNHigh=null,m_uomCLow=null,m_uomCHigh=null;
this.init=function(refRange,codeArray){var nf=GetNumericFormatter();
m_valCLow=nf.format(refRange.CRITICAL_LOW.NUMBER);
if(refRange.CRITICAL_LOW.UNIT_CD!=""){m_uomCLow=MP_Util.GetValueFromArray(refRange.CRITICAL_LOW.UNIT_CD,codeArray);
}m_valCHigh=nf.format(refRange.CRITICAL_HIGH.NUMBER);
if(refRange.CRITICAL_HIGH.UNIT_CD!=""){m_uomCHigh=MP_Util.GetValueFromArray(refRange.CRITICAL_HIGH.UNIT_CD,codeArray);
}m_valNLow=nf.format(refRange.NORMAL_LOW.NUMBER);
if(refRange.NORMAL_LOW.UNIT_CD!=""){m_uomNLow=MP_Util.GetValueFromArray(refRange.NORMAL_LOW.UNIT_CD,codeArray);
}m_valNHigh=nf.format(refRange.NORMAL_HIGH.NUMBER);
if(refRange.NORMAL_HIGH.UNIT_CD!=""){m_uomNHigh=MP_Util.GetValueFromArray(refRange.NORMAL_HIGH.UNIT_CD,codeArray);
}};
this.getNormalLow=function(){return m_valNLow;
};
this.getNormalHigh=function(){return m_valNHigh;
};
this.getNormalLowUOM=function(){return m_uomNLow;
};
this.getNormalHighUOM=function(){return m_uomNHigh;
};
this.getCriticalLow=function(){return m_valCLow;
};
this.getCriticalHigh=function(){return m_valCHigh;
};
this.getCriticalLowUOM=function(){return m_uomCLow;
};
this.getCriticalHighUOM=function(){return m_uomCHigh;
};
this.toNormalInlineString=function(){var low=(m_uomNLow!=null)?m_uomNLow.display:"";
var high=(m_uomNHigh!=null)?m_uomNHigh.display:"";
if(m_valNLow!=0||m_valNHigh!=0){return(m_valNLow+"&nbsp;"+low+" - "+m_valNHigh+"&nbsp;"+high);
}else{return"";
}};
this.toCriticalInlineString=function(){var low=(m_uomCLow!=null)?m_uomCLow.display:"";
var high=(m_uomCHigh!=null)?m_uomCHigh.display:"";
if(m_valCLow!=0||m_valCHigh!=0){return(m_valCLow+"&nbsp;"+low+" - "+m_valCHigh+"&nbsp;"+high);
}else{return"";
}};
},QuantityValue:function(){var m_val,m_precision;
var m_uom=null;
var m_refRange=null;
var m_rawValue=0;
var m_hasModifier=false;
this.init=function(result,codeArray){var quantityValue=result.QUANTITY_VALUE;
var referenceRange=result.REFERENCE_RANGE;
for(var l=0,ll=quantityValue.length;
l<ll;
l++){var numRes=quantityValue[l].NUMBER;
m_precision=quantityValue[l].PRECISION;
if(!isNaN(numRes)){m_val=MP_Util.Measurement.SetPrecision(numRes,m_precision);
m_rawValue=numRes;
}if(quantityValue[l].MODIFIER_CD!=""){var modCode=MP_Util.GetValueFromArray(quantityValue[l].MODIFIER_CD,codeArray);
if(modCode!=null){m_val=modCode.display+m_val;
m_hasModifier=true;
}}if(quantityValue[l].UNIT_CD!=""){m_uom=MP_Util.GetValueFromArray(quantityValue[l].UNIT_CD,codeArray);
}for(var m=0,ml=referenceRange.length;
m<ml;
m++){m_refRange=new MP_Core.ReferenceRangeResult();
m_refRange.init(referenceRange[m],codeArray);
}}};
this.getValue=function(){return m_val;
};
this.getRawValue=function(){return m_rawValue;
};
this.getUOM=function(){return m_uom;
};
this.getRefRange=function(){return m_refRange;
};
this.getPrecision=function(){return m_precision;
};
this.toString=function(){if(m_uom!=null){return(m_val+" "+m_uom.display);
}else{return m_val;
}};
this.hasModifier=function(){return m_hasModifier;
};
},Measurement:function(){var m_eventId=0;
var m_personId=0;
var m_encntrId=0;
var m_eventCode=null;
var m_dateTime=null;
var m_updateDateTime=null;
var m_result=null;
var m_normalcy=null;
this.init=function(eventId,personId,encntrId,eventCode,dateTime,resultObj,updateDateTime){m_eventId=eventId;
m_personId=personId;
m_encntrId=encntrId;
m_eventCode=eventCode;
m_dateTime=dateTime;
m_result=resultObj;
m_updateDateTime=updateDateTime;
};
this.getEventId=function(){return m_eventId;
};
this.getPersonId=function(){return m_personId;
};
this.getEncntrId=function(){return m_encntrId;
};
this.getEventCode=function(){return m_eventCode;
};
this.getDateTime=function(){return m_dateTime;
};
this.getUpdateDateTime=function(){return m_updateDateTime;
};
this.getResult=function(){return m_result;
};
this.setNormalcy=function(value){m_normalcy=value;
};
this.getNormalcy=function(){return m_normalcy;
};
},MenuItem:function(){var m_name="";
var m_desc="";
var m_id=0;
this.setDescription=function(value){m_desc=value;
};
this.getDescription=function(){return m_desc;
};
this.setName=function(value){m_name=value;
};
this.getName=function(){return m_name;
};
this.setId=function(value){m_id=value;
};
this.getId=function(){return m_id;
};
},CriterionFilters:function(criterion){var m_criterion=criterion;
var m_evalAr=[];
this.addFilter=function(type,value){m_evalAr.push(new MP_Core.MapObject(type,value));
};
this.checkFilters=function(){var pass=false;
var patInfo=m_criterion.getPatientInfo();
for(var x=m_evalAr.length;
x--;
){var filter=m_evalAr[x];
switch(filter.name){case MP_Core.CriterionFilters.SEX_MEANING:var sex=patInfo.getSex();
if(sex!=null){if(filter.value==sex.meaning){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_OLDER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob<=filter.value){continue;
}}return false;
break;
case MP_Core.CriterionFilters.DOB_YOUNGER_THAN:var dob=patInfo.getDOB();
if(dob!=null){if(dob>=filter.value){continue;
}}return false;
break;
default:alert("Unhandled criterion filter");
return false;
}}return true;
};
}};
function GetNumericFormatter(){if(m_numFormatter==null){m_numFormatter=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_numFormatter;
}}();
MP_Core.CriterionFilters.SEX_MEANING=1;
MP_Core.CriterionFilters.DOB_OLDER_THAN=2;
MP_Core.CriterionFilters.DOB_YOUNGER_THAN=3;
MP_Core.AppUserPreferenceManager=function(){var m_criterion=null;
var m_prefIdent="";
var m_jsonObject=null;
return{Initialize:function(criterion,preferenceIdentifier){m_criterion=criterion;
m_prefIdent=preferenceIdentifier;
m_jsonObject=null;
},LoadPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject!=null){return;
}else{var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=JSON.parse(recordData.PREF_STRING);
}else{if(recordData.STATUS_DATA.STATUS=="Z"){return;
}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error retrieving user preferences "+errAr.join(",");
return;
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^"];
PlaceRequest(info,"GET","MP_GET_USER_PREFS",false,ar.join(","));
return;
}},GetPreferences:function(){if(m_criterion==null){alert("Validation Failed: the AppUserPreferenceManager must be initialized prior to usage.");
return null;
}if(m_jsonObject==null){this.LoadPreferences();
}return m_jsonObject;
},SavePreferences:function(){var body=document.body;
var groups=Util.Style.g("col-group",body,"div");
var grpId=0;
var colId=0;
var rowId=0;
var compId=0;
var jsonObject=new Object();
var userPrefs=jsonObject.user_prefs=new Object();
var pagePrefs=userPrefs.page_prefs=new Object();
var components=pagePrefs.components=[];
for(var x=0,xl=groups.length;
x<xl;
x++){grpId=x+1;
var liqLay=Util.Style.g("col-outer1",groups[x],"div");
if(liqLay.length>0){var cols=Util.gcs(liqLay[0]);
for(var y=0,yl=cols.length;
y<yl;
y++){colId=y+1;
var rows=Util.gcs(cols[y]);
for(var z=0,zl=rows.length;
z<zl;
z++){var component=new Object();
rowId=z+1;
compId=jQuery(rows[z]).attr("id");
component.id=compId;
component.group_seq=grpId;
component.col_seq=colId;
component.row_seq=rowId;
if(jQuery(rows[z]).hasClass("closed")){component.expanded=false;
}else{component.expanded=true;
}components.push(component);
}}}}WritePreferences(jsonObject);
m_jsonObject=jsonObject;
history.back();
},ClearPreferences:function(){WritePreferences(null);
history.back();
},GetComponentById:function(id){if(m_jsonObject!=null){var components=m_jsonObject.user_prefs.page_prefs.components;
for(var x=components.length;
x--;
){var component=components[x];
if(component.id==id){return component;
}}}return null;
}};
function WritePreferences(jsonObject,successMessage){var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
var recordData=jsonEval.RECORD_DATA;
if(recordData.STATUS_DATA.STATUS=="Z"){m_jsonObject=null;
}else{if(recordData.STATUS_DATA.STATUS=="S"){m_jsonObject=jsonObject;
if(successMessage!=null&&successMessage.length>0){alert(successMessage);
}}else{var errAr=[];
var statusData=recordData.STATUS_DATA;
errAr.push("STATUS: "+statusData.STATUS);
for(var x=0,xl=statusData.SUBEVENTSTATUS.length;
x<xl;
x++){var ss=statusData.SUBEVENTSTATUS[x];
errAr.push(ss.OPERATIONNAME,ss.OPERATIONSTATUS,ss.TARGETOBJECTNAME,ss.TARGETOBJECTVALUE);
}window.status="Error saving user preferences: "+errAr.join(",");
}}}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sJson=(jsonObject!=null)?JSON.stringify(jsonObject):"";
var ar=["^mine^",m_criterion.provider_id+".0","^"+m_prefIdent+"^","^"+sJson+"^"];
PlaceRequest(info,"GET","MP_MAINTAIN_USER_PREFS",false,ar.join(","));
}}();
var MP_Util=function(){return{GetCriterion:function(js_criterion,static_content){var jsCrit=js_criterion.CRITERION;
var criterion=new MP_Core.Criterion(jsCrit.PERSON_ID,(jsCrit.ENCNTRS.length>0)?jsCrit.ENCNTRS[0].ENCNTR_ID:0,jsCrit.PRSNL_ID,jsCrit.EXECUTABLE,static_content,jsCrit.POSITION_CD,jsCrit.PPR_CD,(jsCrit.DEBUG_IND==1)?true:false,jsCrit.HELP_FILE_LOCAL_IND,jsCrit.CATEGORY_MEAN,jsCrit.BACKEND_LOCATION,jsCrit.LOCALE_ID);
var codeArray=MP_Util.LoadCodeListJSON(jsCrit.CODES);
var jsPatInfo=jsCrit.PATIENT_INFO;
var patInfo=new MP_Core.PatientInformation();
MP_Util.IncludeLocaleDefs(criterion.locale_id,CERN_static_content+"/js/locale");
if(jsPatInfo!==undefined){patInfo.setSex(MP_Util.GetValueFromArray(jsPatInfo.SEX_CD,codeArray));
if(jsPatInfo.DOB!=""){var dt=new Date();
dt.setISO8601(jsPatInfo.DOB);
patInfo.setDOB(dt);
}}criterion.setPatientInfo(patInfo);
return criterion;
},IncludeLocaleDefs:function(localeId,localeFolderLoc){var headID=document.getElementsByTagName("head")[0];
var newScript=document.createElement("script");
newScript.type="text/javascript";
var langId=localeId.substr(0,2);
var langLocaleId=localeId.substr(3,2);
switch(langId.toLowerCase()){case"en":if(langLocaleId.toLowerCase()==="au"){newScript.src=localeFolderLoc+"/locale.en_AU.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_AU);
}else{if(langLocaleId.toLowerCase()==="gb"){newScript.src=localeFolderLoc+"/locale.en_GB.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_GB);
}else{newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
}}break;
case"es":newScript.src=localeFolderLoc+"/locale.es.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.es_ES);
break;
case"de":newScript.src=localeFolderLoc+"/locale.de.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.de_DE);
break;
case"fr":newScript.src=localeFolderLoc+"/locale.fr.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.fr_FR);
break;
default:newScript.src=localeFolderLoc+"/locale.js";
headID.appendChild(newScript);
MPAGE_LOCALE=new mp_formatter.Locale(MPAGE_LC.en_US);
break;
}},CalcLookbackDate:function(lookbackDays){var retDate=new Date();
var hrs=retDate.getHours();
hrs-=(lookbackDays*24);
retDate.setHours(hrs);
return retDate;
},CalcWithinTime:function(dateTime){return(GetDateDiffString(dateTime,null,null,true));
},CalcAge:function(birthDt,fromDate){fromDate=(fromDate==null)?new Date():fromDate;
return(GetDateDiffString(birthDt,fromDate,1,false));
},DisplayDateByOption:function(component,date){var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
var dtFormatted="";
switch(component.getDateFormat()){case 1:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_2YEAR));
case 2:return(df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR));
case 3:return(MP_Util.CalcWithinTime(date));
case 4:return("&nbsp");
default:return df.format(date,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_2YEAR);
}},DisplaySelectedTab:function(showDiv,anchorId){if(window.name=="a-tab0"){window.name="";
}else{window.name=showDiv+","+anchorId;
}var body=document.body;
var divs=Util.Style.g("div-tab-item",body);
for(var i=divs.length;
i--;
){if(divs[i].id==showDiv){divs[i].style.display="block";
}else{divs[i].style.display="none";
}}var anchors=Util.Style.g("anchor-tab-item",body);
for(var i=anchors.length;
i--;
){if(anchors[i].id==anchorId){anchors[i].className="anchor-tab-item active";
}else{anchors[i].className="anchor-tab-item inactive";
}}var custNode=_g("custView");
if(custNode!=null){custNode.href="";
custNode.innerHTML="";
}for(var yl=CERN_TabManagers.length;
yl--;
){var tabManager=CERN_TabManagers[yl];
var tabItem=tabManager.getTabItem();
if(tabItem.key==showDiv){tabManager.loadTab();
tabManager.setSelectedTab(true);
var components=tabItem.components;
if(components!=null&&components.length>0){for(var xl=components.length;
xl--;
){var component=components[xl];
MP_Util.Doc.AddCustomizeLink(component.getCriterion());
break;
}}}else{tabManager.setSelectedTab(false);
}}},OpenTab:function(compId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openTab();
}}},LaunchMenuSelection:function(compId,menuItemId){for(var x=0,xl=CERN_MPageComponents.length;
x<xl;
x++){var comp=CERN_MPageComponents[x];
var crit=comp.getCriterion();
var styles=comp.getStyles();
if(styles.getId()==compId){comp.openDropDown(menuItemId);
break;
}}},LaunchMenu:function(menuId,componentId){var menu=_g(menuId);
MP_Util.closeMenuInit(menu,componentId);
if(menu!=null){if(Util.Style.ccss(menu,"menu-hide")){_g(componentId).style.zIndex=2;
Util.Style.rcss(menu,"menu-hide");
}else{_g(componentId).style.zIndex=1;
Util.Style.acss(menu,"menu-hide");
}}},closeMenuInit:function(inMenu,compId){var menuId;
var docMenuId=compId+"Menu";
if(inMenu.id==docMenuId){menuId=compId;
}if(!e){var e=window.event;
}if(window.attachEvent){Util.addEvent(inMenu,"mouseleave",function(){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
});
}else{Util.addEvent(inMenu,"mouseout",menuLeave);
}function menuLeave(e){if(!e){var e=window.event;
}var relTarg=e.relatedTarget||e.toElement;
if(e.relatedTarget.id==inMenu.id){Util.Style.acss(inMenu,"menu-hide");
_g(menuId).style.zIndex=1;
}e.stopPropagation();
Util.cancelBubble(e);
}},CreateTitleText:function(component,nbr,optionalText){var ar=[];
if(component.isLineNumberIncluded()){ar.push("(",nbr,")");
}if(optionalText&&optionalText!=""){ar.push(" ",optionalText);
}return ar.join("");
},GetContentClass:function(component,nbr){if(component.isScrollingEnabled()){var scrollNbr=component.getScrollNumber();
if(nbr>=scrollNbr&&scrollNbr>0){return"content-body scrollable";
}}return"content-body";
},CreateTimer:function(timerName,subTimerName,metaData1,metaData2,metaData3){try{var slaTimer=window.external.DiscernObjectFactory("SLATIMER");
}catch(err){return null;
}if(slaTimer){slaTimer.TimerName=timerName;
if(subTimerName){slaTimer.SubtimerName=subTimerName;
}if(metaData1){slaTimer.Metadata1=String(metaData1);
}if(metaData2){slaTimer.Metadata2=String(metaData2);
}if(metaData3){slaTimer.Metadata3=String(metaData3);
}slaTimer.Start();
return slaTimer;
}else{return null;
}},GetCodeSet:function(codeSet,async,displaySortOrder){var codes=new Array();
var info=new XMLCclRequest();
info.onreadystatechange=function(){if(this.readyState==4&&this.status==200){var jsonEval=JSON.parse(this.responseText);
if(jsonEval.RECORD_DATA.STATUS_DATA.STATUS=="S"){codes=MP_Util.LoadCodeListJSON(jsonEval.RECORD_DATA.CODES);
}return codes;
}if(this.readyState==4){MP_Util.ReleaseRequestReference(this);
}};
var sendVal="^MINE^, "+codeSet+".0";
if(displaySortOrder!=null&&(typeof(displaySortOrder))=="string"){var dispSortDir=displaySortOrder.toLowerCase();
if(dispSortDir=="asc"||dispSortDir=="desc"){sendVal+=(",^"+dispSortDir+"^");
}}PlaceRequest(info,"GET","MP_LAB_GET_CODESET",async,sendVal);
return codes;
},GetCodeByMeaning:function(mapCodes,meaning){for(var x=mapCodes.length;
x--;
){var code=mapCodes[x].value;
if(code.meaning==meaning){return code;
}}},GetItemFromMapArray:function(mapItems,item){for(var x=mapItems.length;
x--;
){if(mapItems[x].name==item){return mapItems[x].value;
}}},AddItemToMapArray:function(mapItems,key,value){var ar=MP_Util.GetItemFromMapArray(mapItems,key);
if(ar==null){ar=[];
mapItems.push(new MP_Core.MapObject(key,ar));
}ar.push(value);
},LookBackTime:function(component){var i18nCore=i18n.discernabu;
var remainder=0;
var lookbackDays=component.getLookbackDays();
if(lookbackDays==0){return(i18nCore.SELECTED_VISIT);
}else{if(lookbackDays==1){return(i18nCore.LAST_N_HOURS.replace("{0}",lookbackDays*24));
}else{return(i18nCore.LAST_N_DAYS.replace("{0}",lookbackDays));
}}},CreateClinNoteLink:function(patient_id,encntr_id,event_id,display,docTypeFlag){var docType=(docTypeFlag&&docTypeFlag>0)?docTypeFlag:1;
var doclink="";
if(event_id>0){var ar=[];
ar.push(patient_id,encntr_id,event_id,docType);
doclink="<a href=javascript:MP_Util.LaunchClinNoteViewer("+ar.join(",")+");>"+display+"</a>";
}else{doclink=display;
}return(doclink);
},LaunchRTFViewer:function(eventId,docTypeFlag){var ar=[];
ar.push("^mine^",eventId+".0",docTypeFlag);
CCLLINK("mp_clin_smry_clinicaldocs",ar.join(","),1);
},LaunchClinNoteViewer:function(patient_id,encntr_id,event_id,docTypeFlag){try{var sParms=patient_id+"|"+encntr_id+"|["+event_id+"]|Documents|15|CLINNOTES|3|CLINNOTES|1";
var tempDate=new Date();
MPAGES_EVENT("CLINICALNOTE",sParms);
var tempDate2=new Date();
if(tempDate2-tempDate<=1000){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}}catch(err){MP_Util.LaunchRTFViewer(event_id,docTypeFlag);
}},HandleNoDataResponse:function(nameSpace){var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
return("<h3 class='"+ns+"info-hd'><span class='res-normal'>"+i18nCore.NO_RESULTS_FOUND+"</span></h3><span class='res-none'>"+i18nCore.NO_RESULTS_FOUND+"</span>");
},HandleErrorResponse:function(nameSpace,errorMessage){var ar=[];
var i18nCore=i18n.discernabu;
var ns=(nameSpace&&nameSpace.length>0)?nameSpace+"-":"";
ar.push("<h3 class='",ns,"info-hd'><span class='res-normal'>",i18nCore.ERROR_RETREIVING_DATA,"</span></h3>");
ar.push("<dl class='",ns,"info'><dt><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dt><dd><span>",i18nCore.ERROR_RETREIVING_DATA,"</span></dd></dl>");
if(errorMessage!=null&&errorMessage.length>0){ar.push("<h4 class='",ns,"det-hd'><span>DETAILS</span></h4><div class='hvr'><dl class='",ns,"det'><dd><span>",errorMessage,"</span></dd></dl></div>");
}return ar.join("");
},GetValueFromArray:function(name,array){if(array!=null){for(var x=0,xi=array.length;
x<xi;
x++){if(array[x].name==name){return(array[x].value);
}}}return(null);
},LoadCodeListJSON:function(parentElement){var codeArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var codeObject=new Object();
codeElement=parentElement[x];
codeObject.codeValue=codeElement.CODE;
codeObject.display=codeElement.DISPLAY;
codeObject.description=codeElement.DESCRIPTION;
codeObject.codeSet=codeElement.CODE_SET;
codeObject.sequence=codeElement.SEQUENCE;
codeObject.meaning=codeElement.MEANING;
var mapObj=new MP_Core.MapObject(codeObject.codeValue,codeObject);
codeArray.push(mapObj);
}}return(codeArray);
},LoadPersonelListJSON:function(parentElement){var personnelArray=new Array();
if(parentElement!=null){for(var x=0;
x<parentElement.length;
x++){var perObject=new Object();
codeElement=parentElement[x];
perObject.id=codeElement.ID;
perObject.fullName=codeElement.PROVIDER_NAME.NAME_FULL;
perObject.firstName=codeElement.PROVIDER_NAME.NAME_FIRST;
perObject.middleName=codeElement.PROVIDER_NAME.NAME_MIDDLE;
perObject.lastName=codeElement.PROVIDER_NAME.NAME_LAST;
perObject.userName=codeElement.PROVIDER_NAME.USERNAME;
perObject.initials=codeElement.PROVIDER_NAME.INITIALS;
perObject.title=codeElement.PROVIDER_NAME.TITLE;
var mapObj=new MP_Core.MapObject(perObject.id,perObject);
personnelArray[x]=mapObj;
}}return(personnelArray);
},WriteToFile:function(sText){try{var ForAppending=8;
var TriStateFalse=0;
var fso=new ActiveXObject("Scripting.FileSystemObject");
var newFile=fso.OpenTextFile("c:\\temp\\test.txt",ForAppending,true,TriStateFalse);
newFile.write(sText);
newFile.close();
}catch(err){var strErr="Error:";
strErr+="\nNumber:"+err.number;
strErr+="\nDescription:"+err.description;
document.write(strErr);
}},CalculateAge:function(bdate){var age;
var bdate=new Date(bdate);
var byear=bdate.getFullYear();
var bmonth=bdate.getMonth();
var bday=bdate.getDate();
var bhours=bdate.getHours();
today=new Date();
year=today.getFullYear();
month=today.getMonth();
day=today.getDate();
hours=today.getHours();
if(year==byear&&(day==bday)){age=hours-bhours;
age+=" Hours";
return age;
}else{if(year==byear&&(month==bmonth)){age=day-bday;
age+=" Days";
return age;
}}if(year==byear){age=month-bmonth;
age+=" Months";
return age;
}else{if(month<bmonth){age=year-byear-1;
}else{if(month>bmonth){age=year-byear;
}else{if(month==bmonth){if(day<bday){age=year-byear-1;
}else{if(day>bday){age=year-byear;
}else{if(day==bday){age=year-byear;
}}}}}}}age+=" Years";
return age;
},pad:function(str,len,pad,dir){if(typeof(len)=="undefined"){var len=0;
}if(typeof(pad)=="undefined"){var pad=" ";
}if(typeof(dir)=="undefined"){var dir=STR_PAD_RIGHT;
}if(len+1>=str.length){switch(dir){case STR_PAD_LEFT:str=Array(len+1-str.length).join(pad)+str;
break;
case STR_PAD_BOTH:var right=Math.ceil((padlen=len-str.length)/2);
var left=padlen-right;
str=Array(left+1).join(pad)+str+Array(right+1).join(pad);
break;
default:str=str+Array(len+1-str.length).join(pad);
break;
}}return str;
},GraphResults:function(personId,encntrId,eventCd,staticContent,groupId,providerId,positionCd,pprCD,lookBackUnits,lookBackType){var wParams="left=0,top=0,width=1200,height=700,toolbar=no";
var sParams="^MINE^,"+personId+","+encntrId+","+eventCd+",^"+unescape(staticContent)+"\\discrete-graphing^,"+groupId+","+providerId+","+positionCd+","+pprCD+","+lookBackUnits+","+lookBackType+","+1;
var graphCall="javascript:CCLLINK('mp_graph_results', '"+sParams+"',1)";
javascript:CCLNEWSESSIONWINDOW(graphCall,"_self",wParams,0,1);
Util.preventDefault();
},ReleaseRequestReference:function(reqObj){if(XMLCCLREQUESTOBJECTPOINTER){for(var id in XMLCCLREQUESTOBJECTPOINTER){if(XMLCCLREQUESTOBJECTPOINTER[id]==reqObj){delete (XMLCCLREQUESTOBJECTPOINTER[id]);
}}}},CreateAutoSuggestBoxHtml:function(component){var searchBoxHTML=[];
var compNs=component.getStyles().getNameSpace();
searchBoxHTML.push("<div class='search-box-div'><form name='contentForm'><input type='text' id='",compNs,"contentCtrl'"," class='search-box'></form></div>");
return searchBoxHTML.join("");
},AddAutoSuggestControl:function(component,searchTypeFlag){new AutoSuggestControl(component,searchNomenclature,addNomenclatureFromAutoSuggest,searchTypeFlag);
}};
function GetDateDiffString(beginDate,endDate,mathFlag,abbreviateFlag){var i18nCore=i18n.discernabu;
var timeDiff=0;
var returnVal="";
endDate=(endDate==null)?new Date():endDate;
mathFlag=(mathFlag==null)?0:mathFlag;
var one_minute=1000*60;
var one_hour=one_minute*60;
var one_day=one_hour*24;
var one_week=one_day*7;
var one_month=one_day*(365/12);
var one_year=one_month*12;
var valMinutes=0;
var valHours=0;
var valDays=0;
var valWeeks=0;
var valMonths=0;
var valYears=0;
timeDiff=(endDate.getTime()-beginDate.getTime());
var mathFunc=null;
var comparisonFunc=null;
if(mathFlag==0){mathFunc=function(val){return Math.ceil(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<=upperVal);
};
}else{mathFunc=function(val){return Math.floor(val);
};
comparisonFunc=function(lowerVal,upperVal){return(lowerVal<upperVal);
};
}valMinutes=mathFunc(timeDiff/one_minute);
valHours=mathFunc(timeDiff/one_hour);
valDays=mathFunc(timeDiff/one_day);
valWeeks=mathFunc(timeDiff/one_week);
valMonths=mathFunc(timeDiff/one_month);
valYears=mathFunc(timeDiff/one_year);
if(comparisonFunc(valHours,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MINS.replace("{0}",valMinutes)):(i18nCore.X_MINUTES.replace("{0}",valMinutes));
}else{if(comparisonFunc(valDays,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_HOURS.replace("{0}",valHours)):(i18nCore.X_HOURS.replace("{0}",valHours));
}else{if(comparisonFunc(valWeeks,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_DAYS.replace("{0}",valDays)):(i18nCore.X_DAYS.replace("{0}",valDays));
}else{if(comparisonFunc(valMonths,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_WEEKS.replace("{0}",valWeeks)):(i18nCore.X_WEEKS.replace("{0}",valWeeks));
}else{if(comparisonFunc(valYears,2)){returnVal=abbreviateFlag?(i18nCore.WITHIN_MONTHS.replace("{0}",valMonths)):(i18nCore.X_MONTHS.replace("{0}",valMonths));
}else{returnVal=abbreviateFlag?(i18nCore.WITHIN_YEARS.replace("{0}",valYears)):(i18nCore.X_YEARS.replace("{0}",valYears));
}}}}}return(returnVal);
}}();
MP_Util.Doc=function(){var isExpandedAll=false;
return{InitMPageTabLayout:function(arMapObjects,title){var arItems=[];
var sc="",helpFile="",helpURL="",debugInd=false;
var bDisplayBanner=false;
var criterion=null;
var custInd=true;
var anchorArray=null;
for(var x=0,xl=arMapObjects.length;
x<xl;
x++){var key=arMapObjects[x].name;
var page=arMapObjects[x].value;
criterion=page.getCriterion();
arItems.push(new MP_Core.TabItem(key,page.getName(),page.getComponents(),criterion.category_mean));
sc=criterion.static_content;
debugInd=criterion.debug_ind;
helpFile=page.getHelpFileName();
helpURL=page.getHelpFileURL();
custInd=page.getCustomizeEnabled();
anchorArray=page.getTitleAnchors();
if(page.isBannerEnabled()){bDisplayBanner=page.isBannerEnabled();
}}MP_Util.Doc.InitTabLayout(arItems,title,sc,helpFile,helpURL,bDisplayBanner,0,criterion,custInd,anchorArray);
},InitTabLayout:function(arTabItems,title,sc,helpFile,helpURL,includeBanner,debugInd,criterion,custInd,anchorArray){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,debugInd,custInd,anchorArray);
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(includeBanner){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
AddPageTabs(arTabItems,body);
CERN_TabManagers=[];
for(var x=0,xl=arTabItems.length;
x<xl;
x++){var tabItem=arTabItems[x];
var tabManager=new MP_Core.TabManager(tabItem);
if(x==0){tabManager.setSelectedTab(true);
}CERN_TabManagers.push(tabManager);
CreateLiquidLayout(tabItem.components,_g(arTabItems[x].key));
}MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},InitLayout:function(mPage){var body=document.body;
var i18nCore=i18n.discernabu;
var criterion=mPage.getCriterion();
MP_Util.Doc.AddPageTitle(mPage.getName(),body,criterion.debug_ind,mPage.getCustomizeEnabled(),mPage.getTitleAnchors());
var sc=criterion.static_content;
var helpFile=mPage.getHelpFileName();
var helpURL=mPage.getHelpFileURL();
if(helpFile!=null&&helpFile.length>0){MP_Util.Doc.AddHelpLink(sc,helpFile);
}else{if(helpURL!=null&&helpURL.length>0){MP_Util.Doc.AddHelpURL(sc,helpURL);
}}if(mPage.isBannerEnabled()){body.innerHTML+="<div id=banner></div>";
}body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.DISCLAIMER+"</span></div>";
CreateLiquidLayout(mPage.getComponents(),body);
MP_Util.Doc.AddCustomizeLink(criterion);
SetupExpandCollapse();
},CustomizeLayout:function(title,components){var body=document.body;
var i18nCore=i18n.discernabu;
MP_Util.Doc.AddPageTitle(title,body,0,false,null);
MP_Util.Doc.AddClearPreferences(body);
MP_Util.Doc.AddSavePreferences(body);
body.innerHTML+="<div id='disclaimer'><span>"+i18nCore.USER_CUST_DISCLAIMER+"</span></div>";
var compAr=[];
for(var x=components.length;
x--;
){var component=components[x];
if(component.getColumn()!=99){compAr.push(component);
}}CreateCustomizeLiquidLayout(compAr,body);
SetupExpandCollapse();
},GetComments:function(par,personnelArray){var com="",recDate="";
var df=new mp_formatter.DateTimeFormatter(MPAGE_LOCALE);
for(var j=0,m=par.COMMENTS.length;
j<m;
j++){if(personnelArray.length!=null){if(par.COMMENTS[j].RECORDED_BY){perCodeObj=MP_Util.GetValueFromArray(par.COMMENTS[j].RECORDED_BY,personnelArray);
}if(par.COMMENTS[j].RECORDED_DT_TM!=""){recDate=df.formatISO8601(par.COMMENTS[j].RECORDED_DT_TM,mp_formatter.DateTimeFormatter.FULL_DATE_TIME_4YEAR);
}if(j>0){com+="<br />";
}com+=recDate+" -  "+perCodeObj.fullName+"<br />"+par.COMMENTS[j].COMMENT_TEXT;
}}return com;
},FinalizeComponent:function(contentHTML,component,countText){var styles=component.getStyles();
var rootComponentNode=component.getRootComponentNode();
var totalCount=Util.Style.g("sec-total",rootComponentNode,"span");
totalCount[0].innerHTML=countText;
var node=component.getSectionContentNode();
node.innerHTML=contentHTML;
MP_Util.Doc.InitHovers(styles.getInfo(),node);
MP_Util.Doc.InitSubToggles(node,"sub-sec-hd-tgl");
MP_Util.Doc.InitScrolling(Util.Style.g("scrollable",node,"div"),component.getScrollNumber(),"1.6");
},InitScrolling:function(content,num,ht){for(var k=0;
k<content.length;
k++){MP_Util.Doc.InitSectionScrolling(content[k],num,ht);
}},InitSectionScrolling:function(sec,num,ht){var th=num*ht;
var totalHeight=th+"em";
sec.style.height=totalHeight;
sec.style.overflowY="scroll";
sec.style.overflowX="hidden";
},InitHovers:function(trg,par){gen=Util.Style.g(trg,par,"DL");
for(var i=0,l=gen.length;
i<l;
i++){var m=gen[i];
if(m){var nm=Util.gns(Util.gns(m));
if(nm){if(Util.Style.ccss(nm,"hvr")){hs(m,nm);
}}}}},InitSubToggles:function(par,tog){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g(tog,par,"span");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}},ExpandCollapseAll:function(){var i18nCore=i18n.discernabu;
var allSections=Util.Style.g("section");
var expNode=_g("expAll");
if(isExpandedAll){for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.acss(allSections[i],"closed");
secHandle.innerHTML="+";
secHandle.title=i18nCore.SHOW_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.acss(allSubSections[j],"closed");
subSecTgl.innerHTML="+";
subSecTgl.title=i18nCore.SHOW_SECTION;
}}expNode.innerHTML=i18nCore.EXPAND_ALL;
}isExpandedAll=false;
}else{for(var i=0,asLen=allSections.length;
i<asLen;
i++){var secHandle=Util.gc(Util.gc(allSections[i]));
if(secHandle.innerHTML=="-"||secHandle.innerHTML=="+"){Util.Style.rcss(allSections[i],"closed");
secHandle.innerHTML="-";
secHandle.title=i18nCore.HIDE_SECTION;
}else{var allSubSections=Util.Style.g("sub-sec",allSections[i],"div");
for(var j=0,aSubLen=allSubSections.length;
j<aSubLen;
j++){var subSecTgl=Util.gc(Util.gc(allSubSections[j]));
Util.Style.rcss(allSubSections[j],"closed");
subSecTgl.innerHTML="-";
subSecTgl.title=i18nCore.HIDE_SECTION;
}}expNode.innerHTML=i18nCore.COLLAPSE_ALL;
}isExpandedAll=true;
}},AddPageTitle:function(title,bodyTag,debugInd,custInd,anchorArray){var i18nCore=i18n.discernabu;
var ar=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<div class='pg-hd'>");
ar.push("<h1><span class=pg-title>",title,"</span></h1><span id=pageCtrl class=page-ctrl>");
if(anchorArray!=null){for(var x=0,xl=anchorArray.length;
x<xl;
x++){ar.push(anchorArray[x]);
}}ar.push("<a id=expAll onclick='javascript:MP_Util.Doc.ExpandCollapseAll()'>",i18nCore.EXPAND_ALL,"</a>");
if(custInd){ar.push("<a id=custView></a>");
}ar.push("<a id=helpMenu></a></span></div>");
bodyTag.innerHTML+=ar.join("");
return;
},AddHelpLink:function(staticContent,helpFile){var i18nCore=i18n.discernabu;
if(helpFile!=null&&helpFile!=""){var helpNode=_g("helpMenu");
helpNode.href=staticContent+"\\html\\"+helpFile;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddHelpURL:function(staticContent,url){var i18nCore=i18n.discernabu;
if(url!=null&&url!=""){var helpNode=_g("helpMenu");
helpNode.href=url;
helpNode.innerHTML=i18nCore.HELP;
var imageNode=Util.cep("IMG",{src:staticContent+"\\images\\3865_16.gif"});
Util.ia(imageNode,helpNode);
}},AddClearPreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var clearPrefNode=Util.cep("A",{id:"clearPrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.ClearPreferences();"});
clearPrefNode.innerHTML=i18nCore.CLEAR_PREFERENCES;
Util.ac(clearPrefNode,pageCtrl);
},AddSavePreferences:function(body){var i18nCore=i18n.discernabu;
var pageCtrl=_g("pageCtrl");
var savePrefNode=Util.cep("A",{id:"savePrefs",onclick:"javascript:MP_Core.AppUserPreferenceManager.SavePreferences();"});
savePrefNode.innerHTML=i18nCore.SAVE_PREFERENCES;
Util.ac(savePrefNode,pageCtrl);
},AddCustomizeLink:function(criterion){var i18nCore=i18n.discernabu;
var custNode=_g("custView");
if(custNode!=null){custNode.innerHTML=i18nCore.CUSTOMIZE;
var compReportIds=GetPageReportIds();
custNode.href=criterion.static_content+"\\user-customization\\html\\cust.html?personnelId="+criterion.provider_id+"&positionCd="+criterion.position_cd+"&categoryMean="+GetPreferenceIdentifier()+"&localeId="+criterion.locale_id;
custNode.href+=(compReportIds.length>0)?"&reportIds="+compReportIds.join(","):"";
}},RenderLayout:function(){if(CERN_TabManagers!=null){var tabManager=null;
if(window.name.length>0){var paramList=window.name.split(",");
MP_Util.DisplaySelectedTab(paramList[0],paramList[1]);
}else{tabManager=CERN_TabManagers[0];
tabManager.setSelectedTab(true);
tabManager.loadTab();
}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var comp=CERN_MPageComponents[x];
if(comp.isDisplayable()){comp.InsertData();
}}}}},ExpandCollapse:function(){var i18nCore=i18n.discernabu;
var gpp=Util.gp(Util.gp(this));
if(Util.Style.ccss(gpp,"closed")){Util.Style.rcss(gpp,"closed");
this.innerHTML="-";
this.title=i18nCore.HIDE_SECTION;
}else{Util.Style.acss(gpp,"closed");
this.innerHTML="+";
this.title=i18nCore.SHOW_SECTION;
}}};
function GetPreferenceIdentifier(){var prefIdentifier="";
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
return tabItem.prefIdentifier;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){var criterion=CERN_MPageComponents[x].getCriterion();
return criterion.category_mean;
}}}return prefIdentifier;
}function GetPageReportIds(){var ar=[];
if(CERN_TabManagers!=null){for(var x=CERN_TabManagers.length;
x--;
){var tabManager=CERN_TabManagers[x];
if(tabManager.getSelectedTab()){var tabItem=tabManager.getTabItem();
var components=tabItem.components;
if(components!=null&&components.length>0){for(var y=components.length;
y--;
){ar.push(components[y].getReportId());
}}break;
}}}else{if(CERN_MPageComponents!=null){for(var x=CERN_MPageComponents.length;
x--;
){ar.push(CERN_MPageComponents[x].getReportId());
}}}return ar;
}function GetComponentArray(components){var grpAr=[];
var colAr=[];
var rowAr=[];
var curCol=-1;
var curGrp=-1;
var sHTML=[];
if(components!=null){components.sort(SortMPageComponents);
for(var x=0,xl=components.length;
x<xl;
x++){var component=components[x];
if(CERN_MPageComponents==null){CERN_MPageComponents=[];
}CERN_MPageComponents.push(component);
if(component.isDisplayable()){var compGrp=component.getPageGroupSequence();
var compCol=component.getColumn();
if(compGrp!=curGrp){curCol=-1;
colAr=[];
grpAr.push(colAr);
curGrp=compGrp;
}if(compCol!=curCol){rowAr=[];
colAr.push(rowAr);
curCol=compCol;
}rowAr.push(component);
}}}return grpAr;
}function CreateCustomizeLiquidLayout(components,parentNode){var sHTML=[];
var grpAr=GetComponentArray(components);
sHTML.push("<div class=pref-columns>");
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
sHTML.push("<div class='col-group three-col'>");
sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var comps=colAr[y];
var colClassName="col"+(y+1)+" cust-col";
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}for(var y=colLen+1;
y<=3;
y++){var colClassName="col"+(y)+" cust-col";
sHTML.push("<div class='",colClassName,"'></div>");
}sHTML.push("</div></div></div></div>");
}sHTML.push("</div>");
parentNode.innerHTML+=sHTML.join("");
}function CreateLiquidLayout(components,parentNode){var grpAr=GetComponentArray(components);
var sHTML=[];
for(var x=0,xl=grpAr.length;
x<xl;
x++){colAr=grpAr[x];
sHTML.push("<div>");
var colLen=colAr.length;
if(colLen==1){sHTML.push("<div class='col-group one-col'>");
}else{if(colLen==2){sHTML.push("<div class='col-group two-col'>");
}else{sHTML.push("<div class='col-group three-col'>");
}}sHTML.push("<div class='col-outer2'><div class='col-outer1'>");
for(var y=0;
y<colLen;
y++){var colClassName="col"+(y+1);
var comps=colAr[y];
sHTML.push("<div class='",colClassName,"'>");
for(var z=0,zl=comps.length;
z<zl;
z++){sHTML.push(CreateCompDiv(comps[z]));
}sHTML.push("</div>");
}sHTML.push("</div></div></div></div>");
}parentNode.innerHTML+=sHTML.join("");
}function SetupExpandCollapse(){var i18nCore=i18n.discernabu;
var toggleArray=Util.Style.g("sec-hd-tgl");
for(var k=0;
k<toggleArray.length;
k++){Util.addEvent(toggleArray[k],"click",MP_Util.Doc.ExpandCollapse);
var checkClosed=Util.gp(Util.gp(toggleArray[k]));
if(Util.Style.ccss(checkClosed,"closed")){toggleArray[k].innerHTML="+";
toggleArray[k].title=i18nCore.SHOW_SECTION;
}}}function CreateCompDiv(component){var i18nCore=i18n.discernabu;
var ar=[];
var style=component.getStyles();
var ns=style.getNameSpace();
var compId=style.getId();
var secClass=style.getClassName();
var tabLink=component.getLink();
var loc=component.getCriterion().static_content;
var tglCode=(!component.isAlwaysExpanded())?["<span class='",style.getHeaderToggle(),"' title='",i18nCore.HIDE_SECTION,"'>-</span>"].join(""):"";
if(!component.isExpanded()&&!component.isAlwaysExpanded()){secClass+=" closed";
}var sAnchor=(tabLink!=""&&component.getCustomizeView()==false)?CreateComponentAnchor(component):component.getLabel();
ar.push("<div id='",style.getId(),"' class='",secClass,"'>","<h2 class='",style.getHeaderClass(),"'>",tglCode,"<span class='",style.getTitle(),"'><span>",sAnchor,"</span>");
if(component.getCustomizeView()==false){ar.push("<span class='",style.getTotal(),"'>",i18nCore.LOADING_DATA+"...","</span>");
if(component.isPlusAddEnabled()){ar.push("<a id='",ns,"Add' class=addPlus href=javascript:MP_Util.OpenTab('",compId,"');><img src='",loc,"\\images\\3941.gif'>",i18nCore.ADD,"</a>");
var menuItems=component.getMenuItems();
if(menuItems!=null||menuItems>0){var menuId=compId+"Menu";
ar.push("<a id='",ns,"Drop' class='drop-Down'><img src='",loc,"\\images\\3943_16.gif' onclick='javascript:MP_Util.LaunchMenu(\"",menuId,'", "',compId,"\");'></a>");
ar.push("<div class='form-menu menu-hide' id='",menuId,"'><span>");
for(var x=0,xl=menuItems.length;
x<xl;
x++){var item=menuItems[x];
ar.push("<div>");
ar.push("<a id='lnkID",x,"' href='#' onclick='javascript:MP_Util.LaunchMenuSelection(\"",compId,'",',item.getId(),");'>",item.getDescription(),"</a>");
ar.push("</div>");
}ar.push("</span></div>");
}}}ar.push("</span></h2>");
if(component.getCustomizeView()==false){if(component.getScope()>0){ar.push("<div class=sub-title-disp>",CreateSubTitleText(component),"</div>");
}}ar.push("<div id='",style.getContentId(),"' class='",style.getContentClass(),"'></div></div>");
var arHtml=ar.join("");
return arHtml;
}function CreateSubTitleText(component){var i18nCore=i18n.discernabu;
var subTitleText="";
var scope=component.getScope();
var lookbackDays=component.getLookbackDays();
var lookbackUnits=(lookbackDays>0)?lookbackDays:component.getLookbackUnits();
var lookbackFlag=(lookbackDays>0)?2:component.getLookbackUnitTypeFlag();
if(scope>0){if(lookbackFlag>0&&lookbackUnits>0){var replaceText="";
switch(lookbackFlag){case 1:replaceText=i18nCore.LAST_N_HOURS.replace("{0}",lookbackUnits);
break;
case 2:replaceText=i18nCore.LAST_N_DAYS.replace("{0}",lookbackUnits);
break;
case 3:replaceText=i18nCore.LAST_N_WEEKS.replace("{0}",lookbackUnits);
break;
case 4:replaceText=i18nCore.LAST_N_MONTHS.replace("{0}",lookbackUnits);
break;
case 5:replaceText=i18nCore.LAST_N_YEARS.replace("{0}",lookbackUnits);
break;
}switch(scope){case 1:subTitleText=i18nCore.ALL_N_VISITS.replace("{0}",replaceText);
break;
case 2:subTitleText=i18nCore.SELECTED_N_VISIT.replace("{0}",replaceText);
break;
}}else{switch(scope){case 1:subTitleText=i18nCore.All_VISITS;
break;
case 2:subTitleText=i18nCore.SELECTED_VISIT;
break;
}}}return subTitleText;
}function CreateComponentAnchor(component){var i18nCore=i18n.discernabu;
var style=component.getStyles();
var criterion=component.getCriterion();
var sParms='javascript:APPLINK(0,"'+criterion.executable+'","/PERSONID='+criterion.person_id+" /ENCNTRID="+criterion.encntr_id+" /FIRSTTAB=^"+component.getLink()+'^")';
var sAnchor="<a id="+style.getLink()+" title='"+i18nCore.GO_TO_TAB.replace("{0}",component.getLink())+"' href='"+sParms+"'>"+component.getLabel()+"</a>";
return sAnchor;
}function AddPageTabs(items,bodyTag){var ar=[];
var divAr=[];
if(bodyTag==null){bodyTag=document.body;
}ar.push("<ul class=tabmenu>");
for(var x=0,xl=items.length;
x<xl;
x++){var item=items[x];
var activeInd=(x==0)?1:0;
ar.push(CreateTabLi(item,activeInd,x));
divAr.push("<div id='",item.key,"' class='div-tab-item'></div>");
}ar.push("</ul>");
bodyTag.innerHTML+=(ar.join("")+divAr.join(""));
}function CreateTabLi(item,activeInd,sequence){var ar=[];
var tabName="";
tabName=item.name;
ar.push("<li>");
var seqClass="a-tab"+sequence;
if(activeInd){ar.push("<a id='",seqClass,"' class='anchor-tab-item active' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}else{ar.push("<a id='",seqClass,"' class='anchor-tab-item inactive' href='javascript:MP_Util.DisplaySelectedTab(\"",item.key,'","',seqClass,"\");'>",tabName,"</a>");
}ar.push("</li>");
return(ar.join(""));
}}();
MP_Util.Measurement=function(){var m_nf=null;
return{GetString:function(result,codeArray,dateMask){var obj=MP_Util.Measurement.GetObject(result,codeArray);
if(obj instanceof MP_Core.QuantityValue){return obj.toString();
}else{if(obj instanceof Date){return obj.format(dateMask);
}else{return obj;
}}},GetObject:function(result,codeArray){switch(result.CLASSIFICATION.toUpperCase()){case"QUANTITY_VALUE":return GetQuantityValue(result,codeArray);
case"STRING_VALUE":return(GetStringValue(result));
case"DATE_VALUE":return(GetDateValue(result));
case"CODE_VALUE":return(GetCodedResult(result));
case"ENCAPSULATED_VALUE":return(GetEncapsulatedValue(result));
}},SetPrecision:function(num,dec){var nf=GetNumericFormatter();
return nf.format(num,"^."+dec);
}};
function GetNumericFormatter(){if(m_nf==null){m_nf=new mp_formatter.NumericFormatter(MPAGE_LOCALE);
}return m_nf;
}function GetEncapsulatedValue(result){var encap=result.ENCAPSULATED_VALUE;
var ar=[];
for(var n=0,nl=encap.length;
n<nl;
n++){var txt=encap[n].TEXT_PLAIN;
if(txt!=null&&txt.length>0){ar.push(txt);
}}return ar.join("");
}function GetQuantityValue(result,codeArray){var qv=new MP_Core.QuantityValue();
qv.init(result,codeArray);
return qv;
}function GetDateValue(result){for(var x=0,xl=result.DATE_VALUE.length;
x<xl;
x++){var date=result.DATE_VALUE[x];
if(date.DATE!=""){var dateTime=new Date();
dateTime.setISO8601(date.DATE);
return dateTime;
}}return null;
}function GetCodedResult(result){var cdValue=result.CODE_VALUE;
var ar=[];
for(var n=0,nl=cdValue.length;
n<nl;
n++){var values=cdValue[n].VALUES;
for(var p=0,pl=values.length;
p<pl;
p++){ar.push(values[p].SOURCE_STRING);
}var sOther=cdValue[n].OTHER_RESPONSE;
if(sOther!=""){ar.push(sOther);
}}return ar.join(", ");
}function GetStringValue(result){var strValue=result.STRING_VALUE;
var ar=[];
for(var n=0,nl=strValue.length;
n<nl;
n++){ar.push(strValue[n].VALUE);
}return ar.join(", ");
}}();
document.getElementsByClassName=function(cl,e){var retnode=[];
var clssnm=new RegExp("\\b"+cl+"\\b");
var elem=this.getElementsByTagName("*",e);
for(var u=0;
u<elem.length;
u++){var classes=elem[u].className;
if(clssnm.test(classes)){retnode.push(elem[u]);
}}return retnode;
};
Function.prototype.bind=function(object){var method=this;
return function(){return method.apply(object,arguments);
};
};
function EventListener(){this.events=[];
this.builtinEvts=[];
}EventListener.prototype.getActionIdx=function(obj,evt,action,binding){if(obj&&evt){var curel=this.events[obj][evt];
if(curel){var len=curel.length;
for(var i=len-1;
i>=0;
i--){if(curel[i].action==action&&curel[i].binding==binding){return i;
}}}else{return -1;
}}return -1;
};
EventListener.prototype.addListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){if(this.getActionIdx(obj,evt,action,binding)==-1){var curevt=this.events[obj][evt];
curevt[curevt.length]={action:action,binding:binding};
}}else{this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}}else{this.events[obj]=[];
this.events[obj][evt]=[];
this.events[obj][evt][0]={action:action,binding:binding};
}};
EventListener.prototype.removeListener=function(obj,evt,action,binding){if(this.events[obj]){if(this.events[obj][evt]){var idx=this.getActionIdx(obj,evt,action,binding);
if(idx>=0){this.events[obj][evt].splice(idx,1);
}}}};
EventListener.prototype.removeAllListeners=function(obj,binding){if(this.events[obj]){for(var el=this.events[obj].length;
el--;
){if(this.events[obj][el]){for(var ev=this.events[obj][el].length;
ev--;
){if(this.events[obj][el][ev].binding==binding){this.events[obj][el].splice(ev,1);
}}}}}};
EventListener.prototype.fireEvent=function(e,obj,evt,args){if(!e){e=window.event;
}if(obj&&this.events){var evtel=this.events[obj];
if(evtel){var curel=evtel[evt];
if(curel){for(var act=curel.length;
act--;
){var action=curel[act].action;
if(curel[act].binding){action=action.bind(curel[act].binding);
}action(e,args);
}}}}};
CERN_EventListener=new EventListener();
EventListener.EVENT_CLINICAL_EVENT=1;
EventListener.EVENT_ORDER_ACTION=2;
(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];
this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};
function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");
}this.benchmark=benchmark;
function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);
}else{alert(s);
}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";
}var rows=table.tBodies[0].rows;
if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;
for(var i=0;
i<l;
i++){var p=false;
if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);
}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);
}}if(!p){p=detectParserForColumn(table,cells[i]);
}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";
}list.push(p);
}}if(table.config.debug){log(parsersDebug);
}return list;
}function detectParserForColumn(table,node){var l=parsers.length;
for(var i=1;
i<l;
i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];
}}return parsers[0];
}function getParserById(name){var l=parsers.length;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];
}}return false;
}function buildCache(table){if(table.config.debug){var cacheTime=new Date();
}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};
for(var i=0;
i<totalRows;
++i){var c=table.tBodies[0].rows[i],cols=[];
cache.row.push($(c));
for(var j=0;
j<totalCells;
++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));
}cols.push(i);
cache.normalized.push(cols);
cols=null;
}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);
}return cache;
}function getElementText(config,node){if(!node){return"";
}var t="";
if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;
}else{t=node.innerHTML;
}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);
}else{t=$(node).text();
}}return t;
}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date();
}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];
for(var i=0;
i<totalRows;
i++){rows.push(r[n[i][checkCell]]);
if(!table.config.appender){var o=r[n[i][checkCell]];
var l=o.length;
for(var j=0;
j<l;
j++){tableBody[0].appendChild(o[j]);
}}}if(table.config.appender){table.config.appender(table,rows);
}rows=null;
if(table.config.debug){benchmark("Rebuilt table:",appendTime);
}applyWidget(table);
setTimeout(function(){$(table).trigger("sortEnd");
},0);
}function buildHeaders(table){if(table.config.debug){var time=new Date();
}var meta=($.metadata)?true:false,tableHeadersRows=[];
for(var i=0;
i<table.tHead.rows.length;
i++){tableHeadersRows[i]=0;
}$tableHeaders=$("thead th",table);
$tableHeaders.each(function(index){this.count=0;
this.column=index;
this.order=formatSortingOrder(table.config.sortInitialOrder);
if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true;
}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);
}table.config.headerList[index]=this;
});
if(table.config.debug){benchmark("Built headers:",time);
log($tableHeaders);
}return $tableHeaders;
}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;
for(var i=0;
i<c.length;
i++){var cell=c[i];
if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));
}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);
}}}return arr;
}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;
}return false;
}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;
}return false;
}function applyWidget(table){var c=table.config.widgets;
var l=c.length;
for(var i=0;
i<l;
i++){getWidgetById(c[i]).format(table);
}}function getWidgetById(name){var l=widgets.length;
for(var i=0;
i<l;
i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];
}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;
}else{i=(v==(0||1))?v:0;
}return i;
}function isValueInArray(v,a){var l=a.length;
for(var i=0;
i<l;
i++){if(a[i][0]==v){return true;
}}return false;
}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);
var h=[];
$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);
}});
var l=list.length;
for(var i=0;
i<l;
i++){h[list[i][0]].addClass(css[list[i][1]]);
}}function fixColumnWidth(table,$headers){var c=table.config;
if(c.widthFixed){var colgroup=$("<colgroup>");
$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()));
});
$(table).prepend(colgroup);
}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;
for(var i=0;
i<l;
i++){var s=sortList[i],o=c.headerList[s[0]];
o.count=s[1];
o.count++;
}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();
}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;
for(var i=0;
i<l;
i++){var c=sortList[i][0];
var order=sortList[i][1];
var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");
var e="e"+i;
dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";
dynamicExp+="if("+e+") { return "+e+"; } ";
dynamicExp+="else { ";
}var orgOrderCol=cache.normalized[0].length-1;
dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";
for(var i=0;
i<l;
i++){dynamicExp+="}; ";
}dynamicExp+="return 0; ";
dynamicExp+="}; ";
eval(dynamicExp);
cache.normalized.sort(sortWrapper);
if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);
}return cache;
}function sortText(a,b){return((a<b)?-1:((a>b)?1:0));
}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));
}function sortNumeric(a,b){return a-b;
}function sortNumericDesc(a,b){return b-a;
}function getCachedSortType(parsers,i){return parsers[i].type;
}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return;
}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;
this.config={};
config=$.extend(this.config,$.tablesorter.defaults,settings);
$this=$(this);
$headers=buildHeaders(this);
this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
var sortCSS=[config.cssDesc,config.cssAsc];
fixColumnWidth(this);
$headers.click(function(e){$this.trigger("sortStart");
var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;
if(!this.sortDisabled&&totalRows>0){var $cell=$(this);
var i=this.column;
this.order=this.count++%2;
if(!e[config.sortMultiSortKey]){config.sortList=[];
if(config.sortForce!=null){var a=config.sortForce;
for(var j=0;
j<a.length;
j++){if(a[j][0]!=i){config.sortList.push(a[j]);
}}}config.sortList.push([i,this.order]);
}else{if(isValueInArray(i,config.sortList)){for(var j=0;
j<config.sortList.length;
j++){var s=config.sortList[j],o=config.headerList[s[0]];
if(s[0]==i){o.count=s[1];
o.count++;
s[1]=o.count%2;
}}}else{config.sortList.push([i,this.order]);
}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);
appendToTable($this[0],multisort($this[0],config.sortList,cache));
},1);
return false;
}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false;
};
return false;
}});
$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);
cache=buildCache(this);
}).bind("sorton",function(e,list){$(this).trigger("sortStart");
config.sortList=list;
var sortList=config.sortList;
updateHeaderSortCount(this,sortList);
setHeadersCss(this,$headers,sortList,sortCSS);
appendToTable(this,multisort(this,sortList,cache));
}).bind("appendCache",function(){appendToTable(this,cache);
}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);
}).bind("applyWidgets",function(){applyWidget(this);
});
if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;
}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);
}applyWidget(this);
});
};
this.addParser=function(parser){var l=parsers.length,a=true;
for(var i=0;
i<l;
i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;
}}if(a){parsers.push(parser);
}};
this.addWidget=function(widget){widgets.push(widget);
};
this.formatFloat=function(s){var i=parseFloat(s);
return(isNaN(i))?0:i;
};
this.formatInt=function(s){var i=parseInt(s);
return(isNaN(i))?0:i;
};
this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;
var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";
return RegExp(exp).test($.trim(s));
};
this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild);
}}empty.apply(table.tBodies[0]);
}else{table.tBodies[0].innerHTML="";
}};
}});
$.fn.extend({tablesorter:$.tablesorter.construct});
var ts=$.tablesorter;
ts.addParser({id:"text",is:function(s){return true;
},format:function(s){return $.trim(s.toLowerCase());
},type:"text"});
ts.addParser({id:"digit",is:function(s,table){var c=table.config;
return $.tablesorter.isDigit(s,c);
},format:function(s){return $.tablesorter.formatFloat(s);
},type:"numeric"});
ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));
},type:"numeric"});
ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);
},format:function(s){var a=s.split("."),r="",l=a.length;
for(var i=0;
i<l;
i++){var item=a[i];
if(item.length==2){r+="0"+item;
}else{r+=item;
}}return $.tablesorter.formatFloat(r);
},type:"numeric"});
ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);
},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""));
},type:"text"});
ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);
},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");
},type:"numeric"});
ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));
},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));
},type:"numeric"});
ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));
},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);
},format:function(s,table){var c=table.config;
s=s.replace(/\-/g,"/");
if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");
}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");
}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");
}}}return $.tablesorter.formatFloat(new Date(s).getTime());
},type:"numeric"});
ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);
},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());
},type:"numeric"});
ts.addParser({id:"metadata",is:function(s){return false;
},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;
return $(cell).metadata()[p];
},type:"numeric"});
ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();
}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);
if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);
}}});
})(jQuery);
var winCal;
var dtToday;
var Cal;
var MonthName;
var WeekDayName1;
var WeekDayName2;
var exDateTime;
var selDate;
var calSpanID="calBorder";
var domStyle=null;
var cnLeft="0";
var cnTop="0";
var xpos=0;
var ypos=0;
var calHeight=0;
var CalWidth=208;
var CellWidth=30;
var TimeMode=24;
var StartYear=1940;
var EndYear=5;
var CalPosOffsetX=-1;
var CalPosOffsetY=0;
var SpanBorderColor="#FFFFFF";
var SpanBgColor="#FFFFFF";
var WeekChar=3;
var DateSeparator="/";
var ShowLongMonth=true;
var ShowMonthYear=true;
var MonthYearColor="#cc0033";
var WeekHeadColor="#5171c6";
var SundayColor="#dae1f3";
var SaturdayColor="#dae1f3";
var WeekDayColor="white";
var FontColor="blue";
var TodayColor="#FFFF33";
var SelDateColor="#8DD53C";
var YrSelColor="#cc0033";
var MthSelColor="#cc0033";
var HoverColor="#E0FF38";
var DisableColor="#999966";
var CalBgColor="#ffffff";
var ThemeBg="";
var PrecedeZero=true;
var MondayFirstDay=true;
var UseImageFiles=true;
var imageFilesPath="images/";
var MonthName=[dateFormat.i18n.monthNames[12],dateFormat.i18n.monthNames[13],dateFormat.i18n.monthNames[14],dateFormat.i18n.monthNames[15],dateFormat.i18n.monthNames[16],dateFormat.i18n.monthNames[17],dateFormat.i18n.monthNames[18],dateFormat.i18n.monthNames[19],dateFormat.i18n.monthNames[20],dateFormat.i18n.monthNames[21],dateFormat.i18n.monthNames[22],dateFormat.i18n.monthNames[23]];
var WeekDayName1=[dateFormat.i18n.dayNames[0],dateFormat.i18n.dayNames[1],dateFormat.i18n.dayNames[2],dateFormat.i18n.dayNames[3],dateFormat.i18n.dayNames[4],dateFormat.i18n.dayNames[5],dateFormat.i18n.dayNames[6]];
var WeekDayName2=[dateFormat.i18n.dayNames[1],dateFormat.i18n.dayNames[2],dateFormat.i18n.dayNames[3],dateFormat.i18n.dayNames[4],dateFormat.i18n.dayNames[5],dateFormat.i18n.dayNames[6],dateFormat.i18n.dayNames[0]];
function Calendar(pDate,pCtrl){this.Date=pDate.getDate();
this.Month=pDate.getMonth();
this.Year=pDate.getFullYear();
this.Hours=pDate.getHours();
if(pDate.getMinutes()<10){this.Minutes="0"+pDate.getMinutes();
}else{this.Minutes=pDate.getMinutes();
}if(pDate.getSeconds()<10){this.Seconds="0"+pDate.getSeconds();
}else{this.Seconds=pDate.getSeconds();
}this.MyWindow=winCal;
this.Ctrl=pCtrl;
this.Format="ddMMyyyy";
this.Separator=DateSeparator;
this.ShowTime=false;
this.Scroller="DROPDOWN";
if(pDate.getHours()<12){this.AMorPM="AM";
}else{this.AMorPM="PM";
}this.ShowSeconds=false;
this.EnableDateMode="";
}Calendar.prototype.GetMonthIndex=function(shortMonthName){for(var i=0;
i<12;
i+=1){if(MonthName[i].substring(0,3).toUpperCase()===shortMonthName.toUpperCase()){return i;
}}};
Calendar.prototype.IncYear=function(){if(Cal.Year<=dtToday.getFullYear()+EndYear){Cal.Year+=1;
}};
Calendar.prototype.DecYear=function(){if(Cal.Year>StartYear){Cal.Year-=1;
}};
Calendar.prototype.IncMonth=function(){if(Cal.Year<=dtToday.getFullYear()+EndYear){Cal.Month+=1;
if(Cal.Month>=12){Cal.Month=0;
Cal.IncYear();
}}};
Calendar.prototype.DecMonth=function(){if(Cal.Year>=StartYear){Cal.Month-=1;
if(Cal.Month<0){Cal.Month=11;
Cal.DecYear();
}}};
Calendar.prototype.SwitchMth=function(intMth){Cal.Month=parseInt(intMth,10);
};
Calendar.prototype.SwitchYear=function(intYear){Cal.Year=parseInt(intYear,10);
};
Calendar.prototype.SetHour=function(intHour){var MaxHour,MinHour,HourExp=new RegExp("^\\d\\d"),SingleDigit=new RegExp("\\d");
if(TimeMode===24){MaxHour=23;
MinHour=0;
}else{if(TimeMode===12){MaxHour=12;
MinHour=1;
}else{alert("TimeMode can only be 12 or 24");
}}if((HourExp.test(intHour)||SingleDigit.test(intHour))&&(parseInt(intHour,10)>MaxHour)){intHour=MinHour;
}else{if((HourExp.test(intHour)||SingleDigit.test(intHour))&&(parseInt(intHour,10)<MinHour)){intHour=MaxHour;
}}if(SingleDigit.test(intHour)){intHour="0"+intHour;
}if(HourExp.test(intHour)&&(parseInt(intHour,10)<=MaxHour)&&(parseInt(intHour,10)>=MinHour)){if((TimeMode===12)&&(Cal.AMorPM==="PM")){if(parseInt(intHour,10)===12){Cal.Hours=12;
}else{Cal.Hours=parseInt(intHour,10)+12;
}}else{if((TimeMode===12)&&(Cal.AMorPM==="AM")){if(intHour===12){intHour-=12;
}Cal.Hours=parseInt(intHour,10);
}else{if(TimeMode===24){Cal.Hours=parseInt(intHour,10);
}}}}};
Calendar.prototype.SetMinute=function(intMin){var MaxMin=59,MinMin=0,SingleDigit=new RegExp("\\d"),SingleDigit2=new RegExp("^\\d{1}$"),MinExp=new RegExp("^\\d{2}$"),strMin=0;
if((MinExp.test(intMin)||SingleDigit.test(intMin))&&(parseInt(intMin,10)>MaxMin)){intMin=MinMin;
}else{if((MinExp.test(intMin)||SingleDigit.test(intMin))&&(parseInt(intMin,10)<MinMin)){intMin=MaxMin;
}}strMin=intMin+"";
if(SingleDigit2.test(intMin)){strMin="0"+strMin;
}if((MinExp.test(intMin)||SingleDigit.test(intMin))&&(parseInt(intMin,10)<=59)&&(parseInt(intMin,10)>=0)){Cal.Minutes=strMin;
}};
Calendar.prototype.SetSecond=function(intSec){var MaxSec=59,MinSec=0,SingleDigit=new RegExp("\\d"),SingleDigit2=new RegExp("^\\d{1}$"),SecExp=new RegExp("^\\d{2}$"),strSec=0;
if((SecExp.test(intSec)||SingleDigit.test(intSec))&&(parseInt(intSec,10)>MaxSec)){intSec=MinSec;
}else{if((SecExp.test(intSec)||SingleDigit.test(intSec))&&(parseInt(intSec,10)<MinSec)){intSec=MaxSec;
}}strSec=intSec+"";
if(SingleDigit2.test(intSec)){strSec="0"+strSec;
}if((SecExp.test(intSec)||SingleDigit.test(intSec))&&(parseInt(intSec,10)<=59)&&(parseInt(intSec,10)>=0)){Cal.Seconds=strSec;
}};
Calendar.prototype.SetAmPm=function(pvalue){this.AMorPM=pvalue;
if(pvalue==="PM"){this.Hours=parseInt(this.Hours,10)+12;
if(this.Hours===24){this.Hours=12;
}}else{if(pvalue==="AM"){this.Hours-=12;
}}};
Calendar.prototype.getShowHour=function(){var finalHour;
if(TimeMode===12){if(parseInt(this.Hours,10)===0){this.AMorPM="AM";
finalHour=parseInt(this.Hours,10)+12;
}else{if(parseInt(this.Hours,10)===12){this.AMorPM="PM";
finalHour=12;
}else{if(this.Hours>12){this.AMorPM="PM";
if((this.Hours-12)<10){finalHour="0"+((parseInt(this.Hours,10))-12);
}else{finalHour=parseInt(this.Hours,10)-12;
}}else{this.AMorPM="AM";
if(this.Hours<10){finalHour="0"+parseInt(this.Hours,10);
}else{finalHour=this.Hours;
}}}}}else{if(TimeMode===24){if(this.Hours<10){finalHour="0"+parseInt(this.Hours,10);
}else{finalHour=this.Hours;
}}}return finalHour;
};
Calendar.prototype.getShowAMorPM=function(){return this.AMorPM;
};
Calendar.prototype.GetMonthName=function(IsLong){var Month=MonthName[this.Month];
if(IsLong){return Month;
}else{return Month.substr(0,3);
}};
Calendar.prototype.GetMonDays=function(){var DaysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];
if(Cal.IsLeapYear()){DaysInMonth[1]=29;
}return DaysInMonth[this.Month];
};
Calendar.prototype.IsLeapYear=function(){if((this.Year%4)===0){if((this.Year%100===0)&&(this.Year%400)!==0){return false;
}else{return true;
}}else{return false;
}};
Calendar.prototype.FormatDate=function(pDate){var MonthDigit=this.Month+1;
if(PrecedeZero===true){if((pDate<10)&&String(pDate).length===1){pDate="0"+pDate;
}if(MonthDigit<10){MonthDigit="0"+MonthDigit;
}}switch(this.Format.toUpperCase()){case"DDMMYYYY":return(pDate+DateSeparator+MonthDigit+DateSeparator+this.Year);
case"DDMMMYYYY":return(pDate+DateSeparator+this.GetMonthName(false)+DateSeparator+this.Year);
case"MMDDYYYY":return(MonthDigit+DateSeparator+pDate+DateSeparator+this.Year);
case"MMMDDYYYY":return(this.GetMonthName(false)+DateSeparator+pDate+DateSeparator+this.Year);
case"YYYYMMDD":return(this.Year+DateSeparator+MonthDigit+DateSeparator+pDate);
case"YYMMDD":return(String(this.Year).substring(2,4)+DateSeparator+MonthDigit+DateSeparator+pDate);
case"YYMMMDD":return(String(this.Year).substring(2,4)+DateSeparator+this.GetMonthName(false)+DateSeparator+pDate);
case"YYYYMMMDD":return(this.Year+DateSeparator+this.GetMonthName(false)+DateSeparator+pDate);
default:return(pDate+DateSeparator+(this.Month+1)+DateSeparator+this.Year);
}};
function GenCell(pValue,pHighLight,pColor,pClickable){var PValue,PCellStr,PClickable,vTimeStr;
if(!pValue){PValue="";
}else{PValue=pValue;
}if(pColor===undefined){pColor=CalBgColor;
}if(pClickable!==undefined){PClickable=pClickable;
}else{PClickable=true;
}if(Cal.ShowTime){vTimeStr=" "+Cal.Hours+":"+Cal.Minutes;
if(Cal.ShowSeconds){vTimeStr+=":"+Cal.Seconds;
}if(TimeMode===12){vTimeStr+=" "+Cal.AMorPM;
}}else{vTimeStr="";
}if(PValue!==""){if(PClickable===true){if(Cal.ShowTime===true){PCellStr="<td id='c"+PValue+"' class='calTD' style='text-align:center;cursor:pointer;background-color:"+pColor+"' onmousedown='selectDate(this,"+PValue+");'>"+PValue+"</td>";
}else{PCellStr="<td class='calTD' style='text-align:center;cursor:pointer;background-color:"+pColor+"' onmouseover='changeBorder(this, 0);' onmouseout=\"changeBorder(this, 1, '"+pColor+"');\" onClick=\"javascript:callback('"+Cal.Ctrl+"','"+Cal.FormatDate(PValue)+"');\">"+PValue+"</td>";
}}else{PCellStr="<td style='text-align:center;background-color:"+pColor+"' class='calTD'>"+PValue+"</td>";
}}else{PCellStr="<td style='text-align:center;background-color:"+pColor+"' class='calTD'>&nbsp;</td>";
}return PCellStr;
}function RenderCssCal(bNewCal){if(typeof bNewCal==="undefined"||bNewCal!==true){bNewCal=false;
}var vCalHeader,vCalData,vCalTime="",vCalClosing="",winCalData="",CalDate,i,j,SelectStr,vDayCount=0,vFirstDay,WeekDayName=[],strCell,showHour,ShowArrows=false,HourCellWidth="35px",SelectAm,SelectPm,funcCalback,headID,e,cssStr,style,cssText,span;
calHeight=0;
winCalData="<span style='cursor:auto;'>";
vCalHeader="<table style='background-color:"+CalBgColor+";width:200px;padding:0;margin:5px auto 5px auto'><tbody>";
vCalHeader+="<tr><td colspan='7'><table border='0' width='200px' cellpadding='0' cellspacing='0'><tr>";
if(Cal.Scroller==="DROPDOWN"){vCalHeader+="<td align='center'><select name='MonthSelector' onChange='javascript:Cal.SwitchMth(this.selectedIndex);RenderCssCal();'>";
for(i=0;
i<12;
i+=1){if(i===Cal.Month){SelectStr="Selected";
}else{SelectStr="";
}vCalHeader+="<option "+SelectStr+" value="+i+">"+MonthName[i]+"</option>";
}vCalHeader+="</select></td>";
vCalHeader+="<td align='center'><select name='YearSelector' size='1' onChange='javascript:Cal.SwitchYear(this.value);RenderCssCal();'>";
for(i=StartYear;
i<=(dtToday.getFullYear()+EndYear);
i+=1){if(i===Cal.Year){SelectStr='selected="selected"';
}else{SelectStr="";
}vCalHeader+="<option "+SelectStr+" value="+i+">"+i+"</option>\n";
}vCalHeader+="</select></td>\n";
calHeight+=30;
}else{if(Cal.Scroller==="ARROW"){if(UseImageFiles){vCalHeader+="<td><img onmousedown='javascript:Cal.DecYear();RenderCssCal();' src='"+imageFilesPath+"cal_fastreverse.gif' width='13px' height='9' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>\n";
vCalHeader+="<td><img onmousedown='javascript:Cal.DecMonth();RenderCssCal();' src='"+imageFilesPath+"cal_reverse.gif' width='13px' height='9' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>\n";
vCalHeader+="<td width='70%' class='calR' style='color:"+YrSelColor+"'>"+Cal.GetMonthName(ShowLongMonth)+" "+Cal.Year+"</td>";
vCalHeader+="<td><img onmousedown='javascript:Cal.IncMonth();RenderCssCal();' src='"+imageFilesPath+"cal_forward.gif' width='13px' height='9' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>\n";
vCalHeader+="<td><img onmousedown='javascript:Cal.IncYear();RenderCssCal();' src='"+imageFilesPath+"cal_fastforward.gif' width='13px' height='9' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>\n";
calHeight+=22;
}else{vCalHeader+="<td><span id='dec_year' title='reverse year' onmousedown='javascript:Cal.DecYear();RenderCssCal();' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white; color:"+YrSelColor+"'>-</span></td>";
vCalHeader+="<td><span id='dec_month' title='reverse month' onmousedown='javascript:Cal.DecMonth();RenderCssCal();' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'>&lt;</span></td>\n";
vCalHeader+="<td width='70%' class='calR' style='color:"+YrSelColor+"'>"+Cal.GetMonthName(ShowLongMonth)+" "+Cal.Year+"</td>\n";
vCalHeader+="<td><span id='inc_month' title='forward month' onmousedown='javascript:Cal.IncMonth();RenderCssCal();' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'>&gt;</span></td>\n";
vCalHeader+="<td><span id='inc_year' title='forward year' onmousedown='javascript:Cal.IncYear();RenderCssCal();'  onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white; color:"+YrSelColor+"'>+</span></td>\n";
calHeight+=22;
}}}vCalHeader+="</tr></table></td></tr>";
if(ShowMonthYear&&Cal.Scroller==="DROPDOWN"){vCalHeader+="<tr><td colspan='7' class='calR' style='color:"+MonthYearColor+"'>"+Cal.GetMonthName(ShowLongMonth)+" "+Cal.Year+"</td></tr>";
calHeight+=19;
}vCalHeader+="<tr><td colspan=\"7\"><table style='border-spacing:1px;border-collapse:separate;'><tr>";
if(MondayFirstDay===true){WeekDayName=WeekDayName2;
}else{WeekDayName=WeekDayName1;
}for(i=0;
i<7;
i+=1){vCalHeader+="<td style='background-color:"+WeekHeadColor+";width:"+CellWidth+"px;color:#FFFFFF' class='calTD'>"+WeekDayName[i].substr(0,WeekChar)+"</td>";
}calHeight+=19;
vCalHeader+="</tr>";
CalDate=new Date(Cal.Year,Cal.Month);
CalDate.setDate(1);
vFirstDay=CalDate.getDay();
if(MondayFirstDay===true){vFirstDay-=1;
if(vFirstDay===-1){vFirstDay=6;
}}vCalData="<tr>";
calHeight+=19;
for(i=0;
i<vFirstDay;
i+=1){vCalData=vCalData+GenCell();
vDayCount=vDayCount+1;
}for(j=1;
j<=Cal.GetMonDays();
j+=1){if((vDayCount%7===0)&&(j>1)){vCalData=vCalData+"<tr>";
}vDayCount=vDayCount+1;
if(Cal.EnableDateMode==="future"&&((j<dtToday.getDate())&&(Cal.Month===dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Month<dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Year<dtToday.getFullYear()))){strCell=GenCell(j,false,DisableColor,false);
}else{if(Cal.EnableDateMode==="past"&&((j>=dtToday.getDate())&&(Cal.Month===dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Month>dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Year>dtToday.getFullYear()))){strCell=GenCell(j,false,DisableColor,false);
}else{if(Cal.Year>(dtToday.getFullYear()+EndYear)){strCell=GenCell(j,false,DisableColor,false);
}else{if((j===dtToday.getDate())&&(Cal.Month===dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())){strCell=GenCell(j,true,TodayColor);
}else{if((j===selDate.getDate())&&(Cal.Month===selDate.getMonth())&&(Cal.Year===selDate.getFullYear())){strCell=GenCell(j,true,SelDateColor);
}else{if(MondayFirstDay===true){if(vDayCount%7===0){strCell=GenCell(j,false,SundayColor);
}else{if((vDayCount+1)%7===0){strCell=GenCell(j,false,SaturdayColor);
}else{strCell=GenCell(j,null,WeekDayColor);
}}}else{if(vDayCount%7===0){strCell=GenCell(j,false,SaturdayColor);
}else{if((vDayCount+6)%7===0){strCell=GenCell(j,false,SundayColor);
}else{strCell=GenCell(j,null,WeekDayColor);
}}}}}}}}vCalData=vCalData+strCell;
if((vDayCount%7===0)&&(j<Cal.GetMonDays())){vCalData=vCalData+"</tr>";
calHeight+=19;
}}if(vDayCount%7!==0){while(vDayCount%7!==0){vCalData=vCalData+GenCell();
vDayCount=vDayCount+1;
}}vCalData=vCalData+"</table></td></tr>";
if(Cal.ShowTime===true){showHour=Cal.getShowHour();
if(Cal.ShowSeconds===false&&TimeMode===24){ShowArrows=true;
HourCellWidth="10px";
}vCalTime="<tr><td colspan='7' style=\"text-align:center;\"><table border='0' width='199px' cellpadding='0' cellspacing='0'><tbody><tr><td height='5px' width='"+HourCellWidth+"'>&nbsp;</td>";
if(ShowArrows&&UseImageFiles){vCalTime+="<td style='vertical-align:middle;'><table cellspacing='0' cellpadding='0' style='line-height:0pt;width:100%;'><tr><td style='text-align:center;'><img onclick='nextStep(\"Hour\", \"plus\");' onmousedown='startSpin(\"Hour\", \"plus\");' onmouseup='stopSpin();' src='"+imageFilesPath+"cal_plus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr><tr><td style='text-align:center;'><img onclick='nextStep(\"Hour\", \"minus\");' onmousedown='startSpin(\"Hour\", \"minus\");' onmouseup='stopSpin();' src='"+imageFilesPath+"cal_minus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr></table></td>\n";
}vCalTime+="<td width='22px'><input type='text' name='hour' maxlength=2 size=1 style=\"WIDTH:22px\" value="+showHour+' onkeyup="javascript:Cal.SetHour(this.value)">';
vCalTime+="</td><td style='font-weight:bold;text-align:center;'>:</td><td width='22px'>";
vCalTime+="<input type='text' name='minute' maxlength=2 size=1 style=\"WIDTH: 22px\" value="+Cal.Minutes+' onkeyup="javascript:Cal.SetMinute(this.value)">';
if(Cal.ShowSeconds){vCalTime+="</td><td style='font-weight:bold;'>:</td><td width='22px'>";
vCalTime+="<input type='text' name='second' maxlength=2 size=1 style=\"WIDTH: 22px\" value="+Cal.Seconds+' onkeyup="javascript:Cal.SetSecond(parseInt(this.value,10))">';
}if(TimeMode===12){SelectAm=(Cal.AMorPM==="AM")?"Selected":"";
SelectPm=(Cal.AMorPM==="PM")?"Selected":"";
vCalTime+="</td><td>";
vCalTime+='<select name="ampm" onChange="javascript:Cal.SetAmPm(this.options[this.selectedIndex].value);">\n';
vCalTime+="<option "+SelectAm+' value="AM">AM</option>';
vCalTime+="<option "+SelectPm+' value="PM">PM<option>';
vCalTime+="</select>";
}if(ShowArrows&&UseImageFiles){vCalTime+="</td>\n<td style='vertical-align:middle;'><table cellspacing='0' cellpadding='0' style='line-height:0pt;width:100%'><tr><td style='text-align:center;'><img onclick='nextStep(\"Minute\", \"plus\");' onmousedown='startSpin(\"Minute\", \"plus\");' onmouseup='stopSpin();' src='"+imageFilesPath+"cal_plus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr><tr><td style='text-align:center;'><img onmousedown='startSpin(\"Minute\", \"minus\");' onmouseup='stopSpin();' onclick='nextStep(\"Minute\",\"minus\");' src='"+imageFilesPath+"cal_minus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr></table>";
}vCalTime+="</td>\n<td align='right' valign='bottom' width='"+HourCellWidth+"px'></td></tr>";
vCalTime+="<tr><td colspan='8' style=\"text-align:center;\"><input style='width:60px;font-size:12px;' onClick='javascript:closewin(\""+Cal.Ctrl+'");\'  type="button" value="OK">&nbsp;<input style=\'width:60px;font-size:12px;\' onClick=\'javascript: winCal.style.visibility = "hidden"\' type="button" value="Cancel"></td></tr>';
}else{vCalTime+="\n<tr>\n<td colspan='7' style=\"text-align:right;\">";
if(UseImageFiles){vCalClosing+="<img onmousedown='javascript:closewin(\""+Cal.Ctrl+"\"); stopSpin();' src='"+imageFilesPath+"cal_close.gif' width='16px' height='14px' onmouseover='changeBorder(this,0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>";
}else{vCalClosing+="<span id='close_cal' title='close'onmousedown='javascript:closewin(\""+Cal.Ctrl+"\");stopSpin();' onmouseover='changeBorder(this, 0)'onmouseout='changeBorder(this, 1)' style='border:1px solid white; font-family: Arial;font-size: 10pt;'>x</span></td>";
}vCalClosing+="</tr>";
}vCalClosing+="</tbody></table></td></tr>";
calHeight+=31;
vCalClosing+="</tbody></table>\n</span>";
funcCalback="function callback(id, datum) {";
funcCalback+=" var CalId = document.getElementById(id);if (datum=== 'undefined') { var d = new Date(); datum = d.getDate() + '/' +(d.getMonth()+1) + '/' + d.getFullYear(); } window.calDatum=datum;CalId.value=datum;";
funcCalback+=" if(Cal.ShowTime){";
funcCalback+=" CalId.value+=' '+Cal.getShowHour()+':'+Cal.Minutes;";
funcCalback+=" if (Cal.ShowSeconds)  CalId.value+=':'+Cal.Seconds;";
funcCalback+=" if (TimeMode === 12)  CalId.value+=''+Cal.getShowAMorPM();";
funcCalback+="}if(CalId.onchange!=undefined) CalId.onchange();CalId.focus();winCal.style.visibility='hidden';}";
if(ypos>calHeight){ypos=ypos-calHeight;
}if(!winCal){headID=document.getElementsByTagName("head")[0];
e=document.createElement("script");
e.type="text/javascript";
e.language="javascript";
e.text=funcCalback;
headID.appendChild(e);
cssStr=".calTD {font-family: verdana; font-size: 12px; text-align: center; border:0; }\n";
cssStr+=".calR {font-family: verdana; font-size: 12px; text-align: center; font-weight: bold;}";
style=document.createElement("style");
style.type="text/css";
style.rel="stylesheet";
if(style.styleSheet){style.styleSheet.cssText=cssStr;
}else{cssText=document.createTextNode(cssStr);
style.appendChild(cssText);
}headID.appendChild(style);
span=document.createElement("span");
span.id=calSpanID;
span.style.position="absolute";
span.style.left=(xpos+CalPosOffsetX)+"px";
span.style.top=(ypos-CalPosOffsetY)+"px";
span.style.width=CalWidth+"px";
span.style.border="solid 1pt "+SpanBorderColor;
span.style.padding="0";
span.style.cursor="move";
span.style.backgroundColor=SpanBgColor;
span.style.zIndex=100;
document.body.appendChild(span);
winCal=document.getElementById(calSpanID);
}else{winCal.style.visibility="visible";
winCal.style.Height=calHeight;
if(bNewCal===true){winCal.style.left=(xpos+CalPosOffsetX)+"px";
winCal.style.top=(ypos-CalPosOffsetY)+"px";
}}winCal.innerHTML=winCalData+vCalHeader+vCalData+vCalTime+vCalClosing;
return true;
}function NewCssCal(pCtrl,pFormat,pScroller,pShowTime,pTimeMode,pShowSeconds,pEnableDateMode){dtToday=new Date();
Cal=new Calendar(dtToday);
if(pShowTime!==undefined){if(pShowTime){Cal.ShowTime=true;
}else{Cal.ShowTime=false;
}if(pTimeMode){pTimeMode=parseInt(pTimeMode,10);
}if(pTimeMode===12||pTimeMode===24){TimeMode=pTimeMode;
}else{TimeMode=24;
}if(pShowSeconds!==undefined){if(pShowSeconds){Cal.ShowSeconds=true;
}else{Cal.ShowSeconds=false;
}}else{Cal.ShowSeconds=false;
}}if(pCtrl!==undefined){Cal.Ctrl=pCtrl;
}if(pFormat!==undefined&&pFormat!==""){Cal.Format=pFormat.toUpperCase();
}else{Cal.Format="MMDDYYYY";
}if(pScroller!==undefined&&pScroller!==""){if(pScroller.toUpperCase()==="ARROW"){Cal.Scroller="ARROW";
}else{Cal.Scroller="DROPDOWN";
}}if(pEnableDateMode!==undefined&&(pEnableDateMode==="future"||pEnableDateMode==="past")){Cal.EnableDateMode=pEnableDateMode;
}exDateTime=document.getElementById(pCtrl).value;
if(exDateTime){var Sp1=exDateTime.indexOf(DateSeparator,0),Sp2=exDateTime.indexOf(DateSeparator,parseInt(Sp1,10)+1),tSp1,tSp2,strMonth,strDate,strYear,intMonth,YearPattern,strHour,strMinute,strSecond,winHeight,offset=parseInt(Cal.Format.toUpperCase().lastIndexOf("M"),10)-parseInt(Cal.Format.toUpperCase().indexOf("M"),10)-1,strAMPM="";
if(Cal.Format.toUpperCase()==="DDMMYYYY"||Cal.Format.toUpperCase()==="DDMMMYYYY"){if(DateSeparator===""){strMonth=exDateTime.substring(2,4+offset);
strDate=exDateTime.substring(0,2);
strYear=exDateTime.substring(4+offset,8+offset);
}else{if(exDateTime.indexOf("D*")!==-1){strMonth=exDateTime.substring(8,11);
strDate=exDateTime.substring(0,2);
strYear="20"+exDateTime.substring(11,13);
}else{strMonth=exDateTime.substring(Sp1+1,Sp2);
strDate=exDateTime.substring(0,Sp1);
strYear=exDateTime.substring(Sp2+1,Sp2+5);
}}}else{if(Cal.Format.toUpperCase()==="MMDDYYYY"||Cal.Format.toUpperCase()==="MMMDDYYYY"){if(DateSeparator===""){strMonth=exDateTime.substring(0,2+offset);
strDate=exDateTime.substring(2+offset,4+offset);
strYear=exDateTime.substring(4+offset,8+offset);
}else{strMonth=exDateTime.substring(0,Sp1);
strDate=exDateTime.substring(Sp1+1,Sp2);
strYear=exDateTime.substring(Sp2+1,Sp2+5);
}}else{if(Cal.Format.toUpperCase()==="YYYYMMDD"||Cal.Format.toUpperCase()==="YYYYMMMDD"){if(DateSeparator===""){strMonth=exDateTime.substring(4,6+offset);
strDate=exDateTime.substring(6+offset,8+offset);
strYear=exDateTime.substring(0,4);
}else{strMonth=exDateTime.substring(Sp1+1,Sp2);
strDate=exDateTime.substring(Sp2+1,Sp2+3);
strYear=exDateTime.substring(0,Sp1);
}}else{if(Cal.Format.toUpperCase()==="YYMMDD"||Cal.Format.toUpperCase()==="YYMMMDD"){if(DateSeparator===""){strMonth=exDateTime.substring(2,4+offset);
strDate=exDateTime.substring(4+offset,6+offset);
strYear=exDateTime.substring(0,2);
}else{strMonth=exDateTime.substring(Sp1+1,Sp2);
strDate=exDateTime.substring(Sp2+1,Sp2+3);
strYear=exDateTime.substring(0,Sp1);
}}}}}if(isNaN(strMonth)){intMonth=Cal.GetMonthIndex(strMonth);
}else{intMonth=parseInt(strMonth,10)-1;
}if((parseInt(intMonth,10)>=0)&&(parseInt(intMonth,10)<12)){Cal.Month=intMonth;
}YearPattern=/^\d{4}$/;
if(YearPattern.test(strYear)){if((parseInt(strYear,10)>=StartYear)&&(parseInt(strYear,10)<=(dtToday.getFullYear()+EndYear))){Cal.Year=parseInt(strYear,10);
}}if((parseInt(strDate,10)<=Cal.GetMonDays())&&(parseInt(strDate,10)>=1)){Cal.Date=strDate;
}if(Cal.ShowTime===true){if(TimeMode===12){strAMPM=exDateTime.substring(exDateTime.length-2,exDateTime.length);
Cal.AMorPM=strAMPM;
}tSp1=exDateTime.indexOf(":",0);
tSp2=exDateTime.indexOf(":",(parseInt(tSp1,10)+1));
if(tSp1>0){strHour=exDateTime.substring(tSp1,tSp1-2);
Cal.SetHour(strHour);
strMinute=exDateTime.substring(tSp1+1,tSp1+3);
Cal.SetMinute(strMinute);
strSecond=exDateTime.substring(tSp2+1,tSp2+3);
Cal.SetSecond(strSecond);
}else{if(exDateTime.indexOf("D*")!==-1){strHour=exDateTime.substring(2,4);
Cal.SetHour(strHour);
strMinute=exDateTime.substring(4,6);
Cal.SetMinute(strMinute);
}}}}selDate=new Date(Cal.Year,Cal.Month,Cal.Date);
RenderCssCal(true);
}function closewin(id){if(Cal.ShowTime===true){var MaxYear=dtToday.getFullYear()+EndYear;
var beforeToday=(Cal.Date<dtToday.getDate())&&(Cal.Month===dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Month<dtToday.getMonth())&&(Cal.Year===dtToday.getFullYear())||(Cal.Year<dtToday.getFullYear());
if((Cal.Year<=MaxYear)&&(Cal.Year>=StartYear)&&(Cal.Month===selDate.getMonth())&&(Cal.Year===selDate.getFullYear())){if(Cal.EnableDateMode==="future"){if(beforeToday===false){callback(id,Cal.FormatDate(Cal.Date));
}}else{callback(id,Cal.FormatDate(Cal.Date));
}}}var CalId=document.getElementById(id);
CalId.focus();
winCal.style.visibility="hidden";
}function changeBorder(element,col,oldBgColor){if(col===0){element.style.background=HoverColor;
element.style.borderColor="black";
element.style.cursor="pointer";
}else{if(oldBgColor){element.style.background=oldBgColor;
}else{element.style.background="white";
}element.style.borderColor="white";
element.style.cursor="auto";
}}function selectDate(element,date){Cal.Date=date;
selDate=new Date(Cal.Year,Cal.Month,Cal.Date);
element.style.background=SelDateColor;
RenderCssCal();
}function pickIt(evt){var objectID,dom,de,b;
if(document.addEventListener){objectID=evt.target.id;
if(objectID.indexOf(calSpanID)!==-1){dom=document.getElementById(objectID);
cnLeft=evt.pageX;
cnTop=evt.pageY;
if(dom.offsetLeft){cnLeft=(cnLeft-dom.offsetLeft);
cnTop=(cnTop-dom.offsetTop);
}}xpos=(evt.pageX);
ypos=(evt.pageY);
}else{objectID=event.srcElement.id;
cnLeft=event.offsetX;
cnTop=(event.offsetY);
de=document.documentElement;
b=document.body;
xpos=event.clientX+(de.scrollLeft||b.scrollLeft)-(de.clientLeft||0);
ypos=event.clientY+(de.scrollTop||b.scrollTop)-(de.clientTop||0);
}if(objectID.indexOf(calSpanID)!==-1){domStyle=document.getElementById(objectID).style;
}if(domStyle){domStyle.zIndex=100;
return false;
}else{domStyle=null;
return;
}}function dragIt(evt){if(domStyle){if(document.addEventListener){domStyle.left=(event.clientX-cnLeft+document.body.scrollLeft)+"px";
domStyle.top=(event.clientY-cnTop+document.body.scrollTop)+"px";
}else{domStyle.left=(evt.clientX-cnLeft+document.body.scrollLeft)+"px";
domStyle.top=(evt.clientY-cnTop+document.body.scrollTop)+"px";
}}}function nextStep(whatSpinner,direction){if(whatSpinner==="Hour"){if(direction==="plus"){Cal.SetHour(Cal.Hours+1);
RenderCssCal();
}else{if(direction==="minus"){Cal.SetHour(Cal.Hours-1);
RenderCssCal();
}}}else{if(whatSpinner==="Minute"){if(direction==="plus"){Cal.SetMinute(parseInt(Cal.Minutes,10)+1);
RenderCssCal();
}else{if(direction==="minus"){Cal.SetMinute(parseInt(Cal.Minutes,10)-1);
RenderCssCal();
}}}}}function startSpin(whatSpinner,direction){document.thisLoop=setInterval(function(){nextStep(whatSpinner,direction);
},125);
}function stopSpin(){clearInterval(document.thisLoop);
}function dropIt(){stopSpin();
if(domStyle){domStyle=null;
}}document.onmousedown=pickIt;
document.onmousemove=dragIt;
document.onmouseup=dropIt;
function LabCommentsComponentStyle(){this.initByNamespace("labcomments");
}LabCommentsComponentStyle.inherits(ComponentStyle);
function LabCommentsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new LabCommentsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.LABCOMMENTS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.LABCOMMENTS.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
var that=this;
this.data={};
this.sAppendHTML;
LabCommentsComponent.method("InsertData",function(){this.data=MP_LAB_CONSOLE.GetActiveOrder();
this.sAppendHTML="";
CERN_LABCOMMENTS_O1.GetLabComments(this);
});
LabCommentsComponent.method("HandleSuccess",function(recordData){CERN_LABCOMMENTS_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.CLEAR_SR_RELATED",function(e){CERN_LABCOMMENTS_O1.RenderComponent(that,null);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e){that.data=MP_LAB_CONSOLE.GetActiveOrder();
that.sAppendHTML="";
log.debug("Comments_PERFORM_LOD");
CERN_LABCOMMENTS_O1.GetLabComments(that);
});
$("body").bind("LABCONSOLE.LOAD_RESULT_DETAILS",function(e){that.data=MP_LAB_CONSOLE.GetActiveResult();
that.sAppendHTML=$("#"+that.getComponentId()+"-comments").html();
log.debug("Comments_PERFORM_LRD");
CERN_LABCOMMENTS_O1.GetLabComments(that);
});
}LabCommentsComponent.inherits(MPageComponent);
var CERN_LABCOMMENTS_O1=function(){function getTypeString(comment,assayName){var sTypeDisplay="";
if(comment.COMMENT_SUB_TYPE=="ORDER"){switch(comment.COMMENT_MEAN){case"ORD COMMENT":sTypeDisplay=i18n.lab.labconsole_o1.ORDER_COMMENT;
break;
case"ORD NOTE":sTypeDisplay=i18n.lab.labconsole_o1.ORDER_NOTE;
break;
case"CANCELREASON":sTypeDisplay=i18n.lab.labconsole_o1.ORDER_CANCEL_REASON;
break;
case"REVIEW":sTypeDisplay=i18n.lab.labconsole_o1.ORDER_REVIEW_COMMENT;
break;
}}else{if(comment.COMMENT_SUB_TYPE=="RESULT"){switch(comment.COMMENT_MEAN){case"RES COMMENT":sTypeDisplay="("+assayName+") "+i18n.lab.labconsole_o1.RESULT_COMMENT;
break;
case"RES NOTE":sTypeDisplay="("+assayName+") "+i18n.lab.labconsole_o1.RESULT_NOTE;
break;
case"REVIEW":sTypeDisplay="("+assayName+") "+i18n.lab.labconsole_o1.RESULT_REVIEW_COMMENT;
break;
}}}return sTypeDisplay;
}return{GetLabComments:function(component){var sendAr=[];
var criterion=component.getCriterion();
var orderId=component.data.ORDER_ID?component.data.ORDER_ID:0;
var resultId=component.data.RESULT_ID?component.data.RESULT_ID:0;
sendAr.push("MINE",orderId+".00",resultId+".00");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_COMMENTS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var assayName=component.data.ASSAY_MNEMONIC?component.data.ASSAY_MNEMONIC:"";
if(recordData!=null){var commentLen=recordData.COMMENT_TYPES.length;
var commentCnt=0;
jsHTML.push("<div id="+component.getComponentId()+"-comments class=commentcomponent>");
for(var i=0;
i<commentLen;
i++){if(recordData.COMMENT_TYPES[i].COMMENT_IND==1){jsHTML.push("<div class=",recordData.COMMENT_TYPES[i].COMMENT_SUB_TYPE,'Comment><span class="ordcommenttitle">',getTypeString(recordData.COMMENT_TYPES[i],assayName),":</span><br />",'<p class="ordcomment">',recordData.COMMENT_TYPES[i].COMMENT_TEXT,"</p><div>");
commentCnt+=1;
}}}if(commentCnt<=0){jsHTML.push('<span class="res-none">'+i18n.lab.labconsole_o1.NO_COMMENTS_FOUND+"</span>");
}jsHTML.push("</div>");
sHTML=jsHTML.join("");
var sAccn=component.data.ACCESSION_FMTD===undefined?"":component.data.ACCESSION_FMTD;
var sMnemonic=component.data.ORDER_MNEMONIC===undefined?"":" ("+component.data.ORDER_MNEMONIC+")";
titleText=MP_Util.CreateTitleText(component,0,sAccn+sMnemonic);
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function ConsoleContainerComponentStyle(){this.initByNamespace("container");
}ConsoleContainerComponentStyle.inherits(ComponentStyle);
function consoleContainerComponent(criterion){this.setCriterion(criterion);
this.setStyles(new ConsoleContainerComponentStyle());
this.setComponentLoadTimerName("USR:MPG.CONSOLECONTAINER.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.CONSOLECONTAINER.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(0);
var that=this;
consoleContainerComponent.method("InsertData",function(){CERN_CONSOLECONTAINER_O1.GetContainerContent(this);
});
consoleContainerComponent.method("HandleSuccess",function(recordData){CERN_CONSOLECONTAINER_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e){CERN_CONSOLECONTAINER_O1.GetContainerContent(that);
});
$("body").bind("LABCONSOLE.CLEAR_SR_RELATED",function(e){MP_LAB_CONSOLE.ClearComponent(that,false);
});
$("body").bind("LABCORE.CONT_EVENT_TYPE_FILTER_CHANGED",function(e){CERN_CONSOLECONTAINER_O1.FilterContainerEventsByType(that);
});
}consoleContainerComponent.inherits(MPageComponent);
var CERN_CONSOLECONTAINER_O1=function(){var addClass=" containerswidget personsection";
var containers={};
var order={};
var self={};
function buildContainerString(container){return container.ACCESSION_CONT_NBR_DISP+" "+container.VOLUME+container.UNITS_DISP+" "+container.SPEC_CNTNR_DISP;
}function loadContainerEvents(containerID,component,row){if(row){MP_LAB_CONSOLE.SetSelectedRow(row,component.getComponentId());
}else{MP_LAB_CONSOLE.SetSelectedRow($("#"+containerID),component.getComponentId());
}var container=component.containers[containerID.replace("container-","")];
var sEventDate="";
var updateDate=new Date();
var sEventUser="";
var sEventDetail="";
var sDetailList="";
jsHTML=[];
sHTML="";
var excludedEventTypeCds=lab.core.CONT_EVENT_FILTER_DIALOG.GetExcludedEventTypeCodes();
for(var i=0;
i<container.EVENT_QUAL.length;
i++){var hideEvent=jQuery.inArray(Number(container.EVENT_QUAL[i].EVENT_TYPE_CD),excludedEventTypeCds)!=-1;
switch(container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()){case"COLLECTED":sEventDate=MP_LAB_UTIL.GetDateString(container.EVENT_QUAL[i].DRAWN_DT_TM);
sEventUser=container.EVENT_QUAL[i].DRAWN_USERNAME;
break;
case"LOGGED IN":sEventDate=MP_LAB_UTIL.GetDateString(container.EVENT_QUAL[i].RECEIVED_DT_TM);
sEventUser=container.EVENT_QUAL[i].RECEIVED_USERNAME;
break;
default:sEventDate=MP_LAB_UTIL.GetDateString(container.EVENT_QUAL[i].UPDT_DT_TM);
sEventUser=container.EVENT_QUAL[i].UPDT_USERNAME;
break;
}sEventDetail="";
if(container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()=="MODCONTAINER"){if(i>0){sDetailList="";
if(container.EVENT_QUAL[i-1].VOLUME!=container.EVENT_QUAL[i].VOLUME){sDetailList+=String(container.EVENT_QUAL[i-1].VOLUME)+" "+container.UNITS_DISP;
}if(container.EVENT_QUAL[i-1].SPEC_CNTNR_DISP!=container.EVENT_QUAL[i].SPEC_CNTNR_DISP){if(sDetailList!=""){sDetailList+=", ";
}sDetailList+=container.EVENT_QUAL[i-1].SPEC_CNTNR_DISP;
}if(container.EVENT_QUAL[i-1].COLL_CLASS_DISP!=container.EVENT_QUAL[i].COLL_CLASS_DISP){if(sDetailList!=""){sDetailList+=", ";
}sDetailList+=container.EVENT_QUAL[i-1].COLL_CLASS_DISP;
}if(container.EVENT_QUAL[i-1].SPEC_HNDL_DISP!=container.EVENT_QUAL[i].SPEC_HNDL_DISP){if(sDetailList!=""){sDetailList+=", ";
}if(container.EVENT_QUAL[i-1].SPEC_HNDL_DISP==""){sDetailList+=i18n.lab.labconsole_o1.NONE;
}else{sDetailList+=container.EVENT_QUAL[i-1].SPEC_HNDL_DISP;
}}sEventDetail=i18n.lab.labconsole_o1.CHANGED_FROM+" "+sDetailList;
}}jsHTML.push('<tr class="data-row-info"'+(hideEvent?' style="display:none"':"")+' data-event-type-cd = "'+container.EVENT_QUAL[i].EVENT_TYPE_CD+'">',"<td class=cntnr-event>",container.EVENT_QUAL[i].EVENT_TYPE_DISP,"</td>","<td class=cntnr-event-date>",sEventDate,"</td>","<td class=cntnr-event-user>",sEventUser,"</td>");
if(container.EVENT_QUAL[i].STORAGE_LOCATION_TXT.length>0&&(container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()==="STORED"||container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()==="CHECKED IN"||container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()==="PLACED IN"||container.EVENT_QUAL[i].EVENT_TYPE_MEAN.trim()==="RACKMOVED"||Number(container.EVENT_QUAL[i].USE_STORAGE_LOC_IND)==1)){jsHTML.push("<td class=cntnr-event-loc>",container.EVENT_QUAL[i].STORAGE_LOCATION_TXT,"</td>");
}else{jsHTML.push("<td class=cntnr-event-loc>",container.EVENT_QUAL[i].CURRENT_LOCATION_DISP,"</td>");
}jsHTML.push("<td class=cntnr-detail>",sEventDetail,"</td>","<td class=cntnr-event-update>",MP_LAB_UTIL.GetDateString(container.EVENT_QUAL[i].UPDT_DT_TM),"</td>","<td class=cntnr-event-update-user>",container.EVENT_QUAL[i].UPDT_USERNAME,"</td></tr>");
}sHTML=jsHTML.join("");
$("#table-"+component.getComponentId()+"-CONTAINER-EVENTS tbody").html(sHTML);
}function filterContainerEvents(component){var excludedEventTypeCds=lab.core.CONT_EVENT_FILTER_DIALOG.GetExcludedEventTypeCodes();
$("#table-"+component.getComponentId()+"-CONTAINER-EVENTS tr.data-row-info").each(function(){var contEventRow=$(this);
var eventTypeCd=Number(contEventRow.attr("data-event-type-cd"));
if(jQuery.inArray(eventTypeCd,excludedEventTypeCds)==-1){contEventRow.show();
}else{contEventRow.hide();
}});
}function BindEvents(component){var row=$("#table-"+component.getComponentId()+"-CONTAINERS tr.data-row-info");
row.click(function(){loadContainerEvents($(this).attr("id"),component,$(this));
});
row.mousemove(function(event){MP_LAB_UTIL.PositionTooltip(event);
});
row.hover(function(event){$(this).addClass("data-row-hover");
MP_LAB_UTIL.ShowTooltip(event,$(this).find("td.hvr_text:first").html());
},function(){$(this).removeClass("data-row-hover");
MP_LAB_UTIL.HideTooltip();
});
$("#filter-events-"+component.getComponentId()).click(function(e){lab.core.CONT_EVENT_FILTER_DIALOG.ShowDialog(e);
});
}return{GetContainerContent:function(component){var sendAr=[];
var criterion=component.getCriterion();
sendAr.push("MINE","'"+MP_LAB_CONSOLE.GetActiveOrder().ACCESSION+"'");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_CONTAINERS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
self=component;
self.containers={};
widget_id=self.getComponentId();
var containerText="";
jsHTML.push('<div class="subsection sub-sec-containers"><h3 class=sub-sec>',"<span class=sub-sec-title>",i18n.lab.labconsole_o1.CONTAINERS,':</span></h3><table id="table-'+component.getComponentId()+'-CONTAINERS" class=data-table-noctrl>',"<thead><tr class=container-table-head>",'<th title="Comment"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="comment" alt="Comment" title="Comment" /></th>','<th title="Container">',i18n.lab.labconsole_o1.CONTAINER,"</th>",'<th title="Collected Order">',i18n.lab.labconsole_o1.ORDER,"</th>","<th>","</th>","</tr></thead><tbody>");
for(var i=0;
i<recordData.ACCESSION_QUAL.length;
i++){for(var j=0;
j<recordData.ACCESSION_QUAL[i].CONTAINER_QUAL.length;
j++){self.containers[recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].CONTAINER_ID]=recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j];
jsHTML.push('<tr class=data-row-info id="container-',recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].CONTAINER_ID,'">');
if(recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].CONTAINER_COMMENT.length>0){jsHTML.push('<td class=comment value="1" title="',recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].CONTAINER_COMMENT,'">','<img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="ord-comment" alt="Comment" title="Comment" /></td>');
}else{jsHTML.push('<td class=comment value=" ">');
}jsHTML.push("</td><td class=cntnr-det>",buildContainerString(recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j]),"</td>","<td class=cntnr-collected>",recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].ORDER_QUAL[0].ORDER_MNEMONIC," (",recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].ORDER_QUAL[0].COLLECTION_PRIORITY_DISP,")",'</td><td class="hvr_text hidden">');
var container=recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j];
var contLen=container.ROUTING_DETAILS.length;
for(var k=0;
k<contLen;
k++){if(k>0){jsHTML.push("<br /><hr />");
}jsHTML.push("<dl class='containers-det'>");
jsHTML.push("<dt><span>",i18n.lab.labconsole_o1.ORDER,":</span></dt>");
jsHTML.push("<dd class='containers-det-name'><span>",container.ROUTING_DETAILS[k].ORDER_MNE,"</span></dd>");
jsHTML.push("<dt><span>",i18n.lab.SERVICE_RESOURCE,":</span></dt>");
jsHTML.push("<dd class='containers-det-name'><span>",container.ROUTING_DETAILS[k].INLAB_LOC,"</span></dd>");
jsHTML.push("<dt><span>",i18n.lab.labconsole_o1.IN_LAB_LOCATION,":</span></dt>");
jsHTML.push("<dd class='containers-det-name'><span>",container.ROUTING_DETAILS[k].LOGIN_LOC,"</span></dd>");
jsHTML.push("</dl>");
}jsHTML.push("</td></tr>");
if((i==0)&&(j==0)){firstContainerId="container-"+recordData.ACCESSION_QUAL[i].CONTAINER_QUAL[j].CONTAINER_ID;
}}}jsHTML.push("</tbody></table></div>");
jsHTML.push('<br /><div class="subsection sub-sec-cntnr-events"><h3 class=sub-sec>',"<span class=sub-class-title>",i18n.EVENTS,":</span></h3>",'<a class="filter-cont-events" href="javascript:void(0)"  id="filter-events-'+component.getComponentId()+'">',i18n.lab.labconsole_o1.FILTER,"</a>",'<div class="data-table-container"><table id="table-'+component.getComponentId()+'-CONTAINER-EVENTS" class="data-table-noctrl">',"<thead><tr class=container-event-table-head>",'<th title="Event">',i18n.lab.labconsole_o1.EVENT,"</th>",'<th title="Event Date and time">',i18n.lab.labconsole_o1.DATE_TIME,"</th>",'<th title="User Name">',i18n.lab.labconsole_o1.USER,"</th>",'<th title="Location">',i18n.LOCATION,"</th>",'<th title="Detail">',i18n.lab.labconsole_o1.DETAIL,"</th>",'<th title="Update Date and Time">',i18n.lab.labconsole_o1.UPDATE_DATE_TIME,"</th>",'<th title="Updated by User Name">',i18n.lab.labconsole_o1.UPDATE_USER,"</th>","</tr></thead><tbody></tbody></table></div></div>");
sHTML=jsHTML.join("");
containerText=MP_Util.CreateTitleText(component,0,MP_LAB_CONSOLE.GetActiveAccession().ACCESSION_FMTD);
MP_Util.Doc.FinalizeComponent(sHTML,component,containerText);
loadContainerEvents(firstContainerId,component);
BindEvents(component);
}catch(err){var error=err;
if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},FilterContainerEventsByType:function(component){filterContainerEvents(component);
}};
}();
function InstrumentActivityComponentStyle(){this.initByNamespace("instrumentMonitor");
}InstrumentActivityComponentStyle.inherits(ComponentStyle);
function InstrumentActivityComponent(criterion){this.setCriterion(criterion);
this.setStyles(new InstrumentActivityComponentStyle());
this.setComponentLoadTimerName("USR:MPG.INSTRUMENTACTIVITY.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.INSTRUMENTACTIVITY.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(0);
this.stop_record=0;
this.max_record=20;
this.total_recs=1;
this.mColOrders={};
this.sAppendHTML="";
this.dateSettings={};
var that=this;
InstrumentActivityComponent.method("InsertData",function(){this.stop_record=0;
CERN_INSTRUMENTACTIVITY_O1.GetInstrumentActivity(this);
});
InstrumentActivityComponent.method("HandleSuccess",function(recordData){CERN_INSTRUMENTACTIVITY_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.GLOBAL_SR_CHANGED",function(e){that.stop_record=0;
CERN_INSTRUMENTACTIVITY_O1.GetInstrumentActivity(that);
});
}InstrumentActivityComponent.inherits(MPageComponent);
var CERN_INSTRUMENTACTIVITY_O1=function(){function InstrumentActivityLoadOrderDetails(row,component){var curOrderId=row.find("td.iam-"+component.getComponentId()+"-status").eq(0).attr("id").replace("order-","");
var curOrder=component.mColOrders[curOrderId];
MP_LAB_CONSOLE.SetActivePerson({PERSON_ID:curOrder.PERSON_ID,FULL_NAME:curOrder.FULL_NAME.trim()});
MP_LAB_CONSOLE.SetActiveAccession({ACCESSION:curOrder.ACCESSION,ACTIVITY_TYPE_MEAN:curOrder.ACTIVITY_TYPE_MEAN,ACCESSION_FMTD:curOrder.ACCESSION_FMTD});
log.info("IAMLOD: Order: "+curOrderId+" Person: "+curOrder.PERSON_ID);
MP_LAB_CONSOLE.LoadOrderDetails(curOrder);
curOrderId=null;
curOrder=null;
MP_LAB_CONSOLE.SetSelectedRow(row,component.getComponentId());
}function BindEvents(component){$("#table-"+component.getComponentId()+" .btnMoreText").hide();
$("#IAM-"+component.getComponentId()+"-StartDate").val(MP_LAB_UTIL.GetDateString(component.dateSettings.startDate,"shortDateTimeDashed"));
$("#IAM-"+component.getComponentId()+"-EndDate").val(MP_LAB_UTIL.GetDateString(component.dateSettings.endDate,"shortDateTimeDashed"));
$("#table-"+component.getComponentId()+" tr.data-row-info").click(function(){InstrumentActivityLoadOrderDetails($(this),component);
return false;
});
$("#table-"+component.getComponentId()+" tr.data-row-info").dblclick(function(){InstrumentActivityLoadOrderDetails($(this),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).find("td.iam-"+component.getComponentId()+"-status").eq(0).attr("id"));
return false;
});
$("#table-"+component.getComponentId()+" td.iam-"+component.getComponentId()+"-accn").click(function(){InstrumentActivityLoadOrderDetails($(this).parent("tr"),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).parent("tr").find("td.iam-"+component.getComponentId()+"-status").eq(0).attr("id"));
return false;
});
$("#ALLfilter").tableFilter("#table-"+component.getComponentId());
MP_LAB_UTIL.MakeTableSortable("#table-"+component.getComponentId(),true);
$("#btn-"+component.getComponentId()+"-NEXT").click(function(){CERN_INSTRUMENTACTIVITY_O1.GetInstrumentActivity(component);
return false;
});
$("#btn-"+component.getComponentId()+"-Refresh").click(function(){component.stop_record=0;
CERN_INSTRUMENTACTIVITY_O1.GetInstrumentActivity(component);
return false;
});
$("#IAM-"+component.getComponentId()+"-GO").click(function(){var sDate=$("#IAM-"+component.getComponentId()+"-StartDate").val();
var eDate=$("#IAM-"+component.getComponentId()+"-EndDate").val();
var startDate=ParseDates(sDate);
var endDate=ParseDates(eDate);
component.dateSettings.startDate=new Date(startDate);
component.dateSettings.endDate=new Date(endDate);
component.stop_record=0;
CERN_INSTRUMENTACTIVITY_O1.GetInstrumentActivity(component);
return false;
});
rows=$("#table-"+component.getComponentId()+" tr.data-row-info");
$("#table-"+component.getComponentId()).trigger("update");
if(rows.length>0){$("#table-"+component.getComponentId()).trigger("sorton",[[[1,0],[2,0]]]);
rows.hover(function(event){$(this).addClass("data-row-hover");
MP_LAB_UTIL.ShowTooltip(event,$(this).find("td.hvr_text:first").html());
return false;
},function(){$(this).removeClass("data-row-hover");
MP_LAB_UTIL.HideTooltip(event);
return false;
}).mousemove(MP_LAB_UTIL.PositionTooltip);
}$("#iam-"+component.getComponentId()+"-settings").click(function(){var editBoxElement=document.getElementById("iam-"+component.getComponentId()+"-editbox");
if(editBoxElement.style.display=="block"){ShowEditBox(false,component);
}else{ShowEditBox(true,component);
}return false;
});
}function ShowEditBox(enable,component){var editBoxElement=document.getElementById("iam-"+component.getComponentId()+"-editbox");
var textElement=document.getElementById("iam-"+component.getComponentId()+"-settings");
if(enable){editBoxElement.style.display="block";
textElement.innerHTML=i18n.lab.labconsole_o1.HIDE;
}else{editBoxElement.style.display="none";
textElement.innerHTML=i18n.SETTINGS;
}}return{GetInstrumentActivity:function(component){var sendAr=[];
var criterion=component.getCriterion();
$("body").trigger("LABCONSOLE.CLEAR_GLOBAL_FILTER");
$("#iam-"+component.getComponentId()+"-control-status").replaceWith('<li id="iam-'+component.getComponentId()+'-control-status">'+i18n.discernabu.LOADING_DATA+"...</li>");
$("#iam-"+component.getComponentId()+"-table-control input.btnNext").attr("disabled","disabled");
$("#iam-"+component.getComponentId()+"-table-control input.btnRefresh").attr("disabled","disabled");
if($("#IAM-"+component.getComponentId()+"-EndDate").length>0){component.dateSettings={startDate:component.dateSettings.startDate,endDate:component.dateSettings.endDate};
}else{component.dateSettings={startDate:new Date().addHours(-1),endDate:new Date()};
}if(component.stop_record>0){component.sAppendHTML=$("#table-"+component.getComponentId()+" tbody").html();
}else{CERN_INSTRUMENTACTIVITY_O1.Clear(component);
component.sAppendHTML="";
}sendAr.push("MINE",MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD+".00","'"+MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_MEAN+"'","'"+MP_LAB_UTIL.GetDateString(component.dateSettings.startDate,"convertibleDtTm")+"'","'"+MP_LAB_UTIL.GetDateString(component.dateSettings.endDate,"convertibleDtTm")+"'",(component.stop_record+1),component.max_record);
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_IAM",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsAlHTML=[];
var alHTML="";
var headerText="";
var initRecVal=1;
var dateFmt=MP_LAB_CONSOLE.GetCalendarFmt();
component.stop_record=recordData.STOP_RECORD;
component.total_recs=recordData.QUAL_ACCESSION_CNT;
jsAlHTML.push("<div class='iam-settings'><a href='javascript:'><span name='iam-settings' id='iam-",component.getComponentId(),"-settings'>",i18n.SETTINGS,"</span></a></div>","<div class='comp-editbox' id='iam-",component.getComponentId(),"-editbox'><ul><li><label>",i18n.lab.labconsole_o1.BEGIN,":</label><input type='text' cols='35'","style='background-color: #FFF' id='IAM-",component.getComponentId(),"-StartDate'>","<a href=\"javascript: NewCssCal('IAM-",component.getComponentId(),"-StartDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >","<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='Calendar' title='Calendar' /></a></li>","<li><label>",i18n.lab.labconsole_o1.END,":</label><input type='text' cols='35' style='background-color: #FFF' id='IAM-",component.getComponentId(),"-EndDate'>","<a href=\"javascript: NewCssCal('IAM-",component.getComponentId(),"-EndDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >","<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='Calendar' title='Calendar' /></a></li>","<li><input class='retrieve' type='button' value='",i18n.lab.labconsole_o1.GO,"' id='IAM-",component.getComponentId(),"-GO'></li></ul></div>");
jsAlHTML.push('<div class="data-main-table-container"><div class="data-table-container"><div class="fillme"><div id="iam-',component.getComponentId(),'-table-control" class="data-table-control"><ul>');
if(component.stop_record>=component.total_recs){jsAlHTML.push('<li><input class="btnNext" type="button" value="',i18n.lab.labconsole_o1.NEXT,'" id="btn-',component.getComponentId(),'-NEXT" disabled="disabled" /></li>');
}else{jsAlHTML.push('<li><input class="btnNext" type="button" value="',i18n.lab.labconsole_o1.NEXT,'" id="btn-',component.getComponentId(),'-NEXT" /></li>');
}jsAlHTML.push('<li><input class="btnRefresh" type="button" value="',i18n.lab.labconsole_o1.REFRESH,'" id="btn-',component.getComponentId(),'-Refresh" /></li>');
if(component.total_recs>0){jsAlHTML.push("<li id=iam-",component.getComponentId(),"-control-status>",i18n.lab.labconsole_o1.ACCESSIONS," ",initRecVal," - ",component.stop_record," ",i18n.OF," ",component.total_recs,"</li>");
}else{jsAlHTML.push("<li id=iam-",component.getComponentId(),"-control-status>",i18n.NO_DATA,"</li>");
}var isHidden="";
if(MP_LAB_CONSOLE.HideSRColumn()){isHidden=" hidden";
}jsAlHTML.push('</ul></div><table id="table-',component.getComponentId(),'" class=data-table><thead><tr><th>',i18n.STATUS,'</th><th class="',isHidden,'">',i18n.lab.labconsole_o1.BENCH_INSTR,"</th>","<th>",i18n.lab.labconsole_o1.EVENT_DATE_TIME,"</th><th>",i18n.RESULT_EVENT,"</th><th>",i18n.lab.labconsole_o1.ACCESSION,"</th><th>",i18n.lab.labconsole_o1.ASSAY,"</th><th>",i18n.RESULT,"</th><th>",i18n.lab.labconsole_o1.PERSONNEL_NAME,"</th>","<th>"+i18n.lab.labconsole_o1.AV_CODES+"</th><th></th></tr><tr></tr></thead><tbody>");
jsAlHTML.push(component.sAppendHTML);
for(var i=0;
i<recordData.RESULTS.length;
i++){recordData.RESULTS[i].ORDER_MNEMONIC=recordData.RESULTS[i].CATALOG_DISP;
component.mColOrders[recordData.RESULTS[i].ORDER_ID]=recordData.RESULTS[i];
if(recordData.RESULTS[i].AV_ERROR_CD>0){icon=" status-alert";
}else{icon=" status-ok";
}jsAlHTML.push('<tr class=data-row-info><td class="iam-',component.getComponentId(),"-status",icon,'" id="order-',recordData.RESULTS[i].ORDER_ID,'"');
if(icon==" status-alert"){jsAlHTML.push(' value="2"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="status-alert" alt="Autoverification Error" title="Autoverification Error" />');
}else{jsAlHTML.push(' value="0"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="status-ok" alt="No Autoverification Errors" title="No Autoverification Errors" />');
}jsAlHTML.push('</td><td class="iam-',component.getComponentId(),"-sr-desc",isHidden,'">',recordData.RESULTS[i].SERVICE_RESOURCE_DISP,"</td><td class=iam-",component.getComponentId(),"-event-date>",MP_LAB_UTIL.GetDateString(recordData.RESULTS[i].RESULT_EVENT_DT_TM),"</td><td class=iam-",component.getComponentId(),"-event-disp>",recordData.RESULTS[i].RESULT_EVENT_TYPE_DISP,"</td><td class=iam-",component.getComponentId(),'-accn id="accn-',recordData.RESULTS[i].ACCESSION,'"><a href="javascript:" class="iam-',component.getComponentId(),'-accn-link accn-link">',recordData.RESULTS[i].ACCESSION_FMTD,"</a></td><td class=iam-",component.getComponentId(),"-assay>",recordData.RESULTS[i].TASK_ASSAY_DISP,"</td><td class=iam-",component.getComponentId(),"-result>",MP_LAB_RESULT.GetLabResult(recordData.RESULTS[i]),"</td><td class=iam-",component.getComponentId(),"-pers-name>",recordData.RESULTS[i].RESULT_EVENT_PERSONNEL_NAME,"</td>","<td class=iam-",component.getComponentId(),"-av-err>",recordData.RESULTS[i].AV_ERROR_DISP,'</td><td class="hvr_text hidden">');
jsAlHTML.push("<dl class='iam-det'>");
jsAlHTML.push("<dt><span>",i18n.lab.labconsole_o1.ACCESSION,":</span></dt>");
jsAlHTML.push("<dd class='iam-det-name'><span>",recordData.RESULTS[i].ACCESSION_FMTD,"</span></dd>");
jsAlHTML.push("</dl>");
jsAlHTML.push("</td></tr>");
}jsAlHTML.push("</tbody></table></div></div></div>");
alHTML=jsAlHTML.join("");
var headerText=MP_Util.CreateTitleText(component,0,MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_DISP);
MP_Util.Doc.FinalizeComponent(alHTML,component,headerText);
BindEvents(component);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},Clear:function(component){$("#table-"+component.getComponentId()+" tbody").empty();
$("#instrumentMonitor"+component.getComponentId()+" .sec-total").text("");
}};
}();
function ParseDates(dtString){var dateString=dtString;
var dateFmt=MP_LAB_CONSOLE.GetCalendarFmt();
if(dateFmt=="DDMMYYYY"||dateFmt=="DDMMMYYYY"){dateString=dateString.replace(/\-/g,"/").replace(/\./g,"/");
if(dateString.split(" ")[1]!=undefined){dateString=dateString.split(" ")[0].split("/").reverse().join("/")+" "+dateString.split(" ")[1];
}else{dateString=dateString.split(" ")[0].split("/").reverse().join("/");
}}return dateString;
}function OrderListComponentStyle(){this.initByNamespace("orderlist");
}OrderListComponentStyle.inherits(ComponentStyle);
function OrderListComponent(criterion){this.setCriterion(criterion);
this.setStyles(new OrderListComponentStyle());
this.setComponentLoadTimerName("USR:MPG.ORDERLIST.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.ORDERLIST.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.stop_record=0;
this.max_records=30;
this.total_recs=1;
this.start_date=new Date();
this.stop_date=new Date();
this.start_date.addDays(-60);
this.colOrders={};
this.sAppendHTML="";
this.contentLoaded=false;
var that=this;
OrderListComponent.method("InsertData",function(){that.stop_record=0;
CERN_ORDERLIST_O1.GetOrderList(this);
});
OrderListComponent.method("HandleSuccess",function(recordData){CERN_ORDERLIST_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e,isOrderList){if(!isOrderList){that.stop_record=0;
CERN_ORDERLIST_O1.GetOrderList(that);
}});
$("body").bind("LABCONSOLE.CLEAR_SR_RELATED",function(e){MP_LAB_CONSOLE.ClearComponent(that,true);
});
$("body").bind("LABCONSOLE.POL_ROW_SELECT",function(e,order_id){CERN_ORDERLIST_O1.SelectRowByOrderId(order_id,that);
});
$("body").bind("LABCONSOLE.POL_SYNC_SETTINGS",function(e,reqCompId,settings){if(that.getComponentId()!=reqCompId){that.start_date=settings.start_date;
that.stop_date=settings.stop_date;
that.stop_record=settings.stop_record;
$("#"+that.getComponentId()+"StartDate").val(MP_LAB_UTIL.GetDateString(that.start_date,"shortDateTimeDashed"));
$("#"+that.getComponentId()+"EndDate").val(MP_LAB_UTIL.GetDateString(that.stop_date,"shortDateTimeDashed"));
CERN_ORDERLIST_O1.GetOrderList(that);
}});
}OrderListComponent.inherits(MPageComponent);
var CERN_ORDERLIST_O1=function(){function polSelectRow(order_id,widget_id){var row=$("#"+order_id,"#table-"+widget_id),rowTop,offset,height;
if(row.length>0){MP_LAB_CONSOLE.SetSelectedRow(row,widget_id);
offset=$("#table-"+widget_id+" tbody").offset().top+40;
rowTop=row.offset().top;
height=$("#"+widget_id+"-content .data-table-container").height();
if(!((rowTop>offset)&&(rowTop<(offset+height)))){$("#"+widget_id+"-content .data-table-container").scrollTop(rowTop-offset);
}}}function SyncSettings(component){$("body").trigger("LABCONSOLE.POL_SYNC_SETTINGS",[component.getComponentId(),{start_date:component.start_date,stop_date:component.stop_date,stop_record:component.stop_record}]);
}function OrderListLoadOrderDetails(row,component){var curOrderId=row.attr("id").replace("order-","");
log.info("POL Click Fn: Order: "+curOrderId+"  Person: "+MP_LAB_CONSOLE.GetActivePerson().PERSON_ID);
MP_LAB_CONSOLE.SetSelectedRow(row,component.getComponentId());
var curOrder=component.colOrders[curOrderId];
MP_LAB_CONSOLE.SetActiveAccession({ACCESSION:curOrder.ACCESSION,ACTIVITY_TYPE_MEAN:curOrder.ACTIVITY_TYPE_MEAN,ACCESSION_FMTD:curOrder.ACCESSION_FMTD});
MP_LAB_CONSOLE.LoadOrderDetails(curOrder,true);
curOrder=null;
}function BindEvents(component){var component_id=component.getComponentId();
rows=$("#table-"+component_id+" tr.data-row-info");
$("#table-"+component_id).trigger("update");
if(rows.length>0){$("#table-"+component_id).trigger("sorton",[[[1,1]]]);
rows.hover(function(event){$(this).addClass("data-row-hover");
},function(event){$(this).removeClass("data-row-hover");
}).click(function(){OrderListLoadOrderDetails($(this),component);
return false;
}).dblclick(function(){OrderListLoadOrderDetails($(this),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).attr("id"));
return false;
});
$("#table-"+component_id+" td.pol-accn").click(function(){OrderListLoadOrderDetails($(this).parent("tr"),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).parent().attr("id"));
return false;
});
component.contentLoaded=true;
$("body").trigger("LABCONSOLE.POL_DATA_LOADED",[component.getComponentId()]);
}$("#btn"+component_id+"-Next").click(function(){$("#"+component_id.toLowerCase()+"-table-control input.btnNext").attr("disabled","disabled");
$("#"+component_id.toLowerCase()+"-table-control input.btnRefresh").attr("disabled","disabled");
$("#"+component_id+"-Filter").val("");
CERN_ORDERLIST_O1.GetOrderList(component);
SyncSettings(component);
return false;
});
$("#btn"+component_id+"-Refresh").click(function(){component.stop_record=0;
$("#"+component_id.toLowerCase()+"-table-control input.btnNext").attr("disabled","disabled");
$("#"+component_id.toLowerCase()+"-table-control input.btnRefresh").attr("disabled","disabled");
$("#"+component_id+"-Filter").val("");
CERN_ORDERLIST_O1.GetOrderList(component);
SyncSettings(component);
return false;
});
$("#btn"+component_id+"-Go").click(function(){var sDate=$("#"+component_id+"StartDate").val();
var eDate=$("#"+component_id+"EndDate").val();
var startDate=ParseDates(sDate);
var endDate=ParseDates(eDate);
component.start_date=new Date(startDate);
component.stop_date=new Date(endDate);
component.stop_record=0;
CERN_ORDERLIST_O1.GetOrderList(component);
SyncSettings(component);
return false;
});
$("#"+component_id+"-settings").click(function(){var editBoxElement=document.getElementById(component_id+"-editbox");
if(editBoxElement.style.display=="block"){ShowEditBox(false,component);
}else{ShowEditBox(true,component);
}return false;
});
}function ShowEditBox(enable,component){var component_id=component.getComponentId();
var editBoxElement=document.getElementById(component_id+"-editbox");
var textElement=document.getElementById(component_id+"-settings");
if(enable){editBoxElement.style.display="block";
textElement.innerHTML=i18n.lab.labconsole_o1.HIDE;
}else{editBoxElement.style.display="none";
textElement.innerHTML=i18n.SETTINGS;
}}return{GetOrderList:function(component){var sendAr=[];
var criterion=component.getCriterion();
$("#"+component.getComponentId()+"-control-status").html(i18n.discernabu.LOADING_DATA+"...");
if(component.stop_record>0){component.sAppendHTML=$("#table-"+component.getComponentId()+" tbody").html();
}else{CERN_ORDERLIST_O1.Clear(component);
component.sAppendHTML="";
}component.contentLoaded=false;
sendAr.push("MINE",MP_LAB_CONSOLE.GetActivePerson().PERSON_ID+".00,'"+MP_LAB_UTIL.GetDateString(component.start_date,"convertibleDtTm")+"','"+MP_LAB_UTIL.GetDateString(component.stop_date,"convertibleDtTm")+"'",component.stop_record+1,component.max_records);
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_PERSON_ORDERS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var dateFmt=MP_LAB_CONSOLE.GetCalendarFmt();
var component_id=component.getComponentId();
component.stop_record=recordData.STOP_RECORD;
component.total_recs=recordData.QUAL_CNT;
var qualLength=recordData.QUAL.length;
var qual=recordData.QUAL;
jsHTML.push("<div class='orderlist-menu'>");
jsHTML.push("<a href='javascript:'><span  id='"+component_id+"-settings'>",i18n.SETTINGS,"</span></a>");
jsHTML.push("</div>");
jsHTML.push("<div id='"+component_id+"-editbox' class='comp-editbox' >");
jsHTML.push("<ul>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.BEGIN,":</label><input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"StartDate'>");
jsHTML.push("<a href=\"javascript: NewCssCal('"+component_id+"StartDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >");
jsHTML.push("<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='Calendar' title='Calendar' /></a></li>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.END,":</label><input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"EndDate'>");
jsHTML.push("<a href=\"javascript: NewCssCal('"+component_id+"EndDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >");
jsHTML.push("<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='Calendar' title='Calendar' /></a></li>");
jsHTML.push("<li><input class='retrieve' type='button' value='",i18n.lab.labconsole_o1.GO,"' id='btn"+component_id+"-Go'></li>");
jsHTML.push("</ul>");
jsHTML.push("</div>");
jsHTML.push("<div class='data-main-table-container'>");
jsHTML.push("<div class=data-table-container><div class='fillme'><div id='"+component_id+"-table-control' class='data-table-control' ><ul>");
jsHTML.push("<li><input class='btnNext' type='button' value='",i18n.lab.labconsole_o1.NEXT,"' id='btn"+component_id+"-Next' disabled='disabled'></li>");
jsHTML.push("<li><input class='btnRefresh' type='button' value='",i18n.lab.labconsole_o1.REFRESH,"' id='btn"+component_id+"-Refresh' disabled='disabled' /></li>");
if(qualLength>0){jsHTML.push("<li id='"+component_id+"-control-status'>",i18n.lab.labconsole_o1.RECORDS," 1 - ",component.stop_record," ",i18n.OF," ",component.total_recs,"</li>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.FILTER,":</label><li />");
jsHTML.push("<input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"-filter'></li>");
}else{jsHTML.push("<li id='"+component_id+"-control-status'>",i18n.NO_DATA,"</li>");
}jsHTML.push("</ul></div>");
var n_column=9;
jsHTML.push("<table id='table-"+component_id+"' class='data-table'>");
jsHTML.push("<thead>");
jsHTML.push("<tr class=por-data-table>");
jsHTML.push("<th title='Comment Indicator'><img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='comment' alt='Comment' title='Comment' /></th>");
jsHTML.push("<th title='Date Collected'>",i18n.COLLECTED,"</th>");
jsHTML.push("<th title='Accession'>",i18n.lab.labconsole_o1.ACCESSION,"</th>");
jsHTML.push("<th title='Order Name'>",i18n.lab.labconsole_o1.ORDER,"</th>");
jsHTML.push("<th title='Order Priority'>",i18n.lab.labconsole_o1.PRIORITY,"</th>");
jsHTML.push("<th title='Order Status'>",i18n.STATUS,"</th>");
jsHTML.push("<th title='Specimen'>",i18n.lab.labconsole_o1.SPECIMEN,"</th>");
jsHTML.push("<th title='Date Ordered'>",i18n.lab.labconsole_o1.ORDER_DATE,"</th>");
jsHTML.push("<th title='Ordered By'>",i18n.lab.labconsole_o1.ORDER_PHYS,"</th>");
jsHTML.push("</tr>");
jsHTML.push("</thead>");
jsHTML.push("<tbody>");
jsHTML.push(component.sAppendHTML);
for(var i=0;
i<qualLength;
i++){component.colOrders[qual[i].ORDER_ID]=qual[i];
jsHTML.push("<tr class='data-row-info' id='order-",qual[i].ORDER_ID,"'>");
if(qual[i].ORDER_COMMENT_IND==1){jsHTML.push("<td value='1' class='comment'><img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='comment' alt='Comment' title='Comment' /></td>");
}else{jsHTML.push("<td value=' '></td>");
}jsHTML.push("<td class=pol-collect-date>",MP_LAB_UTIL.GetDateString(qual[i].DRAWN_DT_TM),"</td>");
jsHTML.push("<td class=pol-accn id='accn-",qual[i].ACCESSION,"'>");
jsHTML.push("<a href='javascript:' class='pol-accn-link accn-link'>",qual[i].ACCESSION_FMTD,"</a></td>");
jsHTML.push("<td class=pol-order>",qual[i].ORDER_MNEMONIC,"</td>");
jsHTML.push("<td class=pol-priority>",qual[i].REPORT_PRIORITY_DISP,"</td>");
jsHTML.push("<td class=pol-ord-stat>",qual[i].DEPT_STATUS_DISP,"</td>");
jsHTML.push("<td class=pol-specimen>",qual[i].SPECIMEN_TYPE_DISP,"</td>");
jsHTML.push("<td class=pol-ord-date>",MP_LAB_UTIL.GetDateString(qual[i].ORIG_ORDER_DT_TM),"</td>");
jsHTML.push("<td class=pol-ord-by>",qual[i].ORDERED_BY_NAME.trim(),"</td>");
jsHTML.push("</tr>");
}jsHTML.push("</tbody>");
jsHTML.push("</table></div></div>");
jsHTML.push("</div>");
sHTML=jsHTML.join("");
titleText=MP_Util.CreateTitleText(component,0,MP_LAB_CONSOLE.GetActivePerson().FULL_NAME);
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
MP_LAB_UTIL.MakeTableSortable("#table-"+component_id,true);
BindEvents(component);
$("#"+component_id+"-filter").tableFilter("#table-"+component_id);
$("#ALLfilter").tableFilter("#table-"+component_id);
if(component.stop_record>=component.total_recs){$("#btn"+component_id+"-Next").attr("disabled","disabled");
}else{$("#btn"+component_id+"-Next").removeAttr("disabled","disabled");
}$("#btn"+component_id+"-Refresh").removeAttr("disabled","disabled");
$("#"+component_id+"StartDate").val(MP_LAB_UTIL.GetDateString(component.start_date,"shortDateTimeDashed"));
$("#"+component_id+"EndDate").val(MP_LAB_UTIL.GetDateString(component.stop_date,"shortDateTimeDashed"));
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},Clear:function(component){$("#table-"+component.getComponentId()+" tbody").empty();
$("#orderlist"+component.getComponentId()+" .sec-total").text("");
},SelectRowByOrderId:function(params,component){if(component.contentLoaded){polSelectRow(params.ORDER_ID,component.getComponentId());
}else{$("body").unbind("LABCONSOLE.POL_DATA_LOADED").bind("LABCONSOLE.POL_DATA_LOADED",function(e,compId){if(compId==component.getComponentId()){polSelectRow(params.ORDER_ID,component.getComponentId());
$("body").unbind("LABCONSOLE.POL_DATA_LOADED");
return false;
}});
}}};
}();
function PendingOrdersComponentStyle(){this.initByNamespace("pendingorders");
}PendingOrdersComponentStyle.inherits(ComponentStyle);
function PendingOrdersComponent(criterion){this.setCriterion(criterion);
this.setStyles(new PendingOrdersComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PENDINGORDERS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PENDINGORDERS.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.stop_record=0;
this.max_records=60;
this.total_recs=1;
this.sAppendHTML="";
this.mColOrders={};
var that=this;
PendingOrdersComponent.method("InsertData",function(){this.stop_record=0;
CERN_PENDINGORDERS_O1.GetPendingOrders(this);
});
PendingOrdersComponent.method("HandleSuccess",function(recordData){CERN_PENDINGORDERS_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.GLOBAL_SR_CHANGED",function(e){that.stop_record=0;
CERN_PENDINGORDERS_O1.GetPendingOrders(that);
});
}PendingOrdersComponent.inherits(MPageComponent);
var CERN_PENDINGORDERS_O1=function(){function PendingOrdersLoadOrderDetails(row,component){var curOrderId=row.find("td.por-order").eq(0).attr("id").replace("order-","");
var curPersonId=row.attr("id").replace("person-","");
var order=component.mColOrders[curOrderId];
MP_LAB_CONSOLE.SetActivePerson({PERSON_ID:curPersonId,FULL_NAME:row.find("td.por-pat-name").eq(0).text()});
MP_LAB_CONSOLE.SetActiveAccession({ACCESSION:order.ACCESSION,ACTIVITY_TYPE_MEAN:order.ACTIVITY_TYPE_MEAN,ACCESSION_FMTD:order.ACCESSION_FMTD});
MP_LAB_CONSOLE.SetSelectedRow(row,component.getComponentId());
MP_LAB_CONSOLE.LoadOrderDetails(order);
}function BindEvents(component){$("#"+component.getComponentId()+"Filter").tableFilter("#table-"+component.getComponentId());
$("#ALLfilter").tableFilter("#table-"+component.getComponentId());
MP_LAB_UTIL.MakeTableSortable("#table-"+component.getComponentId(),true);
$("#btn-"+component.getComponentId()+"-NEXT").click(function(){CERN_PENDINGORDERS_O1.GetPendingOrders(component);
return false;
});
$("#btn-"+component.getComponentId()+"-Refresh").click(function(){component.stop_record=0;
CERN_PENDINGORDERS_O1.GetPendingOrders(component);
return false;
});
$("#table-"+component.getComponentId()+" tr.data-row-info").click(function(){PendingOrdersLoadOrderDetails($(this),component);
return false;
}).dblclick(function(){PendingOrdersLoadOrderDetails($(this),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).find("td.por-order").eq(0).attr("id"));
return false;
});
$("#table-"+component.getComponentId()+" td.por-accn").click(function(){PendingOrdersLoadOrderDetails($(this).parent("tr"),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).parent("tr").find("td.por-order").eq(0).attr("id"));
return false;
});
$("#table-"+component.getComponentId()+" .btnMoreText").click(function(){var row=$(this).parents("tr");
var orderId=row.find("td.por-order").eq(0).attr("id").replace("order-","");
MP_LAB_UTIL.ShowModalDialog(component.mColOrders[orderId].WORKLIST_ALIAS,3);
});
$("body").bind("FILTER_CMPLT_NO_ROW_SELECTED",function(e,filterId,searchString){var visibleRows;
if((filterId=="ALLfilter")||(filterId==component.getComponentId()+"Filter")){MP_LAB_CONSOLE.LoadOrderDetails(null);
visibleRows=$("#table-"+component.getComponentId()+" tr.data-row-info td.por-accn:visible");
if(visibleRows.length>0){visibleRows.eq(0).parent("tr").click();
}else{MP_LAB_CONSOLE.SetSelectedRow(null,component.getComponentId());
}}return false;
});
$("#table-"+component.getComponentId()+" td").removeAttr("title");
rows=$("#table-"+component.getComponentId()+" tr.data-row-info");
$("#table-"+component.getComponentId()).trigger("update");
if(rows.length>0){$("#table-"+component.getComponentId()).trigger("sorton",[[[1,0],[2,0],[3,0]]]);
rows.hover(function(event){$(this).addClass("data-row-hover");
MP_LAB_UTIL.ShowTooltip(event,$(this).find("td.hvr_text:first").html());
},function(event){$(this).removeClass("data-row-hover");
MP_LAB_UTIL.HideTooltip(event);
}).mousemove(MP_LAB_UTIL.PositionTooltip);
$("#table-"+component.getComponentId()+" tr.data-row-info").eq(0).click();
}}return{GetPendingOrders:function(component){var sendAr=[];
var criterion=component.getCriterion();
$("body").trigger("LABCONSOLE.CLEAR_GLOBAL_FILTER");
$("#"+component.getComponentId()+"-control-status").html(i18n.discernabu.LOADING_DATA+"...");
if(component.stop_record>0){var bruggie=$("#table-"+component.getComponentId()+" tbody").html();
component.sAppendHTML=bruggie;
}else{CERN_PENDINGORDERS_O1.Clear(component);
component.sAppendHTML="";
}sendAr.push("MINE",MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD+".00",component.stop_record+1,component.max_records);
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_PENDING_ORDERS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var pendingListLength=recordData.PEND_LIST.length;
component.stop_record=recordData.STOP_RECORD;
component.total_recs=recordData.QUAL_CNT;
jsHTML.push('<div class=data-table-container><div class="fillme"><div id="por-table-control" class="data-table-control"><ul>');
if(component.stop_record>=component.total_recs){jsHTML.push('<li><input class="btnNext" type="button" value="'+i18n.lab.labconsole_o1.NEXT+'" id="btn-'+component.getComponentId()+'-NEXT" disabled="disabled"></li>');
}else{jsHTML.push('<li><input class="btnNext" type="button" value="'+i18n.lab.labconsole_o1.NEXT+'" id="btn-'+component.getComponentId()+'-NEXT"></li>');
}jsHTML.push('<li><input class="btnRefresh" type="button" value="'+i18n.lab.labconsole_o1.REFRESH+'" id="btn-'+component.getComponentId()+'-Refresh" /></li>');
jsHTML.push("<li id="+component.getComponentId()+"-control-status>");
if(pendingListLength>0){jsHTML.push("Records 1 - ",component.stop_record," "+i18n.OF+" ",component.total_recs);
}else{jsHTML.push(i18n.NO_DATA);
}jsHTML.push("</li><li><label>"+i18n.lab.labconsole_o1.FILTER+':</label><li /><input style="background-color: #FFF" id="',component.getComponentId(),'Filter" type="text"/></li> </ul></div>');
jsHTML.push('<table id="table-',component.getComponentId(),'" class=data-table>');
jsHTML.push("<thead>","<tr class=data-table-head>",'<th class="comment"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="comment"  title="'+i18n.lab.labconsole_o1.COMMENTS+'" /></th>');
var isHidden="";
if(MP_LAB_CONSOLE.HideSRColumn()){isHidden=" hidden";
}jsHTML.push('<th class="',isHidden,'">'+i18n.lab.labconsole_o1.BENCH_INSTR+"</th>","<th>"+i18n.lab.labconsole_o1.ACCESSION+"</th>","<th>"+i18n.lab.labconsole_o1.ORDER+"</th>","<th>"+i18n.STATUS+"</th>","<th>"+i18n.lab.labconsole_o1.PRIORITY+"</th>","<th>"+i18n.lab.labconsole_o1.NAME+"</th>");
jsHTML.push("<th>"+i18n.COLLECTED+"</th>","<th>"+i18n.lab.labconsole_o1.WORKSHEET+"</th>","<th>"+i18n.lab.labconsole_o1.RCV_IN_LAB+"</th>","<th></th>","</tr>","</thead>");
jsHTML.push("<tbody>");
jsHTML.push(component.sAppendHTML);
for(var i=0;
i<pendingListLength;
i++){component.mColOrders[recordData.PEND_LIST[i].ORDER_ID]=recordData.PEND_LIST[i];
jsHTML.push('<tr class=data-row-info id="person-',recordData.PEND_LIST[i].PERSON_ID,'">');
if(recordData.PEND_LIST[i].ORDER_COMMENT_IND==1){jsHTML.push('<td title="Has Comment" value="1" class="comment"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="comment" alt="'+i18n.lab.labconsole_o1.COMMENTS+'" title="'+i18n.lab.labconsole_o1.COMMENTS+'" /></td>');
}else{jsHTML.push('<td title="No Comment" value=" ">&nbsp</td>');
}jsHTML.push('<td title="Bench/Instrument" class="por-test-site',isHidden,'">',recordData.PEND_LIST[i].SERVICE_RESOURCE_DISP,"</td>");
jsHTML.push('<td title="'+i18n.lab.labconsole_o1.ACCESSION+'" class=por-accn id="accn-',recordData.PEND_LIST[i].ACCESSION,'">');
jsHTML.push('<a href="javascript:" class="por-accn-link accn-link">',recordData.PEND_LIST[i].ACCESSION_FMTD,"</a></td>");
jsHTML.push('<td title="'+i18n.lab.labconsole_o1.ORDER+'" class=por-order id="order-',recordData.PEND_LIST[i].ORDER_ID,'">');
jsHTML.push(recordData.PEND_LIST[i].ORDER_MNEMONIC.trim(),"</td>");
if(recordData.PEND_LIST[i].STATUS_FLAG==1){jsHTML.push('<td title="',i18n.lab.labconsole_o1.ORDER," ",i18n.STATUS,'" class=por-ord-stat>',i18n.lab.labconsole_o1.IN_LAB,"</td>");
}else{jsHTML.push('<td title="',i18n.lab.labconsole_o1.ORDER," ",i18n.STATUS,'" class=por-ord-stat>',i18n.RCM_PENDING,"</td>");
}jsHTML.push('<td title="'+i18n.lab.labconsole_o1.PRIORITY+'" class=por-priority>',recordData.PEND_LIST[i].REPORT_PRIORITY_DISP,"</td>");
jsHTML.push('<td title="'+i18n.lab.labconsole_o1.NAME+'" class=por-pat-name>',recordData.PEND_LIST[i].NAME_FULL_FORMATTED,"</td>");
jsHTML.push('<td title="'+i18n.COLLECTED_DATE_TIME+'" class=por-collect-date>',MP_LAB_UTIL.GetDateString(recordData.PEND_LIST[i].DRAWN_DT_TM),"</td>");
jsHTML.push('<td title="'+i18n.lab.labconsole_o1.WORKSHEET+'" class=por-wksht>');
if(recordData.PEND_LIST[i].WORKLIST_ALIAS.trim().length>15){jsHTML.push(recordData.PEND_LIST[i].WORKLIST_ALIAS.trim().substring(0,15),'<input class="btnMoreText" type="button" value="..."/>');
}else{jsHTML.push(recordData.PEND_LIST[i].WORKLIST_ALIAS.trim());
}jsHTML.push("</td>",'<td title="'+i18n.lab.labconsole_o1.RCV_IN_LAB+'" class=por-inlab-date>',MP_LAB_UTIL.GetDateString(recordData.PEND_LIST[i].RECEIVED_DT_TM),"</td>");
jsHTML.push('<td class="hvr_text hidden">');
jsHTML.push("<dl class='pendingorders-det'>");
jsHTML.push("<dt><span>",i18n.lab.labconsole_o1.NAME,":</span></dt>");
jsHTML.push("<dd class='pendingorders-det-name'><span>",recordData.PEND_LIST[i].NAME_FULL_FORMATTED,"</span></dd>");
jsHTML.push("<dt><span>",i18n.lab.labconsole_o1.ACCESSION,":</span></dt>");
jsHTML.push("<dd class='pendingorders-det-name'><span>",recordData.PEND_LIST[i].ACCESSION_FMTD,"</span></dd>");
jsHTML.push("</dl>");
jsHTML.push("</td></tr>");
}jsHTML.push("</tbody></table></div></div>");
sHTML=jsHTML.join("");
titleText=MP_Util.CreateTitleText(component,0,MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_DISP);
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
BindEvents(component);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},Clear:function(component){$("#table-"+component.getComponentId()+" tbody").empty();
$("#pendingorders"+component.getComponentId()+" .sec-total").text("");
}};
}();
function PersonDemogComponentStyle(){this.initByNamespace("persondemog");
}PersonDemogComponentStyle.inherits(ComponentStyle);
function PersonDemogComponent(criterion){this.setCriterion(criterion);
this.setStyles(new PersonDemogComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PERSONDEMOG.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PERSONDEMOG.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
var that=this;
PersonDemogComponent.method("InsertData",function(){CERN_PERSONDEMOG_O1.GetPersonDemog(this);
});
PersonDemogComponent.method("HandleSuccess",function(recordData){CERN_PERSONDEMOG_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e){CERN_PERSONDEMOG_O1.GetPersonDemog(that);
});
$("body").bind("LABCONSOLE.CLEAR_SR_RELATED",function(e){CERN_PERSONDEMOG_O1.RenderComponent(that,null);
});
}PersonDemogComponent.inherits(MPageComponent);
var CERN_PERSONDEMOG_O1=function(){var addClass=" persondemogwidget personsection";
return{GetPersonDemog:function(component){var sendAr=[];
var criterion=component.getCriterion();
sendAr.push("MINE",MP_LAB_CONSOLE.GetActivePerson().PERSON_ID+".00",MP_LAB_CONSOLE.GetActiveOrder().ORDER_ID+".00");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_PERSON_DETAILS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var titleText="";
var jsHTML=[];
if(recordData!=null){jsHTML.push("<div class='persondemogwidget'><table><tr><td><span class=pat-det-mrn>","<h6>",i18n.MRN,": </h6>",recordData.ALL_MRN,"</span></td>","<td><span class=pat-det-fin>","<h6>",i18n.FIN,": </h6>",recordData.FIN,"</span></td>","<td><span class=pat-det-loc>","<h6>",i18n.LOCATION,": </h6>",recordData.LOCATION,"</span></td></tr>","<tr><td><span class=pat-det-age>",recordData.AGE,"</span>","<span class=pat-det-gender>",recordData.GENDER,"</span></td>","<td><span class=pat-det-dob>","<h6>",i18n.DOB,": </h6>",MP_LAB_UTIL.GetDateString(recordData.DOB,"mediumDate"),"</span></td>","<td><span class=pat-det-phys>","<h6>",i18n.ORDERING_PHYSICIAN,": </h6>",recordData.ORDERING_PHYS,"</span></td></tr></table><div>");
titleText=MP_Util.CreateTitleText(component,0,recordData.FULL_NAME);
}else{jsHTML.push('<h3 class="labcomments-info-hd"><span class="res-normal">'+i18n.NO_RESULTS_FOUND+"</span></h3>",'<span class="res-none">'+i18n.NO_RESULTS_FOUND+"</span>");
titleText=MP_Util.CreateTitleText(component,0,"");
}MP_Util.Doc.FinalizeComponent(jsHTML.join(""),component,titleText);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function PrevResultsComponentStyle(){this.initByNamespace("prevresults");
}PrevResultsComponentStyle.inherits(ComponentStyle);
function PrevResultsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new PrevResultsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.PREVRESULTS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.PREVRESULTS.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
var that=this;
this.data={};
PrevResultsComponent.method("InsertData",function(){that.data=MP_LAB_CONSOLE.GetActiveResult();
CERN_PREVRESULTS_O1.GetPrevResults(this);
});
PrevResultsComponent.method("HandleSuccess",function(recordData){CERN_PREVRESULTS_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.CLEAR_SR_RELATED",function(e){MP_LAB_CONSOLE.ClearComponent(that,false);
});
$("body").bind("LABCONSOLE.LOAD_RESULT_DETAILS",function(e){that.data=MP_LAB_CONSOLE.GetActiveResult();
CERN_PREVRESULTS_O1.GetPrevResults(that);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e){CERN_PREVRESULTS_O1.Clear(that);
});
}PrevResultsComponent.inherits(MPageComponent);
var CERN_PREVRESULTS_O1=function(){function BindEvents(component){var component_id=component.getComponentId();
rows=$("#table-"+component_id+" tr.data-row-info");
$("#table-"+component_id).trigger("update");
if(rows.length>0){$("#table-"+component.getComponentId()+" .btnMoreText").hide();
$("#table-"+component.getComponentId()+" td").removeAttr("title");
rows.hover(function(event){$(this).addClass("data-row-hover");
var text=$(this).find("td.hvr_text:first").html();
if(text!=""){MP_LAB_UTIL.ShowTooltip(event,text);
}},function(event){$(this).removeClass("data-row-hover");
MP_LAB_UTIL.HideTooltip(event);
});
}}return{GetPrevResults:function(component){var sendAr=[];
var criterion=component.getCriterion();
$("#"+component.getComponentId()+"-control-status").html(i18n.discernabu.LOADING_DATA+"...");
sendAr.push("MINE",MP_LAB_CONSOLE.GetActivePerson().PERSON_ID+".00",component.data.ASSAY_CD+".00","'"+MP_LAB_UTIL.GetDateString(component.data.COLLECTED_DT_TM,"convertibleDtTm")+"'");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_PREV_RESULTS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var sAppendHTML=[];
var component_id=component.getComponentId();
var qualLength=recordData.QUAL.length;
var qual=recordData.QUAL;
if(qualLength==0){jsHTML.push(i18n.NO_DATA);
}jsHTML.push("<div class=data-table-container><table id='table-"+component_id+"' class=data-table-noctrl>");
jsHTML.push("<thead>");
jsHTML.push("<tr class=prev-result-table-head>");
jsHTML.push("<th>",i18n.COLLECTED,"</th>");
jsHTML.push("<th>",i18n.RESULT,"</th>");
jsHTML.push("<th>",i18n.lab.labconsole_o1.ACCESSION,"</th>");
jsHTML.push("<th>",i18n.lab.labconsole_o1.PERFORMED,"</th>");
jsHTML.push("<th>",i18n.lab.labconsole_o1.VERIFIED,"</th>");
jsHTML.push("<th>",i18n.ORDERED,"</th>");
jsHTML.push("<th>",i18n.lab.labconsole_o1.ASSAY,"</th>");
jsHTML.push("<th>",i18n.RESULT," ",i18n.STATUS,"</th>");
jsHTML.push("<th></th>");
jsHTML.push("</tr>");
jsHTML.push("</thead>");
jsHTML.push("<tbody>");
for(var i=0;
i<qualLength;
i++){qual[i].RESULT_VALUE_NUMERIC=qual[i].RESULT;
jsHTML.push("<tr class=data-row-info>");
jsHTML.push("<td class=pres-collect>",MP_LAB_UTIL.GetDateString(qual[i].COLLECT_DT_TM),"</td>");
jsHTML.push("<td class=pres-result title='"+qual[i].ASCII_TEXT+"'>",MP_LAB_RESULT.GetLabResult(qual[i]),"</td>");
jsHTML.push("<td class=pres-accn>",qual[i].ACCESSION_FMTD,"</td>");
jsHTML.push("<td class=pres-perform>",MP_LAB_UTIL.GetDateString(qual[i].PERFORM_DT_TM),"</td>");
if((qual[i].RESULT_STATUS_MEAN.trim()==MP_LAB_RESULT.STATUS_MEAN.VERIFIED)||(qual[i].RESULT_STATUS_MEAN.trim()==MP_LAB_RESULT.STATUS_MEAN.AUTOVERIFIED)){jsHTML.push("<td class=pres-verfied>",MP_LAB_UTIL.GetDateString(qual[i].VERIFY_DT_TM),"</td>");
}else{jsHTML.push("<td class=pres-verfied></td>");
}jsHTML.push("<td class=pres-ordered>",MP_LAB_UTIL.GetDateString(qual[i].ORDER_DT_TM),"</td>");
jsHTML.push("<td class=pres-assay>",qual[i].TASK_ASSAY_DISP,"</td>");
jsHTML.push("<td class=pres-status>",qual[i].RESULT_STATUS_MEAN.trim(),"</td>");
jsHTML.push('<td class="hvr_text hidden">');
var lowhigh="";
lowhigh=MP_LAB_RESULT.GetRefRangeText(qual[i]);
if(lowhigh.length>0){if(!(lowhigh=="0 - 0")){jsHTML.push("<dl class='console_orderresults-det'>");
jsHTML.push("<dt><span>",i18n.NORMAL_RANGE,":</span></dt>");
jsHTML.push("<dd class='console_orderresults-det-name'><span>",lowhigh,"</span></dd>");
jsHTML.push("</dl>");
}}jsHTML.push("</td></tr>");
}jsHTML.push("</tbody></table></div>");
sHTML=jsHTML.join("");
titleText=MP_Util.CreateTitleText(component,0,MP_LAB_CONSOLE.GetActivePerson().FULL_NAME+" ( "+component.data.TASK_ASSAY_DISP+" )");
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
MP_LAB_UTIL.MakeTableSortable("#table-"+component_id,true);
$("#table-"+component_id+" span").removeAttr("title");
$("#table-"+component_id+" tr.data-row-info:even").addClass("even-prevresrow");
BindEvents(component);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},Clear:function(component){$("#table-"+component.getComponentId()+" tbody").empty();
$("#prevresult_nda").remove();
$("#table-"+component.getComponentId()).before("<span id='prevresult_nda'>"+i18n.NO_DATA+"</span>");
$("#prevresults"+component.getComponentId()+" .sec-total").text("");
}};
}();
function QCInquiryComponentStyle(){this.initByNamespace("qcinquiry");
}QCInquiryComponentStyle.inherits(ComponentStyle);
function QCInquiryComponent(criterion){this.setCriterion(criterion);
this.setStyles(new QCInquiryComponentStyle());
this.setComponentLoadTimerName("USR:MPG.QCINQUIRY.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.QCINQUIRY.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.stop_record=0;
this.max_records=50;
this.total_recs=0;
this.colResults={};
this.colControls={};
this.controlSelector;
this.assays;
this.start_date=new Date().addHours(-24);
this.stop_date=new Date();
var that=this;
QCInquiryComponent.method("InsertData",function(){CERN_QCINQUIRY_O1.GetQCResults(this);
});
QCInquiryComponent.method("HandleSuccess",function(recordData){CERN_QCINQUIRY_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.GLOBAL_SR_CHANGED",function(e){CERN_QCINQUIRY_O1.GetQCResults(that);
});
}QCInquiryComponent.inherits(MPageComponent);
var CERN_QCINQUIRY_O1=function(){function BindEvents(component){var component_id=component.getComponentId();
$("#"+component_id+"StartDate").val(MP_LAB_UTIL.GetDateString(component.start_date,"shortDateTimeDashed"));
$("#"+component_id+"EndDate").val(MP_LAB_UTIL.GetDateString(component.stop_date,"shortDateTimeDashed"));
MP_LAB_UTIL.MakeTableSortable("#table-"+component_id,true);
ShowEditBox(true,component);
$("#"+component_id+"-Filter").tableFilter("#table-"+component_id);
$("#"+component_id+"-settings").click(function(){var editBoxElement=document.getElementById(component_id+"-editbox");
if(editBoxElement.style.display=="block"){ShowEditBox(false,component);
}else{ShowEditBox(true,component);
}});
$("#btn"+component_id+"-Next").click(function(){$("#"+component_id+"-table-control input.btnNext").attr("disabled","disabled");
$("#"+component_id+"-table-control input.btnRefresh").attr("disabled","disabled");
$("#"+component_id+"-Filter").val("");
LoadQCResults(component);
});
$("#btn"+component_id+"-Refresh").click(function(){component.stop_record=0;
$("#"+component_id+"-table-control input.btnNext").attr("disabled","disabled");
$("#"+component_id+"-table-control input.btnRefresh").attr("disabled","disabled");
$("#"+component_id+"-Filter").val("");
$("#table-"+component_id+" tbody").empty();
LoadQCResults(component);
});
$("#btn"+component_id+"-Go").click(function(){component.stop_record=0;
$("#table-"+component_id+" tbody").empty();
LoadQCResults(component);
});
}function getQCResult(item){if(item.RESULT_TYPE_MEAN.trim()==MP_LAB_RESULT.TYPE.ALPHA){return item.RESULT_VALUE_ALPHA.trim();
}else{return item.RESULT_VALUE_NUMERIC.toFixed(2);
}}function LoadQCResults(component){var sendAr=[];
var component_id=component.getComponentId();
var sDate=$("#"+component_id+"StartDate").val();
var eDate=$("#"+component_id+"EndDate").val();
var startDate=ParseDates(sDate);
var endDate=ParseDates(eDate);
component.start_date=new Date(startDate);
component.stop_date=new Date(endDate);
component.controlSelector=$("#"+component_id+"ControlSelector").attr("value");
component.assays=$("#"+component_id+"Assays").attr("value");
$("#"+component_id+"-control-status").replaceWith('<li id="'+component_id+'-control-status">'+i18n.discernabu.LOADING_DATA+"...</li>");
sendAr.push("MINE",MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD+".00",component.controlSelector+".00",component.assays+".00");
sendAr.push("'"+MP_LAB_UTIL.GetDateString(component.start_date,"convertibleDtTm")+"'");
sendAr.push("'"+MP_LAB_UTIL.GetDateString(component.stop_date,"convertibleDtTm")+"'");
sendAr.push(component.stop_record+1,component.max_records);
MP_Core.XMLCclRequestWrapper_notComponent(component,"PNC_GET_QC_RESULTS",sendAr,true,function(data){ProcessQCResults(component,data);
});
}function ProcessQCResults(component,data){var component_id=component.getComponentId();
var jsHTML=[];
var contentHTML="";
component.stop_record=data.STOP_RECORD;
component.total_recs=data.QUAL_CNT;
var zscore="";
if(component.stop_record>=component.total_recs){$("#btn"+component_id+"-Next").attr("disabled","disabled");
}else{$("#btn"+component_id+"-Next").removeAttr("disabled","disabled");
}$("#btn"+component_id+"-Refresh").removeAttr("disabled","disabled");
for(var i=0;
i<data.RESULTS.length;
i++){component.colResults[data.RESULTS[i].QC_RESULT_ID]=data.RESULTS[i];
if(data.RESULTS[i].STATISTICAL_STD_DEV>0){zscore=((data.RESULTS[i].RESULT_VALUE_NUMERIC-data.RESULTS[i].MEAN)/data.RESULTS[i].STATISTICAL_STD_DEV).toFixed(2);
}var actionClass="";
switch(data.RESULTS[i].RESULT_STATUS_DISP.toUpperCase()){case"DISCARD":actionClass=" qcinq-discarded";
break;
case"REJECTED":actionClass=" qcinq-rejected";
break;
}jsHTML.push("<tr class='qcinq-info data-row-info"+actionClass+"' id='qc-rslt-"+data.RESULTS[i].QC_RESULT_ID+"'>");
jsHTML.push("<td class=qcinq-lot>");
jsHTML.push(data.RESULTS[i].LOT_NUMBER);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-ident>");
jsHTML.push(data.RESULTS[i].ACCESSION_FMTD);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-assay>");
jsHTML.push(data.RESULTS[i].MNEMONIC);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-result>");
jsHTML.push(getQCResult(data.RESULTS[i]));
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-flag>");
jsHTML.push(data.RESULTS[i].RESULT_PROCESS_DISP);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-action>");
jsHTML.push(data.RESULTS[i].RESULT_STATUS_DISP);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-perform>");
jsHTML.push(MP_LAB_UTIL.GetDateString(data.RESULTS[i].PERFORM_DT_TM));
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-performedby>");
jsHTML.push(data.RESULTS[i].RESULT_TECH);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-review>");
jsHTML.push(MP_LAB_UTIL.GetDateString(data.RESULTS[i].REVIEW_DT_TM));
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-reviewedby>");
jsHTML.push(data.RESULTS[i].REVIEW_TECH);
jsHTML.push("</td>");
jsHTML.push("<td class=qcinq-zscore>");
jsHTML.push(zscore==""?zscore:parseFloat(zscore));
jsHTML.push("</td>");
jsHTML.push("</tr>");
}contentHTML=jsHTML.join("");
$("#table-"+component_id+" tbody").append(contentHTML);
$("#table-"+component_id).trigger("update");
if(data.RESULTS.length>0){$("#table-"+component_id).trigger("sorton",[[[6,0],[2,0]]]);
$("#"+component_id+"-control-status").replaceWith('<li id="'+component_id+'-control-status">Records 1 - '+component.stop_record+i18n.OF+component.total_recs+".</li>");
}else{$("#"+component_id+"-control-status").replaceWith("<li id="+component_id+"-control-status>"+i18n.NO_DATA+"</li>");
}rows=$("#table-"+component_id+" tr.data-row-info");
if(rows.length>0){rows.hover(function(event){$(this).addClass("data-row-hover");
},function(event){$(this).removeClass("data-row-hover");
});
}}function ShowEditBox(enable,component){var component_id=component.getComponentId();
var editBoxElement=document.getElementById(component_id+"-editbox");
var textElement=document.getElementById(component_id+"-settings");
if(enable){editBoxElement.style.display="block";
textElement.innerHTML=i18n.lab.labconsole_o1.HIDE;
}else{editBoxElement.style.display="none";
textElement.innerHTML=i18n.SETTINGS;
}}function LoadControls(data,component){var contentHTML="";
var widget=this;
var maxoptlen;
var component_id=component.getComponentId();
maxoptlen=0;
if(data!=null){contentHTML='<select name="QC Controls" id="'+component_id+'ControlSelector" class=qccontrol>';
for(var i=0;
i<data.CONTROLS.length;
i++){component.colControls[data.CONTROLS[i].CONTROL_ID]=data.CONTROLS[i];
if(i==0){contentHTML+='<option selected="selected"';
}else{contentHTML+="<option";
}maxoptlen=data.CONTROLS[i].SHORT_DESC.length>maxoptlen?data.CONTROLS[i].SHORT_DESC.length:maxoptlen;
contentHTML+=' value="'+data.CONTROLS[i].CONTROL_ID+'"title="'+data.CONTROLS[i].SHORT_DESC+'">'+data.CONTROLS[i].SHORT_DESC+"</option>";
}contentHTML+="</select>";
}$("#lbl"+component_id+"ControlName").after(contentHTML);
$("#lbl"+component_id+"ControlName").show();
LoadAssays(component.colControls[$("#"+component_id+"ControlSelector").attr("value")],component);
$("#btn"+component_id+"-Go").click();
$("#"+component_id+"ControlSelector").click(function(){LoadAssays(component.colControls[$("#"+component_id+"ControlSelector").attr("value")],component);
});
}function LoadAssays(curControl,component){if(curControl){var component_id=component.getComponentId();
$("#"+component_id+"Assays").remove();
var contentHTML='<select name="QC Assays" id="'+component_id+'Assays" class=qccontrol><option selected="selected" value="0" title="'+i18n.lab.labconsole_o1.ALL_ASSAYS+'">'+i18n.lab.labconsole_o1.ALL_ASSAYS+"</option>";
for(var i=0;
i<curControl.ASSAYS.length;
i++){contentHTML+='<option value="'+curControl.ASSAYS[i].TASK_ASSAY_CD+'"title="'+curControl.ASSAYS[i].TASK_ASSAY_DISP+'">'+curControl.ASSAYS[i].TASK_ASSAY_DISP+"</option>";
}contentHTML+="</select>";
$("#lbl"+component_id+"Assays").after(contentHTML);
}}return{GetQCResults:function(component){var sendAr=[];
var srMean=MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_MEAN.trim();
var comp_id=component.getComponentId();
if((srMean=="BENCH")||(srMean=="INSTRUMENT")){sendAr.push("MINE",MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD+".00");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_QC_CONTROLS_BY_TS",sendAr,true);
}else{CERN_QCINQUIRY_O1.RenderComponent(component,null);
ShowEditBox(false,component);
$("#"+comp_id+"-control-status").replaceWith('<li id="'+comp_id+'-control-status">'+i18n.lab.labconsole_o1.QC_MSG+"</li>");
}},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var dateFmt=MP_LAB_CONSOLE.GetCalendarFmt();
var component_id=component.getComponentId();
jsHTML.push("<div class='orderlist-menu'>");
jsHTML.push('<a  href="javascript:"><span  id=\''+component_id+"-settings'>",i18n.SETTINGS,"</span></a>");
jsHTML.push("</div>");
jsHTML.push("<div id='"+component_id+"-editbox' class='comp-editbox' >");
jsHTML.push("<ul>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.BEGIN,":</label><input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"StartDate'>");
jsHTML.push("<a href=\"javascript: NewCssCal('"+component_id+"StartDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >");
jsHTML.push("<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='' title='' /></a></li>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.END,":</label><input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"EndDate'>");
jsHTML.push("<a href=\"javascript: NewCssCal('"+component_id+"EndDate','"+dateFmt+"','drop',true,24,false)\" class='btnCalendar' >");
jsHTML.push("<img src='",MP_LAB_CONSOLE.GetShimImgPath(),"' class='calendar' alt='' title='' /></a></li>");
jsHTML.push("<li><label id='lbl"+component_id+"ControlName'>"+i18n.lab.labconsole_o1.CONTROL_NAME+":</label></li>");
jsHTML.push("<li><label id='lbl"+component_id+"Assays'>"+i18n.lab.labconsole_o1.ASSAYS+":</label></li>");
jsHTML.push("<li><input class='retrieve' type='button' value='",i18n.lab.labconsole_o1.GO,"' id='btn"+component_id+"-Go'></li>");
jsHTML.push("</ul>");
jsHTML.push("</div>");
jsHTML.push("<div class='data-main-table-container'>");
jsHTML.push("<div class=data-table-container><div class='fillme'><div id='"+component_id+"-table-control' class='data-table-control' ><ul>");
jsHTML.push("<li><input class='btnNext' type='button' value='",i18n.lab.labconsole_o1.NEXT,"' id='btn"+component_id+"-Next' disabled='disabled'></li>");
jsHTML.push("<li><input class='btnRefresh' type='button' value='",i18n.lab.labconsole_o1.REFRESH,"' id='btn"+component_id+"-Refresh' disabled='disabled' /></li>");
jsHTML.push("<li id='"+component_id+"-control-status'>",i18n.NO_DATA,"</li>");
jsHTML.push("<li><label>",i18n.lab.labconsole_o1.FILTER,":</label><li />");
jsHTML.push("<input type='text' cols='35' style='background-color: #FFF' id='"+component_id+"-Filter'></li>");
jsHTML.push("</ul></div>");
jsHTML.push("<table id='table-"+component_id+"' class='data-table'>");
jsHTML.push("<thead>");
jsHTML.push("<tr class=por-data-table>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.LOT,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.ACCESSION,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.ASSAY,"</th>");
jsHTML.push("<th title=''>",i18n.RESULT,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.FLAG,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.ACTION,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.PERFORMED,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.PERFORMED_BY,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.REVIEWED,"</th>");
jsHTML.push("<th title=''>",i18n.lab.labconsole_o1.REVIEWED_BY,"</th>");
jsHTML.push("<th title=''>",i18n.ZSCORE,"</th>");
jsHTML.push("</tr>");
jsHTML.push("</thead>");
jsHTML.push("<tbody>");
jsHTML.push("</tbody>");
jsHTML.push("</table></div></div>");
jsHTML.push("</div>");
sHTML=jsHTML.join("");
titleText=MP_Util.CreateTitleText(component,0,MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_DISP);
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
LoadControls(recordData,component);
BindEvents(component);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function OrderResultsComponentStyle(){this.initByNamespace("console_orderresults");
}OrderResultsComponentStyle.inherits(ComponentStyle);
function OrderResultsComponent(criterion){this.setCriterion(criterion);
this.setStyles(new OrderResultsComponentStyle());
this.setComponentLoadTimerName("USR:MPG.ORDERRESULTS.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.ORDERRESULTS.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.colAccns={};
this.order={};
var that=this;
OrderResultsComponent.method("InsertData",function(){this.stop_record=0;
CERN_ORDERRESULTS_O1.GetOrderResults(this);
});
OrderResultsComponent.method("HandleSuccess",function(recordData){CERN_ORDERRESULTS_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.LOAD_ORDER_DETAILS",function(e){CERN_ORDERRESULTS_O1.GetOrderResults(that);
});
}OrderResultsComponent.inherits(MPageComponent);
var CERN_ORDERRESULTS_O1=function(){function BindEvents(component){var compId=component.getComponentId();
var accn=component.order.ACCESSION+"";
$("#table-"+compId+" .btnMoreText").click(function(){var row=$(this).parents("tr"),text;
var orderId=row.attr("id").replace("order-","");
var assayCd=row.find("td.result-assay:first").attr("id").replace("ta_cd-","");
var orderIdx=component.colAccns[accn].orders[orderId].idx;
var assayIdx=component.colAccns[accn].orders[orderId].assays[assayCd].idx;
text=component.colAccns[accn].QUAL[orderIdx].ASSAYS[assayIdx].ASCII_TEXT_LONG;
if(text.trim().length<=0){text=component.colAccns[accn].QUAL[orderIdx].ASSAYS[assayIdx].ASCII_TEXT;
}MP_LAB_UTIL.ShowModalDialog(text,3);
});
MP_LAB_UTIL.MakeTableSortable("#table-"+compId,true);
$("#table-"+compId+" span").removeAttr("title");
$("#table-"+compId).trigger("update");
if($("#table-"+compId+" tr.data-row-info").length>0){$("#table-"+compId).trigger("sorton",[[[3,0],[4,0]]]);
$("#table-"+compId+" tr.data-row-info").click(function(){log.debug(" Result ID: "+$(this).find("td.result-result:first").attr("id").replace("result-","")+" Task Assay Cd: "+$(this).find("td.result-assay:first").attr("id").replace("ta_cd-",""));
MP_LAB_CONSOLE.SetSelectedRow(this,compId);
var orderId=$(this).attr("id").replace("order-","");
var assayCd=$(this).find("td.result-assay:first").attr("id").replace("ta_cd-","");
var orderIdx=component.colAccns[accn].orders[orderId].idx;
var assayIdx=component.colAccns[accn].orders[orderId].assays[assayCd].idx;
log.debug("Result - order id: "+orderId+" accn: "+accn+" assay: "+assayCd+" ordidx: "+orderIdx+" assayIdx: "+assayIdx);
if(!$(this).is(":hidden")){$("body").trigger("LABCONSOLE.POL_ROW_SELECT",[{ORDER_ID:"order-"+orderId}]);
}MP_LAB_CONSOLE.SetActiveResult({ASSAY_CD:assayCd,TASK_ASSAY_DISP:$(this).find("td.result-assay:first").attr("value"),COLLECTED_DT_TM:component.colAccns[accn].QUAL[orderIdx].ASSAYS[assayIdx].DRAWN_DT_TM,ACCESSION_FMTD:component.order.ACCESSION_FMTD,ORDER_MNEMONIC:component.colAccns[accn].QUAL[orderIdx].ORDER_MNEMONIC,ORDER_ID:orderId,ORDER_COMMENT_IND:1,ASSAY_MNEMONIC:$(this).find("td.result-assay:first").attr("value"),RESULT_ID:$(this).find("td.result-result:first").attr("id").replace("result-",""),RESULT_COMMENT_IND:component.colAccns[accn].QUAL[orderIdx].ASSAYS[assayIdx].RESULT_COMMENT_IND});
log.debug("RESULTS_TRIGGER_LRD ");
$("body").trigger("LABCONSOLE.LOAD_RESULT_DETAILS");
});
$("#table-"+compId+" tr.data-row-info").hover(function(event){$(this).addClass("data-row-hover");
var text=$(this).find("td.hvr_text:first").html();
if(text!=""){MP_LAB_UTIL.ShowTooltip(event,text);
}},function(event){$(this).removeClass("data-row-hover");
MP_LAB_UTIL.HideTooltip(event);
}).mousemove(MP_LAB_UTIL.PositionTooltip);
}}return{GetOrderResults:function(component){var sendAr=[];
var criterion=component.getCriterion();
component.order=MP_LAB_CONSOLE.GetActiveOrder();
sendAr.push("MINE",MP_LAB_CONSOLE.GetActiveOrder().ORDER_ID+".00");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_RESULTS",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var titleText="";
var accn=MP_LAB_CONSOLE.GetActiveOrder().ACCESSION+"";
var compId=component.getComponentId();
component.colAccns[accn]=recordData;
jsHTML.push('<div class=data-table-container><table id="table-'+compId+'" class=data-table-noctrl>',"<thead>","<tr class=result-table-head>",'<th><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="comment" alt="'+i18n.lab.labconsole_o1.COMMENTS+'" title="'+i18n.lab.labconsole_o1.COMMENTS+'" /></th>',"<th>"+i18n.lab.labconsole_o1.ORDER+"</th>","<th>"+i18n.lab.labconsole_o1.ASSAY+"</th>",'<th class="hidden">(H)Order_cd</th>','<th class="hidden">(H)Assay_seq</th>',"<th>"+i18n.RESULT+"</th>","<th>"+i18n.lab.labconsole_o1.UNITS+"</th>","<th>"+i18n.STATUS+"</th>","<th>"+i18n.lab.labconsole_o1.PERFORMED+"</th>","<th>"+i18n.lab.labconsole_o1.VERIFIED+"</th>",'<th class="hidden">(hidden) ref range / hover data</th>',"</tr>","</thead>","<tbody>");
component.colAccns[accn].orders={};
var qualLen=recordData.QUAL.length;
var order={};
for(var j=0;
j<qualLen;
j++){order=recordData.QUAL[j];
component.colAccns[accn].orders[order.ORDER_ID]={idx:j,assays:{}};
var ordersLen=order.ASSAYS.length;
for(var i=0;
i<ordersLen;
i++){if(!(order.ASSAYS[i].PENDING_IND||order.ASSAYS[i].RESULT_IND)){continue;
}component.colAccns[accn].orders[order.ORDER_ID].assays[order.ASSAYS[i].TASK_ASSAY_CD]={idx:i};
jsHTML.push('<tr class="data-row-info order-'+order.ORDER_ID+'" id="order-'+order.ORDER_ID+'">');
if(order.ASSAYS[i].RESULT_COMMENT_IND==1){jsHTML.push('<td value="1" class="comment"><img src="'+MP_LAB_CONSOLE.GetShimImgPath()+'" class="comment" alt="'+i18n.lab.labconsole_o1.COMMENTS+'" title="'+i18n.lab.labconsole_o1.COMMENTS+'" /></td>');
}else{jsHTML.push('<td value=" "></td>');
}jsHTML.push("<td class=result-order>",order.ORDER_MNEMONIC.trim(),"</td>",'<td class=result-assay id="ta_cd-',order.ASSAYS[i].TASK_ASSAY_CD,'"',' value="',order.ASSAYS[i].MNEMONIC,'">',order.ASSAYS[i].MNEMONIC,"</td>",'<td class="result-ord-cd hidden">',order.CATALOG_CD,"</td>",'<td class="result-seq hidden">',order.ASSAYS[i].SEQUENCE,"</td>",'<td class=result-result id="result-',order.ASSAYS[i].RESULT_ID,'">');
if(order.ASSAYS[i].RESULT_IND){if((order.ASSAYS[i].RESULT_STATUS_MEAN.trim()!=MP_LAB_RESULT.STATUS_MEAN.PERFORMED)&&(order.ASSAYS[i].RESULT_STATUS_MEAN.trim()!=MP_LAB_RESULT.STATUS_MEAN.INREVIEW)){order.ASSAYS[i].RESULT_VALUE_NUMERIC=order.ASSAYS[i].RESULT;
jsHTML.push(MP_LAB_RESULT.GetLabResult(order.ASSAYS[i]));
}}jsHTML.push("</td>","<td class=result-units>",order.ASSAYS[i].UNITS_DISP.trim(),"</td>","<td class=result-status>",order.ASSAYS[i].RESULT_STATUS_DISP,"</td>");
jsHTML.push("<td class=result-performed>",MP_LAB_UTIL.GetDateString(order.ASSAYS[i].PERFORM_DT_TM),"</td>");
if(order.ASSAYS[i].RESULT_STATUS_MEAN.trim()==MP_LAB_RESULT.STATUS_MEAN.VERIFIED){jsHTML.push("<td class=result-verfied>",MP_LAB_UTIL.GetDateString(order.ASSAYS[i].EVENT_DT_TM),"</td>");
}else{jsHTML.push("<td class=result-verfied></td>");
}jsHTML.push('<td class="hvr_text hidden">');
var lowhigh="";
lowhigh=MP_LAB_RESULT.GetRefRangeText(order.ASSAYS[i]);
if(lowhigh.length>0){if(!(lowhigh=="0 - 0")){jsHTML.push("<dl class='console_orderresults-det'>");
jsHTML.push("<dt><span>",i18n.NORMAL_RANGE,":</span></dt>");
jsHTML.push("<dd class='console_orderresults-det-name'><span>",lowhigh,"</span></dd>");
jsHTML.push("</dl>");
}}jsHTML.push("</td></tr>");
}}jsHTML.push("</tbody></table></div>");
sHTML=jsHTML.join("");
var curOrder=MP_LAB_CONSOLE.GetActiveOrder();
titleText=MP_Util.CreateTitleText(component,0,curOrder.ACCESSION_FMTD+" ("+curOrder.ORDER_MNEMONIC+")");
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
curOrder=null;
BindEvents(component);
if(ordersLen>0){if($("#table-"+compId+" tr.order-"+component.order.ORDER_ID).length>0){$("#table-"+compId+" tr.order-"+component.order.ORDER_ID+":first").click();
}else{$("#table-"+compId+" tr.data-row-info:first").click();
}}}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}}};
}();
function ReviewQueueSumComponentStyle(){this.initByNamespace("reviewqueuesum");
}ReviewQueueSumComponentStyle.inherits(ComponentStyle);
function ReviewQueueSumComponent(criterion){this.setCriterion(criterion);
this.setStyles(new ReviewQueueSumComponentStyle());
this.setComponentLoadTimerName("USR:MPG.REVIEWQUEUESUM.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.REVIEWQUEUESUM.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.colQueues={};
ReviewQueueSumComponent.method("InsertData",function(){CERN_REVIEWQUEUESUM_01.GetReviewQueues(this);
});
ReviewQueueSumComponent.method("HandleSuccess",function(recordData){CERN_REVIEWQUEUESUM_01.RenderComponent(this,recordData);
});
}ReviewQueueSumComponent.inherits(MPageComponent);
var CERN_REVIEWQUEUESUM_01=function(){function SummarizeQueues(component,recordData){var queueItem={};
var curQueueItem={};
queueItem={QUEUE_ID:0,QUEUE_NAME:"",ORDER_CNT:0,colPriority:{},colStatus:{}};
component.colQueues={};
component.colQueues.ALL=curQueueItem;
queueItem=null;
component.colQueues.ALL.QUEUE_ID=0;
component.colQueues.ALL.QUEUE_NAME="All";
component.colQueues.ALL.ORDER_CNT=recordData.ORDER_QUAL.length;
component.colQueues.ALL.colPriority={};
component.colQueues.ALL.colStatus={};
var currentItem={};
for(var i=0;
i<recordData.ORDER_QUAL.length;
i++){currentItem=recordData.ORDER_QUAL[i];
if(component.colQueues[currentItem.QUEUE_ID]===undefined){curQueueItem={QUEUE_ID:currentItem.QUEUE_ID,QUEUE_NAME:currentItem.QUEUE_NAME,ORDER_CNT:0,colPriority:{},colStatus:{}};
component.colQueues[currentItem.QUEUE_ID]=curQueueItem;
curQueueItem=null;
}component.colQueues[currentItem.QUEUE_ID].ORDER_CNT+=1;
if(component.colQueues[currentItem.QUEUE_ID].colPriority[currentItem.RPT_PRIORITY_CD]===undefined){component.colQueues[currentItem.QUEUE_ID].colPriority[currentItem.RPT_PRIORITY_CD]={priority_cd:currentItem.RPT_PRIORITY_CD,priority_disp:currentItem.RPT_PRIORITY_DISP,priority_mean:currentItem.RPT_PRIORITY_MEAN,priority_cnt:0};
}component.colQueues[currentItem.QUEUE_ID].colPriority[currentItem.RPT_PRIORITY_CD].priority_cnt+=1;
if(component.colQueues[currentItem.QUEUE_ID].colStatus[currentItem.REVIEW_STATUS_CD]===undefined){component.colQueues[currentItem.QUEUE_ID].colStatus[currentItem.REVIEW_STATUS_CD]={review_status_cd:currentItem.REVIEW_STATUS_CD,review_status_disp:currentItem.REVIEW_STATUS_DISPLAY,review_status_cnt:0};
}component.colQueues[currentItem.QUEUE_ID].colStatus[currentItem.REVIEW_STATUS_CD].review_status_cnt+=1;
if(component.colQueues.ALL.colPriority[currentItem.RPT_PRIORITY_CD]===undefined){component.colQueues.ALL.colPriority[currentItem.RPT_PRIORITY_CD]={priority_cd:currentItem.RPT_PRIORITY_CD,priority_disp:currentItem.RPT_PRIORITY_DISP,priority_mean:currentItem.RPT_PRIORITY_MEAN,priority_cnt:0};
}component.colQueues.ALL.colPriority[currentItem.RPT_PRIORITY_CD].priority_cnt+=1;
if(component.colQueues.ALL.colStatus[currentItem.REVIEW_STATUS_CD]===undefined){component.colQueues.ALL.colStatus[currentItem.REVIEW_STATUS_CD]={review_status_cd:currentItem.REVIEW_STATUS_CD,review_status_disp:currentItem.REVIEW_STATUS_DISPLAY,review_status_cnt:0};
}component.colQueues.ALL.colStatus[currentItem.REVIEW_STATUS_CD].review_status_cnt+=1;
}}function BindEvents(component){$("#btnCVSRefresh"+component.getComponentId()).click(function(){CERN_REVIEWQUEUESUM_01.GetReviewQueues(component);
});
$("#cvsumQList"+component.getComponentId()+" li").click(function(){var queue_id="";
$("#cvsumQList"+component.getComponentId()+" li").removeClass("summarylineSelected");
$(this).addClass("summarylineSelected");
queue_id=$(this).attr("id").replace("queue-","");
queue_id=queue_id.replace("-"+component.getComponentId(),"");
CERN_REVIEWQUEUESUM_01.LoadQueueInformation(component,queue_id);
});
}return{GetReviewQueues:function(component){var sendAr=[];
sendAr.push("MINE");
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_REVIEW_QUEUE_SUM",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsHTML=[];
var sHTML="";
var revQueueLength=recordData.ORDER_QUAL.length;
jsHTML.push('<div class="data-table-container"><div id="'+component.getComponentId()+'-table-control" class="data-table-control" ><ul>');
jsHTML.push('<li><input class="btnRefresh" type="button" value="'+i18n.lab.labconsole_o1.REFRESH+'" id="btnCVSRefresh'+component.getComponentId()+'"/></li>');
jsHTML.push("<li id=",component.getComponentId(),"-control-status>");
if(revQueueLength==0){jsHTML.push(i18n.NO_DATA);
jsHTML.push("</li></ul></div>");
}else{jsHTML.push("</li></ul></div>");
jsHTML.push('<table id="table-',component.getComponentId(),'" class="clinvalsum-table">');
jsHTML.push("<thead>");
jsHTML.push("<tr class=clinvalsum-table-head>");
jsHTML.push('<th title="Queue List">',i18n.lab.labconsole_o1.QUEUES,"</th>");
jsHTML.push('<th title="By Priority">',i18n.lab.labconsole_o1.BY_PRIORITY,"</th>");
jsHTML.push('<th title="By Review Status">',i18n.lab.labconsole_o1.BY_REVIEW_STATUS,"</th>");
jsHTML.push("</tr>");
SummarizeQueues(component,recordData);
jsHTML.push("<tr id=data-row-info>");
jsHTML.push("<td id=clinvalsum-queuelist-",component.getComponentId(),">");
jsHTML.push('<ul class=clinvalsum-qlist id="cvsumQList',component.getComponentId(),'"><li class=cvQname id="queue-ALL-',component.getComponentId(),'">',i18n.lab.labconsole_o1.ALL);
jsHTML.push(" (",revQueueLength,")</li>");
$.each(component.colQueues,function(i,queue){if(queue.QUEUE_NAME!==i18n.lab.labconsole_o1.ALL){jsHTML.push('<li class=cvsumQname id="queue-',queue.QUEUE_ID,"-",component.getComponentId(),'">',queue.QUEUE_NAME);
jsHTML.push(" (",queue.ORDER_CNT,")</li>");
}});
jsHTML.push("</ul>");
jsHTML.push("</td>");
jsHTML.push("<td id=clinvalsum-bypriority-",component.getComponentId(),"></td>");
jsHTML.push("<td id=clinvalsum-bystatus-",component.getComponentId(),"></td></tr>");
jsHTML.push("</thead>");
jsHTML.push("<tbody></tbody></table>");
}jsHTML.push("</div>");
sHTML=jsHTML.join("");
MP_Util.Doc.FinalizeComponent(sHTML,component,"");
BindEvents(component);
$("#cvsumQList"+component.getComponentId()+" li:first").click();
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},LoadQueueInformation:function(component,queueId){var priorityHTML="";
var statusHTML="";
$("#clinvalsum-bystatus-"+component.getComponentId()).empty();
$("#clinvalsum-bypriority-"+component.getComponentId()).empty();
priorityHTML="<ul>";
$.each(component.colQueues[queueId].colPriority,function(i,priority){if(priority.priority_disp.trim()===""){priority.priority_disp="Unknown";
}priorityHTML+="<li>"+priority.priority_disp+" ("+priority.priority_cnt+")</li>";
});
priorityHTML+="</ul>";
$("#clinvalsum-bypriority-"+component.getComponentId()).append(priorityHTML);
statusHTML="<ul>";
$.each(component.colQueues[queueId].colStatus,function(i,status){if(status.review_status_disp.trim()===""){status.review_status_disp="Unknown";
}statusHTML+="<li>"+status.review_status_disp+" ("+status.review_status_cnt+")</li>";
});
statusHTML+="</ul>";
$("#clinvalsum-bystatus-"+component.getComponentId()).append(statusHTML);
}};
}();
function TATMonitorComponentStyle(){this.initByNamespace("tatmonitor");
}TATMonitorComponentStyle.inherits(ComponentStyle);
function TATMonitorComponent(criterion){this.setCriterion(criterion);
this.setStyles(new TATMonitorComponentStyle());
this.setComponentLoadTimerName("USR:MPG.TATMONITOR.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.TATMONITOR.O1 - render component");
this.setIncludeLineNumber(true);
this.setScope(0);
this.displaySettings="";
this.mColOrders={};
this.stop_record=0;
this.max_records=20;
this.total_recs=0;
this.compSettings={};
var that=this;
this.sAppendHTML="";
TATMonitorComponent.method("InsertData",function(){CERN_TATMONITOR_O1.GetTurnaroundTime(this);
});
TATMonitorComponent.method("HandleSuccess",function(recordData){CERN_TATMONITOR_O1.RenderComponent(this,recordData);
});
$("body").bind("LABCONSOLE.GLOBAL_SR_CHANGED",function(e){that.stop_record=0;
CERN_TATMONITOR_O1.GetTurnaroundTime(that);
});
$("body").bind("LABCONSOLE.TAT_COLOR_REFRESH",function(e,compId,row,add){if(that.getComponentId()==compId){CERN_TATMONITOR_O1.FixColor(row,add);
}});
}TATMonitorComponent.inherits(MPageComponent);
var CERN_TATMONITOR_O1=function(){function TurnaroundTimeLoadOrderDetails(row,component){var curOrderId=row.attr("id").replace("order-","");
var curOrder=component.mColOrders[curOrderId];
MP_LAB_CONSOLE.SetActivePerson({PERSON_ID:curOrder.PERSON_ID,FULL_NAME:curOrder.FULL_NAME.trim()});
MP_LAB_CONSOLE.SetActiveAccession({ACCESSION:curOrder.ACCESSION,ACTIVITY_TYPE_MEAN:curOrder.ACTIVITY_TYPE_MEAN,ACCESSION_FMTD:curOrder.ACCESSION_FMTD});
log.info("TATLOD - Order: "+curOrderId+"  Person: "+curOrder.PERSON_ID);
MP_LAB_CONSOLE.SetSelectedRow(row,component.getComponentId());
MP_LAB_CONSOLE.LoadOrderDetails(curOrder);
}function BindEvents(component){$("#table-"+component.getComponentId()+" tr.data-row-info").click(function(){TurnaroundTimeLoadOrderDetails($(this),component);
return false;
}).dblclick(function(){TurnaroundTimeLoadOrderDetails($(this),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).attr("id"));
return false;
});
$("#table-"+component.getComponentId()+" td.tat-accn").click(function(){TurnaroundTimeLoadOrderDetails($(this).parent("tr"),component);
MP_LAB_CONSOLE.ShowOrderDetailsView($(this).parent("tr").attr("id"));
return false;
});
$("#ALLfilter").tableFilter("#table-"+component.getComponentId());
MP_LAB_UTIL.MakeTableSortable("#table-"+component.getComponentId(),true);
$("#btn-"+component.getComponentId()+"-NEXT").click(function(){CERN_TATMONITOR_O1.GetTurnaroundTime(component);
return false;
});
$("#btn-"+component.getComponentId()+"-REFRESH").click(function(){component.stop_record=0;
CERN_TATMONITOR_O1.GetTurnaroundTime(component);
return false;
});
$("#table-"+component.getComponentId()).trigger("update");
rows=$("#table-"+component.getComponentId()+" tr.data-row-info");
if(rows.length>0){$("#table-"+component.getComponentId()).trigger("sorton",[[[1,0],[2,0]]]);
rows.mousemove(MP_LAB_UTIL.PositionTooltip).hover(function(event){addRemoveAlertClass($(this),false);
$(this).addClass("data-row-hover");
MP_LAB_UTIL.ShowTooltip(event,$(this).find("td.hvr_text:first").html());
},function(){$(this).removeClass("data-row-hover");
addRemoveAlertClass($(this),true);
MP_LAB_UTIL.HideTooltip();
});
rows=null;
}}function addRemoveAlertClass(row,add){var className="";
if(row.find("td.tat-status").eq(0).hasClass("status-warn")){className=" tat-warning";
}else{if(row.find("td.tat-status").eq(0).hasClass("status-alert")){className=" tat-alert";
}}if(className.length>0){if(add){if(!row.hasClass("rowSelectedMajor")){row.addClass(className);
}}else{row.removeClass(className);
}}return true;
}return{GetTurnaroundTime:function(component){var sendAr=[];
var criterion=component.getCriterion();
$("body").trigger("LABCONSOLE.CLEAR_GLOBAL_FILTER");
$("#tat-"+component.getComponentId()+"-table-control input.btnNext").attr("disabled","disabled");
$("#tat-"+component.getComponentId()+"-table-control input.btnRefresh").attr("disabled","disabled");
$("#tat-"+component.getComponentId()+"-control-status").replaceWith("<li id=tat-"+component.getComponentId()+"-control-status>"+i18n.discernabu.LOADING_DATA+"...</li>");
if(component.stop_record>0){component.sAppendHTML=$("#table-"+component.getComponentId()+" tbody").html();
}else{CERN_TATMONITOR_O1.Clear(component);
component.sAppendHTML="";
}sendAr.push("MINE",MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_CD+".00","'"+MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_MEAN+"'",(component.stop_record+1),component.max_records);
MP_Core.XMLCclRequestWrapper(component,"PNC_GET_TAT",sendAr,true);
},RenderComponent:function(component,recordData){var timerRenderComponent=MP_Util.CreateTimer(component.getComponentRenderTimerName());
try{var jsAlHTML=[];
var alHTML="";
var initRec=1;
component.stop_record=recordData.STOP_RECORD;
component.total_recs=recordData.QUAL_CNT;
jsAlHTML.push('<div class="data-table-container"><div class="fillme"><div id="tat-',component.getComponentId(),'-table-control"',' class="data-table-control"><ul>');
if(component.stop_record>=component.total_recs||component.total_recs==0){jsAlHTML.push('<li><input class="btnNext" type="button" value="',i18n.lab.labconsole_o1.NEXT,'" id="btn-',component.getComponentId(),'-NEXT" disabled="disabled" /></li>');
}else{jsAlHTML.push('<li><input class="btnNext" type="button" value="',i18n.lab.labconsole_o1.NEXT,'" id="btn-',component.getComponentId(),'-NEXT" /></li>');
}jsAlHTML.push('<li><input class="btnRefresh" type="button" value="',i18n.lab.labconsole_o1.REFRESH,'" id="btn-',component.getComponentId(),'-REFRESH"/></li>');
if(component.total_recs>0){jsAlHTML.push("<li id=tat-",component.getComponentId(),"-control-status>",i18n.lab.labconsole_o1.RECORDS," ",initRec," - ",component.stop_record," "+i18n.OF+" ",component.total_recs,"</li>");
}else{jsAlHTML.push("<li id=tat-",component.getComponentId(),"-control-status>",NO_DATA_AVAILABLE,"</li>");
}jsAlHTML.push("</ul></div>");
var isHidden="";
if(MP_LAB_CONSOLE.HideSRColumn()){isHidden=" hidden";
}jsAlHTML.push('<table id="table-',component.getComponentId(),'" class="data-table">',"<thead>","<tr>",'<th title="',i18n.STATUS,'">',i18n.STATUS,"</th>",'<th title="',i18n.lab.labconsole_o1.ACCESSION,'">',i18n.lab.labconsole_o1.ACCESSION,"</th>",'<th title="',i18n.lab.labconsole_o1.ORDER,'">',i18n.lab.labconsole_o1.ORDER,"</th>",'<th title="',i18n.lab.labconsole_o1.NAME,'">',i18n.lab.labconsole_o1.NAME,"</th>",'<th title="',i18n.lab.labconsole_o1.TEST_SITE,'" class="',isHidden,'">',i18n.lab.labconsole_o1.BENCH_INSTR,"</th>",'<th title="',i18n.lab.labconsole_o1.DISPLAY,'">',i18n.lab.labconsole_o1.DISPLAY,"</th>",'<th title="',i18n.lab.labconsole_o1.WARNING,'">',i18n.lab.labconsole_o1.WARNING,"</th>",'<th title="',i18n.lab.labconsole_o1.EXPIRATION,'">',i18n.lab.labconsole_o1.ALERT_EXPIRATION,"</th>","<th></th>","</tr>","</thead>","<tbody>");
jsAlHTML.push(component.sAppendHTML);
for(var i=0;
i<recordData.ACCNS.length;
i++){var warningDate=new Date();
var alertDate=new Date();
var today=new Date();
warningDate.setISO8601(recordData.ACCNS[i].WARNING_DT_TM);
alertDate.setISO8601(recordData.ACCNS[i].ALERT_DT_TM);
component.mColOrders[recordData.ACCNS[i].ORDER_ID]=recordData.ACCNS[i];
var background="";
if(today.getTime()>alertDate.getTime()){background=" tat-alert";
icon=" status-alert";
}else{if(today.getTime()>warningDate.getTime()){background=" tat-warning";
icon=" status-warn";
}else{background="";
icon=" status-ok";
}}warningDate=null;
alertDate=null;
today=null;
jsAlHTML.push('<tr class="data-row-info ',background,'" id="order-',recordData.ACCNS[i].ORDER_ID,'"><td class="tat-status ',icon,'"');
if(icon==" status-alert"){jsAlHTML.push(' value="2"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="status-alert" alt="Status Alert"/>');
}else{if(icon==" status-warn"){jsAlHTML.push(' value="1"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="status-warn" alt="Status Warning" />');
}else{jsAlHTML.push(' value="0"><img src="',MP_LAB_CONSOLE.GetShimImgPath(),'" class="status-ok" alt="Status Ok" />');
}}jsAlHTML.push("</td>",'<td class=tat-accn><a href="javascript:" class="tat-accn-link accn-link">',recordData.ACCNS[i].ACCESSION_FMTD,"</a></td>","<td class=tat-order>",recordData.ACCNS[i].ORDER_MNEMONIC,"</td>","<td class=tat-pat-name>",recordData.ACCNS[i].FULL_NAME,"</td>",'<td class="tat-sr-desc',isHidden,'">',recordData.ACCNS[i].SERVICE_RESOURCE_DESC,"</td>","<td class=tat-disp-date>",MP_LAB_UTIL.GetDateString(recordData.ACCNS[i].DISPLAY_DT_TM),"</td>","<td class=tat-warn-date>",MP_LAB_UTIL.GetDateString(recordData.ACCNS[i].WARNING_DT_TM),"</td>","<td class=tat-alert-date>",MP_LAB_UTIL.GetDateString(recordData.ACCNS[i].ALERT_DT_TM),"</td>");
jsAlHTML.push('<td  class="hvr_text hidden">');
jsAlHTML.push("<dl class='containers-det'>");
jsAlHTML.push("<dt><span>",i18n.lab.labconsole_o1.NAME,":</span></dt>");
jsAlHTML.push("<dd class='containers-det-name'><span>",recordData.ACCNS[i].FULL_NAME,"</span></dd>");
jsAlHTML.push("<dt><span>",i18n.lab.labconsole_o1.ACCESSION,":</span></dt>");
jsAlHTML.push("<dd class='containers-det-name'><span>",recordData.ACCNS[i].ACCESSION_FMTD,"</span></dd>");
jsAlHTML.push("</dl>");
jsAlHTML.push("</td>");
jsAlHTML.push("</tr>");
}jsAlHTML.push("</tbody></table></div></div>");
jsAlHTML.push("<br />");
alHTML=jsAlHTML.join("");
var headerText=MP_Util.CreateTitleText(component,0,MP_LAB_SR.GetServiceResource().SERVICE_RESOURCE_DISP);
MP_Util.Doc.FinalizeComponent(alHTML,component,headerText);
BindEvents(component);
}catch(err){if(timerRenderComponent){timerRenderComponent.Abort();
timerRenderComponent=null;
}throw (err);
}finally{if(timerRenderComponent){timerRenderComponent.Stop();
}}},Clear:function(component){$("#table-"+component.getComponentId()+" tbody").empty();
$("#tatmonitor"+component.getComponentId()+" .sec-total").text("");
},FixColor:function(row,add){addRemoveAlertClass(row,add);
}};
}();
function WebComponentStyle(){this.initByNamespace("webcontrol");
}WebComponentStyle.inherits(ComponentStyle);
function WebComponent(criterion,settings){this.setCriterion(criterion);
this.setStyles(new WebComponentStyle());
this.setComponentLoadTimerName("USR:MPG.WEBCONTROL.O1 - load component");
this.setComponentRenderTimerName("ENG:MPG.WEBCONTROL.O1 - render component");
this.setIncludeLineNumber(false);
this.setScope(0);
this.settings=settings;
WebComponent.method("InsertData",function(){CERN_WEBCONTROL_O1.GetWebControl(this);
});
WebComponent.method("HandleSuccess",function(recordData){return true;
});
}WebComponent.inherits(MPageComponent);
var CERN_WEBCONTROL_O1=function(){function BindEvents(component){$("#web_reset_"+component.getComponentId()).click(function(){CERN_WEBCONTROL_O1.GetWebControl(component);
});
}return{GetWebControl:function(component){var titleText="";
var sHTML="";
var jsHTML=[];
var url,style;
var settings;
var defaultSettings={url:"http://www.google.com"};
settings=component.settings?$.extend({},defaultSettings,component.settings):component.settings;
url=settings.url;
if(ieVersion>0){jsHTML.push('<input type="button" value="'+i18n.lab.labconsole_o1.HOME+'" id="web_reset_'+component.getComponentId()+'">');
jsHTML.push('<object class="webobject" id="'+component.getComponentId()+'" classid="clsid:25336920-03F9-11CF-8FD0-00AA00686F13" data="'+url+'">');
jsHTML.push("<p>"+i18n.ERROR_OCCURED+"</p>");
jsHTML.push("</object>");
}else{jsHTML.push('<input type="button" value="'+i18n.lab.labconsole_o1.HOME+'" id="web_reset_'+component.getComponentId()+'">');
jsHTML.push('<object class="webobject" id="'+component.getComponentId()+'" type="text/html" data="'+url+'">');
jsHTML.push("<p>"+i18n.ERROR_OCCURED+"</p>");
jsHTML.push("</object>");
}sHTML=jsHTML.join("");
titleText=MP_Util.CreateTitleText(component,0);
MP_Util.Doc.FinalizeComponent(sHTML,component,titleText);
BindEvents(component);
}};
}();
var MP_LAB_SR=function(){var LOADING_TIMEOUT=30;
var m_jsSRList=[];
var m_jsSRLoad=[];
var m_colServiceResources={};
var m_noSRSelected={SERVICE_RESOURCE_MEAN:"",SERVICE_RESOURCE_CD:0,SERVICE_RESOURCE_DISP:"{"+i18n.lab.labconsole_o1.NONE_SELECTED+"}"};
var m_serviceResource={SERVICE_RESOURCE_MEAN:"",SERVICE_RESOURCE_CD:0,SERVICE_RESOURCE_DISP:"{"+i18n.lab.labconsole_o1.NONE_SELECTED+"}"};
function buildSRBoxJSON(data,callback){m_jsSRList=[];
var instCnt=data.INSTITUTIONS.length;
if(instCnt>0){processArray(data.INSTITUTIONS,processInstitutionJSON,callback);
}}function processArray(items,process,callback){var todo=items.concat();
setTimeout(function(){process(todo.shift());
if(todo.length>0){setTimeout(arguments.callee,LOADING_TIMEOUT);
}else{callback();
}},25);
}function getJSONObjectForSR(resource){var arLine={};
arLine.data=resource.SERVICE_RESOURCE_DISP;
arLine.attr={id:"sr-"+resource.SERVICE_RESOURCE_CD,"class":resource.SERVICE_RESOURCE_MEAN};
if(resource.SERVICE_RESOURCE_MEAN=="INSTITUTION"){m_jsSRLoad.push("sr-"+resource.SERVICE_RESOURCE_CD);
}m_colServiceResources[(""+resource.SERVICE_RESOURCE_CD)]=resource;
return arLine;
}function processInstitutionJSON(curInst){var deptCnt,sectCnt,subSectCnt,srCnt;
var curDept,curSect,curSubSect;
var curJSInst,curJSDept,curJSSect,curJSSubSect;
curJSInst=getJSONObjectForSR(curInst);
deptCnt=curInst.DEPARTMENTS.length;
if(deptCnt>0){curJSInst.children=[];
}for(var j=0;
j<deptCnt;
j++){curDept=curInst.DEPARTMENTS[j];
curJSDept=getJSONObjectForSR(curDept);
sectCnt=curDept.SECTIONS.length;
if(sectCnt>0){curJSDept.children=[];
}for(var k=0;
k<sectCnt;
k++){curSect=curDept.SECTIONS[k];
curJSSect=getJSONObjectForSR(curSect);
subSectCnt=curSect.SUBSECTIONS.length;
if(subSectCnt>0){curJSSect.children=[];
}for(var m=0;
m<subSectCnt;
m++){curSubSect=curSect.SUBSECTIONS[m];
curJSSubSect=getJSONObjectForSR(curSubSect);
srCnt=curSubSect.INSTR_BENCHS.length;
if(srCnt>0){curJSSubSect.children=[];
}for(var n=0;
n<srCnt;
n++){curJSSubSect.children.push(getJSONObjectForSR(curSubSect.INSTR_BENCHS[n]));
}curJSSect.children.push(curJSSubSect);
}curJSDept.children.push(curJSSect);
}curJSInst.children.push(curJSDept);
}m_jsSRList.push(curJSInst);
}function writePreDataContent(){var preContentHTML=[];
preContentHTML.push('<div id="srdialog" class="window"><a class="modal-close" title="'+i18n.lab.CLOSE+'"/><h4>'+i18n.lab.labconsole_o1.AVAILABLE_RESOURCES+":</h4>","<div class=atreecontrol><ul>",'<li><a href="javascript:" id="tv-minus">'+i18n.COLLAPSE_ALL+"</a></li>  ",'<li><a href="javascript:" id="tv-plus">'+i18n.EXPAND_ALL+"</a></li>  ","<li><span class=srSearch><label>"+i18n.lab.labconsole_o1.SEARCH+':</label><input id="SRFilter" type="text"/></span></li>',"</ul></div>");
preContentHTML.push('<div id="srbox"></div><span class=close_label><a href="javascript:" class="close">'+i18n.lab.CLOSE+'</a></span></div><div id="mask"></div>');
$("body").append(preContentHTML.join(""));
}function bindEventsJSON(){$("#tv-plus").click(function(){$.jstree._reference($("#srbox")).open_all();
});
$("#tv-minus").click(function(){$.jstree._reference($("#srbox")).close_all();
});
$("#srbox").jstree({initially_open:m_jsSRLoad,ui:{select_limit:1,select_multiple_modifier:"alt",selected_parent_close:"select_parent"},themes:{theme:"serviceresources",dots:true,icons:true},search:{case_insensitive:true},json_data:{data:m_jsSRList,progressive_render:true},plugins:["themes","json_data","search","ui"]});
$(".window .close").click(function(e){closeDialog(e);
});
$(".modal-close").click(function(e){closeDialog(e);
});
$("#SRFilter").keyup(function(e){keys=[27,32,37,38,39,40];
if($.inArray(e.keyCode,keys)>=0){return false;
}if(e.keyCode==8){$("#srbox").find("a.jstree-search").removeClass("jstree-search");
$.jstree._reference($("#srbox")).close_all();
return true;
}if(e.keyCode==13){$.jstree._reference($("#srbox")).close_all();
$.jstree._reference($("#srbox")).search($(this).val(),true);
}});
}function closeDialog(e){e.preventDefault();
$("#mask").hide();
$(".window").hide();
}function processResponse(data,failure,callback){var contentHTML=[];
if(!failure){buildSRBoxJSON(data,function(){resourceLoadingCompleteJSON(callback);
});
}else{$("#srbox").html(i18n.ERROR_RETREIVING_DATA);
}}function resourceLoadingCompleteJSON(callback){bindEventsJSON();
MP_LAB_SR.SetServiceResource();
if(callback!==undefined){callback();
}}function setupClickEvent(callback){$("#srbox a").die("click");
$("#srbox a").live("click",function(){$("#srbox a").removeClass("clicked");
var curResourcecd=$(this).parent().attr("id").replace("sr-","");
currentSR=null;
currentSR=m_colServiceResources[(""+curResourcecd)];
if(currentSR===undefined){currentSR=m_noSRSelected;
}m_serviceResource=currentSR;
if(callback!==undefined){callback(currentSR);
}$("body").trigger("LABCONSOLE.GLOBAL_SR_CHANGED");
});
}function showDialog(e,currentSR){e.preventDefault();
var id=$("#srdialog");
var maskHeight=$(document).height();
var maskWidth=$(window).width();
var winH=$(window).height();
var winW=$(window).width();
id.css("top",winH/2-$(id).height()/2).css("left",winW/2-$(id).width()/2);
$("#SRFilter").val("");
if(currentSR.SERVICE_RESOURCE_CD>0){$.jstree._reference($("#srbox")).close_all();
$.jstree._reference($("#srbox")).search(currentSR.SERVICE_RESOURCE_DISP);
}id.show();
$("#mask").css({width:maskWidth,height:maskHeight,opacity:0.5}).show();
}return{LoadServiceResources:function(callback){var paramsAr=[];
paramsAr.push("MINE");
MP_Core.XMLCclRequestWrapper_notComponent("USR:MPG.LABSERVICERESOURCES.O1 - load module","pnc_get_resources",paramsAr,true,function(data,failure){processResponse(data,failure,callback);
});
writePreDataContent();
},SetServiceResource:function(resourceCd,tryingDefault){currentSR=null;
log.debug("SetMP_LAB_SR - ResourceCD: "+resourceCd);
currentSR=m_colServiceResources[(""+resourceCd)];
if(currentSR===undefined){log.debug("SR not found in SR Collection");
currentSR=m_noSRSelected;
if(tryingDefault){currentSR.TRIED_DEFAULT_SR=true;
}}m_serviceResource=currentSR;
log.debug("SR Changed event about to trigger SR: "+currentSR.SERVICE_RESOURCE_CD);
$("body").trigger("LABCONSOLE.GLOBAL_SR_CHANGED");
},ShowSRDialog:function(e,currentSR,callback){setupClickEvent(callback);
showDialog(e,currentSR);
},ServiceResourcesAvailable:function(){if($("#srbox a").length>0){return true;
}return false;
},GetServiceResource:function(){return m_serviceResource;
}};
}();
if(typeof lab=="undefined"){lab={};
}if(typeof lab.core=="undefined"){lab.core={};
}lab.core.CONT_EVENT_FILTER_DIALOG=function(){function closeDialog(e){var me=lab.core.CONT_EVENT_FILTER_DIALOG;
if(e!=null){e.preventDefault();
}$("#cont-event-filter-window-mask").hide();
$(".cont-event-filter-window").hide();
$(window).unbind("resize",positionDialog);
me.tempContEventFilterSettings=null;
}function defaultSettings(e){var me=lab.core.CONT_EVENT_FILTER_DIALOG;
if(e!=null){e.preventDefault();
}var checkboxes=$("#filterconteventsbox ul input");
checkboxes.attr("checked",true);
me.tempContEventFilterSettings.excldCds=[];
saveContEventFilterPrefs();
closeDialog(e);
}function createDomElements(){var preContentHTML=[];
preContentHTML.push('<div id="filterconteventsdlg" class="cont-event-filter-window">',"<h4>"+i18n.lab.core.FILTER_CONTAINER_EVENTS+":</h4>",'<div id="filterconteventsbox"><ul></ul></div>',"<div id='cont-event-filter-actionButtons'>","<input id='cont-event-filter-ok' type='submit' value='",i18n.lab.core.OK,"'/>","<input id='cont-event-filter-cancel' type='submit' value='",i18n.lab.core.CANCEL,"'/>","<input id='cont-event-filter-default' type='submit' value='",i18n.lab.core.DEFAULT,"'/>","</div>","</div>",'<div id="cont-event-filter-window-mask"></div>');
$("body").append(preContentHTML.join(""));
}function contEventTypeClicked(e){var chkBoxEl=$(e.target);
var me=lab.core.CONT_EVENT_FILTER_DIALOG;
var codeValue=Number(chkBoxEl.attr("data-codevalue"));
if($(chkBoxEl).attr("checked")==true){var cvIdx=jQuery.inArray(codeValue,me.tempContEventFilterSettings.excldCds);
if(cvIdx!=-1){me.tempContEventFilterSettings.excldCds.splice(cvIdx,1);
}}else{var cvIdx=jQuery.inArray(codeValue,me.tempContEventFilterSettings.excldCds);
if(cvIdx==-1){me.tempContEventFilterSettings.excldCds.push(codeValue);
}}}function saveContEventFilterPrefs(){var me=lab.core.CONT_EVENT_FILTER_DIALOG;
me.contEventFilterSettings=me.tempContEventFilterSettings;
$("body").trigger("LABCORE.CONT_EVENT_TYPE_FILTER_CHANGED");
MP_LAB_UTIL.SetPagePrefs(me.appNumber,me.mpPrefSection+me.CONT_EVENT_FILTER_PREF_SECTION,me.contEventFilterSettings,function(recordData){return false;
});
}function populateCodeValues(){var me=lab.core.CONT_EVENT_FILTER_DIALOG;
var ret=false;
var ulEl=$("#filterconteventsbox ul");
ulEl.empty();
if(me.contEventCodeValues==null){me.contEventCodeValues=MP_Util.GetCodeSet(2061,false,"asc");
}if(me.contEventCodeValues!=null){me.tempContEventFilterSettings={excldCds:[]};
$.each(me.contEventFilterSettings.excldCds,function(i,cv){me.tempContEventFilterSettings.excldCds.push(cv);
});
$.each(me.contEventCodeValues,function(i,codeValueObj){var codeValue=codeValueObj.value;
var liEl=$("<li/>").appendTo(ulEl);
var chkElId="cec_"+i;
var labelEl=$("<label/>",{"class":"cont-event-checkbox-label","for":chkElId,html:codeValue.display}).appendTo(liEl);
labelEl.html(codeValue.display);
var chkBoxEl=$("<input/>",{id:chkElId,name:chkElId,type:"checkbox","data-codevalue":codeValue.codeValue}).prependTo(labelEl);
var isChecked=jQuery.inArray(Number(codeValue.codeValue),me.contEventFilterSettings.excldCds)==-1;
chkBoxEl.attr("checked",isChecked);
chkBoxEl.click(contEventTypeClicked);
});
ret=true;
}return ret;
}function positionDialog(){var dlgEl=$("#filterconteventsdlg");
dlgEl.css({position:"fixed",top:($(window).height()/2)-(dlgEl.outerHeight()/2),left:($(window).width()/2)-(dlgEl.outerWidth()/2)});
var mask=$("#cont-event-filter-window-mask");
mask.css({position:"fixed",top:0,left:0,width:$(window).width(),height:$(window).height(),opacity:0.5});
}function showDialog(e){if(populateCodeValues()){if(e!=null){e.preventDefault();
}positionDialog();
$(window).bind("resize",positionDialog);
var dlgEl=$("#filterconteventsdlg");
dlgEl.show();
var mask=$("#cont-event-filter-window-mask");
mask.show();
}}function bindEventHanlders(){$("#cont-event-filter-ok").click(function(e){saveContEventFilterPrefs();
closeDialog(e);
});
$("#cont-event-filter-cancel").click(function(e){closeDialog(e);
});
$("#cont-event-filter-default").click(function(e){defaultSettings(e);
});
}return{initialized:false,appNumber:null,mpPrefSection:null,CONT_EVENT_FILTER_PREF_SECTION:"_EXLD_CONT_EVT_TYP",contEventFilterSettings:{excldCds:[]},tempContEventFilterSettings:null,contEventCodeValues:null,InitComponent:function(appNumber,mpPrefSection){if(!this.initialized){createDomElements();
bindEventHanlders();
this.appNumber=appNumber;
this.mpPrefSection=mpPrefSection;
var me=this;
if(me.contEventCodeValues==null){me.contEventCodeValues=MP_Util.GetCodeSet(2061,false,"asc");
}MP_LAB_UTIL.GetPagePrefs(me.appNumber,me.mpPrefSection+me.CONT_EVENT_FILTER_PREF_SECTION,function(sSettingsJSON){me.contEventFilterSettings=sSettingsJSON?$.extend(me.contEventFilterSettings,sSettingsJSON):me.contEventFilterSettings;
},false);
this.initialized=true;
}},ShowDialog:function(e){showDialog(e);
},GetExcludedEventTypeCodes:function(){var excldEventTypeCds=[];
var me=this;
$.each(me.contEventFilterSettings.excldCds,function(i,cv){excldEventTypeCds.push(cv);
});
return excldEventTypeCds;
}};
}();
