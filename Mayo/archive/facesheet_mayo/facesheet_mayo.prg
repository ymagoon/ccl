/************************************************************************
 *                  GENERATED MODIFICATION CONTROL LOG                 *
 ***********************************************************************
 *                                                                     *
 *Mod Date     Engineer             Comment                            *
 *--- -------- -------------------- -----------------------------------*
 *000 04/28/11 Akcia      initial release                              *
 *001 01/11/14 Akcia	  remove dob and ssn
 ***********************************************************************/
 
 DROP PROGRAM   FACESHEET_MAYO : DBA  GO
CREATE PROGRAM  FACESHEET_MAYO : DBA
 
DECLARE  CODE_VALUE ( CODE_VALUE_CODESET ,  CDF_DP ) =  F8
 
SUBROUTINE   CODE_VALUE  ( CODE_VALUE_CODESET ,  CDF_DP  )
 
SET  CODE_VALUE_CD  =  0.0
SELECT  INTO "nl:"
C.SEQ
FROM ( CODE_VALUE  C )
 
WHERE ((C.CODE_SET+ 0 )= CNVTINT ( CODE_VALUE_CODESET )) AND (C.CDF_MEANING= TRIM ( CDF_DP ,  3 ))
 AND ((C.ACTIVE_IND+ 0 )= 1 ) AND ((C.BEGIN_EFFECTIVE_DT_TM+ 0 )<= CNVTDATETIME ( CURDATE ,
 CURTIME3 )) AND ((C.END_EFFECTIVE_DT_TM+ 0 )>= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 
DETAIL
 CODE_VALUE_CD =C.CODE_VALUE
 WITH  NOCOUNTER  RETURN ( CODE_VALUE_CD )
 
 
END ;Subroutine
 
 
IF ( ( VALIDATE ( RP_HL7_FORM -> INITIALIZED , "!" )="!" ) )
SET  TRACE  =  RECPERSIST
RECORD  RP_HL7_FORM  (
 1  INITIALIZED  =  C1
 1  CURRENT_NAME_CD  =  F8 )
SET  TRACE  =  NORECPERSIST
SET  RP_HL7_FORM -> INITIALIZED  = "Y"
SET  RP_HL7_FORM -> CURRENT_NAME_CD  =  0
SELECT  INTO "nl:"
C.SEQ
FROM ( CODE_VALUE  C )
 
WHERE (C.CODE_SET= 213 ) AND (C.CDF_MEANING="CURRENT" ) AND (C.ACTIVE_IND= 1 ) AND (
 BEGIN_EFFECTIVE_DT_TM <= CNVTDATETIME ( CURDATE ,  CURTIME )) AND ( END_EFFECTIVE_DT_TM >=
 CNVTDATETIME ( CURDATE ,  CURTIME ))
 
DETAIL
 RP_HL7_FORM -> CURRENT_NAME_CD =C.CODE_VALUE
 WITH  NOCOUNTER
ENDIF
 
 
SET  PRV_ALIAS  =  1
 
SET  PRV_LAST_NAME  =  2
 
SET  PRV_FIRST_NAME  =  3
 
SET  PRV_MIDDLE_NAME  =  4
 
SET  PRV_NAME_FULL_FORMATTED  =  5
 
SET  PRV_PREFIX  =  6
 
SET  PRV_SUFFIX  =  7
 
SET  PRV_DEGREE  =  8
 
SET  PRV_USERNAME  =  9
 
DECLARE  PM_HL7_PROVIDER ( PRV_ROW_ID ,  PRV_OPTION ) =  C100
 
SUBROUTINE   PM_HL7_PROVIDER  ( PRV_ROW_ID ,  PRV_OPTION  )
 
SET  PRV_RTN_STRING  =  FILLSTRING ( 132 , " " )
SET  PRV_LAST_NAME_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_FIRST_NAME_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_NAME_FULL_FORMATTED_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_MIDDLE_NAME_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_SUFFIX_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_PREFIX_ST  =  FILLSTRING ( 132 , " " )
SET  PRV_FREE_TEXT  =  FALSE
SET  PRV_USERNAME_ST  =  FILLSTRING ( 50 , " " )
SELECT  INTO "nl:"
P.SEQ
FROM ( PRSNL  P )
 
WHERE (P.PERSON_ID= PRV_ROW_ID )
 
DETAIL
 PRV_FREE_TEXT =P.FREE_TEXT_IND,
 PRV_LAST_NAME_ST =P.NAME_LAST,
 PRV_FIRST_NAME_ST =P.NAME_FIRST,
 PRV_NAME_FULL_FORMATTED_ST =P.NAME_FULL_FORMATTED,
 PRV_USERNAME_ST =P.USERNAME
 WITH  NOCOUNTER
IF ( ( CURQUAL > 0 ) )
CASE (  PRV_OPTION  )
 OF  PRV_ALIAS :
SET  PRV_RTN_STRING  = " "
 OF  PRV_LAST_NAME :
SET  PRV_RTN_STRING  =  PRV_LAST_NAME_ST
 OF  PRV_FIRST_NAME :
SET  PRV_RTN_STRING  =  PRV_FIRST_NAME_ST
 OF  PRV_NAME_FULL_FORMATTED :
SET  PRV_RTN_STRING  =  PRV_NAME_FULL_FORMATTED_ST
 OF  PRV_USERNAME :
SET  PRV_RTN_STRING  =  PRV_USERNAME_ST
 OF  PRV_MIDDLE_NAME :
IF ( ( PRV_FREE_TEXT = TRUE ) )
SET  RTN_STRING  = " "
ELSE
SELECT  INTO "nl:"
N.SEQ
FROM ( PERSON_NAME  N )
 
WHERE (N.PERSON_ID= PRV_ROW_ID ) AND (N.NAME_TYPE_CD= RP_HL7_FORM -> CURRENT_NAME_CD ) AND (
N.ACTIVE_IND= 1 ) AND (N.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (
N.END_EFFECTIVE_DT_TM>= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 
DETAIL
 PRV_RTN_STRING =N.NAME_MIDDLE
 WITH  NOCOUNTER
ENDIF
 
 OF  PRV_PREFIX :
IF ( ( PRV_FREE_TEXT = TRUE ) )
SET  PRV_RTN_STRING  = " "
ELSE
SELECT  INTO "nl:"
N.SEQ
FROM ( PERSON_NAME  N )
 
WHERE (N.PERSON_ID= PRV_ROW_ID ) AND (N.NAME_TYPE_CD= RP_HL7_FORM -> CURRENT_NAME_CD ) AND (
N.ACTIVE_IND= 1 ) AND (N.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (
N.END_EFFECTIVE_DT_TM>= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 
DETAIL
 PRV_RTN_STRING =N.NAME_PREFIX
 WITH  NOCOUNTER
ENDIF
 
 OF  PRV_SUFFIX :
IF ( ( PRV_FREE_TEXT = TRUE ) )
SET  PRV_RTN_STRING  = " "
ELSE
SELECT  INTO "nl:"
N.SEQ
FROM ( PERSON_NAME  N )
 
WHERE (N.PERSON_ID= PRV_ROW_ID ) AND (N.NAME_TYPE_CD= RP_HL7_FORM -> CURRENT_NAME_CD ) AND (
N.ACTIVE_IND= 1 ) AND (N.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (
N.END_EFFECTIVE_DT_TM>= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 
DETAIL
 PRV_RTN_STRING =N.NAME_SUFFIX
 WITH  NOCOUNTER
ENDIF
 
 OF  PRV_DEGREE :
IF ( ( PRV_FREE_TEXT = TRUE ) )
SET  PRV_RTN_STRING  = " "
ELSE
SELECT  INTO "nl:"
N.SEQ
FROM ( PERSON_NAME  N )
 
WHERE (N.PERSON_ID= PRV_ROW_ID ) AND (N.NAME_TYPE_CD= RP_HL7_FORM -> CURRENT_NAME_CD ) AND (
N.ACTIVE_IND= 1 ) AND (N.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (
N.END_EFFECTIVE_DT_TM>= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 
DETAIL
 PRV_RTN_STRING =N.NAME_DEGREE
 WITH  NOCOUNTER
ENDIF
 
 ENDCASE
 
ENDIF
 RETURN ( PRV_RTN_STRING )
 
 
END ;Subroutine
 
 
# INITIALIZE
 
SET  CUR_PERSON_ID  =  REQUEST -> PATIENT_DATA -> PERSON -> PERSON_ID
 
SET  CUR_ENCNTR_ID  =  REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> ENCNTR_ID
 
SET  MRN_ALIAS  =  REQUEST -> PATIENT_DATA -> PERSON -> MRN -> ALIAS
 
SET  MRN_FORMAT  =  REQUEST -> PATIENT_DATA -> PERSON -> MRN -> ALIAS_POOL_CD
 
SET  CMRN_ALIAS  =  REQUEST -> PATIENT_DATA -> PERSON -> CMRN -> ALIAS
 
SET  CMRN_FORMAT  =  REQUEST -> PATIENT_DATA -> PERSON -> CMRN -> ALIAS_POOL_CD
 
SET  MRN  =  SUBSTRING ( 1 ,  15 ,  CNVTALIAS ( MRN_ALIAS ,  MRN_FORMAT ))
 
SET  CMRN  =  SUBSTRING ( 1 ,  15 ,  CNVTALIAS ( CMRN_ALIAS ,  CMRN_FORMAT ))
 
SET  FNBR_ALIAS  =  REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> FINNBR -> ALIAS
 
SET  FNBR_FORMAT  =  REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> FINNBR -> ALIAS_POOL_CD
 
SET  FNBR  =  SUBSTRING ( 1 ,  15 ,  CNVTALIAS ( FNBR_ALIAS ,  FNBR_FORMAT ))
 
SET  BARCODE_FNBR  =  CONCAT ("*" ,  CNVTALPHANUM ( FNBR_ALIAS ), "*" )
 
SET  MRN_CNVT  =  CNVTALIAS ( MRN_ALIAS ,  MRN_FORMAT )
 
SET  BARCODE_MRN  =  BUILD ("*" ,  MRN_CNVT , "*" )
 
SET  TRACK_TYPE  =  0.0
 
SET  TRACK_ID  =  0
 
SET  TRACK_TYPE_DP  =  FILLSTRING ( 2 , " " )
 
SET  TRACK  =  FILLSTRING ( 13 , " " )
 
SELECT  INTO "nl:"
MM.MEDIA_TYPE_CD,
MA.ALIAS
FROM ( MEDIA_MASTER  MM ),
( MEDIA_MASTER_ALIAS  MA )
 PLAN ( MM
WHERE ((MM.PERSON_ID+ 0 )= CUR_PERSON_ID ) AND ((MM.ENCNTR_ID+ 0 )= CUR_ENCNTR_ID ) AND ((
MM.ACTIVE_IND+ 0 )= 1 ) AND ((MM.BEG_EFFECTIVE_DT_TM+ 0 )<= CNVTDATETIME ( CURDATE ,  CURTIME3 ))
 AND ((MM.END_EFFECTIVE_DT_TM+ 0 )>= CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 AND ( MA
WHERE ((MM.MEDIA_MASTER_ID+ 0 )=MA.MEDIA_MASTER_ID) AND ((MA.ACTIVE_IND+ 0 )= 1 ) AND ((
MA.BEG_EFFECTIVE_DT_TM+ 0 )<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND ((MA.END_EFFECTIVE_DT_TM+ 0
)>= CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 
 
DETAIL
 TRACK_TYPE =MM.MEDIA_TYPE_CD,
 TRACK_ID =MA.ALIAS
 
SET  PAT_NAME_23  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON ->
 NAME_FULL_FORMATTED )
 
SET  UPAT_NAME  =  CNVTUPPER ( SUBSTRING ( 1 ,  32 ,  REQUEST -> PATIENT_DATA -> PERSON ->
 NAME_FULL_FORMATTED ))
 
SET  PAT_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> BIRTH_DT_TM , "MM/DD/YYYY;;D" )
 
SET  PAT_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> BIRTH_DT_TM ),  CNVTTIME
( REQUEST -> PATIENT_DATA -> PERSON -> BIRTH_DT_TM ))
 
SET  UPAT_AGE  =  CNVTUPPER ( CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> BIRTH_DT_TM
),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> BIRTH_DT_TM )))
 
SET  PAT_PREV_LAST  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> PREV_NAME ->
 NAME_LAST )
 
SET  PAT_PREV_FIRST  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> PREV_NAME ->
 NAME_FIRST )
 
IF ( ( TEXTLEN ( TRIM ( PAT_PREV_LAST ))> 0 ) )
SET  PAT_PREV_NAME  =  SUBSTRING ( 1 ,  26 ,  CONCAT ( TRIM ( PAT_PREV_LAST ), ", " ,  TRIM (
 PAT_PREV_FIRST )))
ELSE
SET  PAT_PREV_NAME  = " "
ENDIF
 
 
SET  SSN_ALIAS  =  REQUEST -> PATIENT_DATA -> PERSON -> SSN -> ALIAS
 
SET  SSN_FORMAT  =  REQUEST -> PATIENT_DATA -> PERSON -> SSN -> ALIAS_POOL_CD
 
SET  PAT_SSN  =  SUBSTRING ( 1 ,  15 ,  CNVTALIAS ( SSN_ALIAS ,  SSN_FORMAT ))
 
SET  PAT_HM_ADDR  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> HOME_ADDRESS ->
 STREET_ADDR )
 
SET  PAT_HM_ADDR2  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> HOME_ADDRESS ->
 STREET_ADDR2 )
 
SET  PAT_HM_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> HOME_ADDRESS ->
 CITY )
 
SET  PAT_HM_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> HOME_ADDRESS ->
 ZIPCODE )
 
SET  PAT_HM_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  HM_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> HOME_PHONE -> PHONE_NUM
 
SET  HM_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> HOME_PHONE -> PHONE_FORMAT_CD
 
SET  PAT_HM_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( HM_PH_NUM ,  HM_PH_FRM ))
 
SET  PAT_EMPL_NAME  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 FT_ORG_NAME )
 
SET  PAT_EMPL_JOB  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 EMPL_OCCUPATION_TEXT )
 
;change made by m061596 on 3/15/2011. Added Patient Cell Phone number
 
SET  CELL_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> HOME_PAGER -> PHONE_NUM
 
SET  CELL_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> HOME_PAGER -> PHONE_FORMAT_CD
 
SET  WK_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> BUS_PHONE -> PHONE_NUM
 
SET  WK_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> BUS_PHONE -> PHONE_FORMAT_CD
 
SET  PAT_CELL_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( CELL_PH_NUM , CELL_PH_FRM ))
 
SET  PAT_WK_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( WK_PH_NUM ,  WK_PH_FRM ))
 
SET  EMPL_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 -> PHONE -> PHONE_NUM
 
SET  EMPL_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 -> PHONE -> PHONE_FORMAT_CD
 
SET  PAT_EMPL_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( EMPL_PH_NUM ,  EMPL_PH_FRM ))
 
SET  PAT_EMPL_ADDR  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 ADDRESS -> STREET_ADDR )
 
SET  PAT_EMPL_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 ADDRESS -> STREET_ADDR2 )
 
SET  PAT_EMPL_ADDR2_DP  =  FILLSTRING ( 30 , " " )
 
SET  PAT_EMPL_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 ADDRESS -> CITY )
 
SET  PAT_EMPL_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMPLOYER_01 ->
 ADDRESS -> ZIPCODE )
 
SET  PAT_EMPL_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  GUA_NAME  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> NAME_FULL_FORMATTED )
 
SET  GUA_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON ->
 BIRTH_DT_TM , "MM/DD/YYYY;;D" )
 
SET  GUA_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON ->
 BIRTH_DT_TM ),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON ->
 BIRTH_DT_TM ))
 
SET  GUA_SSN_ALIAS  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> SSN -> ALIAS
 
SET  GUA_SSN_FORMAT  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> SSN ->
 ALIAS_POOL_CD
 
SET  GUA_SSN  =  SUBSTRING ( 1 ,  15 ,  CNVTALIAS ( GUA_SSN_ALIAS ,  GUA_SSN_FORMAT ))
 
SET  GUA_HM_ADDR  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> HOME_ADDRESS -> STREET_ADDR )
 
SET  GUA_HM_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> HOME_ADDRESS -> STREET_ADDR2 )
 
SET  GUA_HM_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> HOME_ADDRESS -> CITY )
 
SET  GUA_HM_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> HOME_ADDRESS -> ZIPCODE )
 
SET  GUA_HM_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  GUA_HM_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> HOME_PHONE ->
 PHONE_NUM
 
SET  GUA_HM_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> HOME_PHONE ->
 PHONE_FORMAT_CD
 
SET  GUA_HM_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( GUA_HM_PH_NUM ,  GUA_HM_PH_FRM ))
 
SET  GUA_EMPL_NAME  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> FT_ORG_NAME )
 
SET  GUA_EMPL_JOB  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> EMPL_OCCUPATION_TEXT )
 
SET  GUA_EMPL_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_NUM
 
SET  GUA_EMPL_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_FORMAT_CD
 
SET  GUA_EMPL_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( GUA_EMPL_PH_NUM ,  GUA_EMPL_PH_FRM ))
 
SET  GUA_EMPL_ADDR  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR )
 
SET  GUA_EMPL_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR2 )
 
SET  GUA_EMPL_ADDR2_DP  =  FILLSTRING ( 30 , " " )
 
SET  GUA_EMPL_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> CITY )
 
SET  GUA_EMPL_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01
-> PERSON -> EMPLOYER_01 -> ADDRESS -> ZIPCODE )
 
SET  GUA_EMPL_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  EMC_NAME  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
 NAME_FULL_FORMATTED )
 
SET  EMC_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> BIRTH_DT_TM ,
"MM/DD/YYYY;;D" )
 
;Change for CAB:20021
;SET  EMC_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
;BIRTH_DT_TM ),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> BIRTH_DT_TM ))
 
SET  EMC_WK_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> BUS_PHONE -> PHONE_NUM
 
SET  EMC_WK_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> BUS_PHONE ->
 PHONE_FORMAT_CD
 
SET  EMC_WK_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( EMC_WK_PH_NUM ,  EMC_WK_PH_FRM ))
 
SET  EMC_HM_ADDR  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
 HOME_ADDRESS -> STREET_ADDR )
 
SET  EMC_HM_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
 HOME_ADDRESS -> STREET_ADDR2 )
 
SET  EMC_HM_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
 HOME_ADDRESS -> CITY )
 
SET  EMC_HM_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON ->
 HOME_ADDRESS -> ZIPCODE )
 
SET  EMC_HM_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  EMC_HM_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> HOME_PHONE ->
 PHONE_NUM
 
SET  EMC_HM_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> HOME_PHONE ->
 PHONE_FORMAT_CD
 
SET  EMC_HM_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( EMC_HM_PH_NUM ,  EMC_HM_PH_FRM ))
 
;changed added by m061596 on 03/15/2011 for CAB:20021
 
SET  NOK_NAME  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 NAME_FULL_FORMATTED )
 
 SET  NOK_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON -> BIRTH_DT_TM ,
 "MM/DD/YYYY;;D" )
 
 SET  NOK_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 BIRTH_DT_TM ),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON -> BIRTH_DT_TM ))
 
SET  NOK_HM_ADDR  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 HOME_ADDRESS -> STREET_ADDR )
 
SET  NOK_HM_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 HOME_ADDRESS -> STREET_ADDR2 )
 
SET  NOK_HM_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 HOME_ADDRESS -> CITY )
 
SET  NOK_HM_STATE  =  SUBSTRING ( 1 ,  25 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 HOME_ADDRESS -> STATE_CD ))
 
SET  NOK_HM_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON ->
 HOME_ADDRESS -> ZIPCODE )
 
SET  NOK_HM_CITY_ST  =  FILLSTRING ( 30 ,  " " )
 
SET  NOK_HM_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON -> HOME_PHONE ->
 PHONE_NUM
 
SET  NOK_HM_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON -> HOME_PHONE ->
 PHONE_FORMAT_CD
 
SET  NOK_HM_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( NOK_HM_PH_NUM ,  NOK_HM_PH_FRM ))
 
;changes ended here for CAB:20021
 
SET  S1_LAST  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> CURRENT_NAME -> NAME_LAST )
 
SET  S1_FIRST  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> CURRENT_NAME -> NAME_FIRST )
 
IF ( ( TEXTLEN ( TRIM ( S1_LAST ))> 0 ) )
SET  S1_NAME  =  SUBSTRING ( 1 ,  50 ,  CONCAT ( TRIM ( S1_LAST ), ", " ,  TRIM ( S1_FIRST )))
ELSE
SET  S1_NAME  = " "
ENDIF
 
 
SET  S1_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON ->
 BIRTH_DT_TM , "MM/DD/YYYY;;D" )
 
SET  S1_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON ->
 BIRTH_DT_TM ),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON ->
 BIRTH_DT_TM ))
 
SET  S1_EMPL_NAME  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> FT_ORG_NAME )
 
SET  S1_EMPL_JOB  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> EMPL_OCCUPATION_TEXT )
 
SET  S1_EMPL_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_NUM
 
SET  S1_EMPL_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_FORMAT_CD
 
SET  S1_EMPL_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S1_EMPL_PH_NUM ,  S1_EMPL_PH_FRM ))
 
SET  S1_EMPL_ADDR  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR )
 
SET  S1_EMPL_ADDR2  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR2 )
 
SET  S1_EMPL_ADDR2_DP  =  FILLSTRING ( 30 , " " )
 
SET  S1_EMPL_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> CITY )
 
SET  S1_EMPL_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01
-> PERSON -> EMPLOYER_01 -> ADDRESS -> ZIPCODE )
 
SET  S1_EMPL_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  S1_PLAN_NAME  =  SUBSTRING ( 1 ,  48 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> PLAN_INFO -> PLAN_NAME )
 
SET  S1_POLICY_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> MEMBER_NBR )
 
SET  S1_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON -> HEALTH_PLAN ->
 PHONE -> PHONE_NUM
 
SET  S1_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON -> HEALTH_PLAN ->
 PHONE -> PHONE_FORMAT_CD
 
SET  S1_PLAN_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S1_PH_NUM ,  S1_PH_FRM ))
 
SET  S1_PLAN_ADDR  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> STREET_ADDR )
 
SET  S1_PLAN_ADDR2  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> STREET_ADDR2 )
 
SET  S1_PLAN_CITY  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> CITY )
 
SET  S1_PLAN_ZIPCODE  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01
-> PERSON -> HEALTH_PLAN -> ADDRESS -> ZIPCODE )
 
SET  S1_PLAN_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  S1_PRECERT_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> VISIT_INFO -> AUTH_INFO_01 -> AUTH_NBR )
 
SET  S1_PRECERT_PH  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> VISIT_INFO -> AUTH_INFO_01 -> AUTH_DETAIL -> AUTH_PHONE_NUM )
 
;SET  S1_PRECERT_PHONE  =  CONCAT ( "(" ,  SUBSTRING ( 1 ,  3 ,  S1_PRECERT_PH ),  ") " ,  SUBSTRING
;( 4 ,  3 ,  S1_PRECERT_PH ),  "-" ,  SUBSTRING ( 7 ,  4 ,  S1_PRECERT_PH ))
 
;se  SET  S1_PRECERT_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S1_PRECERT_PH ,  S1_PRECERT_PH ))
SET  S1_PRECERT_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S1_PRECERT_PH ,
	REQUEST->PATIENT_DATA->PERSON->SUBSCRIBER_01->PERSON->HEALTH_PLAN->VISIT_INFO->AUTH_INFO_01->AUTH_DETAIL->phone_format_cd ))
 
SET  S1_GROUP_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> HEALTH_PLAN -> ORG_PLAN -> GROUP_NBR )
 
SET  S2_LAST  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> CURRENT_NAME -> NAME_LAST )
 
SET  S2_FIRST  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> CURRENT_NAME -> NAME_FIRST )
 
IF ( ( TEXTLEN ( TRIM ( S2_LAST ))> 0 ) )
SET  S2_NAME  =  SUBSTRING ( 1 ,  50 ,  CONCAT ( TRIM ( S2_LAST ), ", " ,  TRIM ( S2_FIRST )))
ELSE
SET  S2_NAME  = " "
ENDIF
 
 
SET  S2_DOB  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON ->
 BIRTH_DT_TM , "MM/DD/YYYY;;D" )
 
SET  S2_AGE  =  CNVTAGE ( CNVTDATE ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON ->
 BIRTH_DT_TM ),  CNVTTIME ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON ->
 BIRTH_DT_TM ))
 
SET  S2_EMPL_NAME  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> FT_ORG_NAME )
 
SET  S2_EMPL_JOB  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> EMPL_OCCUPATION_TEXT )
 
SET  S2_EMPL_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_NUM
 
SET  S2_EMPL_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON -> EMPLOYER_01
-> PHONE -> PHONE_FORMAT_CD
 
SET  S2_EMPL_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S2_EMPL_PH_NUM ,  S2_EMPL_PH_FRM ))
 
SET  S2_EMPL_ADDR  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR )
 
SET  S2_EMPL_ADDR2  =  SUBSTRING ( 1 ,  50 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> STREET_ADDR2 )
 
SET  S2_EMPL_ADDR2_DP  =  FILLSTRING ( 30 , " " )
 
SET  S2_EMPL_CITY  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> ADDRESS -> CITY )
 
SET  S2_EMPL_ZIPCODE  =  SUBSTRING ( 1 ,  12 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02
-> PERSON -> EMPLOYER_01 -> ADDRESS -> ZIPCODE )
 
SET  S2_EMPL_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  S2_PLAN_NAME  =  SUBSTRING ( 1 ,  48 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> PLAN_INFO -> PLAN_NAME )
 
SET  S2_POLICY_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> MEMBER_NBR )
 
SET  S2_PH_NUM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON -> HEALTH_PLAN ->
 PHONE -> PHONE_NUM
 
SET  S2_PH_FRM  =  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON -> HEALTH_PLAN ->
 PHONE -> PHONE_FORMAT_CD
 
SET  S2_PLAN_PHONE  =  SUBSTRING ( 1 ,  25 ,  CNVTPHONE ( S2_PH_NUM ,  S2_PH_FRM ))
 
SET  S2_PLAN_ADDR  =  SUBSTRING ( 1 ,  25 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> STREET_ADDR )
 
SET  S2_PLAN_ADDR2  =  SUBSTRING ( 1 ,  30 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> STREET_ADDR2 )
 
SET  S2_PLAN_CITY  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> ADDRESS -> CITY )
 
SET  S2_PLAN_ZIPCODE  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02
-> PERSON -> HEALTH_PLAN -> ADDRESS -> ZIPCODE )
 
SET  S2_PLAN_CITY_ST  =  FILLSTRING ( 30 , " " )
 
SET  S2_PRECERT_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> VISIT_INFO -> AUTH_INFO_01 -> AUTH_NBR )
 
SET  S2_PRECERT_PH  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> VISIT_INFO -> AUTH_INFO_01 -> AUTH_DETAIL -> AUTH_PHONE_NUM )
 
SET  S2_PRECERT_PHONE  =  CONCAT ( "(" ,  SUBSTRING ( 1 ,  3 ,  S2_PRECERT_PH ),  ") " ,  SUBSTRING
( 4 ,  3 ,  S2_PRECERT_PH ),  "-" ,  SUBSTRING ( 7 ,  4 ,  S2_PRECERT_PH ))
 
SET  S2_GROUP_NO  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> HEALTH_PLAN -> ORG_PLAN -> GROUP_NBR )
 
SET  PCP_DOCTOR  =  SUBSTRING ( 1 ,  20 ,  PM_HL7_PROVIDER ( REQUEST -> PATIENT_DATA -> PERSON ->
 PCP -> PRSNL_PERSON_ID ,  PRV_NAME_FULL_FORMATTED ))
 
;se SET  PCP_FREE_TEXT  =  SUBSTRING ( 1 ,  20 ,  REQUEST -> PATIENT_DATA -> PERSON ->
;se USER_DEFINED -> FTXTPCPPHYS )
SET  PCP_FREE_TEXT  =  SUBSTRING ( 1 ,  20 ,  PM_HL7_PROVIDER ( REQUEST -> PATIENT_DATA -> PERSON ->
 PCP -> PRSNL_PERSON_ID ,  PRV_NAME_FULL_FORMATTED ))			;se
 
SET  ADMIT_DOCTOR  =  SUBSTRING ( 1 ,  20 ,  TRIM ( PM_HL7_PROVIDER ( REQUEST -> PATIENT_DATA ->
 PERSON -> ENCOUNTER -> ADMITDOC -> PRSNL_PERSON_ID ,  PRV_NAME_FULL_FORMATTED )))
 
SET  ADMIT_CLERK  =  SUBSTRING ( 1 ,  15 ,  PM_HL7_PROVIDER ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> REG_PRSNL_ID ,  PRV_NAME_FULL_FORMATTED ))
 
SET  ATTEND_DOCTOR  =  SUBSTRING ( 1 ,  20 ,  PM_HL7_PROVIDER ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> ATTENDDOC -> PRSNL_PERSON_ID ,  PRV_NAME_FULL_FORMATTED ))
 
SET  ADMIT_DOC_ID  =  REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> ADMITDOC -> PRSNL_PERSON_ID
 
SET  ADMIT_DOC_NO  =  FILLSTRING ( 25 , " " )
 
SET  ADMIT_DOC_PHONE  =  FILLSTRING ( 25 , " " )
 
SELECT  INTO "nl:"
PA.ALIAS,
PH.PHONE_NUM,
PH.PHONE_FORMAT_CD
FROM ( PRSNL  P ),
( PRSNL_ALIAS  PA ),
( PHONE  PH )
 PLAN ( P
WHERE (P.PERSON_ID= ADMIT_DOC_ID ) AND (P.ACTIVE_IND= 1 ) AND (P.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME
( CURDATE ,  CURTIME3 )) AND (P.END_EFFECTIVE_DT_TM>= CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 AND ( PA
WHERE (P.PERSON_ID=PA.PERSON_ID) AND (PA.ALIAS_POOL_CD= 0.0 ) AND (PA.ACTIVE_IND= 1 ) AND (
PA.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (PA.END_EFFECTIVE_DT_TM>=
 CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 AND ( PH
WHERE (P.PERSON_ID=PH.PARENT_ENTITY_ID) AND (PH.PARENT_ENTITY_NAME="PRSNL" ) AND (PH.ACTIVE_IND= 1 )
 AND (PH.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (PH.END_EFFECTIVE_DT_TM>=
 CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 
 
DETAIL
 ADMIT_DOC_NO = SUBSTRING ( 1 ,  25 ,  TRIM (PA.ALIAS)),
 ADMIT_DOC_PHONE = SUBSTRING ( 1 ,  25 ,  CNVTPHONE (PH.PHONE_NUM, PH.PHONE_FORMAT_CD))
 
SET  I  =  0
 
SET  DOC_CD  =  CODE_VALUE ( 333 , "ADMITDOC" )
 
SET  PREV_ENC1_REG_DT_TM  =  FILLSTRING ( 20 , " " )
 
SET  PREV_ENC1_TYPE  =  FILLSTRING ( 30 , " " )
 
SET  PREV_ENC1_PHY  =  FILLSTRING ( 30 , " " )
 
SET  PREV_ENC2_REG_DT_TM  =  FILLSTRING ( 20 , " " )
 
SET  PREV_ENC2_TYPE  =  FILLSTRING ( 30 , " " )
 
SET  PREV_ENC2_PHY  =  FILLSTRING ( 30 , " " )
 
SET  PREV_ENC3_REG_DT_TM  =  FILLSTRING ( 20 , " " )
 
SET  PREV_ENC3_TYPE  =  FILLSTRING ( 30 , " " )
 
SET  PREV_ENC3_PHY  =  FILLSTRING ( 30 , " " )
 
SELECT  INTO "nl:"
E.REG_DT_TM,
 TEMP_TYPE = TRIM ( UAR_GET_CODE_DISPLAY (E.ENCNTR_TYPE_CD)),
 TEMP_DOC = TRIM ( SUBSTRING ( 1 ,  30 , DOC.NAME_FULL_FORMATTED))
FROM ( ENCOUNTER  E ),
( ENCNTR_PRSNL_RELTN  EP ),
( PRSNL  DOC ),
( DUMMYT  D1 ),
( DUMMYT  D2 )
 PLAN ( E
WHERE (E.PERSON_ID= CUR_PERSON_ID ) AND (E.ENCNTR_ID!= CUR_ENCNTR_ID ) AND ((E.ACTIVE_IND+ 0 )= 1 )
 AND ((E.BEG_EFFECTIVE_DT_TM+ 0 )<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND ((
E.END_EFFECTIVE_DT_TM+ 0 )>= CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 AND ( D1 )
 AND ( EP
WHERE ((E.ENCNTR_ID+ 0 )=EP.ENCNTR_ID) AND ((EP.ENCNTR_PRSNL_R_CD+ 0 )= DOC_CD ) AND ((EP.ACTIVE_IND
+ 0 )= 1 ) AND ((EP.BEG_EFFECTIVE_DT_TM+ 0 )<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND ((
EP.END_EFFECTIVE_DT_TM+ 0 )>= CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 AND ( D2 )
 AND ( DOC
WHERE ((EP.PRSNL_PERSON_ID+ 0 )=DOC.PERSON_ID) AND ((DOC.ACTIVE_IND+ 0 )= 1 ) AND (
DOC.BEG_EFFECTIVE_DT_TM<= CNVTDATETIME ( CURDATE ,  CURTIME3 )) AND (DOC.END_EFFECTIVE_DT_TM>=
 CNVTDATETIME ( CURDATE ,  CURTIME3 )))
 
ORDER BY E.REG_DT_TM DESC
 
DETAIL
 I =( I + 1 ),
 
IF ( ( I = 1 ) )  PREV_ENC1_REG_DT_TM = FORMAT (E.REG_DT_TM, "MM/DD/YYYY HH:MM;;D" ),
 PREV_ENC1_TYPE = TEMP_TYPE ,  PREV_ENC1_PHY = TEMP_DOC
ELSEIF ( ( I = 2 ) )  PREV_ENC2_REG_DT_TM = FORMAT (E.REG_DT_TM, "MM/DD/YYYY HH:MM;;D" ),
 PREV_ENC2_TYPE = TEMP_TYPE ,  PREV_ENC2_PHY = TEMP_DOC
ELSEIF ( ( I = 3 ) )  PREV_ENC3_REG_DT_TM = FORMAT (E.REG_DT_TM, "MM/DD/YYYY HH:MM;;D" ),
 PREV_ENC3_TYPE = TEMP_TYPE ,  PREV_ENC3_PHY = TEMP_DOC
ENDIF
 
 WITH  DONTCARE = EP , OUTERJOIN = D1 , DONTCARE = DOC , OUTERJOIN = D2
 
SET  EST_DT_TM  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> EST_ARRIVE_DT_TM ,
"MM/DD/YYYY HH:MM;;D" )
 
SET  EST_DT  =  SUBSTRING ( 1 ,  10 ,  EST_DT_TM )
 
SET  EST_TM  =  SUBSTRING ( 12 ,  16 ,  EST_DT_TM )
 
SET  REG_DT_TM  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> REG_DT_TM ,
"MM/DD/YYYY HH:MM;;D" )
 
SET  REG_DT  =  SUBSTRING ( 1 ,  10 ,  REG_DT_TM )
 
SET  REG_TM  =  SUBSTRING ( 12 ,  16 ,  REG_DT_TM )
 
SET  REASON4VISIT  =  SUBSTRING ( 1 ,  40 ,  REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER ->
 REASON_FOR_VISIT )
 
SET  ACC_DT_TM  =  FORMAT ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> ACCIDENT_01 ->
 ACCIDENT_DT_TM , "MM/DD/YYYY HH:MM;;D" )
 
# MAIN
 
SELECT  INTO  $1
 PAT_SEX_DP = SUBSTRING ( 1 ,  7 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SEX_CD )),
 UPAT_SEX_DP = CNVTUPPER ( SUBSTRING ( 1 ,  6 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA ->
 PERSON -> SEX_CD ))),
 PAT_RACE_DP = SUBSTRING ( 1 ,  32 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 RACE_CD )),
 PAT_MS_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> MARITAL_TYPE_CD ),
 PAT_RELG_DP = SUBSTRING ( 1 ,  25 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 RELIGION_CD )),
 PAT_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 HOME_ADDRESS -> STATE_CD )),
 PAT_EMPL_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 EMPLOYER_01 -> ADDRESS -> STATE_CD )),
 GUA_SEX_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON ->
 SEX_CD ),
 GUA_MS_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 -> PERSON ->
 MARITAL_TYPE_CD ),
 GUA_RELTN_DP = SUBSTRING ( 1 ,  15 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 GUARANTOR_01 -> RELATED_PERSON_RELTN_CD )),
 GUA_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 GUARANTOR_01 -> PERSON -> HOME_ADDRESS -> STATE_CD )),
 GUA_EMPL_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 GUARANTOR_01 -> PERSON -> EMPLOYER_01 -> ADDRESS -> STATE_CD )),
 GUA_EMPL_STATUS = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> GUARANTOR_01 ->
 PERSON -> EMPLOYER_01 -> EMPL_STATUS_CD ),
 ;Change for CAB:20021
; EMC_SEX_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> EMC -> PERSON -> SEX_CD ),
 EMC_RELTN_DP = SUBSTRING ( 1 ,  20 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 EMC -> RELATED_PERSON_RELTN_CD )),
 EMC_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 EMC -> PERSON -> HOME_ADDRESS -> STATE_CD )),
 ;changes made by m061596 for CAB:20021
 NOK_SEX_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> NOK -> PERSON -> SEX_CD ),
 NOK_RELTN_DP = SUBSTRING ( 1 ,  20 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 NOK -> RELATED_PERSON_RELTN_CD )),
 NOK_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 NOK -> PERSON -> HOME_ADDRESS -> STATE_CD )),
 ;changes ended here for CAB:20021
 S1_SEX_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON ->
 SEX_CD ),
 S1_MS_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 -> PERSON ->
 MARITAL_TYPE_CD ),
 S1_RELTN_DP = SUBSTRING ( 1 ,  20 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_01 -> RELATED_PERSON_RELTN_CD )),
 S1_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_01 -> PERSON -> HOME_ADDRESS -> STATE_CD )),
 S1_EMPL_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_01 -> PERSON -> EMPLOYER_01 -> ADDRESS -> STATE_CD )),
 S1_EMPL_STATUS = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_01 ->
 PERSON -> EMPLOYER_01 -> EMPL_STATUS_CD ),
 S1_PLAN_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_01 -> PERSON -> HEALTH_PLAN -> ADDRESS -> STATE_CD )),
 S2_SEX_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON ->
 SEX_CD ),
 S2_MS_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 -> PERSON ->
 MARITAL_TYPE_CD ),
 S2_RELTN_DP = SUBSTRING ( 1 ,  30 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_02 -> RELATED_PERSON_RELTN_CD )),
 S2_HM_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_02 -> PERSON -> HOME_ADDRESS -> STATE_CD )),
 S2_EMPL_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_02 -> PERSON -> EMPLOYER_01 -> ADDRESS -> STATE_CD )),
 S2_EMPL_STATUS = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> SUBSCRIBER_02 ->
 PERSON -> EMPLOYER_01 -> EMPL_STATUS_CD ),
 S2_PLAN_ST_DP = SUBSTRING ( 1 ,  14 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 SUBSCRIBER_02 -> PERSON -> HEALTH_PLAN -> ADDRESS -> STATE_CD )),
 ENCNTR_TYPE_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER ->
 ENCNTR_TYPE_CD ),
 ADM_TYPE_DP = SUBSTRING ( 1 ,  22 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> ADMIT_TYPE_CD )),
 ADM_MODE_DP = SUBSTRING ( 1 ,  22 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> ADMIT_MODE_CD )),
 ADM_SRC_DP = SUBSTRING ( 1 ,  30 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> ADMIT_SRC_CD )),
 VIP_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> VIP_CD ),
 CONFID_LEVEL_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> CONFID_LEVEL_CD ),
 FACILITY_DP = CNVTUPPER ( TRIM ( UAR_GET_CODE_DESCRIPTION ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> LOC_FACILITY_CD ))),
 NURSE_STN_DP = TRIM ( UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER ->
 LOC_NURSE_UNIT_CD )),
 ROOM_DP = SUBSTRING ( 1 ,  6 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> LOC_ROOM_CD )),
 BED_DP = SUBSTRING ( 1 ,  4 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> LOC_BED_CD )),
 MED_SRV_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER ->
 MED_SERVICE_CD ),
 ADR_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> PATIENT -> LIVING_WILL_CD ),
 DISEASE_ALERT_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> DISEASE_ALERT_CD ),
 ISOL_CD_DP = UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON -> ENCOUNTER -> ISOLATION_CD
),
 ACC_TYPE_DP = SUBSTRING ( 1 ,  40 ,  UAR_GET_CODE_DISPLAY ( REQUEST -> PATIENT_DATA -> PERSON ->
 ENCOUNTER -> ACCIDENT_01 -> ACCIDENT_CD ))
FROM ( DUMMYT  D )
 PLAN ( D )
 
 
DETAIL
 TRACK_TYPE_DP = SUBSTRING ( 1 ,  2 ,  UAR_GET_CODE_DISPLAY ( TRACK_TYPE )),
 TRACK = CONCAT ( TRIM ( TRACK_TYPE_DP ), "-" ,  CNVTSTRING ( TRACK_ID )),
 BARCODE_TRACK = CONCAT ("*" ,  CNVTALPHANUM ( TRACK ), "*" ),
 
IF ( ( TEXTLEN ( TRIM ( PAT_HM_CITY ))> 0 ) )  PAT_HM_CITY_ST = CONCAT ( TRIM ( PAT_HM_CITY ),
 ", " ,  TRIM ( PAT_HM_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( PAT_EMPL_CITY ))> 0 ) )  PAT_EMPL_CITY_ST = CONCAT ( TRIM ( PAT_EMPL_CITY )
, ", " ,  TRIM ( PAT_EMPL_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( GUA_HM_CITY ))> 0 ) )  GUA_HM_CITY_ST = CONCAT ( TRIM ( GUA_HM_CITY ),
 ", " ,  TRIM ( GUA_HM_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( GUA_EMPL_CITY ))> 0 ) )  GUA_EMPL_CITY_ST = CONCAT ( TRIM ( GUA_EMPL_CITY )
, ", " ,  TRIM ( GUA_EMPL_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( EMC_HM_CITY ))> 0 ) )  EMC_HM_CITY_ST = CONCAT ( TRIM ( EMC_HM_CITY ),
 ", " ,  TRIM ( EMC_HM_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( NOK_HM_CITY ))> 0 ) )  NOK_HM_CITY_ST = CONCAT ( TRIM ( NOK_HM_CITY ),
 ", " ,  TRIM ( NOK_HM_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( S1_EMPL_CITY ))> 0 ) )  S1_EMPL_CITY_ST = CONCAT ( TRIM ( S1_EMPL_CITY ),
", " ,  TRIM ( S1_EMPL_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( S1_PLAN_CITY ))> 0 ) )  S1_PLAN_CITY_ST = CONCAT ( TRIM ( S1_PLAN_CITY ),
", " ,  TRIM ( S1_PLAN_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( S2_EMPL_CITY ))> 0 ) )  S2_EMPL_CITY_ST = CONCAT ( TRIM ( S2_EMPL_CITY ),
", " ,  TRIM ( S2_EMPL_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( S2_PLAN_CITY ))> 0 ) )  S2_PLAN_CITY_ST = CONCAT ( TRIM ( S2_PLAN_CITY ),
", " ,  TRIM ( S2_PLAN_ST_DP ))
ENDIF
,
 
IF ( ( TEXTLEN ( TRIM ( ACC_DT_TM ))> 0 ) )  ACC_IND ="Y"
ELSE   ACC_IND ="N"
ENDIF
,
 CUR_ROW = 32 ,
 NEXT_LINE = 9 ,
 NEXT_SECTION = 11 ,
 NEXT_LINE2 = 14 ,
 COL_ONE = 61 ,
 COL_ONEHALF = 200,
 COL_TWO = 263 ,
 COL_TWOHALF = 313,
 COL_THREE = 428 ,
 COL_THREEHALF = 468,
 NAME_COL = 61 ,
 SEX_COL = 228 ,
 AGE_COL = 428 ,
 MS_COL = 450 ,
 AGE2_COL = 380 ,
 SSN_COL = 283 ,
 HM_ADDR_COL = 112 ,
 CITY1_COL = 332 ,
 EMPL_ADDR_COL = 125 ,
 CLAIM_ADDR_COL = 117 ,
 CITY2_COL = 110 ,
 PREV_DATE_COL = 66 ,
 PREV_TYPE_COL = 153 ,
 PREV_PHY_COL = 235 ,
 VISIT_ADMIT_COL = 335 ,
 VISIT_TYPE_COL = 472 ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 220 ,  CUR_ROW )),
"{CPI/13}{FONT/4}{B}" ,
">>>>>>>> PATIENT INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
"{CPI/13}" ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Name: " ,
 PAT_NAME_23 ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"DOB: " ,
 PAT_DOB ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Previous Name: " ,
 PAT_PREV_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Race: " ,
 PAT_RACE_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Age: " ,
 PAT_AGE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Home Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS (( HM_ADDR_COL + 8 ),  CUR_ROW )),
 PAT_HM_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Home Phone: " ,
 PAT_HM_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Sex: " ,
 PAT_SEX_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 PAT_HM_ADDR2 ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
 "Cell Phone: " ,
 PAT_CELL_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Religion: " ,
 PAT_RELG_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 PAT_HM_CITY_ST ,
 PAT_HM_ZIPCODE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
 "Work Phone: " ,
 PAT_WK_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"MS: " ,
 PAT_MS_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_SECTION ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 220 ,  CUR_ROW )),
"{CPI/15}{FONT/4}{B}" ,
">>>>>>>> EMPLOYER INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Name: " ,
 PAT_EMPL_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employer Phone: " ,
 PAT_EMPL_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( EMPL_ADDR_COL ,  CUR_ROW )),
 PAT_EMPL_ADDR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 PAT_EMPL_ADDR2 ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 PAT_EMPL_CITY_ST ,
 PAT_EMPL_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_SECTION ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 215 ,  CUR_ROW )),
"{B}>>>>>>>> GUARANTOR INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Name: " ,
 GUA_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"DOB: " ,
 GUA_DOB ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Patient's Reltn to GT: " ,
 GUA_RELTN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Home Phone: " ,
 GUA_HM_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Age: " ,
 GUA_AGE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Billing Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( CLAIM_ADDR_COL ,  CUR_ROW )),
 GUA_HM_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employment Status: " ,
 GUA_EMPL_STATUS ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Sex: " ,
 GUA_SEX_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 GUA_HM_ADDR2 ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 GUA_HM_CITY_ST ,
 GUA_HM_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Name: " ,
 GUA_EMPL_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employer Phone: " ,
 GUA_EMPL_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( EMPL_ADDR_COL ,  CUR_ROW )),
 GUA_EMPL_ADDR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 GUA_EMPL_ADDR2 ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 GUA_EMPL_CITY_ST ,
 GUA_EMPL_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_SECTION ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 190 ,  CUR_ROW )),
 
 ;changes made by m061596 on 3/15 2011for CAB: 20021
 "{B}>>>>>>>> EMERGENCY/NOK CONTACT INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 "EMC Name: " ,
 EMC_NAME ,
 ROW + 1 ,
 
;001  CALL PRINT ( CALCPOS ( COL_ONEHALF ,  CUR_ROW )),
;001  "DOB: " ,
;001  EMC_DOB ,
;001  ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWOHALF ,  CUR_ROW )),
 "NOK Name: " ,
 NOK_Name ,
 ROW + 1 ,
 
;001  CALL PRINT ( CALCPOS ( COL_THREEHALF ,  CUR_ROW )),
;001  "DOB: " ,
;001  NOK_DOB ,
;001  ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Patient's Reltn to EMC: " ,
 EMC_RELTN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONEHALF ,  CUR_ROW )),
 "Home Phone: " ,
 EMC_HM_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWOHALF ,  CUR_ROW )),
 "Patient's Reltn to NOK: " ,
 NOK_RELTN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREEHALF ,  CUR_ROW )),
 "Home Phone: " ,
 NOK_HM_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 "Home Address: " ,
 EMC_HM_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWOHALF ,  CUR_ROW )),
 "Home Address: " ,
 NOK_HM_ADDR ,
 ROW + 1 ,
 
;001  CALL PRINT ( CALCPOS ( COL_THREEHALF ,  CUR_ROW )),
;001  "Age: " ,
;001  NOK_AGE ,
;001  ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 EMC_HM_ADDR2 ,
 ROW +1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWOHALF ,  CUR_ROW )),
 NOK_HM_ADDR2 ,
 ROW + 1 ,
 
;001  CALL PRINT ( CALCPOS ( COL_THREEHALF ,  CUR_ROW )),
;001  "Sex: " ,
;001  NOK_SEX_DP ,
;001  ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 EMC_HM_CITY_ST ,
 EMC_HM_ZIPCODE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWOHALF ,  CUR_ROW )),
 NOK_HM_CITY_ST ,
 NOK_HM_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_SECTION ),
 ROW +1 ,
 
 CALL PRINT ( CALCPOS ( 175 ,  CUR_ROW )),
"{B}>>>>>>>> PRIMARY INSURED/INSURANCE INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Name: " ,
 S1_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"DOB: " ,
 S1_DOB ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Patient's Reltn to Sub1: " ,
 S1_RELTN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Age: " ,
 S1_AGE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Name: " ,
 S1_EMPL_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employer Phone: " ,
 S1_EMPL_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Sex: " ,
 S1_SEX_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( EMPL_ADDR_COL ,  CUR_ROW )),
 S1_EMPL_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employment Status: " ,
 S1_EMPL_STATUS ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S1_EMPL_ADDR2 ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S1_EMPL_CITY_ST ,
 S1_EMPL_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Insurance Name: " ,
 S1_PLAN_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Policy Number: " ,
 S1_POLICY_NO ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Phone Number: " ,
 S1_PLAN_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Claim's Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( CLAIM_ADDR_COL ,  CUR_ROW )),
 S1_PLAN_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Authorization Number: " ,
 S1_PRECERT_NO ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Authorization Phone Number: " ,
 S1_PRECERT_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S1_PLAN_ADDR2 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Group Number: " ,
 S1_GROUP_NO ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S1_PLAN_CITY_ST ,
 S1_PLAN_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_SECTION ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 170 ,  CUR_ROW )),
"{B}>>>>>>>> SECONDARY INSURED/INSURANCE INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Name: " ,
 S2_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"DOB: " ,
 S2_DOB ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Patient's Reltn to Sub2: " ,
 S2_RELTN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Age: " ,
 S2_AGE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Name: " ,
 S2_EMPL_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employer Phone: " ,
 S2_EMPL_PHONE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Sex: " ,
 S2_SEX_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Employer Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( EMPL_ADDR_COL ,  CUR_ROW )),
 S2_EMPL_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Employment Status: " ,
 S2_EMPL_STATUS ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S2_EMPL_ADDR2 ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S2_EMPL_CITY_ST ,
 S2_EMPL_ZIPCODE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Insurance Name: " ,
 S2_PLAN_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Policy Number: " ,
 S2_POLICY_NO ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Phone Number: " ,
 S2_PLAN_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
"Claim's Address: " ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( CLAIM_ADDR_COL ,  CUR_ROW )),
 S2_PLAN_ADDR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Authorization Number: " ,
 S2_PRECERT_NO ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_THREE ,  CUR_ROW )),
"Authorization Phone Number: " ,
 S2_PRECERT_PHONE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S2_PLAN_ADDR2 ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_TWO ,  CUR_ROW )),
"Group Number: " ,
 S2_GROUP_NO ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( COL_ONE ,  CUR_ROW )),
 S2_PLAN_CITY_ST ,
 S2_PLAN_ZIPCODE ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 375 ,  CUR_ROW )),
"{B}>>>>>>>> VISIT INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW +( NEXT_LINE * 2 )),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Reg Date/Time: " ,
 REG_DT_TM ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 454 ,  CUR_ROW )),
"Patient Type: " ,
 ENCNTR_TYPE_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Admit Type: " ,
 ADM_TYPE_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_TYPE_COL ,  CUR_ROW )),
"Reg Clerk: " ,
 ADMIT_CLERK ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Admit Source: " ,
 ADM_SRC_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Admit Reason: " ,
 REASON4VISIT ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Estimated Date of Arrival: " ,
 EST_DT_TM ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Admitting Physician: " ,
 ADMIT_DOCTOR ,
 ADMIT_DOC_NO ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Attending Physician: " ,
 ATTEND_DOCTOR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
IF (PCP_FREE_TEXT != "")
 
  CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
 "Primary Care Physician: " ,
 PCP_DOCTOR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
  CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
 "Free Text: " ,
 PCP_FREE_TEXT ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1
 
ELSE
 
  CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
 "Primary Care Physician: " ,
 PCP_DOCTOR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1
 
 ENDIF
 
 CALL PRINT ( CALCPOS ( 90 ,  CUR_ROW )),
"{B}>>>>>>>> ACCIDENT INFORMATION <<<<<<<<{ENDB}" ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"VIP Indicator: " ,
 VIP_DP ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Disease Alert: " ,
 DISEASE_ALERT_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Isolation: " ,
 ISOL_CD_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( NAME_COL ,  CUR_ROW )),
"Accident: " ,
 ACC_IND ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( PREV_TYPE_COL ,  CUR_ROW )),
"Accident Date/Time: " ,
 ACC_DT_TM ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Advance Directive: " ,
 ADR_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( NAME_COL ,  CUR_ROW )),
"Accident Type: " ,
 ACC_TYPE_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Location: " ,
 NURSE_STN_DP ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_TYPE_COL ,  CUR_ROW )),
"Room/Bed: " ,
 ROOM_DP ,
"/" ,
 BED_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
"Medical Service: " ,
 MED_SRV_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE ),
 ROW + 1 ,
"{CPI/9}{FONT/4}" ,
 CUR_ROW =( CUR_ROW + NEXT_LINE2 ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( NAME_COL ,  CUR_ROW )),
 UPAT_NAME ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL ,  CUR_ROW )),
 UPAT_SEX_DP ,
" / " ,
 UPAT_AGE ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE2 ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( NAME_COL ,  CUR_ROW )),
"MRN: " ,
 MRN ,
 ROW + 1 ,
 
 CALL PRINT (CALCPOS ( NAME_COL +160 , CUR_ROW)),
 "CMRN: ",
 CMRN,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( VISIT_ADMIT_COL + 80 ,  CUR_ROW )),
"FIN: " ,
 FNBR ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE2 ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( NAME_COL ,  CUR_ROW )),
 FACILITY_DP ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE2 ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( AGE_COL ,  CUR_ROW )),
"Print Dt/Tm: " ,
 CURDATE ,
"  " ,
 CURTIME ,
 ROW + 1 ,
 CUR_ROW =( CUR_ROW + NEXT_LINE2 ),
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 120 ,  CUR_ROW )),
 "{BCR/100}{FR/0}{CPI/6}{F/28/2}" ,
 BARCODE_FNBR ,
 ROW + 1 ,
 
 CALL PRINT ( CALCPOS ( 350 ,  CUR_ROW )),
 "{BCR/100}{FR/0}{CPI/6}{F/28/2}" ,
 BARCODE_TRACK
 WITH  NOCOUNTER , MAXROW = 100 , NOFORMFEED , DIO = POSTSCRIPT
 
# END_PROGRAM
 END GO
