# Gaia Injector Plugin

**Note:** You do not need to configure this plugin if you use the Gaia Live Development plugin.

The Gaia Injector plugin allows Gaia to inject custom code into an HTTP
call. The plugin hijacks an HTML-returning call to Cerner Millennium and
injects your custom JavaScript and CSS into the HTML returned from
Cerner Millennium.

The Gaia Injector plugin works by wrapping an HTTP endpoint from Cerner
Millennium, called the target URL, with a new HTTP endpoint that the
system can call in place of the original endpoint. When URL injections
are not configured, the new HTTP endpoint behaves exactly like
the target URL. When URL injections are configured, the new HTTP
endpoint injects specified \<script\> and \<link\> tags into the HTML
returned from the target URL.

To access the Gaia Injector plugin in Gaia, click the `Injector` tab
on the plugin list on the left.

## Configure the Target URL

The target URL is the HTTP endpoint from Cerner Millennium that the Gaia
Injector plugin wraps. Before configuring the target URL, ensure that
the [Gaia Millennium Proxy](https://github.cerner.com/MPagesEcosystem/gaia-plugin-milproxy) plugin
is available and start the Millennium Proxy server.

Complete the following steps to configure the target URL:

1.  In the Target URL box in the Gaia Injector plugin, enter the
    Millennium proxy server URL.

## Select the Parameter Matching Mode

The parameter matching mode selects the behavior of the injector while replaying recorded mock data. The default setting is 'Strict' mode.

1.  **Strict Mode:** Matches the request parameters and blob exactly with the recorded mocks and returns the matching response. If either the parameters or data blob doesn't match, returns a standard JSON object with _Z_ status (the standard CCL response for no data found).
2. **Return First Mode:** Matches the request parameters and blob with the recorded mocks and returns the matching response. If the parameters don't match, the first instance of the response is returned.

## Configure the Intercept URL

The intercept URL connects routes under the target URL to the specified
injection URLs. The intercept URL should be entered as a regular
expression. You can define multiple interception URLs if necessary; for
example, when you have more than one CCL driver script.

Complete the following steps to configure the intercept URL to intercept
the `mp_unified_driver` script:

1.  Click `Add URL` in Gaia Injector plugin.

2.  In the URL to Intercept box, enter the following text:
    `.*mp_unified_driver.*`

## Configure the Injection URLs

You can configure injection URLs to be placed above or below
the \<head\> section in the HTML returned from the intercepted
URL. Injection URLs are injected in the order that they are defined.

Complete the following steps to configure injection URLs

1.  Click `Add` (`+`) in the Top or Bottom section, depending on
    whether you want the injection URL to be placed above or below the
    \<head\> section in the returned HTML. A new injection URL text box
    is displayed in the appropriate section.

2.  In the new text box, enter the full path for the injection URL. For
    example, if you are using the [Gaia Content Server](https://github.cerner.com/MPagesEcosystem/gaia-plugin-contentserver),
    enter

    `http://localhost:7070/js/my-component.js`
    or
    `http://localhost:9001/api/routes/contentserver/content/my-component/js/my-component.js`.
