# Run unit tests on Jest

### Configuration

* Run gaia server
* Navigate to JS Unit Testing -> Config tab
* Select `Jest` as Test Runner


### Mocking externals

With this plugin you can run jasmine specs on Jest.The only difference with Jest is that each external module should be mocked separately and imported in the spec.

* Each external object used in the spec file should be created in `src/__tests__/unit-tests/__mocks__` directory and imported in the spec file.

E.g. 

`i18n.js` in  src/\_\_tests\_\_/unit-tests/\_\_mocks\_\_
```js
module.exports = {
    discernabu: {
        Component: {
            INFO: "Information"
        }
    }
}
```

`spec.js`
```js
import i18n from "i18n";
```

### Running unit tests

Add test script in package.json
```json
"scripts": {
    "test": "gaia unit-testing cli=true"
}
```
Run `npm run test`

Tests can also be run using gaia server

#### Run tests in watch mode over command line

Add `test:watch` script in package.json
```json
"scripts": {
    "test:watch": "gaia unit-testing cli=true watchMode=true"
}
```
Run `npm run test:watch`


#### Debug unit tests

Place `debugger;` statement in the test file where you want to put a debug point

Add `test:debug` script in package.json
```json
"scripts": {
    "test:debug": "gaia unit-testing cli=true debugMode=true"
}
```

* Inspect with Chrome DevTools.
  * Open Chrome Browser and go to `chrome://inspect/`
  * Click on `Open dedicated DevTools for Node` to debug

More Information - https://jestjs.io/docs/en/troubleshooting
