const mockApp = {
    listen: () => {},
    use: () => {}
};
jest.mock("express", () => {
    const mockExpressFunction = () => mockApp;
    mockExpressFunction.Router = () => ({
        use: () => ({
            use: () => {}
        }),
        get: () => {},
        post: () => {}
    });
    mockExpressFunction.urlencoded = () => {};
    mockExpressFunction.static = () => {};

    return mockExpressFunction;
});
jest.mock("express-ws", () => () => {});
const express = require("express");
const expressWs = require("express-ws");
const run = require("../../../../server/index");

describe("The run command", function() {
    afterEach(() => {
        jest.restoreAllMocks();
    });

    it("sets a timeout of a half hour", (done) => {
        mockApp.listen = () => ({
            setTimeout: (timeout) => {
                expect(timeout).toBe(1800000);
                done();
            }
        });

        run({
            port: 1000
        });
    });
});
